function KO(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var C2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qle(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),s}var bS={exports:{}},Uy={},wS={exports:{}},Zs={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR;function Hle(){if(jR)return Zs;jR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(q){return q===null||typeof q!="object"?null:(q=h&&q[h]||q["@@iterator"],typeof q=="function"?q:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function g(q,U,Z){this.props=q,this.context=U,this.refs=x,this.updater=Z||f}g.prototype.isReactComponent={},g.prototype.setState=function(q,U){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,U,"setState")},g.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function b(){}b.prototype=g.prototype;function w(q,U,Z){this.props=q,this.context=U,this.refs=x,this.updater=Z||f}var N=w.prototype=new b;N.constructor=w,v(N,g.prototype),N.isPureReactComponent=!0;var C=Array.isArray,S=Object.prototype.hasOwnProperty,A={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(q,U,Z){var K,se={},ne=null,ie=null;if(U!=null)for(K in U.ref!==void 0&&(ie=U.ref),U.key!==void 0&&(ne=""+U.key),U)S.call(U,K)&&!k.hasOwnProperty(K)&&(se[K]=U[K]);var be=arguments.length-2;if(be===1)se.children=Z;else if(1<be){for(var ue=Array(be),oe=0;oe<be;oe++)ue[oe]=arguments[oe+2];se.children=ue}if(q&&q.defaultProps)for(K in be=q.defaultProps,be)se[K]===void 0&&(se[K]=be[K]);return{$$typeof:t,type:q,key:ne,ref:ie,props:se,_owner:A.current}}function O(q,U){return{$$typeof:t,type:q.type,key:U,ref:q.ref,props:q.props,_owner:q._owner}}function $(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function T(q){var U={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Z){return U[Z]})}var I=/\/+/g;function L(q,U){return typeof q=="object"&&q!==null&&q.key!=null?T(""+q.key):U.toString(36)}function z(q,U,Z,K,se){var ne=typeof q;(ne==="undefined"||ne==="boolean")&&(q=null);var ie=!1;if(q===null)ie=!0;else switch(ne){case"string":case"number":ie=!0;break;case"object":switch(q.$$typeof){case t:case e:ie=!0}}if(ie)return ie=q,se=se(ie),q=K===""?"."+L(ie,0):K,C(se)?(Z="",q!=null&&(Z=q.replace(I,"$&/")+"/"),z(se,U,Z,"",function(oe){return oe})):se!=null&&($(se)&&(se=O(se,Z+(!se.key||ie&&ie.key===se.key?"":(""+se.key).replace(I,"$&/")+"/")+q)),U.push(se)),1;if(ie=0,K=K===""?".":K+":",C(q))for(var be=0;be<q.length;be++){ne=q[be];var ue=K+L(ne,be);ie+=z(ne,U,Z,ue,se)}else if(ue=m(q),typeof ue=="function")for(q=ue.call(q),be=0;!(ne=q.next()).done;)ne=ne.value,ue=K+L(ne,be++),ie+=z(ne,U,Z,ue,se);else if(ne==="object")throw U=String(q),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return ie}function M(q,U,Z){if(q==null)return q;var K=[],se=0;return z(q,K,"","",function(ne){return U.call(Z,ne,se++)}),K}function V(q){if(q._status===-1){var U=q._result;U=U(),U.then(function(Z){(q._status===0||q._status===-1)&&(q._status=1,q._result=Z)},function(Z){(q._status===0||q._status===-1)&&(q._status=2,q._result=Z)}),q._status===-1&&(q._status=0,q._result=U)}if(q._status===1)return q._result.default;throw q._result}var B={current:null},F={transition:null},J={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:F,ReactCurrentOwner:A};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Zs.Children={map:M,forEach:function(q,U,Z){M(q,function(){U.apply(this,arguments)},Z)},count:function(q){var U=0;return M(q,function(){U++}),U},toArray:function(q){return M(q,function(U){return U})||[]},only:function(q){if(!$(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Zs.Component=g,Zs.Fragment=s,Zs.Profiler=a,Zs.PureComponent=w,Zs.StrictMode=n,Zs.Suspense=c,Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Zs.act=ee,Zs.cloneElement=function(q,U,Z){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var K=v({},q.props),se=q.key,ne=q.ref,ie=q._owner;if(U!=null){if(U.ref!==void 0&&(ne=U.ref,ie=A.current),U.key!==void 0&&(se=""+U.key),q.type&&q.type.defaultProps)var be=q.type.defaultProps;for(ue in U)S.call(U,ue)&&!k.hasOwnProperty(ue)&&(K[ue]=U[ue]===void 0&&be!==void 0?be[ue]:U[ue])}var ue=arguments.length-2;if(ue===1)K.children=Z;else if(1<ue){be=Array(ue);for(var oe=0;oe<ue;oe++)be[oe]=arguments[oe+2];K.children=be}return{$$typeof:t,type:q.type,key:se,ref:ne,props:K,_owner:ie}},Zs.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},Zs.createElement=E,Zs.createFactory=function(q){var U=E.bind(null,q);return U.type=q,U},Zs.createRef=function(){return{current:null}},Zs.forwardRef=function(q){return{$$typeof:l,render:q}},Zs.isValidElement=$,Zs.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:V}},Zs.memo=function(q,U){return{$$typeof:d,type:q,compare:U===void 0?null:U}},Zs.startTransition=function(q){var U=F.transition;F.transition={};try{q()}finally{F.transition=U}},Zs.unstable_act=ee,Zs.useCallback=function(q,U){return B.current.useCallback(q,U)},Zs.useContext=function(q){return B.current.useContext(q)},Zs.useDebugValue=function(){},Zs.useDeferredValue=function(q){return B.current.useDeferredValue(q)},Zs.useEffect=function(q,U){return B.current.useEffect(q,U)},Zs.useId=function(){return B.current.useId()},Zs.useImperativeHandle=function(q,U,Z){return B.current.useImperativeHandle(q,U,Z)},Zs.useInsertionEffect=function(q,U){return B.current.useInsertionEffect(q,U)},Zs.useLayoutEffect=function(q,U){return B.current.useLayoutEffect(q,U)},Zs.useMemo=function(q,U){return B.current.useMemo(q,U)},Zs.useReducer=function(q,U,Z){return B.current.useReducer(q,U,Z)},Zs.useRef=function(q){return B.current.useRef(q)},Zs.useState=function(q){return B.current.useState(q)},Zs.useSyncExternalStore=function(q,U,Z){return B.current.useSyncExternalStore(q,U,Z)},Zs.useTransition=function(){return B.current.useTransition()},Zs.version="18.3.1",Zs}var NR;function Uv(){return NR||(NR=1,wS.exports=Hle()),wS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SR;function Gle(){if(SR)return Uy;SR=1;var t=Uv(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},m=null,f=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(f=c.ref);for(u in c)n.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:l,key:m,ref:f,props:h,_owner:a.current}}return Uy.Fragment=s,Uy.jsx=o,Uy.jsxs=o,Uy}var CR;function Yle(){return CR||(CR=1,bS.exports=Gle()),bS.exports}var r=Yle(),k2={},jS={exports:{}},Kl={},NS={exports:{}},SS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function Kle(){return kR||(kR=1,(function(t){function e(F,J){var ee=F.length;F.push(J);e:for(;0<ee;){var q=ee-1>>>1,U=F[q];if(0<a(U,J))F[q]=J,F[ee]=U,ee=q;else break e}}function s(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var J=F[0],ee=F.pop();if(ee!==J){F[0]=ee;e:for(var q=0,U=F.length,Z=U>>>1;q<Z;){var K=2*(q+1)-1,se=F[K],ne=K+1,ie=F[ne];if(0>a(se,ee))ne<U&&0>a(ie,se)?(F[q]=ie,F[ne]=ee,q=ne):(F[q]=se,F[K]=ee,q=K);else if(ne<U&&0>a(ie,ee))F[q]=ie,F[ne]=ee,q=ne;else break e}}return J}function a(F,J){var ee=F.sortIndex-J.sortIndex;return ee!==0?ee:F.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,v=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(F){for(var J=s(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=F)n(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=s(d)}}function C(F){if(x=!1,N(F),!v)if(s(c)!==null)v=!0,V(S);else{var J=s(d);J!==null&&B(C,J.startTime-F)}}function S(F,J){v=!1,x&&(x=!1,b(E),E=-1),f=!0;var ee=m;try{for(N(J),h=s(c);h!==null&&(!(h.expirationTime>J)||F&&!T());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var U=q(h.expirationTime<=J);J=t.unstable_now(),typeof U=="function"?h.callback=U:h===s(c)&&n(c),N(J)}else n(c);h=s(c)}if(h!==null)var Z=!0;else{var K=s(d);K!==null&&B(C,K.startTime-J),Z=!1}return Z}finally{h=null,m=ee,f=!1}}var A=!1,k=null,E=-1,O=5,$=-1;function T(){return!(t.unstable_now()-$<O)}function I(){if(k!==null){var F=t.unstable_now();$=F;var J=!0;try{J=k(!0,F)}finally{J?L():(A=!1,k=null)}}else A=!1}var L;if(typeof w=="function")L=function(){w(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,M=z.port2;z.port1.onmessage=I,L=function(){M.postMessage(null)}}else L=function(){g(I,0)};function V(F){k=F,A||(A=!0,L())}function B(F,J){E=g(function(){F(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||f||(v=!0,V(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var ee=m;m=J;try{return F()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=m;m=F;try{return J()}finally{m=ee}},t.unstable_scheduleCallback=function(F,J,ee){var q=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?q+ee:q):ee=q,F){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ee+U,F={id:u++,callback:J,priorityLevel:F,startTime:ee,expirationTime:U,sortIndex:-1},ee>q?(F.sortIndex=ee,e(d,F),s(c)===null&&F===s(d)&&(x?(b(E),E=-1):x=!0,B(C,ee-q))):(F.sortIndex=U,e(c,F),v||f||(v=!0,V(S))),F},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(F){var J=m;return function(){var ee=m;m=J;try{return F.apply(this,arguments)}finally{m=ee}}}})(SS)),SS}var _R;function Xle(){return _R||(_R=1,NS.exports=Kle()),NS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function Qle(){if(AR)return Kl;AR=1;var t=Uv(),e=Xle();function s(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,_=1;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(p,y){o(p,y),o(p+"Capture",y)}function o(p,y){for(a[p]=y,p=0;p<y.length;p++)n.add(y[p])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function m(p){return c.call(h,p)?!0:c.call(u,p)?!1:d.test(p)?h[p]=!0:(u[p]=!0,!1)}function f(p,y,_,D){if(_!==null&&_.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return D?!1:_!==null?!_.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function v(p,y,_,D){if(y===null||typeof y>"u"||f(p,y,_,D))return!0;if(D)return!1;if(_!==null)switch(_.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function x(p,y,_,D,G,te,ge){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=D,this.attributeNamespace=G,this.mustUseProperty=_,this.propertyName=p,this.type=y,this.sanitizeURL=te,this.removeEmptyString=ge}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){g[p]=new x(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var y=p[0];g[y]=new x(y,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){g[p]=new x(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){g[p]=new x(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){g[p]=new x(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){g[p]=new x(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){g[p]=new x(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){g[p]=new x(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){g[p]=new x(p,5,!1,p.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function w(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var y=p.replace(b,w);g[y]=new x(y,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var y=p.replace(b,w);g[y]=new x(y,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var y=p.replace(b,w);g[y]=new x(y,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){g[p]=new x(p,1,!1,p.toLowerCase(),null,!1,!1)}),g.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){g[p]=new x(p,1,!1,p.toLowerCase(),null,!0,!0)});function N(p,y,_,D){var G=g.hasOwnProperty(y)?g[y]:null;(G!==null?G.type!==0:D||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(v(y,_,G,D)&&(_=null),D||G===null?m(y)&&(_===null?p.removeAttribute(y):p.setAttribute(y,""+_)):G.mustUseProperty?p[G.propertyName]=_===null?G.type===3?!1:"":_:(y=G.attributeName,D=G.attributeNamespace,_===null?p.removeAttribute(y):(G=G.type,_=G===3||G===4&&_===!0?"":""+_,D?p.setAttributeNS(D,y,_):p.setAttribute(y,_))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),F=Symbol.iterator;function J(p){return p===null||typeof p!="object"?null:(p=F&&p[F]||p["@@iterator"],typeof p=="function"?p:null)}var ee=Object.assign,q;function U(p){if(q===void 0)try{throw Error()}catch(_){var y=_.stack.trim().match(/\n( *(at )?)/);q=y&&y[1]||""}return`
`+q+p}var Z=!1;function K(p,y){if(!p||Z)return"";Z=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(ft){var D=ft}Reflect.construct(p,[],y)}else{try{y.call()}catch(ft){D=ft}p.call(y.prototype)}else{try{throw Error()}catch(ft){D=ft}p()}}catch(ft){if(ft&&D&&typeof ft.stack=="string"){for(var G=ft.stack.split(`
`),te=D.stack.split(`
`),ge=G.length-1,Me=te.length-1;1<=ge&&0<=Me&&G[ge]!==te[Me];)Me--;for(;1<=ge&&0<=Me;ge--,Me--)if(G[ge]!==te[Me]){if(ge!==1||Me!==1)do if(ge--,Me--,0>Me||G[ge]!==te[Me]){var Ve=`
`+G[ge].replace(" at new "," at ");return p.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",p.displayName)),Ve}while(1<=ge&&0<=Me);break}}}finally{Z=!1,Error.prepareStackTrace=_}return(p=p?p.displayName||p.name:"")?U(p):""}function se(p){switch(p.tag){case 5:return U(p.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return p=K(p.type,!1),p;case 11:return p=K(p.type.render,!1),p;case 1:return p=K(p.type,!0),p;default:return""}}function ne(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case k:return"Fragment";case A:return"Portal";case O:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case z:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case T:return(p.displayName||"Context")+".Consumer";case $:return(p._context.displayName||"Context")+".Provider";case I:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case M:return y=p.displayName||null,y!==null?y:ne(p.type)||"Memo";case V:y=p._payload,p=p._init;try{return ne(p(y))}catch{}}return null}function ie(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=y.render,p=p.displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(y);case 8:return y===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function be(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function ue(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function oe(p){var y=ue(p)?"checked":"value",_=Object.getOwnPropertyDescriptor(p.constructor.prototype,y),D=""+p[y];if(!p.hasOwnProperty(y)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var G=_.get,te=_.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return G.call(this)},set:function(ge){D=""+ge,te.call(this,ge)}}),Object.defineProperty(p,y,{enumerable:_.enumerable}),{getValue:function(){return D},setValue:function(ge){D=""+ge},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function pe(p){p._valueTracker||(p._valueTracker=oe(p))}function ye(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var _=y.getValue(),D="";return p&&(D=ue(p)?p.checked?"true":"false":p.value),p=D,p!==_?(y.setValue(p),!0):!1}function $e(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function Se(p,y){var _=y.checked;return ee({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_??p._wrapperState.initialChecked})}function Y(p,y){var _=y.defaultValue==null?"":y.defaultValue,D=y.checked!=null?y.checked:y.defaultChecked;_=be(y.value!=null?y.value:_),p._wrapperState={initialChecked:D,initialValue:_,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Le(p,y){y=y.checked,y!=null&&N(p,"checked",y,!1)}function xe(p,y){Le(p,y);var _=be(y.value),D=y.type;if(_!=null)D==="number"?(_===0&&p.value===""||p.value!=_)&&(p.value=""+_):p.value!==""+_&&(p.value=""+_);else if(D==="submit"||D==="reset"){p.removeAttribute("value");return}y.hasOwnProperty("value")?Ue(p,y.type,_):y.hasOwnProperty("defaultValue")&&Ue(p,y.type,be(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(p.defaultChecked=!!y.defaultChecked)}function mt(p,y,_){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var D=y.type;if(!(D!=="submit"&&D!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+p._wrapperState.initialValue,_||y===p.value||(p.value=y),p.defaultValue=y}_=p.name,_!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,_!==""&&(p.name=_)}function Ue(p,y,_){(y!=="number"||$e(p.ownerDocument)!==p)&&(_==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+_&&(p.defaultValue=""+_))}var xt=Array.isArray;function ut(p,y,_,D){if(p=p.options,y){y={};for(var G=0;G<_.length;G++)y["$"+_[G]]=!0;for(_=0;_<p.length;_++)G=y.hasOwnProperty("$"+p[_].value),p[_].selected!==G&&(p[_].selected=G),G&&D&&(p[_].defaultSelected=!0)}else{for(_=""+be(_),y=null,G=0;G<p.length;G++){if(p[G].value===_){p[G].selected=!0,D&&(p[G].defaultSelected=!0);return}y!==null||p[G].disabled||(y=p[G])}y!==null&&(y.selected=!0)}}function Ot(p,y){if(y.dangerouslySetInnerHTML!=null)throw Error(s(91));return ee({},y,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function tt(p,y){var _=y.value;if(_==null){if(_=y.children,y=y.defaultValue,_!=null){if(y!=null)throw Error(s(92));if(xt(_)){if(1<_.length)throw Error(s(93));_=_[0]}y=_}y==null&&(y=""),_=y}p._wrapperState={initialValue:be(_)}}function st(p,y){var _=be(y.value),D=be(y.defaultValue);_!=null&&(_=""+_,_!==p.value&&(p.value=_),y.defaultValue==null&&p.defaultValue!==_&&(p.defaultValue=_)),D!=null&&(p.defaultValue=""+D)}function At(p){var y=p.textContent;y===p._wrapperState.initialValue&&y!==""&&y!==null&&(p.value=y)}function Yt(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yr(p,y){return p==null||p==="http://www.w3.org/1999/xhtml"?Yt(y):p==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var Zt,Vt=(function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,_,D,G){MSApp.execUnsafeLocalFunction(function(){return p(y,_,D,G)})}:p})(function(p,y){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=y;else{for(Zt=Zt||document.createElement("div"),Zt.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=Zt.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;y.firstChild;)p.appendChild(y.firstChild)}});function tr(p,y){if(y){var _=p.firstChild;if(_&&_===p.lastChild&&_.nodeType===3){_.nodeValue=y;return}}p.textContent=y}var $t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dr=["Webkit","ms","Moz","O"];Object.keys($t).forEach(function(p){Dr.forEach(function(y){y=y+p.charAt(0).toUpperCase()+p.substring(1),$t[y]=$t[p]})});function Er(p,y,_){return y==null||typeof y=="boolean"||y===""?"":_||typeof y!="number"||y===0||$t.hasOwnProperty(p)&&$t[p]?(""+y).trim():y+"px"}function hr(p,y){p=p.style;for(var _ in y)if(y.hasOwnProperty(_)){var D=_.indexOf("--")===0,G=Er(_,y[_],D);_==="float"&&(_="cssFloat"),D?p.setProperty(_,G):p[_]=G}}var Ct=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function is(p,y){if(y){if(Ct[p]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(s(137,p));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(s(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(s(61))}if(y.style!=null&&typeof y.style!="object")throw Error(s(62))}}function cr(p,y){if(p.indexOf("-")===-1)return typeof y.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=null;function kt(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var zt=null,or=null,Re=null;function Je(p){if(p=af(p)){if(typeof zt!="function")throw Error(s(280));var y=p.stateNode;y&&(y=Fp(y),zt(p.stateNode,p.type,y))}}function bt(p){or?Re?Re.push(p):Re=[p]:or=p}function gr(){if(or){var p=or,y=Re;if(Re=or=null,Je(p),y)for(p=0;p<y.length;p++)Je(y[p])}}function je(p,y){return p(y)}function Ce(){}var Qe=!1;function He(p,y,_){if(Qe)return p(y,_);Qe=!0;try{return je(p,y,_)}finally{Qe=!1,(or!==null||Re!==null)&&(Ce(),gr())}}function vt(p,y){var _=p.stateNode;if(_===null)return null;var D=Fp(_);if(D===null)return null;_=D[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(p=p.type,D=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!D;break e;default:p=!1}if(p)return null;if(_&&typeof _!="function")throw Error(s(231,y,typeof _));return _}var le=!1;if(l)try{var Ee={};Object.defineProperty(Ee,"passive",{get:function(){le=!0}}),window.addEventListener("test",Ee,Ee),window.removeEventListener("test",Ee,Ee)}catch{le=!1}function We(p,y,_,D,G,te,ge,Me,Ve){var ft=Array.prototype.slice.call(arguments,3);try{y.apply(_,ft)}catch(Ht){this.onError(Ht)}}var at=!1,nt=null,It=!1,vr=null,Xt={onError:function(p){at=!0,nt=p}};function Mt(p,y,_,D,G,te,ge,Me,Ve){at=!1,nt=null,We.apply(Xt,arguments)}function Gt(p,y,_,D,G,te,ge,Me,Ve){if(Mt.apply(this,arguments),at){if(at){var ft=nt;at=!1,nt=null}else throw Error(s(198));It||(It=!0,vr=ft)}}function Wt(p){var y=p,_=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(_=y.return),p=y.return;while(p)}return y.tag===3?_:null}function xr(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function Cr(p){if(Wt(p)!==p)throw Error(s(188))}function Pr(p){var y=p.alternate;if(!y){if(y=Wt(p),y===null)throw Error(s(188));return y!==p?null:p}for(var _=p,D=y;;){var G=_.return;if(G===null)break;var te=G.alternate;if(te===null){if(D=G.return,D!==null){_=D;continue}break}if(G.child===te.child){for(te=G.child;te;){if(te===_)return Cr(G),p;if(te===D)return Cr(G),y;te=te.sibling}throw Error(s(188))}if(_.return!==D.return)_=G,D=te;else{for(var ge=!1,Me=G.child;Me;){if(Me===_){ge=!0,_=G,D=te;break}if(Me===D){ge=!0,D=G,_=te;break}Me=Me.sibling}if(!ge){for(Me=te.child;Me;){if(Me===_){ge=!0,_=te,D=G;break}if(Me===D){ge=!0,D=te,_=G;break}Me=Me.sibling}if(!ge)throw Error(s(189))}}if(_.alternate!==D)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?p:y}function Gr(p){return p=Pr(p),p!==null?os(p):null}function os(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=os(p);if(y!==null)return y;p=p.sibling}return null}var ws=e.unstable_scheduleCallback,Wa=e.unstable_cancelCallback,xi=e.unstable_shouldYield,Ao=e.unstable_requestPaint,Vs=e.unstable_now,Gc=e.unstable_getCurrentPriorityLevel,io=e.unstable_ImmediatePriority,da=e.unstable_UserBlockingPriority,Eo=e.unstable_NormalPriority,qe=e.unstable_LowPriority,Fs=e.unstable_IdlePriority,Xs=null,ta=null;function ts(p){if(ta&&typeof ta.onCommitFiberRoot=="function")try{ta.onCommitFiberRoot(Xs,p,void 0,(p.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:Kt,$l=Math.log,Fe=Math.LN2;function Kt(p){return p>>>=0,p===0?32:31-($l(p)/Fe|0)|0}var kr=64,Vr=4194304;function gs(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function dn(p,y){var _=p.pendingLanes;if(_===0)return 0;var D=0,G=p.suspendedLanes,te=p.pingedLanes,ge=_&268435455;if(ge!==0){var Me=ge&~G;Me!==0?D=gs(Me):(te&=ge,te!==0&&(D=gs(te)))}else ge=_&~G,ge!==0?D=gs(ge):te!==0&&(D=gs(te));if(D===0)return 0;if(y!==0&&y!==D&&(y&G)===0&&(G=D&-D,te=y&-y,G>=te||G===16&&(te&4194240)!==0))return y;if((D&4)!==0&&(D|=_&16),y=p.entangledLanes,y!==0)for(p=p.entanglements,y&=D;0<y;)_=31-es(y),G=1<<_,D|=p[_],y&=~G;return D}function oo(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hs(p,y){for(var _=p.suspendedLanes,D=p.pingedLanes,G=p.expirationTimes,te=p.pendingLanes;0<te;){var ge=31-es(te),Me=1<<ge,Ve=G[ge];Ve===-1?((Me&_)===0||(Me&D)!==0)&&(G[ge]=oo(Me,y)):Ve<=y&&(p.expiredLanes|=Me),te&=~Me}}function Po(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function lo(){var p=kr;return kr<<=1,(kr&4194240)===0&&(kr=64),p}function Yc(p){for(var y=[],_=0;31>_;_++)y.push(p);return y}function Dl(p,y,_){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,y=31-es(y),p[y]=_}function Kc(p,y){var _=p.pendingLanes&~y;p.pendingLanes=y,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=y,p.mutableReadLanes&=y,p.entangledLanes&=y,y=p.entanglements;var D=p.eventTimes;for(p=p.expirationTimes;0<_;){var G=31-es(_),te=1<<G;y[G]=0,D[G]=-1,p[G]=-1,_&=~te}}function Vm(p,y){var _=p.entangledLanes|=y;for(p=p.entanglements;_;){var D=31-es(_),G=1<<D;G&y|p[D]&y&&(p[D]|=y),_&=~G}}var hn=0;function Fd(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var Wm,jp,Sg,Cg,qm,Bd=!1,fc=[],Xc=null,zo=null,Rl=null,ms=new Map,Fh=new Map,Qc=[],xy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(p,y){switch(p){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":ms.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(y.pointerId)}}function xl(p,y,_,D,G,te){return p===null||p.nativeEvent!==te?(p={blockedOn:y,domEventName:_,eventSystemFlags:D,nativeEvent:te,targetContainers:[G]},y!==null&&(y=af(y),y!==null&&jp(y)),p):(p.eventSystemFlags|=D,y=p.targetContainers,G!==null&&y.indexOf(G)===-1&&y.push(G),p)}function Ud(p,y,_,D,G){switch(y){case"focusin":return Xc=xl(Xc,p,y,_,D,G),!0;case"dragenter":return zo=xl(zo,p,y,_,D,G),!0;case"mouseover":return Rl=xl(Rl,p,y,_,D,G),!0;case"pointerover":var te=G.pointerId;return ms.set(te,xl(ms.get(te)||null,p,y,_,D,G)),!0;case"gotpointercapture":return te=G.pointerId,Fh.set(te,xl(Fh.get(te)||null,p,y,_,D,G)),!0}return!1}function _g(p){var y=Xu(p.target);if(y!==null){var _=Wt(y);if(_!==null){if(y=_.tag,y===13){if(y=xr(_),y!==null){p.blockedOn=y,qm(p.priority,function(){Sg(_)});return}}else if(y===3&&_.stateNode.current.memoizedState.isDehydrated){p.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Hm(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var _=Uh(p.domEventName,p.eventSystemFlags,y[0],p.nativeEvent);if(_===null){_=p.nativeEvent;var D=new _.constructor(_.type,_);Pt=D,_.target.dispatchEvent(D),Pt=null}else return y=af(_),y!==null&&jp(y),p.blockedOn=_,!1;y.shift()}return!0}function Bh(p,y,_){Hm(p)&&_.delete(y)}function Np(){Bd=!1,Xc!==null&&Hm(Xc)&&(Xc=null),zo!==null&&Hm(zo)&&(zo=null),Rl!==null&&Hm(Rl)&&(Rl=null),ms.forEach(Bh),Fh.forEach(Bh)}function pc(p,y){p.blockedOn===y&&(p.blockedOn=null,Bd||(Bd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Np)))}function Zc(p){function y(G){return pc(G,p)}if(0<fc.length){pc(fc[0],p);for(var _=1;_<fc.length;_++){var D=fc[_];D.blockedOn===p&&(D.blockedOn=null)}}for(Xc!==null&&pc(Xc,p),zo!==null&&pc(zo,p),Rl!==null&&pc(Rl,p),ms.forEach(y),Fh.forEach(y),_=0;_<Qc.length;_++)D=Qc[_],D.blockedOn===p&&(D.blockedOn=null);for(;0<Qc.length&&(_=Qc[0],_.blockedOn===null);)_g(_),_.blockedOn===null&&Qc.shift()}var xc=C.ReactCurrentBatchConfig,Gm=!0;function Sp(p,y,_,D){var G=hn,te=xc.transition;xc.transition=null;try{hn=1,zd(p,y,_,D)}finally{hn=G,xc.transition=te}}function Cp(p,y,_,D){var G=hn,te=xc.transition;xc.transition=null;try{hn=4,zd(p,y,_,D)}finally{hn=G,xc.transition=te}}function zd(p,y,_,D){if(Gm){var G=Uh(p,y,_,D);if(G===null)Rp(p,y,D,Jc,_),kg(p,D);else if(Ud(G,p,y,_,D))D.stopPropagation();else if(kg(p,D),y&4&&-1<xy.indexOf(p)){for(;G!==null;){var te=af(G);if(te!==null&&Wm(te),te=Uh(p,y,_,D),te===null&&Rp(p,y,D,Jc,_),te===G)break;G=te}G!==null&&D.stopPropagation()}else Rp(p,y,D,null,_)}}var Jc=null;function Uh(p,y,_,D){if(Jc=null,p=kt(D),p=Xu(p),p!==null)if(y=Wt(p),y===null)p=null;else if(_=y.tag,_===13){if(p=xr(y),p!==null)return p;p=null}else if(_===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null);return Jc=p,null}function zh(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gc()){case io:return 1;case da:return 4;case Eo:case qe:return 16;case Fs:return 536870912;default:return 16}default:return 16}}var Ml=null,Vd=null,Vh=null;function kp(){if(Vh)return Vh;var p,y=Vd,_=y.length,D,G="value"in Ml?Ml.value:Ml.textContent,te=G.length;for(p=0;p<_&&y[p]===G[p];p++);var ge=_-p;for(D=1;D<=ge&&y[_-D]===G[te-D];D++);return Vh=G.slice(p,1<D?1-D:void 0)}function Ll(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function Fl(){return!0}function _p(){return!1}function co(p){function y(_,D,G,te,ge){this._reactName=_,this._targetInst=G,this.type=D,this.nativeEvent=te,this.target=ge,this.currentTarget=null;for(var Me in p)p.hasOwnProperty(Me)&&(_=p[Me],this[Me]=_?_(te):te[Me]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?Fl:_p,this.isPropagationStopped=_p,this}return ee(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),y}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=co(Bl),H=ee({},Bl,{view:0,detail:0}),fe=co(H),Ie,Be,et,Nt=ee({},H,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uu,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==et&&(et&&p.type==="mousemove"?(Ie=p.screenX-et.screenX,Be=p.screenY-et.screenY):Be=Ie=0,et=p),Ie)},movementY:function(p){return"movementY"in p?p.movementY:Be}}),Ut=co(Nt),Rr=ee({},Nt,{dataTransfer:0}),Yr=co(Rr),js=ee({},H,{relatedTarget:0}),Ns=co(js),pn=ee({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=co(pn),ai=ee({},Bl,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),ra=co(ai),gi=ee({},Bl,{data:0}),qa=co(gi),Ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ul={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ag(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Vo[p])?!!y[p]:!1}function Uu(){return Ag}var Wh=ee({},H,{key:function(p){if(p.key){var y=Ui[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=Ll(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Ul[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uu,charCode:function(p){return p.type==="keypress"?Ll(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Ll(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),zu=co(Wh),qh=ee({},Nt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=co(qh),Hh=ee({},H,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uu}),uo=co(Hh),Gh=ee({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yh=co(Gh),Ap=ee({},Nt,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Ep=co(Ap),$a=[9,13,27,32],gc=l&&"CompositionEvent"in window,ed=null;l&&"documentMode"in document&&(ed=document.documentMode);var Eg=l&&"TextEvent"in window&&!ed,gl=l&&(!gc||ed&&8<ed&&11>=ed),Wu=" ",Km=!1;function Xm(p,y){switch(p){case"keyup":return $a.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var zl=!1;function vl(p,y){switch(p){case"compositionend":return Wd(y);case"keypress":return y.which!==32?null:(Km=!0,Wu);case"textInput":return p=y.data,p===Wu&&Km?null:p;default:return null}}function yl(p,y){if(zl)return p==="compositionend"||!gc&&Xm(p,y)?(p=kp(),Vh=Vd=Ml=null,zl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return gl&&y.locale!=="ko"?null:y.data;default:return null}}var qu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!qu[p.type]:y==="textarea"}function qd(p,y,_,D){bt(D),y=$g(y,"onChange"),0<y.length&&(_=new Ym("onChange","change",null,_,D),p.push({event:_,listeners:y}))}var Hd=null,rd=null;function Ha(p){$p(p,0)}function Kh(p){var y=am(p);if(ye(y))return p}function sd(p,y){if(p==="change")return y}var vc=!1;if(l){var Xh;if(l){var Qh="oninput"in document;if(!Qh){var Qm=document.createElement("div");Qm.setAttribute("oninput","return;"),Qh=typeof Qm.oninput=="function"}Xh=Qh}else Xh=!1;vc=Xh&&(!document.documentMode||9<document.documentMode)}function Zm(){Hd&&(Hd.detachEvent("onpropertychange",Gd),rd=Hd=null)}function Gd(p){if(p.propertyName==="value"&&Kh(rd)){var y=[];qd(y,rd,p,kt(p)),He(Ha,y)}}function Hu(p,y,_){p==="focusin"?(Zm(),Hd=y,rd=_,Hd.attachEvent("onpropertychange",Gd)):p==="focusout"&&Zm()}function Gu(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Kh(rd)}function Zh(p,y){if(p==="click")return Kh(y)}function Yu(p,y){if(p==="input"||p==="change")return Kh(y)}function Jh(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var Da=typeof Object.is=="function"?Object.is:Jh;function Wo(p,y){if(Da(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var _=Object.keys(p),D=Object.keys(y);if(_.length!==D.length)return!1;for(D=0;D<_.length;D++){var G=_[D];if(!c.call(y,G)||!Da(p[G],y[G]))return!1}return!0}function xn(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Fn(p,y){var _=xn(p);p=0;for(var D;_;){if(_.nodeType===3){if(D=p+_.textContent.length,p<=y&&D>=y)return{node:_,offset:y-p};p=D}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=xn(_)}}function Ra(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?Ra(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function ii(){for(var p=window,y=$e();y instanceof p.HTMLIFrameElement;){try{var _=typeof y.contentWindow.location.href=="string"}catch{_=!1}if(_)p=y.contentWindow;else break;y=$e(p.document)}return y}function yc(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}function Pp(p){var y=ii(),_=p.focusedElem,D=p.selectionRange;if(y!==_&&_&&_.ownerDocument&&Ra(_.ownerDocument.documentElement,_)){if(D!==null&&yc(_)){if(y=D.start,p=D.end,p===void 0&&(p=y),"selectionStart"in _)_.selectionStart=y,_.selectionEnd=Math.min(p,_.value.length);else if(p=(y=_.ownerDocument||document)&&y.defaultView||window,p.getSelection){p=p.getSelection();var G=_.textContent.length,te=Math.min(D.start,G);D=D.end===void 0?te:Math.min(D.end,G),!p.extend&&te>D&&(G=D,D=te,te=G),G=Fn(_,te);var ge=Fn(_,D);G&&ge&&(p.rangeCount!==1||p.anchorNode!==G.node||p.anchorOffset!==G.offset||p.focusNode!==ge.node||p.focusOffset!==ge.offset)&&(y=y.createRange(),y.setStart(G.node,G.offset),p.removeAllRanges(),te>D?(p.addRange(y),p.extend(ge.node,ge.offset)):(y.setEnd(ge.node,ge.offset),p.addRange(y)))}}for(y=[],p=_;p=p.parentNode;)p.nodeType===1&&y.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<y.length;_++)p=y[_],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Jm=l&&"documentMode"in document&&11>=document.documentMode,Yd=null,Pg=null,ef=null,Tg=!1;function gy(p,y,_){var D=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;Tg||Yd==null||Yd!==$e(D)||(D=Yd,"selectionStart"in D&&yc(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),ef&&Wo(ef,D)||(ef=D,D=$g(Pg,"onSelect"),0<D.length&&(y=new Ym("onSelect","select",null,y,_),p.push({event:y,listeners:D}),y.target=Yd)))}function Tp(p,y){var _={};return _[p.toLowerCase()]=y.toLowerCase(),_["Webkit"+p]="webkit"+y,_["Moz"+p]="moz"+y,_}var em={animationend:Tp("Animation","AnimationEnd"),animationiteration:Tp("Animation","AnimationIteration"),animationstart:Tp("Animation","AnimationStart"),transitionend:Tp("Transition","TransitionEnd")},tm={},vy={};l&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete em.animationend.animation,delete em.animationiteration.animation,delete em.animationstart.animation),"TransitionEvent"in window||delete em.transitionend.transition);function Op(p){if(tm[p])return tm[p];if(!em[p])return p;var y=em[p],_;for(_ in y)if(y.hasOwnProperty(_)&&_ in vy)return tm[p]=y[_];return p}var yy=Op("animationend"),by=Op("animationiteration"),wy=Op("animationstart"),jy=Op("transitionend"),Ny=new Map,Sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nd(p,y){Ny.set(p,y),i(y,[p])}for(var tf=0;tf<Sy.length;tf++){var To=Sy[tf],Vl=To.toLowerCase(),Og=To[0].toUpperCase()+To.slice(1);nd(Vl,"on"+Og)}nd(yy,"onAnimationEnd"),nd(by,"onAnimationIteration"),nd(wy,"onAnimationStart"),nd("dblclick","onDoubleClick"),nd("focusin","onFocus"),nd("focusout","onBlur"),nd(jy,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ku));function Ip(p,y,_){var D=p.type||"unknown-event";p.currentTarget=_,Gt(D,y,void 0,p),p.currentTarget=null}function $p(p,y){y=(y&4)!==0;for(var _=0;_<p.length;_++){var D=p[_],G=D.event;D=D.listeners;e:{var te=void 0;if(y)for(var ge=D.length-1;0<=ge;ge--){var Me=D[ge],Ve=Me.instance,ft=Me.currentTarget;if(Me=Me.listener,Ve!==te&&G.isPropagationStopped())break e;Ip(G,Me,ft),te=Ve}else for(ge=0;ge<D.length;ge++){if(Me=D[ge],Ve=Me.instance,ft=Me.currentTarget,Me=Me.listener,Ve!==te&&G.isPropagationStopped())break e;Ip(G,Me,ft),te=Ve}}}if(It)throw p=vr,It=!1,vr=null,p}function qn(p,y){var _=y[Ho];_===void 0&&(_=y[Ho]=new Set);var D=p+"__bubble";_.has(D)||(Dp(y,p,2,!1),_.add(D))}function Ig(p,y,_){var D=0;y&&(D|=4),Dp(_,p,D,y)}var rf="_reactListening"+Math.random().toString(36).slice(2);function rm(p){if(!p[rf]){p[rf]=!0,n.forEach(function(_){_!=="selectionchange"&&(qw.has(_)||Ig(_,!1,p),Ig(_,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[rf]||(y[rf]=!0,Ig("selectionchange",!1,y))}}function Dp(p,y,_,D){switch(zh(y)){case 1:var G=Sp;break;case 4:G=Cp;break;default:G=zd}_=G.bind(null,y,_,p),G=void 0,!le||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(G=!0),D?G!==void 0?p.addEventListener(y,_,{capture:!0,passive:G}):p.addEventListener(y,_,!0):G!==void 0?p.addEventListener(y,_,{passive:G}):p.addEventListener(y,_,!1)}function Rp(p,y,_,D,G){var te=D;if((y&1)===0&&(y&2)===0&&D!==null)e:for(;;){if(D===null)return;var ge=D.tag;if(ge===3||ge===4){var Me=D.stateNode.containerInfo;if(Me===G||Me.nodeType===8&&Me.parentNode===G)break;if(ge===4)for(ge=D.return;ge!==null;){var Ve=ge.tag;if((Ve===3||Ve===4)&&(Ve=ge.stateNode.containerInfo,Ve===G||Ve.nodeType===8&&Ve.parentNode===G))return;ge=ge.return}for(;Me!==null;){if(ge=Xu(Me),ge===null)return;if(Ve=ge.tag,Ve===5||Ve===6){D=te=ge;continue e}Me=Me.parentNode}}D=D.return}He(function(){var ft=te,Ht=kt(_),Qt=[];e:{var qt=Ny.get(p);if(qt!==void 0){var _r=Ym,Lr=p;switch(p){case"keypress":if(Ll(_)===0)break e;case"keydown":case"keyup":_r=zu;break;case"focusin":Lr="focus",_r=Ns;break;case"focusout":Lr="blur",_r=Ns;break;case"beforeblur":case"afterblur":_r=Ns;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_r=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_r=Yr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_r=uo;break;case yy:case by:case wy:_r=Aa;break;case jy:_r=Yh;break;case"scroll":_r=fe;break;case"wheel":_r=Ep;break;case"copy":case"cut":case"paste":_r=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_r=Vu}var qr=(y&4)!==0,bi=!qr&&p==="scroll",ot=qr?qt!==null?qt+"Capture":null:qt;qr=[];for(var Ye=ft,dt;Ye!==null;){dt=Ye;var rr=dt.stateNode;if(dt.tag===5&&rr!==null&&(dt=rr,ot!==null&&(rr=vt(Ye,ot),rr!=null&&qr.push(Mp(Ye,rr,dt)))),bi)break;Ye=Ye.return}0<qr.length&&(qt=new _r(qt,Lr,null,_,Ht),Qt.push({event:qt,listeners:qr}))}}if((y&7)===0){e:{if(qt=p==="mouseover"||p==="pointerover",_r=p==="mouseout"||p==="pointerout",qt&&_!==Pt&&(Lr=_.relatedTarget||_.fromElement)&&(Xu(Lr)||Lr[ho]))break e;if((_r||qt)&&(qt=Ht.window===Ht?Ht:(qt=Ht.ownerDocument)?qt.defaultView||qt.parentWindow:window,_r?(Lr=_.relatedTarget||_.toElement,_r=ft,Lr=Lr?Xu(Lr):null,Lr!==null&&(bi=Wt(Lr),Lr!==bi||Lr.tag!==5&&Lr.tag!==6)&&(Lr=null)):(_r=null,Lr=ft),_r!==Lr)){if(qr=Ut,rr="onMouseLeave",ot="onMouseEnter",Ye="mouse",(p==="pointerout"||p==="pointerover")&&(qr=Vu,rr="onPointerLeave",ot="onPointerEnter",Ye="pointer"),bi=_r==null?qt:am(_r),dt=Lr==null?qt:am(Lr),qt=new qr(rr,Ye+"leave",_r,_,Ht),qt.target=bi,qt.relatedTarget=dt,rr=null,Xu(Ht)===ft&&(qr=new qr(ot,Ye+"enter",Lr,_,Ht),qr.target=dt,qr.relatedTarget=bi,rr=qr),bi=rr,_r&&Lr)t:{for(qr=_r,ot=Lr,Ye=0,dt=qr;dt;dt=sm(dt))Ye++;for(dt=0,rr=ot;rr;rr=sm(rr))dt++;for(;0<Ye-dt;)qr=sm(qr),Ye--;for(;0<dt-Ye;)ot=sm(ot),dt--;for(;Ye--;){if(qr===ot||ot!==null&&qr===ot.alternate)break t;qr=sm(qr),ot=sm(ot)}qr=null}else qr=null;_r!==null&&Hw(Qt,qt,_r,qr,!1),Lr!==null&&bi!==null&&Hw(Qt,bi,Lr,qr,!0)}}e:{if(qt=ft?am(ft):window,_r=qt.nodeName&&qt.nodeName.toLowerCase(),_r==="select"||_r==="input"&&qt.type==="file")var Qr=sd;else if(td(qt))if(vc)Qr=Yu;else{Qr=Gu;var ds=Hu}else(_r=qt.nodeName)&&_r.toLowerCase()==="input"&&(qt.type==="checkbox"||qt.type==="radio")&&(Qr=Zh);if(Qr&&(Qr=Qr(p,ft))){qd(Qt,Qr,_,Ht);break e}ds&&ds(p,qt,ft),p==="focusout"&&(ds=qt._wrapperState)&&ds.controlled&&qt.type==="number"&&Ue(qt,"number",qt.value)}switch(ds=ft?am(ft):window,p){case"focusin":(td(ds)||ds.contentEditable==="true")&&(Yd=ds,Pg=ft,ef=null);break;case"focusout":ef=Pg=Yd=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,gy(Qt,_,Ht);break;case"selectionchange":if(Jm)break;case"keydown":case"keyup":gy(Qt,_,Ht)}var us;if(gc)e:{switch(p){case"compositionstart":var _s="onCompositionStart";break e;case"compositionend":_s="onCompositionEnd";break e;case"compositionupdate":_s="onCompositionUpdate";break e}_s=void 0}else zl?Xm(p,_)&&(_s="onCompositionEnd"):p==="keydown"&&_.keyCode===229&&(_s="onCompositionStart");_s&&(gl&&_.locale!=="ko"&&(zl||_s!=="onCompositionStart"?_s==="onCompositionEnd"&&zl&&(us=kp()):(Ml=Ht,Vd="value"in Ml?Ml.value:Ml.textContent,zl=!0)),ds=$g(ft,_s),0<ds.length&&(_s=new qa(_s,p,null,_,Ht),Qt.push({event:_s,listeners:ds}),us?_s.data=us:(us=Wd(_),us!==null&&(_s.data=us)))),(us=Eg?vl(p,_):yl(p,_))&&(ft=$g(ft,"onBeforeInput"),0<ft.length&&(Ht=new qa("onBeforeInput","beforeinput",null,_,Ht),Qt.push({event:Ht,listeners:ft}),Ht.data=us))}$p(Qt,y)})}function Mp(p,y,_){return{instance:p,listener:y,currentTarget:_}}function $g(p,y){for(var _=y+"Capture",D=[];p!==null;){var G=p,te=G.stateNode;G.tag===5&&te!==null&&(G=te,te=vt(p,_),te!=null&&D.unshift(Mp(p,te,G)),te=vt(p,y),te!=null&&D.push(Mp(p,te,G))),p=p.return}return D}function sm(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function Hw(p,y,_,D,G){for(var te=y._reactName,ge=[];_!==null&&_!==D;){var Me=_,Ve=Me.alternate,ft=Me.stateNode;if(Ve!==null&&Ve===D)break;Me.tag===5&&ft!==null&&(Me=ft,G?(Ve=vt(_,te),Ve!=null&&ge.unshift(Mp(_,Ve,Me))):G||(Ve=vt(_,te),Ve!=null&&ge.push(Mp(_,Ve,Me)))),_=_.return}ge.length!==0&&p.push({event:y,listeners:ge})}var $3=/\r\n?/g,D3=/\u0000|\uFFFD/g;function Gw(p){return(typeof p=="string"?p:""+p).replace($3,`
`).replace(D3,"")}function Dg(p,y,_){if(y=Gw(y),Gw(p)!==y&&_)throw Error(s(425))}function sf(){}var Lp=null,nm=null;function Cy(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var ky=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,R3=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(p){return Kw.resolve(null).then(p).catch(M3)}:ky;function M3(p){setTimeout(function(){throw p})}function _y(p,y){var _=y,D=0;do{var G=_.nextSibling;if(p.removeChild(_),G&&G.nodeType===8)if(_=G.data,_==="/$"){if(D===0){p.removeChild(G),Zc(y);return}D--}else _!=="$"&&_!=="$?"&&_!=="$!"||D++;_=G}while(_);Zc(y)}function Oo(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return p}function Wl(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var _=p.data;if(_==="$"||_==="$!"||_==="$?"){if(y===0)return p;y--}else _==="/$"&&y++}p=p.previousSibling}return null}var qo=Math.random().toString(36).slice(2),ad="__reactFiber$"+qo,nf="__reactProps$"+qo,ho="__reactContainer$"+qo,Ho="__reactEvents$"+qo,L3="__reactListeners$"+qo,F3="__reactHandles$"+qo;function Xu(p){var y=p[ad];if(y)return y;for(var _=p.parentNode;_;){if(y=_[ho]||_[ad]){if(_=y.alternate,y.child!==null||_!==null&&_.child!==null)for(p=Wl(p);p!==null;){if(_=p[ad])return _;p=Wl(p)}return y}p=_,_=p.parentNode}return null}function af(p){return p=p[ad]||p[ho],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function am(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(s(33))}function Fp(p){return p[nf]||null}var Ay=[],Kd=-1;function bc(p){return{current:p}}function _n(p){0>Kd||(p.current=Ay[Kd],Ay[Kd]=null,Kd--)}function Bn(p,y){Kd++,Ay[Kd]=p.current,p.current=y}var Qu={},zi=bc(Qu),Go=bc(!1),im=Qu;function of(p,y){var _=p.type.contextTypes;if(!_)return Qu;var D=p.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===y)return D.__reactInternalMemoizedMaskedChildContext;var G={},te;for(te in _)G[te]=y[te];return D&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=G),G}function Yo(p){return p=p.childContextTypes,p!=null}function Rg(){_n(Go),_n(zi)}function Xw(p,y,_){if(zi.current!==Qu)throw Error(s(168));Bn(zi,y),Bn(Go,_)}function Ey(p,y,_){var D=p.stateNode;if(y=y.childContextTypes,typeof D.getChildContext!="function")return _;D=D.getChildContext();for(var G in D)if(!(G in y))throw Error(s(108,ie(p)||"Unknown",G));return ee({},_,D)}function om(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Qu,im=zi.current,Bn(zi,p),Bn(Go,Go.current),!0}function Qw(p,y,_){var D=p.stateNode;if(!D)throw Error(s(169));_?(p=Ey(p,y,im),D.__reactInternalMemoizedMergedChildContext=p,_n(Go),_n(zi),Bn(zi,p)):_n(Go),Bn(Go,_)}var Xd=null,Bp=!1,P=!1;function R(p){Xd===null?Xd=[p]:Xd.push(p)}function Q(p){Bp=!0,R(p)}function ae(){if(!P&&Xd!==null){P=!0;var p=0,y=hn;try{var _=Xd;for(hn=1;p<_.length;p++){var D=_[p];do D=D(!0);while(D!==null)}Xd=null,Bp=!1}catch(G){throw Xd!==null&&(Xd=Xd.slice(p+1)),ws(io,ae),G}finally{hn=y,P=!1}}return null}var me=[],ve=0,we=null,Ne=0,ke=[],Pe=0,ze=null,it=1,Oe="";function Ge(p,y){me[ve++]=Ne,me[ve++]=we,we=p,Ne=y}function rt(p,y,_){ke[Pe++]=it,ke[Pe++]=Oe,ke[Pe++]=ze,ze=p;var D=it;p=Oe;var G=32-es(D)-1;D&=~(1<<G),_+=1;var te=32-es(y)+G;if(30<te){var ge=G-G%5;te=(D&(1<<ge)-1).toString(32),D>>=ge,G-=ge,it=1<<32-es(y)+G|_<<G|D,Oe=te+p}else it=1<<te|_<<G|D,Oe=p}function wt(p){p.return!==null&&(Ge(p,1),rt(p,1,0))}function lt(p){for(;p===we;)we=me[--ve],me[ve]=null,Ne=me[--ve],me[ve]=null;for(;p===ze;)ze=ke[--Pe],ke[Pe]=null,Oe=ke[--Pe],ke[Pe]=null,it=ke[--Pe],ke[Pe]=null}var gt=null,yt=null,_t=!1,Et=null;function Kr(p,y){var _=dd(5,null,null,0);_.elementType="DELETED",_.stateNode=y,_.return=p,y=p.deletions,y===null?(p.deletions=[_],p.flags|=16):y.push(_)}function Tr(p,y){switch(p.tag){case 5:var _=p.type;return y=y.nodeType!==1||_.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(p.stateNode=y,gt=p,yt=Oo(y.firstChild),!0):!1;case 6:return y=p.pendingProps===""||y.nodeType!==3?null:y,y!==null?(p.stateNode=y,gt=p,yt=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(_=ze!==null?{id:it,overflow:Oe}:null,p.memoizedState={dehydrated:y,treeContext:_,retryLane:1073741824},_=dd(18,null,null,0),_.stateNode=y,_.return=p,p.child=_,gt=p,yt=null,!0):!1;default:return!1}}function $s(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Mr(p){if(_t){var y=yt;if(y){var _=y;if(!Tr(p,y)){if($s(p))throw Error(s(418));y=Oo(_.nextSibling);var D=gt;y&&Tr(p,y)?Kr(D,_):(p.flags=p.flags&-4097|2,_t=!1,gt=p)}}else{if($s(p))throw Error(s(418));p.flags=p.flags&-4097|2,_t=!1,gt=p}}}function Qs(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;gt=p}function Ma(p){if(p!==gt)return!1;if(!_t)return Qs(p),_t=!0,!1;var y;if((y=p.tag!==3)&&!(y=p.tag!==5)&&(y=p.type,y=y!=="head"&&y!=="body"&&!Cy(p.type,p.memoizedProps)),y&&(y=yt)){if($s(p))throw Ms(),Error(s(418));for(;y;)Kr(p,y),y=Oo(y.nextSibling)}if(Qs(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));e:{for(p=p.nextSibling,y=0;p;){if(p.nodeType===8){var _=p.data;if(_==="/$"){if(y===0){yt=Oo(p.nextSibling);break e}y--}else _!=="$"&&_!=="$!"&&_!=="$?"||y++}p=p.nextSibling}yt=null}}else yt=gt?Oo(p.stateNode.nextSibling):null;return!0}function Ms(){for(var p=yt;p;)p=Oo(p.nextSibling)}function Or(){yt=gt=null,_t=!1}function dr(p){Et===null?Et=[p]:Et.push(p)}var Ga=C.ReactCurrentBatchConfig;function vs(p,y,_){if(p=_.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(s(309));var D=_.stateNode}if(!D)throw Error(s(147,p));var G=D,te=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===te?y.ref:(y=function(ge){var Me=G.refs;ge===null?delete Me[te]:Me[te]=ge},y._stringRef=te,y)}if(typeof p!="string")throw Error(s(284));if(!_._owner)throw Error(s(290,p))}return p}function Gs(p,y){throw p=Object.prototype.toString.call(y),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function sa(p){var y=p._init;return y(p._payload)}function Pi(p){function y(ot,Ye){if(p){var dt=ot.deletions;dt===null?(ot.deletions=[Ye],ot.flags|=16):dt.push(Ye)}}function _(ot,Ye){if(!p)return null;for(;Ye!==null;)y(ot,Ye),Ye=Ye.sibling;return null}function D(ot,Ye){for(ot=new Map;Ye!==null;)Ye.key!==null?ot.set(Ye.key,Ye):ot.set(Ye.index,Ye),Ye=Ye.sibling;return ot}function G(ot,Ye){return ot=gf(ot,Ye),ot.index=0,ot.sibling=null,ot}function te(ot,Ye,dt){return ot.index=dt,p?(dt=ot.alternate,dt!==null?(dt=dt.index,dt<Ye?(ot.flags|=2,Ye):dt):(ot.flags|=2,Ye)):(ot.flags|=1048576,Ye)}function ge(ot){return p&&ot.alternate===null&&(ot.flags|=2),ot}function Me(ot,Ye,dt,rr){return Ye===null||Ye.tag!==6?(Ye=fS(dt,ot.mode,rr),Ye.return=ot,Ye):(Ye=G(Ye,dt),Ye.return=ot,Ye)}function Ve(ot,Ye,dt,rr){var Qr=dt.type;return Qr===k?Ht(ot,Ye,dt.props.children,rr,dt.key):Ye!==null&&(Ye.elementType===Qr||typeof Qr=="object"&&Qr!==null&&Qr.$$typeof===V&&sa(Qr)===Ye.type)?(rr=G(Ye,dt.props),rr.ref=vs(ot,Ye,dt),rr.return=ot,rr):(rr=g2(dt.type,dt.key,dt.props,null,ot.mode,rr),rr.ref=vs(ot,Ye,dt),rr.return=ot,rr)}function ft(ot,Ye,dt,rr){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==dt.containerInfo||Ye.stateNode.implementation!==dt.implementation?(Ye=pS(dt,ot.mode,rr),Ye.return=ot,Ye):(Ye=G(Ye,dt.children||[]),Ye.return=ot,Ye)}function Ht(ot,Ye,dt,rr,Qr){return Ye===null||Ye.tag!==7?(Ye=Yp(dt,ot.mode,rr,Qr),Ye.return=ot,Ye):(Ye=G(Ye,dt),Ye.return=ot,Ye)}function Qt(ot,Ye,dt){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Ye=fS(""+Ye,ot.mode,dt),Ye.return=ot,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case S:return dt=g2(Ye.type,Ye.key,Ye.props,null,ot.mode,dt),dt.ref=vs(ot,null,Ye),dt.return=ot,dt;case A:return Ye=pS(Ye,ot.mode,dt),Ye.return=ot,Ye;case V:var rr=Ye._init;return Qt(ot,rr(Ye._payload),dt)}if(xt(Ye)||J(Ye))return Ye=Yp(Ye,ot.mode,dt,null),Ye.return=ot,Ye;Gs(ot,Ye)}return null}function qt(ot,Ye,dt,rr){var Qr=Ye!==null?Ye.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Qr!==null?null:Me(ot,Ye,""+dt,rr);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case S:return dt.key===Qr?Ve(ot,Ye,dt,rr):null;case A:return dt.key===Qr?ft(ot,Ye,dt,rr):null;case V:return Qr=dt._init,qt(ot,Ye,Qr(dt._payload),rr)}if(xt(dt)||J(dt))return Qr!==null?null:Ht(ot,Ye,dt,rr,null);Gs(ot,dt)}return null}function _r(ot,Ye,dt,rr,Qr){if(typeof rr=="string"&&rr!==""||typeof rr=="number")return ot=ot.get(dt)||null,Me(Ye,ot,""+rr,Qr);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case S:return ot=ot.get(rr.key===null?dt:rr.key)||null,Ve(Ye,ot,rr,Qr);case A:return ot=ot.get(rr.key===null?dt:rr.key)||null,ft(Ye,ot,rr,Qr);case V:var ds=rr._init;return _r(ot,Ye,dt,ds(rr._payload),Qr)}if(xt(rr)||J(rr))return ot=ot.get(dt)||null,Ht(Ye,ot,rr,Qr,null);Gs(Ye,rr)}return null}function Lr(ot,Ye,dt,rr){for(var Qr=null,ds=null,us=Ye,_s=Ye=0,go=null;us!==null&&_s<dt.length;_s++){us.index>_s?(go=us,us=null):go=us.sibling;var jn=qt(ot,us,dt[_s],rr);if(jn===null){us===null&&(us=go);break}p&&us&&jn.alternate===null&&y(ot,us),Ye=te(jn,Ye,_s),ds===null?Qr=jn:ds.sibling=jn,ds=jn,us=go}if(_s===dt.length)return _(ot,us),_t&&Ge(ot,_s),Qr;if(us===null){for(;_s<dt.length;_s++)us=Qt(ot,dt[_s],rr),us!==null&&(Ye=te(us,Ye,_s),ds===null?Qr=us:ds.sibling=us,ds=us);return _t&&Ge(ot,_s),Qr}for(us=D(ot,us);_s<dt.length;_s++)go=_r(us,ot,_s,dt[_s],rr),go!==null&&(p&&go.alternate!==null&&us.delete(go.key===null?_s:go.key),Ye=te(go,Ye,_s),ds===null?Qr=go:ds.sibling=go,ds=go);return p&&us.forEach(function(vf){return y(ot,vf)}),_t&&Ge(ot,_s),Qr}function qr(ot,Ye,dt,rr){var Qr=J(dt);if(typeof Qr!="function")throw Error(s(150));if(dt=Qr.call(dt),dt==null)throw Error(s(151));for(var ds=Qr=null,us=Ye,_s=Ye=0,go=null,jn=dt.next();us!==null&&!jn.done;_s++,jn=dt.next()){us.index>_s?(go=us,us=null):go=us.sibling;var vf=qt(ot,us,jn.value,rr);if(vf===null){us===null&&(us=go);break}p&&us&&vf.alternate===null&&y(ot,us),Ye=te(vf,Ye,_s),ds===null?Qr=vf:ds.sibling=vf,ds=vf,us=go}if(jn.done)return _(ot,us),_t&&Ge(ot,_s),Qr;if(us===null){for(;!jn.done;_s++,jn=dt.next())jn=Qt(ot,jn.value,rr),jn!==null&&(Ye=te(jn,Ye,_s),ds===null?Qr=jn:ds.sibling=jn,ds=jn);return _t&&Ge(ot,_s),Qr}for(us=D(ot,us);!jn.done;_s++,jn=dt.next())jn=_r(us,ot,_s,jn.value,rr),jn!==null&&(p&&jn.alternate!==null&&us.delete(jn.key===null?_s:jn.key),Ye=te(jn,Ye,_s),ds===null?Qr=jn:ds.sibling=jn,ds=jn);return p&&us.forEach(function(Wle){return y(ot,Wle)}),_t&&Ge(ot,_s),Qr}function bi(ot,Ye,dt,rr){if(typeof dt=="object"&&dt!==null&&dt.type===k&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case S:e:{for(var Qr=dt.key,ds=Ye;ds!==null;){if(ds.key===Qr){if(Qr=dt.type,Qr===k){if(ds.tag===7){_(ot,ds.sibling),Ye=G(ds,dt.props.children),Ye.return=ot,ot=Ye;break e}}else if(ds.elementType===Qr||typeof Qr=="object"&&Qr!==null&&Qr.$$typeof===V&&sa(Qr)===ds.type){_(ot,ds.sibling),Ye=G(ds,dt.props),Ye.ref=vs(ot,ds,dt),Ye.return=ot,ot=Ye;break e}_(ot,ds);break}else y(ot,ds);ds=ds.sibling}dt.type===k?(Ye=Yp(dt.props.children,ot.mode,rr,dt.key),Ye.return=ot,ot=Ye):(rr=g2(dt.type,dt.key,dt.props,null,ot.mode,rr),rr.ref=vs(ot,Ye,dt),rr.return=ot,ot=rr)}return ge(ot);case A:e:{for(ds=dt.key;Ye!==null;){if(Ye.key===ds)if(Ye.tag===4&&Ye.stateNode.containerInfo===dt.containerInfo&&Ye.stateNode.implementation===dt.implementation){_(ot,Ye.sibling),Ye=G(Ye,dt.children||[]),Ye.return=ot,ot=Ye;break e}else{_(ot,Ye);break}else y(ot,Ye);Ye=Ye.sibling}Ye=pS(dt,ot.mode,rr),Ye.return=ot,ot=Ye}return ge(ot);case V:return ds=dt._init,bi(ot,Ye,ds(dt._payload),rr)}if(xt(dt))return Lr(ot,Ye,dt,rr);if(J(dt))return qr(ot,Ye,dt,rr);Gs(ot,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,Ye!==null&&Ye.tag===6?(_(ot,Ye.sibling),Ye=G(Ye,dt),Ye.return=ot,ot=Ye):(_(ot,Ye),Ye=fS(dt,ot.mode,rr),Ye.return=ot,ot=Ye),ge(ot)):_(ot,Ye)}return bi}var oi=Pi(!0),Ea=Pi(!1),vi=bc(null),Ti=null,xa=null,sn=null;function gn(){sn=xa=Ti=null}function ga(p){var y=vi.current;_n(vi),p._currentValue=y}function vn(p,y,_){for(;p!==null;){var D=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,D!==null&&(D.childLanes|=y)):D!==null&&(D.childLanes&y)!==y&&(D.childLanes|=y),p===_)break;p=p.return}}function La(p,y){Ti=p,sn=xa=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&y)!==0&&(Hl=!0),p.firstContext=null)}function Fa(p){var y=p._currentValue;if(sn!==p)if(p={context:p,memoizedValue:y,next:null},xa===null){if(Ti===null)throw Error(s(308));xa=p,Ti.dependencies={lanes:0,firstContext:p}}else xa=xa.next=p;return y}var Hn=null;function mo(p){Hn===null?Hn=[p]:Hn.push(p)}function Un(p,y,_,D){var G=y.interleaved;return G===null?(_.next=_,mo(y)):(_.next=G.next,G.next=_),y.interleaved=_,Gn(p,D)}function Gn(p,y){p.lanes|=y;var _=p.alternate;for(_!==null&&(_.lanes|=y),_=p,p=p.return;p!==null;)p.childLanes|=y,_=p.alternate,_!==null&&(_.childLanes|=y),_=p,p=p.return;return _.tag===3?_.stateNode:null}var li=!1;function Vi(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ko(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Ya(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function Ka(p,y,_){var D=p.updateQueue;if(D===null)return null;if(D=D.shared,(yn&2)!==0){var G=D.pending;return G===null?y.next=y:(y.next=G.next,G.next=y),D.pending=y,Gn(p,_)}return G=D.interleaved,G===null?(y.next=y,mo(D)):(y.next=G.next,G.next=y),D.interleaved=y,Gn(p,_)}function fo(p,y,_){if(y=y.updateQueue,y!==null&&(y=y.shared,(_&4194240)!==0)){var D=y.lanes;D&=p.pendingLanes,_|=D,y.lanes=_,Vm(p,_)}}function Yn(p,y){var _=p.updateQueue,D=p.alternate;if(D!==null&&(D=D.updateQueue,_===D)){var G=null,te=null;if(_=_.firstBaseUpdate,_!==null){do{var ge={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};te===null?G=te=ge:te=te.next=ge,_=_.next}while(_!==null);te===null?G=te=y:te=te.next=y}else G=te=y;_={baseState:D.baseState,firstBaseUpdate:G,lastBaseUpdate:te,shared:D.shared,effects:D.effects},p.updateQueue=_;return}p=_.lastBaseUpdate,p===null?_.firstBaseUpdate=y:p.next=y,_.lastBaseUpdate=y}function po(p,y,_,D){var G=p.updateQueue;li=!1;var te=G.firstBaseUpdate,ge=G.lastBaseUpdate,Me=G.shared.pending;if(Me!==null){G.shared.pending=null;var Ve=Me,ft=Ve.next;Ve.next=null,ge===null?te=ft:ge.next=ft,ge=Ve;var Ht=p.alternate;Ht!==null&&(Ht=Ht.updateQueue,Me=Ht.lastBaseUpdate,Me!==ge&&(Me===null?Ht.firstBaseUpdate=ft:Me.next=ft,Ht.lastBaseUpdate=Ve))}if(te!==null){var Qt=G.baseState;ge=0,Ht=ft=Ve=null,Me=te;do{var qt=Me.lane,_r=Me.eventTime;if((D&qt)===qt){Ht!==null&&(Ht=Ht.next={eventTime:_r,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var Lr=p,qr=Me;switch(qt=y,_r=_,qr.tag){case 1:if(Lr=qr.payload,typeof Lr=="function"){Qt=Lr.call(_r,Qt,qt);break e}Qt=Lr;break e;case 3:Lr.flags=Lr.flags&-65537|128;case 0:if(Lr=qr.payload,qt=typeof Lr=="function"?Lr.call(_r,Qt,qt):Lr,qt==null)break e;Qt=ee({},Qt,qt);break e;case 2:li=!0}}Me.callback!==null&&Me.lane!==0&&(p.flags|=64,qt=G.effects,qt===null?G.effects=[Me]:qt.push(Me))}else _r={eventTime:_r,lane:qt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},Ht===null?(ft=Ht=_r,Ve=Qt):Ht=Ht.next=_r,ge|=qt;if(Me=Me.next,Me===null){if(Me=G.shared.pending,Me===null)break;qt=Me,Me=qt.next,qt.next=null,G.lastBaseUpdate=qt,G.shared.pending=null}}while(!0);if(Ht===null&&(Ve=Qt),G.baseState=Ve,G.firstBaseUpdate=ft,G.lastBaseUpdate=Ht,y=G.shared.interleaved,y!==null){G=y;do ge|=G.lane,G=G.next;while(G!==y)}else te===null&&(G.shared.lanes=0);Wp|=ge,p.lanes=ge,p.memoizedState=Qt}}function ql(p,y,_){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var D=p[y],G=D.callback;if(G!==null){if(D.callback=null,D=_,typeof G!="function")throw Error(s(191,G));G.call(D)}}}var wc={},Oi=bc(wc),Xa=bc(wc),Zu=bc(wc);function Qd(p){if(p===wc)throw Error(s(174));return p}function lf(p,y){switch(Bn(Zu,y),Bn(Xa,p),Bn(Oi,wc),p=y.nodeType,p){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:yr(null,"");break;default:p=p===8?y.parentNode:y,y=p.namespaceURI||null,p=p.tagName,y=yr(y,p)}_n(Oi),Bn(Oi,y)}function id(){_n(Oi),_n(Xa),_n(Zu)}function Zw(p){Qd(Zu.current);var y=Qd(Oi.current),_=yr(y,p.type);y!==_&&(Bn(Xa,p),Bn(Oi,_))}function Py(p){Xa.current===p&&(_n(Oi),_n(Xa))}var ua=bc(0);function jc(p){for(var y=p;y!==null;){if(y.tag===13){var _=y.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||_.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Ty=[];function Oy(){for(var p=0;p<Ty.length;p++)Ty[p]._workInProgressVersionPrimary=null;Ty.length=0}var Mg=C.ReactCurrentDispatcher,Lg=C.ReactCurrentBatchConfig,od=0,va=null,ci=null,Qa=null,cf=!1,Zd=!1,df=0,B3=0;function yi(){throw Error(s(321))}function Fg(p,y){if(y===null)return!1;for(var _=0;_<y.length&&_<p.length;_++)if(!Da(p[_],y[_]))return!1;return!0}function Up(p,y,_,D,G,te){if(od=te,va=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Mg.current=p===null||p.memoizedState===null?xle:gle,p=_(D,G),Zd){te=0;do{if(Zd=!1,df=0,25<=te)throw Error(s(301));te+=1,Qa=ci=null,y.updateQueue=null,Mg.current=vle,p=_(D,G)}while(Zd)}if(Mg.current=s2,y=ci!==null&&ci.next!==null,od=0,Qa=ci=va=null,cf=!1,y)throw Error(s(300));return p}function ld(){var p=df!==0;return df=0,p}function Nc(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qa===null?va.memoizedState=Qa=p:Qa=Qa.next=p,Qa}function bl(){if(ci===null){var p=va.alternate;p=p!==null?p.memoizedState:null}else p=ci.next;var y=Qa===null?va.memoizedState:Qa.next;if(y!==null)Qa=y,ci=p;else{if(p===null)throw Error(s(310));ci=p,p={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},Qa===null?va.memoizedState=Qa=p:Qa=Qa.next=p}return Qa}function zp(p,y){return typeof y=="function"?y(p):y}function Bg(p){var y=bl(),_=y.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=p;var D=ci,G=D.baseQueue,te=_.pending;if(te!==null){if(G!==null){var ge=G.next;G.next=te.next,te.next=ge}D.baseQueue=G=te,_.pending=null}if(G!==null){te=G.next,D=D.baseState;var Me=ge=null,Ve=null,ft=te;do{var Ht=ft.lane;if((od&Ht)===Ht)Ve!==null&&(Ve=Ve.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),D=ft.hasEagerState?ft.eagerState:p(D,ft.action);else{var Qt={lane:Ht,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};Ve===null?(Me=Ve=Qt,ge=D):Ve=Ve.next=Qt,va.lanes|=Ht,Wp|=Ht}ft=ft.next}while(ft!==null&&ft!==te);Ve===null?ge=D:Ve.next=Me,Da(D,y.memoizedState)||(Hl=!0),y.memoizedState=D,y.baseState=ge,y.baseQueue=Ve,_.lastRenderedState=D}if(p=_.interleaved,p!==null){G=p;do te=G.lane,va.lanes|=te,Wp|=te,G=G.next;while(G!==p)}else G===null&&(_.lanes=0);return[y.memoizedState,_.dispatch]}function Ju(p){var y=bl(),_=y.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=p;var D=_.dispatch,G=_.pending,te=y.memoizedState;if(G!==null){_.pending=null;var ge=G=G.next;do te=p(te,ge.action),ge=ge.next;while(ge!==G);Da(te,y.memoizedState)||(Hl=!0),y.memoizedState=te,y.baseQueue===null&&(y.baseState=te),_.lastRenderedState=te}return[te,D]}function Jw(){}function Iy(p,y){var _=va,D=bl(),G=y(),te=!Da(D.memoizedState,G);if(te&&(D.memoizedState=G,Hl=!0),D=D.queue,Vg(t2.bind(null,_,D,p),[p]),D.getSnapshot!==y||te||Qa!==null&&Qa.memoizedState.tag&1){if(_.flags|=2048,wl(9,$y.bind(null,_,D,G,y),void 0,null),xo===null)throw Error(s(349));(od&30)!==0||e2(_,y,G)}return G}function e2(p,y,_){p.flags|=16384,p={getSnapshot:y,value:_},y=va.updateQueue,y===null?(y={lastEffect:null,stores:null},va.updateQueue=y,y.stores=[p]):(_=y.stores,_===null?y.stores=[p]:_.push(p))}function $y(p,y,_,D){y.value=_,y.getSnapshot=D,uf(y)&&Ug(p)}function t2(p,y,_){return _(function(){uf(y)&&Ug(p)})}function uf(p){var y=p.getSnapshot;p=p.value;try{var _=y();return!Da(p,_)}catch{return!0}}function Ug(p){var y=Gn(p,1);y!==null&&su(y,p,1,-1)}function Vp(p){var y=Nc();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:p},y.queue=p,p=p.dispatch=ple.bind(null,va,p),[y.memoizedState,p]}function wl(p,y,_,D){return p={tag:p,create:y,destroy:_,deps:D,next:null},y=va.updateQueue,y===null?(y={lastEffect:null,stores:null},va.updateQueue=y,y.lastEffect=p.next=p):(_=y.lastEffect,_===null?y.lastEffect=p.next=p:(D=_.next,_.next=p,p.next=D,y.lastEffect=p)),p}function Jd(){return bl().memoizedState}function Sc(p,y,_,D){var G=Nc();va.flags|=p,G.memoizedState=wl(1|y,_,void 0,D===void 0?null:D)}function lm(p,y,_,D){var G=bl();D=D===void 0?null:D;var te=void 0;if(ci!==null){var ge=ci.memoizedState;if(te=ge.destroy,D!==null&&Fg(D,ge.deps)){G.memoizedState=wl(y,_,te,D);return}}va.flags|=p,G.memoizedState=wl(1|y,_,te,D)}function zg(p,y){return Sc(8390656,8,p,y)}function Vg(p,y){return lm(2048,8,p,y)}function r2(p,y){return lm(4,2,p,y)}function Wg(p,y){return lm(4,4,p,y)}function qg(p,y){if(typeof y=="function")return p=p(),y(p),function(){y(null)};if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function bD(p,y,_){return _=_!=null?_.concat([p]):null,lm(4,4,qg.bind(null,y,p),_)}function U3(){}function wD(p,y){var _=bl();y=y===void 0?null:y;var D=_.memoizedState;return D!==null&&y!==null&&Fg(y,D[1])?D[0]:(_.memoizedState=[p,y],p)}function jD(p,y){var _=bl();y=y===void 0?null:y;var D=_.memoizedState;return D!==null&&y!==null&&Fg(y,D[1])?D[0]:(p=p(),_.memoizedState=[p,y],p)}function ND(p,y,_){return(od&21)===0?(p.baseState&&(p.baseState=!1,Hl=!0),p.memoizedState=_):(Da(_,y)||(_=lo(),va.lanes|=_,Wp|=_,p.baseState=!0),y)}function mle(p,y){var _=hn;hn=_!==0&&4>_?_:4,p(!0);var D=Lg.transition;Lg.transition={};try{p(!1),y()}finally{hn=_,Lg.transition=D}}function SD(){return bl().memoizedState}function fle(p,y,_){var D=pf(p);if(_={lane:D,action:_,hasEagerState:!1,eagerState:null,next:null},CD(p))kD(y,_);else if(_=Un(p,y,_,D),_!==null){var G=Nl();su(_,p,D,G),_D(_,y,D)}}function ple(p,y,_){var D=pf(p),G={lane:D,action:_,hasEagerState:!1,eagerState:null,next:null};if(CD(p))kD(y,G);else{var te=p.alternate;if(p.lanes===0&&(te===null||te.lanes===0)&&(te=y.lastRenderedReducer,te!==null))try{var ge=y.lastRenderedState,Me=te(ge,_);if(G.hasEagerState=!0,G.eagerState=Me,Da(Me,ge)){var Ve=y.interleaved;Ve===null?(G.next=G,mo(y)):(G.next=Ve.next,Ve.next=G),y.interleaved=G;return}}catch{}finally{}_=Un(p,y,G,D),_!==null&&(G=Nl(),su(_,p,D,G),_D(_,y,D))}}function CD(p){var y=p.alternate;return p===va||y!==null&&y===va}function kD(p,y){Zd=cf=!0;var _=p.pending;_===null?y.next=y:(y.next=_.next,_.next=y),p.pending=y}function _D(p,y,_){if((_&4194240)!==0){var D=y.lanes;D&=p.pendingLanes,_|=D,y.lanes=_,Vm(p,_)}}var s2={readContext:Fa,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},xle={readContext:Fa,useCallback:function(p,y){return Nc().memoizedState=[p,y===void 0?null:y],p},useContext:Fa,useEffect:zg,useImperativeHandle:function(p,y,_){return _=_!=null?_.concat([p]):null,Sc(4194308,4,qg.bind(null,y,p),_)},useLayoutEffect:function(p,y){return Sc(4194308,4,p,y)},useInsertionEffect:function(p,y){return Sc(4,2,p,y)},useMemo:function(p,y){var _=Nc();return y=y===void 0?null:y,p=p(),_.memoizedState=[p,y],p},useReducer:function(p,y,_){var D=Nc();return y=_!==void 0?_(y):y,D.memoizedState=D.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},D.queue=p,p=p.dispatch=fle.bind(null,va,p),[D.memoizedState,p]},useRef:function(p){var y=Nc();return p={current:p},y.memoizedState=p},useState:Vp,useDebugValue:U3,useDeferredValue:function(p){return Nc().memoizedState=p},useTransition:function(){var p=Vp(!1),y=p[0];return p=mle.bind(null,p[1]),Nc().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,_){var D=va,G=Nc();if(_t){if(_===void 0)throw Error(s(407));_=_()}else{if(_=y(),xo===null)throw Error(s(349));(od&30)!==0||e2(D,y,_)}G.memoizedState=_;var te={value:_,getSnapshot:y};return G.queue=te,zg(t2.bind(null,D,te,p),[p]),D.flags|=2048,wl(9,$y.bind(null,D,te,_,y),void 0,null),_},useId:function(){var p=Nc(),y=xo.identifierPrefix;if(_t){var _=Oe,D=it;_=(D&~(1<<32-es(D)-1)).toString(32)+_,y=":"+y+"R"+_,_=df++,0<_&&(y+="H"+_.toString(32)),y+=":"}else _=B3++,y=":"+y+"r"+_.toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},gle={readContext:Fa,useCallback:wD,useContext:Fa,useEffect:Vg,useImperativeHandle:bD,useInsertionEffect:r2,useLayoutEffect:Wg,useMemo:jD,useReducer:Bg,useRef:Jd,useState:function(){return Bg(zp)},useDebugValue:U3,useDeferredValue:function(p){var y=bl();return ND(y,ci.memoizedState,p)},useTransition:function(){var p=Bg(zp)[0],y=bl().memoizedState;return[p,y]},useMutableSource:Jw,useSyncExternalStore:Iy,useId:SD,unstable_isNewReconciler:!1},vle={readContext:Fa,useCallback:wD,useContext:Fa,useEffect:Vg,useImperativeHandle:bD,useInsertionEffect:r2,useLayoutEffect:Wg,useMemo:jD,useReducer:Ju,useRef:Jd,useState:function(){return Ju(zp)},useDebugValue:U3,useDeferredValue:function(p){var y=bl();return ci===null?y.memoizedState=p:ND(y,ci.memoizedState,p)},useTransition:function(){var p=Ju(zp)[0],y=bl().memoizedState;return[p,y]},useMutableSource:Jw,useSyncExternalStore:Iy,useId:SD,unstable_isNewReconciler:!1};function eu(p,y){if(p&&p.defaultProps){y=ee({},y),p=p.defaultProps;for(var _ in p)y[_]===void 0&&(y[_]=p[_]);return y}return y}function z3(p,y,_,D){y=p.memoizedState,_=_(D,y),_=_==null?y:ee({},y,_),p.memoizedState=_,p.lanes===0&&(p.updateQueue.baseState=_)}var n2={isMounted:function(p){return(p=p._reactInternals)?Wt(p)===p:!1},enqueueSetState:function(p,y,_){p=p._reactInternals;var D=Nl(),G=pf(p),te=Ya(D,G);te.payload=y,_!=null&&(te.callback=_),y=Ka(p,te,G),y!==null&&(su(y,p,G,D),fo(y,p,G))},enqueueReplaceState:function(p,y,_){p=p._reactInternals;var D=Nl(),G=pf(p),te=Ya(D,G);te.tag=1,te.payload=y,_!=null&&(te.callback=_),y=Ka(p,te,G),y!==null&&(su(y,p,G,D),fo(y,p,G))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var _=Nl(),D=pf(p),G=Ya(_,D);G.tag=2,y!=null&&(G.callback=y),y=Ka(p,G,D),y!==null&&(su(y,p,D,_),fo(y,p,D))}};function AD(p,y,_,D,G,te,ge){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(D,te,ge):y.prototype&&y.prototype.isPureReactComponent?!Wo(_,D)||!Wo(G,te):!0}function ED(p,y,_){var D=!1,G=Qu,te=y.contextType;return typeof te=="object"&&te!==null?te=Fa(te):(G=Yo(y)?im:zi.current,D=y.contextTypes,te=(D=D!=null)?of(p,G):Qu),y=new y(_,te),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=n2,p.stateNode=y,y._reactInternals=p,D&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=G,p.__reactInternalMemoizedMaskedChildContext=te),y}function PD(p,y,_,D){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(_,D),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(_,D),y.state!==p&&n2.enqueueReplaceState(y,y.state,null)}function V3(p,y,_,D){var G=p.stateNode;G.props=_,G.state=p.memoizedState,G.refs={},Vi(p);var te=y.contextType;typeof te=="object"&&te!==null?G.context=Fa(te):(te=Yo(y)?im:zi.current,G.context=of(p,te)),G.state=p.memoizedState,te=y.getDerivedStateFromProps,typeof te=="function"&&(z3(p,y,te,_),G.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(y=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),y!==G.state&&n2.enqueueReplaceState(G,G.state,null),po(p,_,G,D),G.state=p.memoizedState),typeof G.componentDidMount=="function"&&(p.flags|=4194308)}function Hg(p,y){try{var _="",D=y;do _+=se(D),D=D.return;while(D);var G=_}catch(te){G=`
Error generating stack: `+te.message+`
`+te.stack}return{value:p,source:y,stack:G,digest:null}}function W3(p,y,_){return{value:p,source:null,stack:_??null,digest:y??null}}function q3(p,y){try{console.error(y.value)}catch(_){setTimeout(function(){throw _})}}var yle=typeof WeakMap=="function"?WeakMap:Map;function TD(p,y,_){_=Ya(-1,_),_.tag=3,_.payload={element:null};var D=y.value;return _.callback=function(){u2||(u2=!0,iS=D),q3(p,y)},_}function OD(p,y,_){_=Ya(-1,_),_.tag=3;var D=p.type.getDerivedStateFromError;if(typeof D=="function"){var G=y.value;_.payload=function(){return D(G)},_.callback=function(){q3(p,y)}}var te=p.stateNode;return te!==null&&typeof te.componentDidCatch=="function"&&(_.callback=function(){q3(p,y),typeof D!="function"&&(mf===null?mf=new Set([this]):mf.add(this));var ge=y.stack;this.componentDidCatch(y.value,{componentStack:ge!==null?ge:""})}),_}function ID(p,y,_){var D=p.pingCache;if(D===null){D=p.pingCache=new yle;var G=new Set;D.set(y,G)}else G=D.get(y),G===void 0&&(G=new Set,D.set(y,G));G.has(_)||(G.add(_),p=Ile.bind(null,p,y,_),y.then(p,p))}function $D(p){do{var y;if((y=p.tag===13)&&(y=p.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return p;p=p.return}while(p!==null);return null}function DD(p,y,_,D,G){return(p.mode&1)===0?(p===y?p.flags|=65536:(p.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(y=Ya(-1,1),y.tag=2,Ka(_,y,1))),_.lanes|=1),p):(p.flags|=65536,p.lanes=G,p)}var ble=C.ReactCurrentOwner,Hl=!1;function jl(p,y,_,D){y.child=p===null?Ea(y,null,_,D):oi(y,p.child,_,D)}function RD(p,y,_,D,G){_=_.render;var te=y.ref;return La(y,G),D=Up(p,y,_,D,te,G),_=ld(),p!==null&&!Hl?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~G,cm(p,y,G)):(_t&&_&&wt(y),y.flags|=1,jl(p,y,D,G),y.child)}function MD(p,y,_,D,G){if(p===null){var te=_.type;return typeof te=="function"&&!mS(te)&&te.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(y.tag=15,y.type=te,LD(p,y,te,D,G)):(p=g2(_.type,null,D,y,y.mode,G),p.ref=y.ref,p.return=y,y.child=p)}if(te=p.child,(p.lanes&G)===0){var ge=te.memoizedProps;if(_=_.compare,_=_!==null?_:Wo,_(ge,D)&&p.ref===y.ref)return cm(p,y,G)}return y.flags|=1,p=gf(te,D),p.ref=y.ref,p.return=y,y.child=p}function LD(p,y,_,D,G){if(p!==null){var te=p.memoizedProps;if(Wo(te,D)&&p.ref===y.ref)if(Hl=!1,y.pendingProps=D=te,(p.lanes&G)!==0)(p.flags&131072)!==0&&(Hl=!0);else return y.lanes=p.lanes,cm(p,y,G)}return H3(p,y,_,D,G)}function FD(p,y,_){var D=y.pendingProps,G=D.children,te=p!==null?p.memoizedState:null;if(D.mode==="hidden")if((y.mode&1)===0)y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bn(Yg,Cc),Cc|=_;else{if((_&1073741824)===0)return p=te!==null?te.baseLanes|_:_,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,Bn(Yg,Cc),Cc|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=te!==null?te.baseLanes:_,Bn(Yg,Cc),Cc|=D}else te!==null?(D=te.baseLanes|_,y.memoizedState=null):D=_,Bn(Yg,Cc),Cc|=D;return jl(p,y,G,_),y.child}function BD(p,y){var _=y.ref;(p===null&&_!==null||p!==null&&p.ref!==_)&&(y.flags|=512,y.flags|=2097152)}function H3(p,y,_,D,G){var te=Yo(_)?im:zi.current;return te=of(y,te),La(y,G),_=Up(p,y,_,D,te,G),D=ld(),p!==null&&!Hl?(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~G,cm(p,y,G)):(_t&&D&&wt(y),y.flags|=1,jl(p,y,_,G),y.child)}function UD(p,y,_,D,G){if(Yo(_)){var te=!0;om(y)}else te=!1;if(La(y,G),y.stateNode===null)i2(p,y),ED(y,_,D),V3(y,_,D,G),D=!0;else if(p===null){var ge=y.stateNode,Me=y.memoizedProps;ge.props=Me;var Ve=ge.context,ft=_.contextType;typeof ft=="object"&&ft!==null?ft=Fa(ft):(ft=Yo(_)?im:zi.current,ft=of(y,ft));var Ht=_.getDerivedStateFromProps,Qt=typeof Ht=="function"||typeof ge.getSnapshotBeforeUpdate=="function";Qt||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Me!==D||Ve!==ft)&&PD(y,ge,D,ft),li=!1;var qt=y.memoizedState;ge.state=qt,po(y,D,ge,G),Ve=y.memoizedState,Me!==D||qt!==Ve||Go.current||li?(typeof Ht=="function"&&(z3(y,_,Ht,D),Ve=y.memoizedState),(Me=li||AD(y,_,Me,D,qt,Ve,ft))?(Qt||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=D,y.memoizedState=Ve),ge.props=D,ge.state=Ve,ge.context=ft,D=Me):(typeof ge.componentDidMount=="function"&&(y.flags|=4194308),D=!1)}else{ge=y.stateNode,Ko(p,y),Me=y.memoizedProps,ft=y.type===y.elementType?Me:eu(y.type,Me),ge.props=ft,Qt=y.pendingProps,qt=ge.context,Ve=_.contextType,typeof Ve=="object"&&Ve!==null?Ve=Fa(Ve):(Ve=Yo(_)?im:zi.current,Ve=of(y,Ve));var _r=_.getDerivedStateFromProps;(Ht=typeof _r=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Me!==Qt||qt!==Ve)&&PD(y,ge,D,Ve),li=!1,qt=y.memoizedState,ge.state=qt,po(y,D,ge,G);var Lr=y.memoizedState;Me!==Qt||qt!==Lr||Go.current||li?(typeof _r=="function"&&(z3(y,_,_r,D),Lr=y.memoizedState),(ft=li||AD(y,_,ft,D,qt,Lr,Ve)||!1)?(Ht||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(D,Lr,Ve),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(D,Lr,Ve)),typeof ge.componentDidUpdate=="function"&&(y.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Me===p.memoizedProps&&qt===p.memoizedState||(y.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Me===p.memoizedProps&&qt===p.memoizedState||(y.flags|=1024),y.memoizedProps=D,y.memoizedState=Lr),ge.props=D,ge.state=Lr,ge.context=Ve,D=ft):(typeof ge.componentDidUpdate!="function"||Me===p.memoizedProps&&qt===p.memoizedState||(y.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Me===p.memoizedProps&&qt===p.memoizedState||(y.flags|=1024),D=!1)}return G3(p,y,_,D,te,G)}function G3(p,y,_,D,G,te){BD(p,y);var ge=(y.flags&128)!==0;if(!D&&!ge)return G&&Qw(y,_,!1),cm(p,y,te);D=y.stateNode,ble.current=y;var Me=ge&&typeof _.getDerivedStateFromError!="function"?null:D.render();return y.flags|=1,p!==null&&ge?(y.child=oi(y,p.child,null,te),y.child=oi(y,null,Me,te)):jl(p,y,Me,te),y.memoizedState=D.state,G&&Qw(y,_,!0),y.child}function zD(p){var y=p.stateNode;y.pendingContext?Xw(p,y.pendingContext,y.pendingContext!==y.context):y.context&&Xw(p,y.context,!1),lf(p,y.containerInfo)}function VD(p,y,_,D,G){return Or(),dr(G),y.flags|=256,jl(p,y,_,D),y.child}var Y3={dehydrated:null,treeContext:null,retryLane:0};function K3(p){return{baseLanes:p,cachePool:null,transitions:null}}function WD(p,y,_){var D=y.pendingProps,G=ua.current,te=!1,ge=(y.flags&128)!==0,Me;if((Me=ge)||(Me=p!==null&&p.memoizedState===null?!1:(G&2)!==0),Me?(te=!0,y.flags&=-129):(p===null||p.memoizedState!==null)&&(G|=1),Bn(ua,G&1),p===null)return Mr(y),p=y.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((y.mode&1)===0?y.lanes=1:p.data==="$!"?y.lanes=8:y.lanes=1073741824,null):(ge=D.children,p=D.fallback,te?(D=y.mode,te=y.child,ge={mode:"hidden",children:ge},(D&1)===0&&te!==null?(te.childLanes=0,te.pendingProps=ge):te=v2(ge,D,0,null),p=Yp(p,D,_,null),te.return=y,p.return=y,te.sibling=p,y.child=te,y.child.memoizedState=K3(_),y.memoizedState=Y3,p):X3(y,ge));if(G=p.memoizedState,G!==null&&(Me=G.dehydrated,Me!==null))return wle(p,y,ge,D,Me,G,_);if(te){te=D.fallback,ge=y.mode,G=p.child,Me=G.sibling;var Ve={mode:"hidden",children:D.children};return(ge&1)===0&&y.child!==G?(D=y.child,D.childLanes=0,D.pendingProps=Ve,y.deletions=null):(D=gf(G,Ve),D.subtreeFlags=G.subtreeFlags&14680064),Me!==null?te=gf(Me,te):(te=Yp(te,ge,_,null),te.flags|=2),te.return=y,D.return=y,D.sibling=te,y.child=D,D=te,te=y.child,ge=p.child.memoizedState,ge=ge===null?K3(_):{baseLanes:ge.baseLanes|_,cachePool:null,transitions:ge.transitions},te.memoizedState=ge,te.childLanes=p.childLanes&~_,y.memoizedState=Y3,D}return te=p.child,p=te.sibling,D=gf(te,{mode:"visible",children:D.children}),(y.mode&1)===0&&(D.lanes=_),D.return=y,D.sibling=null,p!==null&&(_=y.deletions,_===null?(y.deletions=[p],y.flags|=16):_.push(p)),y.child=D,y.memoizedState=null,D}function X3(p,y){return y=v2({mode:"visible",children:y},p.mode,0,null),y.return=p,p.child=y}function a2(p,y,_,D){return D!==null&&dr(D),oi(y,p.child,null,_),p=X3(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function wle(p,y,_,D,G,te,ge){if(_)return y.flags&256?(y.flags&=-257,D=W3(Error(s(422))),a2(p,y,ge,D)):y.memoizedState!==null?(y.child=p.child,y.flags|=128,null):(te=D.fallback,G=y.mode,D=v2({mode:"visible",children:D.children},G,0,null),te=Yp(te,G,ge,null),te.flags|=2,D.return=y,te.return=y,D.sibling=te,y.child=D,(y.mode&1)!==0&&oi(y,p.child,null,ge),y.child.memoizedState=K3(ge),y.memoizedState=Y3,te);if((y.mode&1)===0)return a2(p,y,ge,null);if(G.data==="$!"){if(D=G.nextSibling&&G.nextSibling.dataset,D)var Me=D.dgst;return D=Me,te=Error(s(419)),D=W3(te,D,void 0),a2(p,y,ge,D)}if(Me=(ge&p.childLanes)!==0,Hl||Me){if(D=xo,D!==null){switch(ge&-ge){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(D.suspendedLanes|ge))!==0?0:G,G!==0&&G!==te.retryLane&&(te.retryLane=G,Gn(p,G),su(D,p,G,-1))}return hS(),D=W3(Error(s(421))),a2(p,y,ge,D)}return G.data==="$?"?(y.flags|=128,y.child=p.child,y=$le.bind(null,p),G._reactRetry=y,null):(p=te.treeContext,yt=Oo(G.nextSibling),gt=y,_t=!0,Et=null,p!==null&&(ke[Pe++]=it,ke[Pe++]=Oe,ke[Pe++]=ze,it=p.id,Oe=p.overflow,ze=y),y=X3(y,D.children),y.flags|=4096,y)}function qD(p,y,_){p.lanes|=y;var D=p.alternate;D!==null&&(D.lanes|=y),vn(p.return,y,_)}function Q3(p,y,_,D,G){var te=p.memoizedState;te===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:D,tail:_,tailMode:G}:(te.isBackwards=y,te.rendering=null,te.renderingStartTime=0,te.last=D,te.tail=_,te.tailMode=G)}function HD(p,y,_){var D=y.pendingProps,G=D.revealOrder,te=D.tail;if(jl(p,y,D.children,_),D=ua.current,(D&2)!==0)D=D&1|2,y.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&qD(p,_,y);else if(p.tag===19)qD(p,_,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}D&=1}if(Bn(ua,D),(y.mode&1)===0)y.memoizedState=null;else switch(G){case"forwards":for(_=y.child,G=null;_!==null;)p=_.alternate,p!==null&&jc(p)===null&&(G=_),_=_.sibling;_=G,_===null?(G=y.child,y.child=null):(G=_.sibling,_.sibling=null),Q3(y,!1,G,_,te);break;case"backwards":for(_=null,G=y.child,y.child=null;G!==null;){if(p=G.alternate,p!==null&&jc(p)===null){y.child=G;break}p=G.sibling,G.sibling=_,_=G,G=p}Q3(y,!0,_,null,te);break;case"together":Q3(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function i2(p,y){(y.mode&1)===0&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function cm(p,y,_){if(p!==null&&(y.dependencies=p.dependencies),Wp|=y.lanes,(_&y.childLanes)===0)return null;if(p!==null&&y.child!==p.child)throw Error(s(153));if(y.child!==null){for(p=y.child,_=gf(p,p.pendingProps),y.child=_,_.return=y;p.sibling!==null;)p=p.sibling,_=_.sibling=gf(p,p.pendingProps),_.return=y;_.sibling=null}return y.child}function jle(p,y,_){switch(y.tag){case 3:zD(y),Or();break;case 5:Zw(y);break;case 1:Yo(y.type)&&om(y);break;case 4:lf(y,y.stateNode.containerInfo);break;case 10:var D=y.type._context,G=y.memoizedProps.value;Bn(vi,D._currentValue),D._currentValue=G;break;case 13:if(D=y.memoizedState,D!==null)return D.dehydrated!==null?(Bn(ua,ua.current&1),y.flags|=128,null):(_&y.child.childLanes)!==0?WD(p,y,_):(Bn(ua,ua.current&1),p=cm(p,y,_),p!==null?p.sibling:null);Bn(ua,ua.current&1);break;case 19:if(D=(_&y.childLanes)!==0,(p.flags&128)!==0){if(D)return HD(p,y,_);y.flags|=128}if(G=y.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Bn(ua,ua.current),D)break;return null;case 22:case 23:return y.lanes=0,FD(p,y,_)}return cm(p,y,_)}var GD,Z3,YD,KD;GD=function(p,y){for(var _=y.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Z3=function(){},YD=function(p,y,_,D){var G=p.memoizedProps;if(G!==D){p=y.stateNode,Qd(Oi.current);var te=null;switch(_){case"input":G=Se(p,G),D=Se(p,D),te=[];break;case"select":G=ee({},G,{value:void 0}),D=ee({},D,{value:void 0}),te=[];break;case"textarea":G=Ot(p,G),D=Ot(p,D),te=[];break;default:typeof G.onClick!="function"&&typeof D.onClick=="function"&&(p.onclick=sf)}is(_,D);var ge;_=null;for(ft in G)if(!D.hasOwnProperty(ft)&&G.hasOwnProperty(ft)&&G[ft]!=null)if(ft==="style"){var Me=G[ft];for(ge in Me)Me.hasOwnProperty(ge)&&(_||(_={}),_[ge]="")}else ft!=="dangerouslySetInnerHTML"&&ft!=="children"&&ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&ft!=="autoFocus"&&(a.hasOwnProperty(ft)?te||(te=[]):(te=te||[]).push(ft,null));for(ft in D){var Ve=D[ft];if(Me=G?.[ft],D.hasOwnProperty(ft)&&Ve!==Me&&(Ve!=null||Me!=null))if(ft==="style")if(Me){for(ge in Me)!Me.hasOwnProperty(ge)||Ve&&Ve.hasOwnProperty(ge)||(_||(_={}),_[ge]="");for(ge in Ve)Ve.hasOwnProperty(ge)&&Me[ge]!==Ve[ge]&&(_||(_={}),_[ge]=Ve[ge])}else _||(te||(te=[]),te.push(ft,_)),_=Ve;else ft==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,Me=Me?Me.__html:void 0,Ve!=null&&Me!==Ve&&(te=te||[]).push(ft,Ve)):ft==="children"?typeof Ve!="string"&&typeof Ve!="number"||(te=te||[]).push(ft,""+Ve):ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&(a.hasOwnProperty(ft)?(Ve!=null&&ft==="onScroll"&&qn("scroll",p),te||Me===Ve||(te=[])):(te=te||[]).push(ft,Ve))}_&&(te=te||[]).push("style",_);var ft=te;(y.updateQueue=ft)&&(y.flags|=4)}},KD=function(p,y,_,D){_!==D&&(y.flags|=4)};function Dy(p,y){if(!_t)switch(p.tailMode){case"hidden":y=p.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?p.tail=null:_.sibling=null;break;case"collapsed":_=p.tail;for(var D=null;_!==null;)_.alternate!==null&&(D=_),_=_.sibling;D===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:D.sibling=null}}function Xo(p){var y=p.alternate!==null&&p.alternate.child===p.child,_=0,D=0;if(y)for(var G=p.child;G!==null;)_|=G.lanes|G.childLanes,D|=G.subtreeFlags&14680064,D|=G.flags&14680064,G.return=p,G=G.sibling;else for(G=p.child;G!==null;)_|=G.lanes|G.childLanes,D|=G.subtreeFlags,D|=G.flags,G.return=p,G=G.sibling;return p.subtreeFlags|=D,p.childLanes=_,y}function Nle(p,y,_){var D=y.pendingProps;switch(lt(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(y),null;case 1:return Yo(y.type)&&Rg(),Xo(y),null;case 3:return D=y.stateNode,id(),_n(Go),_n(zi),Oy(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(p===null||p.child===null)&&(Ma(y)?y.flags|=4:p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Et!==null&&(cS(Et),Et=null))),Z3(p,y),Xo(y),null;case 5:Py(y);var G=Qd(Zu.current);if(_=y.type,p!==null&&y.stateNode!=null)YD(p,y,_,D,G),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!D){if(y.stateNode===null)throw Error(s(166));return Xo(y),null}if(p=Qd(Oi.current),Ma(y)){D=y.stateNode,_=y.type;var te=y.memoizedProps;switch(D[ad]=y,D[nf]=te,p=(y.mode&1)!==0,_){case"dialog":qn("cancel",D),qn("close",D);break;case"iframe":case"object":case"embed":qn("load",D);break;case"video":case"audio":for(G=0;G<Ku.length;G++)qn(Ku[G],D);break;case"source":qn("error",D);break;case"img":case"image":case"link":qn("error",D),qn("load",D);break;case"details":qn("toggle",D);break;case"input":Y(D,te),qn("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!te.multiple},qn("invalid",D);break;case"textarea":tt(D,te),qn("invalid",D)}is(_,te),G=null;for(var ge in te)if(te.hasOwnProperty(ge)){var Me=te[ge];ge==="children"?typeof Me=="string"?D.textContent!==Me&&(te.suppressHydrationWarning!==!0&&Dg(D.textContent,Me,p),G=["children",Me]):typeof Me=="number"&&D.textContent!==""+Me&&(te.suppressHydrationWarning!==!0&&Dg(D.textContent,Me,p),G=["children",""+Me]):a.hasOwnProperty(ge)&&Me!=null&&ge==="onScroll"&&qn("scroll",D)}switch(_){case"input":pe(D),mt(D,te,!0);break;case"textarea":pe(D),At(D);break;case"select":case"option":break;default:typeof te.onClick=="function"&&(D.onclick=sf)}D=G,y.updateQueue=D,D!==null&&(y.flags|=4)}else{ge=G.nodeType===9?G:G.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=Yt(_)),p==="http://www.w3.org/1999/xhtml"?_==="script"?(p=ge.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof D.is=="string"?p=ge.createElement(_,{is:D.is}):(p=ge.createElement(_),_==="select"&&(ge=p,D.multiple?ge.multiple=!0:D.size&&(ge.size=D.size))):p=ge.createElementNS(p,_),p[ad]=y,p[nf]=D,GD(p,y,!1,!1),y.stateNode=p;e:{switch(ge=cr(_,D),_){case"dialog":qn("cancel",p),qn("close",p),G=D;break;case"iframe":case"object":case"embed":qn("load",p),G=D;break;case"video":case"audio":for(G=0;G<Ku.length;G++)qn(Ku[G],p);G=D;break;case"source":qn("error",p),G=D;break;case"img":case"image":case"link":qn("error",p),qn("load",p),G=D;break;case"details":qn("toggle",p),G=D;break;case"input":Y(p,D),G=Se(p,D),qn("invalid",p);break;case"option":G=D;break;case"select":p._wrapperState={wasMultiple:!!D.multiple},G=ee({},D,{value:void 0}),qn("invalid",p);break;case"textarea":tt(p,D),G=Ot(p,D),qn("invalid",p);break;default:G=D}is(_,G),Me=G;for(te in Me)if(Me.hasOwnProperty(te)){var Ve=Me[te];te==="style"?hr(p,Ve):te==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,Ve!=null&&Vt(p,Ve)):te==="children"?typeof Ve=="string"?(_!=="textarea"||Ve!=="")&&tr(p,Ve):typeof Ve=="number"&&tr(p,""+Ve):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(a.hasOwnProperty(te)?Ve!=null&&te==="onScroll"&&qn("scroll",p):Ve!=null&&N(p,te,Ve,ge))}switch(_){case"input":pe(p),mt(p,D,!1);break;case"textarea":pe(p),At(p);break;case"option":D.value!=null&&p.setAttribute("value",""+be(D.value));break;case"select":p.multiple=!!D.multiple,te=D.value,te!=null?ut(p,!!D.multiple,te,!1):D.defaultValue!=null&&ut(p,!!D.multiple,D.defaultValue,!0);break;default:typeof G.onClick=="function"&&(p.onclick=sf)}switch(_){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Xo(y),null;case 6:if(p&&y.stateNode!=null)KD(p,y,p.memoizedProps,D);else{if(typeof D!="string"&&y.stateNode===null)throw Error(s(166));if(_=Qd(Zu.current),Qd(Oi.current),Ma(y)){if(D=y.stateNode,_=y.memoizedProps,D[ad]=y,(te=D.nodeValue!==_)&&(p=gt,p!==null))switch(p.tag){case 3:Dg(D.nodeValue,_,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&Dg(D.nodeValue,_,(p.mode&1)!==0)}te&&(y.flags|=4)}else D=(_.nodeType===9?_:_.ownerDocument).createTextNode(D),D[ad]=y,y.stateNode=D}return Xo(y),null;case 13:if(_n(ua),D=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(_t&&yt!==null&&(y.mode&1)!==0&&(y.flags&128)===0)Ms(),Or(),y.flags|=98560,te=!1;else if(te=Ma(y),D!==null&&D.dehydrated!==null){if(p===null){if(!te)throw Error(s(318));if(te=y.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(s(317));te[ad]=y}else Or(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;Xo(y),te=!1}else Et!==null&&(cS(Et),Et=null),te=!0;if(!te)return y.flags&65536?y:null}return(y.flags&128)!==0?(y.lanes=_,y):(D=D!==null,D!==(p!==null&&p.memoizedState!==null)&&D&&(y.child.flags|=8192,(y.mode&1)!==0&&(p===null||(ua.current&1)!==0?Wi===0&&(Wi=3):hS())),y.updateQueue!==null&&(y.flags|=4),Xo(y),null);case 4:return id(),Z3(p,y),p===null&&rm(y.stateNode.containerInfo),Xo(y),null;case 10:return ga(y.type._context),Xo(y),null;case 17:return Yo(y.type)&&Rg(),Xo(y),null;case 19:if(_n(ua),te=y.memoizedState,te===null)return Xo(y),null;if(D=(y.flags&128)!==0,ge=te.rendering,ge===null)if(D)Dy(te,!1);else{if(Wi!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(ge=jc(p),ge!==null){for(y.flags|=128,Dy(te,!1),D=ge.updateQueue,D!==null&&(y.updateQueue=D,y.flags|=4),y.subtreeFlags=0,D=_,_=y.child;_!==null;)te=_,p=D,te.flags&=14680066,ge=te.alternate,ge===null?(te.childLanes=0,te.lanes=p,te.child=null,te.subtreeFlags=0,te.memoizedProps=null,te.memoizedState=null,te.updateQueue=null,te.dependencies=null,te.stateNode=null):(te.childLanes=ge.childLanes,te.lanes=ge.lanes,te.child=ge.child,te.subtreeFlags=0,te.deletions=null,te.memoizedProps=ge.memoizedProps,te.memoizedState=ge.memoizedState,te.updateQueue=ge.updateQueue,te.type=ge.type,p=ge.dependencies,te.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),_=_.sibling;return Bn(ua,ua.current&1|2),y.child}p=p.sibling}te.tail!==null&&Vs()>Kg&&(y.flags|=128,D=!0,Dy(te,!1),y.lanes=4194304)}else{if(!D)if(p=jc(ge),p!==null){if(y.flags|=128,D=!0,_=p.updateQueue,_!==null&&(y.updateQueue=_,y.flags|=4),Dy(te,!0),te.tail===null&&te.tailMode==="hidden"&&!ge.alternate&&!_t)return Xo(y),null}else 2*Vs()-te.renderingStartTime>Kg&&_!==1073741824&&(y.flags|=128,D=!0,Dy(te,!1),y.lanes=4194304);te.isBackwards?(ge.sibling=y.child,y.child=ge):(_=te.last,_!==null?_.sibling=ge:y.child=ge,te.last=ge)}return te.tail!==null?(y=te.tail,te.rendering=y,te.tail=y.sibling,te.renderingStartTime=Vs(),y.sibling=null,_=ua.current,Bn(ua,D?_&1|2:_&1),y):(Xo(y),null);case 22:case 23:return uS(),D=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==D&&(y.flags|=8192),D&&(y.mode&1)!==0?(Cc&1073741824)!==0&&(Xo(y),y.subtreeFlags&6&&(y.flags|=8192)):Xo(y),null;case 24:return null;case 25:return null}throw Error(s(156,y.tag))}function Sle(p,y){switch(lt(y),y.tag){case 1:return Yo(y.type)&&Rg(),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return id(),_n(Go),_n(zi),Oy(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 5:return Py(y),null;case 13:if(_n(ua),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(s(340));Or()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return _n(ua),null;case 4:return id(),null;case 10:return ga(y.type._context),null;case 22:case 23:return uS(),null;case 24:return null;default:return null}}var o2=!1,Qo=!1,Cle=typeof WeakSet=="function"?WeakSet:Set,Ir=null;function Gg(p,y){var _=p.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(D){di(p,y,D)}else _.current=null}function J3(p,y,_){try{_()}catch(D){di(p,y,D)}}var XD=!1;function kle(p,y){if(Lp=Gm,p=ii(),yc(p)){if("selectionStart"in p)var _={start:p.selectionStart,end:p.selectionEnd};else e:{_=(_=p.ownerDocument)&&_.defaultView||window;var D=_.getSelection&&_.getSelection();if(D&&D.rangeCount!==0){_=D.anchorNode;var G=D.anchorOffset,te=D.focusNode;D=D.focusOffset;try{_.nodeType,te.nodeType}catch{_=null;break e}var ge=0,Me=-1,Ve=-1,ft=0,Ht=0,Qt=p,qt=null;t:for(;;){for(var _r;Qt!==_||G!==0&&Qt.nodeType!==3||(Me=ge+G),Qt!==te||D!==0&&Qt.nodeType!==3||(Ve=ge+D),Qt.nodeType===3&&(ge+=Qt.nodeValue.length),(_r=Qt.firstChild)!==null;)qt=Qt,Qt=_r;for(;;){if(Qt===p)break t;if(qt===_&&++ft===G&&(Me=ge),qt===te&&++Ht===D&&(Ve=ge),(_r=Qt.nextSibling)!==null)break;Qt=qt,qt=Qt.parentNode}Qt=_r}_=Me===-1||Ve===-1?null:{start:Me,end:Ve}}else _=null}_=_||{start:0,end:0}}else _=null;for(nm={focusedElem:p,selectionRange:_},Gm=!1,Ir=y;Ir!==null;)if(y=Ir,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,Ir=p;else for(;Ir!==null;){y=Ir;try{var Lr=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(Lr!==null){var qr=Lr.memoizedProps,bi=Lr.memoizedState,ot=y.stateNode,Ye=ot.getSnapshotBeforeUpdate(y.elementType===y.type?qr:eu(y.type,qr),bi);ot.__reactInternalSnapshotBeforeUpdate=Ye}break;case 3:var dt=y.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(rr){di(y,y.return,rr)}if(p=y.sibling,p!==null){p.return=y.return,Ir=p;break}Ir=y.return}return Lr=XD,XD=!1,Lr}function Ry(p,y,_){var D=y.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var G=D=D.next;do{if((G.tag&p)===p){var te=G.destroy;G.destroy=void 0,te!==void 0&&J3(y,_,te)}G=G.next}while(G!==D)}}function l2(p,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&p)===p){var D=_.create;_.destroy=D()}_=_.next}while(_!==y)}}function eS(p){var y=p.ref;if(y!==null){var _=p.stateNode;switch(p.tag){case 5:p=_;break;default:p=_}typeof y=="function"?y(p):y.current=p}}function QD(p){var y=p.alternate;y!==null&&(p.alternate=null,QD(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&(delete y[ad],delete y[nf],delete y[Ho],delete y[L3],delete y[F3])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function ZD(p){return p.tag===5||p.tag===3||p.tag===4}function JD(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||ZD(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function tS(p,y,_){var D=p.tag;if(D===5||D===6)p=p.stateNode,y?_.nodeType===8?_.parentNode.insertBefore(p,y):_.insertBefore(p,y):(_.nodeType===8?(y=_.parentNode,y.insertBefore(p,_)):(y=_,y.appendChild(p)),_=_._reactRootContainer,_!=null||y.onclick!==null||(y.onclick=sf));else if(D!==4&&(p=p.child,p!==null))for(tS(p,y,_),p=p.sibling;p!==null;)tS(p,y,_),p=p.sibling}function rS(p,y,_){var D=p.tag;if(D===5||D===6)p=p.stateNode,y?_.insertBefore(p,y):_.appendChild(p);else if(D!==4&&(p=p.child,p!==null))for(rS(p,y,_),p=p.sibling;p!==null;)rS(p,y,_),p=p.sibling}var Io=null,tu=!1;function hf(p,y,_){for(_=_.child;_!==null;)eR(p,y,_),_=_.sibling}function eR(p,y,_){if(ta&&typeof ta.onCommitFiberUnmount=="function")try{ta.onCommitFiberUnmount(Xs,_)}catch{}switch(_.tag){case 5:Qo||Gg(_,y);case 6:var D=Io,G=tu;Io=null,hf(p,y,_),Io=D,tu=G,Io!==null&&(tu?(p=Io,_=_.stateNode,p.nodeType===8?p.parentNode.removeChild(_):p.removeChild(_)):Io.removeChild(_.stateNode));break;case 18:Io!==null&&(tu?(p=Io,_=_.stateNode,p.nodeType===8?_y(p.parentNode,_):p.nodeType===1&&_y(p,_),Zc(p)):_y(Io,_.stateNode));break;case 4:D=Io,G=tu,Io=_.stateNode.containerInfo,tu=!0,hf(p,y,_),Io=D,tu=G;break;case 0:case 11:case 14:case 15:if(!Qo&&(D=_.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){G=D=D.next;do{var te=G,ge=te.destroy;te=te.tag,ge!==void 0&&((te&2)!==0||(te&4)!==0)&&J3(_,y,ge),G=G.next}while(G!==D)}hf(p,y,_);break;case 1:if(!Qo&&(Gg(_,y),D=_.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=_.memoizedProps,D.state=_.memoizedState,D.componentWillUnmount()}catch(Me){di(_,y,Me)}hf(p,y,_);break;case 21:hf(p,y,_);break;case 22:_.mode&1?(Qo=(D=Qo)||_.memoizedState!==null,hf(p,y,_),Qo=D):hf(p,y,_);break;default:hf(p,y,_)}}function tR(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var _=p.stateNode;_===null&&(_=p.stateNode=new Cle),y.forEach(function(D){var G=Dle.bind(null,p,D);_.has(D)||(_.add(D),D.then(G,G))})}}function ru(p,y){var _=y.deletions;if(_!==null)for(var D=0;D<_.length;D++){var G=_[D];try{var te=p,ge=y,Me=ge;e:for(;Me!==null;){switch(Me.tag){case 5:Io=Me.stateNode,tu=!1;break e;case 3:Io=Me.stateNode.containerInfo,tu=!0;break e;case 4:Io=Me.stateNode.containerInfo,tu=!0;break e}Me=Me.return}if(Io===null)throw Error(s(160));eR(te,ge,G),Io=null,tu=!1;var Ve=G.alternate;Ve!==null&&(Ve.return=null),G.return=null}catch(ft){di(G,y,ft)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)rR(y,p),y=y.sibling}function rR(p,y){var _=p.alternate,D=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ru(y,p),eh(p),D&4){try{Ry(3,p,p.return),l2(3,p)}catch(qr){di(p,p.return,qr)}try{Ry(5,p,p.return)}catch(qr){di(p,p.return,qr)}}break;case 1:ru(y,p),eh(p),D&512&&_!==null&&Gg(_,_.return);break;case 5:if(ru(y,p),eh(p),D&512&&_!==null&&Gg(_,_.return),p.flags&32){var G=p.stateNode;try{tr(G,"")}catch(qr){di(p,p.return,qr)}}if(D&4&&(G=p.stateNode,G!=null)){var te=p.memoizedProps,ge=_!==null?_.memoizedProps:te,Me=p.type,Ve=p.updateQueue;if(p.updateQueue=null,Ve!==null)try{Me==="input"&&te.type==="radio"&&te.name!=null&&Le(G,te),cr(Me,ge);var ft=cr(Me,te);for(ge=0;ge<Ve.length;ge+=2){var Ht=Ve[ge],Qt=Ve[ge+1];Ht==="style"?hr(G,Qt):Ht==="dangerouslySetInnerHTML"?Vt(G,Qt):Ht==="children"?tr(G,Qt):N(G,Ht,Qt,ft)}switch(Me){case"input":xe(G,te);break;case"textarea":st(G,te);break;case"select":var qt=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!te.multiple;var _r=te.value;_r!=null?ut(G,!!te.multiple,_r,!1):qt!==!!te.multiple&&(te.defaultValue!=null?ut(G,!!te.multiple,te.defaultValue,!0):ut(G,!!te.multiple,te.multiple?[]:"",!1))}G[nf]=te}catch(qr){di(p,p.return,qr)}}break;case 6:if(ru(y,p),eh(p),D&4){if(p.stateNode===null)throw Error(s(162));G=p.stateNode,te=p.memoizedProps;try{G.nodeValue=te}catch(qr){di(p,p.return,qr)}}break;case 3:if(ru(y,p),eh(p),D&4&&_!==null&&_.memoizedState.isDehydrated)try{Zc(y.containerInfo)}catch(qr){di(p,p.return,qr)}break;case 4:ru(y,p),eh(p);break;case 13:ru(y,p),eh(p),G=p.child,G.flags&8192&&(te=G.memoizedState!==null,G.stateNode.isHidden=te,!te||G.alternate!==null&&G.alternate.memoizedState!==null||(aS=Vs())),D&4&&tR(p);break;case 22:if(Ht=_!==null&&_.memoizedState!==null,p.mode&1?(Qo=(ft=Qo)||Ht,ru(y,p),Qo=ft):ru(y,p),eh(p),D&8192){if(ft=p.memoizedState!==null,(p.stateNode.isHidden=ft)&&!Ht&&(p.mode&1)!==0)for(Ir=p,Ht=p.child;Ht!==null;){for(Qt=Ir=Ht;Ir!==null;){switch(qt=Ir,_r=qt.child,qt.tag){case 0:case 11:case 14:case 15:Ry(4,qt,qt.return);break;case 1:Gg(qt,qt.return);var Lr=qt.stateNode;if(typeof Lr.componentWillUnmount=="function"){D=qt,_=qt.return;try{y=D,Lr.props=y.memoizedProps,Lr.state=y.memoizedState,Lr.componentWillUnmount()}catch(qr){di(D,_,qr)}}break;case 5:Gg(qt,qt.return);break;case 22:if(qt.memoizedState!==null){aR(Qt);continue}}_r!==null?(_r.return=qt,Ir=_r):aR(Qt)}Ht=Ht.sibling}e:for(Ht=null,Qt=p;;){if(Qt.tag===5){if(Ht===null){Ht=Qt;try{G=Qt.stateNode,ft?(te=G.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none"):(Me=Qt.stateNode,Ve=Qt.memoizedProps.style,ge=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null,Me.style.display=Er("display",ge))}catch(qr){di(p,p.return,qr)}}}else if(Qt.tag===6){if(Ht===null)try{Qt.stateNode.nodeValue=ft?"":Qt.memoizedProps}catch(qr){di(p,p.return,qr)}}else if((Qt.tag!==22&&Qt.tag!==23||Qt.memoizedState===null||Qt===p)&&Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}if(Qt===p)break e;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===p)break e;Ht===Qt&&(Ht=null),Qt=Qt.return}Ht===Qt&&(Ht=null),Qt.sibling.return=Qt.return,Qt=Qt.sibling}}break;case 19:ru(y,p),eh(p),D&4&&tR(p);break;case 21:break;default:ru(y,p),eh(p)}}function eh(p){var y=p.flags;if(y&2){try{e:{for(var _=p.return;_!==null;){if(ZD(_)){var D=_;break e}_=_.return}throw Error(s(160))}switch(D.tag){case 5:var G=D.stateNode;D.flags&32&&(tr(G,""),D.flags&=-33);var te=JD(p);rS(p,te,G);break;case 3:case 4:var ge=D.stateNode.containerInfo,Me=JD(p);tS(p,Me,ge);break;default:throw Error(s(161))}}catch(Ve){di(p,p.return,Ve)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function _le(p,y,_){Ir=p,sR(p)}function sR(p,y,_){for(var D=(p.mode&1)!==0;Ir!==null;){var G=Ir,te=G.child;if(G.tag===22&&D){var ge=G.memoizedState!==null||o2;if(!ge){var Me=G.alternate,Ve=Me!==null&&Me.memoizedState!==null||Qo;Me=o2;var ft=Qo;if(o2=ge,(Qo=Ve)&&!ft)for(Ir=G;Ir!==null;)ge=Ir,Ve=ge.child,ge.tag===22&&ge.memoizedState!==null?iR(G):Ve!==null?(Ve.return=ge,Ir=Ve):iR(G);for(;te!==null;)Ir=te,sR(te),te=te.sibling;Ir=G,o2=Me,Qo=ft}nR(p)}else(G.subtreeFlags&8772)!==0&&te!==null?(te.return=G,Ir=te):nR(p)}}function nR(p){for(;Ir!==null;){var y=Ir;if((y.flags&8772)!==0){var _=y.alternate;try{if((y.flags&8772)!==0)switch(y.tag){case 0:case 11:case 15:Qo||l2(5,y);break;case 1:var D=y.stateNode;if(y.flags&4&&!Qo)if(_===null)D.componentDidMount();else{var G=y.elementType===y.type?_.memoizedProps:eu(y.type,_.memoizedProps);D.componentDidUpdate(G,_.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var te=y.updateQueue;te!==null&&ql(y,te,D);break;case 3:var ge=y.updateQueue;if(ge!==null){if(_=null,y.child!==null)switch(y.child.tag){case 5:_=y.child.stateNode;break;case 1:_=y.child.stateNode}ql(y,ge,_)}break;case 5:var Me=y.stateNode;if(_===null&&y.flags&4){_=Me;var Ve=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":Ve.autoFocus&&_.focus();break;case"img":Ve.src&&(_.src=Ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var ft=y.alternate;if(ft!==null){var Ht=ft.memoizedState;if(Ht!==null){var Qt=Ht.dehydrated;Qt!==null&&Zc(Qt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Qo||y.flags&512&&eS(y)}catch(qt){di(y,y.return,qt)}}if(y===p){Ir=null;break}if(_=y.sibling,_!==null){_.return=y.return,Ir=_;break}Ir=y.return}}function aR(p){for(;Ir!==null;){var y=Ir;if(y===p){Ir=null;break}var _=y.sibling;if(_!==null){_.return=y.return,Ir=_;break}Ir=y.return}}function iR(p){for(;Ir!==null;){var y=Ir;try{switch(y.tag){case 0:case 11:case 15:var _=y.return;try{l2(4,y)}catch(Ve){di(y,_,Ve)}break;case 1:var D=y.stateNode;if(typeof D.componentDidMount=="function"){var G=y.return;try{D.componentDidMount()}catch(Ve){di(y,G,Ve)}}var te=y.return;try{eS(y)}catch(Ve){di(y,te,Ve)}break;case 5:var ge=y.return;try{eS(y)}catch(Ve){di(y,ge,Ve)}}}catch(Ve){di(y,y.return,Ve)}if(y===p){Ir=null;break}var Me=y.sibling;if(Me!==null){Me.return=y.return,Ir=Me;break}Ir=y.return}}var Ale=Math.ceil,c2=C.ReactCurrentDispatcher,sS=C.ReactCurrentOwner,cd=C.ReactCurrentBatchConfig,yn=0,xo=null,Ii=null,$o=0,Cc=0,Yg=bc(0),Wi=0,My=null,Wp=0,d2=0,nS=0,Ly=null,Gl=null,aS=0,Kg=1/0,dm=null,u2=!1,iS=null,mf=null,h2=!1,ff=null,m2=0,Fy=0,oS=null,f2=-1,p2=0;function Nl(){return(yn&6)!==0?Vs():f2!==-1?f2:f2=Vs()}function pf(p){return(p.mode&1)===0?1:(yn&2)!==0&&$o!==0?$o&-$o:Ga.transition!==null?(p2===0&&(p2=lo()),p2):(p=hn,p!==0||(p=window.event,p=p===void 0?16:zh(p.type)),p)}function su(p,y,_,D){if(50<Fy)throw Fy=0,oS=null,Error(s(185));Dl(p,_,D),((yn&2)===0||p!==xo)&&(p===xo&&((yn&2)===0&&(d2|=_),Wi===4&&xf(p,$o)),Yl(p,D),_===1&&yn===0&&(y.mode&1)===0&&(Kg=Vs()+500,Bp&&ae()))}function Yl(p,y){var _=p.callbackNode;Hs(p,y);var D=dn(p,p===xo?$o:0);if(D===0)_!==null&&Wa(_),p.callbackNode=null,p.callbackPriority=0;else if(y=D&-D,p.callbackPriority!==y){if(_!=null&&Wa(_),y===1)p.tag===0?Q(lR.bind(null,p)):R(lR.bind(null,p)),R3(function(){(yn&6)===0&&ae()}),_=null;else{switch(Fd(D)){case 1:_=io;break;case 4:_=da;break;case 16:_=Eo;break;case 536870912:_=Fs;break;default:_=Eo}_=xR(_,oR.bind(null,p))}p.callbackPriority=y,p.callbackNode=_}}function oR(p,y){if(f2=-1,p2=0,(yn&6)!==0)throw Error(s(327));var _=p.callbackNode;if(Xg()&&p.callbackNode!==_)return null;var D=dn(p,p===xo?$o:0);if(D===0)return null;if((D&30)!==0||(D&p.expiredLanes)!==0||y)y=x2(p,D);else{y=D;var G=yn;yn|=2;var te=dR();(xo!==p||$o!==y)&&(dm=null,Kg=Vs()+500,Hp(p,y));do try{Tle();break}catch(Me){cR(p,Me)}while(!0);gn(),c2.current=te,yn=G,Ii!==null?y=0:(xo=null,$o=0,y=Wi)}if(y!==0){if(y===2&&(G=Po(p),G!==0&&(D=G,y=lS(p,G))),y===1)throw _=My,Hp(p,0),xf(p,D),Yl(p,Vs()),_;if(y===6)xf(p,D);else{if(G=p.current.alternate,(D&30)===0&&!Ele(G)&&(y=x2(p,D),y===2&&(te=Po(p),te!==0&&(D=te,y=lS(p,te))),y===1))throw _=My,Hp(p,0),xf(p,D),Yl(p,Vs()),_;switch(p.finishedWork=G,p.finishedLanes=D,y){case 0:case 1:throw Error(s(345));case 2:Gp(p,Gl,dm);break;case 3:if(xf(p,D),(D&130023424)===D&&(y=aS+500-Vs(),10<y)){if(dn(p,0)!==0)break;if(G=p.suspendedLanes,(G&D)!==D){Nl(),p.pingedLanes|=p.suspendedLanes&G;break}p.timeoutHandle=ky(Gp.bind(null,p,Gl,dm),y);break}Gp(p,Gl,dm);break;case 4:if(xf(p,D),(D&4194240)===D)break;for(y=p.eventTimes,G=-1;0<D;){var ge=31-es(D);te=1<<ge,ge=y[ge],ge>G&&(G=ge),D&=~te}if(D=G,D=Vs()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*Ale(D/1960))-D,10<D){p.timeoutHandle=ky(Gp.bind(null,p,Gl,dm),D);break}Gp(p,Gl,dm);break;case 5:Gp(p,Gl,dm);break;default:throw Error(s(329))}}}return Yl(p,Vs()),p.callbackNode===_?oR.bind(null,p):null}function lS(p,y){var _=Ly;return p.current.memoizedState.isDehydrated&&(Hp(p,y).flags|=256),p=x2(p,y),p!==2&&(y=Gl,Gl=_,y!==null&&cS(y)),p}function cS(p){Gl===null?Gl=p:Gl.push.apply(Gl,p)}function Ele(p){for(var y=p;;){if(y.flags&16384){var _=y.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var D=0;D<_.length;D++){var G=_[D],te=G.getSnapshot;G=G.value;try{if(!Da(te(),G))return!1}catch{return!1}}}if(_=y.child,y.subtreeFlags&16384&&_!==null)_.return=y,y=_;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function xf(p,y){for(y&=~nS,y&=~d2,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var _=31-es(y),D=1<<_;p[_]=-1,y&=~D}}function lR(p){if((yn&6)!==0)throw Error(s(327));Xg();var y=dn(p,0);if((y&1)===0)return Yl(p,Vs()),null;var _=x2(p,y);if(p.tag!==0&&_===2){var D=Po(p);D!==0&&(y=D,_=lS(p,D))}if(_===1)throw _=My,Hp(p,0),xf(p,y),Yl(p,Vs()),_;if(_===6)throw Error(s(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,Gp(p,Gl,dm),Yl(p,Vs()),null}function dS(p,y){var _=yn;yn|=1;try{return p(y)}finally{yn=_,yn===0&&(Kg=Vs()+500,Bp&&ae())}}function qp(p){ff!==null&&ff.tag===0&&(yn&6)===0&&Xg();var y=yn;yn|=1;var _=cd.transition,D=hn;try{if(cd.transition=null,hn=1,p)return p()}finally{hn=D,cd.transition=_,yn=y,(yn&6)===0&&ae()}}function uS(){Cc=Yg.current,_n(Yg)}function Hp(p,y){p.finishedWork=null,p.finishedLanes=0;var _=p.timeoutHandle;if(_!==-1&&(p.timeoutHandle=-1,Yw(_)),Ii!==null)for(_=Ii.return;_!==null;){var D=_;switch(lt(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Rg();break;case 3:id(),_n(Go),_n(zi),Oy();break;case 5:Py(D);break;case 4:id();break;case 13:_n(ua);break;case 19:_n(ua);break;case 10:ga(D.type._context);break;case 22:case 23:uS()}_=_.return}if(xo=p,Ii=p=gf(p.current,null),$o=Cc=y,Wi=0,My=null,nS=d2=Wp=0,Gl=Ly=null,Hn!==null){for(y=0;y<Hn.length;y++)if(_=Hn[y],D=_.interleaved,D!==null){_.interleaved=null;var G=D.next,te=_.pending;if(te!==null){var ge=te.next;te.next=G,D.next=ge}_.pending=D}Hn=null}return p}function cR(p,y){do{var _=Ii;try{if(gn(),Mg.current=s2,cf){for(var D=va.memoizedState;D!==null;){var G=D.queue;G!==null&&(G.pending=null),D=D.next}cf=!1}if(od=0,Qa=ci=va=null,Zd=!1,df=0,sS.current=null,_===null||_.return===null){Wi=1,My=y,Ii=null;break}e:{var te=p,ge=_.return,Me=_,Ve=y;if(y=$o,Me.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var ft=Ve,Ht=Me,Qt=Ht.tag;if((Ht.mode&1)===0&&(Qt===0||Qt===11||Qt===15)){var qt=Ht.alternate;qt?(Ht.updateQueue=qt.updateQueue,Ht.memoizedState=qt.memoizedState,Ht.lanes=qt.lanes):(Ht.updateQueue=null,Ht.memoizedState=null)}var _r=$D(ge);if(_r!==null){_r.flags&=-257,DD(_r,ge,Me,te,y),_r.mode&1&&ID(te,ft,y),y=_r,Ve=ft;var Lr=y.updateQueue;if(Lr===null){var qr=new Set;qr.add(Ve),y.updateQueue=qr}else Lr.add(Ve);break e}else{if((y&1)===0){ID(te,ft,y),hS();break e}Ve=Error(s(426))}}else if(_t&&Me.mode&1){var bi=$D(ge);if(bi!==null){(bi.flags&65536)===0&&(bi.flags|=256),DD(bi,ge,Me,te,y),dr(Hg(Ve,Me));break e}}te=Ve=Hg(Ve,Me),Wi!==4&&(Wi=2),Ly===null?Ly=[te]:Ly.push(te),te=ge;do{switch(te.tag){case 3:te.flags|=65536,y&=-y,te.lanes|=y;var ot=TD(te,Ve,y);Yn(te,ot);break e;case 1:Me=Ve;var Ye=te.type,dt=te.stateNode;if((te.flags&128)===0&&(typeof Ye.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(mf===null||!mf.has(dt)))){te.flags|=65536,y&=-y,te.lanes|=y;var rr=OD(te,Me,y);Yn(te,rr);break e}}te=te.return}while(te!==null)}hR(_)}catch(Qr){y=Qr,Ii===_&&_!==null&&(Ii=_=_.return);continue}break}while(!0)}function dR(){var p=c2.current;return c2.current=s2,p===null?s2:p}function hS(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),xo===null||(Wp&268435455)===0&&(d2&268435455)===0||xf(xo,$o)}function x2(p,y){var _=yn;yn|=2;var D=dR();(xo!==p||$o!==y)&&(dm=null,Hp(p,y));do try{Ple();break}catch(G){cR(p,G)}while(!0);if(gn(),yn=_,c2.current=D,Ii!==null)throw Error(s(261));return xo=null,$o=0,Wi}function Ple(){for(;Ii!==null;)uR(Ii)}function Tle(){for(;Ii!==null&&!xi();)uR(Ii)}function uR(p){var y=pR(p.alternate,p,Cc);p.memoizedProps=p.pendingProps,y===null?hR(p):Ii=y,sS.current=null}function hR(p){var y=p;do{var _=y.alternate;if(p=y.return,(y.flags&32768)===0){if(_=Nle(_,y,Cc),_!==null){Ii=_;return}}else{if(_=Sle(_,y),_!==null){_.flags&=32767,Ii=_;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Wi=6,Ii=null;return}}if(y=y.sibling,y!==null){Ii=y;return}Ii=y=p}while(y!==null);Wi===0&&(Wi=5)}function Gp(p,y,_){var D=hn,G=cd.transition;try{cd.transition=null,hn=1,Ole(p,y,_,D)}finally{cd.transition=G,hn=D}return null}function Ole(p,y,_,D){do Xg();while(ff!==null);if((yn&6)!==0)throw Error(s(327));_=p.finishedWork;var G=p.finishedLanes;if(_===null)return null;if(p.finishedWork=null,p.finishedLanes=0,_===p.current)throw Error(s(177));p.callbackNode=null,p.callbackPriority=0;var te=_.lanes|_.childLanes;if(Kc(p,te),p===xo&&(Ii=xo=null,$o=0),(_.subtreeFlags&2064)===0&&(_.flags&2064)===0||h2||(h2=!0,xR(Eo,function(){return Xg(),null})),te=(_.flags&15990)!==0,(_.subtreeFlags&15990)!==0||te){te=cd.transition,cd.transition=null;var ge=hn;hn=1;var Me=yn;yn|=4,sS.current=null,kle(p,_),rR(_,p),Pp(nm),Gm=!!Lp,nm=Lp=null,p.current=_,_le(_),Ao(),yn=Me,hn=ge,cd.transition=te}else p.current=_;if(h2&&(h2=!1,ff=p,m2=G),te=p.pendingLanes,te===0&&(mf=null),ts(_.stateNode),Yl(p,Vs()),y!==null)for(D=p.onRecoverableError,_=0;_<y.length;_++)G=y[_],D(G.value,{componentStack:G.stack,digest:G.digest});if(u2)throw u2=!1,p=iS,iS=null,p;return(m2&1)!==0&&p.tag!==0&&Xg(),te=p.pendingLanes,(te&1)!==0?p===oS?Fy++:(Fy=0,oS=p):Fy=0,ae(),null}function Xg(){if(ff!==null){var p=Fd(m2),y=cd.transition,_=hn;try{if(cd.transition=null,hn=16>p?16:p,ff===null)var D=!1;else{if(p=ff,ff=null,m2=0,(yn&6)!==0)throw Error(s(331));var G=yn;for(yn|=4,Ir=p.current;Ir!==null;){var te=Ir,ge=te.child;if((Ir.flags&16)!==0){var Me=te.deletions;if(Me!==null){for(var Ve=0;Ve<Me.length;Ve++){var ft=Me[Ve];for(Ir=ft;Ir!==null;){var Ht=Ir;switch(Ht.tag){case 0:case 11:case 15:Ry(8,Ht,te)}var Qt=Ht.child;if(Qt!==null)Qt.return=Ht,Ir=Qt;else for(;Ir!==null;){Ht=Ir;var qt=Ht.sibling,_r=Ht.return;if(QD(Ht),Ht===ft){Ir=null;break}if(qt!==null){qt.return=_r,Ir=qt;break}Ir=_r}}}var Lr=te.alternate;if(Lr!==null){var qr=Lr.child;if(qr!==null){Lr.child=null;do{var bi=qr.sibling;qr.sibling=null,qr=bi}while(qr!==null)}}Ir=te}}if((te.subtreeFlags&2064)!==0&&ge!==null)ge.return=te,Ir=ge;else e:for(;Ir!==null;){if(te=Ir,(te.flags&2048)!==0)switch(te.tag){case 0:case 11:case 15:Ry(9,te,te.return)}var ot=te.sibling;if(ot!==null){ot.return=te.return,Ir=ot;break e}Ir=te.return}}var Ye=p.current;for(Ir=Ye;Ir!==null;){ge=Ir;var dt=ge.child;if((ge.subtreeFlags&2064)!==0&&dt!==null)dt.return=ge,Ir=dt;else e:for(ge=Ye;Ir!==null;){if(Me=Ir,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:l2(9,Me)}}catch(Qr){di(Me,Me.return,Qr)}if(Me===ge){Ir=null;break e}var rr=Me.sibling;if(rr!==null){rr.return=Me.return,Ir=rr;break e}Ir=Me.return}}if(yn=G,ae(),ta&&typeof ta.onPostCommitFiberRoot=="function")try{ta.onPostCommitFiberRoot(Xs,p)}catch{}D=!0}return D}finally{hn=_,cd.transition=y}}return!1}function mR(p,y,_){y=Hg(_,y),y=TD(p,y,1),p=Ka(p,y,1),y=Nl(),p!==null&&(Dl(p,1,y),Yl(p,y))}function di(p,y,_){if(p.tag===3)mR(p,p,_);else for(;y!==null;){if(y.tag===3){mR(y,p,_);break}else if(y.tag===1){var D=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(mf===null||!mf.has(D))){p=Hg(_,p),p=OD(y,p,1),y=Ka(y,p,1),p=Nl(),y!==null&&(Dl(y,1,p),Yl(y,p));break}}y=y.return}}function Ile(p,y,_){var D=p.pingCache;D!==null&&D.delete(y),y=Nl(),p.pingedLanes|=p.suspendedLanes&_,xo===p&&($o&_)===_&&(Wi===4||Wi===3&&($o&130023424)===$o&&500>Vs()-aS?Hp(p,0):nS|=_),Yl(p,y)}function fR(p,y){y===0&&((p.mode&1)===0?y=1:(y=Vr,Vr<<=1,(Vr&130023424)===0&&(Vr=4194304)));var _=Nl();p=Gn(p,y),p!==null&&(Dl(p,y,_),Yl(p,_))}function $le(p){var y=p.memoizedState,_=0;y!==null&&(_=y.retryLane),fR(p,_)}function Dle(p,y){var _=0;switch(p.tag){case 13:var D=p.stateNode,G=p.memoizedState;G!==null&&(_=G.retryLane);break;case 19:D=p.stateNode;break;default:throw Error(s(314))}D!==null&&D.delete(y),fR(p,_)}var pR;pR=function(p,y,_){if(p!==null)if(p.memoizedProps!==y.pendingProps||Go.current)Hl=!0;else{if((p.lanes&_)===0&&(y.flags&128)===0)return Hl=!1,jle(p,y,_);Hl=(p.flags&131072)!==0}else Hl=!1,_t&&(y.flags&1048576)!==0&&rt(y,Ne,y.index);switch(y.lanes=0,y.tag){case 2:var D=y.type;i2(p,y),p=y.pendingProps;var G=of(y,zi.current);La(y,_),G=Up(null,y,D,p,G,_);var te=ld();return y.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,Yo(D)?(te=!0,om(y)):te=!1,y.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,Vi(y),G.updater=n2,y.stateNode=G,G._reactInternals=y,V3(y,D,p,_),y=G3(null,y,D,!0,te,_)):(y.tag=0,_t&&te&&wt(y),jl(null,y,G,_),y=y.child),y;case 16:D=y.elementType;e:{switch(i2(p,y),p=y.pendingProps,G=D._init,D=G(D._payload),y.type=D,G=y.tag=Mle(D),p=eu(D,p),G){case 0:y=H3(null,y,D,p,_);break e;case 1:y=UD(null,y,D,p,_);break e;case 11:y=RD(null,y,D,p,_);break e;case 14:y=MD(null,y,D,eu(D.type,p),_);break e}throw Error(s(306,D,""))}return y;case 0:return D=y.type,G=y.pendingProps,G=y.elementType===D?G:eu(D,G),H3(p,y,D,G,_);case 1:return D=y.type,G=y.pendingProps,G=y.elementType===D?G:eu(D,G),UD(p,y,D,G,_);case 3:e:{if(zD(y),p===null)throw Error(s(387));D=y.pendingProps,te=y.memoizedState,G=te.element,Ko(p,y),po(y,D,null,_);var ge=y.memoizedState;if(D=ge.element,te.isDehydrated)if(te={element:D,isDehydrated:!1,cache:ge.cache,pendingSuspenseBoundaries:ge.pendingSuspenseBoundaries,transitions:ge.transitions},y.updateQueue.baseState=te,y.memoizedState=te,y.flags&256){G=Hg(Error(s(423)),y),y=VD(p,y,D,_,G);break e}else if(D!==G){G=Hg(Error(s(424)),y),y=VD(p,y,D,_,G);break e}else for(yt=Oo(y.stateNode.containerInfo.firstChild),gt=y,_t=!0,Et=null,_=Ea(y,null,D,_),y.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Or(),D===G){y=cm(p,y,_);break e}jl(p,y,D,_)}y=y.child}return y;case 5:return Zw(y),p===null&&Mr(y),D=y.type,G=y.pendingProps,te=p!==null?p.memoizedProps:null,ge=G.children,Cy(D,G)?ge=null:te!==null&&Cy(D,te)&&(y.flags|=32),BD(p,y),jl(p,y,ge,_),y.child;case 6:return p===null&&Mr(y),null;case 13:return WD(p,y,_);case 4:return lf(y,y.stateNode.containerInfo),D=y.pendingProps,p===null?y.child=oi(y,null,D,_):jl(p,y,D,_),y.child;case 11:return D=y.type,G=y.pendingProps,G=y.elementType===D?G:eu(D,G),RD(p,y,D,G,_);case 7:return jl(p,y,y.pendingProps,_),y.child;case 8:return jl(p,y,y.pendingProps.children,_),y.child;case 12:return jl(p,y,y.pendingProps.children,_),y.child;case 10:e:{if(D=y.type._context,G=y.pendingProps,te=y.memoizedProps,ge=G.value,Bn(vi,D._currentValue),D._currentValue=ge,te!==null)if(Da(te.value,ge)){if(te.children===G.children&&!Go.current){y=cm(p,y,_);break e}}else for(te=y.child,te!==null&&(te.return=y);te!==null;){var Me=te.dependencies;if(Me!==null){ge=te.child;for(var Ve=Me.firstContext;Ve!==null;){if(Ve.context===D){if(te.tag===1){Ve=Ya(-1,_&-_),Ve.tag=2;var ft=te.updateQueue;if(ft!==null){ft=ft.shared;var Ht=ft.pending;Ht===null?Ve.next=Ve:(Ve.next=Ht.next,Ht.next=Ve),ft.pending=Ve}}te.lanes|=_,Ve=te.alternate,Ve!==null&&(Ve.lanes|=_),vn(te.return,_,y),Me.lanes|=_;break}Ve=Ve.next}}else if(te.tag===10)ge=te.type===y.type?null:te.child;else if(te.tag===18){if(ge=te.return,ge===null)throw Error(s(341));ge.lanes|=_,Me=ge.alternate,Me!==null&&(Me.lanes|=_),vn(ge,_,y),ge=te.sibling}else ge=te.child;if(ge!==null)ge.return=te;else for(ge=te;ge!==null;){if(ge===y){ge=null;break}if(te=ge.sibling,te!==null){te.return=ge.return,ge=te;break}ge=ge.return}te=ge}jl(p,y,G.children,_),y=y.child}return y;case 9:return G=y.type,D=y.pendingProps.children,La(y,_),G=Fa(G),D=D(G),y.flags|=1,jl(p,y,D,_),y.child;case 14:return D=y.type,G=eu(D,y.pendingProps),G=eu(D.type,G),MD(p,y,D,G,_);case 15:return LD(p,y,y.type,y.pendingProps,_);case 17:return D=y.type,G=y.pendingProps,G=y.elementType===D?G:eu(D,G),i2(p,y),y.tag=1,Yo(D)?(p=!0,om(y)):p=!1,La(y,_),ED(y,D,G),V3(y,D,G,_),G3(null,y,D,!0,p,_);case 19:return HD(p,y,_);case 22:return FD(p,y,_)}throw Error(s(156,y.tag))};function xR(p,y){return ws(p,y)}function Rle(p,y,_,D){this.tag=p,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dd(p,y,_,D){return new Rle(p,y,_,D)}function mS(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Mle(p){if(typeof p=="function")return mS(p)?1:0;if(p!=null){if(p=p.$$typeof,p===I)return 11;if(p===M)return 14}return 2}function gf(p,y){var _=p.alternate;return _===null?(_=dd(p.tag,y,p.key,p.mode),_.elementType=p.elementType,_.type=p.type,_.stateNode=p.stateNode,_.alternate=p,p.alternate=_):(_.pendingProps=y,_.type=p.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=p.flags&14680064,_.childLanes=p.childLanes,_.lanes=p.lanes,_.child=p.child,_.memoizedProps=p.memoizedProps,_.memoizedState=p.memoizedState,_.updateQueue=p.updateQueue,y=p.dependencies,_.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},_.sibling=p.sibling,_.index=p.index,_.ref=p.ref,_}function g2(p,y,_,D,G,te){var ge=2;if(D=p,typeof p=="function")mS(p)&&(ge=1);else if(typeof p=="string")ge=5;else e:switch(p){case k:return Yp(_.children,G,te,y);case E:ge=8,G|=8;break;case O:return p=dd(12,_,y,G|2),p.elementType=O,p.lanes=te,p;case L:return p=dd(13,_,y,G),p.elementType=L,p.lanes=te,p;case z:return p=dd(19,_,y,G),p.elementType=z,p.lanes=te,p;case B:return v2(_,G,te,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case $:ge=10;break e;case T:ge=9;break e;case I:ge=11;break e;case M:ge=14;break e;case V:ge=16,D=null;break e}throw Error(s(130,p==null?p:typeof p,""))}return y=dd(ge,_,y,G),y.elementType=p,y.type=D,y.lanes=te,y}function Yp(p,y,_,D){return p=dd(7,p,D,y),p.lanes=_,p}function v2(p,y,_,D){return p=dd(22,p,D,y),p.elementType=B,p.lanes=_,p.stateNode={isHidden:!1},p}function fS(p,y,_){return p=dd(6,p,null,y),p.lanes=_,p}function pS(p,y,_){return y=dd(4,p.children!==null?p.children:[],p.key,y),y.lanes=_,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function Lle(p,y,_,D,G){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yc(0),this.expirationTimes=Yc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yc(0),this.identifierPrefix=D,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function xS(p,y,_,D,G,te,ge,Me,Ve){return p=new Lle(p,y,_,Me,Ve),y===1?(y=1,te===!0&&(y|=8)):y=0,te=dd(3,null,null,y),p.current=te,te.stateNode=p,te.memoizedState={element:D,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vi(te),p}function Fle(p,y,_){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:D==null?null:""+D,children:p,containerInfo:y,implementation:_}}function gR(p){if(!p)return Qu;p=p._reactInternals;e:{if(Wt(p)!==p||p.tag!==1)throw Error(s(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(Yo(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(s(171))}if(p.tag===1){var _=p.type;if(Yo(_))return Ey(p,_,y)}return y}function vR(p,y,_,D,G,te,ge,Me,Ve){return p=xS(_,D,!0,p,G,te,ge,Me,Ve),p.context=gR(null),_=p.current,D=Nl(),G=pf(_),te=Ya(D,G),te.callback=y??null,Ka(_,te,G),p.current.lanes=G,Dl(p,G,D),Yl(p,D),p}function y2(p,y,_,D){var G=y.current,te=Nl(),ge=pf(G);return _=gR(_),y.context===null?y.context=_:y.pendingContext=_,y=Ya(te,ge),y.payload={element:p},D=D===void 0?null:D,D!==null&&(y.callback=D),p=Ka(G,y,ge),p!==null&&(su(p,G,ge,te),fo(p,G,ge)),ge}function b2(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function yR(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var _=p.retryLane;p.retryLane=_!==0&&_<y?_:y}}function gS(p,y){yR(p,y),(p=p.alternate)&&yR(p,y)}function Ble(){return null}var bR=typeof reportError=="function"?reportError:function(p){console.error(p)};function vS(p){this._internalRoot=p}w2.prototype.render=vS.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(s(409));y2(p,y,null,null)},w2.prototype.unmount=vS.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;qp(function(){y2(null,p,null,null)}),y[ho]=null}};function w2(p){this._internalRoot=p}w2.prototype.unstable_scheduleHydration=function(p){if(p){var y=Cg();p={blockedOn:null,target:p,priority:y};for(var _=0;_<Qc.length&&y!==0&&y<Qc[_].priority;_++);Qc.splice(_,0,p),_===0&&_g(p)}};function yS(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function j2(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function wR(){}function Ule(p,y,_,D,G){if(G){if(typeof D=="function"){var te=D;D=function(){var ft=b2(ge);te.call(ft)}}var ge=vR(y,D,p,0,null,!1,!1,"",wR);return p._reactRootContainer=ge,p[ho]=ge.current,rm(p.nodeType===8?p.parentNode:p),qp(),ge}for(;G=p.lastChild;)p.removeChild(G);if(typeof D=="function"){var Me=D;D=function(){var ft=b2(Ve);Me.call(ft)}}var Ve=xS(p,0,!1,null,null,!1,!1,"",wR);return p._reactRootContainer=Ve,p[ho]=Ve.current,rm(p.nodeType===8?p.parentNode:p),qp(function(){y2(y,Ve,_,D)}),Ve}function N2(p,y,_,D,G){var te=_._reactRootContainer;if(te){var ge=te;if(typeof G=="function"){var Me=G;G=function(){var Ve=b2(ge);Me.call(Ve)}}y2(y,ge,p,G)}else ge=Ule(_,y,p,G,D);return b2(ge)}Wm=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var _=gs(y.pendingLanes);_!==0&&(Vm(y,_|1),Yl(y,Vs()),(yn&6)===0&&(Kg=Vs()+500,ae()))}break;case 13:qp(function(){var D=Gn(p,1);if(D!==null){var G=Nl();su(D,p,1,G)}}),gS(p,1)}},jp=function(p){if(p.tag===13){var y=Gn(p,134217728);if(y!==null){var _=Nl();su(y,p,134217728,_)}gS(p,134217728)}},Sg=function(p){if(p.tag===13){var y=pf(p),_=Gn(p,y);if(_!==null){var D=Nl();su(_,p,y,D)}gS(p,y)}},Cg=function(){return hn},qm=function(p,y){var _=hn;try{return hn=p,y()}finally{hn=_}},zt=function(p,y,_){switch(y){case"input":if(xe(p,_),y=_.name,_.type==="radio"&&y!=null){for(_=p;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<_.length;y++){var D=_[y];if(D!==p&&D.form===p.form){var G=Fp(D);if(!G)throw Error(s(90));ye(D),xe(D,G)}}}break;case"textarea":st(p,_);break;case"select":y=_.value,y!=null&&ut(p,!!_.multiple,y,!1)}},je=dS,Ce=qp;var zle={usingClientEntryPoint:!1,Events:[af,am,Fp,bt,gr,dS]},By={findFiberByHostInstance:Xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vle={bundleType:By.bundleType,version:By.version,rendererPackageName:By.rendererPackageName,rendererConfig:By.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=Gr(p),p===null?null:p.stateNode},findFiberByHostInstance:By.findFiberByHostInstance||Ble,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var S2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!S2.isDisabled&&S2.supportsFiber)try{Xs=S2.inject(Vle),ta=S2}catch{}}return Kl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zle,Kl.createPortal=function(p,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yS(y))throw Error(s(200));return Fle(p,y,null,_)},Kl.createRoot=function(p,y){if(!yS(p))throw Error(s(299));var _=!1,D="",G=bR;return y!=null&&(y.unstable_strictMode===!0&&(_=!0),y.identifierPrefix!==void 0&&(D=y.identifierPrefix),y.onRecoverableError!==void 0&&(G=y.onRecoverableError)),y=xS(p,1,!1,null,null,_,!1,D,G),p[ho]=y.current,rm(p.nodeType===8?p.parentNode:p),new vS(y)},Kl.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=Gr(y),p=p===null?null:p.stateNode,p},Kl.flushSync=function(p){return qp(p)},Kl.hydrate=function(p,y,_){if(!j2(y))throw Error(s(200));return N2(null,p,y,!0,_)},Kl.hydrateRoot=function(p,y,_){if(!yS(p))throw Error(s(405));var D=_!=null&&_.hydratedSources||null,G=!1,te="",ge=bR;if(_!=null&&(_.unstable_strictMode===!0&&(G=!0),_.identifierPrefix!==void 0&&(te=_.identifierPrefix),_.onRecoverableError!==void 0&&(ge=_.onRecoverableError)),y=vR(y,null,p,1,_??null,G,!1,te,ge),p[ho]=y.current,rm(p),D)for(p=0;p<D.length;p++)_=D[p],G=_._getVersion,G=G(_._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[_,G]:y.mutableSourceEagerHydrationData.push(_,G);return new w2(y)},Kl.render=function(p,y,_){if(!j2(y))throw Error(s(200));return N2(null,p,y,!1,_)},Kl.unmountComponentAtNode=function(p){if(!j2(p))throw Error(s(40));return p._reactRootContainer?(qp(function(){N2(null,null,p,!1,function(){p._reactRootContainer=null,p[ho]=null})}),!0):!1},Kl.unstable_batchedUpdates=dS,Kl.unstable_renderSubtreeIntoContainer=function(p,y,_,D){if(!j2(_))throw Error(s(200));if(p==null||p._reactInternals===void 0)throw Error(s(38));return N2(p,y,_,!1,D)},Kl.version="18.3.1-next-f1338f8080-20240426",Kl}var ER;function rY(){if(ER)return jS.exports;ER=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jS.exports=Qle(),jS.exports}var PR;function Zle(){if(PR)return k2;PR=1;var t=rY();return k2.createRoot=t.createRoot,k2.hydrateRoot=t.hydrateRoot,k2}var Jle=Zle(),j=Uv();const ce=cn(j),K4=KO({__proto__:null,default:ce},[j]);var zv=rY();const XO=cn(zv),ece=KO({__proto__:null,default:XO},[zv]);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ua.apply(this,arguments)}var Di;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Di||(Di={}));const TR="popstate";function tce(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:o,hash:l}=n.location;return nb("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:uw(a)}return sce(e,s,null,t)}function un(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rce(){return Math.random().toString(36).substr(2,8)}function OR(t,e){return{usr:t.state,key:t.key,idx:e}}function nb(t,e,s,n){return s===void 0&&(s=null),Ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?cp(e):e,{state:s,key:e&&e.key||n||rce()})}function uw(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function cp(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function sce(t,e,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Di.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Ua({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Di.Pop;let g=u(),b=g==null?null:g-d;d=g,c&&c({action:l,location:x.location,delta:b})}function m(g,b){l=Di.Push;let w=nb(x.location,g,b);d=u()+1;let N=OR(w,d),C=x.createHref(w);try{o.pushState(N,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(C)}i&&c&&c({action:l,location:x.location,delta:1})}function f(g,b){l=Di.Replace;let w=nb(x.location,g,b);d=u();let N=OR(w,d),C=x.createHref(w);o.replaceState(N,"",C),i&&c&&c({action:l,location:x.location,delta:0})}function v(g){let b=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof g=="string"?g:uw(g);return w=w.replace(/ $/,"%20"),un(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let x={get action(){return l},get location(){return t(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(TR,h),c=g,()=>{a.removeEventListener(TR,h),c=null}},createHref(g){return e(a,g)},createURL:v,encodeLocation(g){let b=v(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:f,go(g){return o.go(g)}};return x}var Zn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zn||(Zn={}));const nce=new Set(["lazy","caseSensitive","path","id","index","children"]);function ace(t){return t.index===!0}function aN(t,e,s,n){return s===void 0&&(s=[]),n===void 0&&(n={}),t.map((a,i)=>{let o=[...s,String(i)],l=typeof a.id=="string"?a.id:o.join("-");if(un(a.index!==!0||!a.children,"Cannot specify children on an index route"),un(!n[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),ace(a)){let c=Ua({},a,e(a),{id:l});return n[l]=c,c}else{let c=Ua({},a,e(a),{id:l,children:void 0});return n[l]=c,a.children&&(c.children=aN(a.children,e,o,n)),c}})}function mx(t,e,s){return s===void 0&&(s="/"),Rj(t,e,s,!1)}function Rj(t,e,s,n){let a=typeof e=="string"?cp(e):e,i=hw(a.pathname||"/",s);if(i==null)return null;let o=sY(t);oce(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=vce(i);l=xce(o[c],d,n)}return l}function ice(t,e){let{route:s,pathname:n,params:a}=t;return{id:s.id,pathname:n,params:a,data:e[s.id],handle:s.handle}}function sY(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(un(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=zf([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(un(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),sY(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:fce(d,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of nY(i.path))a(i,o,c)}),e}function nY(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=nY(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function oce(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:pce(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const lce=/^:[\w-]+$/,cce=3,dce=2,uce=1,hce=10,mce=-2,IR=t=>t==="*";function fce(t,e){let s=t.split("/"),n=s.length;return s.some(IR)&&(n+=mce),e&&(n+=dce),s.filter(a=>!IR(a)).reduce((a,i)=>a+(lce.test(i)?cce:i===""?uce:hce),n)}function pce(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function xce(t,e,s){s===void 0&&(s=!1);let{routesMeta:n}=t,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=$R({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=$R({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:zf([i,h.pathname]),pathnameBase:jce(zf([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=zf([i,h.pathnameBase]))}return o}function $R(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=gce(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:m,isOptional:f}=u;if(m==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[h];return f&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function gce(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Hx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function vce(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const yce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bce=t=>yce.test(t);function wce(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:a=""}=typeof t=="string"?cp(t):t,i;if(s)if(bce(s))i=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Hx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?i=DR(s.substring(1),"/"):i=DR(s,e)}else i=e;return{pathname:i,search:Nce(n),hash:Sce(a)}}function DR(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function CS(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aY(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function iY(t,e){let s=aY(t);return e?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function oY(t,e,s,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=cp(t):(a=Ua({},t),un(!a.pathname||!a.pathname.includes("?"),CS("?","pathname","search",a)),un(!a.pathname||!a.pathname.includes("#"),CS("#","pathname","hash",a)),un(!a.search||!a.search.includes("#"),CS("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let h=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?e[h]:"/"}let c=wce(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const zf=t=>t.join("/").replace(/\/\/+/g,"/"),jce=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Nce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sce=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class iN{constructor(e,s,n,a){a===void 0&&(a=!1),this.status=e,this.statusText=s||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function ab(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lY=["post","put","patch","delete"],Cce=new Set(lY),kce=["get",...lY],_ce=new Set(kce),Ace=new Set([301,302,303,307,308]),Ece=new Set([307,308]),kS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Pce={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zy={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},QO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tce=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),cY="remix-router-transitions";function Oce(t){const e=t.window?t.window:typeof window<"u"?window:void 0,s=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!s;un(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(t.mapRouteProperties)a=t.mapRouteProperties;else if(t.detectErrorBoundary){let le=t.detectErrorBoundary;a=Ee=>({hasErrorBoundary:le(Ee)})}else a=Tce;let i={},o=aN(t.routes,a,void 0,i),l,c=t.basename||"/",d=t.dataStrategy||Rce,u=t.patchRoutesOnNavigation,h=Ua({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,f=new Set,v=null,x=null,g=null,b=t.hydrationData!=null,w=mx(o,t.history.location,c),N=!1,C=null;if(w==null&&!u){let le=Zl(404,{pathname:t.history.location.pathname}),{matches:Ee,route:We}=HR(o);w=Ee,C={[We.id]:le}}w&&!t.hydrationData&&Ce(w,o,t.history.location.pathname).active&&(w=null);let S;if(w)if(w.some(le=>le.route.lazy))S=!1;else if(!w.some(le=>le.route.loader))S=!0;else if(h.v7_partialHydration){let le=t.hydrationData?t.hydrationData.loaderData:null,Ee=t.hydrationData?t.hydrationData.errors:null;if(Ee){let We=w.findIndex(at=>Ee[at.route.id]!==void 0);S=w.slice(0,We+1).every(at=>!TE(at.route,le,Ee))}else S=w.every(We=>!TE(We.route,le,Ee))}else S=t.hydrationData!=null;else if(S=!1,w=[],h.v7_partialHydration){let le=Ce(null,o,t.history.location.pathname);le.active&&le.matches&&(N=!0,w=le.matches)}let A,k={historyAction:t.history.action,location:t.history.location,matches:w,initialized:S,navigation:kS,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||C,fetchers:new Map,blockers:new Map},E=Di.Pop,O=!1,$,T=!1,I=new Map,L=null,z=!1,M=!1,V=[],B=new Set,F=new Map,J=0,ee=-1,q=new Map,U=new Set,Z=new Map,K=new Map,se=new Set,ne=new Map,ie=new Map,be;function ue(){if(m=t.history.listen(le=>{let{action:Ee,location:We,delta:at}=le;if(be){be(),be=void 0;return}Hx(ie.size===0||at!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let nt=zt({currentLocation:k.location,nextLocation:We,historyAction:Ee});if(nt&&at!=null){let It=new Promise(vr=>{be=vr});t.history.go(at*-1),kt(nt,{state:"blocked",location:We,proceed(){kt(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:We}),It.then(()=>t.history.go(at))},reset(){let vr=new Map(k.blockers);vr.set(nt,zy),ye({blockers:vr})}});return}return Le(Ee,We)}),s){Xce(e,I);let le=()=>Qce(e,I);e.addEventListener("pagehide",le),L=()=>e.removeEventListener("pagehide",le)}return k.initialized||Le(Di.Pop,k.location,{initialHydration:!0}),A}function oe(){m&&m(),L&&L(),f.clear(),$&&$.abort(),k.fetchers.forEach((le,Ee)=>$t(Ee)),k.blockers.forEach((le,Ee)=>Pt(Ee))}function pe(le){return f.add(le),()=>f.delete(le)}function ye(le,Ee){Ee===void 0&&(Ee={}),k=Ua({},k,le);let We=[],at=[];h.v7_fetcherPersist&&k.fetchers.forEach((nt,It)=>{nt.state==="idle"&&(se.has(It)?at.push(It):We.push(It))}),se.forEach(nt=>{!k.fetchers.has(nt)&&!F.has(nt)&&at.push(nt)}),[...f].forEach(nt=>nt(k,{deletedFetchers:at,viewTransitionOpts:Ee.viewTransitionOpts,flushSync:Ee.flushSync===!0})),h.v7_fetcherPersist?(We.forEach(nt=>k.fetchers.delete(nt)),at.forEach(nt=>$t(nt))):at.forEach(nt=>se.delete(nt))}function $e(le,Ee,We){var at,nt;let{flushSync:It}=We===void 0?{}:We,vr=k.actionData!=null&&k.navigation.formMethod!=null&&hu(k.navigation.formMethod)&&k.navigation.state==="loading"&&((at=le.state)==null?void 0:at._isRedirect)!==!0,Xt;Ee.actionData?Object.keys(Ee.actionData).length>0?Xt=Ee.actionData:Xt=null:vr?Xt=k.actionData:Xt=null;let Mt=Ee.loaderData?WR(k.loaderData,Ee.loaderData,Ee.matches||[],Ee.errors):k.loaderData,Gt=k.blockers;Gt.size>0&&(Gt=new Map(Gt),Gt.forEach((Cr,Pr)=>Gt.set(Pr,zy)));let Wt=O===!0||k.navigation.formMethod!=null&&hu(k.navigation.formMethod)&&((nt=le.state)==null?void 0:nt._isRedirect)!==!0;l&&(o=l,l=void 0),z||E===Di.Pop||(E===Di.Push?t.history.push(le,le.state):E===Di.Replace&&t.history.replace(le,le.state));let xr;if(E===Di.Pop){let Cr=I.get(k.location.pathname);Cr&&Cr.has(le.pathname)?xr={currentLocation:k.location,nextLocation:le}:I.has(le.pathname)&&(xr={currentLocation:le,nextLocation:k.location})}else if(T){let Cr=I.get(k.location.pathname);Cr?Cr.add(le.pathname):(Cr=new Set([le.pathname]),I.set(k.location.pathname,Cr)),xr={currentLocation:k.location,nextLocation:le}}ye(Ua({},Ee,{actionData:Xt,loaderData:Mt,historyAction:E,location:le,initialized:!0,navigation:kS,revalidation:"idle",restoreScrollPosition:je(le,Ee.matches||k.matches),preventScrollReset:Wt,blockers:Gt}),{viewTransitionOpts:xr,flushSync:It===!0}),E=Di.Pop,O=!1,T=!1,z=!1,M=!1,V=[]}async function Se(le,Ee){if(typeof le=="number"){t.history.go(le);return}let We=PE(k.location,k.matches,c,h.v7_prependBasename,le,h.v7_relativeSplatPath,Ee?.fromRouteId,Ee?.relative),{path:at,submission:nt,error:It}=RR(h.v7_normalizeFormMethod,!1,We,Ee),vr=k.location,Xt=nb(k.location,at,Ee&&Ee.state);Xt=Ua({},Xt,t.history.encodeLocation(Xt));let Mt=Ee&&Ee.replace!=null?Ee.replace:void 0,Gt=Di.Push;Mt===!0?Gt=Di.Replace:Mt===!1||nt!=null&&hu(nt.formMethod)&&nt.formAction===k.location.pathname+k.location.search&&(Gt=Di.Replace);let Wt=Ee&&"preventScrollReset"in Ee?Ee.preventScrollReset===!0:void 0,xr=(Ee&&Ee.flushSync)===!0,Cr=zt({currentLocation:vr,nextLocation:Xt,historyAction:Gt});if(Cr){kt(Cr,{state:"blocked",location:Xt,proceed(){kt(Cr,{state:"proceeding",proceed:void 0,reset:void 0,location:Xt}),Se(le,Ee)},reset(){let Pr=new Map(k.blockers);Pr.set(Cr,zy),ye({blockers:Pr})}});return}return await Le(Gt,Xt,{submission:nt,pendingError:It,preventScrollReset:Wt,replace:Ee&&Ee.replace,enableViewTransition:Ee&&Ee.viewTransition,flushSync:xr})}function Y(){if(yr(),ye({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Le(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Le(E||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:T===!0})}}async function Le(le,Ee,We){$&&$.abort(),$=null,E=le,z=(We&&We.startUninterruptedRevalidation)===!0,gr(k.location,k.matches),O=(We&&We.preventScrollReset)===!0,T=(We&&We.enableViewTransition)===!0;let at=l||o,nt=We&&We.overrideNavigation,It=We!=null&&We.initialHydration&&k.matches&&k.matches.length>0&&!N?k.matches:mx(at,Ee,c),vr=(We&&We.flushSync)===!0;if(It&&k.initialized&&!M&&zce(k.location,Ee)&&!(We&&We.submission&&hu(We.submission.formMethod))){$e(Ee,{matches:It},{flushSync:vr});return}let Xt=Ce(It,at,Ee.pathname);if(Xt.active&&Xt.matches&&(It=Xt.matches),!It){let{error:Gr,notFoundMatches:os,route:ws}=or(Ee.pathname);$e(Ee,{matches:os,loaderData:{},errors:{[ws.id]:Gr}},{flushSync:vr});return}$=new AbortController;let Mt=Qg(t.history,Ee,$.signal,We&&We.submission),Gt;if(We&&We.pendingError)Gt=[fx(It).route.id,{type:Zn.error,error:We.pendingError}];else if(We&&We.submission&&hu(We.submission.formMethod)){let Gr=await xe(Mt,Ee,We.submission,It,Xt.active,{replace:We.replace,flushSync:vr});if(Gr.shortCircuited)return;if(Gr.pendingActionResult){let[os,ws]=Gr.pendingActionResult;if(Tc(ws)&&ab(ws.error)&&ws.error.status===404){$=null,$e(Ee,{matches:Gr.matches,loaderData:{},errors:{[os]:ws.error}});return}}It=Gr.matches||It,Gt=Gr.pendingActionResult,nt=_S(Ee,We.submission),vr=!1,Xt.active=!1,Mt=Qg(t.history,Mt.url,Mt.signal)}let{shortCircuited:Wt,matches:xr,loaderData:Cr,errors:Pr}=await mt(Mt,Ee,It,Xt.active,nt,We&&We.submission,We&&We.fetcherSubmission,We&&We.replace,We&&We.initialHydration===!0,vr,Gt);Wt||($=null,$e(Ee,Ua({matches:xr||It},qR(Gt),{loaderData:Cr,errors:Pr})))}async function xe(le,Ee,We,at,nt,It){It===void 0&&(It={}),yr();let vr=Yce(Ee,We);if(ye({navigation:vr},{flushSync:It.flushSync===!0}),nt){let Gt=await Qe(at,Ee.pathname,le.signal);if(Gt.type==="aborted")return{shortCircuited:!0};if(Gt.type==="error"){let Wt=fx(Gt.partialMatches).route.id;return{matches:Gt.partialMatches,pendingActionResult:[Wt,{type:Zn.error,error:Gt.error}]}}else if(Gt.matches)at=Gt.matches;else{let{notFoundMatches:Wt,error:xr,route:Cr}=or(Ee.pathname);return{matches:Wt,pendingActionResult:[Cr.id,{type:Zn.error,error:xr}]}}}let Xt,Mt=y1(at,Ee);if(!Mt.route.action&&!Mt.route.lazy)Xt={type:Zn.error,error:Zl(405,{method:le.method,pathname:Ee.pathname,routeId:Mt.route.id})};else if(Xt=(await At("action",k,le,[Mt],at,null))[Mt.route.id],le.signal.aborted)return{shortCircuited:!0};if(yx(Xt)){let Gt;return It&&It.replace!=null?Gt=It.replace:Gt=UR(Xt.response.headers.get("Location"),new URL(le.url),c)===k.location.pathname+k.location.search,await st(le,Xt,!0,{submission:We,replace:Gt}),{shortCircuited:!0}}if(Mf(Xt))throw Zl(400,{type:"defer-action"});if(Tc(Xt)){let Gt=fx(at,Mt.route.id);return(It&&It.replace)!==!0&&(E=Di.Push),{matches:at,pendingActionResult:[Gt.route.id,Xt]}}return{matches:at,pendingActionResult:[Mt.route.id,Xt]}}async function mt(le,Ee,We,at,nt,It,vr,Xt,Mt,Gt,Wt){let xr=nt||_S(Ee,It),Cr=It||vr||YR(xr),Pr=!z&&(!h.v7_partialHydration||!Mt);if(at){if(Pr){let Xs=Ue(Wt);ye(Ua({navigation:xr},Xs!==void 0?{actionData:Xs}:{}),{flushSync:Gt})}let Fs=await Qe(We,Ee.pathname,le.signal);if(Fs.type==="aborted")return{shortCircuited:!0};if(Fs.type==="error"){let Xs=fx(Fs.partialMatches).route.id;return{matches:Fs.partialMatches,loaderData:{},errors:{[Xs]:Fs.error}}}else if(Fs.matches)We=Fs.matches;else{let{error:Xs,notFoundMatches:ta,route:ts}=or(Ee.pathname);return{matches:ta,loaderData:{},errors:{[ts.id]:Xs}}}}let Gr=l||o,[os,ws]=LR(t.history,k,We,Cr,Ee,h.v7_partialHydration&&Mt===!0,h.v7_skipActionErrorRevalidation,M,V,B,se,Z,U,Gr,c,Wt);if(Re(Fs=>!(We&&We.some(Xs=>Xs.route.id===Fs))||os&&os.some(Xs=>Xs.route.id===Fs)),ee=++J,os.length===0&&ws.length===0){let Fs=Ct();return $e(Ee,Ua({matches:We,loaderData:{},errors:Wt&&Tc(Wt[1])?{[Wt[0]]:Wt[1].error}:null},qR(Wt),Fs?{fetchers:new Map(k.fetchers)}:{}),{flushSync:Gt}),{shortCircuited:!0}}if(Pr){let Fs={};if(!at){Fs.navigation=xr;let Xs=Ue(Wt);Xs!==void 0&&(Fs.actionData=Xs)}ws.length>0&&(Fs.fetchers=xt(ws)),ye(Fs,{flushSync:Gt})}ws.forEach(Fs=>{Er(Fs.key),Fs.controller&&F.set(Fs.key,Fs.controller)});let Wa=()=>ws.forEach(Fs=>Er(Fs.key));$&&$.signal.addEventListener("abort",Wa);let{loaderResults:xi,fetcherResults:Ao}=await Yt(k,We,os,ws,le);if(le.signal.aborted)return{shortCircuited:!0};$&&$.signal.removeEventListener("abort",Wa),ws.forEach(Fs=>F.delete(Fs.key));let Vs=_2(xi);if(Vs)return await st(le,Vs.result,!0,{replace:Xt}),{shortCircuited:!0};if(Vs=_2(Ao),Vs)return U.add(Vs.key),await st(le,Vs.result,!0,{replace:Xt}),{shortCircuited:!0};let{loaderData:Gc,errors:io}=VR(k,We,xi,Wt,ws,Ao,ne);ne.forEach((Fs,Xs)=>{Fs.subscribe(ta=>{(ta||Fs.done)&&ne.delete(Xs)})}),h.v7_partialHydration&&Mt&&k.errors&&(io=Ua({},k.errors,io));let da=Ct(),Eo=is(ee),qe=da||Eo||ws.length>0;return Ua({matches:We,loaderData:Gc,errors:io},qe?{fetchers:new Map(k.fetchers)}:{})}function Ue(le){if(le&&!Tc(le[1]))return{[le[0]]:le[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function xt(le){return le.forEach(Ee=>{let We=k.fetchers.get(Ee.key),at=Vy(void 0,We?We.data:void 0);k.fetchers.set(Ee.key,at)}),new Map(k.fetchers)}function ut(le,Ee,We,at){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Er(le);let nt=(at&&at.flushSync)===!0,It=l||o,vr=PE(k.location,k.matches,c,h.v7_prependBasename,We,h.v7_relativeSplatPath,Ee,at?.relative),Xt=mx(It,vr,c),Mt=Ce(Xt,It,vr);if(Mt.active&&Mt.matches&&(Xt=Mt.matches),!Xt){Vt(le,Ee,Zl(404,{pathname:vr}),{flushSync:nt});return}let{path:Gt,submission:Wt,error:xr}=RR(h.v7_normalizeFormMethod,!0,vr,at);if(xr){Vt(le,Ee,xr,{flushSync:nt});return}let Cr=y1(Xt,Gt),Pr=(at&&at.preventScrollReset)===!0;if(Wt&&hu(Wt.formMethod)){Ot(le,Ee,Gt,Cr,Xt,Mt.active,nt,Pr,Wt);return}Z.set(le,{routeId:Ee,path:Gt}),tt(le,Ee,Gt,Cr,Xt,Mt.active,nt,Pr,Wt)}async function Ot(le,Ee,We,at,nt,It,vr,Xt,Mt){yr(),Z.delete(le);function Gt(es){if(!es.route.action&&!es.route.lazy){let $l=Zl(405,{method:Mt.formMethod,pathname:We,routeId:Ee});return Vt(le,Ee,$l,{flushSync:vr}),!0}return!1}if(!It&&Gt(at))return;let Wt=k.fetchers.get(le);Zt(le,Kce(Mt,Wt),{flushSync:vr});let xr=new AbortController,Cr=Qg(t.history,We,xr.signal,Mt);if(It){let es=await Qe(nt,new URL(Cr.url).pathname,Cr.signal,le);if(es.type==="aborted")return;if(es.type==="error"){Vt(le,Ee,es.error,{flushSync:vr});return}else if(es.matches){if(nt=es.matches,at=y1(nt,We),Gt(at))return}else{Vt(le,Ee,Zl(404,{pathname:We}),{flushSync:vr});return}}F.set(le,xr);let Pr=J,os=(await At("action",k,Cr,[at],nt,le))[at.route.id];if(Cr.signal.aborted){F.get(le)===xr&&F.delete(le);return}if(h.v7_fetcherPersist&&se.has(le)){if(yx(os)||Tc(os)){Zt(le,kf(void 0));return}}else{if(yx(os))if(F.delete(le),ee>Pr){Zt(le,kf(void 0));return}else return U.add(le),Zt(le,Vy(Mt)),st(Cr,os,!1,{fetcherSubmission:Mt,preventScrollReset:Xt});if(Tc(os)){Vt(le,Ee,os.error);return}}if(Mf(os))throw Zl(400,{type:"defer-action"});let ws=k.navigation.location||k.location,Wa=Qg(t.history,ws,xr.signal),xi=l||o,Ao=k.navigation.state!=="idle"?mx(xi,k.navigation.location,c):k.matches;un(Ao,"Didn't find any matches after fetcher action");let Vs=++J;q.set(le,Vs);let Gc=Vy(Mt,os.data);k.fetchers.set(le,Gc);let[io,da]=LR(t.history,k,Ao,Mt,ws,!1,h.v7_skipActionErrorRevalidation,M,V,B,se,Z,U,xi,c,[at.route.id,os]);da.filter(es=>es.key!==le).forEach(es=>{let $l=es.key,Fe=k.fetchers.get($l),Kt=Vy(void 0,Fe?Fe.data:void 0);k.fetchers.set($l,Kt),Er($l),es.controller&&F.set($l,es.controller)}),ye({fetchers:new Map(k.fetchers)});let Eo=()=>da.forEach(es=>Er(es.key));xr.signal.addEventListener("abort",Eo);let{loaderResults:qe,fetcherResults:Fs}=await Yt(k,Ao,io,da,Wa);if(xr.signal.aborted)return;xr.signal.removeEventListener("abort",Eo),q.delete(le),F.delete(le),da.forEach(es=>F.delete(es.key));let Xs=_2(qe);if(Xs)return st(Wa,Xs.result,!1,{preventScrollReset:Xt});if(Xs=_2(Fs),Xs)return U.add(Xs.key),st(Wa,Xs.result,!1,{preventScrollReset:Xt});let{loaderData:ta,errors:ts}=VR(k,Ao,qe,void 0,da,Fs,ne);if(k.fetchers.has(le)){let es=kf(os.data);k.fetchers.set(le,es)}is(Vs),k.navigation.state==="loading"&&Vs>ee?(un(E,"Expected pending action"),$&&$.abort(),$e(k.navigation.location,{matches:Ao,loaderData:ta,errors:ts,fetchers:new Map(k.fetchers)})):(ye({errors:ts,loaderData:WR(k.loaderData,ta,Ao,ts),fetchers:new Map(k.fetchers)}),M=!1)}async function tt(le,Ee,We,at,nt,It,vr,Xt,Mt){let Gt=k.fetchers.get(le);Zt(le,Vy(Mt,Gt?Gt.data:void 0),{flushSync:vr});let Wt=new AbortController,xr=Qg(t.history,We,Wt.signal);if(It){let os=await Qe(nt,new URL(xr.url).pathname,xr.signal,le);if(os.type==="aborted")return;if(os.type==="error"){Vt(le,Ee,os.error,{flushSync:vr});return}else if(os.matches)nt=os.matches,at=y1(nt,We);else{Vt(le,Ee,Zl(404,{pathname:We}),{flushSync:vr});return}}F.set(le,Wt);let Cr=J,Gr=(await At("loader",k,xr,[at],nt,le))[at.route.id];if(Mf(Gr)&&(Gr=await ZO(Gr,xr.signal,!0)||Gr),F.get(le)===Wt&&F.delete(le),!xr.signal.aborted){if(se.has(le)){Zt(le,kf(void 0));return}if(yx(Gr))if(ee>Cr){Zt(le,kf(void 0));return}else{U.add(le),await st(xr,Gr,!1,{preventScrollReset:Xt});return}if(Tc(Gr)){Vt(le,Ee,Gr.error);return}un(!Mf(Gr),"Unhandled fetcher deferred data"),Zt(le,kf(Gr.data))}}async function st(le,Ee,We,at){let{submission:nt,fetcherSubmission:It,preventScrollReset:vr,replace:Xt}=at===void 0?{}:at;Ee.response.headers.has("X-Remix-Revalidate")&&(M=!0);let Mt=Ee.response.headers.get("Location");un(Mt,"Expected a Location header on the redirect Response"),Mt=UR(Mt,new URL(le.url),c);let Gt=nb(k.location,Mt,{_isRedirect:!0});if(s){let os=!1;if(Ee.response.headers.has("X-Remix-Reload-Document"))os=!0;else if(QO.test(Mt)){const ws=t.history.createURL(Mt);os=ws.origin!==e.location.origin||hw(ws.pathname,c)==null}if(os){Xt?e.location.replace(Mt):e.location.assign(Mt);return}}$=null;let Wt=Xt===!0||Ee.response.headers.has("X-Remix-Replace")?Di.Replace:Di.Push,{formMethod:xr,formAction:Cr,formEncType:Pr}=k.navigation;!nt&&!It&&xr&&Cr&&Pr&&(nt=YR(k.navigation));let Gr=nt||It;if(Ece.has(Ee.response.status)&&Gr&&hu(Gr.formMethod))await Le(Wt,Gt,{submission:Ua({},Gr,{formAction:Mt}),preventScrollReset:vr||O,enableViewTransition:We?T:void 0});else{let os=_S(Gt,nt);await Le(Wt,Gt,{overrideNavigation:os,fetcherSubmission:It,preventScrollReset:vr||O,enableViewTransition:We?T:void 0})}}async function At(le,Ee,We,at,nt,It){let vr,Xt={};try{vr=await Mce(d,le,Ee,We,at,nt,It,i,a)}catch(Mt){return at.forEach(Gt=>{Xt[Gt.route.id]={type:Zn.error,error:Mt}}),Xt}for(let[Mt,Gt]of Object.entries(vr))if(Vce(Gt)){let Wt=Gt.result;Xt[Mt]={type:Zn.redirect,response:Bce(Wt,We,Mt,nt,c,h.v7_relativeSplatPath)}}else Xt[Mt]=await Fce(Gt);return Xt}async function Yt(le,Ee,We,at,nt){let It=le.matches,vr=At("loader",le,nt,We,Ee,null),Xt=Promise.all(at.map(async Wt=>{if(Wt.matches&&Wt.match&&Wt.controller){let Cr=(await At("loader",le,Qg(t.history,Wt.path,Wt.controller.signal),[Wt.match],Wt.matches,Wt.key))[Wt.match.route.id];return{[Wt.key]:Cr}}else return Promise.resolve({[Wt.key]:{type:Zn.error,error:Zl(404,{pathname:Wt.path})}})})),Mt=await vr,Gt=(await Xt).reduce((Wt,xr)=>Object.assign(Wt,xr),{});return await Promise.all([Hce(Ee,Mt,nt.signal,It,le.loaderData),Gce(Ee,Gt,at)]),{loaderResults:Mt,fetcherResults:Gt}}function yr(){M=!0,V.push(...Re()),Z.forEach((le,Ee)=>{F.has(Ee)&&B.add(Ee),Er(Ee)})}function Zt(le,Ee,We){We===void 0&&(We={}),k.fetchers.set(le,Ee),ye({fetchers:new Map(k.fetchers)},{flushSync:(We&&We.flushSync)===!0})}function Vt(le,Ee,We,at){at===void 0&&(at={});let nt=fx(k.matches,Ee);$t(le),ye({errors:{[nt.route.id]:We},fetchers:new Map(k.fetchers)},{flushSync:(at&&at.flushSync)===!0})}function tr(le){return K.set(le,(K.get(le)||0)+1),se.has(le)&&se.delete(le),k.fetchers.get(le)||Pce}function $t(le){let Ee=k.fetchers.get(le);F.has(le)&&!(Ee&&Ee.state==="loading"&&q.has(le))&&Er(le),Z.delete(le),q.delete(le),U.delete(le),h.v7_fetcherPersist&&se.delete(le),B.delete(le),k.fetchers.delete(le)}function Dr(le){let Ee=(K.get(le)||0)-1;Ee<=0?(K.delete(le),se.add(le),h.v7_fetcherPersist||$t(le)):K.set(le,Ee),ye({fetchers:new Map(k.fetchers)})}function Er(le){let Ee=F.get(le);Ee&&(Ee.abort(),F.delete(le))}function hr(le){for(let Ee of le){let We=tr(Ee),at=kf(We.data);k.fetchers.set(Ee,at)}}function Ct(){let le=[],Ee=!1;for(let We of U){let at=k.fetchers.get(We);un(at,"Expected fetcher: "+We),at.state==="loading"&&(U.delete(We),le.push(We),Ee=!0)}return hr(le),Ee}function is(le){let Ee=[];for(let[We,at]of q)if(at<le){let nt=k.fetchers.get(We);un(nt,"Expected fetcher: "+We),nt.state==="loading"&&(Er(We),q.delete(We),Ee.push(We))}return hr(Ee),Ee.length>0}function cr(le,Ee){let We=k.blockers.get(le)||zy;return ie.get(le)!==Ee&&ie.set(le,Ee),We}function Pt(le){k.blockers.delete(le),ie.delete(le)}function kt(le,Ee){let We=k.blockers.get(le)||zy;un(We.state==="unblocked"&&Ee.state==="blocked"||We.state==="blocked"&&Ee.state==="blocked"||We.state==="blocked"&&Ee.state==="proceeding"||We.state==="blocked"&&Ee.state==="unblocked"||We.state==="proceeding"&&Ee.state==="unblocked","Invalid blocker state transition: "+We.state+" -> "+Ee.state);let at=new Map(k.blockers);at.set(le,Ee),ye({blockers:at})}function zt(le){let{currentLocation:Ee,nextLocation:We,historyAction:at}=le;if(ie.size===0)return;ie.size>1&&Hx(!1,"A router only supports one blocker at a time");let nt=Array.from(ie.entries()),[It,vr]=nt[nt.length-1],Xt=k.blockers.get(It);if(!(Xt&&Xt.state==="proceeding")&&vr({currentLocation:Ee,nextLocation:We,historyAction:at}))return It}function or(le){let Ee=Zl(404,{pathname:le}),We=l||o,{matches:at,route:nt}=HR(We);return Re(),{notFoundMatches:at,route:nt,error:Ee}}function Re(le){let Ee=[];return ne.forEach((We,at)=>{(!le||le(at))&&(We.cancel(),Ee.push(at),ne.delete(at))}),Ee}function Je(le,Ee,We){if(v=le,g=Ee,x=We||null,!b&&k.navigation===kS){b=!0;let at=je(k.location,k.matches);at!=null&&ye({restoreScrollPosition:at})}return()=>{v=null,g=null,x=null}}function bt(le,Ee){return x&&x(le,Ee.map(at=>ice(at,k.loaderData)))||le.key}function gr(le,Ee){if(v&&g){let We=bt(le,Ee);v[We]=g()}}function je(le,Ee){if(v){let We=bt(le,Ee),at=v[We];if(typeof at=="number")return at}return null}function Ce(le,Ee,We){if(u)if(le){if(Object.keys(le[0].params).length>0)return{active:!0,matches:Rj(Ee,We,c,!0)}}else return{active:!0,matches:Rj(Ee,We,c,!0)||[]};return{active:!1,matches:null}}async function Qe(le,Ee,We,at){if(!u)return{type:"success",matches:le};let nt=le;for(;;){let It=l==null,vr=l||o,Xt=i;try{await u({signal:We,path:Ee,matches:nt,fetcherKey:at,patch:(Wt,xr)=>{We.aborted||BR(Wt,xr,vr,Xt,a)}})}catch(Wt){return{type:"error",error:Wt,partialMatches:nt}}finally{It&&!We.aborted&&(o=[...o])}if(We.aborted)return{type:"aborted"};let Mt=mx(vr,Ee,c);if(Mt)return{type:"success",matches:Mt};let Gt=Rj(vr,Ee,c,!0);if(!Gt||nt.length===Gt.length&&nt.every((Wt,xr)=>Wt.route.id===Gt[xr].route.id))return{type:"success",matches:null};nt=Gt}}function He(le){i={},l=aN(le,a,void 0,i)}function vt(le,Ee){let We=l==null;BR(le,Ee,l||o,i,a),We&&(o=[...o],ye({}))}return A={get basename(){return c},get future(){return h},get state(){return k},get routes(){return o},get window(){return e},initialize:ue,subscribe:pe,enableScrollRestoration:Je,navigate:Se,fetch:ut,revalidate:Y,createHref:le=>t.history.createHref(le),encodeLocation:le=>t.history.encodeLocation(le),getFetcher:tr,deleteFetcher:Dr,dispose:oe,getBlocker:cr,deleteBlocker:Pt,patchRoutes:vt,_internalFetchControllers:F,_internalActiveDeferreds:ne,_internalSetRoutes:He},A}function Ice(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function PE(t,e,s,n,a,i,o,l){let c,d;if(o){c=[];for(let h of e)if(c.push(h),h.route.id===o){d=h;break}}else c=e,d=e[e.length-1];let u=oY(a||".",iY(c,i),hw(t.pathname,s)||t.pathname,l==="path");if(a==null&&(u.search=t.search,u.hash=t.hash),(a==null||a===""||a===".")&&d){let h=JO(u.search);if(d.route.index&&!h)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&h){let m=new URLSearchParams(u.search),f=m.getAll("index");m.delete("index"),f.filter(x=>x).forEach(x=>m.append("index",x));let v=m.toString();u.search=v?"?"+v:""}}return n&&s!=="/"&&(u.pathname=u.pathname==="/"?s:zf([s,u.pathname])),uw(u)}function RR(t,e,s,n){if(!n||!Ice(n))return{path:s};if(n.formMethod&&!qce(n.formMethod))return{path:s,error:Zl(405,{method:n.formMethod})};let a=()=>({path:s,error:Zl(400,{type:"invalid-body"})}),i=n.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),l=hY(s);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!hu(o))return a();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,v)=>{let[x,g]=v;return""+f+x+"="+g+`
`},""):String(n.body);return{path:s,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!hu(o))return a();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:s,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return a()}}}un(typeof FormData=="function","FormData is not available in this environment");let c,d;if(n.formData)c=OE(n.formData),d=n.formData;else if(n.body instanceof FormData)c=OE(n.body),d=n.body;else if(n.body instanceof URLSearchParams)c=n.body,d=zR(c);else if(n.body==null)c=new URLSearchParams,d=new FormData;else try{c=new URLSearchParams(n.body),d=zR(c)}catch{return a()}let u={formMethod:o,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(hu(u.formMethod))return{path:s,submission:u};let h=cp(s);return e&&h.search&&JO(h.search)&&c.append("index",""),h.search="?"+c,{path:uw(h),submission:u}}function MR(t,e,s){s===void 0&&(s=!1);let n=t.findIndex(a=>a.route.id===e);return n>=0?t.slice(0,s?n+1:n):t}function LR(t,e,s,n,a,i,o,l,c,d,u,h,m,f,v,x){let g=x?Tc(x[1])?x[1].error:x[1].data:void 0,b=t.createURL(e.location),w=t.createURL(a),N=s;i&&e.errors?N=MR(s,Object.keys(e.errors)[0],!0):x&&Tc(x[1])&&(N=MR(s,x[0]));let C=x?x[1].statusCode:void 0,S=o&&C&&C>=400,A=N.filter((E,O)=>{let{route:$}=E;if($.lazy)return!0;if($.loader==null)return!1;if(i)return TE($,e.loaderData,e.errors);if($ce(e.loaderData,e.matches[O],E)||c.some(L=>L===E.route.id))return!0;let T=e.matches[O],I=E;return FR(E,Ua({currentUrl:b,currentParams:T.params,nextUrl:w,nextParams:I.params},n,{actionResult:g,actionStatus:C,defaultShouldRevalidate:S?!1:l||b.pathname+b.search===w.pathname+w.search||b.search!==w.search||dY(T,I)}))}),k=[];return h.forEach((E,O)=>{if(i||!s.some(z=>z.route.id===E.routeId)||u.has(O))return;let $=mx(f,E.path,v);if(!$){k.push({key:O,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let T=e.fetchers.get(O),I=y1($,E.path),L=!1;m.has(O)?L=!1:d.has(O)?(d.delete(O),L=!0):T&&T.state!=="idle"&&T.data===void 0?L=l:L=FR(I,Ua({currentUrl:b,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:s[s.length-1].params},n,{actionResult:g,actionStatus:C,defaultShouldRevalidate:S?!1:l})),L&&k.push({key:O,routeId:E.routeId,path:E.path,matches:$,match:I,controller:new AbortController})}),[A,k]}function TE(t,e,s){if(t.lazy)return!0;if(!t.loader)return!1;let n=e!=null&&e[t.id]!==void 0,a=s!=null&&s[t.id]!==void 0;return!n&&a?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!n&&!a}function $ce(t,e,s){let n=!e||s.route.id!==e.route.id,a=t[s.route.id]===void 0;return n||a}function dY(t,e){let s=t.route.path;return t.pathname!==e.pathname||s!=null&&s.endsWith("*")&&t.params["*"]!==e.params["*"]}function FR(t,e){if(t.route.shouldRevalidate){let s=t.route.shouldRevalidate(e);if(typeof s=="boolean")return s}return e.defaultShouldRevalidate}function BR(t,e,s,n,a){var i;let o;if(t){let d=n[t];un(d,"No route found to patch children into: routeId = "+t),d.children||(d.children=[]),o=d.children}else o=s;let l=e.filter(d=>!o.some(u=>uY(d,u))),c=aN(l,a,[t||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],n);o.push(...c)}function uY(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((s,n)=>{var a;return(a=e.children)==null?void 0:a.some(i=>uY(s,i))}):!1}async function Dce(t,e,s){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let a=s[t.id];un(a,"No route found in manifest");let i={};for(let o in n){let c=a[o]!==void 0&&o!=="hasErrorBoundary";Hx(!c,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!nce.has(o)&&(i[o]=n[o])}Object.assign(a,i),Object.assign(a,Ua({},e(a),{lazy:void 0}))}async function Rce(t){let{matches:e}=t,s=e.filter(a=>a.shouldLoad);return(await Promise.all(s.map(a=>a.resolve()))).reduce((a,i,o)=>Object.assign(a,{[s[o].route.id]:i}),{})}async function Mce(t,e,s,n,a,i,o,l,c,d){let u=i.map(f=>f.route.lazy?Dce(f.route,c,l):void 0),h=i.map((f,v)=>{let x=u[v],g=a.some(w=>w.route.id===f.route.id);return Ua({},f,{shouldLoad:g,resolve:async w=>(w&&n.method==="GET"&&(f.route.lazy||f.route.loader)&&(g=!0),g?Lce(e,n,f,x,w,d):Promise.resolve({type:Zn.data,result:void 0}))})}),m=await t({matches:h,request:n,params:i[0].params,fetcherKey:o,context:d});try{await Promise.all(u)}catch{}return m}async function Lce(t,e,s,n,a,i){let o,l,c=d=>{let u,h=new Promise((v,x)=>u=x);l=()=>u(),e.signal.addEventListener("abort",l);let m=v=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+s.route.id+"]"))):d({request:e,params:s.params,context:i},...v!==void 0?[v]:[]),f=(async()=>{try{return{type:"data",result:await(a?a(x=>m(x)):m())}}catch(v){return{type:"error",result:v}}})();return Promise.race([f,h])};try{let d=s.route[t];if(n)if(d){let u,[h]=await Promise.all([c(d).catch(m=>{u=m}),n]);if(u!==void 0)throw u;o=h}else if(await n,d=s.route[t],d)o=await c(d);else if(t==="action"){let u=new URL(e.url),h=u.pathname+u.search;throw Zl(405,{method:e.method,pathname:h,routeId:s.route.id})}else return{type:Zn.data,result:void 0};else if(d)o=await c(d);else{let u=new URL(e.url),h=u.pathname+u.search;throw Zl(404,{pathname:h})}un(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+s.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Zn.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function Fce(t){let{result:e,type:s}=t;if(mY(e)){let h;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(m){return{type:Zn.error,error:m}}return s===Zn.error?{type:Zn.error,error:new iN(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:Zn.data,data:h,statusCode:e.status,headers:e.headers}}if(s===Zn.error){if(GR(e)){var n,a;if(e.data instanceof Error){var i,o;return{type:Zn.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Zn.error,error:new iN(((n=e.init)==null?void 0:n.status)||500,void 0,e.data),statusCode:ab(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:Zn.error,error:e,statusCode:ab(e)?e.status:void 0}}if(Wce(e)){var l,c;return{type:Zn.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(GR(e)){var d,u;return{type:Zn.data,data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Zn.data,data:e}}function Bce(t,e,s,n,a,i){let o=t.headers.get("Location");if(un(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!QO.test(o)){let l=n.slice(0,n.findIndex(c=>c.route.id===s)+1);o=PE(new URL(e.url),l,a,!0,o,i),t.headers.set("Location",o)}return t}function UR(t,e,s){if(QO.test(t)){let n=t,a=n.startsWith("//")?new URL(e.protocol+n):new URL(n),i=hw(a.pathname,s)!=null;if(a.origin===e.origin&&i)return a.pathname+a.search+a.hash}return t}function Qg(t,e,s,n){let a=t.createURL(hY(e)).toString(),i={signal:s};if(n&&hu(n.formMethod)){let{formMethod:o,formEncType:l}=n;i.method=o.toUpperCase(),l==="application/json"?(i.headers=new Headers({"Content-Type":l}),i.body=JSON.stringify(n.json)):l==="text/plain"?i.body=n.text:l==="application/x-www-form-urlencoded"&&n.formData?i.body=OE(n.formData):i.body=n.formData}return new Request(a,i)}function OE(t){let e=new URLSearchParams;for(let[s,n]of t.entries())e.append(s,typeof n=="string"?n:n.name);return e}function zR(t){let e=new FormData;for(let[s,n]of t.entries())e.append(s,n);return e}function Uce(t,e,s,n,a){let i={},o=null,l,c=!1,d={},u=s&&Tc(s[1])?s[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let m=h.route.id,f=e[m];if(un(!yx(f),"Cannot handle redirect results in processLoaderData"),Tc(f)){let v=f.error;u!==void 0&&(v=u,u=void 0),o=o||{};{let x=fx(t,m);o[x.route.id]==null&&(o[x.route.id]=v)}i[m]=void 0,c||(c=!0,l=ab(f.error)?f.error.status:500),f.headers&&(d[m]=f.headers)}else Mf(f)?(n.set(m,f.deferredData),i[m]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!c&&(l=f.statusCode),f.headers&&(d[m]=f.headers)):(i[m]=f.data,f.statusCode&&f.statusCode!==200&&!c&&(l=f.statusCode),f.headers&&(d[m]=f.headers))}),u!==void 0&&s&&(o={[s[0]]:u},i[s[0]]=void 0),{loaderData:i,errors:o,statusCode:l||200,loaderHeaders:d}}function VR(t,e,s,n,a,i,o){let{loaderData:l,errors:c}=Uce(e,s,n,o);return a.forEach(d=>{let{key:u,match:h,controller:m}=d,f=i[u];if(un(f,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Tc(f)){let v=fx(t.matches,h?.route.id);c&&c[v.route.id]||(c=Ua({},c,{[v.route.id]:f.error})),t.fetchers.delete(u)}else if(yx(f))un(!1,"Unhandled fetcher revalidation redirect");else if(Mf(f))un(!1,"Unhandled fetcher deferred data");else{let v=kf(f.data);t.fetchers.set(u,v)}}),{loaderData:l,errors:c}}function WR(t,e,s,n){let a=Ua({},e);for(let i of s){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(a[o]=e[o]):t[o]!==void 0&&i.route.loader&&(a[o]=t[o]),n&&n.hasOwnProperty(o))break}return a}function qR(t){return t?Tc(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function fx(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function HR(t){let e=t.length===1?t[0]:t.find(s=>s.index||!s.path||s.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zl(t,e){let{pathname:s,routeId:n,method:a,type:i,message:o}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(l="Bad Request",a&&s&&n?c="You made a "+a+' request to "'+s+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":i==="defer-action"?c="defer() is not supported in actions":i==="invalid-body"&&(c="Unable to encode submission body")):t===403?(l="Forbidden",c='Route "'+n+'" does not match URL "'+s+'"'):t===404?(l="Not Found",c='No route matches URL "'+s+'"'):t===405&&(l="Method Not Allowed",a&&s&&n?c="You made a "+a.toUpperCase()+' request to "'+s+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(c='Invalid request method "'+a.toUpperCase()+'"')),new iN(t||500,l,new Error(c),!0)}function _2(t){let e=Object.entries(t);for(let s=e.length-1;s>=0;s--){let[n,a]=e[s];if(yx(a))return{key:n,result:a}}}function hY(t){let e=typeof t=="string"?cp(t):t;return uw(Ua({},e,{hash:""}))}function zce(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Vce(t){return mY(t.result)&&Ace.has(t.result.status)}function Mf(t){return t.type===Zn.deferred}function Tc(t){return t.type===Zn.error}function yx(t){return(t&&t.type)===Zn.redirect}function GR(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Wce(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function mY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function qce(t){return _ce.has(t.toLowerCase())}function hu(t){return Cce.has(t.toLowerCase())}async function Hce(t,e,s,n,a){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[l,c]=i[o],d=t.find(m=>m?.route.id===l);if(!d)continue;let u=n.find(m=>m.route.id===d.route.id),h=u!=null&&!dY(u,d)&&(a&&a[d.route.id])!==void 0;Mf(c)&&h&&await ZO(c,s,!1).then(m=>{m&&(e[l]=m)})}}async function Gce(t,e,s){for(let n=0;n<s.length;n++){let{key:a,routeId:i,controller:o}=s[n],l=e[a];t.find(d=>d?.route.id===i)&&Mf(l)&&(un(o,"Expected an AbortController for revalidating fetcher deferred result"),await ZO(l,o.signal,!0).then(d=>{d&&(e[a]=d)}))}}async function ZO(t,e,s){if(s===void 0&&(s=!1),!await t.deferredData.resolveData(e)){if(s)try{return{type:Zn.data,data:t.deferredData.unwrappedData}}catch(a){return{type:Zn.error,error:a}}return{type:Zn.data,data:t.deferredData.data}}}function JO(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function y1(t,e){let s=typeof e=="string"?cp(e).search:e.search;if(t[t.length-1].route.index&&JO(s||""))return t[t.length-1];let n=aY(t);return n[n.length-1]}function YR(t){let{formMethod:e,formAction:s,formEncType:n,text:a,formData:i,json:o}=t;if(!(!e||!s||!n)){if(a!=null)return{formMethod:e,formAction:s,formEncType:n,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:e,formAction:s,formEncType:n,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:s,formEncType:n,formData:void 0,json:o,text:void 0}}}function _S(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Yce(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Vy(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Kce(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function kf(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Xce(t,e){try{let s=t.sessionStorage.getItem(cY);if(s){let n=JSON.parse(s);for(let[a,i]of Object.entries(n||{}))i&&Array.isArray(i)&&e.set(a,new Set(i||[]))}}catch{}}function Qce(t,e){if(e.size>0){let s={};for(let[n,a]of e)s[n]=[...a];try{t.sessionStorage.setItem(cY,JSON.stringify(s))}catch(n){Hx(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oN(){return oN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},oN.apply(this,arguments)}const X4=j.createContext(null),fY=j.createContext(null),Q4=j.createContext(null),eI=j.createContext(null),hg=j.createContext({outlet:null,matches:[],isDataRoute:!1}),pY=j.createContext(null);function Z4(){return j.useContext(eI)!=null}function xY(){return Z4()||un(!1),j.useContext(eI).location}function gY(t){j.useContext(Q4).static||j.useLayoutEffect(t)}function vY(){let{isDataRoute:t}=j.useContext(hg);return t?cde():Zce()}function Zce(){Z4()||un(!1);let t=j.useContext(X4),{basename:e,future:s,navigator:n}=j.useContext(Q4),{matches:a}=j.useContext(hg),{pathname:i}=xY(),o=JSON.stringify(iY(a,s.v7_relativeSplatPath)),l=j.useRef(!1);return gY(()=>{l.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=oY(d,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:zf([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,o,i,t])}function yY(){let{matches:t}=j.useContext(hg),e=t[t.length-1];return e?e.params:{}}function Jce(t,e,s,n){Z4()||un(!1);let{navigator:a}=j.useContext(Q4),{matches:i}=j.useContext(hg),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=xY(),u;u=d;let h=u.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let f=mx(t,{pathname:m});return nde(f&&f.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:zf([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:zf([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,s,n)}function ede(){let t=lde(),e=ab(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),s?j.createElement("pre",{style:a},s):null,null)}const tde=j.createElement(ede,null);class rde extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?j.createElement(hg.Provider,{value:this.props.routeContext},j.createElement(pY.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sde(t){let{routeContext:e,match:s,children:n}=t,a=j.useContext(X4);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(hg.Provider,{value:e},n)}function nde(t,e,s,n){var a;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var i;if(!s)return null;if(s.errors)t=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&l?.[h.route.id]!==void 0);u>=0||un(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:f}=s,v=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let f,v=!1,x=null,g=null;s&&(f=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||tde,c&&(d<0&&m===0?(dde("route-fallback"),v=!0,g=null):d===m&&(v=!0,g=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),w=()=>{let N;return f?N=x:v?N=g:h.route.Component?N=j.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=u,j.createElement(sde,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:s!=null},children:N})};return s&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?j.createElement(rde,{location:s.location,revalidation:s.revalidation,component:x,error:f,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var bY=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(bY||{}),wY=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(wY||{});function ade(t){let e=j.useContext(X4);return e||un(!1),e}function ide(t){let e=j.useContext(fY);return e||un(!1),e}function ode(t){let e=j.useContext(hg);return e||un(!1),e}function jY(t){let e=ode(),s=e.matches[e.matches.length-1];return s.route.id||un(!1),s.route.id}function lde(){var t;let e=j.useContext(pY),s=ide(wY.UseRouteError),n=jY();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function cde(){let{router:t}=ade(bY.UseNavigateStable),e=jY(),s=j.useRef(!1);return gY(()=>{s.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,oN({fromRouteId:e},i)))},[t,e])}const KR={};function dde(t,e,s){KR[t]||(KR[t]=!0)}function ude(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function hde(t){let{basename:e="/",children:s=null,location:n,navigationType:a=Di.Pop,navigator:i,static:o=!1,future:l}=t;Z4()&&un(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:o,future:oN({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=cp(n));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:v="default"}=n,x=j.useMemo(()=>{let g=hw(u,c);return g==null?null:{location:{pathname:g,search:h,hash:m,state:f,key:v},navigationType:a}},[c,u,h,m,f,v,a]);return x==null?null:j.createElement(Q4.Provider,{value:d},j.createElement(eI.Provider,{children:s,value:x}))}new Promise(()=>{});function mde(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:j.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:j.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:j.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},lN.apply(this,arguments)}const fde="6";try{window.__reactRouterVersion=fde}catch{}function pde(t,e){return Oce({basename:void 0,future:lN({},void 0,{v7_prependBasename:!0}),history:tce({window:void 0}),hydrationData:xde(),routes:t,mapRouteProperties:mde,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function xde(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=lN({},e,{errors:gde(e.errors)})),e}function gde(t){if(!t)return null;let e=Object.entries(t),s={};for(let[n,a]of e)if(a&&a.__type==="RouteErrorResponse")s[n]=new iN(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",s[n]=o}catch{}}if(s[n]==null){let i=new Error(a.message);i.stack="",s[n]=i}}else s[n]=a;return s}const vde=j.createContext({isTransitioning:!1}),yde=j.createContext(new Map),bde="startTransition",XR=K4[bde],wde="flushSync",QR=ece[wde];function jde(t){XR?XR(t):t()}function Wy(t){QR?QR(t):t()}let Nde=class{constructor(){this.status="pending",this.promise=new Promise((e,s)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",s(n))}})}};function Sde(t){let{fallbackElement:e,router:s,future:n}=t,[a,i]=j.useState(s.state),[o,l]=j.useState(),[c,d]=j.useState({isTransitioning:!1}),[u,h]=j.useState(),[m,f]=j.useState(),[v,x]=j.useState(),g=j.useRef(new Map),{v7_startTransition:b}=n||{},w=j.useCallback(E=>{b?jde(E):E()},[b]),N=j.useCallback((E,O)=>{let{deletedFetchers:$,flushSync:T,viewTransitionOpts:I}=O;E.fetchers.forEach((z,M)=>{z.data!==void 0&&g.current.set(M,z.data)}),$.forEach(z=>g.current.delete(z));let L=s.window==null||s.window.document==null||typeof s.window.document.startViewTransition!="function";if(!I||L){T?Wy(()=>i(E)):w(()=>i(E));return}if(T){Wy(()=>{m&&(u&&u.resolve(),m.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let z=s.window.document.startViewTransition(()=>{Wy(()=>i(E))});z.finished.finally(()=>{Wy(()=>{h(void 0),f(void 0),l(void 0),d({isTransitioning:!1})})}),Wy(()=>f(z));return}m?(u&&u.resolve(),m.skipTransition(),x({state:E,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(l(E),d({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[s.window,m,u,g,w]);j.useLayoutEffect(()=>s.subscribe(N),[s,N]),j.useEffect(()=>{c.isTransitioning&&!c.flushSync&&h(new Nde)},[c]),j.useEffect(()=>{if(u&&o&&s.window){let E=o,O=u.promise,$=s.window.document.startViewTransition(async()=>{w(()=>i(E)),await O});$.finished.finally(()=>{h(void 0),f(void 0),l(void 0),d({isTransitioning:!1})}),f($)}},[w,o,u,s.window]),j.useEffect(()=>{u&&o&&a.location.key===o.location.key&&u.resolve()},[u,m,a.location,o]),j.useEffect(()=>{!c.isTransitioning&&v&&(l(v.state),d({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),x(void 0))},[c.isTransitioning,v]),j.useEffect(()=>{},[]);let C=j.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:E=>s.navigate(E),push:(E,O,$)=>s.navigate(E,{state:O,preventScrollReset:$?.preventScrollReset}),replace:(E,O,$)=>s.navigate(E,{replace:!0,state:O,preventScrollReset:$?.preventScrollReset})}),[s]),S=s.basename||"/",A=j.useMemo(()=>({router:s,navigator:C,static:!1,basename:S}),[s,C,S]),k=j.useMemo(()=>({v7_relativeSplatPath:s.future.v7_relativeSplatPath}),[s.future.v7_relativeSplatPath]);return j.useEffect(()=>ude(n,s.future),[n,s.future]),j.createElement(j.Fragment,null,j.createElement(X4.Provider,{value:A},j.createElement(fY.Provider,{value:a},j.createElement(yde.Provider,{value:g.current},j.createElement(vde.Provider,{value:c},j.createElement(hde,{basename:S,location:a.location,navigationType:a.historyAction,navigator:C,future:k},a.initialized||s.future.v7_partialHydration?j.createElement(Cde,{routes:s.routes,future:s.future,state:a}):e))))),null)}const Cde=j.memo(kde);function kde(t){let{routes:e,future:s,state:n}=t;return Jce(e,void 0,n,s)}var ZR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ZR||(ZR={}));var JR;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JR||(JR={}));var AS,eM;function _de(){if(eM)return AS;eM=1;var t=typeof Element<"u",e=typeof Map=="function",s=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){if(i.constructor!==o.constructor)return!1;var l,c,d;if(Array.isArray(i)){if(l=i.length,l!=o.length)return!1;for(c=l;c--!==0;)if(!a(i[c],o[c]))return!1;return!0}var u;if(e&&i instanceof Map&&o instanceof Map){if(i.size!==o.size)return!1;for(u=i.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;for(u=i.entries();!(c=u.next()).done;)if(!a(c.value[1],o.get(c.value[0])))return!1;return!0}if(s&&i instanceof Set&&o instanceof Set){if(i.size!==o.size)return!1;for(u=i.entries();!(c=u.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(o)){if(l=i.length,l!=o.length)return!1;for(c=l;c--!==0;)if(i[c]!==o[c])return!1;return!0}if(i.constructor===RegExp)return i.source===o.source&&i.flags===o.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof o.valueOf=="function")return i.valueOf()===o.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof o.toString=="function")return i.toString()===o.toString();if(d=Object.keys(i),l=d.length,l!==Object.keys(o).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,d[c]))return!1;if(t&&i instanceof Element)return!1;for(c=l;c--!==0;)if(!((d[c]==="_owner"||d[c]==="__v"||d[c]==="__o")&&i.$$typeof)&&!a(i[d[c]],o[d[c]]))return!1;return!0}return i!==i&&o!==o}return AS=function(o,l){try{return a(o,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},AS}var Ade=_de();const Ede=cn(Ade);var ES,tM;function Pde(){if(tM)return ES;tM=1;var t=function(e,s,n,a,i,o,l,c){if(!e){var d;if(s===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,i,o,l,c],h=0;d=new Error(s.replace(/%s/g,function(){return u[h++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return ES=t,ES}var Tde=Pde();const rM=cn(Tde);var PS,sM;function Ode(){return sM||(sM=1,PS=function(e,s,n,a){var i=n?n.call(a,e,s):void 0;if(i!==void 0)return!!i;if(e===s)return!0;if(typeof e!="object"||!e||typeof s!="object"||!s)return!1;var o=Object.keys(e),l=Object.keys(s);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(s),d=0;d<o.length;d++){var u=o[d];if(!c(u))return!1;var h=e[u],m=s[u];if(i=n?n.call(a,h,m,u):void 0,i===!1||i===void 0&&h!==m)return!1}return!0}),PS}var Ide=Ode();const $de=cn(Ide);var NY=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(NY||{}),TS={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},nM=Object.values(NY),tI={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Dde=Object.entries(tI).reduce((t,[e,s])=>(t[s]=e,t),{}),bu="data-rh",F0={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},B0=(t,e)=>{for(let s=t.length-1;s>=0;s-=1){const n=t[s];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},Rde=t=>{let e=B0(t,"title");const s=B0(t,F0.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),s&&e)return s.replace(/%s/g,()=>e);const n=B0(t,F0.DEFAULT_TITLE);return e||n||void 0},Mde=t=>B0(t,F0.ON_CHANGE_CLIENT_STATE)||(()=>{}),OS=(t,e)=>e.filter(s=>typeof s[t]<"u").map(s=>s[t]).reduce((s,n)=>({...s,...n}),{}),Lde=(t,e)=>e.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,n)=>{if(!s.length){const a=Object.keys(n);for(let i=0;i<a.length;i+=1){const l=a[i].toLowerCase();if(t.indexOf(l)!==-1&&n[l])return s.concat(n)}}return s},[]),Fde=t=>console&&typeof console.warn=="function"&&console.warn(t),qy=(t,e,s)=>{const n={};return s.filter(a=>Array.isArray(a[t])?!0:(typeof a[t]<"u"&&Fde(`Helmet: ${t} should be of type "Array". Instead found type "${typeof a[t]}"`),!1)).map(a=>a[t]).reverse().reduce((a,i)=>{const o={};i.filter(c=>{let d;const u=Object.keys(c);for(let m=0;m<u.length;m+=1){const f=u[m],v=f.toLowerCase();e.indexOf(v)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(v==="rel"&&c[v].toLowerCase()==="stylesheet")&&(d=v),e.indexOf(f)!==-1&&(f==="innerHTML"||f==="cssText"||f==="itemprop")&&(d=f)}if(!d||!c[d])return!1;const h=c[d].toLowerCase();return n[d]||(n[d]={}),o[d]||(o[d]={}),n[d][h]?!1:(o[d][h]=!0,!0)}).reverse().forEach(c=>a.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const d=l[c],u={...n[d],...o[d]};n[d]=u}return a},[]).reverse()},Bde=(t,e)=>{if(Array.isArray(t)&&t.length){for(let s=0;s<t.length;s+=1)if(t[s][e])return!0}return!1},Ude=t=>({baseTag:Lde(["href"],t),bodyAttributes:OS("bodyAttributes",t),defer:B0(t,F0.DEFER),encode:B0(t,F0.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:OS("htmlAttributes",t),linkTags:qy("link",["rel","href"],t),metaTags:qy("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:qy("noscript",["innerHTML"],t),onChangeClientState:Mde(t),scriptTags:qy("script",["src","innerHTML"],t),styleTags:qy("style",["cssText"],t),title:Rde(t),titleAttributes:OS("titleAttributes",t),prioritizeSeoTags:Bde(t,F0.PRIORITIZE_SEO_TAGS)}),SY=t=>Array.isArray(t)?t.join(""):t,zde=(t,e)=>{const s=Object.keys(t);for(let n=0;n<s.length;n+=1)if(e[s[n]]&&e[s[n]].includes(t[s[n]]))return!0;return!1},IS=(t,e)=>Array.isArray(t)?t.reduce((s,n)=>(zde(n,e)?s.priority.push(n):s.default.push(n),s),{priority:[],default:[]}):{default:t,priority:[]},aM=(t,e)=>({...t,[e]:void 0}),Vde=["noscript","script","style"],IE=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),CY=t=>Object.keys(t).reduce((e,s)=>{const n=typeof t[s]<"u"?`${s}="${t[s]}"`:`${s}`;return e?`${e} ${n}`:n},""),Wde=(t,e,s,n)=>{const a=CY(s),i=SY(e);return a?`<${t} ${bu}="true" ${a}>${IE(i,n)}</${t}>`:`<${t} ${bu}="true">${IE(i,n)}</${t}>`},qde=(t,e,s=!0)=>e.reduce((n,a)=>{const i=a,o=Object.keys(i).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const h=typeof i[u]>"u"?u:`${u}="${IE(i[u],s)}"`;return d?`${d} ${h}`:h},""),l=i.innerHTML||i.cssText||"",c=Vde.indexOf(t)===-1;return`${n}<${t} ${bu}="true" ${o}${c?"/>":`>${l}</${t}>`}`},""),kY=(t,e={})=>Object.keys(t).reduce((s,n)=>{const a=tI[n];return s[a||n]=t[n],s},e),Hde=(t,e,s)=>{const n={key:e,[bu]:!0},a=kY(s,n);return[ce.createElement("title",a,e)]},Mj=(t,e)=>e.map((s,n)=>{const a={key:n,[bu]:!0};return Object.keys(s).forEach(i=>{const l=tI[i]||i;if(l==="innerHTML"||l==="cssText"){const c=s.innerHTML||s.cssText;a.dangerouslySetInnerHTML={__html:c}}else a[l]=s[i]}),ce.createElement(t,a)}),yd=(t,e,s=!0)=>{switch(t){case"title":return{toComponent:()=>Hde(t,e.title,e.titleAttributes),toString:()=>Wde(t,e.title,e.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>kY(e),toString:()=>CY(e)};default:return{toComponent:()=>Mj(t,e),toString:()=>qde(t,e,s)}}},Gde=({metaTags:t,linkTags:e,scriptTags:s,encode:n})=>{const a=IS(t,TS.meta),i=IS(e,TS.link),o=IS(s,TS.script);return{priorityMethods:{toComponent:()=>[...Mj("meta",a.priority),...Mj("link",i.priority),...Mj("script",o.priority)],toString:()=>`${yd("meta",a.priority,n)} ${yd("link",i.priority,n)} ${yd("script",o.priority,n)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},Yde=t=>{const{baseTag:e,bodyAttributes:s,encode:n=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:u,metaTags:h,scriptTags:m}=t,f={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:f,linkTags:u,metaTags:h,scriptTags:m}=Gde(t)),{priority:f,base:yd("base",e,n),bodyAttributes:yd("bodyAttributes",s,n),htmlAttributes:yd("htmlAttributes",a,n),link:yd("link",u,n),meta:yd("meta",h,n),noscript:yd("noscript",i,n),script:yd("script",m,n),style:yd("style",o,n),title:yd("title",{title:l,titleAttributes:c},n)}},$E=Yde,A2=[],_Y=!!(typeof window<"u"&&window.document&&window.document.createElement),DE=class{instances=[];canUseDOM=_Y;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?A2:this.instances,add:t=>{(this.canUseDOM?A2:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?A2:this.instances).indexOf(t);(this.canUseDOM?A2:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=$E({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Kde={},AY=ce.createContext(Kde),RE=class EY extends j.Component{static canUseDOM=_Y;helmetData;constructor(e){super(e),this.helmetData=new DE(this.props.context||{},EY.canUseDOM)}render(){return ce.createElement(AY.Provider,{value:this.helmetData.value},this.props.children)}},Zg=(t,e)=>{const s=document.head||document.querySelector("head"),n=s.querySelectorAll(`${t}[${bu}]`),a=[].slice.call(n),i=[];let o;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const u=d,h=typeof l[u]>"u"?"":l[u];c.setAttribute(d,h)}c.setAttribute(bu,"true"),a.some((d,u)=>(o=u,c.isEqualNode(d)))?a.splice(o,1):i.push(c)}),a.forEach(l=>l.parentNode?.removeChild(l)),i.forEach(l=>s.appendChild(l)),{oldTags:a,newTags:i}},ME=(t,e)=>{const s=document.getElementsByTagName(t)[0];if(!s)return;const n=s.getAttribute(bu),a=n?n.split(","):[],i=[...a],o=Object.keys(e);for(const l of o){const c=e[l]||"";s.getAttribute(l)!==c&&s.setAttribute(l,c),a.indexOf(l)===-1&&a.push(l);const d=i.indexOf(l);d!==-1&&i.splice(d,1)}for(let l=i.length-1;l>=0;l-=1)s.removeAttribute(i[l]);a.length===i.length?s.removeAttribute(bu):s.getAttribute(bu)!==o.join(",")&&s.setAttribute(bu,o.join(","))},Xde=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=SY(t)),ME("title",e)},iM=(t,e)=>{const{baseTag:s,bodyAttributes:n,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:u,title:h,titleAttributes:m}=t;ME("body",n),ME("html",a),Xde(h,m);const f={baseTag:Zg("base",s),linkTags:Zg("link",i),metaTags:Zg("meta",o),noscriptTags:Zg("noscript",l),scriptTags:Zg("script",d),styleTags:Zg("style",u)},v={},x={};Object.keys(f).forEach(g=>{const{newTags:b,oldTags:w}=f[g];b.length&&(v[g]=b),w.length&&(x[g]=f[g].oldTags)}),e&&e(),c(t,v,x)},Hy=null,Qde=t=>{Hy&&cancelAnimationFrame(Hy),t.defer?Hy=requestAnimationFrame(()=>{iM(t,()=>{Hy=null})}):(iM(t),Hy=null)},Zde=Qde,oM=class extends j.Component{rendered=!1;shouldComponentUpdate(t){return!$de(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let s=null;const n=Ude(t.get().map(a=>{const i={...a.props};return delete i.context,i}));RE.canUseDOM?Zde(n):$E&&(s=$E(n)),e(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},PY=class extends j.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!Ede(aM(this.props,"helmetData"),aM(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,s,n){return{...e,[t.type]:[...e[t.type]||[],{...s,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,e,s,n){switch(t.type){case"title":return{...e,[t.type]:n,titleAttributes:{...s}};case"body":return{...e,bodyAttributes:{...s}};case"html":return{...e,htmlAttributes:{...s}};default:return{...e,[t.type]:{...s}}}}mapArrayTypeChildrenToProps(t,e){let s={...e};return Object.keys(t).forEach(n=>{s={...s,[n]:t[n]}}),s}warnOnInvalidChildren(t,e){return rM(nM.some(s=>t.type===s),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${nM.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),rM(!e||typeof e=="string"||Array.isArray(e)&&!e.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let s={};return ce.Children.forEach(t,n=>{if(!n||!n.props)return;const{children:a,...i}=n.props,o=Object.keys(i).reduce((c,d)=>(c[Dde[d]||d]=i[d],c),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,a),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(n,s,o,a);break;default:e=this.mapObjectTypeChildren(n,e,o,a);break}}),this.mapArrayTypeChildrenToProps(s,e)}render(){const{children:t,...e}=this.props;let s={...e},{helmetData:n}=e;if(t&&(s=this.mapChildrenToProps(t,s)),n&&!(n instanceof DE)){const a=n;n=new DE(a.context,!0),delete s.helmetData}return n?ce.createElement(oM,{...s,context:n.value}):ce.createElement(AY.Consumer,null,a=>ce.createElement(oM,{...s,context:a}))}};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jde=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eue=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),lM=t=>{const e=eue(t);return e.charAt(0).toUpperCase()+e.slice(1)},TY=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rue=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...tue,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:TY("lucide",a),...l},[...o.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=(t,e)=>{const s=j.forwardRef(({className:n,...a},i)=>j.createElement(rue,{ref:i,iconNode:e,className:TY(`lucide-${Jde(lM(t))}`,`lucide-${t}`,n),...a}));return s.displayName=lM(t),s};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sue=[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]],nue=ht("accessibility",sue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aue=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],cl=ht("activity",aue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iue=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],oue=ht("arrow-down-right",iue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lue=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],U0=ht("arrow-left",lue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cue=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],due=ht("arrow-right",cue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uue=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],hue=ht("arrow-up-right",uue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mue=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ym=ht("award",mue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fue=[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]],pue=ht("baby",fue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xue=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pi=ht("bell",xue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gue=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],LE=ht("book-open",gue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vue=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],M1=ht("bot",vue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yue=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],L1=ht("brain",yue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bue=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],OY=ht("briefcase",bue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wue=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Na=ht("building-2",wue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jue=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Nue=ht("building",jue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sue=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Ed=ht("calendar-days",Sue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cue=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qs=ht("calendar",Cue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kue=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Gx=ht("camera",kue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ue=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Pu=ht("chart-column",_ue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aue=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Eue=ht("chart-line",Aue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pue=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],cM=ht("chart-pie",Pue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tue=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],IY=ht("check-check",Tue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oue=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Sr=ht("check",Oue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iue=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Mc=ht("chevron-down",Iue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ue=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],an=ht("chevron-left",$ue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Due=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$n=ht("chevron-right",Due);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rue=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$Y=ht("chevron-up",Rue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],$S=ht("chrome",Mue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],hs=ht("circle-alert",Lue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fue=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],en=ht("circle-check-big",Fue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Lt=ht("circle-check",Bue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pf=ht("circle-help",Uue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],FE=ht("circle-play",zue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Wue=ht("circle-user",Vue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const que=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ln=ht("circle-x",que);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],jr=ht("clock",Hue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gue=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Yue=ht("cloud",Gue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kue=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],dM=ht("code-xml",Kue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xue=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],ic=ht("code",Xue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Que=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],DY=ht("columns-2",Que);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Jue=ht("columns-3",Zue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],on=ht("copy",ehe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],rhe=ht("cpu",the);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],rn=ht("credit-card",she);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],lc=ht("crown",nhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Kf=ht("database",ahe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],In=ht("dollar-sign",ihe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ohe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Sn=ht("download",ohe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],wa=ht("ellipsis-vertical",lhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const che=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],tn=ht("external-link",che);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Pd=ht("eye-off",dhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uhe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ys=ht("eye",uhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],ib=ht("facebook",hhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mhe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],fhe=ht("file-check",mhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const phe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],xhe=ht("file-image",phe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],DS=ht("file-pen-line",ghe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],yhe=ht("file-plus",vhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bhe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jn=ht("file-text",bhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const whe=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],RS=ht("folder-open",whe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_u=ht("funnel",jhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nhe=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],bm=ht("gamepad-2",Nhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Ni=ht("gift",She);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],khe=ht("github",Che);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ml=ht("globe",_he);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ahe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rI=ht("grid-3x3",Ahe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ehe=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],RY=ht("grip-vertical",Ehe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],MY=ht("hard-drive",Phe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],wu=ht("heart",The);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],LY=ht("history",Ohe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ihe=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],MS=ht("house",Ihe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $he=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Bc=ht("image",$he);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dhe=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],FY=ht("inbox",Dhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ws=ht("info",Rhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Lhe=ht("instagram",Mhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Bhe=ht("key-round",Fhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],$d=ht("key",Uhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zhe=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Vhe=ht("languages",zhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],BY=ht("layout-dashboard",Whe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qhe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Hhe=ht("lightbulb",qhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ghe=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],ob=ht("link-2",Ghe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yhe=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Lj=ht("link",Yhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],J4=ht("list",Khe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ia=ht("loader-circle",Xhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mn=ht("lock",Qhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zhe=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],UY=ht("log-out",Zhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ds=ht("mail",Jhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eme=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],dl=ht("map-pin",eme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tme=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],zY=ht("megaphone",tme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],VY=ht("menu",rme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ni=ht("message-square",sme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],ame=ht("minimize-2",nme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=[["path",{d:"M5 12h14",key:"1ays0h"}]],BE=ht("minus",ime);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ome=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Yx=ht("monitor",ome);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Vv=ht("moon",lme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],WY=ht("mouse-pointer-click",cme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],ume=ht("mouse-pointer",dme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],mme=ht("network",hme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fme=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],qY=ht("package",fme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pme=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Vf=ht("palette",pme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xme=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],uM=ht("pause",xme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gme=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],b1=ht("pen",gme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],th=ht("pencil",vme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yme=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],mu=ht("percent",yme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],la=ht("phone",bme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],vh=ht("play",wme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ts=ht("plus",jme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],z0=ht("qr-code",Nme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Cme=ht("receipt",Sme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ju=ht("refresh-ccw",kme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ln=ht("refresh-cw",_me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],N0=ht("rotate-ccw",Ame);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eme=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Pme=ht("rotate-cw",Eme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dn=ht("save",Tme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ome=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Ime=ht("scan",Ome);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $me=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],oa=ht("search",$me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],wd=ht("send",Dme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],cN=ht("server",Rme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],nv=ht("settings-2",Mme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ul=ht("settings",Lme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fme=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Bme=ht("shield-alert",Fme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ume=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tf=ht("shield-check",Ume);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zs=ht("shield",zme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vme=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ri=ht("shopping-cart",Vme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wme=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Xf=ht("smartphone",Wme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qme=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],_a=ht("sparkles",qme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hme=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hM=ht("square-check-big",Hme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],oc=ht("square-pen",Gme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yme=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],mM=ht("square-x",Yme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kme=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Es=ht("star",Kme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xme=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],mw=ht("sun",Xme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qme=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],sI=ht("tablet",Qme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zme=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],dN=ht("tag",Zme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jme=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$f=ht("target",Jme);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const efe=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],LS=ht("thumbs-up",efe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tfe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ks=ht("trash-2",tfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rfe=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],uN=ht("trending-down",rfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sfe=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Wn=ht("trending-up",sfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nfe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Nu=ht("triangle-alert",nfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const afe=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],ife=ht("twitter",afe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ofe=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],lfe=ht("type",ofe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cfe=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],fM=ht("unlink",cfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ll=ht("upload",dfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ufe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],UE=ht("user-check",ufe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hfe=[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]],mfe=ht("user-cog",hfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ffe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Nd=ht("user-plus",ffe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pfe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],HY=ht("user-x",pfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ma=ht("user",xfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gfe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Xr=ht("users",gfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],pM=ht("video",vfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],zE=ht("volume-2",yfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bfe=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],wfe=ht("webhook",bfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Is=ht("x",jfe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Du=ht("zap",Nfe);function xM(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Oh(...t){return e=>{let s=!1;const n=t.map(a=>{const i=xM(a,e);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():xM(t[a],null)}}}}function bs(...t){return j.useCallback(Oh(...t),t)}var Sfe=Symbol.for("react.lazy"),hN=K4[" use ".trim().toString()];function Cfe(t){return typeof t=="object"&&t!==null&&"then"in t}function GY(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Sfe&&"_payload"in t&&Cfe(t._payload)}function Wv(t){const e=kfe(t),s=j.forwardRef((n,a)=>{let{children:i,...o}=n;GY(i)&&typeof hN=="function"&&(i=hN(i._payload));const l=j.Children.toArray(i),c=l.find(Afe);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}var YY=Wv("Slot");function kfe(t){const e=j.forwardRef((s,n)=>{let{children:a,...i}=s;if(GY(a)&&typeof hN=="function"&&(a=hN(a._payload)),j.isValidElement(a)){const o=Pfe(a),l=Efe(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var _fe=Symbol("radix.slottable");function Afe(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===_fe}function Efe(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function Pfe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function KY(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(s=KY(t[e]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function Rs(){for(var t,e,s=0,n="",a=arguments.length;s<a;s++)(t=arguments[s])&&(e=KY(t))&&(n&&(n+=" "),n+=e);return n}const gM=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vM=Rs,nI=(t,e)=>s=>{var n;if(e?.variants==null)return vM(t,s?.class,s?.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(d=>{const u=s?.[d],h=i?.[d];if(u===null)return null;const m=gM(u)||gM(h);return a[d][m]}),l=s&&Object.entries(s).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(v=>{let[x,g]=v;return Array.isArray(g)?g.includes({...i,...l}[x]):{...i,...l}[x]===g})?[...d,h,m]:d},[]);return vM(t,o,c,s?.class,s?.className)},aI="-",Tfe=t=>{const e=Ife(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(aI);return l[0]===""&&l.length!==1&&l.shift(),XY(l,e)||Ofe(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},XY=(t,e)=>{if(t.length===0)return e.classGroupId;const s=t[0],n=e.nextPart.get(s),a=n?XY(t.slice(1),n):void 0;if(a)return a;if(e.validators.length===0)return;const i=t.join(aI);return e.validators.find(({validator:o})=>o(i))?.classGroupId},yM=/^\[(.+)\]$/,Ofe=t=>{if(yM.test(t)){const e=yM.exec(t)[1],s=e?.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},Ife=t=>{const{theme:e,classGroups:s}=t,n={nextPart:new Map,validators:[]};for(const a in s)VE(s[a],n,a,e);return n},VE=(t,e,s,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?e:bM(e,a);i.classGroupId=s;return}if(typeof a=="function"){if($fe(a)){VE(a(n),e,s,n);return}e.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{VE(o,bM(e,i),s,n)})})},bM=(t,e)=>{let s=t;return e.split(aI).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},$fe=t=>t.isThemeGetter,Dfe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),e++,e>t&&(e=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},WE="!",qE=":",Rfe=qE.length,Mfe=t=>{const{prefix:e,experimentalParseClassName:s}=t;let n=a=>{const i=[];let o=0,l=0,c=0,d;for(let v=0;v<a.length;v++){let x=a[v];if(o===0&&l===0){if(x===qE){i.push(a.slice(c,v)),c=v+Rfe;continue}if(x==="/"){d=v;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const u=i.length===0?a:a.substring(c),h=Lfe(u),m=h!==u,f=d&&d>c?d-c:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const a=e+qE,i=n;n=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(s){const a=n;n=i=>s({className:i,parseClassName:a})}return n},Lfe=t=>t.endsWith(WE)?t.substring(0,t.length-1):t.startsWith(WE)?t.substring(1):t,Ffe=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let i=[];return n.forEach(o=>{o[0]==="["||e[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},Bfe=t=>({cache:Dfe(t.cacheSize),parseClassName:Mfe(t),sortModifiers:Ffe(t),...Tfe(t)}),Ufe=/\s+/,zfe=(t,e)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=e,o=[],l=t.trim().split(Ufe);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{isExternal:h,modifiers:m,hasImportantModifier:f,baseClassName:v,maybePostfixModifierPosition:x}=s(u);if(h){c=u+(c.length>0?" "+c:c);continue}let g=!!x,b=n(g?v.substring(0,x):v);if(!b){if(!g){c=u+(c.length>0?" "+c:c);continue}if(b=n(v),!b){c=u+(c.length>0?" "+c:c);continue}g=!1}const w=i(m).join(":"),N=f?w+WE:w,C=N+b;if(o.includes(C))continue;o.push(C);const S=a(b,g);for(let A=0;A<S.length;++A){const k=S[A];o.push(N+k)}c=u+(c.length>0?" "+c:c)}return c};function Vfe(){let t=0,e,s,n="";for(;t<arguments.length;)(e=arguments[t++])&&(s=QY(e))&&(n&&(n+=" "),n+=s);return n}const QY=t=>{if(typeof t=="string")return t;let e,s="";for(let n=0;n<t.length;n++)t[n]&&(e=QY(t[n]))&&(s&&(s+=" "),s+=e);return s};function Wfe(t,...e){let s,n,a,i=o;function o(c){const d=e.reduce((u,h)=>h(u),t());return s=Bfe(d),n=s.cache.get,a=s.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=zfe(c,s);return a(c,u),u}return function(){return i(Vfe.apply(null,arguments))}}const qi=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},ZY=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,JY=/^\((?:(\w[\w-]*):)?(.+)\)$/i,qfe=/^\d+\/\d+$/,Hfe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gfe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yfe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Kfe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Xfe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jg=t=>qfe.test(t),Ys=t=>!!t&&!Number.isNaN(Number(t)),yf=t=>!!t&&Number.isInteger(Number(t)),FS=t=>t.endsWith("%")&&Ys(t.slice(0,-1)),um=t=>Hfe.test(t),Qfe=()=>!0,Zfe=t=>Gfe.test(t)&&!Yfe.test(t),eK=()=>!1,Jfe=t=>Kfe.test(t),epe=t=>Xfe.test(t),tpe=t=>!Fr(t)&&!Br(t),rpe=t=>qv(t,sK,eK),Fr=t=>ZY.test(t),Kp=t=>qv(t,nK,Zfe),BS=t=>qv(t,ope,Ys),wM=t=>qv(t,tK,eK),spe=t=>qv(t,rK,epe),E2=t=>qv(t,aK,Jfe),Br=t=>JY.test(t),Gy=t=>Hv(t,nK),npe=t=>Hv(t,lpe),jM=t=>Hv(t,tK),ape=t=>Hv(t,sK),ipe=t=>Hv(t,rK),P2=t=>Hv(t,aK,!0),qv=(t,e,s)=>{const n=ZY.exec(t);return n?n[1]?e(n[1]):s(n[2]):!1},Hv=(t,e,s=!1)=>{const n=JY.exec(t);return n?n[1]?e(n[1]):s:!1},tK=t=>t==="position"||t==="percentage",rK=t=>t==="image"||t==="url",sK=t=>t==="length"||t==="size"||t==="bg-size",nK=t=>t==="length",ope=t=>t==="number",lpe=t=>t==="family-name",aK=t=>t==="shadow",cpe=()=>{const t=qi("color"),e=qi("font"),s=qi("text"),n=qi("font-weight"),a=qi("tracking"),i=qi("leading"),o=qi("breakpoint"),l=qi("container"),c=qi("spacing"),d=qi("radius"),u=qi("shadow"),h=qi("inset-shadow"),m=qi("text-shadow"),f=qi("drop-shadow"),v=qi("blur"),x=qi("perspective"),g=qi("aspect"),b=qi("ease"),w=qi("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...C(),Br,Fr],A=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],E=()=>[Br,Fr,c],O=()=>[Jg,"full","auto",...E()],$=()=>[yf,"none","subgrid",Br,Fr],T=()=>["auto",{span:["full",yf,Br,Fr]},yf,Br,Fr],I=()=>[yf,"auto",Br,Fr],L=()=>["auto","min","max","fr",Br,Fr],z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],M=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...E()],B=()=>[Jg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],F=()=>[t,Br,Fr],J=()=>[...C(),jM,wM,{position:[Br,Fr]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",ape,rpe,{size:[Br,Fr]}],U=()=>[FS,Gy,Kp],Z=()=>["","none","full",d,Br,Fr],K=()=>["",Ys,Gy,Kp],se=()=>["solid","dashed","dotted","double"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>[Ys,FS,jM,wM],be=()=>["","none",v,Br,Fr],ue=()=>["none",Ys,Br,Fr],oe=()=>["none",Ys,Br,Fr],pe=()=>[Ys,Br,Fr],ye=()=>[Jg,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[um],breakpoint:[um],color:[Qfe],container:[um],"drop-shadow":[um],ease:["in","out","in-out"],font:[tpe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[um],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[um],shadow:[um],spacing:["px",Ys],text:[um],"text-shadow":[um],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Jg,Fr,Br,g]}],container:["container"],columns:[{columns:[Ys,Fr,Br,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[yf,"auto",Br,Fr]}],basis:[{basis:[Jg,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ys,Jg,"auto","initial","none",Fr]}],grow:[{grow:["",Ys,Br,Fr]}],shrink:[{shrink:["",Ys,Br,Fr]}],order:[{order:[yf,"first","last","none",Br,Fr]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...M(),"normal"]}],"justify-self":[{"justify-self":["auto",...M()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...M(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...M(),{baseline:["","last"]}]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...M(),"baseline"]}],"place-self":[{"place-self":["auto",...M()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[l,"screen",...B()]}],"min-w":[{"min-w":[l,"screen","none",...B()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",s,Gy,Kp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Br,BS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",FS,Fr]}],"font-family":[{font:[npe,Fr,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Br,Fr]}],"line-clamp":[{"line-clamp":[Ys,"none",Br,BS]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",Br,Fr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Br,Fr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ys,"from-font","auto",Br,Kp]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[Ys,"auto",Br,Fr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Br,Fr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Br,Fr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yf,Br,Fr],radial:["",Br,Fr],conic:[yf,Br,Fr]},ipe,spe]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ys,Br,Fr]}],"outline-w":[{outline:["",Ys,Gy,Kp]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",u,P2,E2]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,P2,E2]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[Ys,Kp]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",m,P2,E2]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[Ys,Br,Fr]}],"mix-blend":[{"mix-blend":[...ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ys]}],"mask-image-linear-from-pos":[{"mask-linear-from":ie()}],"mask-image-linear-to-pos":[{"mask-linear-to":ie()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ie()}],"mask-image-t-to-pos":[{"mask-t-to":ie()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ie()}],"mask-image-r-to-pos":[{"mask-r-to":ie()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ie()}],"mask-image-b-to-pos":[{"mask-b-to":ie()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ie()}],"mask-image-l-to-pos":[{"mask-l-to":ie()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ie()}],"mask-image-x-to-pos":[{"mask-x-to":ie()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ie()}],"mask-image-y-to-pos":[{"mask-y-to":ie()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Br,Fr]}],"mask-image-radial-from-pos":[{"mask-radial-from":ie()}],"mask-image-radial-to-pos":[{"mask-radial-to":ie()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ys]}],"mask-image-conic-from-pos":[{"mask-conic-from":ie()}],"mask-image-conic-to-pos":[{"mask-conic-to":ie()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Br,Fr]}],filter:[{filter:["","none",Br,Fr]}],blur:[{blur:be()}],brightness:[{brightness:[Ys,Br,Fr]}],contrast:[{contrast:[Ys,Br,Fr]}],"drop-shadow":[{"drop-shadow":["","none",f,P2,E2]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",Ys,Br,Fr]}],"hue-rotate":[{"hue-rotate":[Ys,Br,Fr]}],invert:[{invert:["",Ys,Br,Fr]}],saturate:[{saturate:[Ys,Br,Fr]}],sepia:[{sepia:["",Ys,Br,Fr]}],"backdrop-filter":[{"backdrop-filter":["","none",Br,Fr]}],"backdrop-blur":[{"backdrop-blur":be()}],"backdrop-brightness":[{"backdrop-brightness":[Ys,Br,Fr]}],"backdrop-contrast":[{"backdrop-contrast":[Ys,Br,Fr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ys,Br,Fr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ys,Br,Fr]}],"backdrop-invert":[{"backdrop-invert":["",Ys,Br,Fr]}],"backdrop-opacity":[{"backdrop-opacity":[Ys,Br,Fr]}],"backdrop-saturate":[{"backdrop-saturate":[Ys,Br,Fr]}],"backdrop-sepia":[{"backdrop-sepia":["",Ys,Br,Fr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Br,Fr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ys,"initial",Br,Fr]}],ease:[{ease:["linear","initial",b,Br,Fr]}],delay:[{delay:[Ys,Br,Fr]}],animate:[{animate:["none",w,Br,Fr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Br,Fr]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:pe()}],"skew-x":[{"skew-x":pe()}],"skew-y":[{"skew-y":pe()}],transform:[{transform:[Br,Fr,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Br,Fr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Br,Fr]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[Ys,Gy,Kp,BS]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dpe=Wfe(cpe);function Ar(...t){return dpe(Rs(t))}const lb=nI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),W=j.forwardRef(({className:t,variant:e,size:s,asChild:n=!1,...a},i)=>{const o=n?YY:"button";return r.jsx(o,{"data-slot":"button",className:Ar(lb({variant:e,size:s,className:t})),ref:i,...a})});W.displayName="Button";const upe="modulepreload",hpe=function(t){return"/"+t},NM={},V0=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=o(s.map(d=>{if(d=hpe(d),d in NM)return;NM[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":upe,u||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((f,v)=>{m.addEventListener("load",f),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},mpe=["system.view","system.manage","owners.view","owners.create","owners.edit","owners.delete","venues.view","venues.manage","plans.view","plans.edit","features.view","features.toggle","billing.view","billing.manage","platform.analytics","dashboard.view","dashboard.stats","bookings.view","bookings.create","bookings.edit","bookings.delete","bookings.export","games.view","games.create","games.edit","games.delete","widgets.view","widgets.edit","widgets.create","widgets.delete","widgets.calendar.view","widgets.calendar.edit","widgets.calendar.create","customers.view","customers.create","customers.edit","customers.delete","customers.export","marketing.view","marketing.edit","campaigns.view","campaigns.edit","ai-agents.view","ai-agents.edit","reports.view","reports.export","staff.view","staff.edit","staff.create","staff.delete","waivers.view","waivers.edit","waivers.create","media.view","media.upload","media.delete","settings.view","settings.edit","accounts.view","accounts.manage","accounts.roles","payments.view","payments.refund","payments.export","payments.reconcile"],fpe=["dashboard.view","dashboard.stats","bookings.view","bookings.create","bookings.edit","bookings.delete","bookings.export","venues.view","venues.create","venues.edit","venues.delete","venues.configure","games.view","games.create","games.edit","games.delete","widgets.view","widgets.edit","widgets.create","widgets.delete","widgets.calendar.view","widgets.calendar.edit","widgets.calendar.create","customers.view","customers.create","customers.edit","customers.delete","customers.export","marketing.view","marketing.edit","campaigns.view","campaigns.edit","ai-agents.view","ai-agents.edit","reports.view","reports.export","staff.view","staff.edit","staff.create","staff.delete","waivers.view","waivers.edit","waivers.create","media.view","media.upload","media.delete","settings.view","settings.edit","accounts.view","accounts.manage","accounts.roles","payments.view","payments.refund","payments.export","payments.reconcile"],ppe=["dashboard.view","dashboard.stats","bookings.view","bookings.create","bookings.edit","bookings.delete","bookings.export","venues.view","venues.create","venues.edit","venues.delete","venues.configure","games.view","games.create","games.edit","games.delete","widgets.view","widgets.edit","widgets.create","widgets.delete","widgets.calendar.view","widgets.calendar.edit","widgets.calendar.create","customers.view","customers.create","customers.edit","customers.delete","customers.export","marketing.view","marketing.edit","campaigns.view","campaigns.edit","ai-agents.view","ai-agents.edit","reports.view","reports.export","staff.view","staff.edit","staff.create","staff.delete","waivers.view","waivers.edit","waivers.create","media.view","media.upload","media.delete","settings.view","payments.view","payments.refund","payments.export","payments.reconcile"],xpe=["dashboard.view","bookings.view","bookings.create","bookings.export","games.view","games.create","games.edit","games.delete","customers.view","customers.edit","customers.export","reports.view","reports.export","waivers.view","media.view","staff.view","payments.view","payments.export","payments.refund","payments.reconcile"],gpe=["dashboard.view","bookings.view","games.view","customers.view","waivers.view"],vpe=["bookings.view","payments.view"],ype=["dashboard.view","dashboard.stats","bookings.view","bookings.create","bookings.edit","bookings.delete","bookings.export","venues.view","venues.create","venues.edit","venues.delete","venues.configure","games.view","games.create","games.edit","games.delete","widgets.view","widgets.calendar.view","widgets.calendar.edit","widgets.calendar.create","customers.view","customers.create","customers.edit","customers.export","waivers.view","waivers.edit","waivers.create","reports.view","reports.export","payments.view","payments.export","ai-agents.view","settings.view","settings.edit"],iK=[{id:"system-admin",name:"System Admin",description:"Platform owner with full control over all organizations, owners, venues, and features",permissions:mpe,color:"#dc2626",icon:"Crown"},{id:"super-admin",name:"Super Admin",description:"Organization owner with full access to their venues and settings",permissions:fpe,color:"#ef4444",icon:"Shield"},{id:"admin",name:"Admin",description:"Full operational access to bookings, events, widgets, and all features",permissions:ppe,color:"#4f46e5",icon:"UserCog"},{id:"beta-owner",name:"Beta Owner",description:"MVP Testing - Escape room owner with calendar widgets only, no staff access",permissions:ype,color:"#f59e0b",icon:"Building2"},{id:"manager",name:"Manager",description:"View and manage bookings, events, and rooms",permissions:xpe,color:"#10b981",icon:"Users"},{id:"staff",name:"Staff",description:"Basic view access for operational tasks",permissions:gpe,color:"#6b7280",icon:"Briefcase"},{id:"customer",name:"Customer",description:"End user with booking and payment view access",permissions:vpe,color:"#94a3b8",icon:"User"}],bpe=[{path:"/dashboard",requiredPermissions:["dashboard.view"]},{path:"/bookings",requiredPermissions:["bookings.view"]},{path:"/games",requiredPermissions:["games.view"]},{path:"/booking-widgets",requiredPermissions:["widgets.view"]},{path:"/marketing",requiredPermissions:["marketing.view"]},{path:"/campaigns",requiredPermissions:["campaigns.view"]},{path:"/customers",requiredPermissions:["customers.view"]},{path:"/ai-agents",requiredPermissions:["ai-agents.view"]},{path:"/reports",requiredPermissions:["reports.view"]},{path:"/staff",requiredPermissions:["staff.view"]},{path:"/team",requiredPermissions:["staff.view"]},{path:"/waivers",requiredPermissions:["waivers.view"]},{path:"/media",requiredPermissions:["media.view"]},{path:"/settings",requiredPermissions:["settings.view"]},{path:"/payment-history",requiredPermissions:["payments.view"]},{path:"/system-admin",requiredPermissions:["system.view"],requiredRole:["system-admin"],redirectTo:"/dashboard"},{path:"/account-settings",requiredPermissions:["accounts.view"],requiredRole:["super-admin"],redirectTo:"/dashboard"}];function wpe(t){return iK.find(e=>e.id===t)}function jpe(t){return wpe(t)?.permissions||[]}function Npe(t){return bpe.find(e=>e.path===t)}var T2={};let Do=null,Spe=null,HE=null;const SM=t=>{if(typeof window<"u")return window[t]||void 0},Cpe=async()=>{if(typeof window>"u")return null;let t,e;try{t=typeof process<"u"&&T2?T2.NEXT_PUBLIC_SUPABASE_URL:SM("NEXT_PUBLIC_SUPABASE_URL"),e=typeof process<"u"&&T2?T2.NEXT_PUBLIC_SUPABASE_ANON_KEY:SM("NEXT_PUBLIC_SUPABASE_ANON_KEY")}catch{return console.log(" Cannot access environment variables - using mock data"),null}if(!t||!e)return console.log(" Supabase not configured - using mock data"),null;try{const{supabase:s,getCurrentUser:n,signOut:a}=await V0(async()=>{const{supabase:i,getCurrentUser:o,signOut:l}=await Promise.resolve().then(()=>CQ);return{supabase:i,getCurrentUser:o,signOut:l}},void 0);return Do=s,Spe=n,HE=a,console.log(" Supabase connected"),s}catch(s){return console.warn(" Supabase connection failed - using mock data:",s),null}},O2=[{id:"00000000-0000-0000-0000-000000000000",email:"systemadmin@bookingtms.com",name:"System Administrator",role:"system-admin",status:"active",createdAt:"2024-01-01T00:00:00Z",lastLogin:"2025-11-08T09:00:00Z",organizationId:null},{id:"00000000-0000-0000-0000-000000000001",email:"superadmin@bookingtms.com",name:"Super Admin User",role:"super-admin",status:"active",createdAt:"2024-01-01T00:00:00Z",lastLogin:"2025-11-04T10:30:00Z",organizationId:"00000000-0000-0000-0000-000000000001"},{id:"00000000-0000-0000-0000-000000000002",email:"admin@bookingtms.com",name:"Admin User",role:"admin",status:"active",createdAt:"2024-02-15T00:00:00Z",lastLogin:"2025-11-04T09:15:00Z",organizationId:"00000000-0000-0000-0000-000000000001"},{id:"00000000-0000-0000-0000-000000000005",email:"betaadmin@bookingtms.com",name:"Beta Admin",role:"beta-owner",status:"active",createdAt:"2024-11-08T00:00:00Z",lastLogin:"2025-11-08T00:00:00Z",organizationId:"00000000-0000-0000-0000-000000000001"},{id:"00000000-0000-0000-0000-000000000003",email:"manager@bookingtms.com",name:"Manager User",role:"manager",status:"active",createdAt:"2024-03-20T00:00:00Z",lastLogin:"2025-11-04T08:45:00Z",organizationId:"00000000-0000-0000-0000-000000000001"},{id:"00000000-0000-0000-0000-000000000004",email:"staff@bookingtms.com",name:"Staff User",role:"staff",status:"active",createdAt:"2024-04-10T00:00:00Z",lastLogin:"2025-11-04T07:30:00Z",organizationId:"00000000-0000-0000-0000-000000000001"}],oK=j.createContext(void 0),CM=({children:t})=>{const[e,s]=j.useState(null),[n,a]=j.useState(O2),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState(null);j.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const I=await Cpe();I?(c(!0),await m(I)):await f()}catch(I){console.error("Failed to initialize auth:",I),await f()}finally{o(!1)}},m=async I=>{try{const{data:{session:L},error:z}=await I.auth.getSession();if(z){console.error("Error getting session:",z);return}L?.user&&(u(L.user),await v(L.user.id));const{data:{subscription:M}}=I.auth.onAuthStateChange(async(V,B)=>{console.log("Auth state changed:",V),V==="SIGNED_IN"&&B?.user?(u(B.user),await v(B.user.id)):V==="SIGNED_OUT"&&(s(null),u(null))});return()=>{M.unsubscribe()}}catch(L){console.error("Supabase auth initialization failed:",L)}},f=async()=>{try{const I=localStorage.getItem("currentUserId");if(I){const L=O2.find(z=>z.id===I);if(L){s(L);return}}s(null)}catch(I){console.error("Mock auth initialization failed:",I)}},v=async I=>{if(Do)try{const{data:L,error:z}=await Do.from("users").select(`
          *,
          organization:organizations(*)
        `).eq("id",I).single();if(z){console.error("Error loading user profile:",z);return}if(L){const M={id:L.id,email:L.email,name:L.full_name,role:L.role,status:L.is_active?"active":"inactive",avatar:L.avatar_url||void 0,phone:L.phone||void 0,createdAt:L.created_at,lastLogin:L.last_login_at||void 0,organizationId:L.organization_id};s(M),await Do.from("users").update({last_login_at:new Date().toISOString()}).eq("id",I)}}catch(L){console.error("Failed to load user profile:",L)}},x=async(I,L,z)=>{if(l&&Do)try{const{data:M,error:V}=await Do.auth.signInWithPassword({email:I,password:L});if(V)throw new Error(V.message);M.user&&(u(M.user),await v(M.user.id))}catch(M){throw console.error("Login error:",M),M}else{const M={systemadmin:{username:"systemadmin",password:"demo123",role:"system-admin"},superadmin:{username:"superadmin",password:"demo123",role:"super-admin"},admin:{username:"admin",password:"demo123",role:"admin"},betaadmin:{username:"betaadmin",password:"123admin",role:"beta-owner"},manager:{username:"manager",password:"demo123",role:"manager"},staff:{username:"staff",password:"demo123",role:"staff"}},V=I.toLowerCase().trim(),B=M[V];if(console.log(" Login attempt:",{inputUsername:V,passwordLength:L.length,expectedPasswordLength:B?.password?.length||0,credentialFound:!!B}),B){const J=L.trim();if(B.password!==J)throw console.error(" Login failed: Invalid password for username:",V),console.error("Expected:",B.password,"Got:",J),new Error("Invalid credentials");let ee=O2.find(q=>q.role===B.role);ee||(console.warn("Creating new demo user for role:",B.role),ee={id:Math.random().toString(36).substring(7),email:`${B.username}@bookingtms.com`,name:`${B.role.split("-").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ")} User`,role:B.role,status:"active",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),organizationId:"00000000-0000-0000-0000-000000000001"}),ee.lastLogin=new Date().toISOString(),s(ee),localStorage.setItem("currentUserId",ee.id),console.log(" Login successful:",ee.email,ee.role);return}const F=O2.find(J=>J.email===I);if(F){F.lastLogin=new Date().toISOString(),s(F),localStorage.setItem("currentUserId",F.id),console.log(" Login successful via email:",F.email);return}throw console.error("Login failed: No user found for:",I),new Error("Invalid credentials")}},g=async()=>{if(l&&HE)try{await HE(),s(null),u(null)}catch(I){throw console.error("Logout error:",I),I}else s(null),localStorage.removeItem("currentUserId")},b=async I=>{if(l)throw console.warn("switchUser is not supported with Supabase auth"),new Error("User switching requires re-authentication");{const L=n.find(z=>z.id===I);if(L)s(L),localStorage.setItem("currentUserId",I);else throw new Error("User not found")}},w=I=>e?jpe(e.role).includes(I):!1,N=I=>I.some(L=>w(L)),C=I=>I.every(L=>w(L)),S=I=>{const L=Npe(I);return L?w(L):!0},A=I=>e?Array.isArray(I)?I.includes(e.role):e.role===I:!1,k=async I=>{if(!w("users.create"))throw new Error("Insufficient permissions to create users");if(l&&Do)try{const{data:L,error:z}=await Do.auth.admin.createUser({email:I.email,password:I.password,email_confirm:!0,user_metadata:{full_name:I.name}});if(z||!L.user)throw new Error(z?.message||"Failed to create auth user");const{data:M,error:V}=await Do.from("users").insert({id:L.user.id,email:I.email,full_name:I.name,role:I.role,organization_id:e.organizationId,phone:I.phone||null,is_active:!0}).select().single();if(V||!M)throw await Do.auth.admin.deleteUser(L.user.id),new Error(V?.message||"Failed to create user profile");const B={id:M.id,email:M.email,name:M.full_name,role:M.role,status:M.is_active?"active":"inactive",phone:M.phone||void 0,createdAt:M.created_at,organizationId:M.organization_id};return await $(),B}catch(L){throw console.error("Error creating user:",L),L}else{const L={id:`user-${Date.now()}`,email:I.email,name:I.name,role:I.role,status:I.status||"active",phone:I.phone,createdAt:new Date().toISOString(),organizationId:e?.organizationId};return a(z=>[...z,L]),L}},E=async(I,L)=>{if(!w("users.edit"))throw new Error("Insufficient permissions to update users");if(l&&Do)try{const z={updated_at:new Date().toISOString()};L.name!==void 0&&(z.full_name=L.name),L.email!==void 0&&(z.email=L.email),L.role!==void 0&&(z.role=L.role),L.phone!==void 0&&(z.phone=L.phone),L.avatar!==void 0&&(z.avatar_url=L.avatar),L.status!==void 0&&(z.is_active=L.status==="active");const{data:M,error:V}=await Do.from("users").update(z).eq("id",I).select().single();if(V||!M)throw new Error(V?.message||"Failed to update user");L.email&&await Do.auth.admin.updateUserById(I,{email:L.email});const B={id:M.id,email:M.email,name:M.full_name,role:M.role,status:M.is_active?"active":"inactive",phone:M.phone||void 0,avatar:M.avatar_url||void 0,createdAt:M.created_at,lastLogin:M.last_login_at||void 0,organizationId:M.organization_id};return I===e?.id&&s(B),await $(),B}catch(z){throw console.error("Error updating user:",z),z}else{const z=n.find(V=>V.id===I);if(!z)throw new Error("User not found");const M={...z,...L};return a(V=>V.map(B=>B.id===I?M:B)),e?.id===I&&s(M),M}},O=async I=>{if(!w("users.delete"))throw new Error("Insufficient permissions to delete users");if(I===e?.id)throw new Error("Cannot delete your own account");if(l&&Do)try{const{error:L}=await Do.auth.admin.deleteUser(I);if(L)throw new Error(L.message);await $()}catch(L){throw console.error("Error deleting user:",L),L}else a(L=>L.filter(z=>z.id!==I))},$=async()=>{if(w("users.view")&&l&&Do&&e?.organizationId)try{const{data:I,error:L}=await Do.from("users").select("*").eq("organization_id",e.organizationId).order("created_at",{ascending:!1});if(L){console.error("Error loading users:",L);return}const z=(I||[]).map(M=>({id:M.id,email:M.email,name:M.full_name,role:M.role,status:M.is_active?"active":"inactive",phone:M.phone||void 0,avatar:M.avatar_url||void 0,createdAt:M.created_at,lastLogin:M.last_login_at||void 0,organizationId:M.organization_id}));a(z)}catch(I){console.error("Failed to load users:",I)}};j.useEffect(()=>{e&&w("users.view")&&l&&$()},[e?.id,l]);const T={currentUser:e,users:n,roles:iK,isLoading:i,login:x,logout:g,switchUser:b,hasPermission:w,hasAnyPermission:N,hasAllPermissions:C,canAccessRoute:S,isRole:A,createUser:k,updateUser:E,deleteUser:O,refreshUsers:$};return r.jsx(oK.Provider,{value:T,children:t})},no=()=>{const t=j.useContext(oK);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function kpe({currentPage:t,onNavigate:e=()=>{},isMobileOpen:s=!1,onMobileClose:n}){const{hasPermission:a,isRole:i,logout:o}=no();let l=[{id:"dashboard",label:"Dashboard",icon:BY,permission:"dashboard.view"},{id:"bookings",label:"Bookings",icon:qs,permission:"bookings.view"},{id:"games",label:"Events / Rooms",icon:bm,permission:"games.view"},{id:"venues",label:"Venues",icon:Na,permission:"venues.view"},{id:"widgets",label:"Booking Widgets",icon:ic,permission:"widgets.view"},{id:"customers",label:"Customers / Guests",icon:Wue,permission:"customers.view"},{id:"inbox",label:"Inbox",icon:FY,permission:"dashboard.view"},{id:"campaigns",label:"Campaigns",icon:zY,permission:"campaigns.view"},{id:"marketing",label:"Marketing",icon:dN,permission:"marketing.view"},{id:"aiagents",label:"AI Agents",icon:M1,permission:"ai-agents.view"},{id:"staff",label:"Staff",icon:Xr,permission:"staff.view"},{id:"reports",label:"Reports",icon:Pu,permission:"reports.view"},{id:"media",label:"Media / Photos",icon:Bc,permission:"media.view"},{id:"waivers",label:"Waivers",icon:Jn,permission:"waivers.view"},{id:"payment-history",label:"Payments & History",icon:rn,permission:"payments.view"},{id:"settings",label:"Settings",icon:ul,permission:"settings.view"}];i("system-admin")&&(l=[{id:"system-admin",label:"System Admin",icon:lc,permission:"system.view"},...l]),i("super-admin")&&(l.push({id:"account-settings",label:"Account Settings",icon:zs,permission:"accounts.view"}),l.push({id:"backend-dashboard",label:"Backend Dashboard",icon:cN,permission:"accounts.view"}));const c=l.filter(u=>a(u.permission)),d=u=>{e&&e(u),n?.()};return r.jsxs(r.Fragment,{children:[s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:n}),r.jsxs("div",{className:`
        w-64 bg-white dark:bg-[#0a0a0a] border-r border-gray-200 dark:border-[#1e1e1e] flex flex-col h-screen fixed left-0 top-0 z-50
        transform transition-all duration-300 ease-in-out
        lg:translate-x-0
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:[r.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-[#1e1e1e]",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 dark:bg-[#4f46e5] rounded-lg flex items-center justify-center transition-colors shadow-lg shadow-blue-500/20 dark:shadow-[#4f46e5]/20",children:r.jsx(bm,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"text-gray-900 dark:text-white transition-colors",children:"BookingTMS"})]}),r.jsx("button",{onClick:n,className:"lg:hidden p-2 hover:bg-gray-100 dark:hover:bg-[#161616] rounded-lg transition-colors",children:r.jsx(Is,{className:"w-5 h-5 text-gray-600 dark:text-[#737373]"})})]})}),r.jsx("nav",{className:"flex-1 p-3 sm:p-4 space-y-1 overflow-y-auto",children:c.map(u=>{const h=u.icon,m=t===u.id;return r.jsxs("button",{onClick:()=>d(u.id),className:`
                  w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all
                  ${m?"bg-blue-600 dark:bg-[#4f46e5] text-white shadow-lg shadow-blue-500/20 dark:shadow-[#4f46e5]/20":"text-gray-600 dark:text-[#737373] hover:bg-gray-100 dark:hover:bg-[#161616] hover:text-gray-900 dark:hover:text-white"}
                `,children:[r.jsx(h,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:u.label})]},u.id)})}),r.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-[#1e1e1e]",children:r.jsxs(W,{variant:"ghost",className:"w-full justify-start text-gray-600 dark:text-[#737373] hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-[#161616] h-11",onClick:async()=>{try{await o(),e("login")}catch(u){console.error("Logout failed:",u)}},children:[r.jsx(UY,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})]})}const de=j.forwardRef(({className:t,type:e,...s},n)=>r.jsx("input",{type:e,ref:n,"data-slot":"input",className:Ar("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s}));de.displayName="Input";function ur(t,e,{checkForDefaultPrevented:s=!0}={}){return function(a){if(t?.(a),s===!1||!a.defaultPrevented)return e?.(a)}}function _pe(t,e){const s=j.createContext(e),n=i=>{const{children:o,...l}=i,c=j.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=t+"Provider";function a(i){const o=j.useContext(s);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function fl(t,e=[]){let s=[];function n(i,o){const l=j.createContext(o),c=s.length;s=[...s,o];const d=h=>{const{scope:m,children:f,...v}=h,x=m?.[t]?.[c]||l,g=j.useMemo(()=>v,Object.values(v));return r.jsx(x.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[t]?.[c]||l,v=j.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>j.createContext(o));return function(l){const c=l?.[t]||i;return j.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,Ape(a,...e)]}function Ape(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var Ai=globalThis?.document?j.useLayoutEffect:()=>{},Epe=K4[" useInsertionEffect ".trim().toString()]||Ai;function qc({prop:t,defaultProp:e,onChange:s=()=>{},caller:n}){const[a,i,o]=Ppe({defaultProp:e,onChange:s}),l=t!==void 0,c=l?t:a;{const u=j.useRef(t!==void 0);j.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=j.useCallback(u=>{if(l){const h=Tpe(u)?u(t):u;h!==t&&o.current?.(h)}else i(u)},[l,t,i,o]);return[c,d]}function Ppe({defaultProp:t,onChange:e}){const[s,n]=j.useState(t),a=j.useRef(s),i=j.useRef(e);return Epe(()=>{i.current=e},[e]),j.useEffect(()=>{a.current!==s&&(i.current?.(s),a.current=s)},[s,a]),[s,n,i]}function Tpe(t){return typeof t=="function"}function Ope(t){const e=Ipe(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(Dpe);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function Ipe(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=Mpe(a),l=Rpe(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $pe=Symbol("radix.slottable");function Dpe(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$pe}function Rpe(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function Mpe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Lpe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jr=Lpe.reduce((t,e)=>{const s=Ope(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function lK(t,e){t&&zv.flushSync(()=>t.dispatchEvent(e))}function kM(t){const e=Fpe(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(Upe);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function Fpe(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=Vpe(a),l=zpe(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Bpe=Symbol("radix.slottable");function Upe(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Bpe}function zpe(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function Vpe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function fw(t){const e=t+"CollectionProvider",[s,n]=fl(e),[a,i]=s(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:g,children:b}=x,w=ce.useRef(null),N=ce.useRef(new Map).current;return r.jsx(a,{scope:g,itemMap:N,collectionRef:w,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=kM(l),d=ce.forwardRef((x,g)=>{const{scope:b,children:w}=x,N=i(l,b),C=bs(g,N.collectionRef);return r.jsx(c,{ref:C,children:w})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",m=kM(u),f=ce.forwardRef((x,g)=>{const{scope:b,children:w,...N}=x,C=ce.useRef(null),S=bs(g,C),A=i(u,b);return ce.useEffect(()=>(A.itemMap.set(C,{ref:C,...N}),()=>void A.itemMap.delete(C))),r.jsx(m,{[h]:"",ref:S,children:w})});f.displayName=u;function v(x){const g=i(t+"CollectionConsumer",x);return ce.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((A,k)=>N.indexOf(A.ref.current)-N.indexOf(k.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},v,n]}var Wpe=j.createContext(void 0);function mg(t){const e=j.useContext(Wpe);return t||e||"ltr"}function Co(t){const e=j.useRef(t);return j.useEffect(()=>{e.current=t}),j.useMemo(()=>(...s)=>e.current?.(...s),[])}function qpe(t,e=globalThis?.document){const s=Co(t);j.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var Hpe="DismissableLayer",GE="dismissableLayer.update",Gpe="dismissableLayer.pointerDownOutside",Ype="dismissableLayer.focusOutside",_M,cK=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pw=j.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=j.useContext(cK),[u,h]=j.useState(null),m=u?.ownerDocument??globalThis?.document,[,f]=j.useState({}),v=bs(e,k=>h(k)),x=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(g),w=u?x.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=w>=b,S=Qpe(k=>{const E=k.target,O=[...d.branches].some($=>$.contains(E));!C||O||(a?.(k),o?.(k),k.defaultPrevented||l?.())},m),A=Zpe(k=>{const E=k.target;[...d.branches].some($=>$.contains(E))||(i?.(k),o?.(k),k.defaultPrevented||l?.())},m);return qpe(k=>{w===d.layers.size-1&&(n?.(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},m),j.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(_M=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),AM(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=_M)}},[u,m,s,d]),j.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),AM())},[u,d]),j.useEffect(()=>{const k=()=>f({});return document.addEventListener(GE,k),()=>document.removeEventListener(GE,k)},[]),r.jsx(Jr.div,{...c,ref:v,style:{pointerEvents:N?C?"auto":"none":void 0,...t.style},onFocusCapture:ur(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ur(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ur(t.onPointerDownCapture,S.onPointerDownCapture)})});pw.displayName=Hpe;var Kpe="DismissableLayerBranch",Xpe=j.forwardRef((t,e)=>{const s=j.useContext(cK),n=j.useRef(null),a=bs(e,n);return j.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(Jr.div,{...t,ref:a})});Xpe.displayName=Kpe;function Qpe(t,e=globalThis?.document){const s=Co(t),n=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){dK(Gpe,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=c,e.addEventListener("click",a.current,{once:!0})):c()}else e.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function Zpe(t,e=globalThis?.document){const s=Co(t),n=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!n.current&&dK(Ype,s,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function AM(){const t=new CustomEvent(GE);document.dispatchEvent(t)}function dK(t,e,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&a.addEventListener(t,e,{once:!0}),n?lK(a,i):a.dispatchEvent(i)}var US=0;function e5(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??EM()),document.body.insertAdjacentElement("beforeend",t[1]??EM()),US++,()=>{US===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),US--}},[])}function EM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var zS="focusScope.autoFocusOnMount",VS="focusScope.autoFocusOnUnmount",PM={bubbles:!1,cancelable:!0},Jpe="FocusScope",xw=j.forwardRef((t,e)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,c]=j.useState(null),d=Co(a),u=Co(i),h=j.useRef(null),m=bs(e,x=>c(x)),f=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let x=function(N){if(f.paused||!l)return;const C=N.target;l.contains(C)?h.current=C:_f(h.current,{select:!0})},g=function(N){if(f.paused||!l)return;const C=N.relatedTarget;C!==null&&(l.contains(C)||_f(h.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const S of N)S.removedNodes.length>0&&_f(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",g);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",g),w.disconnect()}}},[n,l,f.paused]),j.useEffect(()=>{if(l){OM.add(f);const x=document.activeElement;if(!l.contains(x)){const b=new CustomEvent(zS,PM);l.addEventListener(zS,d),l.dispatchEvent(b),b.defaultPrevented||(exe(axe(uK(l)),{select:!0}),document.activeElement===x&&_f(l))}return()=>{l.removeEventListener(zS,d),setTimeout(()=>{const b=new CustomEvent(VS,PM);l.addEventListener(VS,u),l.dispatchEvent(b),b.defaultPrevented||_f(x??document.body,{select:!0}),l.removeEventListener(VS,u),OM.remove(f)},0)}}},[l,d,u,f]);const v=j.useCallback(x=>{if(!s&&!n||f.paused)return;const g=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(g&&b){const w=x.currentTarget,[N,C]=txe(w);N&&C?!x.shiftKey&&b===C?(x.preventDefault(),s&&_f(N,{select:!0})):x.shiftKey&&b===N&&(x.preventDefault(),s&&_f(C,{select:!0})):b===w&&x.preventDefault()}},[s,n,f.paused]);return r.jsx(Jr.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});xw.displayName=Jpe;function exe(t,{select:e=!1}={}){const s=document.activeElement;for(const n of t)if(_f(n,{select:e}),document.activeElement!==s)return}function txe(t){const e=uK(t),s=TM(e,t),n=TM(e.reverse(),t);return[s,n]}function uK(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function TM(t,e){for(const s of t)if(!rxe(s,{upTo:e}))return s}function rxe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function sxe(t){return t instanceof HTMLInputElement&&"select"in t}function _f(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&sxe(t)&&e&&t.select()}}var OM=nxe();function nxe(){let t=[];return{add(e){const s=t[0];e!==s&&s?.pause(),t=IM(t,e),t.unshift(e)},remove(e){t=IM(t,e),t[0]?.resume()}}}function IM(t,e){const s=[...t],n=s.indexOf(e);return n!==-1&&s.splice(n,1),s}function axe(t){return t.filter(e=>e.tagName!=="A")}var ixe=K4[" useId ".trim().toString()]||(()=>{}),oxe=0;function Uc(t){const[e,s]=j.useState(ixe());return Ai(()=>{s(n=>n??String(oxe++))},[t]),t||(e?`radix-${e}`:"")}const lxe=["top","right","bottom","left"],Qf=Math.min,Ic=Math.max,mN=Math.round,I2=Math.floor,yh=t=>({x:t,y:t}),cxe={left:"right",right:"left",bottom:"top",top:"bottom"},dxe={start:"end",end:"start"};function YE(t,e,s){return Ic(t,Qf(e,s))}function Em(t,e){return typeof t=="function"?t(e):t}function Pm(t){return t.split("-")[0]}function Gv(t){return t.split("-")[1]}function iI(t){return t==="x"?"y":"x"}function oI(t){return t==="y"?"height":"width"}const uxe=new Set(["top","bottom"]);function dh(t){return uxe.has(Pm(t))?"y":"x"}function lI(t){return iI(dh(t))}function hxe(t,e,s){s===void 0&&(s=!1);const n=Gv(t),a=lI(t),i=oI(a);let o=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=fN(o)),[o,fN(o)]}function mxe(t){const e=fN(t);return[KE(t),e,KE(e)]}function KE(t){return t.replace(/start|end/g,e=>dxe[e])}const $M=["left","right"],DM=["right","left"],fxe=["top","bottom"],pxe=["bottom","top"];function xxe(t,e,s){switch(t){case"top":case"bottom":return s?e?DM:$M:e?$M:DM;case"left":case"right":return e?fxe:pxe;default:return[]}}function gxe(t,e,s,n){const a=Gv(t);let i=xxe(Pm(t),s==="start",n);return a&&(i=i.map(o=>o+"-"+a),e&&(i=i.concat(i.map(KE)))),i}function fN(t){return t.replace(/left|right|bottom|top/g,e=>cxe[e])}function vxe(t){return{top:0,right:0,bottom:0,left:0,...t}}function hK(t){return typeof t!="number"?vxe(t):{top:t,right:t,bottom:t,left:t}}function pN(t){const{x:e,y:s,width:n,height:a}=t;return{width:n,height:a,top:s,left:e,right:e+n,bottom:s+a,x:e,y:s}}function RM(t,e,s){let{reference:n,floating:a}=t;const i=dh(e),o=lI(e),l=oI(o),c=Pm(e),d=i==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-a.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Gv(e)){case"start":f[o]-=m*(s&&d?-1:1);break;case"end":f[o]+=m*(s&&d?-1:1);break}return f}const yxe=async(t,e,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=s,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:a}),{x:u,y:h}=RM(d,n,c),m=n,f={},v=0;for(let x=0;x<l.length;x++){const{name:g,fn:b}=l[x],{x:w,y:N,data:C,reset:S}=await b({x:u,y:h,initialPlacement:n,placement:m,strategy:a,middlewareData:f,rects:d,platform:o,elements:{reference:t,floating:e}});u=w??u,h=N??h,f={...f,[g]:{...f[g],...C}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:a}):S.rects),{x:u,y:h}=RM(d,m,c)),x=-1)}return{x:u,y:h,placement:m,strategy:a,middlewareData:f}};async function cb(t,e){var s;e===void 0&&(e={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=Em(e,t),v=hK(f),g=l[m?h==="floating"?"reference":"floating":h],b=pN(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(g)))==null||s?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},S=pN(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(b.top-S.top+v.top)/C.y,bottom:(S.bottom-b.bottom+v.bottom)/C.y,left:(b.left-S.left+v.left)/C.x,right:(S.right-b.right+v.right)/C.x}}const bxe=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=Em(t,e)||{};if(d==null)return{};const h=hK(u),m={x:s,y:n},f=lI(a),v=oI(f),x=await o.getDimensions(d),g=f==="y",b=g?"top":"left",w=g?"bottom":"right",N=g?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[f]-m[f]-i.floating[v],S=m[f]-i.reference[f],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let k=A?A[N]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=l.floating[N]||i.floating[v]);const E=C/2-S/2,O=k/2-x[v]/2-1,$=Qf(h[b],O),T=Qf(h[w],O),I=$,L=k-x[v]-T,z=k/2-x[v]/2+E,M=YE(I,z,L),V=!c.arrow&&Gv(a)!=null&&z!==M&&i.reference[v]/2-(z<I?$:T)-x[v]/2<0,B=V?z<I?z-I:z-L:0;return{[f]:m[f]+B,data:{[f]:M,centerOffset:z-M-B,...V&&{alignmentOffset:B}},reset:V}}}),wxe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...g}=Em(t,e);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const b=Pm(a),w=dh(l),N=Pm(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(N||!x?[fN(l)]:mxe(l)),A=v!=="none";!m&&A&&S.push(...gxe(l,x,v,C));const k=[l,...S],E=await cb(e,g),O=[];let $=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&O.push(E[b]),h){const z=hxe(a,o,C);O.push(E[z[0]],E[z[1]])}if($=[...$,{placement:a,overflows:O}],!O.every(z=>z<=0)){var T,I;const z=(((T=i.flip)==null?void 0:T.index)||0)+1,M=k[z];if(M&&(!(h==="alignment"?w!==dh(M):!1)||$.every(F=>dh(F.placement)===w?F.overflows[0]>0:!0)))return{data:{index:z,overflows:$},reset:{placement:M}};let V=(I=$.filter(B=>B.overflows[0]<=0).sort((B,F)=>B.overflows[1]-F.overflows[1])[0])==null?void 0:I.placement;if(!V)switch(f){case"bestFit":{var L;const B=(L=$.filter(F=>{if(A){const J=dh(F.placement);return J===w||J==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(J=>J>0).reduce((J,ee)=>J+ee,0)]).sort((F,J)=>F[1]-J[1])[0])==null?void 0:L[0];B&&(V=B);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function MM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function LM(t){return lxe.some(e=>t[e]>=0)}const jxe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:n="referenceHidden",...a}=Em(t,e);switch(n){case"referenceHidden":{const i=await cb(e,{...a,elementContext:"reference"}),o=MM(i,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:LM(o)}}}case"escaped":{const i=await cb(e,{...a,altBoundary:!0}),o=MM(i,s.floating);return{data:{escapedOffsets:o,escaped:LM(o)}}}default:return{}}}}},mK=new Set(["left","top"]);async function Nxe(t,e){const{placement:s,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Pm(s),l=Gv(s),c=dh(s)==="y",d=mK.has(o)?-1:1,u=i&&c?-1:1,h=Em(e,t);let{mainAxis:m,crossAxis:f,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(f=l==="end"?v*-1:v),c?{x:f*u,y:m*d}:{x:m*d,y:f*u}}const Sxe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,n;const{x:a,y:i,placement:o,middlewareData:l}=e,c=await Nxe(e,t);return o===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},Cxe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:n,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:b,y:w}=g;return{x:b,y:w}}},...c}=Em(t,e),d={x:s,y:n},u=await cb(e,c),h=dh(Pm(a)),m=iI(h);let f=d[m],v=d[h];if(i){const g=m==="y"?"top":"left",b=m==="y"?"bottom":"right",w=f+u[g],N=f-u[b];f=YE(w,f,N)}if(o){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",w=v+u[g],N=v-u[b];v=YE(w,v,N)}const x=l.fn({...e,[m]:f,[h]:v});return{...x,data:{x:x.x-s,y:x.y-n,enabled:{[m]:i,[h]:o}}}}}},kxe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:n,placement:a,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Em(t,e),u={x:s,y:n},h=dh(a),m=iI(h);let f=u[m],v=u[h];const x=Em(l,e),g=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=m==="y"?"height":"width",C=i.reference[m]-i.floating[N]+g.mainAxis,S=i.reference[m]+i.reference[N]-g.mainAxis;f<C?f=C:f>S&&(f=S)}if(d){var b,w;const N=m==="y"?"width":"height",C=mK.has(Pm(a)),S=i.reference[h]-i.floating[N]+(C&&((b=o.offset)==null?void 0:b[h])||0)+(C?0:g.crossAxis),A=i.reference[h]+i.reference[N]+(C?0:((w=o.offset)==null?void 0:w[h])||0)-(C?g.crossAxis:0);v<S?v=S:v>A&&(v=A)}return{[m]:f,[h]:v}}}},_xe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,n;const{placement:a,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...d}=Em(t,e),u=await cb(e,d),h=Pm(a),m=Gv(a),f=dh(a)==="y",{width:v,height:x}=i.floating;let g,b;h==="top"||h==="bottom"?(g=h,b=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,g=m==="end"?"top":"bottom");const w=x-u.top-u.bottom,N=v-u.left-u.right,C=Qf(x-u[g],w),S=Qf(v-u[b],N),A=!e.middlewareData.shift;let k=C,E=S;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(E=N),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=w),A&&!m){const $=Ic(u.left,0),T=Ic(u.right,0),I=Ic(u.top,0),L=Ic(u.bottom,0);f?E=v-2*($!==0||T!==0?$+T:Ic(u.left,u.right)):k=x-2*(I!==0||L!==0?I+L:Ic(u.top,u.bottom))}await c({...e,availableWidth:E,availableHeight:k});const O=await o.getDimensions(l.floating);return v!==O.width||x!==O.height?{reset:{rects:!0}}:{}}}};function t5(){return typeof window<"u"}function Yv(t){return fK(t)?(t.nodeName||"").toLowerCase():"#document"}function zc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ih(t){var e;return(e=(fK(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fK(t){return t5()?t instanceof Node||t instanceof zc(t).Node:!1}function Tu(t){return t5()?t instanceof Element||t instanceof zc(t).Element:!1}function kh(t){return t5()?t instanceof HTMLElement||t instanceof zc(t).HTMLElement:!1}function FM(t){return!t5()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zc(t).ShadowRoot}const Axe=new Set(["inline","contents"]);function gw(t){const{overflow:e,overflowX:s,overflowY:n,display:a}=Ou(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+s)&&!Axe.has(a)}const Exe=new Set(["table","td","th"]);function Pxe(t){return Exe.has(Yv(t))}const Txe=[":popover-open",":modal"];function r5(t){return Txe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Oxe=["transform","translate","scale","rotate","perspective"],Ixe=["transform","translate","scale","rotate","perspective","filter"],$xe=["paint","layout","strict","content"];function cI(t){const e=dI(),s=Tu(t)?Ou(t):t;return Oxe.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||Ixe.some(n=>(s.willChange||"").includes(n))||$xe.some(n=>(s.contain||"").includes(n))}function Dxe(t){let e=Zf(t);for(;kh(e)&&!av(e);){if(cI(e))return e;if(r5(e))return null;e=Zf(e)}return null}function dI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Rxe=new Set(["html","body","#document"]);function av(t){return Rxe.has(Yv(t))}function Ou(t){return zc(t).getComputedStyle(t)}function s5(t){return Tu(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Zf(t){if(Yv(t)==="html")return t;const e=t.assignedSlot||t.parentNode||FM(t)&&t.host||Ih(t);return FM(e)?e.host:e}function pK(t){const e=Zf(t);return av(e)?t.ownerDocument?t.ownerDocument.body:t.body:kh(e)&&gw(e)?e:pK(e)}function db(t,e,s){var n;e===void 0&&(e=[]),s===void 0&&(s=!0);const a=pK(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),o=zc(a);if(i){const l=XE(o);return e.concat(o,o.visualViewport||[],gw(a)?a:[],l&&s?db(l):[])}return e.concat(a,db(a,[],s))}function XE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function xK(t){const e=Ou(t);let s=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=kh(t),i=a?t.offsetWidth:s,o=a?t.offsetHeight:n,l=mN(s)!==i||mN(n)!==o;return l&&(s=i,n=o),{width:s,height:n,$:l}}function uI(t){return Tu(t)?t:t.contextElement}function W0(t){const e=uI(t);if(!kh(e))return yh(1);const s=e.getBoundingClientRect(),{width:n,height:a,$:i}=xK(e);let o=(i?mN(s.width):s.width)/n,l=(i?mN(s.height):s.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Mxe=yh(0);function gK(t){const e=zc(t);return!dI()||!e.visualViewport?Mxe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Lxe(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==zc(t)?!1:e}function Kx(t,e,s,n){e===void 0&&(e=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),i=uI(t);let o=yh(1);e&&(n?Tu(n)&&(o=W0(n)):o=W0(t));const l=Lxe(i,s,n)?gK(i):yh(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const m=zc(i),f=n&&Tu(n)?zc(n):n;let v=m,x=XE(v);for(;x&&n&&f!==v;){const g=W0(x),b=x.getBoundingClientRect(),w=Ou(x),N=b.left+(x.clientLeft+parseFloat(w.paddingLeft))*g.x,C=b.top+(x.clientTop+parseFloat(w.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,h*=g.y,c+=N,d+=C,v=zc(x),x=XE(v)}}return pN({width:u,height:h,x:c,y:d})}function n5(t,e){const s=s5(t).scrollLeft;return e?e.left+s:Kx(Ih(t)).left+s}function vK(t,e){const s=t.getBoundingClientRect(),n=s.left+e.scrollLeft-n5(t,s),a=s.top+e.scrollTop;return{x:n,y:a}}function Fxe(t){let{elements:e,rect:s,offsetParent:n,strategy:a}=t;const i=a==="fixed",o=Ih(n),l=e?r5(e.floating):!1;if(n===o||l&&i)return s;let c={scrollLeft:0,scrollTop:0},d=yh(1);const u=yh(0),h=kh(n);if((h||!h&&!i)&&((Yv(n)!=="body"||gw(o))&&(c=s5(n)),kh(n))){const f=Kx(n);d=W0(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const m=o&&!h&&!i?vK(o,c):yh(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:s.y*d.y-c.scrollTop*d.y+u.y+m.y}}function Bxe(t){return Array.from(t.getClientRects())}function Uxe(t){const e=Ih(t),s=s5(t),n=t.ownerDocument.body,a=Ic(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Ic(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-s.scrollLeft+n5(t);const l=-s.scrollTop;return Ou(n).direction==="rtl"&&(o+=Ic(e.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const BM=25;function zxe(t,e){const s=zc(t),n=Ih(t),a=s.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=dI();(!u||u&&e==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const d=n5(n);if(d<=0){const u=n.ownerDocument,h=u.body,m=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(n.clientWidth-h.clientWidth-f);v<=BM&&(i-=v)}else d<=BM&&(i+=d);return{width:i,height:o,x:l,y:c}}const Vxe=new Set(["absolute","fixed"]);function Wxe(t,e){const s=Kx(t,!0,e==="fixed"),n=s.top+t.clientTop,a=s.left+t.clientLeft,i=kh(t)?W0(t):yh(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function UM(t,e,s){let n;if(e==="viewport")n=zxe(t,s);else if(e==="document")n=Uxe(Ih(t));else if(Tu(e))n=Wxe(e,s);else{const a=gK(t);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return pN(n)}function yK(t,e){const s=Zf(t);return s===e||!Tu(s)||av(s)?!1:Ou(s).position==="fixed"||yK(s,e)}function qxe(t,e){const s=e.get(t);if(s)return s;let n=db(t,[],!1).filter(l=>Tu(l)&&Yv(l)!=="body"),a=null;const i=Ou(t).position==="fixed";let o=i?Zf(t):t;for(;Tu(o)&&!av(o);){const l=Ou(o),c=cI(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&Vxe.has(a.position)||gw(o)&&!c&&yK(t,o))?n=n.filter(u=>u!==o):a=l,o=Zf(o)}return e.set(t,n),n}function Hxe(t){let{element:e,boundary:s,rootBoundary:n,strategy:a}=t;const o=[...s==="clippingAncestors"?r5(e)?[]:qxe(e,this._c):[].concat(s),n],l=o[0],c=o.reduce((d,u)=>{const h=UM(e,u,a);return d.top=Ic(h.top,d.top),d.right=Qf(h.right,d.right),d.bottom=Qf(h.bottom,d.bottom),d.left=Ic(h.left,d.left),d},UM(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Gxe(t){const{width:e,height:s}=xK(t);return{width:e,height:s}}function Yxe(t,e,s){const n=kh(e),a=Ih(e),i=s==="fixed",o=Kx(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=yh(0);function d(){c.x=n5(a)}if(n||!n&&!i)if((Yv(e)!=="body"||gw(a))&&(l=s5(e)),n){const f=Kx(e,!0,i,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?vK(a,l):yh(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function WS(t){return Ou(t).position==="static"}function zM(t,e){if(!kh(t)||Ou(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return Ih(t)===s&&(s=s.ownerDocument.body),s}function bK(t,e){const s=zc(t);if(r5(t))return s;if(!kh(t)){let a=Zf(t);for(;a&&!av(a);){if(Tu(a)&&!WS(a))return a;a=Zf(a)}return s}let n=zM(t,e);for(;n&&Pxe(n)&&WS(n);)n=zM(n,e);return n&&av(n)&&WS(n)&&!cI(n)?s:n||Dxe(t)||s}const Kxe=async function(t){const e=this.getOffsetParent||bK,s=this.getDimensions,n=await s(t.floating);return{reference:Yxe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Xxe(t){return Ou(t).direction==="rtl"}const Qxe={convertOffsetParentRelativeRectToViewportRelativeRect:Fxe,getDocumentElement:Ih,getClippingRect:Hxe,getOffsetParent:bK,getElementRects:Kxe,getClientRects:Bxe,getDimensions:Gxe,getScale:W0,isElement:Tu,isRTL:Xxe};function wK(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Zxe(t,e){let s=null,n;const a=Ih(t);function i(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:h,width:m,height:f}=d;if(l||e(),!m||!f)return;const v=I2(h),x=I2(a.clientWidth-(u+m)),g=I2(a.clientHeight-(h+f)),b=I2(u),N={rootMargin:-v+"px "+-x+"px "+-g+"px "+-b+"px",threshold:Ic(0,Qf(1,c))||1};let C=!0;function S(A){const k=A[0].intersectionRatio;if(k!==c){if(!C)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!wK(d,t.getBoundingClientRect())&&o(),C=!1}try{s=new IntersectionObserver(S,{...N,root:a.ownerDocument})}catch{s=new IntersectionObserver(S,N)}s.observe(t)}return o(!0),i}function Jxe(t,e,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=uI(t),u=a||i?[...d?db(d):[],...db(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",s,{passive:!0}),i&&b.addEventListener("resize",s)});const h=d&&l?Zxe(d,s):null;let m=-1,f=null;o&&(f=new ResizeObserver(b=>{let[w]=b;w&&w.target===d&&f&&(f.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=f)==null||N.observe(e)})),s()}),d&&!c&&f.observe(d),f.observe(e));let v,x=c?Kx(t):null;c&&g();function g(){const b=Kx(t);x&&!wK(x,b)&&s(),x=b,v=requestAnimationFrame(g)}return s(),()=>{var b;u.forEach(w=>{a&&w.removeEventListener("scroll",s),i&&w.removeEventListener("resize",s)}),h?.(),(b=f)==null||b.disconnect(),f=null,c&&cancelAnimationFrame(v)}}const ege=Sxe,tge=Cxe,rge=wxe,sge=_xe,nge=jxe,VM=bxe,age=kxe,ige=(t,e,s)=>{const n=new Map,a={platform:Qxe,...s},i={...a.platform,_c:n};return yxe(t,e,{...a,platform:i})};var oge=typeof document<"u",lge=function(){},Fj=oge?j.useLayoutEffect:lge;function xN(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,n,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(n=s;n--!==0;)if(!xN(t[n],e[n]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(e).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(e,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!xN(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function jK(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function WM(t,e){const s=jK(t);return Math.round(e*s)/s}function qS(t){const e=j.useRef(t);return Fj(()=>{e.current=t}),e}function cge(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=j.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[m,f]=j.useState(n);xN(m,n)||f(n);const[v,x]=j.useState(null),[g,b]=j.useState(null),w=j.useCallback(F=>{F!==A.current&&(A.current=F,x(F))},[]),N=j.useCallback(F=>{F!==k.current&&(k.current=F,b(F))},[]),C=i||v,S=o||g,A=j.useRef(null),k=j.useRef(null),E=j.useRef(u),O=c!=null,$=qS(c),T=qS(a),I=qS(d),L=j.useCallback(()=>{if(!A.current||!k.current)return;const F={placement:e,strategy:s,middleware:m};T.current&&(F.platform=T.current),ige(A.current,k.current,F).then(J=>{const ee={...J,isPositioned:I.current!==!1};z.current&&!xN(E.current,ee)&&(E.current=ee,zv.flushSync(()=>{h(ee)}))})},[m,e,s,T,I]);Fj(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[d]);const z=j.useRef(!1);Fj(()=>(z.current=!0,()=>{z.current=!1}),[]),Fj(()=>{if(C&&(A.current=C),S&&(k.current=S),C&&S){if($.current)return $.current(C,S,L);L()}},[C,S,L,$,O]);const M=j.useMemo(()=>({reference:A,floating:k,setReference:w,setFloating:N}),[w,N]),V=j.useMemo(()=>({reference:C,floating:S}),[C,S]),B=j.useMemo(()=>{const F={position:s,left:0,top:0};if(!V.floating)return F;const J=WM(V.floating,u.x),ee=WM(V.floating,u.y);return l?{...F,transform:"translate("+J+"px, "+ee+"px)",...jK(V.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:J,top:ee}},[s,l,V.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:L,refs:M,elements:V,floatingStyles:B}),[u,L,M,V,B])}const dge=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:a}=typeof t=="function"?t(s):t;return n&&e(n)?n.current!=null?VM({element:n.current,padding:a}).fn(s):{}:n?VM({element:n,padding:a}).fn(s):{}}}},uge=(t,e)=>({...ege(t),options:[t,e]}),hge=(t,e)=>({...tge(t),options:[t,e]}),mge=(t,e)=>({...age(t),options:[t,e]}),fge=(t,e)=>({...rge(t),options:[t,e]}),pge=(t,e)=>({...sge(t),options:[t,e]}),xge=(t,e)=>({...nge(t),options:[t,e]}),gge=(t,e)=>({...dge(t),options:[t,e]});var vge="Arrow",NK=j.forwardRef((t,e)=>{const{children:s,width:n=10,height:a=5,...i}=t;return r.jsx(Jr.svg,{...i,ref:e,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});NK.displayName=vge;var yge=NK;function a5(t){const[e,s]=j.useState(void 0);return Ai(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;s({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),e}var hI="Popper",[SK,Kv]=fl(hI),[bge,CK]=SK(hI),kK=t=>{const{__scopePopper:e,children:s}=t,[n,a]=j.useState(null);return r.jsx(bge,{scope:e,anchor:n,onAnchorChange:a,children:s})};kK.displayName=hI;var _K="PopperAnchor",AK=j.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:n,...a}=t,i=CK(_K,s),o=j.useRef(null),l=bs(e,o),c=j.useRef(null);return j.useEffect(()=>{const d=c.current;c.current=n?.current||o.current,d!==c.current&&i.onAnchorChange(c.current)}),n?null:r.jsx(Jr.div,{...a,ref:l})});AK.displayName=_K;var mI="PopperContent",[wge,jge]=SK(mI),EK=j.forwardRef((t,e)=>{const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:v,...x}=t,g=CK(mI,s),[b,w]=j.useState(null),N=bs(e,ie=>w(ie)),[C,S]=j.useState(null),A=a5(C),k=A?.width??0,E=A?.height??0,O=n+(i!=="center"?"-"+i:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(d)?d:[d],I=T.length>0,L={padding:$,boundary:T.filter(Sge),altBoundary:I},{refs:z,floatingStyles:M,placement:V,isPositioned:B,middlewareData:F}=cge({strategy:"fixed",placement:O,whileElementsMounted:(...ie)=>Jxe(...ie,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[uge({mainAxis:a+E,alignmentAxis:o}),c&&hge({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?mge():void 0,...L}),c&&fge({...L}),pge({...L,apply:({elements:ie,rects:be,availableWidth:ue,availableHeight:oe})=>{const{width:pe,height:ye}=be.reference,$e=ie.floating.style;$e.setProperty("--radix-popper-available-width",`${ue}px`),$e.setProperty("--radix-popper-available-height",`${oe}px`),$e.setProperty("--radix-popper-anchor-width",`${pe}px`),$e.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),C&&gge({element:C,padding:l}),Cge({arrowWidth:k,arrowHeight:E}),m&&xge({strategy:"referenceHidden",...L})]}),[J,ee]=OK(V),q=Co(v);Ai(()=>{B&&q?.()},[B,q]);const U=F.arrow?.x,Z=F.arrow?.y,K=F.arrow?.centerOffset!==0,[se,ne]=j.useState();return Ai(()=>{b&&ne(window.getComputedStyle(b).zIndex)},[b]),r.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:B?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:r.jsx(wge,{scope:s,placedSide:J,onArrowChange:S,arrowX:U,arrowY:Z,shouldHideArrow:K,children:r.jsx(Jr.div,{"data-side":J,"data-align":ee,...x,ref:N,style:{...x.style,animation:B?void 0:"none"}})})})});EK.displayName=mI;var PK="PopperArrow",Nge={top:"bottom",right:"left",bottom:"top",left:"right"},TK=j.forwardRef(function(e,s){const{__scopePopper:n,...a}=e,i=jge(PK,n),o=Nge[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(yge,{...a,ref:s,style:{...a.style,display:"block"}})})});TK.displayName=PK;function Sge(t){return t!==null}var Cge=t=>({name:"transformOrigin",options:t,fn(e){const{placement:s,rects:n,middlewareData:a}=e,o=a.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,u]=OK(s),h={start:"0%",center:"50%",end:"100%"}[u],m=(a.arrow?.x??0)+l/2,f=(a.arrow?.y??0)+c/2;let v="",x="";return d==="bottom"?(v=o?h:`${m}px`,x=`${-c}px`):d==="top"?(v=o?h:`${m}px`,x=`${n.floating.height+c}px`):d==="right"?(v=`${-c}px`,x=o?h:`${f}px`):d==="left"&&(v=`${n.floating.width+c}px`,x=o?h:`${f}px`),{data:{x:v,y:x}}}});function OK(t){const[e,s="center"]=t.split("-");return[e,s]}var fI=kK,i5=AK,pI=EK,xI=TK,kge="Portal",vw=j.forwardRef((t,e)=>{const{container:s,...n}=t,[a,i]=j.useState(!1);Ai(()=>i(!0),[]);const o=s||a&&globalThis?.document?.body;return o?XO.createPortal(r.jsx(Jr.div,{...n,ref:e}),o):null});vw.displayName=kge;function _ge(t,e){return j.useReducer((s,n)=>e[s][n]??s,t)}var Uo=t=>{const{present:e,children:s}=t,n=Age(e),a=typeof s=="function"?s({present:n.isPresent}):j.Children.only(s),i=bs(n.ref,Ege(a));return typeof s=="function"||n.isPresent?j.cloneElement(a,{ref:i}):null};Uo.displayName="Presence";function Age(t){const[e,s]=j.useState(),n=j.useRef(null),a=j.useRef(t),i=j.useRef("none"),o=t?"mounted":"unmounted",[l,c]=_ge(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=$2(n.current);i.current=l==="mounted"?d:"none"},[l]),Ai(()=>{const d=n.current,u=a.current;if(u!==t){const m=i.current,f=$2(d);t?c("MOUNT"):f==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Ai(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,h=f=>{const x=$2(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&x&&(c("ANIMATION_END"),!a.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},m=f=>{f.target===e&&(i.current=$2(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function $2(t){return t?.animationName||"none"}function Ege(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var HS="rovingFocusGroup.onEntryFocus",Pge={bubbles:!1,cancelable:!0},yw="RovingFocusGroup",[QE,IK,Tge]=fw(yw),[Oge,o5]=fl(yw,[Tge]),[Ige,$ge]=Oge(yw),$K=j.forwardRef((t,e)=>r.jsx(QE.Provider,{scope:t.__scopeRovingFocusGroup,children:r.jsx(QE.Slot,{scope:t.__scopeRovingFocusGroup,children:r.jsx(Dge,{...t,ref:e})})}));$K.displayName=yw;var Dge=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,m=j.useRef(null),f=bs(e,m),v=mg(i),[x,g]=qc({prop:o,defaultProp:l??null,onChange:c,caller:yw}),[b,w]=j.useState(!1),N=Co(d),C=IK(s),S=j.useRef(!1),[A,k]=j.useState(0);return j.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(HS,N),()=>E.removeEventListener(HS,N)},[N]),r.jsx(Ige,{scope:s,orientation:n,dir:v,loop:a,currentTabStopId:x,onItemFocus:j.useCallback(E=>g(E),[g]),onItemShiftTab:j.useCallback(()=>w(!0),[]),onFocusableItemAdd:j.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:j.useCallback(()=>k(E=>E-1),[]),children:r.jsx(Jr.div,{tabIndex:b||A===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:ur(t.onMouseDown,()=>{S.current=!0}),onFocus:ur(t.onFocus,E=>{const O=!S.current;if(E.target===E.currentTarget&&O&&!b){const $=new CustomEvent(HS,Pge);if(E.currentTarget.dispatchEvent($),!$.defaultPrevented){const T=C().filter(V=>V.focusable),I=T.find(V=>V.active),L=T.find(V=>V.id===x),M=[I,L,...T].filter(Boolean).map(V=>V.ref.current);MK(M,u)}}S.current=!1}),onBlur:ur(t.onBlur,()=>w(!1))})})}),DK="RovingFocusGroupItem",RK=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=t,c=Uc(),d=i||c,u=$ge(DK,s),h=u.currentTabStopId===d,m=IK(s),{onFocusableItemAdd:f,onFocusableItemRemove:v,currentTabStopId:x}=u;return j.useEffect(()=>{if(n)return f(),()=>v()},[n,f,v]),r.jsx(QE.ItemSlot,{scope:s,id:d,focusable:n,active:a,children:r.jsx(Jr.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:e,onMouseDown:ur(t.onMouseDown,g=>{n?u.onItemFocus(d):g.preventDefault()}),onFocus:ur(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:ur(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=Lge(g,u.orientation,u.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let N=m().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")N.reverse();else if(b==="prev"||b==="next"){b==="prev"&&N.reverse();const C=N.indexOf(g.currentTarget);N=u.loop?Fge(N,C+1):N.slice(C+1)}setTimeout(()=>MK(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});RK.displayName=DK;var Rge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Mge(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Lge(t,e,s){const n=Mge(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Rge[n]}function MK(t,e=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:e}),document.activeElement!==s))return}function Fge(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var LK=$K,FK=RK;function Bge(t){const e=Uge(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(Vge);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function Uge(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=qge(a),l=Wge(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zge=Symbol("radix.slottable");function Vge(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zge}function Wge(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function qge(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Hge=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},e0=new WeakMap,D2=new WeakMap,R2={},GS=0,BK=function(t){return t&&(t.host||BK(t.parentNode))},Gge=function(t,e){return e.map(function(s){if(t.contains(s))return s;var n=BK(s);return n&&t.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},Yge=function(t,e,s,n){var a=Gge(e,Array.isArray(t)?t:[t]);R2[s]||(R2[s]=new WeakMap);var i=R2[s],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))u(m);else try{var f=m.getAttribute(n),v=f!==null&&f!=="false",x=(e0.get(m)||0)+1,g=(i.get(m)||0)+1;e0.set(m,x),i.set(m,g),o.push(m),x===1&&v&&D2.set(m,!0),g===1&&m.setAttribute(s,"true"),v||m.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return u(e),l.clear(),GS++,function(){o.forEach(function(h){var m=e0.get(h)-1,f=i.get(h)-1;e0.set(h,m),i.set(h,f),m||(D2.has(h)||h.removeAttribute(n),D2.delete(h)),f||h.removeAttribute(s)}),GS--,GS||(e0=new WeakMap,e0=new WeakMap,D2=new WeakMap,R2={})}},l5=function(t,e,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=Hge(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),Yge(n,a,s,"aria-hidden")):function(){return null}},ZE=function(t,e){return ZE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])},ZE(t,e)};function UK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ZE(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var Sd=function(){return Sd=Object.assign||function(e){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Sd.apply(this,arguments)};function dp(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s}function zK(t,e,s,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,s):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(a<3?o(i):a>3?o(e,s,i):o(e,s))||i);return a>3&&i&&Object.defineProperty(e,s,i),i}function VK(t,e){return function(s,n){e(s,n,t)}}function WK(t,e,s,n,a,i){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!e&&t?n.static?t:t.prototype:null,u=e||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h,m=!1,f=s.length-1;f>=0;f--){var v={};for(var x in n)v[x]=x==="access"?{}:n[x];for(var x in n.access)v.access[x]=n.access[x];v.addInitializer=function(b){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(b||null))};var g=(0,s[f])(l==="accessor"?{get:u.get,set:u.set}:u[c],v);if(l==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(u.get=h),(h=o(g.set))&&(u.set=h),(h=o(g.init))&&a.unshift(h)}else(h=o(g))&&(l==="field"?a.unshift(h):u[c]=h)}d&&Object.defineProperty(d,n.name,u),m=!0}function qK(t,e,s){for(var n=arguments.length>2,a=0;a<e.length;a++)s=n?e[a].call(t,s):e[a].call(t);return n?s:void 0}function HK(t){return typeof t=="symbol"?t:"".concat(t)}function GK(t,e,s){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}function YK(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Zr(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})}function KK(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(s=0)),s;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,a=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=e.call(t,s)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var c5=Object.create?(function(t,e,s,n){n===void 0&&(n=s);var a=Object.getOwnPropertyDescriptor(e,s);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,n,a)}):(function(t,e,s,n){n===void 0&&(n=s),t[n]=e[s]});function XK(t,e){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s)&&c5(e,t,s)}function gN(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gI(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return i}function QK(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gI(arguments[e]));return t}function ZK(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<s;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function vI(t,e,s){if(s||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function iv(t){return this instanceof iv?(this.v=t,this):new iv(t)}function JK(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(f){return function(v){return Promise.resolve(v).then(f,h)}}function l(f,v){n[f]&&(a[f]=function(x){return new Promise(function(g,b){i.push([f,x,g,b])>1||c(f,x)})},v&&(a[f]=v(a[f])))}function c(f,v){try{d(n[f](v))}catch(x){m(i[0][3],x)}}function d(f){f.value instanceof iv?Promise.resolve(f.value.v).then(u,h):m(i[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function m(f,v){f(v),i.shift(),i.length&&c(i[0][0],i[0][1])}}function eX(t){var e,s;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,i){e[a]=t[a]?function(o){return(s=!s)?{value:iv(t[a](o)),done:!1}:i?i(o):o}:i}}function tX(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof gN=="function"?gN(t):t[Symbol.iterator](),s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s);function n(i){s[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},o)}}function rX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Kge=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},JE=function(t){return JE=Object.getOwnPropertyNames||function(e){var s=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[s.length]=n);return s},JE(t)};function sX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s=JE(t),n=0;n<s.length;n++)s[n]!=="default"&&c5(e,t,s[n]);return Kge(e,t),e}function nX(t){return t&&t.__esModule?t:{default:t}}function aX(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)}function iX(t,e,s,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,s):a?a.value=s:e.set(t,s),s}function oX(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function lX(t,e,s){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],s&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:s})}else s&&t.stack.push({async:!0});return e}var Xge=typeof SuppressedError=="function"?SuppressedError:function(t,e,s){var n=new Error(s);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function cX(t){function e(i){t.error=t.hasError?new Xge(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var s,n=0;function a(){for(;s=t.stack.pop();)try{if(!s.async&&n===1)return n=0,t.stack.push(s),Promise.resolve().then(a);if(s.dispose){var i=s.dispose.call(s.value);if(s.async)return n|=2,Promise.resolve(i).then(a,function(o){return e(o),a()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function dX(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,n,a,i,o){return n?e?".jsx":".js":a&&(!i||!o)?s:a+i+"."+o.toLowerCase()+"js"}):t}const Qge={__extends:UK,__assign:Sd,__rest:dp,__decorate:zK,__param:VK,__esDecorate:WK,__runInitializers:qK,__propKey:HK,__setFunctionName:GK,__metadata:YK,__awaiter:Zr,__generator:KK,__createBinding:c5,__exportStar:XK,__values:gN,__read:gI,__spread:QK,__spreadArrays:ZK,__spreadArray:vI,__await:iv,__asyncGenerator:JK,__asyncDelegator:eX,__asyncValues:tX,__makeTemplateObject:rX,__importStar:sX,__importDefault:nX,__classPrivateFieldGet:aX,__classPrivateFieldSet:iX,__classPrivateFieldIn:oX,__addDisposableResource:lX,__disposeResources:cX,__rewriteRelativeImportExtension:dX},Zge=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lX,get __assign(){return Sd},__asyncDelegator:eX,__asyncGenerator:JK,__asyncValues:tX,__await:iv,__awaiter:Zr,__classPrivateFieldGet:aX,__classPrivateFieldIn:oX,__classPrivateFieldSet:iX,__createBinding:c5,__decorate:zK,__disposeResources:cX,__esDecorate:WK,__exportStar:XK,__extends:UK,__generator:KK,__importDefault:nX,__importStar:sX,__makeTemplateObject:rX,__metadata:YK,__param:VK,__propKey:HK,__read:gI,__rest:dp,__rewriteRelativeImportExtension:dX,__runInitializers:qK,__setFunctionName:GK,__spread:QK,__spreadArray:vI,__spreadArrays:ZK,__values:gN,default:Qge},Symbol.toStringTag,{value:"Module"}));var Bj="right-scroll-bar-position",Uj="width-before-scroll-bar",Jge="with-scroll-bars-hidden",e0e="--removed-body-scroll-bar-size";function YS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function t0e(t,e){var s=j.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=e,s.facade}var r0e=typeof window<"u"?j.useLayoutEffect:j.useEffect,qM=new WeakMap;function s0e(t,e){var s=t0e(null,function(n){return t.forEach(function(a){return YS(a,n)})});return r0e(function(){var n=qM.get(s);if(n){var a=new Set(n),i=new Set(t),o=s.current;a.forEach(function(l){i.has(l)||YS(l,null)}),i.forEach(function(l){a.has(l)||YS(l,o)})}qM.set(s,t)},[t]),s}function n0e(t){return t}function a0e(t,e){e===void 0&&(e=n0e);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(i){var o=e(i,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return a}function i0e(t){t===void 0&&(t={});var e=a0e(null);return e.options=Sd({async:!0,ssr:!1},t),e}var uX=function(t){var e=t.sideCar,s=dp(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,Sd({},s))};uX.isSideCarExport=!0;function o0e(t,e){return t.useMedium(e),uX}var hX=i0e(),KS=function(){},d5=j.forwardRef(function(t,e){var s=j.useRef(null),n=j.useState({onScrollCapture:KS,onWheelCapture:KS,onTouchMoveCapture:KS}),a=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,m=t.sideCar,f=t.noRelative,v=t.noIsolation,x=t.inert,g=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,N=t.gapMode,C=dp(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,A=s0e([s,e]),k=Sd(Sd({},C),a);return j.createElement(j.Fragment,null,u&&j.createElement(S,{sideCar:hX,removeScrollBar:d,shards:h,noRelative:f,noIsolation:v,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:s,gapMode:N}),o?j.cloneElement(j.Children.only(l),Sd(Sd({},k),{ref:A})):j.createElement(w,Sd({},k,{className:c,ref:A}),l))});d5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};d5.classNames={fullWidth:Uj,zeroRight:Bj};var l0e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function c0e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=l0e();return e&&t.setAttribute("nonce",e),t}function d0e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function u0e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var h0e=function(){var t=0,e=null;return{add:function(s){t==0&&(e=c0e())&&(d0e(e,s),u0e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m0e=function(){var t=h0e();return function(e,s){j.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},mX=function(){var t=m0e(),e=function(s){var n=s.styles,a=s.dynamic;return t(n,a),null};return e},f0e={left:0,top:0,right:0,gap:0},XS=function(t){return parseInt(t||"",10)||0},p0e=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[XS(s),XS(n),XS(a)]},x0e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return f0e;var e=p0e(t),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-s+e[2]-e[0])}},g0e=mX(),q0="data-scroll-locked",v0e=function(t,e,s,n){var a=t.left,i=t.top,o=t.right,l=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(Jge,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(q0,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bj,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Uj,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Bj," .").concat(Bj,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Uj," .").concat(Uj,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(q0,`] {
    `).concat(e0e,": ").concat(l,`px;
  }
`)},HM=function(){var t=parseInt(document.body.getAttribute(q0)||"0",10);return isFinite(t)?t:0},y0e=function(){j.useEffect(function(){return document.body.setAttribute(q0,(HM()+1).toString()),function(){var t=HM()-1;t<=0?document.body.removeAttribute(q0):document.body.setAttribute(q0,t.toString())}},[])},b0e=function(t){var e=t.noRelative,s=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;y0e();var i=j.useMemo(function(){return x0e(a)},[a]);return j.createElement(g0e,{styles:v0e(i,!e,a,s?"":"!important")})},eP=!1;if(typeof window<"u")try{var M2=Object.defineProperty({},"passive",{get:function(){return eP=!0,!0}});window.addEventListener("test",M2,M2),window.removeEventListener("test",M2,M2)}catch{eP=!1}var t0=eP?{passive:!1}:!1,w0e=function(t){return t.tagName==="TEXTAREA"},fX=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!w0e(t)&&s[e]==="visible")},j0e=function(t){return fX(t,"overflowY")},N0e=function(t){return fX(t,"overflowX")},GM=function(t,e){var s=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=pX(t,n);if(a){var i=xX(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},S0e=function(t){var e=t.scrollTop,s=t.scrollHeight,n=t.clientHeight;return[e,s,n]},C0e=function(t){var e=t.scrollLeft,s=t.scrollWidth,n=t.clientWidth;return[e,s,n]},pX=function(t,e){return t==="v"?j0e(e):N0e(e)},xX=function(t,e){return t==="v"?S0e(e):C0e(e)},k0e=function(t,e){return t==="h"&&e==="rtl"?-1:1},_0e=function(t,e,s,n,a){var i=k0e(t,window.getComputedStyle(e).direction),o=i*n,l=s.target,c=e.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var f=xX(t,l),v=f[0],x=f[1],g=f[2],b=x-g-i*v;(v||b)&&pX(t,l)&&(h+=b,m+=v);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(d=!0),d},L2=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},YM=function(t){return[t.deltaX,t.deltaY]},KM=function(t){return t&&"current"in t?t.current:t},A0e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},E0e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},P0e=0,r0=[];function T0e(t){var e=j.useRef([]),s=j.useRef([0,0]),n=j.useRef(),a=j.useState(P0e++)[0],i=j.useState(mX)[0],o=j.useRef(t);j.useEffect(function(){o.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var x=vI([t.lockRef.current],(t.shards||[]).map(KM),!0).filter(Boolean);return x.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=j.useCallback(function(x,g){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var b=L2(x),w=s.current,N="deltaX"in x?x.deltaX:w[0]-b[0],C="deltaY"in x?x.deltaY:w[1]-b[1],S,A=x.target,k=Math.abs(N)>Math.abs(C)?"h":"v";if("touches"in x&&k==="h"&&A.type==="range")return!1;var E=GM(k,A);if(!E)return!0;if(E?S=k:(S=k==="v"?"h":"v",E=GM(k,A)),!E)return!1;if(!n.current&&"changedTouches"in x&&(N||C)&&(n.current=S),!S)return!0;var O=n.current||S;return _0e(O,g,x,O==="h"?N:C)},[]),c=j.useCallback(function(x){var g=x;if(!(!r0.length||r0[r0.length-1]!==i)){var b="deltaY"in g?YM(g):L2(g),w=e.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&A0e(S.delta,b)})[0];if(w&&w.should){g.cancelable&&g.preventDefault();return}if(!w){var N=(o.current.shards||[]).map(KM).filter(Boolean).filter(function(S){return S.contains(g.target)}),C=N.length>0?l(g,N[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),d=j.useCallback(function(x,g,b,w){var N={name:x,delta:g,target:b,should:w,shadowParent:O0e(b)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(C){return C!==N})},1)},[]),u=j.useCallback(function(x){s.current=L2(x),n.current=void 0},[]),h=j.useCallback(function(x){d(x.type,YM(x),x.target,l(x,t.lockRef.current))},[]),m=j.useCallback(function(x){d(x.type,L2(x),x.target,l(x,t.lockRef.current))},[]);j.useEffect(function(){return r0.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,t0),document.addEventListener("touchmove",c,t0),document.addEventListener("touchstart",u,t0),function(){r0=r0.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,t0),document.removeEventListener("touchmove",c,t0),document.removeEventListener("touchstart",u,t0)}},[]);var f=t.removeScrollBar,v=t.inert;return j.createElement(j.Fragment,null,v?j.createElement(i,{styles:E0e(a)}):null,f?j.createElement(b0e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function O0e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const I0e=o0e(hX,T0e);var bw=j.forwardRef(function(t,e){return j.createElement(d5,Sd({},t,{ref:e,sideCar:I0e}))});bw.classNames=d5.classNames;var tP=["Enter"," "],$0e=["ArrowDown","PageUp","Home"],gX=["ArrowUp","PageDown","End"],D0e=[...$0e,...gX],R0e={ltr:[...tP,"ArrowRight"],rtl:[...tP,"ArrowLeft"]},M0e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ww="Menu",[ub,L0e,F0e]=fw(ww),[fg,vX]=fl(ww,[F0e,Kv,o5]),u5=Kv(),yX=o5(),[B0e,pg]=fg(ww),[U0e,jw]=fg(ww),bX=t=>{const{__scopeMenu:e,open:s=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=t,l=u5(e),[c,d]=j.useState(null),u=j.useRef(!1),h=Co(i),m=mg(a);return j.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),r.jsx(fI,{...l,children:r.jsx(B0e,{scope:e,open:s,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(U0e,{scope:e,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:n})})})};bX.displayName=ww;var z0e="MenuAnchor",yI=j.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t,a=u5(s);return r.jsx(i5,{...a,...n,ref:e})});yI.displayName=z0e;var bI="MenuPortal",[V0e,wX]=fg(bI,{forceMount:void 0}),jX=t=>{const{__scopeMenu:e,forceMount:s,children:n,container:a}=t,i=pg(bI,e);return r.jsx(V0e,{scope:e,forceMount:s,children:r.jsx(Uo,{present:s||i.open,children:r.jsx(vw,{asChild:!0,container:a,children:n})})})};jX.displayName=bI;var Td="MenuContent",[W0e,wI]=fg(Td),NX=j.forwardRef((t,e)=>{const s=wX(Td,t.__scopeMenu),{forceMount:n=s.forceMount,...a}=t,i=pg(Td,t.__scopeMenu),o=jw(Td,t.__scopeMenu);return r.jsx(ub.Provider,{scope:t.__scopeMenu,children:r.jsx(Uo,{present:n||i.open,children:r.jsx(ub.Slot,{scope:t.__scopeMenu,children:o.modal?r.jsx(q0e,{...a,ref:e}):r.jsx(H0e,{...a,ref:e})})})})}),q0e=j.forwardRef((t,e)=>{const s=pg(Td,t.__scopeMenu),n=j.useRef(null),a=bs(e,n);return j.useEffect(()=>{const i=n.current;if(i)return l5(i)},[]),r.jsx(jI,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:ur(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),H0e=j.forwardRef((t,e)=>{const s=pg(Td,t.__scopeMenu);return r.jsx(jI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),G0e=Bge("MenuContent.ScrollLock"),jI=j.forwardRef((t,e)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:v,...x}=t,g=pg(Td,s),b=jw(Td,s),w=u5(s),N=yX(s),C=L0e(s),[S,A]=j.useState(null),k=j.useRef(null),E=bs(e,k,g.onContentChange),O=j.useRef(0),$=j.useRef(""),T=j.useRef(0),I=j.useRef(null),L=j.useRef("right"),z=j.useRef(0),M=v?bw:j.Fragment,V=v?{as:G0e,allowPinchZoom:!0}:void 0,B=J=>{const ee=$.current+J,q=C().filter(ie=>!ie.disabled),U=document.activeElement,Z=q.find(ie=>ie.ref.current===U)?.textValue,K=q.map(ie=>ie.textValue),se=ave(K,ee,Z),ne=q.find(ie=>ie.textValue===se)?.ref.current;(function ie(be){$.current=be,window.clearTimeout(O.current),be!==""&&(O.current=window.setTimeout(()=>ie(""),1e3))})(ee),ne&&setTimeout(()=>ne.focus())};j.useEffect(()=>()=>window.clearTimeout(O.current),[]),e5();const F=j.useCallback(J=>L.current===I.current?.side&&ove(J,I.current?.area),[]);return r.jsx(W0e,{scope:s,searchRef:$,onItemEnter:j.useCallback(J=>{F(J)&&J.preventDefault()},[F]),onItemLeave:j.useCallback(J=>{F(J)||(k.current?.focus(),A(null))},[F]),onTriggerLeave:j.useCallback(J=>{F(J)&&J.preventDefault()},[F]),pointerGraceTimerRef:T,onPointerGraceIntentChange:j.useCallback(J=>{I.current=J},[]),children:r.jsx(M,{...V,children:r.jsx(xw,{asChild:!0,trapped:a,onMountAutoFocus:ur(i,J=>{J.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(pw,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:r.jsx(LK,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:A,onEntryFocus:ur(c,J=>{b.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(pI,{role:"menu","aria-orientation":"vertical","data-state":FX(g.open),"data-radix-menu-content":"",dir:b.dir,...w,...x,ref:E,style:{outline:"none",...x.style},onKeyDown:ur(x.onKeyDown,J=>{const q=J.target.closest("[data-radix-menu-content]")===J.currentTarget,U=J.ctrlKey||J.altKey||J.metaKey,Z=J.key.length===1;q&&(J.key==="Tab"&&J.preventDefault(),!U&&Z&&B(J.key));const K=k.current;if(J.target!==K||!D0e.includes(J.key))return;J.preventDefault();const ne=C().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);gX.includes(J.key)&&ne.reverse(),sve(ne)}),onBlur:ur(t.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(O.current),$.current="")}),onPointerMove:ur(t.onPointerMove,hb(J=>{const ee=J.target,q=z.current!==J.clientX;if(J.currentTarget.contains(ee)&&q){const U=J.clientX>z.current?"right":"left";L.current=U,z.current=J.clientX}}))})})})})})})});NX.displayName=Td;var Y0e="MenuGroup",NI=j.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(Jr.div,{role:"group",...n,ref:e})});NI.displayName=Y0e;var K0e="MenuLabel",SX=j.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(Jr.div,{...n,ref:e})});SX.displayName=K0e;var vN="MenuItem",XM="menu.itemSelect",h5=j.forwardRef((t,e)=>{const{disabled:s=!1,onSelect:n,...a}=t,i=j.useRef(null),o=jw(vN,t.__scopeMenu),l=wI(vN,t.__scopeMenu),c=bs(e,i),d=j.useRef(!1),u=()=>{const h=i.current;if(!s&&h){const m=new CustomEvent(XM,{bubbles:!0,cancelable:!0});h.addEventListener(XM,f=>n?.(f),{once:!0}),lK(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(CX,{...a,ref:c,disabled:s,onClick:ur(t.onClick,u),onPointerDown:h=>{t.onPointerDown?.(h),d.current=!0},onPointerUp:ur(t.onPointerUp,h=>{d.current||h.currentTarget?.click()}),onKeyDown:ur(t.onKeyDown,h=>{const m=l.searchRef.current!=="";s||m&&h.key===" "||tP.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});h5.displayName=vN;var CX=j.forwardRef((t,e)=>{const{__scopeMenu:s,disabled:n=!1,textValue:a,...i}=t,o=wI(vN,s),l=yX(s),c=j.useRef(null),d=bs(e,c),[u,h]=j.useState(!1),[m,f]=j.useState("");return j.useEffect(()=>{const v=c.current;v&&f((v.textContent??"").trim())},[i.children]),r.jsx(ub.ItemSlot,{scope:s,disabled:n,textValue:a??m,children:r.jsx(FK,{asChild:!0,...l,focusable:!n,children:r.jsx(Jr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:ur(t.onPointerMove,hb(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ur(t.onPointerLeave,hb(v=>o.onItemLeave(v))),onFocus:ur(t.onFocus,()=>h(!0)),onBlur:ur(t.onBlur,()=>h(!1))})})})}),X0e="MenuCheckboxItem",kX=j.forwardRef((t,e)=>{const{checked:s=!1,onCheckedChange:n,...a}=t;return r.jsx(TX,{scope:t.__scopeMenu,checked:s,children:r.jsx(h5,{role:"menuitemcheckbox","aria-checked":yN(s)?"mixed":s,...a,ref:e,"data-state":CI(s),onSelect:ur(a.onSelect,()=>n?.(yN(s)?!0:!s),{checkForDefaultPrevented:!1})})})});kX.displayName=X0e;var _X="MenuRadioGroup",[Q0e,Z0e]=fg(_X,{value:void 0,onValueChange:()=>{}}),AX=j.forwardRef((t,e)=>{const{value:s,onValueChange:n,...a}=t,i=Co(n);return r.jsx(Q0e,{scope:t.__scopeMenu,value:s,onValueChange:i,children:r.jsx(NI,{...a,ref:e})})});AX.displayName=_X;var EX="MenuRadioItem",PX=j.forwardRef((t,e)=>{const{value:s,...n}=t,a=Z0e(EX,t.__scopeMenu),i=s===a.value;return r.jsx(TX,{scope:t.__scopeMenu,checked:i,children:r.jsx(h5,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":CI(i),onSelect:ur(n.onSelect,()=>a.onValueChange?.(s),{checkForDefaultPrevented:!1})})})});PX.displayName=EX;var SI="MenuItemIndicator",[TX,J0e]=fg(SI,{checked:!1}),OX=j.forwardRef((t,e)=>{const{__scopeMenu:s,forceMount:n,...a}=t,i=J0e(SI,s);return r.jsx(Uo,{present:n||yN(i.checked)||i.checked===!0,children:r.jsx(Jr.span,{...a,ref:e,"data-state":CI(i.checked)})})});OX.displayName=SI;var eve="MenuSeparator",IX=j.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t;return r.jsx(Jr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});IX.displayName=eve;var tve="MenuArrow",$X=j.forwardRef((t,e)=>{const{__scopeMenu:s,...n}=t,a=u5(s);return r.jsx(xI,{...a,...n,ref:e})});$X.displayName=tve;var rve="MenuSub",[Crt,DX]=fg(rve),w1="MenuSubTrigger",RX=j.forwardRef((t,e)=>{const s=pg(w1,t.__scopeMenu),n=jw(w1,t.__scopeMenu),a=DX(w1,t.__scopeMenu),i=wI(w1,t.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>u,[u]),j.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(yI,{asChild:!0,...d,children:r.jsx(CX,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":FX(s.open),...t,ref:Oh(e,a.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:ur(t.onPointerMove,hb(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!s.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:ur(t.onPointerLeave,hb(h=>{u();const m=s.content?.getBoundingClientRect();if(m){const f=s.content?.dataset.side,v=f==="right",x=v?-5:5,g=m[v?"left":"right"],b=m[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:g,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:g,y:m.bottom}],side:f}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ur(t.onKeyDown,h=>{const m=i.searchRef.current!=="";t.disabled||m&&h.key===" "||R0e[n.dir].includes(h.key)&&(s.onOpenChange(!0),s.content?.focus(),h.preventDefault())})})})});RX.displayName=w1;var MX="MenuSubContent",LX=j.forwardRef((t,e)=>{const s=wX(Td,t.__scopeMenu),{forceMount:n=s.forceMount,...a}=t,i=pg(Td,t.__scopeMenu),o=jw(Td,t.__scopeMenu),l=DX(MX,t.__scopeMenu),c=j.useRef(null),d=bs(e,c);return r.jsx(ub.Provider,{scope:t.__scopeMenu,children:r.jsx(Uo,{present:n||i.open,children:r.jsx(ub.Slot,{scope:t.__scopeMenu,children:r.jsx(jI,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ur(t.onFocusOutside,u=>{u.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ur(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ur(t.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),m=M0e[o.dir].includes(u.key);h&&m&&(i.onOpenChange(!1),l.trigger?.focus(),u.preventDefault())})})})})})});LX.displayName=MX;function FX(t){return t?"open":"closed"}function yN(t){return t==="indeterminate"}function CI(t){return yN(t)?"indeterminate":t?"checked":"unchecked"}function sve(t){const e=document.activeElement;for(const s of t)if(s===e||(s.focus(),document.activeElement!==e))return}function nve(t,e){return t.map((s,n)=>t[(e+n)%t.length])}function ave(t,e,s){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=s?t.indexOf(s):-1;let o=nve(t,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function ive(t,e){const{x:s,y:n}=t;let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],d=l.x,u=l.y,h=c.x,m=c.y;u>n!=m>n&&s<(h-d)*(n-u)/(m-u)+d&&(a=!a)}return a}function ove(t,e){if(!e)return!1;const s={x:t.clientX,y:t.clientY};return ive(s,e)}function hb(t){return e=>e.pointerType==="mouse"?t(e):void 0}var lve=bX,cve=yI,dve=jX,uve=NX,hve=NI,mve=SX,fve=h5,pve=kX,xve=AX,gve=PX,vve=OX,yve=IX,bve=$X,wve=RX,jve=LX,m5="DropdownMenu",[Nve]=fl(m5,[vX]),Il=vX(),[Sve,BX]=Nve(m5),UX=t=>{const{__scopeDropdownMenu:e,children:s,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Il(e),d=j.useRef(null),[u,h]=qc({prop:a,defaultProp:i??!1,onChange:o,caller:m5});return r.jsx(Sve,{scope:e,triggerId:Uc(),triggerRef:d,contentId:Uc(),open:u,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(m=>!m),[h]),modal:l,children:r.jsx(lve,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:s})})};UX.displayName=m5;var zX="DropdownMenuTrigger",VX=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...a}=t,i=BX(zX,s),o=Il(s);return r.jsx(cve,{asChild:!0,...o,children:r.jsx(Jr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Oh(e,i.triggerRef),onPointerDown:ur(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ur(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});VX.displayName=zX;var Cve="DropdownMenuPortal",WX=t=>{const{__scopeDropdownMenu:e,...s}=t,n=Il(e);return r.jsx(dve,{...n,...s})};WX.displayName=Cve;var qX="DropdownMenuContent",HX=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=BX(qX,s),i=Il(s),o=j.useRef(!1);return r.jsx(uve,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:e,onCloseAutoFocus:ur(t.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ur(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HX.displayName=qX;var kve="DropdownMenuGroup",_ve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(hve,{...a,...n,ref:e})});_ve.displayName=kve;var Ave="DropdownMenuLabel",GX=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(mve,{...a,...n,ref:e})});GX.displayName=Ave;var Eve="DropdownMenuItem",YX=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(fve,{...a,...n,ref:e})});YX.displayName=Eve;var Pve="DropdownMenuCheckboxItem",Tve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(pve,{...a,...n,ref:e})});Tve.displayName=Pve;var Ove="DropdownMenuRadioGroup",Ive=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(xve,{...a,...n,ref:e})});Ive.displayName=Ove;var $ve="DropdownMenuRadioItem",Dve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(gve,{...a,...n,ref:e})});Dve.displayName=$ve;var Rve="DropdownMenuItemIndicator",Mve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(vve,{...a,...n,ref:e})});Mve.displayName=Rve;var Lve="DropdownMenuSeparator",KX=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(yve,{...a,...n,ref:e})});KX.displayName=Lve;var Fve="DropdownMenuArrow",Bve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(bve,{...a,...n,ref:e})});Bve.displayName=Fve;var Uve="DropdownMenuSubTrigger",zve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(wve,{...a,...n,ref:e})});zve.displayName=Uve;var Vve="DropdownMenuSubContent",Wve=j.forwardRef((t,e)=>{const{__scopeDropdownMenu:s,...n}=t,a=Il(s);return r.jsx(jve,{...a,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Wve.displayName=Vve;var qve=UX,Hve=VX,Gve=WX,Yve=HX,Kve=GX,Xve=YX,Qve=KX;function Pn({...t}){return r.jsx(qve,{"data-slot":"dropdown-menu",...t})}function Tn({...t}){return r.jsx(Hve,{"data-slot":"dropdown-menu-trigger",...t})}function On({className:t,sideOffset:e=4,...s}){return r.jsx(Gve,{children:r.jsx(Yve,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Ar("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function Dt({className:t,inset:e,variant:s="default",...n}){return r.jsx(Xve,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":s,className:Ar("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function Zve({className:t,inset:e,...s}){return r.jsx(Kve,{"data-slot":"dropdown-menu-label","data-inset":e,className:Ar("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...s})}function Su({className:t,...e}){return r.jsx(Qve,{"data-slot":"dropdown-menu-separator",className:Ar("bg-border -mx-1 my-1 h-px",t),...e})}function Jve(t,e=[]){let s=[];function n(i,o){const l=j.createContext(o);l.displayName=i+"Context";const c=s.length;s=[...s,o];const d=h=>{const{scope:m,children:f,...v}=h,x=m?.[t]?.[c]||l,g=j.useMemo(()=>v,Object.values(v));return r.jsx(x.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[t]?.[c]||l,v=j.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>j.createContext(o));return function(l){const c=l?.[t]||i;return j.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,eye(a,...e)]}function eye(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var tye=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kI=tye.reduce((t,e)=>{const s=Wv(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),QS={exports:{}},ZS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM;function rye(){if(QM)return ZS;QM=1;var t=Uv();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(h,m){var f=m(),v=n({inst:{value:f,getSnapshot:m}}),x=v[0].inst,g=v[1];return i(function(){x.value=f,x.getSnapshot=m,c(x)&&g({inst:x})},[h,f,m]),a(function(){return c(x)&&g({inst:x}),h(function(){c(x)&&g({inst:x})})},[h]),o(f),f}function c(h){var m=h.getSnapshot;h=h.value;try{var f=m();return!s(h,f)}catch{return!0}}function d(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return ZS.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,ZS}var ZM;function sye(){return ZM||(ZM=1,QS.exports=rye()),QS.exports}var nye=sye();function aye(){return nye.useSyncExternalStore(iye,()=>!0,()=>!1)}function iye(){return()=>{}}var _I="Avatar",[oye]=Jve(_I),[lye,XX]=oye(_I),QX=j.forwardRef((t,e)=>{const{__scopeAvatar:s,...n}=t,[a,i]=j.useState("idle");return r.jsx(lye,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(kI.span,{...n,ref:e})})});QX.displayName=_I;var ZX="AvatarImage",JX=j.forwardRef((t,e)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:a=()=>{},...i}=t,o=XX(ZX,s),l=cye(n,i),c=Co(d=>{a(d),o.onImageLoadingStatusChange(d)});return Ai(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(kI.img,{...i,ref:e,src:n}):null});JX.displayName=ZX;var eQ="AvatarFallback",tQ=j.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:n,...a}=t,i=XX(eQ,s),[o,l]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?r.jsx(kI.span,{...a,ref:e}):null});tQ.displayName=eQ;function JM(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function cye(t,{referrerPolicy:e,crossOrigin:s}){const n=aye(),a=j.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=j.useState(()=>JM(i,t));return Ai(()=>{l(JM(i,t))},[i,t]),Ai(()=>{const c=h=>()=>{l(h)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,s,e]),o}var dye=QX,uye=JX,hye=tQ;function oh({className:t,...e}){return r.jsx(dye,{"data-slot":"avatar",className:Ar("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function lh({className:t,...e}){return r.jsx(uye,{"data-slot":"avatar-image",className:Ar("aspect-square size-full",t),...e})}function ch({className:t,...e}){return r.jsx(hye,{"data-slot":"avatar-fallback",className:Ar("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}const rQ=j.createContext(void 0);function H0({children:t}){const[e,s]=j.useState(()=>{const i=localStorage.getItem("bookingTMS-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});j.useEffect(()=>{const i=document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("bookingTMS-theme",e)},[e]);const n=()=>{s(i=>i==="light"?"dark":"light")},a=i=>{s(i)};return r.jsx(rQ.Provider,{value:{theme:e,toggleTheme:n,setTheme:a},children:t})}function Nr(){const t=j.useContext(rQ);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function mye(){const{theme:t,toggleTheme:e}=Nr();return r.jsxs(W,{variant:"ghost",size:"icon",onClick:e,className:"relative h-9 w-9 rounded-lg hover:bg-accent transition-colors","aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:[r.jsx(mw,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(Vv,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}const JS={soundEnabled:!0,soundVolume:70,soundForBookings:!0,soundForPayments:!0,soundForCancellations:!0,desktopEnabled:!0,desktopForBookings:!0,desktopForPayments:!0,desktopForCancellations:!0,desktopForMessages:!0,desktopForStaffUpdates:!0,emailEnabled:!0,emailForBookings:!0,emailForCancellations:!0,emailForPayments:!0,emailForRefunds:!0,emailForCustomerMessages:!0,emailForSystemUpdates:!1,emailForReports:!0,emailForMarketing:!1,emailDigest:"instant",smsEnabled:!1,smsPhoneNumber:"",smsForBookings:!1,smsForCancellations:!1,smsForUrgentAlerts:!1,quietHoursEnabled:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00",showInAppNotifications:!0,autoMarkReadAfter:0,groupSimilarNotifications:!0};function fye(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const pye=t=>{switch(t){case"success":return vye;case"info":return bye;case"warning":return yye;case"error":return wye;default:return null}},xye=Array(12).fill(0),gye=({visible:t,className:e})=>ce.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ce.createElement("div",{className:"sonner-spinner"},xye.map((s,n)=>ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),vye=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yye=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bye=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wye=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jye=ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Nye=()=>{const[t,e]=ce.useState(document.hidden);return ce.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let rP=1;class Sye{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:n,...a}=e,i=typeof e?.id=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:rP++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],ce.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(kye(d)&&!d.ok){i=!1;const h=typeof s.error=="function"?await s.error(`HTTP error! status: ${d.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${d.status}`):s.description,v=typeof h=="object"&&!ce.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...v})}else if(d instanceof Error){i=!1;const h=typeof s.error=="function"?await s.error(d):s.error,m=typeof s.description=="function"?await s.description(d):s.description,v=typeof h=="object"&&!ce.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...v})}else if(s.success!==void 0){i=!1;const h=typeof s.success=="function"?await s.success(d):s.success,m=typeof s.description=="function"?await s.description(d):s.description,v=typeof h=="object"&&!ce.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:m,...v})}}).catch(async d=>{if(o=["reject",d],s.error!==void 0){i=!1;const u=typeof s.error=="function"?await s.error(d):s.error,h=typeof s.description=="function"?await s.description(d):s.description,f=typeof u=="object"&&!ce.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),c=()=>new Promise((d,u)=>l.then(()=>o[0]==="reject"?u(o[1]):d(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,s)=>{const n=s?.id||rP++;return this.create({jsx:e(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Jl=new Sye,Cye=(t,e)=>{const s=e?.id||rP++;return Jl.addToast({title:t,...e,id:s}),s},kye=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",_ye=Cye,Aye=()=>Jl.toasts,Eye=()=>Jl.getActiveToasts(),re=Object.assign(_ye,{success:Jl.success,info:Jl.info,warning:Jl.warning,error:Jl.error,custom:Jl.custom,message:Jl.message,promise:Jl.promise,dismiss:Jl.dismiss,loading:Jl.loading},{getHistory:Aye,getToasts:Eye});fye("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function F2(t){return t.label!==void 0}const Pye=3,Tye="24px",Oye="16px",e7=4e3,Iye=356,$ye=14,Dye=45,Rye=200;function rh(...t){return t.filter(Boolean).join(" ")}function Mye(t){const[e,s]=t.split("-"),n=[];return e&&n.push(e),s&&n.push(s),n}const Lye=t=>{var e,s,n,a,i,o,l,c,d;const{invert:u,toast:h,unstyled:m,interacting:f,setHeights:v,visibleToasts:x,heights:g,index:b,toasts:w,expanded:N,removeToast:C,defaultRichColors:S,closeButton:A,style:k,cancelButtonStyle:E,actionButtonStyle:O,className:$="",descriptionClassName:T="",duration:I,position:L,gap:z,expandByDefault:M,classNames:V,icons:B,closeButtonAriaLabel:F="Close toast"}=t,[J,ee]=ce.useState(null),[q,U]=ce.useState(null),[Z,K]=ce.useState(!1),[se,ne]=ce.useState(!1),[ie,be]=ce.useState(!1),[ue,oe]=ce.useState(!1),[pe,ye]=ce.useState(!1),[$e,Se]=ce.useState(0),[Y,Le]=ce.useState(0),xe=ce.useRef(h.duration||I||e7),mt=ce.useRef(null),Ue=ce.useRef(null),xt=b===0,ut=b+1<=x,Ot=h.type,tt=h.dismissible!==!1,st=h.className||"",At=h.descriptionClassName||"",Yt=ce.useMemo(()=>g.findIndex(bt=>bt.toastId===h.id)||0,[g,h.id]),yr=ce.useMemo(()=>{var bt;return(bt=h.closeButton)!=null?bt:A},[h.closeButton,A]),Zt=ce.useMemo(()=>h.duration||I||e7,[h.duration,I]),Vt=ce.useRef(0),tr=ce.useRef(0),$t=ce.useRef(0),Dr=ce.useRef(null),[Er,hr]=L.split("-"),Ct=ce.useMemo(()=>g.reduce((bt,gr,je)=>je>=Yt?bt:bt+gr.height,0),[g,Yt]),is=Nye(),cr=h.invert||u,Pt=Ot==="loading";tr.current=ce.useMemo(()=>Yt*z+Ct,[Yt,Ct]),ce.useEffect(()=>{xe.current=Zt},[Zt]),ce.useEffect(()=>{K(!0)},[]),ce.useEffect(()=>{const bt=Ue.current;if(bt){const gr=bt.getBoundingClientRect().height;return Le(gr),v(je=>[{toastId:h.id,height:gr,position:h.position},...je]),()=>v(je=>je.filter(Ce=>Ce.toastId!==h.id))}},[v,h.id]),ce.useLayoutEffect(()=>{if(!Z)return;const bt=Ue.current,gr=bt.style.height;bt.style.height="auto";const je=bt.getBoundingClientRect().height;bt.style.height=gr,Le(je),v(Ce=>Ce.find(He=>He.toastId===h.id)?Ce.map(He=>He.toastId===h.id?{...He,height:je}:He):[{toastId:h.id,height:je,position:h.position},...Ce])},[Z,h.title,h.description,v,h.id,h.jsx,h.action,h.cancel]);const kt=ce.useCallback(()=>{ne(!0),Se(tr.current),v(bt=>bt.filter(gr=>gr.toastId!==h.id)),setTimeout(()=>{C(h)},Rye)},[h,C,v,tr]);ce.useEffect(()=>{if(h.promise&&Ot==="loading"||h.duration===1/0||h.type==="loading")return;let bt;return N||f||is?(()=>{if($t.current<Vt.current){const Ce=new Date().getTime()-Vt.current;xe.current=xe.current-Ce}$t.current=new Date().getTime()})():(()=>{xe.current!==1/0&&(Vt.current=new Date().getTime(),bt=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),kt()},xe.current))})(),()=>clearTimeout(bt)},[N,f,h,Ot,is,kt]),ce.useEffect(()=>{h.delete&&(kt(),h.onDismiss==null||h.onDismiss.call(h,h))},[kt,h.delete]);function zt(){var bt;if(B?.loading){var gr;return ce.createElement("div",{className:rh(V?.loader,h==null||(gr=h.classNames)==null?void 0:gr.loader,"sonner-loader"),"data-visible":Ot==="loading"},B.loading)}return ce.createElement(gye,{className:rh(V?.loader,h==null||(bt=h.classNames)==null?void 0:bt.loader),visible:Ot==="loading"})}const or=h.icon||B?.[Ot]||pye(Ot);var Re,Je;return ce.createElement("li",{tabIndex:0,ref:Ue,className:rh($,st,V?.toast,h==null||(e=h.classNames)==null?void 0:e.toast,V?.default,V?.[Ot],h==null||(s=h.classNames)==null?void 0:s[Ot]),"data-sonner-toast":"","data-rich-colors":(Re=h.richColors)!=null?Re:S,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":Z,"data-promise":!!h.promise,"data-swiped":pe,"data-removed":se,"data-visible":ut,"data-y-position":Er,"data-x-position":hr,"data-index":b,"data-front":xt,"data-swiping":ie,"data-dismissible":tt,"data-type":Ot,"data-invert":cr,"data-swipe-out":ue,"data-swipe-direction":q,"data-expanded":!!(N||M&&Z),"data-testid":h.testId,style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${se?$e:tr.current}px`,"--initial-height":M?"auto":`${Y}px`,...k,...h.style},onDragEnd:()=>{be(!1),ee(null),Dr.current=null},onPointerDown:bt=>{bt.button!==2&&(Pt||!tt||(mt.current=new Date,Se(tr.current),bt.target.setPointerCapture(bt.pointerId),bt.target.tagName!=="BUTTON"&&(be(!0),Dr.current={x:bt.clientX,y:bt.clientY})))},onPointerUp:()=>{var bt,gr,je;if(ue||!tt)return;Dr.current=null;const Ce=Number(((bt=Ue.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Qe=Number(((gr=Ue.current)==null?void 0:gr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),He=new Date().getTime()-((je=mt.current)==null?void 0:je.getTime()),vt=J==="x"?Ce:Qe,le=Math.abs(vt)/He;if(Math.abs(vt)>=Dye||le>.11){Se(tr.current),h.onDismiss==null||h.onDismiss.call(h,h),U(J==="x"?Ce>0?"right":"left":Qe>0?"down":"up"),kt(),oe(!0);return}else{var Ee,We;(Ee=Ue.current)==null||Ee.style.setProperty("--swipe-amount-x","0px"),(We=Ue.current)==null||We.style.setProperty("--swipe-amount-y","0px")}ye(!1),be(!1),ee(null)},onPointerMove:bt=>{var gr,je,Ce;if(!Dr.current||!tt||((gr=window.getSelection())==null?void 0:gr.toString().length)>0)return;const He=bt.clientY-Dr.current.y,vt=bt.clientX-Dr.current.x;var le;const Ee=(le=t.swipeDirections)!=null?le:Mye(L);!J&&(Math.abs(vt)>1||Math.abs(He)>1)&&ee(Math.abs(vt)>Math.abs(He)?"x":"y");let We={x:0,y:0};const at=nt=>1/(1.5+Math.abs(nt)/20);if(J==="y"){if(Ee.includes("top")||Ee.includes("bottom"))if(Ee.includes("top")&&He<0||Ee.includes("bottom")&&He>0)We.y=He;else{const nt=He*at(He);We.y=Math.abs(nt)<Math.abs(He)?nt:He}}else if(J==="x"&&(Ee.includes("left")||Ee.includes("right")))if(Ee.includes("left")&&vt<0||Ee.includes("right")&&vt>0)We.x=vt;else{const nt=vt*at(vt);We.x=Math.abs(nt)<Math.abs(vt)?nt:vt}(Math.abs(We.x)>0||Math.abs(We.y)>0)&&ye(!0),(je=Ue.current)==null||je.style.setProperty("--swipe-amount-x",`${We.x}px`),(Ce=Ue.current)==null||Ce.style.setProperty("--swipe-amount-y",`${We.y}px`)}},yr&&!h.jsx&&Ot!=="loading"?ce.createElement("button",{"aria-label":F,"data-disabled":Pt,"data-close-button":!0,onClick:Pt||!tt?()=>{}:()=>{kt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:rh(V?.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(Je=B?.close)!=null?Je:jye):null,(Ot||h.icon||h.promise)&&h.icon!==null&&(B?.[Ot]!==null||h.icon)?ce.createElement("div",{"data-icon":"",className:rh(V?.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||zt():null,h.type!=="loading"?or:null):null,ce.createElement("div",{"data-content":"",className:rh(V?.content,h==null||(i=h.classNames)==null?void 0:i.content)},ce.createElement("div",{"data-title":"",className:rh(V?.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?ce.createElement("div",{"data-description":"",className:rh(T,At,V?.description,h==null||(l=h.classNames)==null?void 0:l.description)},typeof h.description=="function"?h.description():h.description):null),ce.isValidElement(h.cancel)?h.cancel:h.cancel&&F2(h.cancel)?ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||E,onClick:bt=>{F2(h.cancel)&&tt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,bt),kt())},className:rh(V?.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,ce.isValidElement(h.action)?h.action:h.action&&F2(h.action)?ce.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:bt=>{F2(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,bt),!bt.defaultPrevented&&kt())},className:rh(V?.actionButton,h==null||(d=h.classNames)==null?void 0:d.actionButton)},h.action.label):null)};function t7(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Fye(t,e){const s={};return[t,e].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?Oye:Tye;function c(d){["top","right","bottom","left"].forEach(u=>{s[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?s[`${o}-${d}`]=l:s[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),s}const Bye=ce.forwardRef(function(e,s){const{id:n,invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:u,mobileOffset:h,theme:m="light",richColors:f,duration:v,style:x,visibleToasts:g=Pye,toastOptions:b,dir:w=t7(),gap:N=$ye,icons:C,containerAriaLabel:S="Notifications"}=e,[A,k]=ce.useState([]),E=ce.useMemo(()=>n?A.filter(Z=>Z.toasterId===n):A.filter(Z=>!Z.toasterId),[A,n]),O=ce.useMemo(()=>Array.from(new Set([i].concat(E.filter(Z=>Z.position).map(Z=>Z.position)))),[E,i]),[$,T]=ce.useState([]),[I,L]=ce.useState(!1),[z,M]=ce.useState(!1),[V,B]=ce.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=ce.useRef(null),J=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=ce.useRef(null),q=ce.useRef(!1),U=ce.useCallback(Z=>{k(K=>{var se;return(se=K.find(ne=>ne.id===Z.id))!=null&&se.delete||Jl.dismiss(Z.id),K.filter(({id:ne})=>ne!==Z.id)})},[]);return ce.useEffect(()=>Jl.subscribe(Z=>{if(Z.dismiss){requestAnimationFrame(()=>{k(K=>K.map(se=>se.id===Z.id?{...se,delete:!0}:se))});return}setTimeout(()=>{XO.flushSync(()=>{k(K=>{const se=K.findIndex(ne=>ne.id===Z.id);return se!==-1?[...K.slice(0,se),{...K[se],...Z},...K.slice(se+1)]:[Z,...K]})})})}),[A]),ce.useEffect(()=>{if(m!=="system"){B(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:K})=>{B(K?"dark":"light")})}catch{Z.addListener(({matches:se})=>{try{B(se?"dark":"light")}catch(ne){console.error(ne)}})}},[m]),ce.useEffect(()=>{A.length<=1&&L(!1)},[A]),ce.useEffect(()=>{const Z=K=>{var se;if(o.every(be=>K[be]||K.code===be)){var ie;L(!0),(ie=F.current)==null||ie.focus()}K.code==="Escape"&&(document.activeElement===F.current||(se=F.current)!=null&&se.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[o]),ce.useEffect(()=>{if(F.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,q.current=!1)}},[F.current]),ce.createElement("section",{ref:s,"aria-label":`${S} ${J}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((Z,K)=>{var se;const[ne,ie]=Z.split("-");return E.length?ce.createElement("ol",{key:Z,dir:w==="auto"?t7():w,tabIndex:-1,ref:F,className:d,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":ne,"data-x-position":ie,style:{"--front-toast-height":`${((se=$[0])==null?void 0:se.height)||0}px`,"--width":`${Iye}px`,"--gap":`${N}px`,...x,...Fye(u,h)},onBlur:be=>{q.current&&!be.currentTarget.contains(be.relatedTarget)&&(q.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||q.current||(q.current=!0,ee.current=be.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:be=>{be.target instanceof HTMLElement&&be.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},E.filter(be=>!be.position&&K===0||be.position===Z).map((be,ue)=>{var oe,pe;return ce.createElement(Lye,{key:be.id,icons:C,index:ue,toast:be,defaultRichColors:f,duration:(oe=b?.duration)!=null?oe:v,className:b?.className,descriptionClassName:b?.descriptionClassName,invert:a,visibleToasts:g,closeButton:(pe=b?.closeButton)!=null?pe:c,interacting:z,position:Z,style:b?.style,unstyled:b?.unstyled,classNames:b?.classNames,cancelButtonStyle:b?.cancelButtonStyle,actionButtonStyle:b?.actionButtonStyle,closeButtonAriaLabel:b?.closeButtonAriaLabel,removeToast:U,toasts:E.filter(ye=>ye.position==be.position),heights:$.filter(ye=>ye.position==be.position),setHeights:T,expandByDefault:l,gap:N,expanded:I,swipeDirections:e.swipeDirections})})):null}))}),Uye=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class AI extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class r7 extends AI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s7 extends AI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class n7 extends AI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var sP;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(sP||(sP={}));class zye{constructor(e,{headers:s={},customFetch:n,region:a=sP.Any}={}){this.url=e,this.headers=s,this.region=a,this.fetch=Uye(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Zr(this,arguments,void 0,function*(s,n={}){var a;try{const{headers:i,method:o,body:l,signal:c}=n;let d={},{region:u}=n;u||(u=this.region);const h=new URL(`${this.url}/${s}`);u&&u!=="any"&&(d["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let m;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(d["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(d["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:m,signal:c}).catch(b=>{throw b.name==="AbortError"?b:new r7(b)}),v=f.headers.get("x-relay-error");if(v&&v==="true")throw new s7(f);if(!f.ok)throw new n7(f);let x=((a=f.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield f.json():x==="application/octet-stream"||x==="application/pdf"?g=yield f.blob():x==="text/event-stream"?g=f:x==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new r7(i)}:{data:null,error:i,response:i instanceof n7||i instanceof s7?i.context:void 0}}})}}var Zo={};const Xv=qle(Zge);var B2={},U2={},z2={},V2={},W2={},q2={},a7;function sQ(){if(a7)return q2;a7=1,Object.defineProperty(q2,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return q2.default=t,q2}var i7;function nQ(){if(i7)return W2;i7=1,Object.defineProperty(W2,"__esModule",{value:!0});const e=Xv.__importDefault(sQ());class s{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,u,h,m;let f=null,v=null,x=null,g=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?v=S:v=JSON.parse(S))}const N=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),C=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");N&&C&&C.length>1&&(x=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(f={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,g=406,b="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const N=await c.text();try{f=JSON.parse(N),Array.isArray(f)&&c.status===404&&(v=[],f=null,g=200,b="OK")}catch{c.status===404&&N===""?(g=204,b="No Content"):f={message:N}}if(f&&this.isMaybeSingle&&(!((m=f?.details)===null||m===void 0)&&m.includes("0 rows"))&&(f=null,g=200,b="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:v,count:x,status:g,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,u,h;return{error:{message:`${(d=c?.name)!==null&&d!==void 0?d:"FetchError"}: ${c?.message}`,details:`${(u=c?.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return W2.default=s,W2}var o7;function aQ(){if(o7)return V2;o7=1,Object.defineProperty(V2,"__esModule",{value:!0});const e=Xv.__importDefault(nQ());class s extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var u;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${m}"; options=${h};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return V2.default=s,V2}var l7;function EI(){if(l7)return z2;l7=1,Object.defineProperty(z2,"__esModule",{value:!0});const e=Xv.__importDefault(aQ()),s=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&s.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${d}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return z2.default=n,z2}var c7;function iQ(){if(c7)return U2;c7=1,Object.defineProperty(U2,"__esModule",{value:!0});const e=Xv.__importDefault(EI());class s{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let d=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!d?"":(h==='"'&&(d=!d),h)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var d;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return U2.default=s,U2}var d7;function Vye(){if(d7)return B2;d7=1,Object.defineProperty(B2,"__esModule",{value:!0});const t=Xv,e=t.__importDefault(iQ()),s=t.__importDefault(EI());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:d}={}){var u;let h;const m=new URL(`${this.url}/rpc/${i}`);let f;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([x,g])=>g!==void 0).map(([x,g])=>[x,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([x,g])=>{m.searchParams.append(x,g)})):(h="POST",f=o);const v=new Headers(this.headers);return d&&v.set("Prefer",`count=${d}`),new s.default({method:h,url:m,headers:v,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return B2.default=n,B2}var u7;function Wye(){if(u7)return Zo;u7=1,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.PostgrestError=Zo.PostgrestBuilder=Zo.PostgrestTransformBuilder=Zo.PostgrestFilterBuilder=Zo.PostgrestQueryBuilder=Zo.PostgrestClient=void 0;const t=Xv,e=t.__importDefault(Vye());Zo.PostgrestClient=e.default;const s=t.__importDefault(iQ());Zo.PostgrestQueryBuilder=s.default;const n=t.__importDefault(EI());Zo.PostgrestFilterBuilder=n.default;const a=t.__importDefault(aQ());Zo.PostgrestTransformBuilder=a.default;const i=t.__importDefault(nQ());Zo.PostgrestBuilder=i.default;const o=t.__importDefault(sQ());return Zo.PostgrestError=o.default,Zo.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},Zo}var oQ=Wye();const lQ=cn(oQ),qye=KO({__proto__:null,default:lQ},[oQ]),{PostgrestClient:Hye,PostgrestQueryBuilder:krt,PostgrestFilterBuilder:_rt,PostgrestTransformBuilder:Art,PostgrestBuilder:Ert,PostgrestError:Prt}=lQ||qye;class Gye{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Yye="2.80.0",Kye=`realtime-js/${Yye}`,Xye="1.0.0",nP=1e4,Qye=1e3,Zye=100;var F1;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(F1||(F1={}));var Yi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Yi||(Yi={}));var fu;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fu||(fu={}));var aP;(function(t){t.websocket="websocket"})(aP||(aP={}));var px;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(px||(px={}));class Jye{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const a=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class cQ{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ya;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ya||(ya={}));const h7=(t,e,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=e1e(o,t,e,a),i),{}):{}},e1e=(t,e,s,n)=>{const a=e.find(l=>l.name===t),i=a?.type,o=s[t];return i&&!n.includes(i)?dQ(i,o):iP(o)},dQ=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return n1e(e,s)}switch(t){case ya.bool:return t1e(e);case ya.float4:case ya.float8:case ya.int2:case ya.int4:case ya.int8:case ya.numeric:case ya.oid:return r1e(e);case ya.json:case ya.jsonb:return s1e(e);case ya.timestamp:return a1e(e);case ya.abstime:case ya.date:case ya.daterange:case ya.int4range:case ya.int8range:case ya.money:case ya.reltime:case ya.text:case ya.time:case ya.timestamptz:case ya.timetz:case ya.tsrange:case ya.tstzrange:return iP(e);default:return iP(e)}},iP=t=>t,t1e=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},r1e=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},s1e=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n1e=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>dQ(e,l))}return t},a1e=t=>typeof t=="string"?t.replace(" ","T"):t,uQ=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class eC{constructor(e,s,n={},a=nP){this.channel=e,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var m7;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(m7||(m7={}));class B1{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=B1.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=B1.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=B1.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,a){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const m=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),v=u.filter(g=>f.indexOf(g.presence_ref)<0),x=h.filter(g=>m.indexOf(g.presence_ref)<0);v.length>0&&(l[d]=v),x.length>0&&(c[d]=x)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(e,s,n,a){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const a=e[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var f7;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(f7||(f7={}));var U1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(U1||(U1={}));var pm;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(pm||(pm={}));class PI{constructor(e,s={config:{}},n){var a,i;if(this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Yi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new eC(this,fu.join,this.params,this.timeout),this.rejoinTimer=new cQ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Yi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fu.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new B1(this),this.broadcastEndpointURL=uQ(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Yi.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[U1.PRESENCE]&&this.bindings[U1.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e?.(pm.CHANNEL_ERROR,f)),this._onClose(()=>e?.(pm.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var v;if(this.socket.setAuth(),f===void 0){e?.(pm.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(v=x?.length)!==null&&v!==void 0?v:0,b=[];for(let w=0;w<g;w++){const N=x[w],{filter:{event:C,schema:S,table:A,filter:k}}=N,E=f&&f[w];if(E&&E.event===C&&E.schema===S&&E.table===A&&E.filter===k)b.push(Object.assign(Object.assign({},N),{id:E.id}));else{this.unsubscribe(),this.state=Yi.errored,e?.(pm.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(pm.SUBSCRIBED);return}}).receive("error",f=>{this.state=Yi.errored,e?.(pm.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(pm.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===Yi.joined&&e===U1.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async httpSend(e,s,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,s={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Yi.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fu.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new eC(this,fu.leave,{},e),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Yi.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new eC(this,e,s,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Zye){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=fu;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var v,x,g;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(x=f.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var v,x,g,b,w,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,S=(v=f.filter)===null||v===void 0?void 0:v.event;return C&&((x=s.ids)===null||x===void 0?void 0:x.includes(C))&&(S==="*"||S?.toLocaleLowerCase()===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const C=(w=(b=f?.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return C==="*"||C===((N=s?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:g,commit_timestamp:b,type:w,errors:N}=v;m=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:b,eventType:w,new:{},old:{},errors:N}),this._getPayloadRecords(v))}f.callback(m,n)})}_isClosed(){return this.state===Yi.closed}_isJoined(){return this.state===Yi.joined}_isJoining(){return this.state===Yi.joining}_isLeaving(){return this.state===Yi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const a=e.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&PI.isEqual(a.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fu.close,{},e)}_onError(e){this._on(fu.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=h7(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=h7(e.columns,e.old_record)),s}}const tC=()=>{},H2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i1e=[1e3,2e3,5e3,1e4],o1e=1e4,l1e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c1e{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nP,this.transport=null,this.heartbeatIntervalMs=H2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tC,this.ref=0,this.reconnectTimer=null,this.logger=tC,this.conn=null,this.sendBuffer=[],this.serializer=new Jye,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${aP.websocket}`,this.httpEndpoint=uQ(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gye.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xye}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case F1.connecting:return px.Connecting;case F1.open:return px.Open;case F1.closing:return px.Closing;default:return px.Closed}}isConnected(){return this.connectionState()===px.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new PI(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Qye,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},H2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=s,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fu.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${e}${n}${a}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([l1e],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const a={access_token:s,version:Kye};s&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(fu.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new cQ(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},H2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,a,i,o,l,c,d,u;if(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:nP,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:H2.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:tC,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(h=>i1e[h-1]||o1e),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((h,m)=>m(JSON.stringify(h))),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class TI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ei(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class d1e extends TI{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oP extends TI{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}const OI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),u1e=()=>Response,lP=t=>{if(Array.isArray(t))return t.map(s=>lP(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=lP(n)}),e},h1e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rC=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},m1e=(t,e,s)=>Zr(void 0,void 0,void 0,function*(){const n=yield u1e();t instanceof n&&!s?.noResolveJson?t.json().then(a=>{const i=t.status||500,o=a?.statusCode||i+"";e(new d1e(rC(a),i,o))}).catch(a=>{e(new oP(rC(a),a))}):e(new oP(rC(t),t))}),f1e=(t,e,s,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!n?a:(h1e(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),s))};function Nw(t,e,s,n,a,i){return Zr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,f1e(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>m1e(c,l,n))})})}function mb(t,e,s,n){return Zr(this,void 0,void 0,function*(){return Nw(t,"GET",e,s,n)})}function uu(t,e,s,n,a){return Zr(this,void 0,void 0,function*(){return Nw(t,"POST",e,n,a,s)})}function cP(t,e,s,n,a){return Zr(this,void 0,void 0,function*(){return Nw(t,"PUT",e,n,a,s)})}function p1e(t,e,s,n){return Zr(this,void 0,void 0,function*(){return Nw(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function II(t,e,s,n,a){return Zr(this,void 0,void 0,function*(){return Nw(t,"DELETE",e,n,a,s)})}class x1e{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return Zr(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ei(e))return{data:null,error:e};throw e}})}}var hQ;class g1e{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[hQ]="BlobDownloadBuilder",this.promise=null}asStream(){return new x1e(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Zr(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ei(e))return{data:null,error:e};throw e}})}}hQ=Symbol.toStringTag;const v1e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},p7={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class y1e{constructor(e,s={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=OI(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,a){return Zr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},p7),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?cP:uu)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ei(i))return{data:null,error:i};throw i}})}upload(e,s,n){return Zr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,a){return Zr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:p7.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield cP(this.fetch,l.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ei(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Zr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);s?.upsert&&(a["x-upsert"]="true");const i=yield uu(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new TI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ei(n))return{data:null,error:n};throw n}})}update(e,s,n){return Zr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Zr(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}copy(e,s,n){return Zr(this,void 0,void 0,function*(){try{return{data:{path:(yield uu(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,n){return Zr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield uu(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,n){return Zr(this,void 0,void 0,function*(){try{const a=yield uu(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}download(e,s){const a=typeof s?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(s?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>mb(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new g1e(c,this.shouldThrowOnError)}info(e){return Zr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield mb(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:lP(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ei(n))return{data:null,error:n};throw n}})}exists(e){return Zr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield p1e(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ei(n)&&n instanceof oP){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),a=[],i=s?.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const l=typeof s?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(s?.transform||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield II(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}list(e,s,n){return Zr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},v1e),s),{prefix:e||""});return{data:yield uu(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}listV2(e,s){return Zr(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield uu(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ei(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const mQ="2.80.0",fQ={"X-Client-Info":`storage-js/${mQ}`};class b1e{constructor(e,s={},n,a){this.shouldThrowOnError=!1;const i=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fQ),s),this.fetch=OI(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Zr(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(e);return{data:yield mb(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}getBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield mb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}createBucket(e){return Zr(this,arguments,void 0,function*(s,n={public:!1}){try{return{data:yield uu(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ei(a))return{data:null,error:a};throw a}})}updateBucket(e,s){return Zr(this,void 0,void 0,function*(){try{return{data:yield cP(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ei(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield II(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class w1e{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fQ),s),this.fetch=OI(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}listBuckets(e){return Zr(this,void 0,void 0,function*(){try{const s=new URLSearchParams;e?.limit!==void 0&&s.set("limit",e.limit.toString()),e?.offset!==void 0&&s.set("offset",e.offset.toString()),e?.sortColumn&&s.set("sortColumn",e.sortColumn),e?.sortOrder&&s.set("sortOrder",e.sortOrder),e?.search&&s.set("search",e.search);const n=s.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield mb(this.fetch,a,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield II(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ei(s))return{data:null,error:s};throw s}})}}const $I={"X-Client-Info":`storage-js/${mQ}`,"Content-Type":"application/json"};class pQ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $c(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class sC extends pQ{constructor(e,s,n){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class j1e extends pQ{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}}var x7;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(x7||(x7={}));const DI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),N1e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},g7=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),S1e=(t,e,s)=>Zr(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!s?.noResolveJson){const a=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const l=o?.statusCode||o?.code||a+"";e(new sC(g7(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new sC(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new sC(l,a,o))}}else e(new j1e(g7(t),t))}),C1e=(t,e,s,n)=>{const a={method:t,headers:e?.headers||{}};return n?(N1e(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),s)):a};function k1e(t,e,s,n,a,i){return Zr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,C1e(e,n,a,i)).then(c=>{if(!c.ok)throw c;if(n?.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>S1e(c,l,n))})})}function Dc(t,e,s,n,a){return Zr(this,void 0,void 0,function*(){return k1e(t,"POST",e,n,a,s)})}class _1e{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$I),s),this.fetch=DI(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Zr(this,void 0,void 0,function*(){try{return{data:(yield Dc(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}getIndex(e,s){return Zr(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($c(n))return{data:null,error:n};throw n}})}listIndexes(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}deleteIndex(e,s){return Zr(this,void 0,void 0,function*(){try{return{data:(yield Dc(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($c(n))return{data:null,error:n};throw n}})}}class A1e{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$I),s),this.fetch=DI(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Zr(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Dc(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}getVectors(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}listVectors(e){return Zr(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Dc(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}queryVectors(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}deleteVectors(e){return Zr(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Dc(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}}class E1e{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$I),s),this.fetch=DI(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:(yield Dc(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}getBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:yield Dc(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}listBuckets(){return Zr(this,arguments,void 0,function*(e={}){try{return{data:yield Dc(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Zr(this,void 0,void 0,function*(){try{return{data:(yield Dc(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($c(s))return{data:null,error:s};throw s}})}}class P1e extends E1e{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new T1e(this.url,this.headers,e,this.fetch)}}class T1e extends _1e{constructor(e,s,n,a){super(e,s,a),this.vectorBucketName=n}createIndex(e){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Zr(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Zr(this,arguments,void 0,function*(s={}){return e.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Zr(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Zr(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new O1e(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class O1e extends A1e{constructor(e,s,n,a,i){super(e,s,i),this.vectorBucketName=n,this.indexName=a}putVectors(e){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Zr(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Zr(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Zr(this,arguments,void 0,function*(s={}){return e.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Zr(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Zr(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class I1e extends b1e{constructor(e,s={},n,a){super(e,s,n,a)}from(e){return new y1e(this.url,this.headers,e,this.fetch)}get vectors(){return new P1e(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new w1e(this.url+"/iceberg",this.headers,this.fetch)}}const $1e="2.80.0";let j1="";typeof Deno<"u"?j1="deno":typeof document<"u"?j1="web":typeof navigator<"u"&&navigator.product==="ReactNative"?j1="react-native":j1="node";const D1e={"X-Client-Info":`supabase-js-${j1}/${$1e}`},R1e={headers:D1e},M1e={schema:"public"},L1e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},F1e={},B1e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),U1e=()=>Headers,z1e=(t,e,s)=>{const n=B1e(s),a=U1e();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let d=new a(o?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))}};function V1e(t){return t.endsWith("/")?t:t+"/"}function W1e(t,e){var s,n;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h?.headers)!==null&&s!==void 0?s:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function q1e(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(V1e(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const xQ="2.80.0",y0=30*1e3,dP=3,nC=dP*y0,H1e="http://localhost:9999",G1e="supabase.auth.token",Y1e={"X-Client-Info":`gotrue-js/${xQ}`},uP="X-Supabase-Api-Version",gQ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K1e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X1e=600*1e3;class fb extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function as(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Q1e extends fb{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Z1e(t){return as(t)&&t.name==="AuthApiError"}class xx extends fb{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class up extends fb{constructor(e,s,n,a){super(e,n,a),this.name=s,this.status=n}}class ou extends up{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J1e(t){return as(t)&&t.name==="AuthSessionMissingError"}class s0 extends up{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class G2 extends up{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Y2 extends up{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ebe(t){return as(t)&&t.name==="AuthImplicitGrantRedirectError"}class v7 extends up{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hP extends up{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function aC(t){return as(t)&&t.name==="AuthRetryableFetchError"}class y7 extends up{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class mP extends up{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),b7=` 	
\r=`.split(""),tbe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<b7.length;e+=1)t[b7[e].charCodeAt(0)]=-2;for(let e=0;e<bN.length;e+=1)t[bN[e].charCodeAt(0)]=e;return t})();function w7(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(bN[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(bN[n]),e.queuedBits-=6}}function vQ(t,e,s){const n=tbe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function j7(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{nbe(o,n,s)};for(let o=0;o<t.length;o+=1)vQ(t.charCodeAt(o),a,i);return e.join("")}function rbe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sbe(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}rbe(n,e)}}function nbe(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function G0(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)vQ(t.charCodeAt(a),s,n);return new Uint8Array(e)}function abe(t){const e=[];return sbe(t,s=>e.push(s)),new Uint8Array(e)}function bx(t){const e=[],s={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>w7(a,s,n)),w7(null,s,n),e.join("")}function ibe(t){return Math.round(Date.now()/1e3)+t}function obe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const sl=()=>typeof window<"u"&&typeof document<"u",Xp={tested:!1,writable:!1},yQ=()=>{if(!sl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xp.tested)return Xp.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Xp.tested=!0,Xp.writable=!0}catch{Xp.tested=!0,Xp.writable=!1}return Xp.writable};function lbe(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{e[a]=n}),e}const bQ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cbe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",b0=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Qp=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},bf=async(t,e)=>{await t.removeItem(e)};class f5{constructor(){this.promise=new f5.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}f5.promiseConstructor=Promise;function iC(t){const e=t.split(".");if(e.length!==3)throw new mP("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!K1e.test(e[n]))throw new mP("JWT not in base64url format");return{header:JSON.parse(j7(e[0])),payload:JSON.parse(j7(e[1])),signature:G0(e[2]),raw:{header:e[0],payload:e[1]}}}async function dbe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ube(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function hbe(t){return("0"+t.toString(16)).substr(-2)}function mbe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,hbe).join("")}async function fbe(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function pbe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await fbe(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function n0(t,e,s=!1){const n=mbe();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await b0(t,`${e}-code-verifier`,a);const i=await pbe(n);return[i,n===i?"plain":"s256"]}const xbe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gbe(t){const e=t.headers.get(uP);if(!e||!e.match(xbe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vbe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ybe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bbe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function a0(t){if(!bbe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oC(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wbe(t,e){return new Proxy(t,{get:(s,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,n,a)}})}function N7(t){return JSON.parse(JSON.stringify(t))}const ax=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jbe=[502,503,504];async function S7(t){var e;if(!cbe(t))throw new hP(ax(t),0);if(jbe.includes(t.status))throw new hP(ax(t),t.status);let s;try{s=await t.json()}catch(i){throw new xx(ax(i),i)}let n;const a=gbe(t);if(a&&a.getTime()>=gQ["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new y7(ax(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ou}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new y7(ax(s),t.status,s.weak_password.reasons);throw new Q1e(ax(s),t.status||500,n)}const Nbe=(t,e,s,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function Ss(t,e,s,n){var a;const i=Object.assign({},n?.headers);i[uP]||(i[uP]=gQ["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Sbe(t,e,s+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function Sbe(t,e,s,n,a,i){const o=Nbe(e,n,a,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new hP(ax(c),0)}if(l.ok||await S7(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await S7(c)}}function lu(t){var e;let s=null;_be(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ibe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function C7(t){const e=lu(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Df(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Cbe(t){return{data:t,error:null}}function kbe(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=t,o=dp(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function k7(t){return t}function _be(t){return t.access_token&&t.refresh_token&&t.expires_in}const lC=["global","local","others"];class Abe{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=bQ(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=lC[0]){if(lC.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lC.join(", ")}`);try{return await Ss(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(as(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await Ss(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Df})}catch(n){if(as(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=dp(e,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Ss(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:kbe,redirectTo:s?.redirectTo})}catch(s){if(as(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Ss(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Df})}catch(s){if(as(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ss(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:k7});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(as(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){a0(e);try{return await Ss(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Df})}catch(s){if(as(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){a0(e);try{return await Ss(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Df})}catch(n){if(as(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){a0(e);try{return await Ss(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Df})}catch(n){if(as(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){a0(e.userId);try{const{data:s,error:n}=await Ss(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(as(s))return{data:null,error:s};throw s}}async _deleteFactor(e){a0(e.userId),a0(e.id);try{return{data:await Ss(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ss(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:k7});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(as(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await Ss(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(as(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await Ss(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(as(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await Ss(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(as(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ss(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(as(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await Ss(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(as(s))return{data:null,error:s};throw s}}}function _7(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const i0={debug:!!(globalThis&&yQ()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wQ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ebe extends wQ{}async function Pbe(t,e,s){i0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),i0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){i0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await s()}finally{i0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw i0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ebe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(i0.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Tbe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jQ(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Obe(t){return parseInt(t,16)}function Ibe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function $be(t){var e;const{chainId:s,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:m}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=jQ(t.address),v=u?`${u}://${n}`:n,x=t.statement?`${t.statement}
`:"",g=`${v} wants you to sign in with your Ethereum account:
${f}

${x}`;let b=`URI: ${h}
Version: ${m}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),d){let w=`
Resources:`;for(const N of d){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);w+=`
- ${N}`}b+=w}return`${g}
${b}`}class Ri extends Error{constructor({message:e,code:s,cause:n,name:a}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class wN extends Ri{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function Dbe({error:t,options:e}){var s,n,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ri({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ri({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ri({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ri({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ri({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ri({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ri({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ri({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(NQ(o)){if(i.rp.id!==o)return new Ri({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ri({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ri({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Rbe({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ri({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ri({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(NQ(n)){if(s.rpId!==n)return new Ri({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ri({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Mbe{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Lbe=new Mbe;function Fbe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:n}=t,a=dp(t,["challenge","user","excludeCredentials"]),i=G0(e).buffer,o=Object.assign(Object.assign({},s),{id:G0(s.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:G0(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Bbe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,n=dp(t,["challenge","allowCredentials"]),a=G0(e).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const l=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:G0(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Ube(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:bx(new Uint8Array(t.response.attestationObject)),clientDataJSON:bx(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:bx(new Uint8Array(a.authenticatorData)),clientDataJSON:bx(new Uint8Array(a.clientDataJSON)),signature:bx(new Uint8Array(a.signature)),userHandle:a.userHandle?bx(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function NQ(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function A7(){var t,e;return!!(sl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Vbe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wN("Browser returned unexpected credential type",e)}:{data:null,error:new wN("Empty credential response",e)}}catch(e){return{data:null,error:Dbe({error:e,options:t})}}}async function Wbe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wN("Browser returned unexpected credential type",e)}:{data:null,error:new wN("Empty credential response",e)}}catch(e){return{data:null,error:Rbe({error:e,options:t})}}}const qbe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Hbe={userVerification:"preferred",hints:["security-key"]};function jN(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),s=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(s(o))n[i]=o;else if(e(o)){const l=n[i];e(l)?n[i]=jN(l,o):n[i]=jN(o)}else n[i]=o}return n}function Gbe(t,e){return jN(qbe,t,e||{})}function Ybe(t,e){return jN(Hbe,t,e||{})}class Kbe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!o)return{data:null,error:l};const c=a??Lbe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=Gbe(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:h}=await Vbe({publicKey:d,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const d=Ybe(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:h}=await Wbe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return as(o)?{data:null,error:o}:{data:null,error:new xx("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:s,webauthn:n}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!s)return{data:null,error:new fb("rpId is required for WebAuthn authentication")};try{if(!A7())return{data:null,error:new xx("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:s,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return as(o)?{data:null,error:o}:{data:null,error:new xx("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!s)return{data:null,error:new fb("rpId is required for WebAuthn registration")};try{if(!A7())return{data:null,error:new xx("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:s,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return as(o)?{data:null,error:o}:{data:null,error:new xx("Unexpected error in register",o)}}}}Tbe();const Xbe={url:H1e,storageKey:G1e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y1e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function E7(t,e,s){return await s()}const o0={};class pb{get jwks(){var e,s;return(s=(e=o0[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){o0[this.storageKey]=Object.assign(Object.assign({},o0[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=o0[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){o0[this.storageKey]=Object.assign(Object.assign({},o0[this.storageKey]),{cachedAt:e})}constructor(e){var s,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Xbe),e);if(this.storageKey=i.storageKey,this.instanceID=(s=pb.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,pb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&sl()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Abe({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bQ(i.fetch),this.lock=i.lock||E7,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:sl()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=Pbe:this.lock=E7,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kbe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:yQ()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_7(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=_7(this.memoryStorage)),sl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xQ}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},n="none";if(sl()&&(s=lbe(window.location.href),this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce")),sl()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ebe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return as(s)?this._returnResult({error:s}):this._returnResult({error:new xx("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,a;try{const i=await Ss(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:lu}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(as(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,n,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,v=null;this.flowType==="pkce"&&([f,v]=await n0(this.storage,this.storageKey)),i=await Ss(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:u,password:h,data:(s=m?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:v},xform:lu})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await Ss(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m?.data)!==null&&n!==void 0?n:{},channel:(a=m?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:lu})}else throw new G2("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(as(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:C7})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:C7})}else throw new G2("You must provide either an email or phone number and a password");const{data:n,error:a}=s;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new s0;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(as(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,n,a,i,o,l,c,d,u,h,m;let f,v;if("message"in e)f=e.message,v=e.signature;else{const{chain:x,wallet:g,statement:b,options:w}=e;let N;if(sl())if(typeof g=="object")N=g;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")N=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=g}const C=new URL((s=w?.url)!==null&&s!==void 0?s:window.location.href),S=await N.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=jQ(S[0]);let k=(n=w?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const O=await N.request({method:"eth_chainId"});k=Obe(O)}const E={domain:C.host,address:A,statement:b,uri:C.href,version:"1",chainId:k,nonce:(a=w?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=w?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=w?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=w?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=w?.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=$be(E),v=await N.request({method:"personal_sign",params:[Ibe(f),A]})}try{const{data:x,error:g}=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:lu});if(g)throw g;if(!x||!x.session||!x.user){const b=new s0;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:g})}catch(x){if(as(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var s,n,a,i,o,l,c,d,u,h,m,f;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:g,wallet:b,statement:w,options:N}=e;let C;if(sl())if(typeof b=="object")C=b;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))C=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const S=new URL((s=N?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in C&&C.signIn){const A=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let k;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")k=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)k=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)v=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=N?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=N?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((l=N?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((c=N?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(u=N?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...N.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const A=await C.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=A}}try{const{data:g,error:b}=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:bx(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:lu});if(b)throw b;if(!g||!g.session||!g.user){const w=new s0;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(as(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const s=await Qp(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:o}=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:lu});if(await bf(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new s0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(as(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:a,access_token:i,nonce:o}=e,l=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:lu}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const u=new s0;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(s){if(as(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,n,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await n0(this.storage,this.storageKey));const{error:h}=await Ss(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await Ss(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:u})}throw new G2("You must provide either an email or phone number.")}catch(l){if(as(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var s,n;try{let a,i;"options"in e&&(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ss(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:lu});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(as(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var s,n,a;try{let i=null,o=null;this.flowType==="pkce"&&([i,o]=await n0(this.storage,this.storageKey));const l=await Ss(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Cbe});return this._returnResult(l)}catch(i){if(as(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new ou;const{error:a}=await Ss(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(as(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await Ss(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await Ss(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new G2("You must provide either an email or phone number and a type")}catch(s){if(as(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Qp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<nC:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Qp(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=oC()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=wbe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ss(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Df}):await this._useSession(async s=>{var n,a,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ou}:await Ss(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Df})})}catch(s){if(as(s))return J1e(s)&&(await this._removeSession(),await bf(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ou;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await n0(this.storage,this.storageKey));const{data:d,error:u}=await Ss(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Df});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(as(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ou;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:o}=iC(e.access_token);if(o.exp&&(n=o.exp,a=n<=s),a){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(as(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new ou;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(as(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!sl())throw new Y2("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Y2(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new v7("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Y2("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new v7("No code detected.");const{data:w,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Y2("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;c&&(m=parseInt(c));const f=m-u;f*1e3<=y0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const v=m-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:x,error:g}=await this._getUser(i);if(g)throw g;const b={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(n){if(as(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Qp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Z1e(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await bf(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=obe(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await n0(this.storage,this.storageKey,!0));try{return await Ss(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(as(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ss(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return sl()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(as(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var n;try{const{error:a,data:{session:i}}=s;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:u}=e,h=await Ss(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:lu}),{data:m,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new s0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:f}))}catch(a){if(as(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:o}=s;if(o)throw o;return await Ss(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await ube(async a=>(a>0&&await dbe(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await Ss(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lu})),(a,i)=>{const o=200*Math.pow(2,a);return i&&aC(i)&&Date.now()+o-n<y0})}catch(n){if(this._debug(s,"error",n),as(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),sl()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Qp(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Qp(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await b0(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:oC()}else if(a&&!a.user&&!a.user){const o=await Qp(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await bf(this.storage,this.storageKey+"-user"),await b0(this.storage,this.storageKey,a)):a.user=oC()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<nC;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${nC}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),aC(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new ou;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new f5;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ou;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),as(i)){const o={data:null,error:i};return aC(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await b0(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=N7(a);await b0(this.storage,this.storageKey,i)}else{const a=N7(s);await b0(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await bf(this.storage,this.storageKey),await bf(this.storage,this.storageKey+"-code-verifier"),await bf(this.storage,this.storageKey+"-user"),this.userStorage&&await bf(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sl()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),y0);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/y0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${y0}ms, refresh threshold is ${dP} ticks`),a<=dP&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wQ)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sl()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await n0(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?this._returnResult({data:null,error:i}):await Ss(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,a;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await Ss(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ube(e.webauthn.credential_response):zbe(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Ss(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await Ss(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Fbe(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Bbe(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s?.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=iC(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((s=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;return a?this._returnResult({data:null,error:a}):n?await Ss(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ou})})}catch(s){if(as(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ou});const o=await Ss(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&sl()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(as(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ou});const o=await Ss(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&sl()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(as(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+X1e>a)return n;const{data:i,error:o}=await Ss(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:f,error:v}=await this.getSession();if(v||!f.session)return this._returnResult({data:null,error:v});n=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=iC(n);s?.allowExpired||vbe(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!d){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const u=ybe(a.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,abe(`${l}.${c}`)))throw new mP("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(as(n))return this._returnResult({data:null,error:n});throw n}}}pb.nextInstanceID={};const Qbe=pb;class Zbe extends Qbe{constructor(e){super(e)}}class Jbe{constructor(e,s,n){var a,i,o;this.supabaseUrl=e,this.supabaseKey=s;const l=q1e(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:M1e,realtime:F1e,auth:Object.assign(Object.assign({},L1e),{storageKey:c}),global:R1e},u=W1e(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=z1e(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Hye(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new I1e(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new zye(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,s;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:d,throwOnError:u},h,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zbe({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),h),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:d,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new c1e(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const RI=(t,e,s)=>new Jbe(t,e,s);function ewe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ewe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lf="ohfjkcajnqvethmrpdwc",wx="sb_publishable_qcx8OzZ_sr3T56gYax3iVw_lt1sRLg9",twe=Object.freeze(Object.defineProperty({__proto__:null,projectId:Lf,publicAnonKey:wx},Symbol.toStringTag,{value:"Module"}));var SQ={};const rwe=typeof process<"u"&&SQ?.NEXT_PUBLIC_SUPABASE_URL||`https://${Lf}.supabase.co`,swe=typeof process<"u"&&SQ?.NEXT_PUBLIC_SUPABASE_ANON_KEY||wx,Wr=RI(rwe||"https://placeholder.supabase.co",swe,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0},realtime:{params:{eventsPerSecond:10}}}),nwe=async()=>{const{data:{user:t},error:e}=await Wr.auth.getUser();return e?(console.error("Error getting user:",e),null):t},awe=async()=>{const{error:t}=await Wr.auth.signOut();if(t)throw console.error("Error signing out:",t),t},N1=t=>t?.code==="PGRST116"?"No data found":t?.code==="23505"?"A record with this information already exists":t?.code==="23503"?"Related record not found":t?.code==="42501"?"You do not have permission to perform this action":t?.message||"An unexpected error occurred",CQ=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:nwe,handleSupabaseError:N1,signOut:awe,supabase:Wr},Symbol.toStringTag,{value:"Module"})),kQ=j.createContext(void 0),iwe=({children:t})=>{const{currentUser:e}=no(),[s,n]=j.useState([]),[a,i]=j.useState(!0),o=j.useCallback(()=>e?`notificationSettings_${e.id}`:"notificationSettings_guest",[e]),l=j.useCallback(()=>{if(typeof window<"u"){const E=o(),O=localStorage.getItem(E);if(O)try{return{...JS,...JSON.parse(O)}}catch($){console.error("Failed to parse notification settings:",$)}}return JS},[o]),[c,d]=j.useState(l);j.useEffect(()=>{d(l())},[l,e?.id]);const u=s.filter(E=>!E.read).length,h=j.useCallback(()=>{if(c.soundEnabled)try{const E=new(window.AudioContext||window.webkitAudioContext),O=E.createOscillator(),$=E.createGain();O.connect($),$.connect(E.destination),O.frequency.value=800,O.type="sine",$.gain.setValueAtTime(c.soundVolume/100*.3,E.currentTime),$.gain.exponentialRampToValueAtTime(.01,E.currentTime+.3),O.start(E.currentTime),O.stop(E.currentTime+.3)}catch(E){console.error("Error playing notification sound:",E)}},[c.soundEnabled,c.soundVolume]),m=j.useCallback(()=>{if(!c.quietHoursEnabled)return!1;const E=new Date,O=`${E.getHours().toString().padStart(2,"0")}:${E.getMinutes().toString().padStart(2,"0")}`,$=c.quietHoursStart,T=c.quietHoursEnd;return $>T?O>=$||O<=T:O>=$&&O<=T},[c.quietHoursEnabled,c.quietHoursStart,c.quietHoursEnd]),f=j.useCallback(async()=>{"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission()},[]),v=j.useCallback(E=>{!c.desktopEnabled||m()||!("Notification"in window)||Notification.permission!=="granted"||!(E.type==="booking"&&c.desktopForBookings||E.type==="payment"&&c.desktopForPayments||E.type==="cancellation"&&c.desktopForCancellations||E.type==="message"&&c.desktopForMessages)||new Notification(E.title,{body:E.message,icon:"/notification-icon.png",badge:"/notification-badge.png",tag:E.id})},[c,m]),x=j.useCallback(async E=>{if(e)try{const{error:O}=await Wr.from("notifications").insert({id:E.id,user_id:e.id,organization_id:e.organizationId,type:E.type,priority:E.priority,title:E.title,message:E.message,read:E.read,action_url:E.actionUrl,action_label:E.actionLabel,metadata:E.metadata||{},created_at:E.timestamp});O&&console.error("Error saving notification:",O)}catch(O){console.error("Error saving notification:",O)}},[e]),g=j.useCallback(async()=>{if(!e){i(!1);return}try{const{data:E,error:O}=await Wr.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(O)throw O;if(E){const $=E.map(T=>({id:T.id,type:T.type,priority:T.priority,title:T.title,message:T.message,timestamp:T.created_at,read:T.read,actionUrl:T.action_url,actionLabel:T.action_label,metadata:T.metadata}));n($)}}catch(E){console.error("Error fetching notifications:",E)}finally{i(!1)}},[e]);j.useEffect(()=>{g()},[g]),j.useEffect(()=>{if(f(),!e)return;const E=Wr.channel("bookings-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"bookings"},T=>{const I=T.new,L={id:`notif-booking-${Date.now()}`,type:"booking",priority:"high",title:"New Booking Received",message:`Booking ${I.booking_number} - ${I.total_amount?`$${I.total_amount}`:"Amount TBD"}`,timestamp:new Date().toISOString(),read:!1,actionUrl:"/bookings",actionLabel:"View Booking",metadata:{bookingId:I.id,amount:I.total_amount}};x(L),n(z=>[L,...z]),c.soundEnabled&&c.soundForBookings&&!m()&&h(),v(L),c.showInAppNotifications&&!m()&&re.success(L.title,{description:L.message})}).subscribe(),O=Wr.channel("booking-updates-notifications").on("postgres_changes",{event:"UPDATE",schema:"public",table:"bookings"},T=>{const I=T.new,L=T.old;if(I.status!==L.status){let z="Booking Updated",M="booking",V="medium";I.status==="cancelled"?(z="Booking Cancelled",M="cancellation",V="high"):I.status==="confirmed"&&(z="Booking Confirmed",V="high");const B={id:`notif-update-${Date.now()}`,type:M,priority:V,title:z,message:`Booking ${I.booking_number} status changed to ${I.status}`,timestamp:new Date().toISOString(),read:!1,actionUrl:"/bookings",actionLabel:"View Details",metadata:{bookingId:I.id,status:I.status}};n(F=>[B,...F]),M==="cancellation"&&c.soundEnabled&&c.soundForCancellations&&!m()&&h(),v(B),c.showInAppNotifications&&!m()&&re.info(B.title,{description:B.message})}}).subscribe(),$=Wr.channel("customers-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"customers"},T=>{const I=T.new,L={id:`notif-customer-${Date.now()}`,type:"customer",priority:"medium",title:"New Customer Registered",message:`${I.first_name} ${I.last_name} - ${I.email}`,timestamp:new Date().toISOString(),read:!1,actionUrl:"/customers",actionLabel:"View Customer",metadata:{customerId:I.id}};n(z=>[L,...z]),c.showInAppNotifications&&!m()&&re.success(L.title,{description:L.message})}).subscribe();return()=>{E.unsubscribe(),O.unsubscribe(),$.unsubscribe()}},[c,h,v,m,f,e]);const b=j.useCallback(E=>{n(O=>O.map($=>$.id===E?{...$,read:!0}:$))},[]),w=j.useCallback(()=>{n(E=>E.map(O=>({...O,read:!0})))},[]),N=j.useCallback(E=>{n(O=>O.filter($=>$.id!==E))},[]),C=j.useCallback(()=>{n([])},[]),S=j.useCallback(E=>{d(O=>{const $={...O,...E};if(typeof window<"u"){const T=o();localStorage.setItem(T,JSON.stringify($))}return E.desktopEnabled&&!O.desktopEnabled&&f(),$})},[f,o]),A=j.useCallback(()=>{d(JS)},[]),k={notifications:s,unreadCount:u,settings:c,markAsRead:b,markAllAsRead:w,deleteNotification:N,clearAll:C,updateSettings:S,clearSettings:A,playNotificationSound:h};return r.jsx(kQ.Provider,{value:k,children:t})},MI=()=>{const t=j.useContext(kQ);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},owe=nI("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function De({className:t,variant:e,asChild:s=!1,...n}){const a=s?YY:"span";return r.jsx(a,{"data-slot":"badge",className:Ar(owe({variant:e}),t),...n})}var lwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cwe=lwe.reduce((t,e)=>{const s=Wv(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),dwe="Separator",P7="horizontal",uwe=["horizontal","vertical"],_Q=j.forwardRef((t,e)=>{const{decorative:s,orientation:n=P7,...a}=t,i=hwe(n)?n:P7,l=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(cwe.div,{"data-orientation":i,...l,...a,ref:e})});_Q.displayName=dwe;function hwe(t){return uwe.includes(t)}var mwe=_Q;function Ze({className:t,orientation:e="horizontal",decorative:s=!0,...n}){return r.jsx(mwe,{"data-slot":"separator-root",decorative:s,orientation:e,className:Ar("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}function xb(t,[e,s]){return Math.min(s,Math.max(e,t))}function fwe(t,e){return j.useReducer((s,n)=>e[s][n]??s,t)}var LI="ScrollArea",[AQ]=fl(LI),[pwe,Md]=AQ(LI),EQ=j.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=t,[l,c]=j.useState(null),[d,u]=j.useState(null),[h,m]=j.useState(null),[f,v]=j.useState(null),[x,g]=j.useState(null),[b,w]=j.useState(0),[N,C]=j.useState(0),[S,A]=j.useState(!1),[k,E]=j.useState(!1),O=bs(e,T=>c(T)),$=mg(a);return r.jsx(pwe,{scope:s,type:n,dir:$,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:v,scrollbarXEnabled:S,onScrollbarXEnabledChange:A,scrollbarY:x,onScrollbarYChange:g,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:C,children:r.jsx(Jr.div,{dir:$,...o,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});EQ.displayName=LI;var PQ="ScrollAreaViewport",TQ=j.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:n,nonce:a,...i}=t,o=Md(PQ,s),l=j.useRef(null),c=bs(e,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(Jr.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});TQ.displayName=PQ;var $h="ScrollAreaScrollbar",OQ=j.forwardRef((t,e)=>{const{forceMount:s,...n}=t,a=Md($h,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=t.orientation==="horizontal";return j.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?r.jsx(xwe,{...n,ref:e,forceMount:s}):a.type==="scroll"?r.jsx(gwe,{...n,ref:e,forceMount:s}):a.type==="auto"?r.jsx(IQ,{...n,ref:e,forceMount:s}):a.type==="always"?r.jsx(FI,{...n,ref:e}):null});OQ.displayName=$h;var xwe=j.forwardRef((t,e)=>{const{forceMount:s,...n}=t,a=Md($h,t.__scopeScrollArea),[i,o]=j.useState(!1);return j.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(Uo,{present:s||i,children:r.jsx(IQ,{"data-state":i?"visible":"hidden",...n,ref:e})})}),gwe=j.forwardRef((t,e)=>{const{forceMount:s,...n}=t,a=Md($h,t.__scopeScrollArea),i=t.orientation==="horizontal",o=x5(()=>c("SCROLL_END"),100),[l,c]=fwe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),j.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const f=d[u];h!==f&&(c("SCROLL"),o()),h=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),r.jsx(Uo,{present:s||l!=="hidden",children:r.jsx(FI,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:ur(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ur(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),IQ=j.forwardRef((t,e)=>{const s=Md($h,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,o]=j.useState(!1),l=t.orientation==="horizontal",c=x5(()=>{if(s.viewport){const d=s.viewport.offsetWidth<s.viewport.scrollWidth,u=s.viewport.offsetHeight<s.viewport.scrollHeight;o(l?d:u)}},10);return ov(s.viewport,c),ov(s.content,c),r.jsx(Uo,{present:n||i,children:r.jsx(FI,{"data-state":i?"visible":"hidden",...a,ref:e})})}),FI=j.forwardRef((t,e)=>{const{orientation:s="vertical",...n}=t,a=Md($h,t.__scopeScrollArea),i=j.useRef(null),o=j.useRef(0),[l,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=LQ(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return Nwe(m,o.current,l,f)}return s==="horizontal"?r.jsx(vwe,{...u,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,f=T7(m,l,a.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):s==="vertical"?r.jsx(ywe,{...u,ref:e,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,f=T7(m,l);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),vwe=j.forwardRef((t,e)=>{const{sizes:s,onSizesChange:n,...a}=t,i=Md($h,t.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=bs(e,c,i.onScrollbarXChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(DQ,{"data-orientation":"horizontal",...a,ref:d,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":p5(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(m),BQ(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:SN(o.paddingLeft),paddingEnd:SN(o.paddingRight)}})}})}),ywe=j.forwardRef((t,e)=>{const{sizes:s,onSizesChange:n,...a}=t,i=Md($h,t.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=bs(e,c,i.onScrollbarYChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(DQ,{"data-orientation":"vertical",...a,ref:d,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":p5(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(m),BQ(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:SN(o.paddingTop),paddingEnd:SN(o.paddingBottom)}})}})}),[bwe,$Q]=AQ($h),DQ=j.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=t,f=Md($h,s),[v,x]=j.useState(null),g=bs(e,O=>x(O)),b=j.useRef(null),w=j.useRef(""),N=f.viewport,C=n.content-n.viewport,S=Co(u),A=Co(c),k=x5(h,10);function E(O){if(b.current){const $=O.clientX-b.current.left,T=O.clientY-b.current.top;d({x:$,y:T})}}return j.useEffect(()=>{const O=$=>{const T=$.target;v?.contains(T)&&S($,C)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[N,v,C,S]),j.useEffect(A,[n,A]),ov(v,k),ov(f.content,k),r.jsx(bwe,{scope:s,scrollbar:v,hasThumb:a,onThumbChange:Co(i),onThumbPointerUp:Co(o),onThumbPositionChange:A,onThumbPointerDown:Co(l),children:r.jsx(Jr.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:ur(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),b.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),E(O))}),onPointerMove:ur(t.onPointerMove,E),onPointerUp:ur(t.onPointerUp,O=>{const $=O.target;$.hasPointerCapture(O.pointerId)&&$.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=w.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),NN="ScrollAreaThumb",RQ=j.forwardRef((t,e)=>{const{forceMount:s,...n}=t,a=$Q(NN,t.__scopeScrollArea);return r.jsx(Uo,{present:s||a.hasThumb,children:r.jsx(wwe,{ref:e,...n})})}),wwe=j.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:n,...a}=t,i=Md(NN,s),o=$Q(NN,s),{onThumbPositionChange:l}=o,c=bs(e,h=>o.onThumbChange(h)),d=j.useRef(void 0),u=x5(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(u(),!d.current){const f=Swe(h,l);d.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,u,l]),r.jsx(Jr.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ur(t.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),v=h.clientX-f.left,x=h.clientY-f.top;o.onThumbPointerDown({x:v,y:x})}),onPointerUp:ur(t.onPointerUp,o.onThumbPointerUp)})});RQ.displayName=NN;var BI="ScrollAreaCorner",MQ=j.forwardRef((t,e)=>{const s=Md(BI,t.__scopeScrollArea),n=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&n?r.jsx(jwe,{...t,ref:e}):null});MQ.displayName=BI;var jwe=j.forwardRef((t,e)=>{const{__scopeScrollArea:s,...n}=t,a=Md(BI,s),[i,o]=j.useState(0),[l,c]=j.useState(0),d=!!(i&&l);return ov(a.scrollbarX,()=>{const u=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(u),c(u)}),ov(a.scrollbarY,()=>{const u=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(u),o(u)}),d?r.jsx(Jr.div,{...n,ref:e,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function SN(t){return t?parseInt(t,10):0}function LQ(t,e){const s=t/e;return isNaN(s)?0:s}function p5(t){const e=LQ(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-s)*e;return Math.max(n,18)}function Nwe(t,e,s,n="ltr"){const a=p5(s),i=a/2,o=e||i,l=a-o,c=s.scrollbar.paddingStart+o,d=s.scrollbar.size-s.scrollbar.paddingEnd-l,u=s.content-s.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return FQ([c,d],h)(t)}function T7(t,e,s="ltr"){const n=p5(e),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-a,o=e.content-e.viewport,l=i-n,c=s==="ltr"?[0,o]:[o*-1,0],d=xb(t,c);return FQ([0,o],[0,l])(d)}function FQ(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(s-t[0])}}function BQ(t,e){return t>0&&t<e}var Swe=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},n=0;return(function a(){const i={left:t.scrollLeft,top:t.scrollTop},o=s.left!==i.left,l=s.top!==i.top;(o||l)&&e(),s=i,n=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(n)};function x5(t,e){const s=Co(t),n=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),j.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,e)},[s,e])}function ov(t,e){const s=Co(e);Ai(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(s)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,s])}var Cwe=EQ,kwe=TQ,_we=MQ;function fa({className:t,children:e,...s}){return r.jsxs(Cwe,{"data-slot":"scroll-area",className:Ar("relative",t),...s,children:[r.jsx(kwe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),r.jsx(Awe,{}),r.jsx(_we,{})]})}function Awe({className:t,orientation:e="vertical",...s}){return r.jsx(OQ,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Ar("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:r.jsx(RQ,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Ewe({onNavigate:t=()=>{}}){const{theme:e}=Nr(),s=e==="dark",{notifications:n,unreadCount:a,markAsRead:i,markAllAsRead:o,deleteNotification:l}=MI(),[c,d]=j.useState(!1),u=n.slice(0,10),h=b=>{const w=s?"text-[#a3a3a3]":"text-gray-600";switch(b){case"booking":return r.jsx(qs,{className:`w-4 h-4 ${w}`});case"payment":return r.jsx(rn,{className:`w-4 h-4 ${w}`});case"cancellation":return r.jsx(Is,{className:`w-4 h-4 ${w}`});case"customer":return r.jsx(Nd,{className:`w-4 h-4 ${w}`});case"alert":return r.jsx(Nu,{className:`w-4 h-4 ${w}`});case"message":return r.jsx(ni,{className:`w-4 h-4 ${w}`});case"system":return r.jsx(Ws,{className:`w-4 h-4 ${w}`});default:return r.jsx(pi,{className:`w-4 h-4 ${w}`})}},m=b=>{switch(b){case"urgent":return s?"bg-red-500/20 border-red-500/40":"bg-red-50 border-red-200";case"high":return s?"bg-orange-500/20 border-orange-500/40":"bg-orange-50 border-orange-200";case"medium":return s?"bg-blue-500/20 border-blue-500/40":"bg-blue-50 border-blue-200";case"low":return s?"bg-gray-500/20 border-gray-500/40":"bg-gray-50 border-gray-200";default:return s?"bg-gray-500/20 border-gray-500/40":"bg-gray-50 border-gray-200"}},f=b=>{const w=new Date,N=new Date(b),C=w.getTime()-N.getTime(),S=Math.floor(C/6e4),A=Math.floor(C/36e5),k=Math.floor(C/864e5);return S<1?"Just now":S<60?`${S}m ago`:A<24?`${A}h ago`:k<7?`${k}d ago`:N.toLocaleDateString()},v=b=>{if(i(b.id),b.actionUrl&&t){const N={"/bookings":"bookings","/payment-history":"payment-history","/customers":"customers","/games":"games","/staff":"staff","/reports":"reports"}[b.actionUrl]||"dashboard";t(N),d(!1)}},x=b=>{b.stopPropagation(),o()},g=(b,w)=>{b.stopPropagation(),l(w)};return r.jsxs(Pn,{open:c,onOpenChange:d,children:[r.jsx(Tn,{asChild:!0,children:r.jsxs(W,{variant:"ghost",size:"icon",className:`relative ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-100"}`,children:[r.jsx(pi,{className:`w-5 h-5 ${s?"text-[#a3a3a3]":"text-gray-600"}`}),a>0&&r.jsx(De,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-[#4f46e5] text-white text-xs border-0",children:a>9?"9+":a})]})}),r.jsxs(On,{align:"end",sideOffset:8,className:`w-screen sm:w-[420px] max-w-[420px] p-0 ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"} sm:mr-0`,children:[r.jsx("div",{className:`p-3 sm:p-4 border-b ${s?"border-[#2a2a2a]":"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:`font-semibold text-base sm:text-lg ${s?"text-white":"text-gray-900"}`,children:"Notifications"}),a>0&&r.jsx(De,{className:"bg-[#4f46e5] text-white text-xs px-2 py-0.5 border-0",children:a})]}),a>0&&r.jsxs(W,{variant:"ghost",size:"sm",onClick:x,className:`h-8 text-xs gap-1 flex-shrink-0 ${s?"text-[#a3a3a3] hover:text-white hover:bg-[#161616]":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(IY,{className:"w-3.5 h-3.5 sm:w-3 sm:h-3"}),r.jsx("span",{className:"hidden sm:inline",children:"Mark all read"})]})]})}),r.jsx(fa,{className:"h-[60vh] sm:h-[400px] max-h-[500px]",children:u.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-center px-4",children:[r.jsx(pi,{className:`w-10 h-10 sm:w-12 sm:h-12 mb-3 ${s?"text-[#2a2a2a]":"text-gray-300"}`}),r.jsx("p",{className:`text-sm ${s?"text-[#737373]":"text-gray-500"}`,children:"No notifications yet"})]}):r.jsx("div",{className:"divide-y",style:{borderColor:s?"#2a2a2a":"#e5e7eb"},children:u.map(b=>r.jsx("div",{onClick:()=>v(b),className:`p-3 sm:p-4 cursor-pointer transition-colors active:scale-[0.98] ${b.read?s?"hover:bg-[#161616]":"hover:bg-gray-50":s?"bg-[#161616] hover:bg-[#1a1a1a]":"bg-blue-50 hover:bg-blue-100"}`,children:r.jsxs("div",{className:"flex gap-2.5 sm:gap-3",children:[r.jsx("div",{className:`w-9 h-9 sm:w-10 sm:h-10 rounded-full flex items-center justify-center flex-shrink-0 border ${m(b.priority)}`,children:h(b.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-0.5 sm:mb-1",children:[r.jsx("h4",{className:`text-sm leading-tight ${b.read?s?"text-[#a3a3a3]":"text-gray-700":s?"text-white":"text-gray-900 font-medium"}`,children:b.title}),!b.read&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-[#4f46e5] flex-shrink-0 mt-1"})]}),r.jsx("p",{className:`text-xs sm:text-sm mb-2 line-clamp-2 ${s?"text-[#737373]":"text-gray-600"}`,children:b.message}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:`text-xs flex-shrink-0 ${s?"text-[#737373]":"text-gray-500"}`,children:f(b.timestamp)}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[b.actionLabel&&r.jsxs(W,{variant:"ghost",size:"sm",className:`h-7 sm:h-6 text-xs gap-0.5 sm:gap-1 px-1.5 sm:px-2 ${s?"text-[#4f46e5] hover:bg-[#1a1a1a]":"text-blue-600 hover:bg-blue-50"}`,children:[r.jsx("span",{className:"truncate max-w-[60px] sm:max-w-none",children:b.actionLabel}),r.jsx($n,{className:"w-3 h-3 flex-shrink-0"})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:w=>g(w,b.id),className:`h-7 w-7 sm:h-6 sm:w-6 p-0 ${s?"text-[#737373] hover:text-red-400 hover:bg-[#1a1a1a]":"text-gray-400 hover:text-red-600 hover:bg-gray-100"}`,children:r.jsx(ks,{className:"w-3.5 h-3.5 sm:w-3 sm:h-3"})})]})]})]})]})},b.id))})}),u.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:s?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsx("div",{className:"p-2 sm:p-3",children:r.jsx(W,{variant:"ghost",className:`w-full justify-center text-sm h-10 sm:h-9 ${s?"text-[#4f46e5] hover:bg-[#161616]":"text-blue-600 hover:bg-blue-50"}`,onClick:()=>{t&&(t("notifications"),d(!1))},children:"View all notifications"})})]})]})]})}const lv="/assets/00e8f72492f468a73fc822a8f3b89537848df6aa-0xMsBHsB.png";function Pwe({onNavigate:t,onMobileMenuToggle:e}){const{currentUser:s,logout:n}=no(),[a,i]=j.useState(!1),[o,l]=j.useState(""),[c,d]=j.useState(""),u=j.useRef(null),h=async()=>{try{await n(),re.success("Logged out successfully")}catch(N){console.error("Logout error:",N),re.error("Failed to logout")}},m=()=>{i(!a)},f=N=>{if(!N.trim())return;const C=N.toLowerCase().trim(),S=[{keywords:["booking","reservation","appointment","schedule","calendar","book"],page:"bookings",message:"Navigating to Bookings..."},{keywords:["game","escape room","activity","experience","room","puzzle"],page:"games",message:"Navigating to Games..."},{keywords:["customer","client","guest","visitor","player","participant"],page:"customers",message:"Navigating to Customers..."},{keywords:["staff","employee","team","user","member","personnel","game master","gm"],page:"staff",message:"Navigating to Staff..."},{keywords:["venue","location","branch","site","facility","place"],page:"venues",message:"Navigating to Venues..."},{keywords:["report","analytics","statistics","stats","insights","data","metrics","performance","revenue","sales"],page:"reports",message:"Navigating to Reports & Analytics..."},{keywords:["marketing","promotion","campaign","discount","coupon","promo","gift card","voucher","email"],page:"marketing",message:"Navigating to Marketing..."},{keywords:["setting","settings","configuration","config","preference","option","setup","account","profile","password","security"],page:"settings",message:"Navigating to Settings..."},{keywords:["waiver","form","consent","agreement","liability","sign","signature"],page:"waivers",message:"Navigating to Waivers..."},{keywords:["ai","agent","bot","chatbot","assistant","automation","artificial intelligence"],page:"ai-agents",message:"Navigating to AI Agents..."},{keywords:["widget","embed","integration","booking widget","calendar widget"],page:"booking-widgets",message:"Navigating to Booking Widgets..."},{keywords:["backend","api","database","server","supabase","auth","authentication"],page:"backend",message:"Navigating to Backend..."},{keywords:["dashboard","home","overview","summary","main"],page:"dashboard",message:"Navigating to Dashboard..."},{keywords:["help","support","documentation","docs","guide","tutorial","faq","how to","manual"],page:"settings",message:"Opening Help & Support..."}];for(const A of S)if(A.keywords.some(k=>C.includes(k))){t(A.page),re.success(A.message);return}t("bookings"),re.info(`Searching for "${N}" in Bookings...`)},v=N=>{N.key==="Enter"&&(f(c),d(""))};j.useEffect(()=>{a&&u.current&&setTimeout(()=>{u.current?.focus()},100)},[a]);const x=N=>{N.preventDefault(),o.trim()&&(f(o),i(!1),l(""))};j.useEffect(()=>{const N=C=>{C.key==="Escape"&&a&&(i(!1),l(""))};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[a]);const g=N=>N.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2),b=N=>{switch(N){case"system-admin":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"super-admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"admin":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"manager":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"staff":return"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400";case"customer":return"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}},w=N=>N.split("-").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" ");return r.jsxs("header",{className:"h-16 bg-white dark:bg-[#0a0a0a] border-b border-gray-200 dark:border-[#1e1e1e] fixed top-0 right-0 left-0 lg:left-64 z-30 transition-colors",children:[r.jsxs("div",{className:"h-full px-4 sm:px-6 flex items-center justify-between gap-3",children:[r.jsx(W,{variant:"ghost",size:"icon",className:"lg:hidden hover:bg-gray-100 dark:hover:bg-[#161616]",onClick:e,children:r.jsx(VY,{className:"w-5 h-5 text-gray-600 dark:text-[#737373]"})}),r.jsx("div",{className:"flex-1 max-w-md hidden sm:block",children:r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-[#737373]"}),r.jsx(de,{type:"search",placeholder:"Search bookings, games, staff...",value:c,onChange:N=>d(N.target.value),onKeyPress:v,className:"h-10 pl-10 bg-gray-100 border-gray-300 placeholder:text-gray-500 dark:bg-[#161616] dark:border-[#2a2a2a] dark:text-white dark:placeholder:text-[#737373]"})]})}),r.jsx(W,{variant:"ghost",size:"icon",className:"sm:hidden hover:bg-gray-100 dark:hover:bg-[#161616]",onClick:m,children:r.jsx(oa,{className:"w-5 h-5 text-gray-600 dark:text-[#737373]"})}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsx(mye,{}),r.jsx(Ewe,{onNavigate:t}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsxs(W,{variant:"ghost",className:"gap-2 px-2 sm:px-4 hover:bg-gray-100 dark:hover:bg-[#161616]",children:[r.jsxs(oh,{className:"w-8 h-8",children:[r.jsx(lh,{src:s?.avatar||lv}),r.jsx(ch,{className:"bg-[#4f46e5] text-white",children:s?g(s.name):"U"})]}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-white hidden md:inline",children:s?.name||"User"}),r.jsx(Mc,{className:"w-4 h-4 text-gray-400 dark:text-[#737373] hidden sm:inline"})]})}),r.jsxs(On,{align:"end",className:"w-64 bg-white dark:bg-[#1e1e1e] border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx(Zve,{className:"text-gray-900 dark:text-white",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s?.name||"User"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-[#737373]",children:s?.email||""}),s?.role&&r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium w-fit ${b(s.role)}`,children:w(s.role)})]})}),r.jsx(Su,{className:"bg-gray-200 dark:bg-[#2a2a2a]"}),r.jsx(Dt,{onClick:()=>t("myaccount"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525]",children:"My Account"}),r.jsx(Su,{className:"bg-gray-200 dark:bg-[#2a2a2a]"}),r.jsx(Dt,{onClick:()=>t("profile"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525]",children:"Profile Settings"}),r.jsx(Dt,{onClick:()=>t("billing"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525]",children:"Billing"}),r.jsx(Dt,{onClick:()=>t("team"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525]",children:"Team"}),s?.role==="system-admin"&&r.jsxs(r.Fragment,{children:[r.jsx(Su,{className:"bg-gray-200 dark:bg-[#2a2a2a]"}),r.jsxs(Dt,{onClick:()=>t("system-admin"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525] flex items-center gap-2",children:[r.jsx(lc,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),"System Admin Dashboard"]}),r.jsxs(Dt,{onClick:()=>t("settings"),className:"text-gray-700 dark:text-[#d4d4d4] hover:bg-gray-100 dark:hover:bg-[#252525] cursor-pointer focus:bg-gray-100 dark:focus:bg-[#252525] flex items-center gap-2",children:[r.jsx(ul,{className:"w-4 h-4"}),"Platform Settings"]})]}),r.jsx(Su,{className:"bg-gray-200 dark:bg-[#2a2a2a]"}),r.jsxs(Dt,{onClick:h,className:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 cursor-pointer focus:bg-red-50 dark:focus:bg-red-900/20 flex items-center gap-2",children:[r.jsx(UY,{className:"w-4 h-4"}),"Logout"]})]})]})]})]}),a&&r.jsxs("div",{className:"fixed inset-0 z-50 sm:hidden bg-white dark:bg-[#0a0a0a] animate-in slide-in-from-top duration-200",children:[r.jsxs("div",{className:"h-16 border-b border-gray-200 dark:border-[#1e1e1e] flex items-center px-4 gap-3",children:[r.jsx(W,{variant:"ghost",size:"icon",onClick:()=>{i(!1),l("")},className:"flex-shrink-0 hover:bg-gray-100 dark:hover:bg-[#161616]",children:r.jsx(Is,{className:"w-5 h-5 text-gray-600 dark:text-[#737373]"})}),r.jsx("form",{onSubmit:x,className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-[#737373]"}),r.jsx(de,{ref:u,type:"search",placeholder:"Search bookings, games, staff...",value:o,onChange:N=>l(N.target.value),className:"pl-10 pr-4 h-11 bg-gray-100 border-gray-300 placeholder:text-gray-500 dark:bg-[#161616] dark:border-[#2a2a2a] dark:text-white dark:placeholder:text-[#737373] text-base rounded-lg",autoComplete:"off"})]})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[o===""&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] uppercase tracking-wide",children:"Recent Searches"}),r.jsx("div",{className:"space-y-2",children:["Sarah Johnson","Mystery Manor","Today's bookings","Pending payments"].map((N,C)=>r.jsxs("button",{onClick:()=>l(N),className:"w-full text-left p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-[#161616] transition-colors flex items-center gap-3",children:[r.jsx(oa,{className:"w-4 h-4 text-gray-400 dark:text-[#737373] flex-shrink-0"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:N})]},C))})]}),o===""&&r.jsxs("div",{className:"space-y-3 pt-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] uppercase tracking-wide",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{className:"p-4 rounded-lg bg-gray-100 dark:bg-[#161616] text-left hover:bg-gray-200 dark:hover:bg-[#1e1e1e] transition-colors",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"New Booking"})]}),r.jsxs("button",{className:"p-4 rounded-lg bg-gray-100 dark:bg-[#161616] text-left hover:bg-gray-200 dark:hover:bg-[#1e1e1e] transition-colors",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Customers"})]}),r.jsxs("button",{className:"p-4 rounded-lg bg-gray-100 dark:bg-[#161616] text-left hover:bg-gray-200 dark:hover:bg-[#1e1e1e] transition-colors",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Games"})]}),r.jsxs("button",{className:"p-4 rounded-lg bg-gray-100 dark:bg-[#161616] text-left hover:bg-gray-200 dark:hover:bg-[#1e1e1e] transition-colors",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"Reports"})]})]})]}),o!==""&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-[#737373] uppercase tracking-wide",children:['Results for "',o,'"']}),r.jsxs("div",{className:"text-center py-12",children:[r.jsx(oa,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-[#404040] mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-[#737373]",children:"Press Enter to search"})]})]})]})]})]})}function Twe({currentPage:t,onNavigate:e=()=>{},onMenuOpen:s}){const n=[{id:"dashboard",label:"Home",icon:BY},{id:"bookings",label:"Bookings",icon:qs},{id:"inbox",label:"Inbox",icon:FY},{id:"games",label:"Events",icon:bm}];return r.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-[#0a0a0a] border-t border-gray-200 dark:border-[#1e1e1e] safe-area-bottom",children:r.jsxs("nav",{className:"flex items-center justify-around px-2 py-2",children:[n.map(a=>{const i=a.icon,o=t===a.id;return r.jsxs("button",{onClick:()=>{e&&e(a.id)},className:`
                flex flex-col items-center gap-1 px-3 py-2 rounded-lg transition-all min-w-[64px]
                ${o?"bg-blue-600 dark:bg-[#4f46e5] text-white shadow-md shadow-blue-500/20 dark:shadow-[#4f46e5]/20":"text-gray-600 dark:text-[#737373] hover:bg-gray-100 dark:hover:bg-[#161616]"}
              `,children:[r.jsx(i,{className:`w-6 h-6 ${o?"scale-110":""} transition-transform`}),r.jsx("span",{className:"text-xs",children:a.label})]},a.id)}),r.jsxs("button",{onClick:s,className:"flex flex-col items-center gap-1 px-3 py-2 rounded-lg transition-all min-w-[64px] text-gray-600 dark:text-[#737373] hover:bg-gray-100 dark:hover:bg-[#161616]",children:[r.jsx(VY,{className:"w-6 h-6"}),r.jsx("span",{className:"text-xs",children:"More"})]})]})})}function UQ({children:t,currentPage:e,onNavigate:s}){const[n,a]=j.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#161616] transition-colors",children:[r.jsx(kpe,{currentPage:e,onNavigate:s,isMobileOpen:n,onMobileClose:()=>a(!1)}),r.jsx(Pwe,{onNavigate:s,onMobileMenuToggle:()=>a(!n)}),r.jsx("main",{className:"lg:ml-64 pt-16 pb-20 lg:pb-0",children:r.jsx("div",{className:"p-4 sm:p-6 lg:p-8 max-w-[1920px] mx-auto",children:t})}),r.jsx(Twe,{currentPage:e,onNavigate:s,onMenuOpen:()=>a(!0)})]})}const zQ=j.createContext({});function Owe(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const UI=typeof window<"u",Iwe=UI?j.useLayoutEffect:j.useEffect,zI=j.createContext(null);function VI(t,e){t.indexOf(e)===-1&&t.push(e)}function WI(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Tm=(t,e,s)=>s>e?e:s<t?t:s;let qI=()=>{};const Om={},VQ=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function WQ(t){return typeof t=="object"&&t!==null}const qQ=t=>/^0[^.\s]+$/u.test(t);function HI(t){let e;return()=>(e===void 0&&(e=t()),e)}const Od=t=>t,$we=(t,e)=>s=>e(t(s)),Sw=(...t)=>t.reduce($we),gb=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n};class GI{constructor(){this.subscriptions=[]}add(e){return VI(this.subscriptions,e),()=>WI(this.subscriptions,e)}notify(e,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bh=t=>t*1e3,kd=t=>t/1e3;function HQ(t,e){return e?t*(1e3/e):0}const GQ=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Dwe=1e-7,Rwe=12;function Mwe(t,e,s,n,a){let i,o,l=0;do o=e+(s-e)/2,i=GQ(o,n,a)-t,i>0?s=o:e=o;while(Math.abs(i)>Dwe&&++l<Rwe);return o}function Cw(t,e,s,n){if(t===e&&s===n)return Od;const a=i=>Mwe(i,0,1,t,s);return i=>i===0||i===1?i:GQ(a(i),e,n)}const YQ=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KQ=t=>e=>1-t(1-e),XQ=Cw(.33,1.53,.69,.99),YI=KQ(XQ),QQ=YQ(YI),ZQ=t=>(t*=2)<1?.5*YI(t):.5*(2-Math.pow(2,-10*(t-1))),KI=t=>1-Math.sin(Math.acos(t)),JQ=KQ(KI),eZ=YQ(KI),Lwe=Cw(.42,0,1,1),Fwe=Cw(0,0,.58,1),tZ=Cw(.42,0,.58,1),Bwe=t=>Array.isArray(t)&&typeof t[0]!="number",rZ=t=>Array.isArray(t)&&typeof t[0]=="number",Uwe={linear:Od,easeIn:Lwe,easeInOut:tZ,easeOut:Fwe,circIn:KI,circInOut:eZ,circOut:JQ,backIn:YI,backInOut:QQ,backOut:XQ,anticipate:ZQ},zwe=t=>typeof t=="string",O7=t=>{if(rZ(t)){qI(t.length===4);const[e,s,n,a]=t;return Cw(e,s,n,a)}else if(zwe(t))return Uwe[t];return t},K2=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Vwe(t,e){let s=new Set,n=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(d.schedule(u),t()),u(l)}const d={schedule:(u,h=!1,m=!1)=>{const v=m&&a?s:n;return h&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[s,n]=[n,s],s.forEach(c),s.clear(),a=!1,i&&(i=!1,d.process(u))}};return d}const Wwe=40;function sZ(t,e){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=K2.reduce((N,C)=>(N[C]=Vwe(i),N),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:f,postRender:v}=o,x=()=>{const N=Om.useManualTiming?a.timestamp:performance.now();s=!1,Om.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(N-a.timestamp,Wwe),1)),a.timestamp=N,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),m.process(a),f.process(a),v.process(a),a.isProcessing=!1,s&&e&&(n=!1,t(x))},g=()=>{s=!0,n=!0,a.isProcessing||t(x)};return{schedule:K2.reduce((N,C)=>{const S=o[C];return N[C]=(A,k=!1,E=!1)=>(s||g(),S.schedule(A,k,E)),N},{}),cancel:N=>{for(let C=0;C<K2.length;C++)o[K2[C]].cancel(N)},state:a,steps:o}}const{schedule:za,cancel:Jf,state:Fo,steps:cC}=sZ(typeof requestAnimationFrame<"u"?requestAnimationFrame:Od,!0);let zj;function qwe(){zj=void 0}const nc={now:()=>(zj===void 0&&nc.set(Fo.isProcessing||Om.useManualTiming?Fo.timestamp:performance.now()),zj),set:t=>{zj=t,queueMicrotask(qwe)}},nZ=t=>e=>typeof e=="string"&&e.startsWith(t),XI=nZ("--"),Hwe=nZ("var(--"),QI=t=>Hwe(t)?Gwe.test(t.split("/*")[0].trim()):!1,Gwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vb={...Qv,transform:t=>Tm(0,1,t)},X2={...Qv,default:1},z1=t=>Math.round(t*1e5)/1e5,ZI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ywe(t){return t==null}const Kwe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,JI=(t,e)=>s=>!!(typeof s=="string"&&Kwe.test(s)&&s.startsWith(t)||e&&!Ywe(s)&&Object.prototype.hasOwnProperty.call(s,e)),aZ=(t,e,s)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(ZI);return{[t]:parseFloat(a),[e]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Xwe=t=>Tm(0,255,t),dC={...Qv,transform:t=>Math.round(Xwe(t))},jx={test:JI("rgb","red"),parse:aZ("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+dC.transform(t)+", "+dC.transform(e)+", "+dC.transform(s)+", "+z1(vb.transform(n))+")"};function Qwe(t){let e="",s="",n="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const fP={test:JI("#"),parse:Qwe,transform:jx.transform},kw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Af=kw("deg"),wh=kw("%"),Cs=kw("px"),Zwe=kw("vh"),Jwe=kw("vw"),I7={...wh,parse:t=>wh.parse(t)/100,transform:t=>wh.transform(t*100)},S0={test:JI("hsl","hue"),parse:aZ("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+wh.transform(z1(e))+", "+wh.transform(z1(s))+", "+z1(vb.transform(n))+")"},Mi={test:t=>jx.test(t)||fP.test(t)||S0.test(t),parse:t=>jx.test(t)?jx.parse(t):S0.test(t)?S0.parse(t):fP.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?jx.transform(t):S0.transform(t),getAnimatableNone:t=>{const e=Mi.parse(t);return e.alpha=0,Mi.transform(e)}},e2e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function t2e(t){return isNaN(t)&&typeof t=="string"&&(t.match(ZI)?.length||0)+(t.match(e2e)?.length||0)>0}const iZ="number",oZ="color",r2e="var",s2e="var(",$7="${}",n2e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yb(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=e.replace(n2e,c=>(Mi.test(c)?(n.color.push(i),a.push(oZ),s.push(Mi.parse(c))):c.startsWith(s2e)?(n.var.push(i),a.push(r2e),s.push(c)):(n.number.push(i),a.push(iZ),s.push(parseFloat(c))),++i,$7)).split($7);return{values:s,split:l,indexes:n,types:a}}function lZ(t){return yb(t).values}function cZ(t){const{split:e,types:s}=yb(t),n=e.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],a[o]!==void 0){const l=s[o];l===iZ?i+=z1(a[o]):l===oZ?i+=Mi.transform(a[o]):i+=a[o]}return i}}const a2e=t=>typeof t=="number"?0:Mi.test(t)?Mi.getAnimatableNone(t):t;function i2e(t){const e=lZ(t);return cZ(t)(e.map(a2e))}const ep={test:t2e,parse:lZ,createTransformer:cZ,getAnimatableNone:i2e};function uC(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function o2e({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let a=0,i=0,o=0;if(!e)a=i=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;a=uC(c,l,t+1/3),i=uC(c,l,t),o=uC(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function CN(t,e){return s=>s>0?e:t}const si=(t,e,s)=>t+(e-t)*s,hC=(t,e,s)=>{const n=t*t,a=s*(e*e-n)+n;return a<0?0:Math.sqrt(a)},l2e=[fP,jx,S0],c2e=t=>l2e.find(e=>e.test(t));function D7(t){const e=c2e(t);if(!e)return!1;let s=e.parse(t);return e===S0&&(s=o2e(s)),s}const R7=(t,e)=>{const s=D7(t),n=D7(e);if(!s||!n)return CN(t,e);const a={...s};return i=>(a.red=hC(s.red,n.red,i),a.green=hC(s.green,n.green,i),a.blue=hC(s.blue,n.blue,i),a.alpha=si(s.alpha,n.alpha,i),jx.transform(a))},pP=new Set(["none","hidden"]);function d2e(t,e){return pP.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function u2e(t,e){return s=>si(t,e,s)}function e$(t){return typeof t=="number"?u2e:typeof t=="string"?QI(t)?CN:Mi.test(t)?R7:f2e:Array.isArray(t)?dZ:typeof t=="object"?Mi.test(t)?R7:h2e:CN}function dZ(t,e){const s=[...t],n=s.length,a=t.map((i,o)=>e$(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}}function h2e(t,e){const s={...t,...e},n={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(n[a]=e$(t[a])(t[a],e[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}}function m2e(t,e){const s=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][n[i]],l=t.values[o]??0;s[a]=l,n[i]++}return s}const f2e=(t,e)=>{const s=ep.createTransformer(e),n=yb(t),a=yb(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?pP.has(t)&&!a.values.length||pP.has(e)&&!n.values.length?d2e(t,e):Sw(dZ(m2e(n,a),a.values),s):CN(t,e)};function uZ(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?si(t,e,s):e$(t)(t,e)}const p2e=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>za.update(e,s),stop:()=>Jf(e),now:()=>Fo.isProcessing?Fo.timestamp:nc.now()}},hZ=(t,e,s=10)=>{let n="";const a=Math.max(Math.round(e/s),2);for(let i=0;i<a;i++)n+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},kN=2e4;function t$(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<kN;)e+=s,n=t.next(e);return e>=kN?1/0:e}function x2e(t,e=100,s){const n=s({...t,keyframes:[0,e]}),a=Math.min(t$(n),kN);return{type:"keyframes",ease:i=>n.next(a*i).value/e,duration:kd(a)}}const g2e=5;function mZ(t,e,s){const n=Math.max(e-g2e,0);return HQ(s-t(n),e-n)}const mi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mC=.001;function v2e({duration:t=mi.duration,bounce:e=mi.bounce,velocity:s=mi.velocity,mass:n=mi.mass}){let a,i,o=1-e;o=Tm(mi.minDamping,mi.maxDamping,o),t=Tm(mi.minDuration,mi.maxDuration,kd(t)),o<1?(a=d=>{const u=d*o,h=u*t,m=u-s,f=xP(d,o),v=Math.exp(-h);return mC-m/f*v},i=d=>{const h=d*o*t,m=h*s+s,f=Math.pow(o,2)*Math.pow(d,2)*t,v=Math.exp(-h),x=xP(Math.pow(d,2),o);return(-a(d)+mC>0?-1:1)*((m-f)*v)/x}):(a=d=>{const u=Math.exp(-d*t),h=(d-s)*t+1;return-mC+u*h},i=d=>{const u=Math.exp(-d*t),h=(s-d)*(t*t);return u*h});const l=5/t,c=b2e(a,i,l);if(t=bh(t),isNaN(c))return{stiffness:mi.stiffness,damping:mi.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:t}}}const y2e=12;function b2e(t,e,s){let n=s;for(let a=1;a<y2e;a++)n=n-t(n)/e(n);return n}function xP(t,e){return t*Math.sqrt(1-e*e)}const w2e=["duration","bounce"],j2e=["stiffness","damping","mass"];function M7(t,e){return e.some(s=>t[s]!==void 0)}function N2e(t){let e={velocity:mi.velocity,stiffness:mi.stiffness,damping:mi.damping,mass:mi.mass,isResolvedFromDuration:!1,...t};if(!M7(t,j2e)&&M7(t,w2e))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,i=2*Tm(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:mi.mass,stiffness:a,damping:i}}else{const s=v2e(t);e={...e,...s,mass:mi.mass},e.isResolvedFromDuration=!0}return e}function _N(t=mi.visualDuration,e=mi.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:f}=N2e({...s,velocity:-kd(s.velocity||0)}),v=m||0,x=d/(2*Math.sqrt(c*u)),g=o-i,b=kd(Math.sqrt(c/u)),w=Math.abs(g)<5;n||(n=w?mi.restSpeed.granular:mi.restSpeed.default),a||(a=w?mi.restDelta.granular:mi.restDelta.default);let N;if(x<1){const S=xP(b,x);N=A=>{const k=Math.exp(-x*b*A);return o-k*((v+x*b*g)/S*Math.sin(S*A)+g*Math.cos(S*A))}}else if(x===1)N=S=>o-Math.exp(-b*S)*(g+(v+b*g)*S);else{const S=b*Math.sqrt(x*x-1);N=A=>{const k=Math.exp(-x*b*A),E=Math.min(S*A,300);return o-k*((v+x*b*g)*Math.sinh(E)+S*g*Math.cosh(E))/S}}const C={calculatedDuration:f&&h||null,next:S=>{const A=N(S);if(f)l.done=S>=h;else{let k=S===0?v:0;x<1&&(k=S===0?bh(v):mZ(N,S,A));const E=Math.abs(k)<=n,O=Math.abs(o-A)<=a;l.done=E&&O}return l.value=l.done?o:A,l},toString:()=>{const S=Math.min(t$(C),kN),A=hZ(k=>C.next(S*k).value,S,30);return S+"ms "+A},toTransition:()=>{}};return C}_N.applyToOptions=t=>{const e=x2e(t,100,_N);return t.ease=e.ease,t.duration=bh(e.duration),t.type="keyframes",t};function gP({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},f=E=>l!==void 0&&E<l||c!==void 0&&E>c,v=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let x=s*e;const g=h+x,b=o===void 0?g:o(g);b!==g&&(x=b-h);const w=E=>-x*Math.exp(-E/n),N=E=>b+w(E),C=E=>{const O=w(E),$=N(E);m.done=Math.abs(O)<=d,m.value=m.done?b:$};let S,A;const k=E=>{f(m.value)&&(S=E,A=_N({keyframes:[m.value,v(m.value)],velocity:mZ(N,E,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return k(0),{calculatedDuration:null,next:E=>{let O=!1;return!A&&S===void 0&&(O=!0,C(E),k(E)),S!==void 0&&E>=S?A.next(E-S):(!O&&C(E),m)}}}function S2e(t,e,s){const n=[],a=s||Om.mix||uZ,i=t.length-1;for(let o=0;o<i;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Od:e;l=Sw(c,l)}n.push(l)}return n}function C2e(t,e,{clamp:s=!0,ease:n,mixer:a}={}){const i=t.length;if(qI(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=S2e(e,n,a),c=l.length,d=u=>{if(o&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=gb(t[h],t[h+1],u);return l[h](m)};return s?u=>d(Tm(t[0],t[i-1],u)):d}function k2e(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const a=gb(0,e,n);t.push(si(s,1,a))}}function _2e(t){const e=[0];return k2e(e,t.length-1),e}function A2e(t,e){return t.map(s=>s*e)}function E2e(t,e){return t.map(()=>e||tZ).splice(0,t.length-1)}function V1({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const a=Bwe(n)?n.map(O7):O7(n),i={done:!1,value:e[0]},o=A2e(s&&s.length===e.length?s:_2e(e),t),l=C2e(o,e,{ease:Array.isArray(a)?a:E2e(e,a)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const P2e=t=>t!==null;function r$(t,{repeat:e,repeatType:s="loop"},n,a=1){const i=t.filter(P2e),l=a<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const T2e={decay:gP,inertia:gP,tween:V1,keyframes:V1,spring:_N};function fZ(t){typeof t.type=="string"&&(t.type=T2e[t.type])}class s${constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const O2e=t=>t/100;class n$ extends s${constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==nc.now()&&this.tick(nc.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;fZ(e);const{type:s=V1,repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=s||V1;c!==V1&&typeof l[0]!="number"&&(this.mixKeyframes=Sw(O2e,uZ(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=t$(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=d}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:n,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:f,type:v,onUpdate:x,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>a;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let N=this.currentTime,C=n;if(h){const E=Math.min(this.currentTime,a)/l;let O=Math.floor(E),$=E%1;!$&&E>=1&&($=1),$===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(m==="reverse"?($=1-$,f&&($-=f/l)):m==="mirror"&&(C=o)),N=Tm(0,1,$)*l}const S=w?{done:!1,value:u[0]}:C.next(N);i&&(S.value=i(S.value));let{done:A}=S;!w&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return k&&v!==gP&&(S.value=r$(u,this.options,g,this.speed)),x&&x(S.value),k&&this.finish(),S}then(e,s){return this.finished.then(e,s)}get duration(){return kd(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kd(e)}get time(){return kd(this.currentTime)}set time(e){e=bh(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(nc.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=kd(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=p2e,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nc.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function I2e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Nx=t=>t*180/Math.PI,vP=t=>{const e=Nx(Math.atan2(t[1],t[0]));return yP(e)},$2e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:vP,rotateZ:vP,skewX:t=>Nx(Math.atan(t[1])),skewY:t=>Nx(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},yP=t=>(t=t%360,t<0&&(t+=360),t),L7=vP,F7=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),B7=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),D2e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:F7,scaleY:B7,scale:t=>(F7(t)+B7(t))/2,rotateX:t=>yP(Nx(Math.atan2(t[6],t[5]))),rotateY:t=>yP(Nx(Math.atan2(-t[2],t[0]))),rotateZ:L7,rotate:L7,skewX:t=>Nx(Math.atan(t[4])),skewY:t=>Nx(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function bP(t){return t.includes("scale")?1:0}function wP(t,e){if(!t||t==="none")return bP(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(s)n=D2e,a=s;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=$2e,a=l}if(!a)return bP(e);const i=n[e],o=a[1].split(",").map(M2e);return typeof i=="function"?i(o):o[i]}const R2e=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return wP(s,e)};function M2e(t){return parseFloat(t.trim())}const Zv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jv=new Set(Zv),U7=t=>t===Qv||t===Cs,L2e=new Set(["x","y","z"]),F2e=Zv.filter(t=>!L2e.has(t));function B2e(t){const e=[];return F2e.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Ix={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>wP(e,"x"),y:(t,{transform:e})=>wP(e,"y")};Ix.translateX=Ix.x;Ix.translateY=Ix.y;const $x=new Set;let jP=!1,NP=!1,SP=!1;function pZ(){if(NP){const t=Array.from($x).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const a=B2e(n);a.length&&(s.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}NP=!1,jP=!1,$x.forEach(t=>t.complete(SP)),$x.clear()}function xZ(){$x.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(NP=!0)})}function U2e(){SP=!0,xZ(),pZ(),SP=!1}class a${constructor(e,s,n,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?($x.add(this),jP||(jP=!0,za.read(xZ),za.resolveKeyframes(pZ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:a}=this;if(e[0]===null){const i=a?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&s){const l=n.readValue(s,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}I2e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),$x.delete(this)}cancel(){this.state==="scheduled"&&($x.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const z2e=t=>t.startsWith("--");function V2e(t,e,s){z2e(e)?t.style.setProperty(e,s):t.style[e]=s}const W2e=HI(()=>window.ScrollTimeline!==void 0),q2e={};function H2e(t,e){const s=HI(t);return()=>q2e[e]??s()}const gZ=H2e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),S1=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,z7={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:S1([0,.65,.55,1]),circOut:S1([.55,0,1,.45]),backIn:S1([.31,.01,.66,-.59]),backOut:S1([.33,1.53,.69,.99])};function vZ(t,e){if(t)return typeof t=="function"?gZ()?hZ(t,e):"ease-out":rZ(t)?S1(t):Array.isArray(t)?t.map(s=>vZ(s,e)||z7.easeOut):z7[t]}function G2e(t,e,s,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[e]:s};c&&(u.offset=c);const h=vZ(l,a);Array.isArray(h)&&(u.easing=h);const m={delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(u,m)}function yZ(t){return typeof t=="function"&&"applyToOptions"in t}function Y2e({type:t,...e}){return yZ(t)&&gZ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class K2e extends s${constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:n,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,qI(typeof e.type!="string");const d=Y2e(e);this.animation=G2e(s,n,a,d,i),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=r$(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):V2e(s,n,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return kd(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kd(e)}get time(){return kd(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=bh(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&W2e()?(this.animation.timeline=e,Od):s(this)}}const bZ={anticipate:ZQ,backInOut:QQ,circInOut:eZ};function X2e(t){return t in bZ}function Q2e(t){typeof t.ease=="string"&&X2e(t.ease)&&(t.ease=bZ[t.ease])}const V7=10;class Z2e extends K2e{constructor(e){Q2e(e),fZ(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:n,onComplete:a,element:i,...o}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const l=new n$({...o,autoplay:!1}),c=bh(this.finishedTime??this.time);s.setWithVelocity(l.sample(c-V7).value,l.sample(c).value,V7),l.stop()}}const W7=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ep.test(t)||t==="0")&&!t.startsWith("url("));function J2e(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function eje(t,e,s,n){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=W7(a,e),l=W7(i,e);return!o||!l?!1:J2e(t)||(s==="spring"||yZ(s))&&n}function CP(t){t.duration=0,t.type="keyframes"}const tje=new Set(["opacity","clipPath","filter","transform"]),rje=HI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sje(t){const{motionValue:e,name:s,repeatDelay:n,repeatType:a,damping:i,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return rje()&&s&&tje.has(s)&&(s!=="transform"||!d)&&!c&&!n&&a!=="mirror"&&i!==0&&o!=="inertia"}const nje=40;class aje extends s${constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=nc.now();const m={autoplay:e,delay:s,type:n,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:d,element:u,...h},f=u?.KeyframeResolver||a$;this.keyframeResolver=new f(l,(v,x,g)=>this.onKeyframesResolved(v,x,m,!g),c,d,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,n,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:u}=n;this.resolvedAt=nc.now(),eje(e,i,o,l)||((Om.instantAnimations||!c)&&u?.(r$(e,n,s)),e[0]=e[e.length-1],CP(n),n.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>nje?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:e},f=!d&&sje(m)?new Z2e({...m,element:m.motionValue.owner.current}):new n$(m);f.finished.then(()=>this.notifyFinished()).catch(Od),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),U2e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ije=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oje(t){const e=ije.exec(t);if(!e)return[,];const[,s,n,a]=e;return[`--${s??n}`,a]}function wZ(t,e,s=1){const[n,a]=oje(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return VQ(o)?parseFloat(o):o}return QI(a)?wZ(a,e,s+1):a}function i$(t,e){return t?.[e]??t?.default??t}const jZ=new Set(["width","height","top","left","right","bottom",...Zv]),lje={test:t=>t==="auto",parse:t=>t},NZ=t=>e=>e.test(t),SZ=[Qv,Cs,wh,Af,Jwe,Zwe,lje],q7=t=>SZ.find(NZ(t));function cje(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||qQ(t):!0}const dje=new Set(["brightness","contrast","saturate","opacity"]);function uje(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(ZI)||[];if(!n)return t;const a=s.replace(n,"");let i=dje.has(e)?1:0;return n!==s&&(i*=100),e+"("+i+a+")"}const hje=/\b([a-z-]*)\(.*?\)/gu,kP={...ep,getAnimatableNone:t=>{const e=t.match(hje);return e?e.map(uje).join(" "):t}},H7={...Qv,transform:Math.round},mje={rotate:Af,rotateX:Af,rotateY:Af,rotateZ:Af,scale:X2,scaleX:X2,scaleY:X2,scaleZ:X2,skew:Af,skewX:Af,skewY:Af,distance:Cs,translateX:Cs,translateY:Cs,translateZ:Cs,x:Cs,y:Cs,z:Cs,perspective:Cs,transformPerspective:Cs,opacity:vb,originX:I7,originY:I7,originZ:Cs},o$={borderWidth:Cs,borderTopWidth:Cs,borderRightWidth:Cs,borderBottomWidth:Cs,borderLeftWidth:Cs,borderRadius:Cs,radius:Cs,borderTopLeftRadius:Cs,borderTopRightRadius:Cs,borderBottomRightRadius:Cs,borderBottomLeftRadius:Cs,width:Cs,maxWidth:Cs,height:Cs,maxHeight:Cs,top:Cs,right:Cs,bottom:Cs,left:Cs,padding:Cs,paddingTop:Cs,paddingRight:Cs,paddingBottom:Cs,paddingLeft:Cs,margin:Cs,marginTop:Cs,marginRight:Cs,marginBottom:Cs,marginLeft:Cs,backgroundPositionX:Cs,backgroundPositionY:Cs,...mje,zIndex:H7,fillOpacity:vb,strokeOpacity:vb,numOctaves:H7},fje={...o$,color:Mi,backgroundColor:Mi,outlineColor:Mi,fill:Mi,stroke:Mi,borderColor:Mi,borderTopColor:Mi,borderRightColor:Mi,borderBottomColor:Mi,borderLeftColor:Mi,filter:kP,WebkitFilter:kP},CZ=t=>fje[t];function kZ(t,e){let s=CZ(t);return s!==kP&&(s=ep),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const pje=new Set(["auto","none","0"]);function xje(t,e,s){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!pje.has(i)&&yb(i).values.length&&(a=t[n]),n++}if(a&&s)for(const i of e)t[i]=kZ(s,a)}class gje extends a${constructor(e,s,n,a,i){super(e,s,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),QI(d))){const u=wZ(d,s.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!jZ.has(n)||e.length!==2)return;const[a,i]=e,o=q7(a),l=q7(i);if(o!==l)if(U7(o)&&U7(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Ix[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||cje(e[a]))&&n.push(a);n.length&&xje(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ix[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=Ix[s](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function vje(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=s?.[t]??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const _Z=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function yje(t){return WQ(t)&&"offsetHeight"in t}const G7=30,bje=t=>!isNaN(parseFloat(t));class wje{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=nc.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=nc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bje(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new GI);const n=this.events[e].add(s);return e==="change"?()=>{n(),za.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G7)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,G7);return HQ(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cv(t,e){return new wje(t,e)}const{schedule:l$}=sZ(queueMicrotask,!1),cu={x:!1,y:!1};function AZ(){return cu.x||cu.y}function jje(t){return t==="x"||t==="y"?cu[t]?null:(cu[t]=!0,()=>{cu[t]=!1}):cu.x||cu.y?null:(cu.x=cu.y=!0,()=>{cu.x=cu.y=!1})}function EZ(t,e){const s=vje(t),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[s,a,()=>n.abort()]}function Y7(t){return!(t.pointerType==="touch"||AZ())}function Nje(t,e,s={}){const[n,a,i]=EZ(t,s),o=l=>{if(!Y7(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const u=h=>{Y7(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const PZ=(t,e)=>e?t===e?!0:PZ(t,e.parentElement):!1,c$=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Sje=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Cje(t){return Sje.has(t.tagName)||t.tabIndex!==-1}const Vj=new WeakSet;function K7(t){return e=>{e.key==="Enter"&&t(e)}}function fC(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kje=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=K7(()=>{if(Vj.has(s))return;fC(s,"down");const a=K7(()=>{fC(s,"up")}),i=()=>fC(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function X7(t){return c$(t)&&!AZ()}function _je(t,e,s={}){const[n,a,i]=EZ(t,s),o=l=>{const c=l.currentTarget;if(!X7(l))return;Vj.add(c);const d=e(c,l),u=(f,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),Vj.has(c)&&Vj.delete(c),X7(f)&&typeof d=="function"&&d(f,{success:v})},h=f=>{u(f,c===window||c===document||s.useGlobalTarget||PZ(c,f.target))},m=f=>{u(f,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return n.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),yje(l)&&(l.addEventListener("focus",d=>kje(d,a)),!Cje(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function TZ(t){return WQ(t)&&"ownerSVGElement"in t}function Aje(t){return TZ(t)&&t.tagName==="svg"}const hl=t=>!!(t&&t.getVelocity),Eje=[...SZ,Mi,ep],Pje=t=>Eje.find(NZ(t)),OZ=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Tje(t=!0){const e=j.useContext(zI);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=e,i=j.useId();j.useEffect(()=>{if(t)return a(i)},[t]);const o=j.useCallback(()=>t&&n&&n(i),[i,n,t]);return!s&&n?[!1,o]:[!0]}const IZ=j.createContext({strict:!1}),Q7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dv={};for(const t in Q7)dv[t]={isEnabled:e=>Q7[t].some(s=>!!e[s])};function Oje(t){for(const e in t)dv[e]={...dv[e],...t[e]}}const Ije=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function AN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ije.has(t)}let $Z=t=>!AN(t);function $je(t){typeof t=="function"&&($Z=e=>e.startsWith("on")?!AN(e):t(e))}try{$je(require("@emotion/is-prop-valid").default)}catch{}function Dje(t,e,s){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||($Z(a)||s===!0&&AN(a)||!e&&!AN(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const g5=j.createContext({});function v5(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bb(t){return typeof t=="string"||Array.isArray(t)}const d$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],u$=["initial",...d$];function y5(t){return v5(t.animate)||u$.some(e=>bb(t[e]))}function DZ(t){return!!(y5(t)||t.variants)}function Rje(t,e){if(y5(t)){const{initial:s,animate:n}=t;return{initial:s===!1||bb(s)?s:void 0,animate:bb(n)?n:void 0}}return t.inherit!==!1?e:{}}function Mje(t){const{initial:e,animate:s}=Rje(t,j.useContext(g5));return j.useMemo(()=>({initial:e,animate:s}),[Z7(e),Z7(s)])}function Z7(t){return Array.isArray(t)?t.join(" "):t}const wb={};function Lje(t){for(const e in t)wb[e]=t[e],XI(e)&&(wb[e].isCSSVariable=!0)}function RZ(t,{layout:e,layoutId:s}){return Jv.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!wb[t]||t==="opacity")}const Fje={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bje=Zv.length;function Uje(t,e,s){let n="",a=!0;for(let i=0;i<Bje;i++){const o=Zv[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=_Z(l,o$[o]);if(!c){a=!1;const u=Fje[o]||o;n+=`${u}(${d}) `}s&&(e[o]=d)}}return n=n.trim(),s?n=s(e,a?"":n):a&&(n="none"),n}function h$(t,e,s){const{style:n,vars:a,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Jv.has(c)){o=!0;continue}else if(XI(c)){a[c]=d;continue}else{const u=_Z(d,o$[c]);c.startsWith("origin")?(l=!0,i[c]=u):n[c]=u}}if(e.transform||(o||s?n.transform=Uje(e,t.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}const m$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MZ(t,e,s){for(const n in e)!hl(e[n])&&!RZ(n,s)&&(t[n]=e[n])}function zje({transformTemplate:t},e){return j.useMemo(()=>{const s=m$();return h$(s,e,t),Object.assign({},s.vars,s.style)},[e])}function Vje(t,e){const s=t.style||{},n={};return MZ(n,s,t),Object.assign(n,zje(t,e)),n}function Wje(t,e){const s={},n=Vje(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}const qje={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hje={offset:"strokeDashoffset",array:"strokeDasharray"};function Gje(t,e,s=1,n=0,a=!0){t.pathLength=1;const i=a?qje:Hje;t[i.offset]=Cs.transform(-n);const o=Cs.transform(e),l=Cs.transform(s);t[i.array]=`${o} ${l}`}function LZ(t,{attrX:e,attrY:s,attrScale:n,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,d,u){if(h$(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=u?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),s!==void 0&&(h.y=s),n!==void 0&&(h.scale=n),a!==void 0&&Gje(h,a,i,o,!1)}const FZ=()=>({...m$(),attrs:{}}),BZ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Yje(t,e,s,n){const a=j.useMemo(()=>{const i=FZ();return LZ(i,e,BZ(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};MZ(i,t.style,t),a.style={...i,...a.style}}return a}const Kje=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function f$(t){return typeof t!="string"||t.includes("-")?!1:!!(Kje.indexOf(t)>-1||/[A-Z]/u.test(t))}function Xje(t,e,s,{latestValues:n},a,i=!1){const l=(f$(t)?Yje:Wje)(e,n,a,t),c=Dje(e,typeof t=="string",i),d=t!==j.Fragment?{...c,...l,ref:s}:{},{children:u}=e,h=j.useMemo(()=>hl(u)?u.get():u,[u]);return j.createElement(t,{...d,children:h})}function J7(t){const e=[{},{}];return t?.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function p$(t,e,s,n){if(typeof e=="function"){const[a,i]=J7(n);e=e(s!==void 0?s:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=J7(n);e=e(s!==void 0?s:t.custom,a,i)}return e}function Wj(t){return hl(t)?t.get():t}function Qje({scrapeMotionValuesFromProps:t,createRenderState:e},s,n,a){return{latestValues:Zje(s,n,a,t),renderState:e()}}function Zje(t,e,s,n){const a={},i=n(t,{});for(const m in i)a[m]=Wj(i[m]);let{initial:o,animate:l}=t;const c=y5(t),d=DZ(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!v5(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const v=p$(t,m[f]);if(v){const{transitionEnd:x,transition:g,...b}=v;for(const w in b){let N=b[w];if(Array.isArray(N)){const C=u?N.length-1:0;N=N[C]}N!==null&&(a[w]=N)}for(const w in x)a[w]=x[w]}}}return a}const UZ=t=>(e,s)=>{const n=j.useContext(g5),a=j.useContext(zI),i=()=>Qje(t,e,n,a);return s?i():Owe(i)};function x$(t,e,s){const{style:n}=t,a={};for(const i in n)(hl(n[i])||e.style&&hl(e.style[i])||RZ(i,t)||s?.getValue(i)?.liveStyle!==void 0)&&(a[i]=n[i]);return a}const Jje=UZ({scrapeMotionValuesFromProps:x$,createRenderState:m$});function zZ(t,e,s){const n=x$(t,e,s);for(const a in t)if(hl(t[a])||hl(e[a])){const i=Zv.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}const eNe=UZ({scrapeMotionValuesFromProps:zZ,createRenderState:FZ}),tNe=Symbol.for("motionComponentSymbol");function C0(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rNe(t,e,s){return j.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):C0(s)&&(s.current=n))},[e])}const g$=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sNe="framerAppearId",VZ="data-"+g$(sNe),WZ=j.createContext({});function nNe(t,e,s,n,a){const{visualElement:i}=j.useContext(g5),o=j.useContext(IZ),l=j.useContext(zI),c=j.useContext(OZ).reducedMotion,d=j.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:i,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=j.useContext(WZ);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&aNe(d.current,s,a,h);const m=j.useRef(!1);j.useInsertionEffect(()=>{u&&m.current&&u.update(s,l)});const f=s[VZ],v=j.useRef(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return Iwe(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),v.current&&u.animationState&&u.animationState.animateChanges())}),j.useEffect(()=>{u&&(!v.current&&u.animationState&&u.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),v.current=!1),u.enteringChildren=void 0)}),u}function aNe(t,e,s,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:qZ(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&C0(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:c,layoutRoot:d})}function qZ(t){if(t)return t.options.allowProjection!==!1?t.projection:qZ(t.parent)}function pC(t,{forwardMotionProps:e=!1}={},s,n){s&&Oje(s);const a=f$(t)?eNe:Jje;function i(l,c){let d;const u={...j.useContext(OZ),...l,layoutId:iNe(l)},{isStatic:h}=u,m=Mje(l),f=a(l,h);if(!h&&UI){oNe();const v=lNe(u);d=v.MeasureLayout,m.visualElement=nNe(t,f,u,n,v.ProjectionNode)}return r.jsxs(g5.Provider,{value:m,children:[d&&m.visualElement?r.jsx(d,{visualElement:m.visualElement,...u}):null,Xje(t,l,rNe(f,m.visualElement,c),f,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(i);return o[tNe]=t,o}function iNe({layoutId:t}){const e=j.useContext(zQ).id;return e&&t!==void 0?e+"-"+t:t}function oNe(t,e){j.useContext(IZ).strict}function lNe(t){const{drag:e,layout:s}=dv;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e?.isEnabled(t)||s?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function cNe(t,e){if(typeof Proxy>"u")return pC;const s=new Map,n=(i,o)=>pC(i,o,t,e),a=(i,o)=>n(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?n:(s.has(o)||s.set(o,pC(o,void 0,t,e)),s.get(o))})}function HZ({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function dNe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uNe(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function xC(t){return t===void 0||t===1}function _P({scale:t,scaleX:e,scaleY:s}){return!xC(t)||!xC(e)||!xC(s)}function ix(t){return _P(t)||GZ(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function GZ(t){return eL(t.x)||eL(t.y)}function eL(t){return t&&t!=="0%"}function EN(t,e,s){const n=t-s,a=e*n;return s+a}function tL(t,e,s,n,a){return a!==void 0&&(t=EN(t,a,n)),EN(t,s,n)+e}function AP(t,e=0,s=1,n,a){t.min=tL(t.min,e,s,n,a),t.max=tL(t.max,e,s,n,a)}function YZ(t,{x:e,y:s}){AP(t.x,e.translate,e.scale,e.originPoint),AP(t.y,s.translate,s.scale,s.originPoint)}const rL=.999999999999,sL=1.0000000000001;function hNe(t,e,s,n=!1){const a=s.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&_0(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YZ(t,o)),n&&ix(i.latestValues)&&_0(t,i.latestValues))}e.x<sL&&e.x>rL&&(e.x=1),e.y<sL&&e.y>rL&&(e.y=1)}function k0(t,e){t.min=t.min+e,t.max=t.max+e}function nL(t,e,s,n,a=.5){const i=si(t.min,t.max,a);AP(t,e,s,i,n)}function _0(t,e){nL(t.x,e.x,e.scaleX,e.scale,e.originX),nL(t.y,e.y,e.scaleY,e.scale,e.originY)}function KZ(t,e){return HZ(uNe(t.getBoundingClientRect(),e))}function mNe(t,e,s){const n=KZ(t,s),{scroll:a}=e;return a&&(k0(n.x,a.offset.x),k0(n.y,a.offset.y)),n}const aL=()=>({translate:0,scale:1,origin:0,originPoint:0}),A0=()=>({x:aL(),y:aL()}),iL=()=>({min:0,max:0}),wi=()=>({x:iL(),y:iL()}),EP={current:null},XZ={current:!1};function fNe(){if(XZ.current=!0,!!UI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>EP.current=t.matches;t.addEventListener("change",e),e()}else EP.current=!1}const pNe=new WeakMap;function xNe(t,e,s){for(const n in e){const a=e[n],i=s[n];if(hl(a))t.addValue(n,a);else if(hl(i))t.addValue(n,cv(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,cv(o!==void 0?o:a,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const oL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gNe{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a$,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=nc.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,za.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=y5(s),this.isVariantNode=DZ(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&hl(f)&&f.set(c[m])}}mount(e){this.current=e,pNe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),XZ.current||fNe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:EP.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Jf(this.notifyUpdate),Jf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Jv.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&za.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),i&&i(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dv){const s=dv[e];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<oL.length;n++){const a=oL[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=xNe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=cv(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(VQ(n)||qQ(n))?n=parseFloat(n):!Pje(n)&&ep.test(s)&&(n=kZ(e,s)),this.setBaseTarget(e,hl(n)?n.get():n)),hl(n)?n.get():n}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const i=p$(this.props,s,this.presenceContext?.custom);i&&(n=i[e])}if(s&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!hl(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new GI),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){l$.render(this.render)}}class QZ extends gNe{constructor(){super(...arguments),this.KeyframeResolver=gje}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hl(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function ZZ(t,{style:e,vars:s},n,a){const i=t.style;let o;for(o in e)i[o]=e[o];a?.applyProjectionStyles(i,n);for(o in s)i.setProperty(o,s[o])}function vNe(t){return window.getComputedStyle(t)}class yNe extends QZ{constructor(){super(...arguments),this.type="html",this.renderInstance=ZZ}readValueFromInstance(e,s){if(Jv.has(s))return this.projection?.isProjecting?bP(s):R2e(e,s);{const n=vNe(e),a=(XI(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return KZ(e,s)}build(e,s,n){h$(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return x$(e,s,n)}}const JZ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bNe(t,e,s,n){ZZ(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(JZ.has(a)?a:g$(a),e.attrs[a])}class wNe extends QZ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wi}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Jv.has(s)){const n=CZ(s);return n&&n.default||0}return s=JZ.has(s)?s:g$(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return zZ(e,s,n)}build(e,s,n){LZ(e,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,s,n,a){bNe(e,s,n,a)}mount(e){this.isSVGTag=BZ(e.tagName),super.mount(e)}}const jNe=(t,e)=>f$(t)?new wNe(e):new yNe(e,{allowProjection:t!==j.Fragment});function Y0(t,e,s){const n=t.getProps();return p$(n,e,s!==void 0?s:n.custom,t)}const PP=t=>Array.isArray(t);function NNe(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,cv(s))}function SNe(t){return PP(t)?t[t.length-1]||0:t}function CNe(t,e){const s=Y0(t,e);let{transitionEnd:n={},transition:a={},...i}=s||{};i={...i,...n};for(const o in i){const l=SNe(i[o]);NNe(t,o,l)}}function kNe(t){return!!(hl(t)&&t.add)}function TP(t,e){const s=t.getValue("willChange");if(kNe(s))return s.add(e);if(!s&&Om.WillChange){const n=new Om.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function eJ(t){return t.props[VZ]}const _Ne=t=>t!==null;function ANe(t,{repeat:e,repeatType:s="loop"},n){const a=t.filter(_Ne),i=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[i]}const ENe={type:"spring",stiffness:500,damping:25,restSpeed:10},PNe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TNe={type:"keyframes",duration:.8},ONe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},INe=(t,{keyframes:e})=>e.length>2?TNe:Jv.has(t)?t.startsWith("scale")?PNe(e[1]):ENe:ONe;function $Ne({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const v$=(t,e,s,n={},a,i)=>o=>{const l=i$(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-bh(c);const u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:a};$Ne(l)||Object.assign(u,INe(t,u)),u.duration&&(u.duration=bh(u.duration)),u.repeatDelay&&(u.repeatDelay=bh(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(CP(u),u.delay===0&&(h=!0)),(Om.instantAnimations||Om.skipAnimations)&&(h=!0,CP(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const m=ANe(u.keyframes,l);if(m!==void 0){za.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new n$(u):new aje(u)};function DNe({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function tJ(t,e,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(i=n);const c=[],d=a&&t.animationState&&t.animationState.getState()[a];for(const u in l){const h=t.getValue(u,t.latestValues[u]??null),m=l[u];if(m===void 0||d&&DNe(d,u))continue;const f={delay:s,...i$(i||{},u)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!f.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const b=eJ(t);if(b){const w=window.MotionHandoffAnimation(b,u,za);w!==null&&(f.startTime=w,x=!0)}}TP(t,u),h.start(v$(u,h,m,t.shouldReduceMotion&&jZ.has(u)?{type:!1}:f,t,x));const g=h.animation;g&&c.push(g)}return o&&Promise.all(c).then(()=>{za.update(()=>{o&&CNe(t,o)})}),c}function rJ(t,e,s,n=0,a=1){const i=Array.from(t).sort((d,u)=>d.sortNodePosition(u)).indexOf(e),o=t.size,l=(o-1)*n;return typeof s=="function"?s(i,o):a===1?i*n:l-i*n}function OP(t,e,s={}){const n=Y0(t,e,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(tJ(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=a;return RNe(t,e,c,d,u,h,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(s.delay)])}function RNe(t,e,s=0,n=0,a=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(OP(c,e,{...o,delay:s+(typeof n=="function"?0:n)+rJ(t.variantChildren,c,n,a,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function MNe(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>OP(t,i,s));n=Promise.all(a)}else if(typeof e=="string")n=OP(t,e,s);else{const a=typeof e=="function"?Y0(t,e,s.custom):e;n=Promise.all(tJ(t,a,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}function sJ(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}const LNe=u$.length;function nJ(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?nJ(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<LNe;s++){const n=u$[s],a=t.props[n];(bb(a)||a===!1)&&(e[n]=a)}return e}const FNe=[...d$].reverse(),BNe=d$.length;function UNe(t){return e=>Promise.all(e.map(({animation:s,options:n})=>MNe(t,s,n)))}function zNe(t){let e=UNe(t),s=lL(),n=!0;const a=c=>(d,u)=>{const h=Y0(t,u,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:f,...v}=h;d={...d,...v,...f}}return d};function i(c){e=c(t)}function o(c){const{props:d}=t,u=nJ(t.parent)||{},h=[],m=new Set;let f={},v=1/0;for(let g=0;g<BNe;g++){const b=FNe[g],w=s[b],N=d[b]!==void 0?d[b]:u[b],C=bb(N),S=b===c?w.isActive:null;S===!1&&(v=g);let A=N===u[b]&&N!==d[b]&&C;if(A&&n&&t.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...f},!w.isActive&&S===null||!N&&!w.prevProp||v5(N)||typeof N=="boolean")continue;const k=VNe(w.prevProp,N);let E=k||b===c&&w.isActive&&!A&&C||g>v&&C,O=!1;const $=Array.isArray(N)?N:[N];let T=$.reduce(a(b),{});S===!1&&(T={});const{prevResolvedValues:I={}}=w,L={...I,...T},z=B=>{E=!0,m.has(B)&&(O=!0,m.delete(B)),w.needsAnimating[B]=!0;const F=t.getValue(B);F&&(F.liveStyle=!1)};for(const B in L){const F=T[B],J=I[B];if(f.hasOwnProperty(B))continue;let ee=!1;PP(F)&&PP(J)?ee=!sJ(F,J):ee=F!==J,ee?F!=null?z(B):m.add(B):F!==void 0&&m.has(B)?z(B):w.protectedKeys[B]=!0}w.prevProp=N,w.prevResolvedValues=T,w.isActive&&(f={...f,...T}),n&&t.blockInitialAnimation&&(E=!1);const M=A&&k;E&&(!M||O)&&h.push(...$.map(B=>{const F={type:b};if(typeof B=="string"&&n&&!M&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,ee=Y0(J,B);if(J.enteringChildren&&ee){const{delayChildren:q}=ee.transition||{};F.delay=rJ(J.enteringChildren,t,q)}}return{animation:B,options:F}}))}if(m.size){const g={};if(typeof d.initial!="boolean"){const b=Y0(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(g.transition=b.transition)}m.forEach(b=>{const w=t.getBaseTarget(b),N=t.getValue(b);N&&(N.liveStyle=!0),g[b]=w??null}),h.push({animation:g})}let x=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(x=!1),n=!1,x?e(h):Promise.resolve()}function l(c,d){if(s[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,d)),s[c].isActive=d;const u=o(c);for(const h in s)s[h].protectedKeys={};return u}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=lL()}}}function VNe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sJ(e,t):!1}function Zp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lL(){return{animate:Zp(!0),whileInView:Zp(),whileHover:Zp(),whileTap:Zp(),whileDrag:Zp(),whileFocus:Zp(),exit:Zp()}}class hp{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WNe extends hp{constructor(e){super(e),e.animationState||(e.animationState=zNe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();v5(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qNe=0;class HNe extends hp{constructor(){super(...arguments),this.id=qNe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GNe={animation:{Feature:WNe},exit:{Feature:HNe}};function jb(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function _w(t){return{point:{x:t.pageX,y:t.pageY}}}const YNe=t=>e=>c$(e)&&t(e,_w(e));function W1(t,e,s,n){return jb(t,e,YNe(s),n)}const aJ=1e-4,KNe=1-aJ,XNe=1+aJ,iJ=.01,QNe=0-iJ,ZNe=0+iJ;function El(t){return t.max-t.min}function JNe(t,e,s){return Math.abs(t-e)<=s}function cL(t,e,s,n=.5){t.origin=n,t.originPoint=si(e.min,e.max,t.origin),t.scale=El(s)/El(e),t.translate=si(s.min,s.max,t.origin)-t.originPoint,(t.scale>=KNe&&t.scale<=XNe||isNaN(t.scale))&&(t.scale=1),(t.translate>=QNe&&t.translate<=ZNe||isNaN(t.translate))&&(t.translate=0)}function q1(t,e,s,n){cL(t.x,e.x,s.x,n?n.originX:void 0),cL(t.y,e.y,s.y,n?n.originY:void 0)}function dL(t,e,s){t.min=s.min+e.min,t.max=t.min+El(e)}function e4e(t,e,s){dL(t.x,e.x,s.x),dL(t.y,e.y,s.y)}function uL(t,e,s){t.min=e.min-s.min,t.max=t.min+El(e)}function H1(t,e,s){uL(t.x,e.x,s.x),uL(t.y,e.y,s.y)}function gd(t){return[t("x"),t("y")]}const oJ=({current:t})=>t?t.ownerDocument.defaultView:null,hL=(t,e)=>Math.abs(t-e);function t4e(t,e){const s=hL(t.x,e.x),n=hL(t.y,e.y);return Math.sqrt(s**2+n**2)}class lJ{constructor(e,s,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=vC(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,v=t4e(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!v)return;const{point:x}=m,{timestamp:g}=Fo;this.history.push({...x,timestamp:g});const{onStart:b,onMove:w}=this.handlers;f||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=gC(f,this.transformPagePoint),za.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=vC(m.type==="pointercancel"?this.lastMoveEventInfo:gC(f,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,b),x&&x(m,b)},!c$(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const l=_w(e),c=gC(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=Fo;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=s;h&&h(e,vC(c,this.history)),this.removeListeners=Sw(W1(this.contextWindow,"pointermove",this.handlePointerMove),W1(this.contextWindow,"pointerup",this.handlePointerUp),W1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jf(this.updatePoint)}}function gC(t,e){return e?{point:e(t.point)}:t}function mL(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vC({point:t},e){return{point:t,delta:mL(t,cJ(e)),offset:mL(t,r4e(e)),velocity:s4e(e,.1)}}function r4e(t){return t[0]}function cJ(t){return t[t.length-1]}function s4e(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const a=cJ(t);for(;s>=0&&(n=t[s],!(a.timestamp-n.timestamp>bh(e)));)s--;if(!n)return{x:0,y:0};const i=kd(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function n4e(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?si(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?si(s,t,n.max):Math.min(t,s)),t}function fL(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function a4e(t,{top:e,left:s,bottom:n,right:a}){return{x:fL(t.x,s,a),y:fL(t.y,e,n)}}function pL(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function i4e(t,e){return{x:pL(t.x,e.x),y:pL(t.y,e.y)}}function o4e(t,e){let s=.5;const n=El(t),a=El(e);return a>n?s=gb(e.min,e.max-n,t.min):n>a&&(s=gb(t.min,t.max-a,e.min)),Tm(0,1,s)}function l4e(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const IP=.35;function c4e(t=IP){return t===!1?t=0:t===!0&&(t=IP),{x:xL(t,"left","right"),y:xL(t,"top","bottom")}}function xL(t,e,s){return{min:gL(t,e),max:gL(t,s)}}function gL(t,e){return typeof t=="number"?t:t[e]||0}const d4e=new WeakMap;class u4e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(_w(h).point)},o=(h,m)=>{const{drag:f,dragPropagation:v,onDragStart:x}=this.getProps();if(f&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jje(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gd(b=>{let w=this.getAxisMotionValue(b).get()||0;if(wh.test(w)){const{projection:N}=this.visualElement;if(N&&N.layout){const C=N.layout.layoutBox[b];C&&(w=El(C)*(parseFloat(w)/100))}}this.originPoint[b]=w}),x&&za.postRender(()=>x(h,m)),TP(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:v,onDirectionLock:x,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=m;if(v&&this.currentDirection===null){this.currentDirection=h4e(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),g&&g(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>gd(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new lJ(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:oJ(this.visualElement)})}stop(e,s){const n=e||this.latestPointerEvent,a=s||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&za.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:a}=this.getProps();if(!n||!Q2(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=n4e(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&C0(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=a4e(n.layoutBox,e):this.constraints=!1,this.elastic=c4e(s),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&gd(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=l4e(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!C0(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=mNe(n,a.root,this.visualElement.getTransformPagePoint());let o=i4e(a.layout.layoutBox,i);if(s){const l=s(dNe(o));this.hasMutatedConstraints=!!l,l&&(o=HZ(l))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=gd(u=>{if(!Q2(u,s,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,f=a?40:1e7,v={type:"inertia",velocity:n?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(d).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return TP(this.visualElement,e),n.start(v$(e,n,0,s,this.visualElement,!1))}stopAnimation(){gd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gd(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){gd(s=>{const{drag:n}=this.getProps();if(!Q2(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(e[s]-si(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!C0(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};gd(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=o4e({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gd(o=>{if(!Q2(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(si(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;d4e.set(this.visualElement,this);const e=this.visualElement.current,s=W1(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();C0(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),za.read(n);const o=jb(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(gd(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{o(),s(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=IP,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Q2(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function h4e(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class m4e extends hp{constructor(e){super(e),this.removeGroupControls=Od,this.removeListeners=Od,this.controls=new u4e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Od}unmount(){this.removeGroupControls(),this.removeListeners()}}const vL=t=>(e,s)=>{t&&za.postRender(()=>t(e,s))};class f4e extends hp{constructor(){super(...arguments),this.removePointerDownListener=Od}onPointerDown(e){this.session=new lJ(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oJ(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:vL(e),onStart:vL(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&za.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=W1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qj={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Cs.test(t))t=parseFloat(t);else return t;const s=yL(t,e.target.x),n=yL(t,e.target.y);return`${s}% ${n}%`}},p4e={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,a=ep.parse(t);if(a.length>5)return n;const i=ep.createTransformer(t),o=typeof a[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const d=si(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};let yC=!1;class x4e extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;Lje(g4e),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),yC&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qj.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,yC=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||za.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),l$.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=e;yC=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dJ(t){const[e,s]=Tje(),n=j.useContext(zQ);return r.jsx(x4e,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(WZ),isPresent:e,safeToRemove:s})}const g4e={borderRadius:{...Yy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yy,borderTopRightRadius:Yy,borderBottomLeftRadius:Yy,borderBottomRightRadius:Yy,boxShadow:p4e};function v4e(t,e,s){const n=hl(t)?t:cv(t);return n.start(v$("",n,e,s)),n.animation}const y4e=(t,e)=>t.depth-e.depth;class b4e{constructor(){this.children=[],this.isDirty=!1}add(e){VI(this.children,e),this.isDirty=!0}remove(e){WI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(y4e),this.isDirty=!1,this.children.forEach(e)}}function w4e(t,e){const s=nc.now(),n=({timestamp:a})=>{const i=a-s;i>=e&&(Jf(n),t(i-e))};return za.setup(n,!0),()=>Jf(n)}const uJ=["TopLeft","TopRight","BottomLeft","BottomRight"],j4e=uJ.length,bL=t=>typeof t=="string"?parseFloat(t):t,wL=t=>typeof t=="number"||Cs.test(t);function N4e(t,e,s,n,a,i){a?(t.opacity=si(0,s.opacity??1,S4e(n)),t.opacityExit=si(e.opacity??1,0,C4e(n))):i&&(t.opacity=si(e.opacity??1,s.opacity??1,n));for(let o=0;o<j4e;o++){const l=`border${uJ[o]}Radius`;let c=jL(e,l),d=jL(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||wL(c)===wL(d)?(t[l]=Math.max(si(bL(c),bL(d),n),0),(wh.test(d)||wh.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||s.rotate)&&(t.rotate=si(e.rotate||0,s.rotate||0,n))}function jL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const S4e=hJ(0,.5,JQ),C4e=hJ(.5,.95,Od);function hJ(t,e,s){return n=>n<t?0:n>e?1:s(gb(t,e,n))}function NL(t,e){t.min=e.min,t.max=e.max}function ud(t,e){NL(t.x,e.x),NL(t.y,e.y)}function SL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function CL(t,e,s,n,a){return t-=e,t=EN(t,1/s,n),a!==void 0&&(t=EN(t,1/a,n)),t}function k4e(t,e=0,s=1,n=.5,a,i=t,o=t){if(wh.test(e)&&(e=parseFloat(e),e=si(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=si(i.min,i.max,n);t===i&&(l-=e),t.min=CL(t.min,e,s,l,a),t.max=CL(t.max,e,s,l,a)}function kL(t,e,[s,n,a],i,o){k4e(t,e[s],e[n],e[a],e.scale,i,o)}const _4e=["x","scaleX","originX"],A4e=["y","scaleY","originY"];function _L(t,e,s,n){kL(t.x,e,_4e,s?s.x:void 0,n?n.x:void 0),kL(t.y,e,A4e,s?s.y:void 0,n?n.y:void 0)}function AL(t){return t.translate===0&&t.scale===1}function mJ(t){return AL(t.x)&&AL(t.y)}function EL(t,e){return t.min===e.min&&t.max===e.max}function E4e(t,e){return EL(t.x,e.x)&&EL(t.y,e.y)}function PL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function fJ(t,e){return PL(t.x,e.x)&&PL(t.y,e.y)}function TL(t){return El(t.x)/El(t.y)}function OL(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class P4e{constructor(){this.members=[]}add(e){VI(this.members,e),e.scheduleRender()}remove(e){if(WI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function T4e(t,e,s){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=s?.z||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:f,skewY:v}=s;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),f&&(n+=`skewX(${f}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const bC=["","X","Y","Z"],O4e=1e3;let I4e=0;function wC(t,e,s,n){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),n&&(n[t]=0))}function pJ(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=eJ(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",za,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&pJ(n)}function xJ({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e?.()){this.id=I4e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(R4e),this.nodes.forEach(B4e),this.nodes.forEach(U4e),this.nodes.forEach(M4e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new b4e)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new GI),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=TZ(o)&&!Aje(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;za.read(()=>{h=window.innerWidth}),t(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,u&&u(),u=w4e(m,250),qj.hasAnimatedSinceResize&&(qj.hasAnimatedSinceResize=!1,this.nodes.forEach(DL)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||H4e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=d.getProps(),b=!this.targetLayout||!fJ(this.targetLayout,f),w=!h&&m;if(this.options.layoutRoot||this.resumeFrom||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...i$(v,"layout"),onPlay:x,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(u,w)}else h||DL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Jf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(z4e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pJ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($L);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(F4e),this.nodes.forEach($4e),this.nodes.forEach(D4e)):this.nodes.forEach($L),this.clearAllSnapshots();const l=nc.now();Fo.delta=Tm(0,1e3/60,l-Fo.timestamp),Fo.timestamp=l,Fo.isProcessing=!0,cC.update.process(Fo),cC.preRender.process(Fo),cC.render.process(Fo),Fo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,l$.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(L4e),this.sharedNodes.forEach(V4e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,za.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){za.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!El(this.snapshot.measuredBox.x)&&!El(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!mJ(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ix(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),G4e(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return wi();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Y4e))){const{scroll:d}=this.root;d&&(k0(l.x,d.offset.x),k0(l.y,d.offset.y))}return l}removeElementScroll(o){const l=wi();if(ud(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&ud(l,o),k0(l.x,u.offset.x),k0(l.y,u.offset.y))}return l}applyTransform(o,l=!1){const c=wi();ud(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&_0(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ix(u.latestValues)&&_0(c,u.latestValues)}return ix(this.latestValues)&&_0(c,this.latestValues),c}removeTransform(o){const l=wi();ud(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ix(d.latestValues))continue;_P(d.latestValues)&&d.updateSnapshot();const u=wi(),h=d.measurePageBox();ud(u,h),_L(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return ix(this.latestValues)&&_L(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Fo.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),H1(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e4e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ud(this.target,this.layout.layoutBox),YZ(this.target,this.targetDelta)):ud(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),H1(this.relativeTargetOrigin,this.target,m.target),ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_P(this.parent.latestValues)||GZ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Fo.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;ud(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;hNe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=wi());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(SL(this.prevProjectionDelta.x,this.projectionDelta.x),SL(this.prevProjectionDelta.y,this.projectionDelta.y)),q1(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!OL(this.projectionDelta.x,this.prevProjectionDelta.x)||!OL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=A0(),this.projectionDelta=A0(),this.projectionDeltaWithTransform=A0()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=A0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=wi(),f=c?c.source:void 0,v=this.layout?this.layout.source:void 0,x=f!==v,g=this.getStack(),b=!g||g.members.length<=1,w=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(q4e));this.animationProgress=0;let N;this.mixTargetDelta=C=>{const S=C/1e3;RL(h.x,o.x,S),RL(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(H1(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),W4e(this.relativeTarget,this.relativeTargetOrigin,m,S),N&&E4e(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=wi()),ud(N,this.relativeTarget)),x&&(this.animationValues=u,N4e(u,d,this.latestValues,S,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Jf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=za.update(()=>{qj.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cv(0)),this.currentAnimation=v4e(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(O4e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&gJ(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||wi();const h=El(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=El(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}ud(l,c),_0(l,u),q1(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new P4e),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&wC("z",o,d,this.animationValues);for(let u=0;u<bC.length;u++)wC(`rotate${bC[u]}`,o,d,this.animationValues),wC(`skew${bC[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wj(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wj(l?.pointerEvents)||""),this.hasProjected&&!ix(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=T4e(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:m,y:f}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const v in wb){if(u[v]===void 0)continue;const{correct:x,applyTo:g,isCSSVariable:b}=wb[v],w=h==="none"?u[v]:x(u[v],d);if(g){const N=g.length;for(let C=0;C<N;C++)o[g[C]]=w}else b?this.options.visualElement.renderState.vars[v]=w:o[v]=w}this.options.layoutId&&(o.pointerEvents=d===this?Wj(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(IL),this.root.sharedNodes.clear()}}}function $4e(t){t.updateLayout()}function D4e(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:n}=t.layout,{animationType:a}=t.options,i=e.source!==t.layout.source;a==="size"?gd(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],m=El(h);h.min=s[u].min,h.max=h.min+m}):gJ(a,e.layoutBox,s)&&gd(u=>{const h=i?e.measuredBox[u]:e.layoutBox[u],m=El(s[u]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+m)});const o=A0();q1(o,s,e.layoutBox);const l=A0();i?q1(l,t.applyTransform(n,!0),e.measuredBox):q1(l,s,e.layoutBox);const c=!mJ(o);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:m}=u;if(h&&m){const f=wi();H1(f,e.layoutBox,h.layoutBox);const v=wi();H1(v,s,m.layoutBox),fJ(f,v)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=f,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function R4e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function M4e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function L4e(t){t.clearSnapshot()}function IL(t){t.clearMeasurements()}function $L(t){t.isLayoutDirty=!1}function F4e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function B4e(t){t.resolveTargetDelta()}function U4e(t){t.calcProjection()}function z4e(t){t.resetSkewAndRotation()}function V4e(t){t.removeLeadSnapshot()}function RL(t,e,s){t.translate=si(e.translate,0,s),t.scale=si(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function ML(t,e,s,n){t.min=si(e.min,s.min,n),t.max=si(e.max,s.max,n)}function W4e(t,e,s,n){ML(t.x,e.x,s.x,n),ML(t.y,e.y,s.y,n)}function q4e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const H4e={duration:.45,ease:[.4,0,.1,1]},LL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FL=LL("applewebkit/")&&!LL("chrome/")?Math.round:Od;function BL(t){t.min=FL(t.min),t.max=FL(t.max)}function G4e(t){BL(t.x),BL(t.y)}function gJ(t,e,s){return t==="position"||t==="preserve-aspect"&&!JNe(TL(e),TL(s),.2)}function Y4e(t){return t!==t.root&&t.scroll?.wasRoot}const K4e=xJ({attachResizeListener:(t,e)=>jb(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),jC={current:void 0},vJ=xJ({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!jC.current){const t=new K4e({});t.mount(window),t.setOptions({layoutScroll:!0}),jC.current=t}return jC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),X4e={pan:{Feature:f4e},drag:{Feature:m4e,ProjectionNode:vJ,MeasureLayout:dJ}};function UL(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=n[a];i&&za.postRender(()=>i(e,_w(e)))}class Q4e extends hp{mount(){const{current:e}=this.node;e&&(this.unmount=Nje(e,(s,n)=>(UL(this.node,n,"Start"),a=>UL(this.node,a,"End"))))}unmount(){}}class Z4e extends hp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sw(jb(this.node.current,"focus",()=>this.onFocus()),jb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zL(t,e,s){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=n[a];i&&za.postRender(()=>i(e,_w(e)))}class J4e extends hp{mount(){const{current:e}=this.node;e&&(this.unmount=_je(e,(s,n)=>(zL(this.node,n,"Start"),(a,{success:i})=>zL(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $P=new WeakMap,NC=new WeakMap,e5e=t=>{const e=$P.get(t.target);e&&e(t)},t5e=t=>{t.forEach(e5e)};function r5e({root:t,...e}){const s=t||document;NC.has(s)||NC.set(s,{});const n=NC.get(s),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(t5e,{root:t,...e})),n[a]}function s5e(t,e,s){const n=r5e(e);return $P.set(t,s),n.observe(t),()=>{$P.delete(t),n.unobserve(t)}}const n5e={some:0,all:1};class a5e extends hp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:n5e[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return s5e(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(i5e(e,s))&&this.startObserver()}unmount(){}}function i5e({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const o5e={inView:{Feature:a5e},tap:{Feature:J4e},focus:{Feature:Z4e},hover:{Feature:Q4e}},l5e={layout:{ProjectionNode:vJ,MeasureLayout:dJ}},c5e={...GNe,...o5e,...X4e,...l5e},uh=cNe(c5e,jNe),yJ=({size:t=80,className:e="",animated:s=!0})=>{const n=s?uh.rect:"rect",a=s?uh.line:"line",i=s?uh.circle:"circle",o=e.includes("text-")?"currentColor":"white";return r.jsxs("svg",{width:t,height:t,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[r.jsx(n,{x:"10",y:"15",width:"60",height:"55",rx:"6",stroke:o,strokeWidth:"3",fill:"none",...s&&{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut",repeat:1/0,repeatType:"loop"}}}),r.jsx(a,{x1:"10",y1:"28",x2:"70",y2:"28",stroke:o,strokeWidth:"3",...s&&{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,ease:"easeInOut",repeat:1/0,repeatType:"loop",delay:.2}}}),r.jsx(a,{x1:"25",y1:"15",x2:"25",y2:"10",stroke:o,strokeWidth:"3",strokeLinecap:"round",...s&&{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",repeat:1/0,repeatType:"reverse"}}}),r.jsx(a,{x1:"55",y1:"15",x2:"55",y2:"10",stroke:o,strokeWidth:"3",strokeLinecap:"round",...s&&{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut",repeat:1/0,repeatType:"reverse",delay:.1}}}),r.jsx(i,{cx:"25",cy:"42",r:"3",fill:"#4f46e5",...s&&{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,1]},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatType:"loop",delay:.3}}}),r.jsx(i,{cx:"40",cy:"42",r:"3",fill:"#4f46e5",...s&&{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,1]},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatType:"loop",delay:.5}}}),r.jsx(i,{cx:"55",cy:"42",r:"3",fill:"#4f46e5",...s&&{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,1]},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatType:"loop",delay:.7}}}),r.jsx(i,{cx:"25",cy:"55",r:"3",fill:"#4f46e5",...s&&{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,1]},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatType:"loop",delay:.9}}}),r.jsx(i,{cx:"40",cy:"55",r:"3",fill:"#4f46e5",...s&&{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:[0,1,1]},transition:{duration:1.2,ease:"easeOut",repeat:1/0,repeatType:"loop",delay:1.1}}})]})},d5e=({onLoadingComplete:t})=>{const[e,s]=j.useState(0);return j.useEffect(()=>{const n=setInterval(()=>{s(a=>{if(a>=100)return clearInterval(n),setTimeout(()=>{t?.()},300),100;const i=a<60?2:a<90?5:10;return Math.min(a+i,100)})},50);return()=>clearInterval(n)},[t]),r.jsxs(uh.div,{className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#0a0a0a]",initial:{opacity:1},animate:{opacity:e>=100?0:1},transition:{duration:.4,ease:"easeOut"},children:[r.jsx(uh.div,{className:"relative mb-12",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:r.jsx(yJ,{size:80,animated:!0})}),r.jsx("div",{className:"w-64 h-1 bg-[#1e1e1e] rounded-full overflow-hidden",children:r.jsx(uh.div,{className:"h-full bg-white rounded-full",initial:{width:"0%"},animate:{width:`${e}%`},transition:{duration:.3,ease:"easeOut"}})}),r.jsx(uh.p,{className:"mt-8 text-white/60 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},children:"Loading BookingTMS..."})]})};function he({className:t,...e}){return r.jsx("div",{"data-slot":"card",className:Ar("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function Ke({className:t,...e}){return r.jsx("div",{"data-slot":"card-header",className:Ar("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function Xe({className:t,...e}){return r.jsx("h4",{"data-slot":"card-title",className:Ar("leading-none",t),...e})}function Ft({className:t,...e}){return r.jsx("p",{"data-slot":"card-description",className:Ar("text-muted-foreground",t),...e})}function _e({className:t,...e}){return r.jsx("div",{"data-slot":"card-content",className:Ar("px-6 [&:last-child]:pb-6",t),...e})}function tc({title:t,value:e,change:s,trend:n,period:a,icon:i,iconColor:o="bg-blue-600",valuePrefix:l="",valueSuffix:c=""}){const d=n??(s!==void 0?{value:s,isPositive:s>=0}:void 0),u=d?d.isPositive??d.value>=0:void 0,h=typeof e=="number"?e.toLocaleString():e,m=`${l}${h}${c}`;return r.jsxs(he,{className:"group relative overflow-hidden border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-lg dark:hover:shadow-[0_0_25px_rgba(79,70,229,0.2)] transition-all hover:-translate-y-0.5",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#4f46e5]/0 via-transparent to-purple-500/0 dark:from-[#4f46e5]/5 dark:via-transparent dark:to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsx(_e,{className:"relative p-5 sm:p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373] mb-2 truncate uppercase tracking-wide",children:t}),r.jsx("p",{className:"text-2xl sm:text-3xl text-gray-900 dark:text-white mb-3 truncate",children:m}),d&&r.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[u?r.jsx(hue,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-500 flex-shrink-0"}):r.jsx(oue,{className:"w-4 h-4 text-red-600 dark:text-red-500 flex-shrink-0"}),r.jsxs("span",{className:`text-sm ${u?"text-emerald-600 dark:text-emerald-500":"text-red-600 dark:text-red-500"}`,children:[Math.abs(d.value),"%"]}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-[#737373]",children:d.label??a??"vs last month"})]})]}),r.jsx("div",{className:`${o} w-12 h-12 sm:w-14 sm:h-14 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform`,children:r.jsx(i,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})})]})})]})}var SC,VL;function cc(){if(VL)return SC;VL=1;var t=Array.isArray;return SC=t,SC}var CC,WL;function bJ(){if(WL)return CC;WL=1;var t=typeof C2=="object"&&C2&&C2.Object===Object&&C2;return CC=t,CC}var kC,qL;function Dh(){if(qL)return kC;qL=1;var t=bJ(),e=typeof self=="object"&&self&&self.Object===Object&&self,s=t||e||Function("return this")();return kC=s,kC}var _C,HL;function Aw(){if(HL)return _C;HL=1;var t=Dh(),e=t.Symbol;return _C=e,_C}var AC,GL;function u5e(){if(GL)return AC;GL=1;var t=Aw(),e=Object.prototype,s=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var l=s.call(o,a),c=o[a];try{o[a]=void 0;var d=!0}catch{}var u=n.call(o);return d&&(l?o[a]=c:delete o[a]),u}return AC=i,AC}var EC,YL;function h5e(){if(YL)return EC;YL=1;var t=Object.prototype,e=t.toString;function s(n){return e.call(n)}return EC=s,EC}var PC,KL;function Lm(){if(KL)return PC;KL=1;var t=Aw(),e=u5e(),s=h5e(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:n:i&&i in Object(l)?e(l):s(l)}return PC=o,PC}var TC,XL;function Fm(){if(XL)return TC;XL=1;function t(e){return e!=null&&typeof e=="object"}return TC=t,TC}var OC,QL;function ey(){if(QL)return OC;QL=1;var t=Lm(),e=Fm(),s="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==s}return OC=n,OC}var IC,ZL;function y$(){if(ZL)return IC;ZL=1;var t=cc(),e=ey(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:n.test(i)||!s.test(i)||o!=null&&i in Object(o)}return IC=a,IC}var $C,JL;function mp(){if(JL)return $C;JL=1;function t(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}return $C=t,$C}var DC,e9;function b$(){if(e9)return DC;e9=1;var t=Lm(),e=mp(),s="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==n||c==a||c==s||c==i}return DC=o,DC}var RC,t9;function m5e(){if(t9)return RC;t9=1;var t=Dh(),e=t["__core-js_shared__"];return RC=e,RC}var MC,r9;function f5e(){if(r9)return MC;r9=1;var t=m5e(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function s(n){return!!e&&e in n}return MC=s,MC}var LC,s9;function wJ(){if(s9)return LC;s9=1;var t=Function.prototype,e=t.toString;function s(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return LC=s,LC}var FC,n9;function p5e(){if(n9)return FC;n9=1;var t=b$(),e=f5e(),s=mp(),n=wJ(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(m){if(!s(m)||e(m))return!1;var f=t(m)?u:i;return f.test(n(m))}return FC=h,FC}var BC,a9;function x5e(){if(a9)return BC;a9=1;function t(e,s){return e?.[s]}return BC=t,BC}var UC,i9;function xg(){if(i9)return UC;i9=1;var t=p5e(),e=x5e();function s(n,a){var i=e(n,a);return t(i)?i:void 0}return UC=s,UC}var zC,o9;function b5(){if(o9)return zC;o9=1;var t=xg(),e=t(Object,"create");return zC=e,zC}var VC,l9;function g5e(){if(l9)return VC;l9=1;var t=b5();function e(){this.__data__=t?t(null):{},this.size=0}return VC=e,VC}var WC,c9;function v5e(){if(c9)return WC;c9=1;function t(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}return WC=t,WC}var qC,d9;function y5e(){if(d9)return qC;d9=1;var t=b5(),e="__lodash_hash_undefined__",s=Object.prototype,n=s.hasOwnProperty;function a(i){var o=this.__data__;if(t){var l=o[i];return l===e?void 0:l}return n.call(o,i)?o[i]:void 0}return qC=a,qC}var HC,u9;function b5e(){if(u9)return HC;u9=1;var t=b5(),e=Object.prototype,s=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:s.call(i,a)}return HC=n,HC}var GC,h9;function w5e(){if(h9)return GC;h9=1;var t=b5(),e="__lodash_hash_undefined__";function s(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return GC=s,GC}var YC,m9;function j5e(){if(m9)return YC;m9=1;var t=g5e(),e=v5e(),s=y5e(),n=b5e(),a=w5e();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=s,i.prototype.has=n,i.prototype.set=a,YC=i,YC}var KC,f9;function N5e(){if(f9)return KC;f9=1;function t(){this.__data__=[],this.size=0}return KC=t,KC}var XC,p9;function w$(){if(p9)return XC;p9=1;function t(e,s){return e===s||e!==e&&s!==s}return XC=t,XC}var QC,x9;function w5(){if(x9)return QC;x9=1;var t=w$();function e(s,n){for(var a=s.length;a--;)if(t(s[a][0],n))return a;return-1}return QC=e,QC}var ZC,g9;function S5e(){if(g9)return ZC;g9=1;var t=w5(),e=Array.prototype,s=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():s.call(i,o,1),--this.size,!0}return ZC=n,ZC}var JC,v9;function C5e(){if(v9)return JC;v9=1;var t=w5();function e(s){var n=this.__data__,a=t(n,s);return a<0?void 0:n[a][1]}return JC=e,JC}var ek,y9;function k5e(){if(y9)return ek;y9=1;var t=w5();function e(s){return t(this.__data__,s)>-1}return ek=e,ek}var tk,b9;function _5e(){if(b9)return tk;b9=1;var t=w5();function e(s,n){var a=this.__data__,i=t(a,s);return i<0?(++this.size,a.push([s,n])):a[i][1]=n,this}return tk=e,tk}var rk,w9;function j5(){if(w9)return rk;w9=1;var t=N5e(),e=S5e(),s=C5e(),n=k5e(),a=_5e();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=s,i.prototype.has=n,i.prototype.set=a,rk=i,rk}var sk,j9;function j$(){if(j9)return sk;j9=1;var t=xg(),e=Dh(),s=t(e,"Map");return sk=s,sk}var nk,N9;function A5e(){if(N9)return nk;N9=1;var t=j5e(),e=j5(),s=j$();function n(){this.size=0,this.__data__={hash:new t,map:new(s||e),string:new t}}return nk=n,nk}var ak,S9;function E5e(){if(S9)return ak;S9=1;function t(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}return ak=t,ak}var ik,C9;function N5(){if(C9)return ik;C9=1;var t=E5e();function e(s,n){var a=s.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return ik=e,ik}var ok,k9;function P5e(){if(k9)return ok;k9=1;var t=N5();function e(s){var n=t(this,s).delete(s);return this.size-=n?1:0,n}return ok=e,ok}var lk,_9;function T5e(){if(_9)return lk;_9=1;var t=N5();function e(s){return t(this,s).get(s)}return lk=e,lk}var ck,A9;function O5e(){if(A9)return ck;A9=1;var t=N5();function e(s){return t(this,s).has(s)}return ck=e,ck}var dk,E9;function I5e(){if(E9)return dk;E9=1;var t=N5();function e(s,n){var a=t(this,s),i=a.size;return a.set(s,n),this.size+=a.size==i?0:1,this}return dk=e,dk}var uk,P9;function N$(){if(P9)return uk;P9=1;var t=A5e(),e=P5e(),s=T5e(),n=O5e(),a=I5e();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=s,i.prototype.has=n,i.prototype.set=a,uk=i,uk}var hk,T9;function jJ(){if(T9)return hk;T9=1;var t=N$(),e="Expected a function";function s(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=n.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(s.Cache||t),i}return s.Cache=t,hk=s,hk}var mk,O9;function $5e(){if(O9)return mk;O9=1;var t=jJ(),e=500;function s(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return mk=s,mk}var fk,I9;function D5e(){if(I9)return fk;I9=1;var t=$5e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,c,d){i.push(c?d.replace(s,"$1"):l||o)}),i});return fk=n,fk}var pk,$9;function S$(){if($9)return pk;$9=1;function t(e,s){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=s(e[n],n,e);return i}return pk=t,pk}var xk,D9;function R5e(){if(D9)return xk;D9=1;var t=Aw(),e=S$(),s=cc(),n=ey(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(s(l))return e(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return xk=o,xk}var gk,R9;function NJ(){if(R9)return gk;R9=1;var t=R5e();function e(s){return s==null?"":t(s)}return gk=e,gk}var vk,M9;function SJ(){if(M9)return vk;M9=1;var t=cc(),e=y$(),s=D5e(),n=NJ();function a(i,o){return t(i)?i:e(i,o)?[i]:s(n(i))}return vk=a,vk}var yk,L9;function S5(){if(L9)return yk;L9=1;var t=ey();function e(s){if(typeof s=="string"||t(s))return s;var n=s+"";return n=="0"&&1/s==-1/0?"-0":n}return yk=e,yk}var bk,F9;function C$(){if(F9)return bk;F9=1;var t=SJ(),e=S5();function s(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return bk=s,bk}var wk,B9;function CJ(){if(B9)return wk;B9=1;var t=C$();function e(s,n,a){var i=s==null?void 0:t(s,n);return i===void 0?a:i}return wk=e,wk}var M5e=CJ();const Vc=cn(M5e);var jk,U9;function L5e(){if(U9)return jk;U9=1;function t(e){return e==null}return jk=t,jk}var F5e=L5e();const Os=cn(F5e);var Nk,z9;function B5e(){if(z9)return Nk;z9=1;var t=Lm(),e=cc(),s=Fm(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&s(i)&&t(i)==n}return Nk=a,Nk}var U5e=B5e();const Xx=cn(U5e);var z5e=b$();const xs=cn(z5e);var V5e=mp();const ty=cn(V5e);var Sk={exports:{}},zn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V9;function W5e(){if(V9)return zn;V9=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function x(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case t:switch(g=g.type,g){case s:case a:case n:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case m:case h:case i:return g;default:return b}}case e:return b}}}return zn.ContextConsumer=o,zn.ContextProvider=i,zn.Element=t,zn.ForwardRef=c,zn.Fragment=s,zn.Lazy=m,zn.Memo=h,zn.Portal=e,zn.Profiler=a,zn.StrictMode=n,zn.Suspense=d,zn.SuspenseList=u,zn.isAsyncMode=function(){return!1},zn.isConcurrentMode=function(){return!1},zn.isContextConsumer=function(g){return x(g)===o},zn.isContextProvider=function(g){return x(g)===i},zn.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},zn.isForwardRef=function(g){return x(g)===c},zn.isFragment=function(g){return x(g)===s},zn.isLazy=function(g){return x(g)===m},zn.isMemo=function(g){return x(g)===h},zn.isPortal=function(g){return x(g)===e},zn.isProfiler=function(g){return x(g)===a},zn.isStrictMode=function(g){return x(g)===n},zn.isSuspense=function(g){return x(g)===d},zn.isSuspenseList=function(g){return x(g)===u},zn.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===s||g===a||g===n||g===d||g===u||g===f||typeof g=="object"&&g!==null&&(g.$$typeof===m||g.$$typeof===h||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===v||g.getModuleId!==void 0)},zn.typeOf=x,zn}var W9;function q5e(){return W9||(W9=1,Sk.exports=W5e()),Sk.exports}var H5e=q5e(),Ck,q9;function kJ(){if(q9)return Ck;q9=1;var t=Lm(),e=Fm(),s="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==s}return Ck=n,Ck}var kk,H9;function G5e(){if(H9)return kk;H9=1;var t=kJ();function e(s){return t(s)&&s!=+s}return kk=e,kk}var Y5e=G5e();const ry=cn(Y5e);var K5e=kJ();const X5e=cn(K5e);var Pl=function(e){return e===0?0:e>0?1:-1},Sx=function(e){return Xx(e)&&e.indexOf("%")===e.length-1},er=function(e){return X5e(e)&&!ry(e)},Q5e=function(e){return Os(e)},ro=function(e){return er(e)||Xx(e)},Z5e=0,gg=function(e){var s=++Z5e;return"".concat(e||"").concat(s)},Tl=function(e,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!er(e)&&!Xx(e))return n;var i;if(Sx(e)){var o=e.indexOf("%");i=s*parseFloat(e.slice(0,o))/100}else i=+e;return ry(i)&&(i=n),a&&i>s&&(i=s),i},Rf=function(e){if(!e)return null;var s=Object.keys(e);return s&&s.length?e[s[0]]:null},J5e=function(e){if(!Array.isArray(e))return!1;for(var s=e.length,n={},a=0;a<s;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Zi=function(e,s){return er(e)&&er(s)?function(n){return e+n*(s-e)}:function(){return s}};function PN(t,e,s){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Vc(n,e))===s})}var e3e=function(e,s){return er(e)&&er(s)?e-s:Xx(e)&&Xx(s)?e.localeCompare(s):e instanceof Date&&s instanceof Date?e.getTime()-s.getTime():String(e).localeCompare(String(s))};function K0(t,e){for(var s in t)if({}.hasOwnProperty.call(t,s)&&(!{}.hasOwnProperty.call(e,s)||t[s]!==e[s]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function DP(t){"@babel/helpers - typeof";return DP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DP(t)}var t3e=["viewBox","children"],r3e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G9=["points","pathLength"],_k={svg:t3e,polygon:G9,polyline:G9},k$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],TN=function(e,s){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(j.isValidElement(e)&&(n=e.props),!ty(n))return null;var a={};return Object.keys(n).forEach(function(i){k$.includes(i)&&(a[i]=s||function(o){return n[i](n,o)})}),a},s3e=function(e,s,n){return function(a){return e(s,n,a),null}},Qx=function(e,s,n){if(!ty(e)||DP(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];k$.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=s3e(o,s,n))}),a},n3e=["children"],a3e=["children"];function Y9(t,e){if(t==null)return{};var s=i3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function i3e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function RP(t){"@babel/helpers - typeof";return RP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RP(t)}var K9={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},km=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},X9=null,Ak=null,_$=function t(e){if(e===X9&&Array.isArray(Ak))return Ak;var s=[];return j.Children.forEach(e,function(n){Os(n)||(H5e.isFragment(n)?s=s.concat(t(n.props.children)):s.push(n))}),Ak=s,X9=e,s};function Wc(t,e){var s=[],n=[];return Array.isArray(e)?n=e.map(function(a){return km(a)}):n=[km(e)],_$(t).forEach(function(a){var i=Vc(a,"type.displayName")||Vc(a,"type.name");n.indexOf(i)!==-1&&s.push(a)}),s}function Ec(t,e){var s=Wc(t,e);return s&&s[0]}var Q9=function(e){if(!e||!e.props)return!1;var s=e.props,n=s.width,a=s.height;return!(!er(n)||n<=0||!er(a)||a<=0)},o3e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],l3e=function(e){return e&&e.type&&Xx(e.type)&&o3e.indexOf(e.type)>=0},_J=function(e){return e&&RP(e)==="object"&&"clipDot"in e},c3e=function(e,s,n,a){var i,o=(i=_k?.[a])!==null&&i!==void 0?i:[];return s.startsWith("data-")||!xs(e)&&(a&&o.includes(s)||r3e.includes(s))||n&&k$.includes(s)},rs=function(e,s,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(j.isValidElement(e)&&(a=e.props),!ty(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;c3e((l=a)===null||l===void 0?void 0:l[o],o,s,n)&&(i[o]=a[o])}),i},MP=function t(e,s){if(e===s)return!0;var n=j.Children.count(e);if(n!==j.Children.count(s))return!1;if(n===0)return!0;if(n===1)return Z9(Array.isArray(e)?e[0]:e,Array.isArray(s)?s[0]:s);for(var a=0;a<n;a++){var i=e[a],o=s[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!Z9(i,o))return!1}return!0},Z9=function(e,s){if(Os(e)&&Os(s))return!0;if(!Os(e)&&!Os(s)){var n=e.props||{},a=n.children,i=Y9(n,n3e),o=s.props||{},l=o.children,c=Y9(o,a3e);return a&&l?K0(i,c)&&MP(a,l):!a&&!l?K0(i,c):!1}return!1},J9=function(e,s){var n=[],a={};return _$(e).forEach(function(i,o){if(l3e(i))n.push(i);else if(i){var l=km(i.type),c=s[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var h=d(i,l,o);n.push(h),a[l]=!0}}}),n},d3e=function(e){var s=e&&e.type;return s&&K9[s]?K9[s]:null},u3e=function(e,s){return _$(s).indexOf(e)},h3e=["children","width","height","viewBox","className","style","title","desc"];function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},LP.apply(this,arguments)}function m3e(t,e){if(t==null)return{};var s=f3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function f3e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function FP(t){var e=t.children,s=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,d=m3e(t,h3e),u=a||{width:s,height:n,x:0,y:0},h=Rs("recharts-surface",i);return ce.createElement("svg",LP({},rs(d,!0,"svg"),{className:h,width:s,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ce.createElement("title",null,l),ce.createElement("desc",null,c),e)}var p3e=["children","className"];function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},BP.apply(this,arguments)}function x3e(t,e){if(t==null)return{};var s=g3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function g3e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}var nn=ce.forwardRef(function(t,e){var s=t.children,n=t.className,a=x3e(t,p3e),i=Rs("recharts-layer",n);return ce.createElement("g",BP({className:i},rs(a,!0),{ref:e}),s)}),Au=function(e,s){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},Ek,eF;function v3e(){if(eF)return Ek;eF=1;function t(e,s,n){var a=-1,i=e.length;s<0&&(s=-s>i?0:i+s),n=n>i?i:n,n<0&&(n+=i),i=s>n?0:n-s>>>0,s>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+s];return o}return Ek=t,Ek}var Pk,tF;function y3e(){if(tF)return Pk;tF=1;var t=v3e();function e(s,n,a){var i=s.length;return a=a===void 0?i:a,!n&&a>=i?s:t(s,n,a)}return Pk=e,Pk}var Tk,rF;function AJ(){if(rF)return Tk;rF=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+s+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+i+"]");function c(d){return l.test(d)}return Tk=c,Tk}var Ok,sF;function b3e(){if(sF)return Ok;sF=1;function t(e){return e.split("")}return Ok=t,Ok}var Ik,nF;function w3e(){if(nF)return Ik;nF=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+s+n,i="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",v=d+"?",x="["+i+"]?",g="(?:"+f+"(?:"+[u,h,m].join("|")+")"+x+v+")*",b=x+v+g,w="(?:"+[u+l+"?",l,h,m,o].join("|")+")",N=RegExp(c+"(?="+c+")|"+w+b,"g");function C(S){return S.match(N)||[]}return Ik=C,Ik}var $k,aF;function j3e(){if(aF)return $k;aF=1;var t=b3e(),e=AJ(),s=w3e();function n(a){return e(a)?s(a):t(a)}return $k=n,$k}var Dk,iF;function N3e(){if(iF)return Dk;iF=1;var t=y3e(),e=AJ(),s=j3e(),n=NJ();function a(i){return function(o){o=n(o);var l=e(o)?s(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[i]()+d}}return Dk=a,Dk}var Rk,oF;function S3e(){if(oF)return Rk;oF=1;var t=N3e(),e=t("toUpperCase");return Rk=e,Rk}var C3e=S3e();const C5=cn(C3e);function ja(t){return function(){return t}}const EJ=Math.cos,ON=Math.sin,Ru=Math.sqrt,IN=Math.PI,k5=2*IN,UP=Math.PI,zP=2*UP,ox=1e-6,k3e=zP-ox;function PJ(t){this._+=t[0];for(let e=1,s=t.length;e<s;++e)this._+=arguments[e]+t[e]}function _3e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return PJ;const s=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*s)/s+n[a]}}class A3e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PJ:_3e(e)}moveTo(e,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,s){this._append`L${this._x1=+e},${this._y1=+s}`}quadraticCurveTo(e,s,n,a){this._append`Q${+e},${+s},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,s,n,a,i,o){this._append`C${+e},${+s},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,s,n,a,i){if(e=+e,s=+s,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-e,d=a-s,u=o-e,h=l-s,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=s}`;else if(m>ox)if(!(Math.abs(h*c-d*u)>ox)||!i)this._append`L${this._x1=e},${this._y1=s}`;else{let f=n-o,v=a-l,x=c*c+d*d,g=f*f+v*v,b=Math.sqrt(x),w=Math.sqrt(m),N=i*Math.tan((UP-Math.acos((x+m-g)/(2*b*w)))/2),C=N/w,S=N/b;Math.abs(C-1)>ox&&this._append`L${e+C*u},${s+C*h}`,this._append`A${i},${i},0,0,${+(h*f>u*v)},${this._x1=e+S*c},${this._y1=s+S*d}`}}arc(e,s,n,a,i,o){if(e=+e,s=+s,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=e+l,u=s+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>ox||Math.abs(this._y1-u)>ox)&&this._append`L${d},${u}`,n&&(m<0&&(m=m%zP+zP),m>k3e?this._append`A${n},${n},0,1,${h},${e-l},${s-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:m>ox&&this._append`A${n},${n},0,${+(m>=UP)},${h},${this._x1=e+n*Math.cos(i)},${this._y1=s+n*Math.sin(i)}`)}rect(e,s,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+s}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function A$(t){let e=3;return t.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const n=Math.floor(s);if(!(n>=0))throw new RangeError(`invalid digits: ${s}`);e=n}return t},()=>new A3e(e)}function E$(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function TJ(t){this._context=t}TJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function _5(t){return new TJ(t)}function OJ(t){return t[0]}function IJ(t){return t[1]}function $J(t,e){var s=ja(!0),n=null,a=_5,i=null,o=A$(l);t=typeof t=="function"?t:t===void 0?OJ:ja(t),e=typeof e=="function"?e:e===void 0?IJ:ja(e);function l(c){var d,u=(c=E$(c)).length,h,m=!1,f;for(n==null&&(i=a(f=o())),d=0;d<=u;++d)!(d<u&&s(h=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+t(h,d,c),+e(h,d,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:ja(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:ja(+c),l):e},l.defined=function(c){return arguments.length?(s=typeof c=="function"?c:ja(!!c),l):s},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Z2(t,e,s){var n=null,a=ja(!0),i=null,o=_5,l=null,c=A$(d);t=typeof t=="function"?t:t===void 0?OJ:ja(+t),e=typeof e=="function"?e:ja(e===void 0?0:+e),s=typeof s=="function"?s:s===void 0?IJ:ja(+s);function d(h){var m,f,v,x=(h=E$(h)).length,g,b=!1,w,N=new Array(x),C=new Array(x);for(i==null&&(l=o(w=c())),m=0;m<=x;++m){if(!(m<x&&a(g=h[m],m,h))===b)if(b=!b)f=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=f;--v)l.point(N[v],C[v]);l.lineEnd(),l.areaEnd()}b&&(N[m]=+t(g,m,h),C[m]=+e(g,m,h),l.point(n?+n(g,m,h):N[m],s?+s(g,m,h):C[m]))}if(w)return l=null,w+""||null}function u(){return $J().defined(a).curve(o).context(i)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:ja(+h),n=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:ja(+h),d):t},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ja(+h),d):n},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:ja(+h),s=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:ja(+h),d):e},d.y1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:ja(+h),d):s},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(s)},d.lineX1=function(){return u().x(n).y(e)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:ja(!!h),d):a},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class DJ{constructor(e,s){this._context=e,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,s){switch(e=+e,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,s,e,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,e,this._y0,e,s);break}}this._x0=e,this._y0=s}}function E3e(t){return new DJ(t,!0)}function P3e(t){return new DJ(t,!1)}const P$={draw(t,e){const s=Ru(e/IN);t.moveTo(s,0),t.arc(0,0,s,0,k5)}},T3e={draw(t,e){const s=Ru(e/5)/2;t.moveTo(-3*s,-s),t.lineTo(-s,-s),t.lineTo(-s,-3*s),t.lineTo(s,-3*s),t.lineTo(s,-s),t.lineTo(3*s,-s),t.lineTo(3*s,s),t.lineTo(s,s),t.lineTo(s,3*s),t.lineTo(-s,3*s),t.lineTo(-s,s),t.lineTo(-3*s,s),t.closePath()}},RJ=Ru(1/3),O3e=RJ*2,I3e={draw(t,e){const s=Ru(e/O3e),n=s*RJ;t.moveTo(0,-s),t.lineTo(n,0),t.lineTo(0,s),t.lineTo(-n,0),t.closePath()}},$3e={draw(t,e){const s=Ru(e),n=-s/2;t.rect(n,n,s,s)}},D3e=.8908130915292852,MJ=ON(IN/10)/ON(7*IN/10),R3e=ON(k5/10)*MJ,M3e=-EJ(k5/10)*MJ,L3e={draw(t,e){const s=Ru(e*D3e),n=R3e*s,a=M3e*s;t.moveTo(0,-s),t.lineTo(n,a);for(let i=1;i<5;++i){const o=k5*i/5,l=EJ(o),c=ON(o);t.lineTo(c*s,-l*s),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},Mk=Ru(3),F3e={draw(t,e){const s=-Ru(e/(Mk*3));t.moveTo(0,s*2),t.lineTo(-Mk*s,-s),t.lineTo(Mk*s,-s),t.closePath()}},hd=-.5,md=Ru(3)/2,VP=1/Ru(12),B3e=(VP/2+1)*3,U3e={draw(t,e){const s=Ru(e/B3e),n=s/2,a=s*VP,i=n,o=s*VP+s,l=-i,c=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(hd*n-md*a,md*n+hd*a),t.lineTo(hd*i-md*o,md*i+hd*o),t.lineTo(hd*l-md*c,md*l+hd*c),t.lineTo(hd*n+md*a,hd*a-md*n),t.lineTo(hd*i+md*o,hd*o-md*i),t.lineTo(hd*l+md*c,hd*c-md*l),t.closePath()}};function z3e(t,e){let s=null,n=A$(a);t=typeof t=="function"?t:ja(t||P$),e=typeof e=="function"?e:ja(e===void 0?64:+e);function a(){let i;if(s||(s=i=n()),t.apply(this,arguments).draw(s,+e.apply(this,arguments)),i)return s=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:ja(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:ja(+i),a):e},a.context=function(i){return arguments.length?(s=i??null,a):s},a}function $N(){}function DN(t,e,s){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+s)/6)}function LJ(t){this._context=t}LJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:DN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:DN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function V3e(t){return new LJ(t)}function FJ(t){this._context=t}FJ.prototype={areaStart:$N,areaEnd:$N,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:DN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function W3e(t){return new FJ(t)}function BJ(t){this._context=t}BJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(s,n):this._context.moveTo(s,n);break;case 3:this._point=4;default:DN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function q3e(t){return new BJ(t)}function UJ(t){this._context=t}UJ.prototype={areaStart:$N,areaEnd:$N,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function H3e(t){return new UJ(t)}function lF(t){return t<0?-1:1}function cF(t,e,s){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(s-t._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(lF(i)+lF(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function dF(t,e){var s=t._x1-t._x0;return s?(3*(t._y1-t._y0)/s-e)/2:e}function Lk(t,e,s){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-n)/3;t._context.bezierCurveTo(n+l,a+l*e,i-l,o-l*s,i,o)}function RN(t){this._context=t}RN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lk(this,this._t0,dF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var s=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Lk(this,dF(this,s=cF(this,t,e)),s);break;default:Lk(this,this._t0,s=cF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=s}}};function zJ(t){this._context=new VJ(t)}(zJ.prototype=Object.create(RN.prototype)).point=function(t,e){RN.prototype.point.call(this,e,t)};function VJ(t){this._context=t}VJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,s,n,a,i){this._context.bezierCurveTo(e,t,n,s,i,a)}};function G3e(t){return new RN(t)}function Y3e(t){return new zJ(t)}function WJ(t){this._context=t}WJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,s=t.length;if(s)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),s===2)this._context.lineTo(t[1],e[1]);else for(var n=uF(t),a=uF(e),i=0,o=1;o<s;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uF(t){var e,s=t.length-1,n,a=new Array(s),i=new Array(s),o=new Array(s);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<s-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[s-1]=2,i[s-1]=7,o[s-1]=8*t[s-1]+t[s],e=1;e<s;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[s-1]=o[s-1]/i[s-1],e=s-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[s-1]=(t[s]+a[s-1])/2,e=0;e<s-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function K3e(t){return new WJ(t)}function A5(t,e){this._context=t,this._t=e}A5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var s=this._x*(1-this._t)+t*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,e)}break}}this._x=t,this._y=e}};function X3e(t){return new A5(t,.5)}function Q3e(t){return new A5(t,0)}function Z3e(t){return new A5(t,1)}function uv(t,e){if((o=t.length)>1)for(var s=1,n,a,i=t[e[0]],o,l=i.length;s<o;++s)for(a=i,i=t[e[s]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function WP(t){for(var e=t.length,s=new Array(e);--e>=0;)s[e]=e;return s}function J3e(t,e){return t[e]}function eSe(t){const e=[];return e.key=t,e}function tSe(){var t=ja([]),e=WP,s=uv,n=J3e;function a(i){var o=Array.from(t.apply(this,arguments),eSe),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=E$(e(o));l<c;++l)o[u[l]].index=l;return s(o,u),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:ja(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ja(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?WP:typeof i=="function"?i:ja(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(s=i??uv,a):s},a}function rSe(t,e){if((n=t.length)>0){for(var s,n,a=0,i=t[0].length,o;a<i;++a){for(o=s=0;s<n;++s)o+=t[s][a][1]||0;if(o)for(s=0;s<n;++s)t[s][a][1]/=o}uv(t,e)}}function sSe(t,e){if((a=t.length)>0){for(var s=0,n=t[e[0]],a,i=n.length;s<i;++s){for(var o=0,l=0;o<a;++o)l+=t[o][s][1]||0;n[s][1]+=n[s][0]=-l/2}uv(t,e)}}function nSe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var s=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],h=u[n][1]||0,m=u[n-1][1]||0,f=(h-m)/2,v=0;v<l;++v){var x=t[e[v]],g=x[n][1]||0,b=x[n-1][1]||0;f+=g-b}c+=h,d+=f*h}a[n-1][1]+=a[n-1][0]=s,c&&(s-=d/c)}a[n-1][1]+=a[n-1][0]=s,uv(t,e)}}function Nb(t){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(t)}var aSe=["type","size","sizeType"];function qP(){return qP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},qP.apply(this,arguments)}function hF(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function mF(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(s),!0).forEach(function(n){iSe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):hF(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function iSe(t,e,s){return e=oSe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function oSe(t){var e=lSe(t,"string");return Nb(e)=="symbol"?e:e+""}function lSe(t,e){if(Nb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Nb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cSe(t,e){if(t==null)return{};var s=dSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function dSe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}var qJ={symbolCircle:P$,symbolCross:T3e,symbolDiamond:I3e,symbolSquare:$3e,symbolStar:L3e,symbolTriangle:F3e,symbolWye:U3e},uSe=Math.PI/180,hSe=function(e){var s="symbol".concat(C5(e));return qJ[s]||P$},mSe=function(e,s,n){if(s==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*uSe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fSe=function(e,s){qJ["symbol".concat(C5(e))]=s},T$=function(e){var s=e.type,n=s===void 0?"circle":s,a=e.size,i=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=cSe(e,aSe),d=mF(mF({},c),{},{type:n,size:i,sizeType:l}),u=function(){var g=hSe(n),b=z3e().type(g).size(mSe(i,l,n));return b()},h=d.className,m=d.cx,f=d.cy,v=rs(d,!0);return m===+m&&f===+f&&i===+i?ce.createElement("path",qP({},v,{className:Rs("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};T$.registerSymbol=fSe;function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},HP.apply(this,arguments)}function fF(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function pSe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?fF(Object(s),!0).forEach(function(n){Sb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):fF(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function xSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gSe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GJ(n.key),n)}}function vSe(t,e,s){return e&&gSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ySe(t,e,s){return e=MN(e),bSe(t,HJ()?Reflect.construct(e,s||[],MN(t).constructor):e.apply(t,s))}function bSe(t,e){if(e&&(hv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wSe(t)}function wSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HJ=function(){return!!t})()}function MN(t){return MN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},MN(t)}function jSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GP(t,e)}function Sb(t,e,s){return e=GJ(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function GJ(t){var e=NSe(t,"string");return hv(e)=="symbol"?e:e+""}function NSe(t,e){if(hv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fd=32,O$=(function(t){function e(){return xSe(this,e),ySe(this,e,arguments)}return jSe(e,t),vSe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=fd/2,o=fd/6,l=fd/3,c=n.inactive?a:n.color;if(n.type==="plainline")return ce.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:fd,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ce.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(fd,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ce.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(fd/8,"h").concat(fd,"v").concat(fd*3/4,"h").concat(-fd,"z"),className:"recharts-legend-icon"});if(ce.isValidElement(n.legendIcon)){var d=pSe({},n);return delete d.legendIcon,ce.cloneElement(n.legendIcon,d)}return ce.createElement(T$,{fill:c,cx:i,cy:i,size:fd,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:fd,height:fd},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,v){var x=f.formatter||c,g=Rs(Sb(Sb({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",f.inactive));if(f.type==="none")return null;var b=xs(f.value)?null:f.value;Au(!xs(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=f.inactive?d:f.color;return ce.createElement("li",HP({className:g,style:h,key:"legend-item-".concat(v)},Qx(n.props,f,v)),ce.createElement(FP,{width:o,height:o,viewBox:u,style:m},n.renderIcon(f)),ce.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},x?x(b,f,v):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ce.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(j.PureComponent);Sb(O$,"displayName","Legend");Sb(O$,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Fk,pF;function SSe(){if(pF)return Fk;pF=1;var t=j5();function e(){this.__data__=new t,this.size=0}return Fk=e,Fk}var Bk,xF;function CSe(){if(xF)return Bk;xF=1;function t(e){var s=this.__data__,n=s.delete(e);return this.size=s.size,n}return Bk=t,Bk}var Uk,gF;function kSe(){if(gF)return Uk;gF=1;function t(e){return this.__data__.get(e)}return Uk=t,Uk}var zk,vF;function _Se(){if(vF)return zk;vF=1;function t(e){return this.__data__.has(e)}return zk=t,zk}var Vk,yF;function ASe(){if(yF)return Vk;yF=1;var t=j5(),e=j$(),s=N$(),n=200;function a(i,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<n-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new s(c)}return l.set(i,o),this.size=l.size,this}return Vk=a,Vk}var Wk,bF;function YJ(){if(bF)return Wk;bF=1;var t=j5(),e=SSe(),s=CSe(),n=kSe(),a=_Se(),i=ASe();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=s,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,Wk=o,Wk}var qk,wF;function ESe(){if(wF)return qk;wF=1;var t="__lodash_hash_undefined__";function e(s){return this.__data__.set(s,t),this}return qk=e,qk}var Hk,jF;function PSe(){if(jF)return Hk;jF=1;function t(e){return this.__data__.has(e)}return Hk=t,Hk}var Gk,NF;function KJ(){if(NF)return Gk;NF=1;var t=N$(),e=ESe(),s=PSe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=s,Gk=n,Gk}var Yk,SF;function XJ(){if(SF)return Yk;SF=1;function t(e,s){for(var n=-1,a=e==null?0:e.length;++n<a;)if(s(e[n],n,e))return!0;return!1}return Yk=t,Yk}var Kk,CF;function QJ(){if(CF)return Kk;CF=1;function t(e,s){return e.has(s)}return Kk=t,Kk}var Xk,kF;function ZJ(){if(kF)return Xk;kF=1;var t=KJ(),e=XJ(),s=QJ(),n=1,a=2;function i(o,l,c,d,u,h){var m=c&n,f=o.length,v=l.length;if(f!=v&&!(m&&v>f))return!1;var x=h.get(o),g=h.get(l);if(x&&g)return x==l&&g==o;var b=-1,w=!0,N=c&a?new t:void 0;for(h.set(o,l),h.set(l,o);++b<f;){var C=o[b],S=l[b];if(d)var A=m?d(S,C,b,l,o,h):d(C,S,b,o,l,h);if(A!==void 0){if(A)continue;w=!1;break}if(N){if(!e(l,function(k,E){if(!s(N,E)&&(C===k||u(C,k,c,d,h)))return N.push(E)})){w=!1;break}}else if(!(C===S||u(C,S,c,d,h))){w=!1;break}}return h.delete(o),h.delete(l),w}return Xk=i,Xk}var Qk,_F;function TSe(){if(_F)return Qk;_F=1;var t=Dh(),e=t.Uint8Array;return Qk=e,Qk}var Zk,AF;function OSe(){if(AF)return Zk;AF=1;function t(e){var s=-1,n=Array(e.size);return e.forEach(function(a,i){n[++s]=[i,a]}),n}return Zk=t,Zk}var Jk,EF;function I$(){if(EF)return Jk;EF=1;function t(e){var s=-1,n=Array(e.size);return e.forEach(function(a){n[++s]=a}),n}return Jk=t,Jk}var e_,PF;function ISe(){if(PF)return e_;PF=1;var t=Aw(),e=TSe(),s=w$(),n=ZJ(),a=OSe(),i=I$(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Map]",m="[object Number]",f="[object RegExp]",v="[object Set]",x="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",N=t?t.prototype:void 0,C=N?N.valueOf:void 0;function S(A,k,E,O,$,T,I){switch(E){case w:if(A.byteLength!=k.byteLength||A.byteOffset!=k.byteOffset)return!1;A=A.buffer,k=k.buffer;case b:return!(A.byteLength!=k.byteLength||!T(new e(A),new e(k)));case c:case d:case m:return s(+A,+k);case u:return A.name==k.name&&A.message==k.message;case f:case x:return A==k+"";case h:var L=a;case v:var z=O&o;if(L||(L=i),A.size!=k.size&&!z)return!1;var M=I.get(A);if(M)return M==k;O|=l,I.set(A,k);var V=n(L(A),L(k),O,$,T,I);return I.delete(A),V;case g:if(C)return C.call(A)==C.call(k)}return!1}return e_=S,e_}var t_,TF;function JJ(){if(TF)return t_;TF=1;function t(e,s){for(var n=-1,a=s.length,i=e.length;++n<a;)e[i+n]=s[n];return e}return t_=t,t_}var r_,OF;function $Se(){if(OF)return r_;OF=1;var t=JJ(),e=cc();function s(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return r_=s,r_}var s_,IF;function DSe(){if(IF)return s_;IF=1;function t(e,s){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var l=e[n];s(l,n,e)&&(o[i++]=l)}return o}return s_=t,s_}var n_,$F;function RSe(){if($F)return n_;$F=1;function t(){return[]}return n_=t,n_}var a_,DF;function MSe(){if(DF)return a_;DF=1;var t=DSe(),e=RSe(),s=Object.prototype,n=s.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(l){return n.call(o,l)}))}:e;return a_=i,a_}var i_,RF;function LSe(){if(RF)return i_;RF=1;function t(e,s){for(var n=-1,a=Array(e);++n<e;)a[n]=s(n);return a}return i_=t,i_}var o_,MF;function FSe(){if(MF)return o_;MF=1;var t=Lm(),e=Fm(),s="[object Arguments]";function n(a){return e(a)&&t(a)==s}return o_=n,o_}var l_,LF;function $$(){if(LF)return l_;LF=1;var t=FSe(),e=Fm(),s=Object.prototype,n=s.hasOwnProperty,a=s.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return l_=i,l_}var C1={exports:{}},c_,FF;function BSe(){if(FF)return c_;FF=1;function t(){return!1}return c_=t,c_}C1.exports;var BF;function eee(){return BF||(BF=1,(function(t,e){var s=Dh(),n=BSe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?s.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;t.exports=d})(C1,C1.exports)),C1.exports}var d_,UF;function D$(){if(UF)return d_;UF=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function s(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return d_=s,d_}var u_,zF;function R$(){if(zF)return u_;zF=1;var t=9007199254740991;function e(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=t}return u_=e,u_}var h_,VF;function USe(){if(VF)return h_;VF=1;var t=Lm(),e=R$(),s=Fm(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",h="[object Object]",m="[object RegExp]",f="[object Set]",v="[object String]",x="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",N="[object Float64Array]",C="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",$="[object Uint32Array]",T={};T[w]=T[N]=T[C]=T[S]=T[A]=T[k]=T[E]=T[O]=T[$]=!0,T[n]=T[a]=T[g]=T[i]=T[b]=T[o]=T[l]=T[c]=T[d]=T[u]=T[h]=T[m]=T[f]=T[v]=T[x]=!1;function I(L){return s(L)&&e(L.length)&&!!T[t(L)]}return h_=I,h_}var m_,WF;function tee(){if(WF)return m_;WF=1;function t(e){return function(s){return e(s)}}return m_=t,m_}var k1={exports:{}};k1.exports;var qF;function zSe(){return qF||(qF=1,(function(t,e){var s=bJ(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&s.process,l=(function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(k1,k1.exports)),k1.exports}var f_,HF;function ree(){if(HF)return f_;HF=1;var t=USe(),e=tee(),s=zSe(),n=s&&s.isTypedArray,a=n?e(n):t;return f_=a,f_}var p_,GF;function VSe(){if(GF)return p_;GF=1;var t=LSe(),e=$$(),s=cc(),n=eee(),a=D$(),i=ree(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var h=s(d),m=!h&&e(d),f=!h&&!m&&n(d),v=!h&&!m&&!f&&i(d),x=h||m||f||v,g=x?t(d.length,String):[],b=g.length;for(var w in d)(u||l.call(d,w))&&!(x&&(w=="length"||f&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,b)))&&g.push(w);return g}return p_=c,p_}var x_,YF;function WSe(){if(YF)return x_;YF=1;var t=Object.prototype;function e(s){var n=s&&s.constructor,a=typeof n=="function"&&n.prototype||t;return s===a}return x_=e,x_}var g_,KF;function see(){if(KF)return g_;KF=1;function t(e,s){return function(n){return e(s(n))}}return g_=t,g_}var v_,XF;function qSe(){if(XF)return v_;XF=1;var t=see(),e=t(Object.keys,Object);return v_=e,v_}var y_,QF;function HSe(){if(QF)return y_;QF=1;var t=WSe(),e=qSe(),s=Object.prototype,n=s.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return y_=a,y_}var b_,ZF;function Ew(){if(ZF)return b_;ZF=1;var t=b$(),e=R$();function s(n){return n!=null&&e(n.length)&&!t(n)}return b_=s,b_}var w_,JF;function E5(){if(JF)return w_;JF=1;var t=VSe(),e=HSe(),s=Ew();function n(a){return s(a)?t(a):e(a)}return w_=n,w_}var j_,eB;function GSe(){if(eB)return j_;eB=1;var t=$Se(),e=MSe(),s=E5();function n(a){return t(a,s,e)}return j_=n,j_}var N_,tB;function YSe(){if(tB)return N_;tB=1;var t=GSe(),e=1,s=Object.prototype,n=s.hasOwnProperty;function a(i,o,l,c,d,u){var h=l&e,m=t(i),f=m.length,v=t(o),x=v.length;if(f!=x&&!h)return!1;for(var g=f;g--;){var b=m[g];if(!(h?b in o:n.call(o,b)))return!1}var w=u.get(i),N=u.get(o);if(w&&N)return w==o&&N==i;var C=!0;u.set(i,o),u.set(o,i);for(var S=h;++g<f;){b=m[g];var A=i[b],k=o[b];if(c)var E=h?c(k,A,b,o,i,u):c(A,k,b,i,o,u);if(!(E===void 0?A===k||d(A,k,l,c,u):E)){C=!1;break}S||(S=b=="constructor")}if(C&&!S){var O=i.constructor,$=o.constructor;O!=$&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof $=="function"&&$ instanceof $)&&(C=!1)}return u.delete(i),u.delete(o),C}return N_=a,N_}var S_,rB;function KSe(){if(rB)return S_;rB=1;var t=xg(),e=Dh(),s=t(e,"DataView");return S_=s,S_}var C_,sB;function XSe(){if(sB)return C_;sB=1;var t=xg(),e=Dh(),s=t(e,"Promise");return C_=s,C_}var k_,nB;function nee(){if(nB)return k_;nB=1;var t=xg(),e=Dh(),s=t(e,"Set");return k_=s,k_}var __,aB;function QSe(){if(aB)return __;aB=1;var t=xg(),e=Dh(),s=t(e,"WeakMap");return __=s,__}var A_,iB;function ZSe(){if(iB)return A_;iB=1;var t=KSe(),e=j$(),s=XSe(),n=nee(),a=QSe(),i=Lm(),o=wJ(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",m="[object DataView]",f=o(t),v=o(e),x=o(s),g=o(n),b=o(a),w=i;return(t&&w(new t(new ArrayBuffer(1)))!=m||e&&w(new e)!=l||s&&w(s.resolve())!=d||n&&w(new n)!=u||a&&w(new a)!=h)&&(w=function(N){var C=i(N),S=C==c?N.constructor:void 0,A=S?o(S):"";if(A)switch(A){case f:return m;case v:return l;case x:return d;case g:return u;case b:return h}return C}),A_=w,A_}var E_,oB;function JSe(){if(oB)return E_;oB=1;var t=YJ(),e=ZJ(),s=ISe(),n=YSe(),a=ZSe(),i=cc(),o=eee(),l=ree(),c=1,d="[object Arguments]",u="[object Array]",h="[object Object]",m=Object.prototype,f=m.hasOwnProperty;function v(x,g,b,w,N,C){var S=i(x),A=i(g),k=S?u:a(x),E=A?u:a(g);k=k==d?h:k,E=E==d?h:E;var O=k==h,$=E==h,T=k==E;if(T&&o(x)){if(!o(g))return!1;S=!0,O=!1}if(T&&!O)return C||(C=new t),S||l(x)?e(x,g,b,w,N,C):s(x,g,k,b,w,N,C);if(!(b&c)){var I=O&&f.call(x,"__wrapped__"),L=$&&f.call(g,"__wrapped__");if(I||L){var z=I?x.value():x,M=L?g.value():g;return C||(C=new t),N(z,M,b,w,C)}}return T?(C||(C=new t),n(x,g,b,w,N,C)):!1}return E_=v,E_}var P_,lB;function M$(){if(lB)return P_;lB=1;var t=JSe(),e=Fm();function s(n,a,i,o,l){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,s,l)}return P_=s,P_}var T_,cB;function eCe(){if(cB)return T_;cB=1;var t=YJ(),e=M$(),s=1,n=2;function a(i,o,l,c){var d=l.length,u=d,h=!c;if(i==null)return!u;for(i=Object(i);d--;){var m=l[d];if(h&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++d<u;){m=l[d];var f=m[0],v=i[f],x=m[1];if(h&&m[2]){if(v===void 0&&!(f in i))return!1}else{var g=new t;if(c)var b=c(v,x,f,i,o,g);if(!(b===void 0?e(x,v,s|n,c,g):b))return!1}}return!0}return T_=a,T_}var O_,dB;function aee(){if(dB)return O_;dB=1;var t=mp();function e(s){return s===s&&!t(s)}return O_=e,O_}var I_,uB;function tCe(){if(uB)return I_;uB=1;var t=aee(),e=E5();function s(n){for(var a=e(n),i=a.length;i--;){var o=a[i],l=n[o];a[i]=[o,l,t(l)]}return a}return I_=s,I_}var $_,hB;function iee(){if(hB)return $_;hB=1;function t(e,s){return function(n){return n==null?!1:n[e]===s&&(s!==void 0||e in Object(n))}}return $_=t,$_}var D_,mB;function rCe(){if(mB)return D_;mB=1;var t=eCe(),e=tCe(),s=iee();function n(a){var i=e(a);return i.length==1&&i[0][2]?s(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return D_=n,D_}var R_,fB;function sCe(){if(fB)return R_;fB=1;function t(e,s){return e!=null&&s in Object(e)}return R_=t,R_}var M_,pB;function nCe(){if(pB)return M_;pB=1;var t=SJ(),e=$$(),s=cc(),n=D$(),a=R$(),i=S5();function o(l,c,d){c=t(c,l);for(var u=-1,h=c.length,m=!1;++u<h;){var f=i(c[u]);if(!(m=l!=null&&d(l,f)))break;l=l[f]}return m||++u!=h?m:(h=l==null?0:l.length,!!h&&a(h)&&n(f,h)&&(s(l)||e(l)))}return M_=o,M_}var L_,xB;function aCe(){if(xB)return L_;xB=1;var t=sCe(),e=nCe();function s(n,a){return n!=null&&e(n,a,t)}return L_=s,L_}var F_,gB;function iCe(){if(gB)return F_;gB=1;var t=M$(),e=CJ(),s=aCe(),n=y$(),a=aee(),i=iee(),o=S5(),l=1,c=2;function d(u,h){return n(u)&&a(h)?i(o(u),h):function(m){var f=e(m,u);return f===void 0&&f===h?s(m,u):t(h,f,l|c)}}return F_=d,F_}var B_,vB;function sy(){if(vB)return B_;vB=1;function t(e){return e}return B_=t,B_}var U_,yB;function oCe(){if(yB)return U_;yB=1;function t(e){return function(s){return s?.[e]}}return U_=t,U_}var z_,bB;function lCe(){if(bB)return z_;bB=1;var t=C$();function e(s){return function(n){return t(n,s)}}return z_=e,z_}var V_,wB;function cCe(){if(wB)return V_;wB=1;var t=oCe(),e=lCe(),s=y$(),n=S5();function a(i){return s(i)?t(n(i)):e(i)}return V_=a,V_}var W_,jB;function Rh(){if(jB)return W_;jB=1;var t=rCe(),e=iCe(),s=sy(),n=cc(),a=cCe();function i(o){return typeof o=="function"?o:o==null?s:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return W_=i,W_}var q_,NB;function oee(){if(NB)return q_;NB=1;function t(e,s,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(s(e[o],o,e))return o;return-1}return q_=t,q_}var H_,SB;function dCe(){if(SB)return H_;SB=1;function t(e){return e!==e}return H_=t,H_}var G_,CB;function uCe(){if(CB)return G_;CB=1;function t(e,s,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===s)return a;return-1}return G_=t,G_}var Y_,kB;function hCe(){if(kB)return Y_;kB=1;var t=oee(),e=dCe(),s=uCe();function n(a,i,o){return i===i?s(a,i,o):t(a,e,o)}return Y_=n,Y_}var K_,_B;function mCe(){if(_B)return K_;_B=1;var t=hCe();function e(s,n){var a=s==null?0:s.length;return!!a&&t(s,n,0)>-1}return K_=e,K_}var X_,AB;function fCe(){if(AB)return X_;AB=1;function t(e,s,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(s,e[a]))return!0;return!1}return X_=t,X_}var Q_,EB;function pCe(){if(EB)return Q_;EB=1;function t(){}return Q_=t,Q_}var Z_,PB;function xCe(){if(PB)return Z_;PB=1;var t=nee(),e=pCe(),s=I$(),n=1/0,a=t&&1/s(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Z_=a,Z_}var J_,TB;function gCe(){if(TB)return J_;TB=1;var t=KJ(),e=mCe(),s=fCe(),n=QJ(),a=xCe(),i=I$(),o=200;function l(c,d,u){var h=-1,m=e,f=c.length,v=!0,x=[],g=x;if(u)v=!1,m=s;else if(f>=o){var b=d?null:a(c);if(b)return i(b);v=!1,m=n,g=new t}else g=d?[]:x;e:for(;++h<f;){var w=c[h],N=d?d(w):w;if(w=u||w!==0?w:0,v&&N===N){for(var C=g.length;C--;)if(g[C]===N)continue e;d&&g.push(N),x.push(w)}else m(g,N,u)||(g!==x&&g.push(N),x.push(w))}return x}return J_=l,J_}var e6,OB;function vCe(){if(OB)return e6;OB=1;var t=Rh(),e=gCe();function s(n,a){return n&&n.length?e(n,t(a,2)):[]}return e6=s,e6}var yCe=vCe();const IB=cn(yCe);function lee(t,e,s){return e===!0?IB(t,s):xs(e)?IB(t,e):t}function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(t)}var bCe=["ref"];function $B(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function hm(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(s),!0).forEach(function(n){P5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$B(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function wCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DB(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dee(n.key),n)}}function jCe(t,e,s){return e&&DB(t.prototype,e),s&&DB(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function NCe(t,e,s){return e=LN(e),SCe(t,cee()?Reflect.construct(e,s||[],LN(t).constructor):e.apply(t,s))}function SCe(t,e){if(e&&(mv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CCe(t)}function CCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cee=function(){return!!t})()}function LN(t){return LN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},LN(t)}function kCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YP(t,e)}function YP(t,e){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YP(t,e)}function P5(t,e,s){return e=dee(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function dee(t){var e=_Ce(t,"string");return mv(e)=="symbol"?e:e+""}function _Ce(t,e){if(mv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ACe(t,e){if(t==null)return{};var s=ECe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ECe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function PCe(t){return t.value}function TCe(t,e){if(ce.isValidElement(t))return ce.cloneElement(t,e);if(typeof t=="function")return ce.createElement(t,e);e.ref;var s=ACe(e,bCe);return ce.createElement(O$,s)}var RB=1,Dx=(function(t){function e(){var s;wCe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=NCe(this,e,[].concat(a)),P5(s,"lastBoundingBox",{width:-1,height:-1}),s}return kCe(e,t),jCe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>RB||Math.abs(a.height-this.lastBoundingBox.height)>RB)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?hm({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();h={left:((d||0)-f.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((u||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return hm(hm({},h),m)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=hm(hm({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ce.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(f){n.wrapperNode=f}},TCe(i,hm(hm({},this.props),{},{payload:lee(u,d,PCe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=hm(hm({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&er(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(j.PureComponent);P5(Dx,"displayName","Legend");P5(Dx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var t6,MB;function OCe(){if(MB)return t6;MB=1;var t=Aw(),e=$$(),s=cc(),n=t?t.isConcatSpreadable:void 0;function a(i){return s(i)||e(i)||!!(n&&i&&i[n])}return t6=a,t6}var r6,LB;function uee(){if(LB)return r6;LB=1;var t=JJ(),e=OCe();function s(n,a,i,o,l){var c=-1,d=n.length;for(i||(i=e),l||(l=[]);++c<d;){var u=n[c];a>0&&i(u)?a>1?s(u,a-1,i,o,l):t(l,u):o||(l[l.length]=u)}return l}return r6=s,r6}var s6,FB;function ICe(){if(FB)return s6;FB=1;function t(e){return function(s,n,a){for(var i=-1,o=Object(s),l=a(s),c=l.length;c--;){var d=l[e?c:++i];if(n(o[d],d,o)===!1)break}return s}}return s6=t,s6}var n6,BB;function $Ce(){if(BB)return n6;BB=1;var t=ICe(),e=t();return n6=e,n6}var a6,UB;function hee(){if(UB)return a6;UB=1;var t=$Ce(),e=E5();function s(n,a){return n&&t(n,a,e)}return a6=s,a6}var i6,zB;function DCe(){if(zB)return i6;zB=1;var t=Ew();function e(s,n){return function(a,i){if(a==null)return a;if(!t(a))return s(a,i);for(var o=a.length,l=n?o:-1,c=Object(a);(n?l--:++l<o)&&i(c[l],l,c)!==!1;);return a}}return i6=e,i6}var o6,VB;function L$(){if(VB)return o6;VB=1;var t=hee(),e=DCe(),s=e(t);return o6=s,o6}var l6,WB;function mee(){if(WB)return l6;WB=1;var t=L$(),e=Ew();function s(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(l,c,d){o[++i]=a(l,c,d)}),o}return l6=s,l6}var c6,qB;function RCe(){if(qB)return c6;qB=1;function t(e,s){var n=e.length;for(e.sort(s);n--;)e[n]=e[n].value;return e}return c6=t,c6}var d6,HB;function MCe(){if(HB)return d6;HB=1;var t=ey();function e(s,n){if(s!==n){var a=s!==void 0,i=s===null,o=s===s,l=t(s),c=n!==void 0,d=n===null,u=n===n,h=t(n);if(!d&&!h&&!l&&s>n||l&&c&&u&&!d&&!h||i&&c&&u||!a&&u||!o)return 1;if(!i&&!l&&!h&&s<n||h&&a&&o&&!i&&!l||d&&a&&o||!c&&o||!u)return-1}return 0}return d6=e,d6}var u6,GB;function LCe(){if(GB)return u6;GB=1;var t=MCe();function e(s,n,a){for(var i=-1,o=s.criteria,l=n.criteria,c=o.length,d=a.length;++i<c;){var u=t(o[i],l[i]);if(u){if(i>=d)return u;var h=a[i];return u*(h=="desc"?-1:1)}}return s.index-n.index}return u6=e,u6}var h6,YB;function FCe(){if(YB)return h6;YB=1;var t=S$(),e=C$(),s=Rh(),n=mee(),a=RCe(),i=tee(),o=LCe(),l=sy(),c=cc();function d(u,h,m){h.length?h=t(h,function(x){return c(x)?function(g){return e(g,x.length===1?x[0]:x)}:x}):h=[l];var f=-1;h=t(h,i(s));var v=n(u,function(x,g,b){var w=t(h,function(N){return N(x)});return{criteria:w,index:++f,value:x}});return a(v,function(x,g){return o(x,g,m)})}return h6=d,h6}var m6,KB;function BCe(){if(KB)return m6;KB=1;function t(e,s,n){switch(n.length){case 0:return e.call(s);case 1:return e.call(s,n[0]);case 2:return e.call(s,n[0],n[1]);case 3:return e.call(s,n[0],n[1],n[2])}return e.apply(s,n)}return m6=t,m6}var f6,XB;function UCe(){if(XB)return f6;XB=1;var t=BCe(),e=Math.max;function s(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,l=-1,c=e(o.length-a,0),d=Array(c);++l<c;)d[l]=o[a+l];l=-1;for(var u=Array(a+1);++l<a;)u[l]=o[l];return u[a]=i(d),t(n,this,u)}}return f6=s,f6}var p6,QB;function zCe(){if(QB)return p6;QB=1;function t(e){return function(){return e}}return p6=t,p6}var x6,ZB;function fee(){if(ZB)return x6;ZB=1;var t=xg(),e=(function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch{}})();return x6=e,x6}var g6,JB;function VCe(){if(JB)return g6;JB=1;var t=zCe(),e=fee(),s=sy(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:s;return g6=n,g6}var v6,eU;function WCe(){if(eU)return v6;eU=1;var t=800,e=16,s=Date.now;function n(a){var i=0,o=0;return function(){var l=s(),c=e-(l-o);if(o=l,c>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return v6=n,v6}var y6,tU;function qCe(){if(tU)return y6;tU=1;var t=VCe(),e=WCe(),s=e(t);return y6=s,y6}var b6,rU;function HCe(){if(rU)return b6;rU=1;var t=sy(),e=UCe(),s=qCe();function n(a,i){return s(e(a,i,t),a+"")}return b6=n,b6}var w6,sU;function T5(){if(sU)return w6;sU=1;var t=w$(),e=Ew(),s=D$(),n=mp();function a(i,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?e(l)&&s(o,l.length):c=="string"&&o in l)?t(l[o],i):!1}return w6=a,w6}var j6,nU;function GCe(){if(nU)return j6;nU=1;var t=uee(),e=FCe(),s=HCe(),n=T5(),a=s(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return j6=a,j6}var YCe=GCe();const F$=cn(YCe);function Cb(t){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cb(t)}function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},KP.apply(this,arguments)}function KCe(t,e){return JCe(t)||ZCe(t,e)||QCe(t,e)||XCe()}function XCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QCe(t,e){if(t){if(typeof t=="string")return aU(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return aU(t,e)}}function aU(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function ZCe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function JCe(t){if(Array.isArray(t))return t}function iU(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function N6(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(s),!0).forEach(function(n){eke(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):iU(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function eke(t,e,s){return e=tke(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function tke(t){var e=rke(t,"string");return Cb(e)=="symbol"?e:e+""}function rke(t,e){if(Cb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Cb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ske(t){return Array.isArray(t)&&ro(t[0])&&ro(t[1])?t.join(" ~ "):t}var nke=function(e){var s=e.separator,n=s===void 0?" : ":s,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,h=e.formatter,m=e.itemSorter,f=e.wrapperClassName,v=e.labelClassName,x=e.label,g=e.labelFormatter,b=e.accessibilityLayer,w=b===void 0?!1:b,N=function(){if(u&&u.length){var I={padding:0,margin:0},L=(m?F$(u,m):u).map(function(z,M){if(z.type==="none")return null;var V=N6({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),B=z.formatter||h||ske,F=z.value,J=z.name,ee=F,q=J;if(B&&ee!=null&&q!=null){var U=B(F,J,z,M,u);if(Array.isArray(U)){var Z=KCe(U,2);ee=Z[0],q=Z[1]}else ee=U}return ce.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:V},ro(q)?ce.createElement("span",{className:"recharts-tooltip-item-name"},q):null,ro(q)?ce.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ce.createElement("span",{className:"recharts-tooltip-item-value"},ee),ce.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ce.createElement("ul",{className:"recharts-tooltip-item-list",style:I},L)}return null},C=N6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=N6({margin:0},d),A=!Os(x),k=A?x:"",E=Rs("recharts-default-tooltip",f),O=Rs("recharts-tooltip-label",v);A&&g&&u!==void 0&&u!==null&&(k=g(x,u));var $=w?{role:"status","aria-live":"assertive"}:{};return ce.createElement("div",KP({className:E,style:C},$),ce.createElement("p",{className:O,style:S},ce.isValidElement(k)?k:"".concat(k)),N())};function kb(t){"@babel/helpers - typeof";return kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kb(t)}function J2(t,e,s){return e=ake(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ake(t){var e=ike(t,"string");return kb(e)=="symbol"?e:e+""}function ike(t,e){if(kb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(kb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ky="recharts-tooltip-wrapper",oke={visibility:"hidden"};function lke(t){var e=t.coordinate,s=t.translateX,n=t.translateY;return Rs(Ky,J2(J2(J2(J2({},"".concat(Ky,"-right"),er(s)&&e&&er(e.x)&&s>=e.x),"".concat(Ky,"-left"),er(s)&&e&&er(e.x)&&s<e.x),"".concat(Ky,"-bottom"),er(n)&&e&&er(e.y)&&n>=e.y),"".concat(Ky,"-top"),er(n)&&e&&er(e.y)&&n<e.y))}function oU(t){var e=t.allowEscapeViewBox,s=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&er(i[n]))return i[n];var u=s[n]-l-a,h=s[n]+a;if(e[n])return o[n]?u:h;if(o[n]){var m=u,f=c[n];return m<f?Math.max(h,c[n]):Math.max(u,c[n])}var v=h+l,x=c[n]+d;return v>x?Math.max(u,c[n]):Math.max(h,c[n])}function cke(t){var e=t.translateX,s=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(s,"px, 0)"):"translate(".concat(e,"px, ").concat(s,"px)")}}function dke(t){var e=t.allowEscapeViewBox,s=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,h;return o.height>0&&o.width>0&&s?(u=oU({allowEscapeViewBox:e,coordinate:s,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=oU({allowEscapeViewBox:e,coordinate:s,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=cke({translateX:u,translateY:h,useTranslate3d:l})):d=oke,{cssProperties:d,cssClasses:lke({translateX:u,translateY:h,coordinate:s})}}function fv(t){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(t)}function lU(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function cU(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(s),!0).forEach(function(n){QP(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):lU(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function uke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hke(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xee(n.key),n)}}function mke(t,e,s){return e&&hke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fke(t,e,s){return e=FN(e),pke(t,pee()?Reflect.construct(e,s||[],FN(t).constructor):e.apply(t,s))}function pke(t,e){if(e&&(fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(t)}function xke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pee=function(){return!!t})()}function FN(t){return FN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},FN(t)}function gke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XP(t,e)}function XP(t,e){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XP(t,e)}function QP(t,e,s){return e=xee(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function xee(t){var e=vke(t,"string");return fv(e)=="symbol"?e:e+""}function vke(t,e){if(fv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dU=1,yke=(function(t){function e(){var s;uke(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=fke(this,e,[].concat(a)),QP(s,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),QP(s,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;s.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=s.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=s.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),s}return gke(e,t),mke(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>dU||Math.abs(n.height-this.state.lastBoundingBox.height)>dU)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,f=a.offset,v=a.position,x=a.reverseDirection,g=a.useTranslate3d,b=a.viewBox,w=a.wrapperStyle,N=dke({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),C=N.cssClasses,S=N.cssProperties,A=cU(cU({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},w);return ce.createElement("div",{tabIndex:-1,className:C,style:A,ref:function(E){n.wrapperNode=E}},d)}}])})(j.PureComponent),bke=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},fp={isSsr:bke()};function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function uU(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function hU(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(s),!0).forEach(function(n){B$(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):uU(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function wke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jke(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vee(n.key),n)}}function Nke(t,e,s){return e&&jke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ske(t,e,s){return e=BN(e),Cke(t,gee()?Reflect.construct(e,s||[],BN(t).constructor):e.apply(t,s))}function Cke(t,e){if(e&&(pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kke(t)}function kke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gee=function(){return!!t})()}function BN(t){return BN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},BN(t)}function _ke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}function ZP(t,e){return ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZP(t,e)}function B$(t,e,s){return e=vee(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function vee(t){var e=Ake(t,"string");return pv(e)=="symbol"?e:e+""}function Ake(t,e){if(pv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Eke(t){return t.dataKey}function Pke(t,e){return ce.isValidElement(t)?ce.cloneElement(t,e):typeof t=="function"?ce.createElement(t,e):ce.createElement(nke,e)}var ec=(function(t){function e(){return wke(this,e),Ske(this,e,arguments)}return _ke(e,t),Nke(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,m=a.isAnimationActive,f=a.offset,v=a.payload,x=a.payloadUniqBy,g=a.position,b=a.reverseDirection,w=a.useTranslate3d,N=a.viewBox,C=a.wrapperStyle,S=v??[];h&&S.length&&(S=lee(v.filter(function(k){return k.value!=null&&(k.hide!==!0||n.props.includeHidden)}),x,Eke));var A=S.length>0;return ce.createElement(yke,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:u,hasPayload:A,offset:f,position:g,reverseDirection:b,useTranslate3d:w,viewBox:N,wrapperStyle:C},Pke(d,hU(hU({},this.props),{},{payload:S})))}}])})(j.PureComponent);B$(ec,"displayName","Tooltip");B$(ec,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!fp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var S6,mU;function Tke(){if(mU)return S6;mU=1;var t=Dh(),e=function(){return t.Date.now()};return S6=e,S6}var C6,fU;function Oke(){if(fU)return C6;fU=1;var t=/\s/;function e(s){for(var n=s.length;n--&&t.test(s.charAt(n)););return n}return C6=e,C6}var k6,pU;function Ike(){if(pU)return k6;pU=1;var t=Oke(),e=/^\s+/;function s(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return k6=s,k6}var _6,xU;function yee(){if(xU)return _6;xU=1;var t=Ike(),e=mp(),s=ey(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(s(d))return n;if(e(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=e(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=t(d);var h=i.test(d);return h||o.test(d)?l(d.slice(2),h?2:8):a.test(d)?n:+d}return _6=c,_6}var A6,gU;function $ke(){if(gU)return A6;gU=1;var t=mp(),e=Tke(),s=yee(),n="Expected a function",a=Math.max,i=Math.min;function o(l,c,d){var u,h,m,f,v,x,g=0,b=!1,w=!1,N=!0;if(typeof l!="function")throw new TypeError(n);c=s(c)||0,t(d)&&(b=!!d.leading,w="maxWait"in d,m=w?a(s(d.maxWait)||0,c):m,N="trailing"in d?!!d.trailing:N);function C(L){var z=u,M=h;return u=h=void 0,g=L,f=l.apply(M,z),f}function S(L){return g=L,v=setTimeout(E,c),b?C(L):f}function A(L){var z=L-x,M=L-g,V=c-z;return w?i(V,m-M):V}function k(L){var z=L-x,M=L-g;return x===void 0||z>=c||z<0||w&&M>=m}function E(){var L=e();if(k(L))return O(L);v=setTimeout(E,A(L))}function O(L){return v=void 0,N&&u?C(L):(u=h=void 0,f)}function $(){v!==void 0&&clearTimeout(v),g=0,u=x=h=v=void 0}function T(){return v===void 0?f:O(e())}function I(){var L=e(),z=k(L);if(u=arguments,h=this,x=L,z){if(v===void 0)return S(x);if(w)return clearTimeout(v),v=setTimeout(E,c),C(x)}return v===void 0&&(v=setTimeout(E,c)),f}return I.cancel=$,I.flush=T,I}return A6=o,A6}var E6,vU;function Dke(){if(vU)return E6;vU=1;var t=$ke(),e=mp(),s="Expected a function";function n(a,i,o){var l=!0,c=!0;if(typeof a!="function")throw new TypeError(s);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(a,i,{leading:l,maxWait:i,trailing:c})}return E6=n,E6}var Rke=Dke();const bee=cn(Rke);function _b(t){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(t)}function yU(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function ej(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(s),!0).forEach(function(n){Mke(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):yU(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Mke(t,e,s){return e=Lke(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Lke(t){var e=Fke(t,"string");return _b(e)=="symbol"?e:e+""}function Fke(t,e){if(_b(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(_b(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bke(t,e){return Wke(t)||Vke(t,e)||zke(t,e)||Uke()}function Uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zke(t,e){if(t){if(typeof t=="string")return bU(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return bU(t,e)}}function bU(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function Vke(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Wke(t){if(Array.isArray(t))return t}var G1=j.forwardRef(function(t,e){var s=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,h=t.minHeight,m=t.maxHeight,f=t.children,v=t.debounce,x=v===void 0?0:v,g=t.id,b=t.className,w=t.onResize,N=t.style,C=N===void 0?{}:N,S=j.useRef(null),A=j.useRef();A.current=w,j.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var k=j.useState({containerWidth:a.width,containerHeight:a.height}),E=Bke(k,2),O=E[0],$=E[1],T=j.useCallback(function(L,z){$(function(M){var V=Math.round(L),B=Math.round(z);return M.containerWidth===V&&M.containerHeight===B?M:{containerWidth:V,containerHeight:B}})},[]);j.useEffect(function(){var L=function(J){var ee,q=J[0].contentRect,U=q.width,Z=q.height;T(U,Z),(ee=A.current)===null||ee===void 0||ee.call(A,U,Z)};x>0&&(L=bee(L,x,{trailing:!0,leading:!1}));var z=new ResizeObserver(L),M=S.current.getBoundingClientRect(),V=M.width,B=M.height;return T(V,B),z.observe(S.current),function(){z.disconnect()}},[T,x]);var I=j.useMemo(function(){var L=O.containerWidth,z=O.containerHeight;if(L<0||z<0)return null;Au(Sx(o)||Sx(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Au(!s||s>0,"The aspect(%s) must be greater than zero.",s);var M=Sx(o)?L:o,V=Sx(c)?z:c;s&&s>0&&(M?V=M/s:V&&(M=V*s),m&&V>m&&(V=m)),Au(M>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,V,o,c,u,h,s);var B=!Array.isArray(f)&&km(f.type).endsWith("Chart");return ce.Children.map(f,function(F){return ce.isValidElement(F)?j.cloneElement(F,ej({width:M,height:V},B?{style:ej({height:"100%",width:"100%",maxHeight:V,maxWidth:M},F.props.style)}:{})):F})},[s,f,c,m,h,u,O,o]);return ce.createElement("div",{id:g?"".concat(g):void 0,className:Rs("recharts-responsive-container",b),style:ej(ej({},C),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:m}),ref:S},I)}),O5=function(e){return null};O5.displayName="Cell";function Ab(t){"@babel/helpers - typeof";return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(t)}function wU(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function JP(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(s),!0).forEach(function(n){qke(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):wU(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function qke(t,e,s){return e=Hke(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Hke(t){var e=Gke(t,"string");return Ab(e)=="symbol"?e:e+""}function Gke(t,e){if(Ab(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Ab(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l0={widthCache:{},cacheCount:0},Yke=2e3,Kke={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jU="recharts_measurement_span";function Xke(t){var e=JP({},t);return Object.keys(e).forEach(function(s){e[s]||delete e[s]}),e}var Y1=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||fp.isSsr)return{width:0,height:0};var n=Xke(s),a=JSON.stringify({text:e,copyStyle:n});if(l0.widthCache[a])return l0.widthCache[a];try{var i=document.getElementById(jU);i||(i=document.createElement("span"),i.setAttribute("id",jU),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=JP(JP({},Kke),n);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return l0.widthCache[a]=c,++l0.cacheCount>Yke&&(l0.cacheCount=0,l0.widthCache={}),c}catch{return{width:0,height:0}}},Qke=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Eb(t){"@babel/helpers - typeof";return Eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(t)}function UN(t,e){return t_e(t)||e_e(t,e)||Jke(t,e)||Zke()}function Zke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jke(t,e){if(t){if(typeof t=="string")return NU(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return NU(t,e)}}function NU(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function e_e(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function t_e(t){if(Array.isArray(t))return t}function r_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SU(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n_e(n.key),n)}}function s_e(t,e,s){return e&&SU(t.prototype,e),s&&SU(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function n_e(t){var e=a_e(t,"string");return Eb(e)=="symbol"?e:e+""}function a_e(t,e){if(Eb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Eb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,i_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,o_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},l_e=Object.keys(wee),E0="NaN";function c_e(t,e){return t*wee[e]}var tj=(function(){function t(e,s){r_e(this,t),this.num=e,this.unit=s,this.num=e,this.unit=s,Number.isNaN(e)&&(this.unit=""),s!==""&&!i_e.test(s)&&(this.num=NaN,this.unit=""),l_e.includes(s)&&(this.num=c_e(e,s),this.unit="px")}return s_e(t,[{key:"add",value:function(s){return this.unit!==s.unit?new t(NaN,""):new t(this.num+s.num,this.unit)}},{key:"subtract",value:function(s){return this.unit!==s.unit?new t(NaN,""):new t(this.num-s.num,this.unit)}},{key:"multiply",value:function(s){return this.unit!==""&&s.unit!==""&&this.unit!==s.unit?new t(NaN,""):new t(this.num*s.num,this.unit||s.unit)}},{key:"divide",value:function(s){return this.unit!==""&&s.unit!==""&&this.unit!==s.unit?new t(NaN,""):new t(this.num/s.num,this.unit||s.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(s){var n,a=(n=o_e.exec(s))!==null&&n!==void 0?n:[],i=UN(a,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])})();function jee(t){if(t.includes(E0))return E0;for(var e=t;e.includes("*")||e.includes("/");){var s,n=(s=CU.exec(e))!==null&&s!==void 0?s:[],a=UN(n,4),i=a[1],o=a[2],l=a[3],c=tj.parse(i??""),d=tj.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return E0;e=e.replace(CU,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,m=(h=kU.exec(e))!==null&&h!==void 0?h:[],f=UN(m,4),v=f[1],x=f[2],g=f[3],b=tj.parse(v??""),w=tj.parse(g??""),N=x==="+"?b.add(w):b.subtract(w);if(N.isNaN())return E0;e=e.replace(kU,N.toString())}return e}var _U=/\(([^()]*)\)/;function d_e(t){for(var e=t;e.includes("(");){var s=_U.exec(e),n=UN(s,2),a=n[1];e=e.replace(_U,jee(a))}return e}function u_e(t){var e=t.replace(/\s+/g,"");return e=d_e(e),e=jee(e),e}function h_e(t){try{return u_e(t)}catch{return E0}}function P6(t){var e=h_e(t.slice(5,-1));return e===E0?"":e}var m_e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],f_e=["dx","dy","angle","className","breakAll"];function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},eT.apply(this,arguments)}function AU(t,e){if(t==null)return{};var s=p_e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function p_e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function EU(t,e){return y_e(t)||v_e(t,e)||g_e(t,e)||x_e()}function x_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_e(t,e){if(t){if(typeof t=="string")return PU(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return PU(t,e)}}function PU(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function v_e(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function y_e(t){if(Array.isArray(t))return t}var Nee=/[ \f\n\r\t\v\u2028\u2029]+/,See=function(e){var s=e.children,n=e.breakAll,a=e.style;try{var i=[];Os(s)||(n?i=s.toString().split(""):i=s.toString().split(Nee));var o=i.map(function(c){return{word:c,width:Y1(c,a).width}}),l=n?0:Y1("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},b_e=function(e,s,n,a,i){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=er(o),h=l,m=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(V,B){var F=B.word,J=B.width,ee=V[V.length-1];if(ee&&(a==null||i||ee.width+J+n<Number(a)))ee.words.push(F),ee.width+=J+n;else{var q={words:[F],width:J};V.push(q)}return V},[])},f=m(s),v=function(M){return M.reduce(function(V,B){return V.width>B.width?V:B})};if(!u)return f;for(var x="",g=function(M){var V=h.slice(0,M),B=See({breakAll:d,style:c,children:V+x}).wordsWithComputedWidth,F=m(B),J=F.length>o||v(F).width>Number(a);return[J,F]},b=0,w=h.length-1,N=0,C;b<=w&&N<=h.length-1;){var S=Math.floor((b+w)/2),A=S-1,k=g(A),E=EU(k,2),O=E[0],$=E[1],T=g(S),I=EU(T,1),L=I[0];if(!O&&!L&&(b=S+1),O&&L&&(w=S-1),!O&&L){C=$;break}N++}return C||f},TU=function(e){var s=Os(e)?[]:e.toString().split(Nee);return[{words:s}]},w_e=function(e){var s=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((s||n)&&!fp.isSsr){var c,d,u=See({breakAll:o,children:a,style:i});if(u){var h=u.wordsWithComputedWidth,m=u.spaceWidth;c=h,d=m}else return TU(a);return b_e({breakAll:o,children:a,maxLines:l,style:i},c,d,s,n)}return TU(a)},OU="#808080",Zx=function(e){var s=e.x,n=s===void 0?0:s,a=e.y,i=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,h=u===void 0?!1:u,m=e.textAnchor,f=m===void 0?"start":m,v=e.verticalAnchor,x=v===void 0?"end":v,g=e.fill,b=g===void 0?OU:g,w=AU(e,m_e),N=j.useMemo(function(){return w_e({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),C=w.dx,S=w.dy,A=w.angle,k=w.className,E=w.breakAll,O=AU(w,f_e);if(!ro(n)||!ro(i))return null;var $=n+(er(C)?C:0),T=i+(er(S)?S:0),I;switch(x){case"start":I=P6("calc(".concat(d,")"));break;case"middle":I=P6("calc(".concat((N.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:I=P6("calc(".concat(N.length-1," * -").concat(l,")"));break}var L=[];if(h){var z=N[0].width,M=w.width;L.push("scale(".concat((er(M)?M/z:1)/z,")"))}return A&&L.push("rotate(".concat(A,", ").concat($,", ").concat(T,")")),L.length&&(O.transform=L.join(" ")),ce.createElement("text",eT({},rs(O,!0),{x:$,y:T,className:Rs("recharts-text",k),textAnchor:f,fill:b.includes("url")?OU:b}),N.map(function(V,B){var F=V.words.join(E?"":" ");return ce.createElement("tspan",{x:$,dy:B===0?I:l,key:"".concat(F,"-").concat(B)},F)}))};function Wf(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function j_e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U$(t){let e,s,n;t.length!==2?(e=Wf,s=(l,c)=>Wf(t(l),c),n=(l,c)=>t(l)-c):(e=t===Wf||t===j_e?t:N_e,s=t,n=t);function a(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;s(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;s(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=a(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function N_e(){return 0}function Cee(t){return t===null?NaN:+t}function*S_e(t,e){for(let s of t)s!=null&&(s=+s)>=s&&(yield s)}const C_e=U$(Wf),Pw=C_e.right;U$(Cee).center;class IU extends Map{constructor(e,s=A_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get($U(this,e))}has(e){return super.has($U(this,e))}set(e,s){return super.set(k_e(this,e),s)}delete(e){return super.delete(__e(this,e))}}function $U({_intern:t,_key:e},s){const n=e(s);return t.has(n)?t.get(n):s}function k_e({_intern:t,_key:e},s){const n=e(s);return t.has(n)?t.get(n):(t.set(n,s),s)}function __e({_intern:t,_key:e},s){const n=e(s);return t.has(n)&&(s=t.get(n),t.delete(n)),s}function A_e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function E_e(t=Wf){if(t===Wf)return kee;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,s)=>{const n=t(e,s);return n||n===0?n:(t(s,s)===0)-(t(e,e)===0)}}function kee(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const P_e=Math.sqrt(50),T_e=Math.sqrt(10),O_e=Math.sqrt(2);function zN(t,e,s){const n=(e-t)/Math.max(0,s),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=P_e?10:i>=T_e?5:i>=O_e?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=s&&s<2?zN(t,e,s*2):[l,c,d]}function tT(t,e,s){if(e=+e,t=+t,s=+s,!(s>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?zN(e,t,s):zN(t,e,s);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function rT(t,e,s){return e=+e,t=+t,s=+s,zN(t,e,s)[2]}function sT(t,e,s){e=+e,t=+t,s=+s;const n=e<t,a=n?rT(e,t,s):rT(t,e,s);return(n?-1:1)*(a<0?1/-a:a)}function DU(t,e){let s;for(const n of t)n!=null&&(s<n||s===void 0&&n>=n)&&(s=n);return s}function RU(t,e){let s;for(const n of t)n!=null&&(s>n||s===void 0&&n>=n)&&(s=n);return s}function _ee(t,e,s=0,n=1/0,a){if(e=Math.floor(e),s=Math.floor(Math.max(0,s)),n=Math.floor(Math.min(t.length-1,n)),!(s<=e&&e<=n))return t;for(a=a===void 0?kee:E_e(a);n>s;){if(n-s>600){const c=n-s+1,d=e-s+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),f=Math.max(s,Math.floor(e-d*h/c+m)),v=Math.min(n,Math.floor(e+(c-d)*h/c+m));_ee(t,e,f,v,a)}const i=t[e];let o=s,l=n;for(Xy(t,s,e),a(t[n],i)>0&&Xy(t,s,n);o<l;){for(Xy(t,o,l),++o,--l;a(t[o],i)<0;)++o;for(;a(t[l],i)>0;)--l}a(t[s],i)===0?Xy(t,s,l):(++l,Xy(t,l,n)),l<=e&&(s=l+1),e<=l&&(n=l-1)}return t}function Xy(t,e,s){const n=t[e];t[e]=t[s],t[s]=n}function I_e(t,e,s){if(t=Float64Array.from(S_e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return RU(t);if(e>=1)return DU(t);var n,a=(n-1)*e,i=Math.floor(a),o=DU(_ee(t,i).subarray(0,i+1)),l=RU(t.subarray(i+1));return o+(l-o)*(a-i)}}function $_e(t,e,s=Cee){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+s(t[0],0,t);if(e>=1)return+s(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+s(t[i],i,t),l=+s(t[i+1],i+1,t);return o+(l-o)*(a-i)}}function D_e(t,e,s){t=+t,e=+e,s=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+s;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/s))|0,i=new Array(a);++n<a;)i[n]=t+n*s;return i}function Ld(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Bm(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nT=Symbol("implicit");function z$(){var t=new IU,e=[],s=[],n=nT;function a(i){let o=t.get(i);if(o===void 0){if(n!==nT)return n;t.set(i,o=e.push(i)-1)}return s[o%s.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new IU;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(s=Array.from(i),a):s.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return z$(e,s).unknown(n)},Ld.apply(a,arguments),a}function Pb(){var t=z$().unknown(void 0),e=t.domain,s=t.range,n=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function h(){var m=e().length,f=a<n,v=f?a:n,x=f?n:a;i=(x-v)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),v+=(x-v-i*(m-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=D_e(m).map(function(b){return v+i*b});return s(f?g.reverse():g)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(m){return arguments.length?(l=!!m,h()):l},t.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),h()):c},t.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},t.paddingOuter=function(m){return arguments.length?(d=+m,h()):d},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},t.copy=function(){return Pb(e(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Ld.apply(h(),arguments)}function Aee(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Aee(e())},t}function K1(){return Aee(Pb.apply(null,arguments).paddingInner(1))}function V$(t,e,s){t.prototype=e.prototype=s,s.constructor=t}function Eee(t,e){var s=Object.create(t.prototype);for(var n in e)s[n]=e[n];return s}function Tw(){}var Tb=.7,VN=1/Tb,X0="\\s*([+-]?\\d+)\\s*",Ob="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",R_e=/^#([0-9a-f]{3,8})$/,M_e=new RegExp(`^rgb\\(${X0},${X0},${X0}\\)$`),L_e=new RegExp(`^rgb\\(${jh},${jh},${jh}\\)$`),F_e=new RegExp(`^rgba\\(${X0},${X0},${X0},${Ob}\\)$`),B_e=new RegExp(`^rgba\\(${jh},${jh},${jh},${Ob}\\)$`),U_e=new RegExp(`^hsl\\(${Ob},${jh},${jh}\\)$`),z_e=new RegExp(`^hsla\\(${Ob},${jh},${jh},${Ob}\\)$`),MU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V$(Tw,Ib,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LU,formatHex:LU,formatHex8:V_e,formatHsl:W_e,formatRgb:FU,toString:FU});function LU(){return this.rgb().formatHex()}function V_e(){return this.rgb().formatHex8()}function W_e(){return Pee(this).formatHsl()}function FU(){return this.rgb().formatRgb()}function Ib(t){var e,s;return t=(t+"").trim().toLowerCase(),(e=R_e.exec(t))?(s=e[1].length,e=parseInt(e[1],16),s===6?BU(e):s===3?new ac(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):s===8?rj(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):s===4?rj(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=M_e.exec(t))?new ac(e[1],e[2],e[3],1):(e=L_e.exec(t))?new ac(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=F_e.exec(t))?rj(e[1],e[2],e[3],e[4]):(e=B_e.exec(t))?rj(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=U_e.exec(t))?VU(e[1],e[2]/100,e[3]/100,1):(e=z_e.exec(t))?VU(e[1],e[2]/100,e[3]/100,e[4]):MU.hasOwnProperty(t)?BU(MU[t]):t==="transparent"?new ac(NaN,NaN,NaN,0):null}function BU(t){return new ac(t>>16&255,t>>8&255,t&255,1)}function rj(t,e,s,n){return n<=0&&(t=e=s=NaN),new ac(t,e,s,n)}function q_e(t){return t instanceof Tw||(t=Ib(t)),t?(t=t.rgb(),new ac(t.r,t.g,t.b,t.opacity)):new ac}function aT(t,e,s,n){return arguments.length===1?q_e(t):new ac(t,e,s,n??1)}function ac(t,e,s,n){this.r=+t,this.g=+e,this.b=+s,this.opacity=+n}V$(ac,aT,Eee(Tw,{brighter(t){return t=t==null?VN:Math.pow(VN,t),new ac(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tb:Math.pow(Tb,t),new ac(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ac(Rx(this.r),Rx(this.g),Rx(this.b),WN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UU,formatHex:UU,formatHex8:H_e,formatRgb:zU,toString:zU}));function UU(){return`#${Cx(this.r)}${Cx(this.g)}${Cx(this.b)}`}function H_e(){return`#${Cx(this.r)}${Cx(this.g)}${Cx(this.b)}${Cx((isNaN(this.opacity)?1:this.opacity)*255)}`}function zU(){const t=WN(this.opacity);return`${t===1?"rgb(":"rgba("}${Rx(this.r)}, ${Rx(this.g)}, ${Rx(this.b)}${t===1?")":`, ${t})`}`}function WN(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rx(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Cx(t){return t=Rx(t),(t<16?"0":"")+t.toString(16)}function VU(t,e,s,n){return n<=0?t=e=s=NaN:s<=0||s>=1?t=e=NaN:e<=0&&(t=NaN),new gu(t,e,s,n)}function Pee(t){if(t instanceof gu)return new gu(t.h,t.s,t.l,t.opacity);if(t instanceof Tw||(t=Ib(t)),!t)return new gu;if(t instanceof gu)return t;t=t.rgb();var e=t.r/255,s=t.g/255,n=t.b/255,a=Math.min(e,s,n),i=Math.max(e,s,n),o=NaN,l=i-a,c=(i+a)/2;return l?(e===i?o=(s-n)/l+(s<n)*6:s===i?o=(n-e)/l+2:o=(e-s)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new gu(o,l,c,t.opacity)}function G_e(t,e,s,n){return arguments.length===1?Pee(t):new gu(t,e,s,n??1)}function gu(t,e,s,n){this.h=+t,this.s=+e,this.l=+s,this.opacity=+n}V$(gu,G_e,Eee(Tw,{brighter(t){return t=t==null?VN:Math.pow(VN,t),new gu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tb:Math.pow(Tb,t),new gu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*e,a=2*s-n;return new ac(T6(t>=240?t-240:t+120,a,n),T6(t,a,n),T6(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new gu(WU(this.h),sj(this.s),sj(this.l),WN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=WN(this.opacity);return`${t===1?"hsl(":"hsla("}${WU(this.h)}, ${sj(this.s)*100}%, ${sj(this.l)*100}%${t===1?")":`, ${t})`}`}}));function WU(t){return t=(t||0)%360,t<0?t+360:t}function sj(t){return Math.max(0,Math.min(1,t||0))}function T6(t,e,s){return(t<60?e+(s-e)*t/60:t<180?s:t<240?e+(s-e)*(240-t)/60:e)*255}const W$=t=>()=>t;function Y_e(t,e){return function(s){return t+s*e}}function K_e(t,e,s){return t=Math.pow(t,s),e=Math.pow(e,s)-t,s=1/s,function(n){return Math.pow(t+n*e,s)}}function X_e(t){return(t=+t)==1?Tee:function(e,s){return s-e?K_e(e,s,t):W$(isNaN(e)?s:e)}}function Tee(t,e){var s=e-t;return s?Y_e(t,s):W$(isNaN(t)?e:t)}const qU=(function t(e){var s=X_e(e);function n(a,i){var o=s((a=aT(a)).r,(i=aT(i)).r),l=s(a.g,i.g),c=s(a.b,i.b),d=Tee(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n})(1);function Q_e(t,e){e||(e=[]);var s=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<s;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Z_e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function J_e(t,e){var s=e?e.length:0,n=t?Math.min(s,t.length):0,a=new Array(n),i=new Array(s),o;for(o=0;o<n;++o)a[o]=ny(t[o],e[o]);for(;o<s;++o)i[o]=e[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function e6e(t,e){var s=new Date;return t=+t,e=+e,function(n){return s.setTime(t*(1-n)+e*n),s}}function qN(t,e){return t=+t,e=+e,function(s){return t*(1-s)+e*s}}function t6e(t,e){var s={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?s[a]=ny(t[a],e[a]):n[a]=e[a];return function(i){for(a in s)n[a]=s[a](i);return n}}var iT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O6=new RegExp(iT.source,"g");function r6e(t){return function(){return t}}function s6e(t){return function(e){return t(e)+""}}function n6e(t,e){var s=iT.lastIndex=O6.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=iT.exec(t))&&(a=O6.exec(e));)(i=a.index)>s&&(i=e.slice(s,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:qN(n,a)})),s=O6.lastIndex;return s<e.length&&(i=e.slice(s),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?s6e(c[0].x):r6e(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function ny(t,e){var s=typeof e,n;return e==null||s==="boolean"?W$(e):(s==="number"?qN:s==="string"?(n=Ib(e))?(e=n,qU):n6e:e instanceof Ib?qU:e instanceof Date?e6e:Z_e(e)?Q_e:Array.isArray(e)?J_e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?t6e:qN)(t,e)}function q$(t,e){return t=+t,e=+e,function(s){return Math.round(t*(1-s)+e*s)}}function a6e(t,e){e===void 0&&(e=t,t=ny);for(var s=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);s<n;)i[s]=t(a,a=e[++s]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function i6e(t){return function(){return t}}function HN(t){return+t}var HU=[0,1];function Ol(t){return t}function oT(t,e){return(e-=t=+t)?function(s){return(s-t)/e}:i6e(isNaN(e)?NaN:.5)}function o6e(t,e){var s;return t>e&&(s=t,t=e,e=s),function(n){return Math.max(t,Math.min(e,n))}}function l6e(t,e,s){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=oT(a,n),i=s(o,i)):(n=oT(n,a),i=s(i,o)),function(l){return i(n(l))}}function c6e(t,e,s){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=oT(t[o],t[o+1]),i[o]=s(e[o],e[o+1]);return function(l){var c=Pw(t,l,1,n)-1;return i[c](a[c](l))}}function Ow(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function I5(){var t=HU,e=HU,s=ny,n,a,i,o=Ol,l,c,d;function u(){var m=Math.min(t.length,e.length);return o!==Ol&&(o=o6e(t[0],t[m-1])),l=m>2?c6e:l6e,c=d=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(t.map(n),e,s)))(n(o(m)))}return h.invert=function(m){return o(a((d||(d=l(e,t.map(n),qN)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,HN),u()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),s=q$,u()},h.clamp=function(m){return arguments.length?(o=m?!0:Ol,u()):o!==Ol},h.interpolate=function(m){return arguments.length?(s=m,u()):s},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,f){return n=m,a=f,u()}}function H$(){return I5()(Ol,Ol)}function d6e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function GN(t,e){if((s=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function xv(t){return t=GN(Math.abs(t)),t?t[1]:NaN}function u6e(t,e){return function(s,n){for(var a=s.length,i=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(s.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function h6e(t){return function(e){return e.replace(/[0-9]/g,function(s){return t[+s]})}}var m6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $b(t){if(!(e=m6e.exec(t)))throw new Error("invalid format: "+t);var e;return new G$({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$b.prototype=G$.prototype;function G$(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}G$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f6e(t){e:for(var e=t.length,s=1,n=-1,a;s<e;++s)switch(t[s]){case".":n=a=s;break;case"0":n===0&&(n=s),a=s;break;default:if(!+t[s])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Oee;function p6e(t,e){var s=GN(t,e);if(!s)return t+"";var n=s[0],a=s[1],i=a-(Oee=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+GN(t,Math.max(0,e+i-1))[0]}function GU(t,e){var s=GN(t,e);if(!s)return t+"";var n=s[0],a=s[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const YU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d6e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GU(t*100,e),r:GU,s:p6e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KU(t){return t}var XU=Array.prototype.map,QU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function x6e(t){var e=t.grouping===void 0||t.thousands===void 0?KU:u6e(XU.call(t.grouping,Number),t.thousands+""),s=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?KU:h6e(XU.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h){h=$b(h);var m=h.fill,f=h.align,v=h.sign,x=h.symbol,g=h.zero,b=h.width,w=h.comma,N=h.precision,C=h.trim,S=h.type;S==="n"?(w=!0,S="g"):YU[S]||(N===void 0&&(N=12),C=!0,S="g"),(g||m==="0"&&f==="=")&&(g=!0,m="0",f="=");var A=x==="$"?s:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=x==="$"?n:/[%p]/.test(S)?o:"",E=YU[S],O=/[defgprs%]/.test(S);N=N===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function $(T){var I=A,L=k,z,M,V;if(S==="c")L=E(T)+L,T="";else{T=+T;var B=T<0||1/T<0;if(T=isNaN(T)?c:E(Math.abs(T),N),C&&(T=f6e(T)),B&&+T==0&&v!=="+"&&(B=!1),I=(B?v==="("?v:l:v==="-"||v==="("?"":v)+I,L=(S==="s"?QU[8+Oee/3]:"")+L+(B&&v==="("?")":""),O){for(z=-1,M=T.length;++z<M;)if(V=T.charCodeAt(z),48>V||V>57){L=(V===46?a+T.slice(z+1):T.slice(z))+L,T=T.slice(0,z);break}}}w&&!g&&(T=e(T,1/0));var F=I.length+T.length+L.length,J=F<b?new Array(b-F+1).join(m):"";switch(w&&g&&(T=e(J+T,J.length?b-L.length:1/0),J=""),f){case"<":T=I+T+L+J;break;case"=":T=I+J+T+L;break;case"^":T=J.slice(0,F=J.length>>1)+I+T+L+J.slice(F);break;default:T=J+I+T+L;break}return i(T)}return $.toString=function(){return h+""},$}function u(h,m){var f=d((h=$b(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(xv(m)/3)))*3,x=Math.pow(10,-v),g=QU[8+v/3];return function(b){return f(x*b)+g}}return{format:d,formatPrefix:u}}var nj,Y$,Iee;g6e({thousands:",",grouping:[3],currency:["$",""]});function g6e(t){return nj=x6e(t),Y$=nj.format,Iee=nj.formatPrefix,nj}function v6e(t){return Math.max(0,-xv(Math.abs(t)))}function y6e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xv(e)/3)))*3-xv(Math.abs(t)))}function b6e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xv(e)-xv(t))+1}function $ee(t,e,s,n){var a=sT(t,e,s),i;switch(n=$b(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=y6e(a,o))&&(n.precision=i),Iee(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=b6e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=v6e(a))&&(n.precision=i-(n.type==="%")*2);break}}return Y$(n)}function pp(t){var e=t.domain;return t.ticks=function(s){var n=e();return tT(n[0],n[n.length-1],s??10)},t.tickFormat=function(s,n){var a=e();return $ee(a[0],a[a.length-1],s??10,n)},t.nice=function(s){s==null&&(s=10);var n=e(),a=0,i=n.length-1,o=n[a],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=rT(o,l,s),d===c)return n[a]=o,n[i]=l,e(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function YN(){var t=H$();return t.copy=function(){return Ow(t,YN())},Ld.apply(t,arguments),pp(t)}function Dee(t){var e;function s(n){return n==null||isNaN(n=+n)?e:n}return s.invert=s,s.domain=s.range=function(n){return arguments.length?(t=Array.from(n,HN),s):t.slice()},s.unknown=function(n){return arguments.length?(e=n,s):e},s.copy=function(){return Dee(t).unknown(e)},t=arguments.length?Array.from(t,HN):[0,1],pp(s)}function Ree(t,e){t=t.slice();var s=0,n=t.length-1,a=t[s],i=t[n],o;return i<a&&(o=s,s=n,n=o,o=a,a=i,i=o),t[s]=e.floor(a),t[n]=e.ceil(i),t}function ZU(t){return Math.log(t)}function JU(t){return Math.exp(t)}function w6e(t){return-Math.log(-t)}function j6e(t){return-Math.exp(-t)}function N6e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S6e(t){return t===10?N6e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function C6e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ez(t){return(e,s)=>-t(-e,s)}function K$(t){const e=t(ZU,JU),s=e.domain;let n=10,a,i;function o(){return a=C6e(n),i=S6e(n),s()[0]<0?(a=ez(a),i=ez(i),t(w6e,j6e)):t(ZU,JU),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(s(l),o()):s()},e.ticks=l=>{const c=s();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let m=a(d),f=a(u),v,x;const g=l==null?10:+l;let b=[];if(!(n%1)&&f-m<g){if(m=Math.floor(m),f=Math.ceil(f),d>0){for(;m<=f;++m)for(v=1;v<n;++v)if(x=m<0?v/i(-m):v*i(m),!(x<d)){if(x>u)break;b.push(x)}}else for(;m<=f;++m)for(v=n-1;v>=1;--v)if(x=m>0?v/i(-m):v*i(m),!(x<d)){if(x>u)break;b.push(x)}b.length*2<g&&(b=tT(d,u,g))}else b=tT(m,f,Math.min(f-m,g)).map(i);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=$b(c)).precision==null&&(c.trim=!0),c=Y$(c)),l===1/0)return c;const d=Math.max(1,n*l/e.ticks().length);return u=>{let h=u/i(Math.round(a(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},e.nice=()=>s(Ree(s(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),e}function Mee(){const t=K$(I5()).domain([1,10]);return t.copy=()=>Ow(t,Mee()).base(t.base()),Ld.apply(t,arguments),t}function tz(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function rz(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function X$(t){var e=1,s=t(tz(e),rz(e));return s.constant=function(n){return arguments.length?t(tz(e=+n),rz(e)):e},pp(s)}function Lee(){var t=X$(I5());return t.copy=function(){return Ow(t,Lee()).constant(t.constant())},Ld.apply(t,arguments)}function sz(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function k6e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _6e(t){return t<0?-t*t:t*t}function Q$(t){var e=t(Ol,Ol),s=1;function n(){return s===1?t(Ol,Ol):s===.5?t(k6e,_6e):t(sz(s),sz(1/s))}return e.exponent=function(a){return arguments.length?(s=+a,n()):s},pp(e)}function Z$(){var t=Q$(I5());return t.copy=function(){return Ow(t,Z$()).exponent(t.exponent())},Ld.apply(t,arguments),t}function A6e(){return Z$.apply(null,arguments).exponent(.5)}function nz(t){return Math.sign(t)*t*t}function E6e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Fee(){var t=H$(),e=[0,1],s=!1,n;function a(i){var o=E6e(t(i));return isNaN(o)?n:s?Math.round(o):o}return a.invert=function(i){return t.invert(nz(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,HN)).map(nz)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(s=!!i,a):s},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Fee(t.domain(),e).round(s).clamp(t.clamp()).unknown(n)},Ld.apply(a,arguments),pp(a)}function Bee(){var t=[],e=[],s=[],n;function a(){var o=0,l=Math.max(1,e.length);for(s=new Array(l-1);++o<l;)s[o-1]=$_e(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Pw(s,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?s[l-1]:t[0],l<s.length?s[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Wf),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return s.slice()},i.copy=function(){return Bee().domain(t).range(e).unknown(n)},Ld.apply(i,arguments)}function Uee(){var t=0,e=1,s=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Pw(n,c,0,s)]:i}function l(){var c=-1;for(n=new Array(s);++c<s;)n[c]=((c+1)*e-(c-s)*t)/(s+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(s=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=s?[n[s-1],e]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Uee().domain([t,e]).range(a).unknown(i)},Ld.apply(pp(o),arguments)}function zee(){var t=[.5],e=[0,1],s,n=1;function a(i){return i!=null&&i<=i?e[Pw(t,i,0,n)]:s}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return zee().domain(t).range(e).unknown(s)},Ld.apply(a,arguments)}const I6=new Date,$6=new Date;function ao(t,e,s,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),e(i,l),t(i);while(d<i&&i<o);return c},a.filter=i=>ao(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),s&&(a.count=(i,o)=>(I6.setTime(+i),$6.setTime(+o),t(I6),t($6),Math.floor(s(I6,$6))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const KN=ao(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);KN.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ao(e=>{e.setTime(Math.floor(e/t)*t)},(e,s)=>{e.setTime(+e+s*t)},(e,s)=>(s-e)/t):KN);KN.range;const wm=1e3,_d=wm*60,jm=_d*60,Im=jm*24,J$=Im*7,az=Im*30,D6=Im*365,kx=ao(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*wm)},(t,e)=>(e-t)/wm,t=>t.getUTCSeconds());kx.range;const e8=ao(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wm)},(t,e)=>{t.setTime(+t+e*_d)},(t,e)=>(e-t)/_d,t=>t.getMinutes());e8.range;const t8=ao(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_d)},(t,e)=>(e-t)/_d,t=>t.getUTCMinutes());t8.range;const r8=ao(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wm-t.getMinutes()*_d)},(t,e)=>{t.setTime(+t+e*jm)},(t,e)=>(e-t)/jm,t=>t.getHours());r8.range;const s8=ao(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*jm)},(t,e)=>(e-t)/jm,t=>t.getUTCHours());s8.range;const Iw=ao(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_d)/Im,t=>t.getDate()-1);Iw.range;const $5=ao(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Im,t=>t.getUTCDate()-1);$5.range;const Vee=ao(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Im,t=>Math.floor(t/Im));Vee.range;function vg(t){return ao(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,s)=>{e.setDate(e.getDate()+s*7)},(e,s)=>(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*_d)/J$)}const D5=vg(0),XN=vg(1),P6e=vg(2),T6e=vg(3),gv=vg(4),O6e=vg(5),I6e=vg(6);D5.range;XN.range;P6e.range;T6e.range;gv.range;O6e.range;I6e.range;function yg(t){return ao(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s*7)},(e,s)=>(s-e)/J$)}const R5=yg(0),QN=yg(1),$6e=yg(2),D6e=yg(3),vv=yg(4),R6e=yg(5),M6e=yg(6);R5.range;QN.range;$6e.range;D6e.range;vv.range;R6e.range;M6e.range;const n8=ao(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());n8.range;const a8=ao(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());a8.range;const $m=ao(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$m.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ao(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,s)=>{e.setFullYear(e.getFullYear()+s*t)});$m.range;const Dm=ao(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Dm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ao(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCFullYear(e.getUTCFullYear()+s*t)});Dm.range;function Wee(t,e,s,n,a,i){const o=[[kx,1,wm],[kx,5,5*wm],[kx,15,15*wm],[kx,30,30*wm],[i,1,_d],[i,5,5*_d],[i,15,15*_d],[i,30,30*_d],[a,1,jm],[a,3,3*jm],[a,6,6*jm],[a,12,12*jm],[n,1,Im],[n,2,2*Im],[s,1,J$],[e,1,az],[e,3,3*az],[t,1,D6]];function l(d,u,h){const m=u<d;m&&([d,u]=[u,d]);const f=h&&typeof h.range=="function"?h:c(d,u,h),v=f?f.range(d,+u+1):[];return m?v.reverse():v}function c(d,u,h){const m=Math.abs(u-d)/h,f=U$(([,,g])=>g).right(o,m);if(f===o.length)return t.every(sT(d/D6,u/D6,h));if(f===0)return KN.every(Math.max(sT(d,u,h),1));const[v,x]=o[m/o[f-1][2]<o[f][2]/m?f-1:f];return v.every(x)}return[l,c]}const[L6e,F6e]=Wee(Dm,a8,R5,Vee,s8,t8),[B6e,U6e]=Wee($m,n8,D5,Iw,r8,e8);function R6(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function M6(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qy(t,e,s){return{y:t,m:e,d:s,H:0,M:0,S:0,L:0}}function z6e(t){var e=t.dateTime,s=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Zy(a),u=Jy(a),h=Zy(i),m=Jy(i),f=Zy(o),v=Jy(o),x=Zy(l),g=Jy(l),b=Zy(c),w=Jy(c),N={a:B,A:F,b:J,B:ee,c:null,d:uz,e:uz,f:uAe,g:wAe,G:NAe,H:lAe,I:cAe,j:dAe,L:qee,m:hAe,M:mAe,p:q,q:U,Q:fz,s:pz,S:fAe,u:pAe,U:xAe,V:gAe,w:vAe,W:yAe,x:null,X:null,y:bAe,Y:jAe,Z:SAe,"%":mz},C={a:Z,A:K,b:se,B:ne,c:null,d:hz,e:hz,f:AAe,g:LAe,G:BAe,H:CAe,I:kAe,j:_Ae,L:Gee,m:EAe,M:PAe,p:ie,q:be,Q:fz,s:pz,S:TAe,u:OAe,U:IAe,V:$Ae,w:DAe,W:RAe,x:null,X:null,y:MAe,Y:FAe,Z:UAe,"%":mz},S={a:$,A:T,b:I,B:L,c:z,d:cz,e:cz,f:nAe,g:lz,G:oz,H:dz,I:dz,j:eAe,L:sAe,m:J6e,M:tAe,p:O,q:Z6e,Q:iAe,s:oAe,S:rAe,u:G6e,U:Y6e,V:K6e,w:H6e,W:X6e,x:M,X:V,y:lz,Y:oz,Z:Q6e,"%":aAe};N.x=A(s,N),N.X=A(n,N),N.c=A(e,N),C.x=A(s,C),C.X=A(n,C),C.c=A(e,C);function A(ue,oe){return function(pe){var ye=[],$e=-1,Se=0,Y=ue.length,Le,xe,mt;for(pe instanceof Date||(pe=new Date(+pe));++$e<Y;)ue.charCodeAt($e)===37&&(ye.push(ue.slice(Se,$e)),(xe=iz[Le=ue.charAt(++$e)])!=null?Le=ue.charAt(++$e):xe=Le==="e"?" ":"0",(mt=oe[Le])&&(Le=mt(pe,xe)),ye.push(Le),Se=$e+1);return ye.push(ue.slice(Se,$e)),ye.join("")}}function k(ue,oe){return function(pe){var ye=Qy(1900,void 0,1),$e=E(ye,ue,pe+="",0),Se,Y;if($e!=pe.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(oe&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Se=M6(Qy(ye.y,0,1)),Y=Se.getUTCDay(),Se=Y>4||Y===0?QN.ceil(Se):QN(Se),Se=$5.offset(Se,(ye.V-1)*7),ye.y=Se.getUTCFullYear(),ye.m=Se.getUTCMonth(),ye.d=Se.getUTCDate()+(ye.w+6)%7):(Se=R6(Qy(ye.y,0,1)),Y=Se.getDay(),Se=Y>4||Y===0?XN.ceil(Se):XN(Se),Se=Iw.offset(Se,(ye.V-1)*7),ye.y=Se.getFullYear(),ye.m=Se.getMonth(),ye.d=Se.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Y="Z"in ye?M6(Qy(ye.y,0,1)).getUTCDay():R6(Qy(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Y+5)%7:ye.w+ye.U*7-(Y+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,M6(ye)):R6(ye)}}function E(ue,oe,pe,ye){for(var $e=0,Se=oe.length,Y=pe.length,Le,xe;$e<Se;){if(ye>=Y)return-1;if(Le=oe.charCodeAt($e++),Le===37){if(Le=oe.charAt($e++),xe=S[Le in iz?oe.charAt($e++):Le],!xe||(ye=xe(ue,pe,ye))<0)return-1}else if(Le!=pe.charCodeAt(ye++))return-1}return ye}function O(ue,oe,pe){var ye=d.exec(oe.slice(pe));return ye?(ue.p=u.get(ye[0].toLowerCase()),pe+ye[0].length):-1}function $(ue,oe,pe){var ye=f.exec(oe.slice(pe));return ye?(ue.w=v.get(ye[0].toLowerCase()),pe+ye[0].length):-1}function T(ue,oe,pe){var ye=h.exec(oe.slice(pe));return ye?(ue.w=m.get(ye[0].toLowerCase()),pe+ye[0].length):-1}function I(ue,oe,pe){var ye=b.exec(oe.slice(pe));return ye?(ue.m=w.get(ye[0].toLowerCase()),pe+ye[0].length):-1}function L(ue,oe,pe){var ye=x.exec(oe.slice(pe));return ye?(ue.m=g.get(ye[0].toLowerCase()),pe+ye[0].length):-1}function z(ue,oe,pe){return E(ue,e,oe,pe)}function M(ue,oe,pe){return E(ue,s,oe,pe)}function V(ue,oe,pe){return E(ue,n,oe,pe)}function B(ue){return o[ue.getDay()]}function F(ue){return i[ue.getDay()]}function J(ue){return c[ue.getMonth()]}function ee(ue){return l[ue.getMonth()]}function q(ue){return a[+(ue.getHours()>=12)]}function U(ue){return 1+~~(ue.getMonth()/3)}function Z(ue){return o[ue.getUTCDay()]}function K(ue){return i[ue.getUTCDay()]}function se(ue){return c[ue.getUTCMonth()]}function ne(ue){return l[ue.getUTCMonth()]}function ie(ue){return a[+(ue.getUTCHours()>=12)]}function be(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var oe=A(ue+="",N);return oe.toString=function(){return ue},oe},parse:function(ue){var oe=k(ue+="",!1);return oe.toString=function(){return ue},oe},utcFormat:function(ue){var oe=A(ue+="",C);return oe.toString=function(){return ue},oe},utcParse:function(ue){var oe=k(ue+="",!0);return oe.toString=function(){return ue},oe}}}var iz={"-":"",_:" ",0:"0"},_o=/^\s*\d+/,V6e=/^%/,W6e=/[\\^$*+?|[\]().{}]/g;function Cn(t,e,s){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<s?new Array(s-i+1).join(e)+a:a)}function q6e(t){return t.replace(W6e,"\\$&")}function Zy(t){return new RegExp("^(?:"+t.map(q6e).join("|")+")","i")}function Jy(t){return new Map(t.map((e,s)=>[e.toLowerCase(),s]))}function H6e(t,e,s){var n=_o.exec(e.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function G6e(t,e,s){var n=_o.exec(e.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function Y6e(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function K6e(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function X6e(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function oz(t,e,s){var n=_o.exec(e.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function lz(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function Q6e(t,e,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function Z6e(t,e,s){var n=_o.exec(e.slice(s,s+1));return n?(t.q=n[0]*3-3,s+n[0].length):-1}function J6e(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function cz(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function eAe(t,e,s){var n=_o.exec(e.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function dz(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function tAe(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function rAe(t,e,s){var n=_o.exec(e.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function sAe(t,e,s){var n=_o.exec(e.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function nAe(t,e,s){var n=_o.exec(e.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function aAe(t,e,s){var n=V6e.exec(e.slice(s,s+1));return n?s+n[0].length:-1}function iAe(t,e,s){var n=_o.exec(e.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function oAe(t,e,s){var n=_o.exec(e.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function uz(t,e){return Cn(t.getDate(),e,2)}function lAe(t,e){return Cn(t.getHours(),e,2)}function cAe(t,e){return Cn(t.getHours()%12||12,e,2)}function dAe(t,e){return Cn(1+Iw.count($m(t),t),e,3)}function qee(t,e){return Cn(t.getMilliseconds(),e,3)}function uAe(t,e){return qee(t,e)+"000"}function hAe(t,e){return Cn(t.getMonth()+1,e,2)}function mAe(t,e){return Cn(t.getMinutes(),e,2)}function fAe(t,e){return Cn(t.getSeconds(),e,2)}function pAe(t){var e=t.getDay();return e===0?7:e}function xAe(t,e){return Cn(D5.count($m(t)-1,t),e,2)}function Hee(t){var e=t.getDay();return e>=4||e===0?gv(t):gv.ceil(t)}function gAe(t,e){return t=Hee(t),Cn(gv.count($m(t),t)+($m(t).getDay()===4),e,2)}function vAe(t){return t.getDay()}function yAe(t,e){return Cn(XN.count($m(t)-1,t),e,2)}function bAe(t,e){return Cn(t.getFullYear()%100,e,2)}function wAe(t,e){return t=Hee(t),Cn(t.getFullYear()%100,e,2)}function jAe(t,e){return Cn(t.getFullYear()%1e4,e,4)}function NAe(t,e){var s=t.getDay();return t=s>=4||s===0?gv(t):gv.ceil(t),Cn(t.getFullYear()%1e4,e,4)}function SAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Cn(e/60|0,"0",2)+Cn(e%60,"0",2)}function hz(t,e){return Cn(t.getUTCDate(),e,2)}function CAe(t,e){return Cn(t.getUTCHours(),e,2)}function kAe(t,e){return Cn(t.getUTCHours()%12||12,e,2)}function _Ae(t,e){return Cn(1+$5.count(Dm(t),t),e,3)}function Gee(t,e){return Cn(t.getUTCMilliseconds(),e,3)}function AAe(t,e){return Gee(t,e)+"000"}function EAe(t,e){return Cn(t.getUTCMonth()+1,e,2)}function PAe(t,e){return Cn(t.getUTCMinutes(),e,2)}function TAe(t,e){return Cn(t.getUTCSeconds(),e,2)}function OAe(t){var e=t.getUTCDay();return e===0?7:e}function IAe(t,e){return Cn(R5.count(Dm(t)-1,t),e,2)}function Yee(t){var e=t.getUTCDay();return e>=4||e===0?vv(t):vv.ceil(t)}function $Ae(t,e){return t=Yee(t),Cn(vv.count(Dm(t),t)+(Dm(t).getUTCDay()===4),e,2)}function DAe(t){return t.getUTCDay()}function RAe(t,e){return Cn(QN.count(Dm(t)-1,t),e,2)}function MAe(t,e){return Cn(t.getUTCFullYear()%100,e,2)}function LAe(t,e){return t=Yee(t),Cn(t.getUTCFullYear()%100,e,2)}function FAe(t,e){return Cn(t.getUTCFullYear()%1e4,e,4)}function BAe(t,e){var s=t.getUTCDay();return t=s>=4||s===0?vv(t):vv.ceil(t),Cn(t.getUTCFullYear()%1e4,e,4)}function UAe(){return"+0000"}function mz(){return"%"}function fz(t){return+t}function pz(t){return Math.floor(+t/1e3)}var c0,Kee,Xee;zAe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zAe(t){return c0=z6e(t),Kee=c0.format,c0.parse,Xee=c0.utcFormat,c0.utcParse,c0}function VAe(t){return new Date(t)}function WAe(t){return t instanceof Date?+t:+new Date(+t)}function i8(t,e,s,n,a,i,o,l,c,d){var u=H$(),h=u.invert,m=u.domain,f=d(".%L"),v=d(":%S"),x=d("%I:%M"),g=d("%I %p"),b=d("%a %d"),w=d("%b %d"),N=d("%B"),C=d("%Y");function S(A){return(c(A)<A?f:l(A)<A?v:o(A)<A?x:i(A)<A?g:n(A)<A?a(A)<A?b:w:s(A)<A?N:C)(A)}return u.invert=function(A){return new Date(h(A))},u.domain=function(A){return arguments.length?m(Array.from(A,WAe)):m().map(VAe)},u.ticks=function(A){var k=m();return t(k[0],k[k.length-1],A??10)},u.tickFormat=function(A,k){return k==null?S:d(k)},u.nice=function(A){var k=m();return(!A||typeof A.range!="function")&&(A=e(k[0],k[k.length-1],A??10)),A?m(Ree(k,A)):u},u.copy=function(){return Ow(u,i8(t,e,s,n,a,i,o,l,c,d))},u}function qAe(){return Ld.apply(i8(B6e,U6e,$m,n8,D5,Iw,r8,e8,kx,Kee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HAe(){return Ld.apply(i8(L6e,F6e,Dm,a8,R5,$5,s8,t8,kx,Xee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function M5(){var t=0,e=1,s,n,a,i,o=Ol,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-s)*a,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,s=i(t=+t),n=i(e=+e),a=s===n?0:1/(n-s),d):[t,e]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(m){var f,v;return arguments.length?([f,v]=m,o=h(f,v),d):[o(0),o(1)]}}return d.range=u(ny),d.rangeRound=u(q$),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,s=h(t),n=h(e),a=s===n?0:1/(n-s),d}}function xp(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Qee(){var t=pp(M5()(Ol));return t.copy=function(){return xp(t,Qee())},Bm.apply(t,arguments)}function Zee(){var t=K$(M5()).domain([1,10]);return t.copy=function(){return xp(t,Zee()).base(t.base())},Bm.apply(t,arguments)}function Jee(){var t=X$(M5());return t.copy=function(){return xp(t,Jee()).constant(t.constant())},Bm.apply(t,arguments)}function o8(){var t=Q$(M5());return t.copy=function(){return xp(t,o8()).exponent(t.exponent())},Bm.apply(t,arguments)}function GAe(){return o8.apply(null,arguments).exponent(.5)}function ete(){var t=[],e=Ol;function s(n){if(n!=null&&!isNaN(n=+n))return e((Pw(t,n,1)-1)/(t.length-1))}return s.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Wf),s},s.interpolator=function(n){return arguments.length?(e=n,s):e},s.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},s.quantiles=function(n){return Array.from({length:n+1},(a,i)=>I_e(t,i/n))},s.copy=function(){return ete(e).domain(t)},Bm.apply(s,arguments)}function L5(){var t=0,e=.5,s=1,n=1,a,i,o,l,c,d=Ol,u,h=!1,m;function f(x){return isNaN(x=+x)?m:(x=.5+((x=+u(x))-i)*(n*x<n*i?l:c),d(h?Math.max(0,Math.min(1,x)):x))}f.domain=function(x){return arguments.length?([t,e,s]=x,a=u(t=+t),i=u(e=+e),o=u(s=+s),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,f):[t,e,s]},f.clamp=function(x){return arguments.length?(h=!!x,f):h},f.interpolator=function(x){return arguments.length?(d=x,f):d};function v(x){return function(g){var b,w,N;return arguments.length?([b,w,N]=g,d=a6e(x,[b,w,N]),f):[d(0),d(.5),d(1)]}}return f.range=v(ny),f.rangeRound=v(q$),f.unknown=function(x){return arguments.length?(m=x,f):m},function(x){return u=x,a=x(t),i=x(e),o=x(s),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,f}}function tte(){var t=pp(L5()(Ol));return t.copy=function(){return xp(t,tte())},Bm.apply(t,arguments)}function rte(){var t=K$(L5()).domain([.1,1,10]);return t.copy=function(){return xp(t,rte()).base(t.base())},Bm.apply(t,arguments)}function ste(){var t=X$(L5());return t.copy=function(){return xp(t,ste()).constant(t.constant())},Bm.apply(t,arguments)}function l8(){var t=Q$(L5());return t.copy=function(){return xp(t,l8()).exponent(t.exponent())},Bm.apply(t,arguments)}function YAe(){return l8.apply(null,arguments).exponent(.5)}const xz=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Pb,scaleDiverging:tte,scaleDivergingLog:rte,scaleDivergingPow:l8,scaleDivergingSqrt:YAe,scaleDivergingSymlog:ste,scaleIdentity:Dee,scaleImplicit:nT,scaleLinear:YN,scaleLog:Mee,scaleOrdinal:z$,scalePoint:K1,scalePow:Z$,scaleQuantile:Bee,scaleQuantize:Uee,scaleRadial:Fee,scaleSequential:Qee,scaleSequentialLog:Zee,scaleSequentialPow:o8,scaleSequentialQuantile:ete,scaleSequentialSqrt:GAe,scaleSequentialSymlog:Jee,scaleSqrt:A6e,scaleSymlog:Lee,scaleThreshold:zee,scaleTime:qAe,scaleUtc:HAe,tickFormat:$ee},Symbol.toStringTag,{value:"Module"}));var L6,gz;function F5(){if(gz)return L6;gz=1;var t=ey();function e(s,n,a){for(var i=-1,o=s.length;++i<o;){var l=s[i],c=n(l);if(c!=null&&(d===void 0?c===c&&!t(c):a(c,d)))var d=c,u=l}return u}return L6=e,L6}var F6,vz;function nte(){if(vz)return F6;vz=1;function t(e,s){return e>s}return F6=t,F6}var B6,yz;function KAe(){if(yz)return B6;yz=1;var t=F5(),e=nte(),s=sy();function n(a){return a&&a.length?t(a,s,e):void 0}return B6=n,B6}var XAe=KAe();const Ff=cn(XAe);var U6,bz;function ate(){if(bz)return U6;bz=1;function t(e,s){return e<s}return U6=t,U6}var z6,wz;function QAe(){if(wz)return z6;wz=1;var t=F5(),e=ate(),s=sy();function n(a){return a&&a.length?t(a,s,e):void 0}return z6=n,z6}var ZAe=QAe();const B5=cn(ZAe);var V6,jz;function JAe(){if(jz)return V6;jz=1;var t=S$(),e=Rh(),s=mee(),n=cc();function a(i,o){var l=n(i)?t:s;return l(i,e(o,3))}return V6=a,V6}var W6,Nz;function eEe(){if(Nz)return W6;Nz=1;var t=uee(),e=JAe();function s(n,a){return t(e(n,a),1)}return W6=s,W6}var tEe=eEe();const rEe=cn(tEe);var q6,Sz;function sEe(){if(Sz)return q6;Sz=1;var t=M$();function e(s,n){return t(s,n)}return q6=e,q6}var nEe=sEe();const Jx=cn(nEe);var ay=1e9,aEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},d8,Va=!0,Dd="[DecimalError] ",Mx=Dd+"Invalid argument: ",c8=Dd+"Exponent out of range: ",iy=Math.floor,lx=Math.pow,iEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rc,bo=1e7,Oa=7,ite=9007199254740991,ZN=iy(ite/Oa),$r={};$r.absoluteValue=$r.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};$r.comparedTo=$r.cmp=function(t){var e,s,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,s=n<a?n:a;e<s;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};$r.decimalPlaces=$r.dp=function(){var t=this,e=t.d.length-1,s=(e-t.e)*Oa;if(e=t.d[e],e)for(;e%10==0;e/=10)s--;return s<0?0:s};$r.dividedBy=$r.div=function(t){return _m(this,new this.constructor(t))};$r.dividedToIntegerBy=$r.idiv=function(t){var e=this,s=e.constructor;return pa(_m(e,new s(t),0,1),s.precision)};$r.equals=$r.eq=function(t){return!this.cmp(t)};$r.exponent=function(){return Fi(this)};$r.greaterThan=$r.gt=function(t){return this.cmp(t)>0};$r.greaterThanOrEqualTo=$r.gte=function(t){return this.cmp(t)>=0};$r.isInteger=$r.isint=function(){return this.e>this.d.length-2};$r.isNegative=$r.isneg=function(){return this.s<0};$r.isPositive=$r.ispos=function(){return this.s>0};$r.isZero=function(){return this.s===0};$r.lessThan=$r.lt=function(t){return this.cmp(t)<0};$r.lessThanOrEqualTo=$r.lte=function(t){return this.cmp(t)<1};$r.logarithm=$r.log=function(t){var e,s=this,n=s.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Rc))throw Error(Dd+"NaN");if(s.s<1)throw Error(Dd+(s.s?"NaN":"-Infinity"));return s.eq(Rc)?new n(0):(Va=!1,e=_m(Db(s,i),Db(t,i),i),Va=!0,pa(e,a))};$r.minus=$r.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cte(e,t):ote(e,(t.s=-t.s,t))};$r.modulo=$r.mod=function(t){var e,s=this,n=s.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Dd+"NaN");return s.s?(Va=!1,e=_m(s,t,0,1).times(t),Va=!0,s.minus(e)):pa(new n(s),a)};$r.naturalExponential=$r.exp=function(){return lte(this)};$r.naturalLogarithm=$r.ln=function(){return Db(this)};$r.negated=$r.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};$r.plus=$r.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ote(e,t):cte(e,(t.s=-t.s,t))};$r.precision=$r.sd=function(t){var e,s,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Mx+t);if(e=Fi(a)+1,n=a.d.length-1,s=n*Oa+1,n=a.d[n],n){for(;n%10==0;n/=10)s--;for(n=a.d[0];n>=10;n/=10)s++}return t&&e>s?e:s};$r.squareRoot=$r.sqrt=function(){var t,e,s,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Dd+"NaN")}for(t=Fi(l),Va=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=hh(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=iy((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),s=c.precision,a=o=s+3;;)if(i=n,n=i.plus(_m(l,i,o+2)).times(.5),hh(i.d).slice(0,o)===(e=hh(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(pa(i,s+1,0),i.times(i).eq(l)){n=i;break}}else if(e!="9999")break;o+=4}return Va=!0,pa(n,s)};$r.times=$r.mul=function(t){var e,s,n,a,i,o,l,c,d,u=this,h=u.constructor,m=u.d,f=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,s=u.e+t.e,c=m.length,d=f.length,c<d&&(i=m,m=f,f=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(e=0,a=c+n;a>n;)l=i[a]+f[n]*m[a-n-1]+e,i[a--]=l%bo|0,e=l/bo|0;i[a]=(i[a]+e)%bo|0}for(;!i[--o];)i.pop();return e?++s:i.shift(),t.d=i,t.e=s,Va?pa(t,h.precision):t};$r.toDecimalPlaces=$r.todp=function(t,e){var s=this,n=s.constructor;return s=new n(s),t===void 0?s:(_h(t,0,ay),e===void 0?e=n.rounding:_h(e,0,8),pa(s,t+Fi(s)+1,e))};$r.toExponential=function(t,e){var s,n=this,a=n.constructor;return t===void 0?s=eg(n,!0):(_h(t,0,ay),e===void 0?e=a.rounding:_h(e,0,8),n=pa(new a(n),t+1,e),s=eg(n,!0,t+1)),s};$r.toFixed=function(t,e){var s,n,a=this,i=a.constructor;return t===void 0?eg(a):(_h(t,0,ay),e===void 0?e=i.rounding:_h(e,0,8),n=pa(new i(a),t+Fi(a)+1,e),s=eg(n.abs(),!1,t+Fi(n)+1),a.isneg()&&!a.isZero()?"-"+s:s)};$r.toInteger=$r.toint=function(){var t=this,e=t.constructor;return pa(new e(t),Fi(t)+1,e.rounding)};$r.toNumber=function(){return+this};$r.toPower=$r.pow=function(t){var e,s,n,a,i,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Rc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Dd+"Infinity");return l}if(l.eq(Rc))return l;if(n=c.precision,t.eq(Rc))return pa(l,n);if(e=t.e,s=t.d.length-1,o=e>=s,i=l.s,o){if((s=u<0?-u:u)<=ite){for(a=new c(Rc),e=Math.ceil(n/Oa+4),Va=!1;s%2&&(a=a.times(l),kz(a.d,e)),s=iy(s/2),s!==0;)l=l.times(l),kz(l.d,e);return Va=!0,t.s<0?new c(Rc).div(a):pa(a,n)}}else if(i<0)throw Error(Dd+"NaN");return i=i<0&&t.d[Math.max(e,s)]&1?-1:1,l.s=1,Va=!1,a=t.times(Db(l,n+d)),Va=!0,a=lte(a),a.s=i,a};$r.toPrecision=function(t,e){var s,n,a=this,i=a.constructor;return t===void 0?(s=Fi(a),n=eg(a,s<=i.toExpNeg||s>=i.toExpPos)):(_h(t,1,ay),e===void 0?e=i.rounding:_h(e,0,8),a=pa(new i(a),t,e),s=Fi(a),n=eg(a,t<=s||s<=i.toExpNeg,t)),n};$r.toSignificantDigits=$r.tosd=function(t,e){var s=this,n=s.constructor;return t===void 0?(t=n.precision,e=n.rounding):(_h(t,1,ay),e===void 0?e=n.rounding:_h(e,0,8)),pa(new n(s),t,e)};$r.toString=$r.valueOf=$r.val=$r.toJSON=$r[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Fi(t),s=t.constructor;return eg(t,e<=s.toExpNeg||e>=s.toExpPos)};function ote(t,e){var s,n,a,i,o,l,c,d,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Va?pa(e,h):e;if(c=t.d,d=e.d,o=t.e,a=e.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(h/Oa),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),s=0;i;)s=(c[--i]=c[i]+d[i]+s)/bo|0,c[i]%=bo;for(s&&(c.unshift(s),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Va?pa(e,h):e}function _h(t,e,s){if(t!==~~t||t<e||t>s)throw Error(Mx+t)}function hh(t){var e,s,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",s=Oa-n.length,s&&(i+=Of(s)),i+=n;o=t[e],n=o+"",s=Oa-n.length,s&&(i+=Of(s))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var _m=(function(){function t(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%bo|0,o=i/bo|0;return o&&n.unshift(o),n}function e(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function s(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*bo+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,d,u,h,m,f,v,x,g,b,w,N,C,S,A,k,E,O=n.constructor,$=n.s==a.s?1:-1,T=n.d,I=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(Dd+"Division by zero");for(c=n.e-a.e,k=I.length,S=T.length,f=new O($),v=f.d=[],d=0;I[d]==(T[d]||0);)++d;if(I[d]>(T[d]||0)&&--c,i==null?w=i=O.precision:o?w=i+(Fi(n)-Fi(a))+1:w=i,w<0)return new O(0);if(w=w/Oa+2|0,d=0,k==1)for(u=0,I=I[0],w++;(d<S||u)&&w--;d++)N=u*bo+(T[d]||0),v[d]=N/I|0,u=N%I|0;else{for(u=bo/(I[0]+1)|0,u>1&&(I=t(I,u),T=t(T,u),k=I.length,S=T.length),C=k,x=T.slice(0,k),g=x.length;g<k;)x[g++]=0;E=I.slice(),E.unshift(0),A=I[0],I[1]>=bo/2&&++A;do u=0,l=e(I,x,k,g),l<0?(b=x[0],k!=g&&(b=b*bo+(x[1]||0)),u=b/A|0,u>1?(u>=bo&&(u=bo-1),h=t(I,u),m=h.length,g=x.length,l=e(h,x,m,g),l==1&&(u--,s(h,k<m?E:I,m))):(u==0&&(l=u=1),h=I.slice()),m=h.length,m<g&&h.unshift(0),s(x,h,g),l==-1&&(g=x.length,l=e(I,x,k,g),l<1&&(u++,s(x,k<g?E:I,g))),g=x.length):l===0&&(u++,x=[0]),v[d++]=u,l&&x[0]?x[g++]=T[C]||0:(x=[T[C]],g=1);while((C++<S||x[0]!==void 0)&&w--)}return v[0]||v.shift(),f.e=c,pa(f,o?i+Fi(f)+1:i)}})();function lte(t,e){var s,n,a,i,o,l,c=0,d=0,u=t.constructor,h=u.precision;if(Fi(t)>16)throw Error(c8+Fi(t));if(!t.s)return new u(Rc);for(Va=!1,l=h,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(n=Math.log(lx(2,d))/Math.LN10*2+5|0,l+=n,s=a=i=new u(Rc),u.precision=l;;){if(a=pa(a.times(t),l),s=s.times(++c),o=i.plus(_m(a,s,l)),hh(o.d).slice(0,l)===hh(i.d).slice(0,l)){for(;d--;)i=pa(i.times(i),l);return u.precision=h,e==null?(Va=!0,pa(i,h)):i}i=o}}function Fi(t){for(var e=t.e*Oa,s=t.d[0];s>=10;s/=10)e++;return e}function H6(t,e,s){if(e>t.LN10.sd())throw Va=!0,s&&(t.precision=s),Error(Dd+"LN10 precision limit exceeded");return pa(new t(t.LN10),e)}function Of(t){for(var e="";t--;)e+="0";return e}function Db(t,e){var s,n,a,i,o,l,c,d,u,h=1,m=10,f=t,v=f.d,x=f.constructor,g=x.precision;if(f.s<1)throw Error(Dd+(f.s?"NaN":"-Infinity"));if(f.eq(Rc))return new x(0);if(e==null?(Va=!1,d=g):d=e,f.eq(10))return e==null&&(Va=!0),H6(x,d);if(d+=m,x.precision=d,s=hh(v),n=s.charAt(0),i=Fi(f),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&s.charAt(1)>3;)f=f.times(t),s=hh(f.d),n=s.charAt(0),h++;i=Fi(f),n>1?(f=new x("0."+s),i++):f=new x(n+"."+s.slice(1))}else return c=H6(x,d+2,g).times(i+""),f=Db(new x(n+"."+s.slice(1)),d-m).plus(c),x.precision=g,e==null?(Va=!0,pa(f,g)):f;for(l=o=f=_m(f.minus(Rc),f.plus(Rc),d),u=pa(f.times(f),d),a=3;;){if(o=pa(o.times(u),d),c=l.plus(_m(o,new x(a),d)),hh(c.d).slice(0,d)===hh(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(H6(x,d+2,g).times(i+""))),l=_m(l,new x(h),d),x.precision=g,e==null?(Va=!0,pa(l,g)):l;l=c,a+=2}}function Cz(t,e){var s,n,a;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(s<0&&(s=n),s+=+e.slice(n+1),e=e.substring(0,n)):s<0&&(s=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,s=s-n-1,t.e=iy(s/Oa),t.d=[],n=(s+1)%Oa,s<0&&(n+=Oa),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Oa;n<a;)t.d.push(+e.slice(n,n+=Oa));e=e.slice(n),n=Oa-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Va&&(t.e>ZN||t.e<-ZN))throw Error(c8+s)}else t.s=0,t.e=0,t.d=[0];return t}function pa(t,e,s){var n,a,i,o,l,c,d,u,h=t.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Oa,a=e,d=h[u=0];else{if(u=Math.ceil((n+1)/Oa),i=h.length,u>=i)return t;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=Oa,a=n-Oa+o}if(s!==void 0&&(i=lx(10,o-a-1),l=d/i%10|0,c=e<0||h[u+1]!==void 0||d%i,c=s<4?(l||c)&&(s==0||s==(t.s<0?3:2)):l>5||l==5&&(s==4||c||s==6&&(n>0?a>0?d/lx(10,o-a):0:h[u-1])%10&1||s==(t.s<0?8:7))),e<1||!h[0])return c?(i=Fi(t),h.length=1,e=e-i-1,h[0]=lx(10,(Oa-e%Oa)%Oa),t.e=iy(-e/Oa)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=lx(10,Oa-n),h[u]=a>0?(d/lx(10,o-a)%lx(10,a)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==bo&&(h[0]=1,++t.e);break}else{if(h[u]+=i,h[u]!=bo)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Va&&(t.e>ZN||t.e<-ZN))throw Error(c8+Fi(t));return t}function cte(t,e){var s,n,a,i,o,l,c,d,u,h,m=t.constructor,f=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Va?pa(e,f):e;if(c=t.d,h=e.d,n=e.e,d=t.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(s=c,o=-o,l=h.length):(s=h,n=d,l=c.length),a=Math.max(Math.ceil(f/Oa),l)+2,o>a&&(o=a,s.length=1),s.reverse(),a=o;a--;)s.push(0);s.reverse()}else{for(a=c.length,l=h.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}o=0}for(u&&(s=c,c=h,h=s,e.s=-e.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=bo-1;--c[i],c[a]+=bo}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Va?pa(e,f):e):new m(0)}function eg(t,e,s){var n,a=Fi(t),i=hh(t.d),o=i.length;return e?(s&&(n=s-o)>0?i=i.charAt(0)+"."+i.slice(1)+Of(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Of(-a-1)+i,s&&(n=s-o)>0&&(i+=Of(n))):a>=o?(i+=Of(a+1-o),s&&(n=s-a-1)>0&&(i=i+"."+Of(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),s&&(n=s-o)>0&&(a+1===o&&(i+="."),i+=Of(n))),t.s<0?"-"+i:i}function kz(t,e){if(t.length>e)return t.length=e,!0}function dte(t){var e,s,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Mx+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Cz(o,i.toString())}else if(typeof i!="string")throw Error(Mx+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,iEe.test(i))Cz(o,i);else throw Error(Mx+i)}if(a.prototype=$r,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=dte,a.config=a.set=oEe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(s=n[e++])||(t[s]=this[s]);return a.config(t),a}function oEe(t){if(!t||typeof t!="object")throw Error(Dd+"Object expected");var e,s,n,a=["precision",1,ay,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[s=a[e]])!==void 0)if(iy(n)===n&&n>=a[e+1]&&n<=a[e+2])this[s]=n;else throw Error(Mx+s+": "+n);if((n=t[s="LN10"])!==void 0)if(n==Math.LN10)this[s]=new this(n);else throw Error(Mx+s+": "+n);return this}var d8=dte(aEe);Rc=new d8(1);const aa=d8;function lEe(t){return hEe(t)||uEe(t)||dEe(t)||cEe()}function cEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dEe(t,e){if(t){if(typeof t=="string")return lT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return lT(t,e)}}function uEe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function hEe(t){if(Array.isArray(t))return lT(t)}function lT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var mEe=function(e){return e},ute={},hte=function(e){return e===ute},_z=function(e){return function s(){return arguments.length===0||arguments.length===1&&hte(arguments.length<=0?void 0:arguments[0])?s:e.apply(void 0,arguments)}},fEe=function t(e,s){return e===1?s:_z(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==ute}).length;return o>=e?s.apply(void 0,a):t(e-o,_z(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(h){return hte(h)?c.shift():h});return s.apply(void 0,lEe(u).concat(c))}))})},U5=function(e){return fEe(e.length,e)},cT=function(e,s){for(var n=[],a=e;a<s;++a)n[a-e]=a;return n},pEe=U5(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(s){return e[s]}).map(t)}),xEe=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];if(!s.length)return mEe;var a=s.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},dT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},mte=function(e){var s=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return s&&i.every(function(l,c){return l===s[c]})||(s=i,n=e.apply(void 0,i)),n}};function gEe(t){var e;return t===0?e=1:e=Math.floor(new aa(t).abs().log(10).toNumber())+1,e}function vEe(t,e,s){for(var n=new aa(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(s),a++;return i}var yEe=U5(function(t,e,s){var n=+t,a=+e;return n+s*(a-n)}),bEe=U5(function(t,e,s){var n=e-+t;return n=n||1/0,(s-t)/n}),wEe=U5(function(t,e,s){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(s-t)/n))});const z5={rangeStep:vEe,getDigitCount:gEe,interpolateNumber:yEe,uninterpolateNumber:bEe,uninterpolateTruncation:wEe};function uT(t){return SEe(t)||NEe(t)||fte(t)||jEe()}function jEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NEe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function SEe(t){if(Array.isArray(t))return hT(t)}function Rb(t,e){return _Ee(t)||kEe(t,e)||fte(t,e)||CEe()}function CEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fte(t,e){if(t){if(typeof t=="string")return hT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return hT(t,e)}}function hT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function kEe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var s=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(s.push(l.value),!(e&&s.length===e));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return s}}function _Ee(t){if(Array.isArray(t))return t}function pte(t){var e=Rb(t,2),s=e[0],n=e[1],a=s,i=n;return s>n&&(a=n,i=s),[a,i]}function xte(t,e,s){if(t.lte(0))return new aa(0);var n=z5.getDigitCount(t.toNumber()),a=new aa(10).pow(n),i=t.div(a),o=n!==1?.05:.1,l=new aa(Math.ceil(i.div(o).toNumber())).add(s).mul(o),c=l.mul(a);return e?c:new aa(Math.ceil(c))}function AEe(t,e,s){var n=1,a=new aa(t);if(!a.isint()&&s){var i=Math.abs(t);i<1?(n=new aa(10).pow(z5.getDigitCount(t)-1),a=new aa(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new aa(Math.floor(t)))}else t===0?a=new aa(Math.floor((e-1)/2)):s||(a=new aa(Math.floor(t)));var o=Math.floor((e-1)/2),l=xEe(pEe(function(c){return a.add(new aa(c-o).mul(n)).toNumber()}),cT);return l(0,e)}function gte(t,e,s,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(s-1)))return{step:new aa(0),tickMin:new aa(0),tickMax:new aa(0)};var i=xte(new aa(e).sub(t).div(s-1),n,a),o;t<=0&&e>=0?o=new aa(0):(o=new aa(t).add(e).div(2),o=o.sub(new aa(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new aa(e).sub(o).div(i).toNumber()),d=l+c+1;return d>s?gte(t,e,s,n,a+1):(d<s&&(c=e>0?c+(s-d):c,l=e>0?l:l+(s-d)),{step:i,tickMin:o.sub(new aa(l).mul(i)),tickMax:o.add(new aa(c).mul(i))})}function EEe(t){var e=Rb(t,2),s=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=pte([s,n]),c=Rb(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(uT(cT(0,a-1).map(function(){return 1/0}))):[].concat(uT(cT(0,a-1).map(function(){return-1/0})),[u]);return s>n?dT(h):h}if(d===u)return AEe(d,a,i);var m=gte(d,u,o,i),f=m.step,v=m.tickMin,x=m.tickMax,g=z5.rangeStep(v,x.add(new aa(.1).mul(f)),f);return s>n?dT(g):g}function PEe(t,e){var s=Rb(t,2),n=s[0],a=s[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=pte([n,a]),l=Rb(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(e,2),h=xte(new aa(d).sub(c).div(u-1),i,0),m=[].concat(uT(z5.rangeStep(new aa(c),new aa(d).sub(new aa(.99).mul(h)),h)),[d]);return n>a?dT(m):m}var TEe=mte(EEe),OEe=mte(PEe),IEe="Invariant failed";function tg(t,e){throw new Error(IEe)}var $Ee=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function JN(){return JN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},JN.apply(this,arguments)}function DEe(t,e){return FEe(t)||LEe(t,e)||MEe(t,e)||REe()}function REe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MEe(t,e){if(t){if(typeof t=="string")return Az(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Az(t,e)}}function Az(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function LEe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function FEe(t){if(Array.isArray(t))return t}function BEe(t,e){if(t==null)return{};var s=UEe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function UEe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function zEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VEe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bte(n.key),n)}}function WEe(t,e,s){return e&&VEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qEe(t,e,s){return e=e4(e),HEe(t,vte()?Reflect.construct(e,s||[],e4(t).constructor):e.apply(t,s))}function HEe(t,e){if(e&&(yv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GEe(t)}function GEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vte=function(){return!!t})()}function e4(t){return e4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},e4(t)}function YEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mT(t,e)}function mT(t,e){return mT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mT(t,e)}function yte(t,e,s){return e=bte(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function bte(t){var e=KEe(t,"string");return yv(e)=="symbol"?e:e+""}function KEe(t,e){if(yv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $w=(function(t){function e(){return zEe(this,e),qEe(this,e,arguments)}return YEe(e,t),WEe(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,h=n.yAxis,m=BEe(n,$Ee),f=rs(m,!1);this.props.direction==="x"&&u.type!=="number"&&tg();var v=c.map(function(x){var g=d(x,l),b=g.x,w=g.y,N=g.value,C=g.errorVal;if(!C)return null;var S=[],A,k;if(Array.isArray(C)){var E=DEe(C,2);A=E[0],k=E[1]}else A=k=C;if(i==="vertical"){var O=u.scale,$=w+a,T=$+o,I=$-o,L=O(N-A),z=O(N+k);S.push({x1:z,y1:T,x2:z,y2:I}),S.push({x1:L,y1:$,x2:z,y2:$}),S.push({x1:L,y1:T,x2:L,y2:I})}else if(i==="horizontal"){var M=h.scale,V=b+a,B=V-o,F=V+o,J=M(N-A),ee=M(N+k);S.push({x1:B,y1:ee,x2:F,y2:ee}),S.push({x1:V,y1:J,x2:V,y2:ee}),S.push({x1:B,y1:J,x2:F,y2:J})}return ce.createElement(nn,JN({className:"recharts-errorBar",key:"bar-".concat(S.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},f),S.map(function(q){return ce.createElement("line",JN({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return ce.createElement(nn,{className:"recharts-errorBars"},v)}}])})(ce.Component);yte($w,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});yte($w,"displayName","ErrorBar");function Mb(t){"@babel/helpers - typeof";return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(t)}function Ez(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Jp(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(s),!0).forEach(function(n){XEe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ez(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function XEe(t,e,s){return e=QEe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function QEe(t){var e=ZEe(t,"string");return Mb(e)=="symbol"?e:e+""}function ZEe(t,e){if(Mb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Mb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wte=function(e){var s=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Ec(s,Dx);if(!o)return null;var l=Dx.defaultProps,c=l!==void 0?Jp(Jp({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(u,h){var m=h.item,f=h.props,v=f.sectors||f.data||[];return u.concat(v.map(function(x){return{type:o.props.iconType||m.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(n||[]).map(function(u){var h=u.item,m=h.type.defaultProps,f=m!==void 0?Jp(Jp({},m),h.props):{},v=f.dataKey,x=f.name,g=f.legendType,b=f.hide;return{inactive:b,dataKey:v,type:c.iconType||g||"square",color:u8(h),value:x||v,payload:f}}),Jp(Jp(Jp({},c),Dx.getWithHeight(o,a)),{},{payload:d,item:o})};function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}function Pz(t){return rPe(t)||tPe(t)||ePe(t)||JEe()}function JEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ePe(t,e){if(t){if(typeof t=="string")return fT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return fT(t,e)}}function tPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rPe(t){if(Array.isArray(t))return fT(t)}function fT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function Tz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function fi(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(s),!0).forEach(function(n){Q0(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Tz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Q0(t,e,s){return e=sPe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function sPe(t){var e=nPe(t,"string");return Lb(e)=="symbol"?e:e+""}function nPe(t,e){if(Lb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Lb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _i(t,e,s){return Os(t)||Os(e)?s:ro(e)?Vc(t,e,s):xs(e)?e(t):s}function X1(t,e,s,n){var a=rEe(t,function(l){return _i(l,e)});if(s==="number"){var i=a.filter(function(l){return er(l)||parseFloat(l)});return i.length?[B5(i),Ff(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Os(l)}):a;return o.map(function(l){return ro(l)||l instanceof Date?l:""})}var aPe=function(e){var s,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(s=n?.length)!==null&&s!==void 0?s:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,h=a[d].coordinate,m=d>=l-1?a[0].coordinate:a[d+1].coordinate,f=void 0;if(Pl(h-u)!==Pl(m-h)){var v=[];if(Pl(m-h)===Pl(c[1]-c[0])){f=m;var x=h+c[1]-c[0];v[0]=Math.min(x,(x+u)/2),v[1]=Math.max(x,(x+u)/2)}else{f=u;var g=m+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var b=[Math.min(h,(f+h)/2),Math.max(h,(f+h)/2)];if(e>b[0]&&e<=b[1]||e>=v[0]&&e<=v[1]){o=a[d].index;break}}else{var w=Math.min(u,m),N=Math.max(u,m);if(e>(w+h)/2&&e<=(N+h)/2){o=a[d].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C>0&&C<l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2&&e<=(n[C].coordinate+n[C+1].coordinate)/2||C===l-1&&e>(n[C].coordinate+n[C-1].coordinate)/2){o=n[C].index;break}return o},u8=function(e){var s,n=e,a=n.type.displayName,i=(s=e.type)!==null&&s!==void 0&&s.defaultProps?fi(fi({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},iPe=function(e){var s=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,h=Object.keys(u),m=0,f=h.length;m<f;m++){var v=u[h[m]],x=v.items,g=v.cateAxisId,b=x.filter(function(k){return km(k.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,N=w!==void 0?fi(fi({},w),b[0].props):b[0].props,C=N.barSize,S=N[g];o[S]||(o[S]=[]);var A=Os(C)?s:C;o[S].push({item:b[0],stackList:b.slice(1),barSize:Os(A)?void 0:Tl(A,n,0)})}}return o},oPe=function(e){var s=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Tl(s,a,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,f=a/c,v=o.reduce(function(C,S){return C+S.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&f>0&&(m=!0,f*=.9,v=c*f);var x=(a-v)/2>>0,g={offset:x-d,size:0};u=o.reduce(function(C,S){var A={item:S.item,position:{offset:g.offset+g.size+d,size:m?f:S.barSize}},k=[].concat(Pz(C),[A]);return g=k[k.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(E){k.push({item:E,position:g})}),k},h)}else{var b=Tl(n,a,0,!0);a-2*b-(c-1)*d<=0&&(d=0);var w=(a-2*b-(c-1)*d)/c;w>1&&(w>>=0);var N=l===+l?Math.min(w,l):w;u=o.reduce(function(C,S,A){var k=[].concat(Pz(C),[{item:S.item,position:{offset:b+(w+d)*A+(w-N)/2,size:N}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(E){k.push({item:E,position:k[k.length-1].position})}),k},h)}return u},lPe=function(e,s,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=wte({children:i,legendWidth:c});if(d){var u=a||{},h=u.width,m=u.height,f=d.align,v=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&f!=="center"&&er(e[f]))return fi(fi({},e),{},Q0({},f,e[f]+(h||0)));if((x==="horizontal"||x==="vertical"&&f==="center")&&v!=="middle"&&er(e[v]))return fi(fi({},e),{},Q0({},v,e[v]+(m||0)))}return e},cPe=function(e,s,n){return Os(s)?!0:e==="horizontal"?s==="yAxis":e==="vertical"||n==="x"?s==="xAxis":n==="y"?s==="yAxis":!0},jte=function(e,s,n,a,i){var o=s.props.children,l=Wc(o,$w).filter(function(d){return cPe(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var h=_i(u,n);if(Os(h))return d;var m=Array.isArray(h)?[B5(h),Ff(h)]:[h,h],f=c.reduce(function(v,x){var g=_i(u,x,0),b=m[0]-Math.abs(Array.isArray(g)?g[0]:g),w=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,v[0]),Math.max(w,v[1])]},[1/0,-1/0]);return[Math.min(f[0],d[0]),Math.max(f[1],d[1])]},[1/0,-1/0])}return null},dPe=function(e,s,n,a,i){var o=s.map(function(l){return jte(e,l,n,i,a)}).filter(function(l){return!Os(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Nte=function(e,s,n,a,i){var o=s.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&jte(e,c,d,a)||X1(e,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},Ste=function(e,s){return e==="horizontal"&&s==="xAxis"||e==="vertical"&&s==="yAxis"||e==="centric"&&s==="angleAxis"||e==="radial"&&s==="radiusAxis"},Cte=function(e,s,n,a){if(a)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===s&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(s),o||l.push(n),l},Nm=function(e,s,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(s||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&l?.length>=2?Pl(l[0]-l[1])*2*d:d,s&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+d,value:h,offset:d}});return u.filter(function(h){return!ry(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,m){return{coordinate:a(h)+d,value:h,index:m,offset:d}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,m){return{coordinate:a(h)+d,value:i?i[h]:h,index:m,offset:d}})},G6=new WeakMap,aj=function(e,s){if(typeof s!="function")return e;G6.has(e)||G6.set(e,new WeakMap);var n=G6.get(e);if(n.has(s))return n.get(s);var a=function(){e.apply(void 0,arguments),s.apply(void 0,arguments)};return n.set(s,a),a},kte=function(e,s,n){var a=e.scale,i=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Pb(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:YN(),realScaleType:"linear"}:i==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?{scale:K1(),realScaleType:"point"}:i==="category"?{scale:Pb(),realScaleType:"band"}:{scale:YN(),realScaleType:"linear"};if(Xx(a)){var c="scale".concat(C5(a));return{scale:(xz[c]||K1)(),realScaleType:xz[c]?c:"point"}}return xs(a)?{scale:a}:{scale:K1(),realScaleType:"point"}},Oz=1e-4,_te=function(e){var s=e.domain();if(!(!s||s.length<=2)){var n=s.length,a=e.range(),i=Math.min(a[0],a[1])-Oz,o=Math.max(a[0],a[1])+Oz,l=e(s[0]),c=e(s[n-1]);(l<i||l>o||c<i||c>o)&&e.domain([s[0],s[n-1]])}},uPe=function(e,s){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===s)return e[n].position;return null},hPe=function(e,s){if(!s||s.length!==2||!er(s[0])||!er(s[1]))return e;var n=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]),i=[e[0],e[1]];return(!er(e[0])||e[0]<n)&&(i[0]=n),(!er(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},mPe=function(e){var s=e.length;if(!(s<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,l=0;l<s;++l){var c=ry(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=i,e[l][n][1]=i+c,i=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},fPe=function(e){var s=e.length;if(!(s<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<s;++o){var l=ry(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},pPe={sign:mPe,expand:rSe,none:uv,silhouette:sSe,wiggle:nSe,positive:fPe},xPe=function(e,s,n){var a=s.map(function(l){return l.props.dataKey}),i=pPe[n],o=tSe().keys(a).value(function(l,c){return+_i(l,c,0)}).order(WP).offset(i);return o(e)},gPe=function(e,s,n,a,i,o){if(!e)return null;var l=o?s.reverse():s,c={},d=l.reduce(function(h,m){var f,v=(f=m.type)!==null&&f!==void 0&&f.defaultProps?fi(fi({},m.type.defaultProps),m.props):m.props,x=v.stackId,g=v.hide;if(g)return h;var b=v[n],w=h[b]||{hasStack:!1,stackGroups:{}};if(ro(x)){var N=w.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};N.items.push(m),w.hasStack=!0,w.stackGroups[x]=N}else w.stackGroups[gg("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[m]};return fi(fi({},h),{},Q0({},b,w))},c),u={};return Object.keys(d).reduce(function(h,m){var f=d[m];if(f.hasStack){var v={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(x,g){var b=f.stackGroups[g];return fi(fi({},x),{},Q0({},g,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:xPe(e,b.items,i)}))},v)}return fi(fi({},h),{},Q0({},m,f))},u)},Ate=function(e,s){var n=s.realScaleType,a=s.type,i=s.tickCount,o=s.originalDomain,l=s.allowDecimals,c=n||s.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=TEe(d,i,l);return e.domain([B5(u),Ff(u)]),{niceTicks:u}}if(i&&a==="number"){var h=e.domain(),m=OEe(h,i,l);return{niceTicks:m}}return null};function t4(t){var e=t.axis,s=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Os(a[e.dataKey])){var l=PN(s,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return s[i]?s[i].coordinate+n/2:null}var c=_i(a,Os(o)?e.dataKey:o);return Os(c)?null:e.scale(c)}var Iz=function(e){var s=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(s.type==="category")return n[l]?n[l].coordinate+a:null;var c=_i(o,s.dataKey,s.domain[l]);return Os(c)?null:s.scale(c)-i/2+a},vPe=function(e){var s=e.numericAxis,n=s.scale.domain();if(s.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},yPe=function(e,s){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?fi(fi({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(ro(i)){var o=s[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},bPe=function(e){return e.reduce(function(s,n){return[B5(n.concat([s[0]]).filter(er)),Ff(n.concat([s[1]]).filter(er))]},[1/0,-1/0])},Ete=function(e,s,n){return Object.keys(e).reduce(function(a,i){var o=e[i],l=o.stackedData,c=l.reduce(function(d,u){var h=bPe(u.slice(s,n+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},$z=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pT=function(e,s,n){if(xs(e))return e(s,n);if(!Array.isArray(e))return s;var a=[];if(er(e[0]))a[0]=n?e[0]:Math.min(e[0],s[0]);else if($z.test(e[0])){var i=+$z.exec(e[0])[1];a[0]=s[0]-i}else xs(e[0])?a[0]=e[0](s[0]):a[0]=s[0];if(er(e[1]))a[1]=n?e[1]:Math.max(e[1],s[1]);else if(Dz.test(e[1])){var o=+Dz.exec(e[1])[1];a[1]=s[1]+o}else xs(e[1])?a[1]=e[1](s[1]):a[1]=s[1];return a},r4=function(e,s,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&s&&s.length>=2){for(var i=F$(s,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Rz=function(e,s,n){return!e||!e.length||Jx(e,Vc(n,"type.defaultProps.domain"))?s:e},Pte=function(e,s){var n=e.type.defaultProps?fi(fi({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return fi(fi({},rs(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:u8(e),value:_i(s,a),type:c,payload:s,chartType:d,hide:u})};function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}function Mz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function xm(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Mz(Object(s),!0).forEach(function(n){Tte(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Mz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Tte(t,e,s){return e=wPe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function wPe(t){var e=jPe(t,"string");return Fb(e)=="symbol"?e:e+""}function jPe(t,e){if(Fb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Fb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NPe(t,e){return _Pe(t)||kPe(t,e)||CPe(t,e)||SPe()}function SPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CPe(t,e){if(t){if(typeof t=="string")return Lz(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Lz(t,e)}}function Lz(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function kPe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Pe(t){if(Array.isArray(t))return t}var s4=Math.PI/180,APe=function(e){return e*180/Math.PI},Sa=function(e,s,n,a){return{x:e+Math.cos(-s4*a)*n,y:s+Math.sin(-s4*a)*n}},Ote=function(e,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(s-(n.top||0)-(n.bottom||0)))/2},EPe=function(e,s,n,a,i){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=Tl(e.cx,o,o/2),h=Tl(e.cy,l,l/2),m=Ote(o,l,n),f=Tl(e.innerRadius,m,0),v=Tl(e.outerRadius,m,m*.8),x=Object.keys(s);return x.reduce(function(g,b){var w=s[b],N=w.domain,C=w.reversed,S;if(Os(w.range))a==="angleAxis"?S=[c,d]:a==="radiusAxis"&&(S=[f,v]),C&&(S=[S[1],S[0]]);else{S=w.range;var A=S,k=NPe(A,2);c=k[0],d=k[1]}var E=kte(w,i),O=E.realScaleType,$=E.scale;$.domain(N).range(S),_te($);var T=Ate($,xm(xm({},w),{},{realScaleType:O})),I=xm(xm(xm({},w),T),{},{range:S,radius:v,realScaleType:O,scale:$,cx:u,cy:h,innerRadius:f,outerRadius:v,startAngle:c,endAngle:d});return xm(xm({},g),{},Tte({},b,I))},{})},PPe=function(e,s){var n=e.x,a=e.y,i=s.x,o=s.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},TPe=function(e,s){var n=e.x,a=e.y,i=s.cx,o=s.cy,l=PPe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:APe(d),angleInRadian:d}},OPe=function(e){var s=e.startAngle,n=e.endAngle,a=Math.floor(s/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:s-o*360,endAngle:n-o*360}},IPe=function(e,s){var n=s.startAngle,a=s.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return e+l*360},Fz=function(e,s){var n=e.x,a=e.y,i=TPe({x:n,y:a},s),o=i.radius,l=i.angle,c=s.innerRadius,d=s.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=OPe(s),h=u.startAngle,m=u.endAngle,f=l,v;if(h<=m){for(;f>m;)f-=360;for(;f<h;)f+=360;v=f>=h&&f<=m}else{for(;f>h;)f-=360;for(;f<m;)f+=360;v=f>=m&&f<=h}return v?xm(xm({},s),{},{radius:o,angle:IPe(f,s)}):null},Ite=function(e){return!j.isValidElement(e)&&!xs(e)&&typeof e!="boolean"?e.className:""};function Bb(t){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bb(t)}var $Pe=["offset"];function DPe(t){return FPe(t)||LPe(t)||MPe(t)||RPe()}function RPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MPe(t,e){if(t){if(typeof t=="string")return xT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return xT(t,e)}}function LPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FPe(t){if(Array.isArray(t))return xT(t)}function xT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function BPe(t,e){if(t==null)return{};var s=UPe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function UPe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function Bz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Gi(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(s),!0).forEach(function(n){zPe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Bz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function zPe(t,e,s){return e=VPe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function VPe(t){var e=WPe(t,"string");return Bb(e)=="symbol"?e:e+""}function WPe(t,e){if(Bb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Bb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ub(){return Ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ub.apply(this,arguments)}var qPe=function(e){var s=e.value,n=e.formatter,a=Os(e.children)?s:e.children;return xs(n)?n(a):a},HPe=function(e,s){var n=Pl(s-e),a=Math.min(Math.abs(s-e),360);return n*a},GPe=function(e,s,n){var a=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,d=c.cx,u=c.cy,h=c.innerRadius,m=c.outerRadius,f=c.startAngle,v=c.endAngle,x=c.clockWise,g=(h+m)/2,b=HPe(f,v),w=b>=0?1:-1,N,C;a==="insideStart"?(N=f+w*o,C=x):a==="insideEnd"?(N=v-w*o,C=!x):a==="end"&&(N=v+w*o,C=x),C=b<=0?C:!C;var S=Sa(d,u,g,N),A=Sa(d,u,g,N+(C?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(A.x,",").concat(A.y),E=Os(e.id)?gg("recharts-radial-line-"):e.id;return ce.createElement("text",Ub({},n,{dominantBaseline:"central",className:Rs("recharts-radial-bar-label",l)}),ce.createElement("defs",null,ce.createElement("path",{id:E,d:k})),ce.createElement("textPath",{xlinkHref:"#".concat(E)},s))},YPe=function(e){var s=e.viewBox,n=e.offset,a=e.position,i=s,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,h=i.endAngle,m=(u+h)/2;if(a==="outside"){var f=Sa(o,l,d+n,m),v=f.x,x=f.y;return{x:v,y:x,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,b=Sa(o,l,g,m),w=b.x,N=b.y;return{x:w,y:N,textAnchor:"middle",verticalAnchor:"middle"}},KPe=function(e){var s=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=s,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,m=h*a,f=h>0?"end":"start",v=h>0?"start":"end",x=d>=0?1:-1,g=x*a,b=x>0?"end":"start",w=x>0?"start":"end";if(i==="top"){var N={x:l+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:f};return Gi(Gi({},N),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var C={x:l+d/2,y:c+u+m,textAnchor:"middle",verticalAnchor:v};return Gi(Gi({},C),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var S={x:l-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Gi(Gi({},S),n?{width:Math.max(S.x-n.x,0),height:u}:{})}if(i==="right"){var A={x:l+d+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Gi(Gi({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:u}:{})}var k=n?{width:d,height:u}:{};return i==="insideLeft"?Gi({x:l+g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},k):i==="insideRight"?Gi({x:l+d-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},k):i==="insideTop"?Gi({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:v},k):i==="insideBottom"?Gi({x:l+d/2,y:c+u-m,textAnchor:"middle",verticalAnchor:f},k):i==="insideTopLeft"?Gi({x:l+g,y:c+m,textAnchor:w,verticalAnchor:v},k):i==="insideTopRight"?Gi({x:l+d-g,y:c+m,textAnchor:b,verticalAnchor:v},k):i==="insideBottomLeft"?Gi({x:l+g,y:c+u-m,textAnchor:w,verticalAnchor:f},k):i==="insideBottomRight"?Gi({x:l+d-g,y:c+u-m,textAnchor:b,verticalAnchor:f},k):ty(i)&&(er(i.x)||Sx(i.x))&&(er(i.y)||Sx(i.y))?Gi({x:l+Tl(i.x,d),y:c+Tl(i.y,u),textAnchor:"end",verticalAnchor:"end"},k):Gi({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},XPe=function(e){return"cx"in e&&er(e.cx)};function So(t){var e=t.offset,s=e===void 0?5:e,n=BPe(t,$Pe),a=Gi({offset:s},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,m=a.textBreakAll;if(!i||Os(l)&&Os(c)&&!j.isValidElement(d)&&!xs(d))return null;if(j.isValidElement(d))return j.cloneElement(d,a);var f;if(xs(d)){if(f=j.createElement(d,a),j.isValidElement(f))return f}else f=qPe(a);var v=XPe(i),x=rs(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return GPe(a,f,x);var g=v?YPe(a):KPe(a);return ce.createElement(Zx,Ub({className:Rs("recharts-label",h)},x,g,{breakAll:m}),f)}So.displayName="Label";var $te=function(e){var s=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,h=e.x,m=e.y,f=e.top,v=e.left,x=e.width,g=e.height,b=e.clockWise,w=e.labelViewBox;if(w)return w;if(er(x)&&er(g)){if(er(h)&&er(m))return{x:h,y:m,width:x,height:g};if(er(f)&&er(v))return{x:f,y:v,width:x,height:g}}return er(h)&&er(m)?{x:h,y:m,width:0,height:0}:er(s)&&er(n)?{cx:s,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},QPe=function(e,s){return e?e===!0?ce.createElement(So,{key:"label-implicit",viewBox:s}):ro(e)?ce.createElement(So,{key:"label-implicit",viewBox:s,value:e}):j.isValidElement(e)?e.type===So?j.cloneElement(e,{key:"label-implicit",viewBox:s}):ce.createElement(So,{key:"label-implicit",content:e,viewBox:s}):xs(e)?ce.createElement(So,{key:"label-implicit",content:e,viewBox:s}):ty(e)?ce.createElement(So,Ub({viewBox:s},e,{key:"label-implicit"})):null:null},ZPe=function(e,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=$te(e),o=Wc(a,So).map(function(c,d){return j.cloneElement(c,{viewBox:s||i,key:"label-".concat(d)})});if(!n)return o;var l=QPe(e.label,s||i);return[l].concat(DPe(o))};So.parseViewBox=$te;So.renderCallByParent=ZPe;var Y6,Uz;function JPe(){if(Uz)return Y6;Uz=1;function t(e){var s=e==null?0:e.length;return s?e[s-1]:void 0}return Y6=t,Y6}var eTe=JPe();const tTe=cn(eTe);function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}var rTe=["valueAccessor"],sTe=["data","dataKey","clockWise","id","textBreakAll"];function nTe(t){return lTe(t)||oTe(t)||iTe(t)||aTe()}function aTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iTe(t,e){if(t){if(typeof t=="string")return gT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return gT(t,e)}}function oTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lTe(t){if(Array.isArray(t))return gT(t)}function gT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function n4(){return n4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},n4.apply(this,arguments)}function zz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Vz(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?zz(Object(s),!0).forEach(function(n){cTe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):zz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function cTe(t,e,s){return e=dTe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function dTe(t){var e=uTe(t,"string");return zb(e)=="symbol"?e:e+""}function uTe(t,e){if(zb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(zb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wz(t,e){if(t==null)return{};var s=hTe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function hTe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}var mTe=function(e){return Array.isArray(e.value)?tTe(e.value):e.value};function Nh(t){var e=t.valueAccessor,s=e===void 0?mTe:e,n=Wz(t,rTe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=Wz(n,sTe);return!a||!a.length?null:ce.createElement(nn,{className:"recharts-label-list"},a.map(function(u,h){var m=Os(i)?s(u,h):_i(u&&u.payload,i),f=Os(l)?{}:{id:"".concat(l,"-").concat(h)};return ce.createElement(So,n4({},rs(u,!0),d,f,{parentViewBox:u.parentViewBox,value:m,textBreakAll:c,viewBox:So.parseViewBox(Os(o)?u:Vz(Vz({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Nh.displayName="LabelList";function fTe(t,e){return t?t===!0?ce.createElement(Nh,{key:"labelList-implicit",data:e}):ce.isValidElement(t)||xs(t)?ce.createElement(Nh,{key:"labelList-implicit",data:e,content:t}):ty(t)?ce.createElement(Nh,n4({data:e},t,{key:"labelList-implicit"})):null:null}function pTe(t,e){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var n=t.children,a=Wc(n,Nh).map(function(o,l){return j.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!s)return a;var i=fTe(t.label,e);return[i].concat(nTe(a))}Nh.renderCallByParent=pTe;function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}function vT(){return vT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},vT.apply(this,arguments)}function qz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Hz(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?qz(Object(s),!0).forEach(function(n){xTe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):qz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function xTe(t,e,s){return e=gTe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function gTe(t){var e=vTe(t,"string");return Vb(e)=="symbol"?e:e+""}function vTe(t,e){if(Vb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Vb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yTe=function(e,s){var n=Pl(s-e),a=Math.min(Math.abs(s-e),359.999);return n*a},ij=function(e){var s=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+a,h=Math.asin(c/u)/s4,m=d?i:i+o*h,f=Sa(s,n,u,m),v=Sa(s,n,a,m),x=d?i-o*h:i,g=Sa(s,n,u*Math.cos(h*s4),x);return{center:f,circleTangency:v,lineTangency:g,theta:h}},Dte=function(e){var s=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=yTe(o,l),d=o+c,u=Sa(s,n,i,o),h=Sa(s,n,i,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var f=Sa(s,n,a,o),v=Sa(s,n,a,d);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(s,",").concat(n," Z");return m},bTe=function(e){var s=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,h=Pl(u-d),m=ij({cx:s,cy:n,radius:i,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),f=m.circleTangency,v=m.lineTangency,x=m.theta,g=ij({cx:s,cy:n,radius:i,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,w=g.lineTangency,N=g.theta,C=c?Math.abs(d-u):Math.abs(d-u)-x-N;if(C<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Dte({cx:s,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var A=ij({cx:s,cy:n,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=A.circleTangency,E=A.lineTangency,O=A.theta,$=ij({cx:s,cy:n,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=$.circleTangency,I=$.lineTangency,L=$.theta,z=c?Math.abs(d-u):Math.abs(d-u)-O-L;if(z<0&&o===0)return"".concat(S,"L").concat(s,",").concat(n,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(h>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,"Z")}else S+="L".concat(s,",").concat(n,"Z");return S},wTe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Rte=function(e){var s=Hz(Hz({},wTe),e),n=s.cx,a=s.cy,i=s.innerRadius,o=s.outerRadius,l=s.cornerRadius,c=s.forceCornerRadius,d=s.cornerIsExternal,u=s.startAngle,h=s.endAngle,m=s.className;if(o<i||u===h)return null;var f=Rs("recharts-sector",m),v=o-i,x=Tl(l,v,0,!0),g;return x>0&&Math.abs(u-h)<360?g=bTe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):g=Dte({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),ce.createElement("path",vT({},rs(s,!0),{className:f,d:g,role:"img"}))};function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function yT(){return yT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},yT.apply(this,arguments)}function Gz(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Yz(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(s),!0).forEach(function(n){jTe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Gz(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function jTe(t,e,s){return e=NTe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function NTe(t){var e=STe(t,"string");return Wb(e)=="symbol"?e:e+""}function STe(t,e){if(Wb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Wb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kz={curveBasisClosed:W3e,curveBasisOpen:q3e,curveBasis:V3e,curveBumpX:E3e,curveBumpY:P3e,curveLinearClosed:H3e,curveLinear:_5,curveMonotoneX:G3e,curveMonotoneY:Y3e,curveNatural:K3e,curveStep:X3e,curveStepAfter:Z3e,curveStepBefore:Q3e},oj=function(e){return e.x===+e.x&&e.y===+e.y},e1=function(e){return e.x},t1=function(e){return e.y},CTe=function(e,s){if(xs(e))return e;var n="curve".concat(C5(e));return(n==="curveMonotone"||n==="curveBump")&&s?Kz["".concat(n).concat(s==="vertical"?"Y":"X")]:Kz[n]||_5},kTe=function(e){var s=e.type,n=s===void 0?"linear":s,a=e.points,i=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=CTe(n,l),h=d?i.filter(function(x){return oj(x)}):i,m;if(Array.isArray(o)){var f=d?o.filter(function(x){return oj(x)}):o,v=h.map(function(x,g){return Yz(Yz({},x),{},{base:f[g]})});return l==="vertical"?m=Z2().y(t1).x1(e1).x0(function(x){return x.base.x}):m=Z2().x(e1).y1(t1).y0(function(x){return x.base.y}),m.defined(oj).curve(u),m(v)}return l==="vertical"&&er(o)?m=Z2().y(t1).x1(e1).x0(o):er(o)?m=Z2().x(e1).y1(t1).y0(o):m=$J().x(e1).y(t1),m.defined(oj).curve(u),m(h)},Lx=function(e){var s=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?kTe(e):a;return j.createElement("path",yT({},rs(e,!1),TN(e),{className:Rs("recharts-curve",s),d:o,ref:i}))},K6={exports:{}},X6,Xz;function _Te(){if(Xz)return X6;Xz=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return X6=t,X6}var Q6,Qz;function ATe(){if(Qz)return Q6;Qz=1;var t=_Te();function e(){}function s(){}return s.resetWarningCache=e,Q6=function(){function n(o,l,c,d,u,h){if(h!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:s,resetWarningCache:e};return i.PropTypes=i,i},Q6}var Zz;function h8(){return Zz||(Zz=1,K6.exports=ATe()()),K6.exports}var ETe=h8();const ss=cn(ETe);var PTe=Object.getOwnPropertyNames,TTe=Object.getOwnPropertySymbols,OTe=Object.prototype.hasOwnProperty;function Jz(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function lj(t){return function(s,n,a){if(!s||!n||typeof s!="object"||typeof n!="object")return t(s,n,a);var i=a.cache,o=i.get(s),l=i.get(n);if(o&&l)return o===n&&l===s;i.set(s,n),i.set(n,s);var c=t(s,n,a);return i.delete(s),i.delete(n),c}}function ITe(t){return t?.[Symbol.toStringTag]}function eV(t){return PTe(t).concat(TTe(t))}var $Te=Object.hasOwn||(function(t,e){return OTe.call(t,e)});function bg(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var DTe="__v",RTe="__o",MTe="_owner",tV=Object.getOwnPropertyDescriptor,rV=Object.keys;function LTe(t,e,s){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!s.equals(t[n],e[n],n,n,t,e,s))return!1;return!0}function FTe(t,e){return bg(t.getTime(),e.getTime())}function BTe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function UTe(t,e){return t===e}function sV(t,e,s){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=e.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(a[h]){h++;continue}var m=o.value,f=l.value;if(s.equals(m[0],f[0],c,h,t,e,s)&&s.equals(m[1],f[1],m[0],f[0],t,e,s)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}var zTe=bg;function VTe(t,e,s){var n=rV(t),a=n.length;if(rV(e).length!==a)return!1;for(;a-- >0;)if(!Mte(t,e,s,n[a]))return!1;return!0}function r1(t,e,s){var n=eV(t),a=n.length;if(eV(e).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!Mte(t,e,s,i)||(o=tV(t,i),l=tV(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function WTe(t,e){return bg(t.valueOf(),e.valueOf())}function qTe(t,e){return t.source===e.source&&t.flags===e.flags}function nV(t,e,s){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),o,l;(o=i.next())&&!o.done;){for(var c=e.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&s.equals(o.value,l.value,o.value,l.value,t,e,s)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function HTe(t,e){var s=t.length;if(e.length!==s)return!1;for(;s-- >0;)if(t[s]!==e[s])return!1;return!0}function GTe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Mte(t,e,s,n){return(n===MTe||n===RTe||n===DTe)&&(t.$$typeof||e.$$typeof)?!0:$Te(e,n)&&s.equals(t[n],e[n],n,n,t,e,s)}var YTe="[object Arguments]",KTe="[object Boolean]",XTe="[object Date]",QTe="[object Error]",ZTe="[object Map]",JTe="[object Number]",eOe="[object Object]",tOe="[object RegExp]",rOe="[object Set]",sOe="[object String]",nOe="[object URL]",aOe=Array.isArray,aV=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,iV=Object.assign,iOe=Object.prototype.toString.call.bind(Object.prototype.toString);function oOe(t){var e=t.areArraysEqual,s=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,h=t.areTypedArraysEqual,m=t.areUrlsEqual,f=t.unknownTagComparators;return function(x,g,b){if(x===g)return!0;if(x==null||g==null)return!1;var w=typeof x;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(x,g,b):w==="function"?a(x,g,b):!1;var N=x.constructor;if(N!==g.constructor)return!1;if(N===Object)return l(x,g,b);if(aOe(x))return e(x,g,b);if(aV!=null&&aV(x))return h(x,g,b);if(N===Date)return s(x,g,b);if(N===RegExp)return d(x,g,b);if(N===Map)return i(x,g,b);if(N===Set)return u(x,g,b);var C=iOe(x);if(C===XTe)return s(x,g,b);if(C===tOe)return d(x,g,b);if(C===ZTe)return i(x,g,b);if(C===rOe)return u(x,g,b);if(C===eOe)return typeof x.then!="function"&&typeof g.then!="function"&&l(x,g,b);if(C===nOe)return m(x,g,b);if(C===QTe)return n(x,g,b);if(C===YTe)return l(x,g,b);if(C===KTe||C===JTe||C===sOe)return c(x,g,b);if(f){var S=f[C];if(!S){var A=ITe(x);A&&(S=f[A])}if(S)return S(x,g,b)}return!1}}function lOe(t){var e=t.circular,s=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?r1:LTe,areDatesEqual:FTe,areErrorsEqual:BTe,areFunctionsEqual:UTe,areMapsEqual:n?Jz(sV,r1):sV,areNumbersEqual:zTe,areObjectsEqual:n?r1:VTe,arePrimitiveWrappersEqual:WTe,areRegExpsEqual:qTe,areSetsEqual:n?Jz(nV,r1):nV,areTypedArraysEqual:n?r1:HTe,areUrlsEqual:GTe,unknownTagComparators:void 0};if(s&&(a=iV({},a,s(a))),e){var i=lj(a.areArraysEqual),o=lj(a.areMapsEqual),l=lj(a.areObjectsEqual),c=lj(a.areSetsEqual);a=iV({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function cOe(t){return function(e,s,n,a,i,o,l){return t(e,s,l)}}function dOe(t){var e=t.circular,s=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,d){var u=n(),h=u.cache,m=h===void 0?e?new WeakMap:void 0:h,f=u.meta;return s(c,d,{cache:m,equals:a,meta:f,strict:i})};if(e)return function(c,d){return s(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return s(c,d,o)}}var uOe=gp();gp({strict:!0});gp({circular:!0});gp({circular:!0,strict:!0});gp({createInternalComparator:function(){return bg}});gp({strict:!0,createInternalComparator:function(){return bg}});gp({circular:!0,createInternalComparator:function(){return bg}});gp({circular:!0,createInternalComparator:function(){return bg},strict:!0});function gp(t){t===void 0&&(t={});var e=t.circular,s=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,i=t.strict,o=i===void 0?!1:i,l=lOe(t),c=oOe(l),d=n?n(c):cOe(c);return dOe({circular:s,comparator:c,createState:a,equals:d,strict:o})}function hOe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function oV(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=-1,n=function a(i){s<0&&(s=i),i-s>e?(t(i),s=-1):hOe(a)};requestAnimationFrame(n)}function bT(t){"@babel/helpers - typeof";return bT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bT(t)}function mOe(t){return gOe(t)||xOe(t)||pOe(t)||fOe()}function fOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pOe(t,e){if(t){if(typeof t=="string")return lV(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return lV(t,e)}}function lV(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function xOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gOe(t){if(Array.isArray(t))return t}function vOe(){var t={},e=function(){return null},s=!1,n=function a(i){if(!s){if(Array.isArray(i)){if(!i.length)return;var o=i,l=mOe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){oV(a.bind(null,d),c);return}a(c),oV(a.bind(null,d));return}bT(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){s=!0},start:function(i){s=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function qb(t){"@babel/helpers - typeof";return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qb(t)}function cV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function dV(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(s),!0).forEach(function(n){Lte(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):cV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Lte(t,e,s){return e=yOe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function yOe(t){var e=bOe(t,"string");return qb(e)==="symbol"?e:String(e)}function bOe(t,e){if(qb(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(qb(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wOe=function(e,s){return[Object.keys(e),Object.keys(s)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},jOe=function(e){return e},NOe=function(e){return e.replace(/([A-Z])/g,function(s){return"-".concat(s.toLowerCase())})},Q1=function(e,s){return Object.keys(s).reduce(function(n,a){return dV(dV({},n),{},Lte({},a,e(a,s[a])))},{})},uV=function(e,s,n){return e.map(function(a){return"".concat(NOe(a)," ").concat(s,"ms ").concat(n)}).join(",")};function SOe(t,e){return _Oe(t)||kOe(t,e)||Fte(t,e)||COe()}function COe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kOe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Oe(t){if(Array.isArray(t))return t}function AOe(t){return TOe(t)||POe(t)||Fte(t)||EOe()}function EOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fte(t,e){if(t){if(typeof t=="string")return wT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return wT(t,e)}}function POe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TOe(t){if(Array.isArray(t))return wT(t)}function wT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var a4=1e-4,Bte=function(e,s){return[0,3*e,3*s-6*e,3*e-3*s+1]},Ute=function(e,s){return e.map(function(n,a){return n*Math.pow(s,a)}).reduce(function(n,a){return n+a})},hV=function(e,s){return function(n){var a=Bte(e,s);return Ute(a,n)}},OOe=function(e,s){return function(n){var a=Bte(e,s),i=[].concat(AOe(a.map(function(o,l){return o*l}).slice(1)),[0]);return Ute(i,n)}},mV=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];var a=s[0],i=s[1],o=s[2],l=s[3];if(s.length===1)switch(s[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=s[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=SOe(d,4);a=u[0],i=u[1],o=u[2],l=u[3]}}}var h=hV(a,o),m=hV(i,l),f=OOe(a,o),v=function(b){return b>1?1:b<0?0:b},x=function(b){for(var w=b>1?1:b,N=w,C=0;C<8;++C){var S=h(N)-w,A=f(N);if(Math.abs(S-w)<a4||A<a4)return m(N);N=v(N-S/A)}return m(N)};return x.isStepper=!1,x},IOe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=e.stiff,n=s===void 0?100:s,a=e.damping,i=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(u,h,m){var f=-(u-h)*n,v=m*i,x=m+(f-v)*l/1e3,g=m*l/1e3+u;return Math.abs(g-h)<a4&&Math.abs(x)<a4?[h,0]:[g,x]};return c.isStepper=!0,c.dt=l,c},$Oe=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];var a=s[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mV(a);case"spring":return IOe();default:if(a.split("(")[0]==="cubic-bezier")return mV(a)}return typeof a=="function"?a:null};function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function fV(t){return MOe(t)||ROe(t)||zte(t)||DOe()}function DOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ROe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MOe(t){if(Array.isArray(t))return NT(t)}function pV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Lo(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(s),!0).forEach(function(n){jT(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):pV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function jT(t,e,s){return e=LOe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function LOe(t){var e=FOe(t,"string");return Hb(e)==="symbol"?e:String(e)}function FOe(t,e){if(Hb(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Hb(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BOe(t,e){return VOe(t)||zOe(t,e)||zte(t,e)||UOe()}function UOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zte(t,e){if(t){if(typeof t=="string")return NT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return NT(t,e)}}function NT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function zOe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function VOe(t){if(Array.isArray(t))return t}var i4=function(e,s,n){return e+(s-e)*n},ST=function(e){var s=e.from,n=e.to;return s!==n},WOe=function t(e,s,n){var a=Q1(function(i,o){if(ST(o)){var l=e(o.from,o.to,o.velocity),c=BOe(l,2),d=c[0],u=c[1];return Lo(Lo({},o),{},{from:d,velocity:u})}return o},s);return n<1?Q1(function(i,o){return ST(o)?Lo(Lo({},o),{},{velocity:i4(o.velocity,a[i].velocity,n),from:i4(o.from,a[i].from,n)}):o},s):t(e,a,n-1)};const qOe=(function(t,e,s,n,a){var i=wOe(t,e),o=i.reduce(function(g,b){return Lo(Lo({},g),{},jT({},b,[t[b],e[b]]))},{}),l=i.reduce(function(g,b){return Lo(Lo({},g),{},jT({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,d,u,h=function(){return null},m=function(){return Q1(function(b,w){return w.from},l)},f=function(){return!Object.values(l).filter(ST).length},v=function(b){d||(d=b);var w=b-d,N=w/s.dt;l=WOe(s,l,N),a(Lo(Lo(Lo({},t),e),m())),d=b,f()||(c=requestAnimationFrame(h))},x=function(b){u||(u=b);var w=(b-u)/n,N=Q1(function(S,A){return i4.apply(void 0,fV(A).concat([s(w)]))},o);if(a(Lo(Lo(Lo({},t),e),N)),w<1)c=requestAnimationFrame(h);else{var C=Q1(function(S,A){return i4.apply(void 0,fV(A).concat([s(1)]))},o);a(Lo(Lo(Lo({},t),e),C))}};return h=s.isStepper?v:x,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}});function bv(t){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(t)}var HOe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function GOe(t,e){if(t==null)return{};var s=YOe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function YOe(t,e){if(t==null)return{};var s={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function Z6(t){return ZOe(t)||QOe(t)||XOe(t)||KOe()}function KOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XOe(t,e){if(t){if(typeof t=="string")return CT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return CT(t,e)}}function QOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZOe(t){if(Array.isArray(t))return CT(t)}function CT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function xV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function nu(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(s),!0).forEach(function(n){_1(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function _1(t,e,s){return e=Vte(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function JOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eIe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vte(n.key),n)}}function tIe(t,e,s){return e&&eIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vte(t){var e=rIe(t,"string");return bv(e)==="symbol"?e:String(e)}function rIe(t,e){if(bv(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(bv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}function kT(t,e){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kT(t,e)}function nIe(t){var e=aIe();return function(){var n=o4(t),a;if(e){var i=o4(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return _T(this,a)}}function _T(t,e){if(e&&(bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AT(t)}function AT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o4(t){return o4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},o4(t)}var Iu=(function(t){sIe(s,t);var e=nIe(s);function s(n,a){var i;JOe(this,s),i=e.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,m=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(AT(i)),i.changeStyle=i.changeStyle.bind(AT(i)),!l||f<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:u}),_T(i);if(h&&h.length)i.state={style:h[0].style};else if(d){if(typeof m=="function")return i.state={style:d},_T(i);i.state={style:c?_1({},c,d):d}}else i.state={style:{}};return i}return tIe(s,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,h=i.from,m=this.state.style;if(l){if(!o){var f={style:c?_1({},c,u):u};this.state&&m&&(c&&m[c]!==u||!c&&m!==u)&&this.setState(f);return}if(!(uOe(a.to,u)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||d?h:a.to;if(this.state&&m){var g={style:c?_1({},c,x):x};(c&&m[c]!==x||!c&&m!==x)&&this.setState(g)}this.runAnimation(nu(nu({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,f=qOe(o,l,$Oe(d),c,this.changeStyle),v=function(){i.stopJSAnimation=f()};this.manager.start([m,u,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,h=d.duration,m=h===void 0?0:h,f=function(x,g,b){if(b===0)return x;var w=g.duration,N=g.easing,C=N===void 0?"ease":N,S=g.style,A=g.properties,k=g.onAnimationEnd,E=b>0?o[b-1]:g,O=A||Object.keys(S);if(typeof C=="function"||C==="spring")return[].concat(Z6(x),[i.runJSAnimation.bind(i,{from:E.style,to:S,duration:w,easing:C}),w]);var $=uV(O,w,C),T=nu(nu(nu({},E.style),S),{},{transition:$});return[].concat(Z6(x),[T,w,k]).filter(jOe)};return this.manager.start([c].concat(Z6(o.reduce(f,[u,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=vOe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,f=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof f=="function"||d==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var x=l?_1({},l,c):c,g=uV(Object.keys(x),o,d);v.start([u,i,nu(nu({},x),{},{transition:g}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=GOe(a,HOe),d=j.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var h=function(f){var v=f.props,x=v.style,g=x===void 0?{}:x,b=v.className,w=j.cloneElement(f,nu(nu({},c),{},{style:nu(nu({},g),u),className:b}));return w};return d===1?h(j.Children.only(i)):ce.createElement("div",null,j.Children.map(i,function(m){return h(m)}))}}]),s})(j.PureComponent);Iu.displayName="Animate";Iu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Iu.propTypes={from:ss.oneOfType([ss.object,ss.string]),to:ss.oneOfType([ss.object,ss.string]),attributeName:ss.string,duration:ss.number,begin:ss.number,easing:ss.oneOfType([ss.string,ss.func]),steps:ss.arrayOf(ss.shape({duration:ss.number.isRequired,style:ss.object.isRequired,easing:ss.oneOfType([ss.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ss.func]),properties:ss.arrayOf("string"),onAnimationEnd:ss.func})),children:ss.oneOfType([ss.node,ss.func]),isActive:ss.bool,canBegin:ss.bool,onAnimationEnd:ss.func,shouldReAnimate:ss.bool,onAnimationStart:ss.func,onAnimationReStart:ss.func};function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function l4(){return l4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},l4.apply(this,arguments)}function iIe(t,e){return dIe(t)||cIe(t,e)||lIe(t,e)||oIe()}function oIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lIe(t,e){if(t){if(typeof t=="string")return gV(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return gV(t,e)}}function gV(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function cIe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function dIe(t){if(Array.isArray(t))return t}function vV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function yV(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(s),!0).forEach(function(n){uIe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):vV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function uIe(t,e,s){return e=hIe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function hIe(t){var e=mIe(t,"string");return Gb(e)=="symbol"?e:e+""}function mIe(t,e){if(Gb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Gb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bV=function(e,s,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,f=4;m<f;m++)h[m]=i[m]>o?o:i[m];u="M".concat(e,",").concat(s+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(s)),u+="L ".concat(e+n-c*h[1],",").concat(s),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(s+l*h[1])),u+="L ".concat(e+n,",").concat(s+a-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-c*h[2],",").concat(s+a)),u+="L ".concat(e+c*h[3],",").concat(s+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(s+a-l*h[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);u="M ".concat(e,",").concat(s+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+c*v,",").concat(s,`
            L `).concat(e+n-c*v,",").concat(s,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n,",").concat(s+l*v,`
            L `).concat(e+n,",").concat(s+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n-c*v,",").concat(s+a,`
            L `).concat(e+c*v,",").concat(s+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(s+a-l*v," Z")}else u="M ".concat(e,",").concat(s," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},fIe=function(e,s){if(!e||!s)return!1;var n=e.x,a=e.y,i=s.x,o=s.y,l=s.width,c=s.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return n>=d&&n<=u&&a>=h&&a<=m}return!1},pIe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m8=function(e){var s=yV(yV({},pIe),e),n=j.useRef(),a=j.useState(-1),i=iIe(a,2),o=i[0],l=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&l(C)}catch{}},[]);var c=s.x,d=s.y,u=s.width,h=s.height,m=s.radius,f=s.className,v=s.animationEasing,x=s.animationDuration,g=s.animationBegin,b=s.isAnimationActive,w=s.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var N=Rs("recharts-rectangle",f);return w?ce.createElement(Iu,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:x,animationEasing:v,isActive:w},function(C){var S=C.width,A=C.height,k=C.x,E=C.y;return ce.createElement(Iu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,isActive:b,easing:v},ce.createElement("path",l4({},rs(s,!0),{className:N,d:bV(k,E,S,A,m),ref:n})))}):ce.createElement("path",l4({},rs(s,!0),{className:N,d:bV(c,d,u,h,m)}))},xIe=["points","className","baseLinePoints","connectNulls"];function P0(){return P0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},P0.apply(this,arguments)}function gIe(t,e){if(t==null)return{};var s=vIe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function vIe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function wV(t){return jIe(t)||wIe(t)||bIe(t)||yIe()}function yIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bIe(t,e){if(t){if(typeof t=="string")return ET(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ET(t,e)}}function wIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jIe(t){if(Array.isArray(t))return ET(t)}function ET(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var jV=function(e){return e&&e.x===+e.x&&e.y===+e.y},NIe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=[[]];return e.forEach(function(n){jV(n)?s[s.length-1].push(n):s[s.length-1].length>0&&s.push([])}),jV(e[0])&&s[s.length-1].push(e[0]),s[s.length-1].length<=0&&(s=s.slice(0,-1)),s},Z1=function(e,s){var n=NIe(e);s&&(n=[n.reduce(function(i,o){return[].concat(wV(i),wV(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},SIe=function(e,s,n){var a=Z1(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Z1(s.reverse(),n).slice(1))},CIe=function(e){var s=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=gIe(e,xIe);if(!s||!s.length)return null;var l=Rs("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=SIe(s,a,i);return ce.createElement("g",{className:l},ce.createElement("path",P0({},rs(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?ce.createElement("path",P0({},rs(o,!0),{fill:"none",d:Z1(s,i)})):null,c?ce.createElement("path",P0({},rs(o,!0),{fill:"none",d:Z1(a,i)})):null)}var u=Z1(s,i);return ce.createElement("path",P0({},rs(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function PT(){return PT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},PT.apply(this,arguments)}var Dw=function(e){var s=e.cx,n=e.cy,a=e.r,i=e.className,o=Rs("recharts-dot",i);return s===+s&&n===+n&&a===+a?j.createElement("circle",PT({},rs(e,!1),TN(e),{className:o,cx:s,cy:n,r:a})):null};function Yb(t){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(t)}var kIe=["x","y","top","left","width","height","className"];function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},TT.apply(this,arguments)}function NV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function _Ie(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(s),!0).forEach(function(n){AIe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):NV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function AIe(t,e,s){return e=EIe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function EIe(t){var e=PIe(t,"string");return Yb(e)=="symbol"?e:e+""}function PIe(t,e){if(Yb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Yb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TIe(t,e){if(t==null)return{};var s=OIe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function OIe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}var IIe=function(e,s,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(s,"h").concat(n)},$Ie=function(e){var s=e.x,n=s===void 0?0:s,a=e.y,i=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,h=u===void 0?0:u,m=e.height,f=m===void 0?0:m,v=e.className,x=TIe(e,kIe),g=_Ie({x:n,y:i,top:l,left:d,width:h,height:f},x);return!er(n)||!er(i)||!er(h)||!er(f)||!er(l)||!er(d)?null:ce.createElement("path",TT({},rs(g,!0),{className:Rs("recharts-cross",v),d:IIe(n,i,h,f,l,d)}))},J6,SV;function DIe(){if(SV)return J6;SV=1;var t=F5(),e=nte(),s=Rh();function n(a,i){return a&&a.length?t(a,s(i,2),e):void 0}return J6=n,J6}var RIe=DIe();const MIe=cn(RIe);var eA,CV;function LIe(){if(CV)return eA;CV=1;var t=F5(),e=Rh(),s=ate();function n(a,i){return a&&a.length?t(a,e(i,2),s):void 0}return eA=n,eA}var FIe=LIe();const BIe=cn(FIe);var UIe=["cx","cy","angle","ticks","axisLine"],zIe=["ticks","tick","angle","tickFormatter","stroke"];function wv(t){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(t)}function J1(){return J1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},J1.apply(this,arguments)}function kV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function ex(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(s),!0).forEach(function(n){V5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):kV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function _V(t,e){if(t==null)return{};var s=VIe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function VIe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function WIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AV(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qte(n.key),n)}}function qIe(t,e,s){return e&&AV(t.prototype,e),s&&AV(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function HIe(t,e,s){return e=c4(e),GIe(t,Wte()?Reflect.construct(e,s||[],c4(t).constructor):e.apply(t,s))}function GIe(t,e){if(e&&(wv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YIe(t)}function YIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wte=function(){return!!t})()}function c4(t){return c4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},c4(t)}function KIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OT(t,e)}function OT(t,e){return OT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OT(t,e)}function V5(t,e,s){return e=qte(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function qte(t){var e=XIe(t,"string");return wv(e)=="symbol"?e:e+""}function XIe(t,e){if(wv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W5=(function(t){function e(){return WIe(this,e),HIe(this,e,arguments)}return KIe(e,t),qIe(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Sa(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=MIe(l,function(u){return u.coordinate||0}),d=BIe(l,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=_V(n,UIe),u=l.reduce(function(v,x){return[Math.min(v[0],x.coordinate),Math.max(v[1],x.coordinate)]},[1/0,-1/0]),h=Sa(a,i,u[0],o),m=Sa(a,i,u[1],o),f=ex(ex(ex({},rs(d,!1)),{},{fill:"none"},rs(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return ce.createElement("line",J1({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=_V(a,zIe),h=this.getTickTextAnchor(),m=rs(u,!1),f=rs(o,!1),v=i.map(function(x,g){var b=n.getTickValueCoord(x),w=ex(ex(ex(ex({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},m),{},{stroke:"none",fill:d},f),{},{index:g},b),{},{payload:x});return ce.createElement(nn,J1({className:Rs("recharts-polar-radius-axis-tick",Ite(o)),key:"tick-".concat(x.coordinate)},Qx(n.props,x,g)),e.renderTickItem(o,w,c?c(x.value,g):x.value))});return ce.createElement(nn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:ce.createElement(nn,{className:Rs("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),So.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ce.isValidElement(n)?o=ce.cloneElement(n,a):xs(n)?o=n(a):o=ce.createElement(Zx,J1({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(j.PureComponent);V5(W5,"displayName","PolarRadiusAxis");V5(W5,"axisType","radiusAxis");V5(W5,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}function gx(){return gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},gx.apply(this,arguments)}function EV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function tx(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(s),!0).forEach(function(n){q5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):EV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function QIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PV(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gte(n.key),n)}}function ZIe(t,e,s){return e&&PV(t.prototype,e),s&&PV(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function JIe(t,e,s){return e=d4(e),e$e(t,Hte()?Reflect.construct(e,s||[],d4(t).constructor):e.apply(t,s))}function e$e(t,e){if(e&&(jv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t$e(t)}function t$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hte=function(){return!!t})()}function d4(t){return d4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},d4(t)}function r$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IT(t,e)}function IT(t,e){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},IT(t,e)}function q5(t,e,s){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Gte(t){var e=s$e(t,"string");return jv(e)=="symbol"?e:e+""}function s$e(t,e){if(jv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var n$e=Math.PI/180,TV=1e-5,H5=(function(t){function e(){return QIe(this,e),JIe(this,e,arguments)}return r$e(e,t),ZIe(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=Sa(i,o,l,n.coordinate),m=Sa(i,o,l+(c==="inner"?-1:1)*u,n.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*n$e),o;return i>TV?o=a==="outer"?"start":"end":i<-TV?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=tx(tx({},rs(this.props,!1)),{},{fill:"none"},rs(l,!1));if(c==="circle")return ce.createElement(Dw,gx({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var u=this.props.ticks,h=u.map(function(m){return Sa(a,i,o,m.coordinate)});return ce.createElement(CIe,gx({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=rs(this.props,!1),h=rs(o,!1),m=tx(tx({},u),{},{fill:"none"},rs(l,!1)),f=i.map(function(v,x){var g=n.getTickLineCoord(v),b=n.getTickTextAnchor(v),w=tx(tx(tx({textAnchor:b},u),{},{stroke:"none",fill:d},h),{},{index:x,payload:v,x:g.x2,y:g.y2});return ce.createElement(nn,gx({className:Rs("recharts-polar-angle-axis-tick",Ite(o)),key:"tick-".concat(v.coordinate)},Qx(n.props,v,x)),l&&ce.createElement("line",gx({className:"recharts-polar-angle-axis-tick-line"},m,g)),o&&e.renderTickItem(o,w,c?c(v.value,x):v.value))});return ce.createElement(nn,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:ce.createElement(nn,{className:Rs("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ce.isValidElement(n)?o=ce.cloneElement(n,a):xs(n)?o=n(a):o=ce.createElement(Zx,gx({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(j.PureComponent);q5(H5,"displayName","PolarAngleAxis");q5(H5,"axisType","angleAxis");q5(H5,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var tA,OV;function a$e(){if(OV)return tA;OV=1;var t=see(),e=t(Object.getPrototypeOf,Object);return tA=e,tA}var rA,IV;function i$e(){if(IV)return rA;IV=1;var t=Lm(),e=a$e(),s=Fm(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!s(u)||t(u)!=n)return!1;var h=e(u);if(h===null)return!0;var m=l.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return rA=d,rA}var o$e=i$e();const l$e=cn(o$e);var sA,$V;function c$e(){if($V)return sA;$V=1;var t=Lm(),e=Fm(),s="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==s}return sA=n,sA}var d$e=c$e();const u$e=cn(d$e);function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}function u4(){return u4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},u4.apply(this,arguments)}function h$e(t,e){return x$e(t)||p$e(t,e)||f$e(t,e)||m$e()}function m$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f$e(t,e){if(t){if(typeof t=="string")return DV(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return DV(t,e)}}function DV(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function p$e(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function x$e(t){if(Array.isArray(t))return t}function RV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function MV(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(s),!0).forEach(function(n){g$e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):RV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function g$e(t,e,s){return e=v$e(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function v$e(t){var e=y$e(t,"string");return Kb(e)=="symbol"?e:e+""}function y$e(t,e){if(Kb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Kb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LV=function(e,s,n,a,i){var o=n-a,l;return l="M ".concat(e,",").concat(s),l+="L ".concat(e+n,",").concat(s),l+="L ".concat(e+n-o/2,",").concat(s+i),l+="L ".concat(e+n-o/2-a,",").concat(s+i),l+="L ".concat(e,",").concat(s," Z"),l},b$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w$e=function(e){var s=MV(MV({},b$e),e),n=j.useRef(),a=j.useState(-1),i=h$e(a,2),o=i[0],l=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&l(N)}catch{}},[]);var c=s.x,d=s.y,u=s.upperWidth,h=s.lowerWidth,m=s.height,f=s.className,v=s.animationEasing,x=s.animationDuration,g=s.animationBegin,b=s.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||m!==+m||u===0&&h===0||m===0)return null;var w=Rs("recharts-trapezoid",f);return b?ce.createElement(Iu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:m,x:c,y:d},duration:x,animationEasing:v,isActive:b},function(N){var C=N.upperWidth,S=N.lowerWidth,A=N.height,k=N.x,E=N.y;return ce.createElement(Iu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,easing:v},ce.createElement("path",u4({},rs(s,!0),{className:w,d:LV(k,E,C,S,A),ref:n})))}):ce.createElement("g",null,ce.createElement("path",u4({},rs(s,!0),{className:w,d:LV(c,d,u,h,m)})))},j$e=["option","shapeType","propTransformer","activeClassName","isActive"];function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function N$e(t,e){if(t==null)return{};var s=S$e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function S$e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function FV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function h4(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(s),!0).forEach(function(n){C$e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):FV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function C$e(t,e,s){return e=k$e(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function k$e(t){var e=_$e(t,"string");return Xb(e)=="symbol"?e:e+""}function _$e(t,e){if(Xb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Xb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A$e(t,e){return h4(h4({},e),t)}function E$e(t,e){return t==="symbols"}function BV(t){var e=t.shapeType,s=t.elementProps;switch(e){case"rectangle":return ce.createElement(m8,s);case"trapezoid":return ce.createElement(w$e,s);case"sector":return ce.createElement(Rte,s);case"symbols":if(E$e(e))return ce.createElement(T$,s);break;default:return null}}function P$e(t){return j.isValidElement(t)?t.props:t}function Yte(t){var e=t.option,s=t.shapeType,n=t.propTransformer,a=n===void 0?A$e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=N$e(t,j$e),d;if(j.isValidElement(e))d=j.cloneElement(e,h4(h4({},c),P$e(e)));else if(xs(e))d=e(c);else if(l$e(e)&&!u$e(e)){var u=a(e,c);d=ce.createElement(BV,{shapeType:s,elementProps:u})}else{var h=c;d=ce.createElement(BV,{shapeType:s,elementProps:h})}return l?ce.createElement(nn,{className:o},d):d}function G5(t,e){return e!=null&&"trapezoids"in t.props}function Y5(t,e){return e!=null&&"sectors"in t.props}function Qb(t,e){return e!=null&&"points"in t.props}function T$e(t,e){var s,n,a=t.x===(e==null||(s=e.labelViewBox)===null||s===void 0?void 0:s.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function O$e(t,e){var s=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return s&&n}function I$e(t,e){var s=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return s&&n&&a}function $$e(t,e){var s;return G5(t,e)?s=T$e:Y5(t,e)?s=O$e:Qb(t,e)&&(s=I$e),s}function D$e(t,e){var s;return G5(t,e)?s="trapezoids":Y5(t,e)?s="sectors":Qb(t,e)&&(s="points"),s}function R$e(t,e){if(G5(t,e)){var s;return(s=e.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}if(Y5(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Qb(t,e)?e.payload:{}}function M$e(t){var e=t.activeTooltipItem,s=t.graphicalItem,n=t.itemData,a=D$e(s,e),i=R$e(s,e),o=n.filter(function(c,d){var u=Jx(i,c),h=s.props[a].filter(function(v){var x=$$e(s,e);return x(v,e)}),m=s.props[a].indexOf(h[h.length-1]),f=d===m;return u&&f}),l=n.indexOf(o[o.length-1]);return l}var Hj;function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function T0(){return T0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},T0.apply(this,arguments)}function UV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function ba(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?UV(Object(s),!0).forEach(function(n){Cd(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):UV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function L$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zV(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xte(n.key),n)}}function F$e(t,e,s){return e&&zV(t.prototype,e),s&&zV(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function B$e(t,e,s){return e=m4(e),U$e(t,Kte()?Reflect.construct(e,s||[],m4(t).constructor):e.apply(t,s))}function U$e(t,e){if(e&&(Nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z$e(t)}function z$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kte=function(){return!!t})()}function m4(t){return m4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},m4(t)}function V$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}function $T(t,e){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$T(t,e)}function Cd(t,e,s){return e=Xte(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Xte(t){var e=W$e(t,"string");return Nv(e)=="symbol"?e:e+""}function W$e(t,e){if(Nv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Um=(function(t){function e(s){var n;return L$e(this,e),n=B$e(this,e,[s]),Cd(n,"pieRef",null),Cd(n,"sectorRefs",[]),Cd(n,"id",gg("recharts-pie-")),Cd(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),xs(a)&&a()}),Cd(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),xs(a)&&a()}),n.state={isAnimationFinished:!s.isAnimationActive,prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,sectorToFocus:0},n}return V$e(e,t),F$e(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=rs(this.props,!1),h=rs(o,!1),m=rs(l,!1),f=o&&o.offsetRadius||20,v=n.map(function(x,g){var b=(x.startAngle+x.endAngle)/2,w=Sa(x.cx,x.cy,x.outerRadius+f,b),N=ba(ba(ba(ba({},u),x),{},{stroke:"none"},h),{},{index:g,textAnchor:e.getTextAnchor(w.x,x.cx)},w),C=ba(ba(ba(ba({},u),x),{},{fill:"none",stroke:x.fill},m),{},{index:g,points:[Sa(x.cx,x.cy,x.outerRadius,b),w]}),S=c;return Os(c)&&Os(d)?S="value":Os(c)&&(S=d),ce.createElement(nn,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,N,_i(x,S)))});return ce.createElement(nn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var h=a.isActiveIndex(u),m=c&&a.hasActiveIndex()?c:null,f=h?o:m,v=ba(ba({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return ce.createElement(nn,T0({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Qx(a.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),ce.createElement(Yte,T0({option:f,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,m=h.prevSectors,f=h.prevIsAnimationActive;return ce.createElement(Iu,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var x=v.t,g=[],b=i&&i[0],w=b.startAngle;return i.forEach(function(N,C){var S=m&&m[C],A=C>0?Vc(N,"paddingAngle",0):0;if(S){var k=Zi(S.endAngle-S.startAngle,N.endAngle-N.startAngle),E=ba(ba({},N),{},{startAngle:w+A,endAngle:w+k(x)+A});g.push(E),w=E.endAngle}else{var O=N.endAngle,$=N.startAngle,T=Zi(0,O-$),I=T(x),L=ba(ba({},N),{},{startAngle:w+A,endAngle:w+I+A});g.push(L),w=L.endAngle}}),ce.createElement(nn,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Jx(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,m=a.outerRadius,f=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!er(d)||!er(u)||!er(h)||!er(m))return null;var x=Rs("recharts-pie",l);return ce.createElement(nn,{tabIndex:this.props.rootTabIndex,className:x,ref:function(b){n.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),So.renderCallByParent(this.props,null,!1),(!f||v)&&Nh.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(ce.isValidElement(n))return ce.cloneElement(n,a);if(xs(n))return n(a);var o=Rs("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ce.createElement(Lx,T0({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(ce.isValidElement(n))return ce.cloneElement(n,a);var o=i;if(xs(n)&&(o=n(a),ce.isValidElement(o)))return o;var l=Rs("recharts-pie-label-text",typeof n!="boolean"&&!xs(n)?n.className:"");return ce.createElement(Zx,T0({},a,{alignmentBaseline:"middle",className:l}),o)}}])})(j.PureComponent);Hj=Um;Cd(Um,"displayName","Pie");Cd(Um,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!fp.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Cd(Um,"parseDeltaAngle",function(t,e){var s=Pl(e-t),n=Math.min(Math.abs(e-t),360);return s*n});Cd(Um,"getRealPieData",function(t){var e=t.data,s=t.children,n=rs(t,!1),a=Wc(s,O5);return e&&e.length?e.map(function(i,o){return ba(ba(ba({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return ba(ba({},n),i.props)}):[]});Cd(Um,"parseCoordinateOfPie",function(t,e){var s=e.top,n=e.left,a=e.width,i=e.height,o=Ote(a,i),l=n+Tl(t.cx,a,a/2),c=s+Tl(t.cy,i,i/2),d=Tl(t.innerRadius,o,0),u=Tl(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});Cd(Um,"getComposedData",function(t){var e=t.item,s=t.offset,n=e.type.defaultProps!==void 0?ba(ba({},e.type.defaultProps),e.props):e.props,a=Hj.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,h=n.valueKey,m=n.tooltipType,f=Math.abs(n.minAngle),v=Hj.parseCoordinateOfPie(n,s),x=Hj.parseDeltaAngle(o,l),g=Math.abs(x),b=d;Os(d)&&Os(h)?(Au(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Os(d)&&(Au(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var w=a.filter(function(E){return _i(E,b,0)!==0}).length,N=(g>=360?w:w-1)*c,C=g-w*f-N,S=a.reduce(function(E,O){var $=_i(O,b,0);return E+(er($)?$:0)},0),A;if(S>0){var k;A=a.map(function(E,O){var $=_i(E,b,0),T=_i(E,u,O),I=(er($)?$:0)/S,L;O?L=k.endAngle+Pl(x)*c*($!==0?1:0):L=o;var z=L+Pl(x)*(($!==0?f:0)+I*C),M=(L+z)/2,V=(v.innerRadius+v.outerRadius)/2,B=[{name:T,value:$,payload:E,dataKey:b,type:m}],F=Sa(v.cx,v.cy,V,M);return k=ba(ba(ba({percent:I,cornerRadius:i,name:T,tooltipPayload:B,midAngle:M,middleRadius:V,tooltipPosition:F},E),v),{},{value:_i(E,b),startAngle:L,endAngle:z,payload:E,paddingAngle:Pl(x)*c}),k})}return ba(ba({},v),{},{sectors:A,data:a})});var nA,VV;function q$e(){if(VV)return nA;VV=1;var t=Math.ceil,e=Math.max;function s(n,a,i,o){for(var l=-1,c=e(t((a-n)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=n,n+=i;return d}return nA=s,nA}var aA,WV;function Qte(){if(WV)return aA;WV=1;var t=yee(),e=1/0,s=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*s}return a===a?a:0}return aA=n,aA}var iA,qV;function H$e(){if(qV)return iA;qV=1;var t=q$e(),e=T5(),s=Qte();function n(a){return function(i,o,l){return l&&typeof l!="number"&&e(i,o,l)&&(o=l=void 0),i=s(i),o===void 0?(o=i,i=0):o=s(o),l=l===void 0?i<o?1:-1:s(l),t(i,o,l,a)}}return iA=n,iA}var oA,HV;function G$e(){if(HV)return oA;HV=1;var t=H$e(),e=t();return oA=e,oA}var Y$e=G$e();const f4=cn(Y$e);function Zb(t){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(t)}function GV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function YV(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(s),!0).forEach(function(n){Zte(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):GV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Zte(t,e,s){return e=K$e(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function K$e(t){var e=X$e(t,"string");return Zb(e)=="symbol"?e:e+""}function X$e(t,e){if(Zb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Zb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q$e=["Webkit","Moz","O","ms"],Z$e=function(e,s){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Q$e.reduce(function(i,o){return YV(YV({},i),{},Zte({},o+n,s))},{});return a[e]=s,a};function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function p4(){return p4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},p4.apply(this,arguments)}function KV(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function lA(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(s),!0).forEach(function(n){Ac(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):KV(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function J$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XV(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ere(n.key),n)}}function e8e(t,e,s){return e&&XV(t.prototype,e),s&&XV(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function t8e(t,e,s){return e=x4(e),r8e(t,Jte()?Reflect.construct(e,s||[],x4(t).constructor):e.apply(t,s))}function r8e(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s8e(t)}function s8e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jte=function(){return!!t})()}function x4(t){return x4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},x4(t)}function n8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},DT(t,e)}function Ac(t,e,s){return e=ere(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ere(t){var e=a8e(t,"string");return Sv(e)=="symbol"?e:e+""}function a8e(t,e){if(Sv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var i8e=function(e){var s=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!s||!s.length)return{};var c=s.length,d=K1().domain(f4(0,c)).range([i,i+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},QV=function(e){return e.changedTouches&&!!e.changedTouches.length},Cv=(function(t){function e(s){var n;return J$e(this,e),n=t8e(this,e,[s]),Ac(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ac(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ac(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Ac(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ac(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ac(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ac(n,"handleSlideDragStart",function(a){var i=QV(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return n8e(e,t),e8e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(a,i),m=Math.max(a,i),f=e.getIndexInRange(o,h),v=e.getIndexInRange(o,m);return{startIndex:f-f%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=_i(i[n],l,n);return xs(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,m=c.startIndex,f=c.endIndex,v=c.onChange,x=n.pageX-i;x>0?x=Math.min(x,d+u-h-l,d+u-h-o):x<0&&(x=Math.max(x,d-o,d-l));var g=this.getIndex({startX:o+x,endX:l+x});(g.startIndex!==m||g.endIndex!==f)&&v&&v(g),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=QV(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,h=u.x,m=u.width,f=u.travellerWidth,v=u.onChange,x=u.gap,g=u.data,b={startX:this.state.startX,endX:this.state.endX},w=n.pageX-i;w>0?w=Math.min(w,h+m-f-d):w<0&&(w=Math.max(w,h-d)),b[o]=d+w;var N=this.getIndex(b),C=N.startIndex,S=N.endIndex,A=function(){var E=g.length-1;return o==="startX"&&(l>c?C%x===0:S%x===0)||l<c&&S===E||o==="endX"&&(l>c?S%x===0:C%x===0)||l>c&&S===E};this.setState(Ac(Ac({},o,d+w),"brushMoveStartX",n.pageX),function(){v&&A()&&v(N)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],h=l.indexOf(u);if(h!==-1){var m=h+n;if(!(m===-1||m>=l.length)){var f=l[m];a==="startX"&&f>=d||a==="endX"&&f<=c||this.setState(Ac({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return ce.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,u=n.padding,h=j.Children.only(d);return h?ce.cloneElement(h,{x:a,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,m=c.traveller,f=c.ariaLabel,v=c.data,x=c.startIndex,g=c.endIndex,b=Math.max(n,this.props.x),w=lA(lA({},rs(this.props,!1)),{},{x:b,y:d,width:u,height:h}),N=f||"Min value: ".concat((i=v[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return ce.createElement(nn,{tabIndex:0,role:"slider","aria-label":N,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,w))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,a)+d,h=Math.max(Math.abs(a-n)-d,0);return ce.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,h=u.startX,m=u.endX,f=5,v={pointerEvents:"none",fill:d};return ce.createElement(nn,{className:"recharts-brush-texts"},ce.createElement(Zx,p4({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-f,y:o+l/2},v),this.getTextOfTick(a)),ce.createElement(Zx,p4({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+f,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,u=n.height,h=n.alwaysShowText,m=this.state,f=m.startX,v=m.endX,x=m.isTextActive,g=m.isSlideMoving,b=m.isTravellerMoving,w=m.isTravellerFocused;if(!a||!a.length||!er(l)||!er(c)||!er(d)||!er(u)||d<=0||u<=0)return null;var N=Rs("recharts-brush",i),C=ce.Children.count(o)===1,S=Z$e("userSelect","none");return ce.createElement(nn,{className:N,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(f,v),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(v,"endX"),(x||g||b||w||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return ce.createElement(ce.Fragment,null,ce.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),ce.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),ce.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ce.isValidElement(n)?i=ce.cloneElement(n,a):xs(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,h=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return lA({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?i8e({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])})(j.PureComponent);Ac(Cv,"displayName","Brush");Ac(Cv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cA,ZV;function o8e(){if(ZV)return cA;ZV=1;var t=L$();function e(s,n){var a;return t(s,function(i,o,l){return a=n(i,o,l),!a}),!!a}return cA=e,cA}var dA,JV;function l8e(){if(JV)return dA;JV=1;var t=XJ(),e=Rh(),s=o8e(),n=cc(),a=T5();function i(o,l,c){var d=n(o)?t:s;return c&&a(o,l,c)&&(l=void 0),d(o,e(l,3))}return dA=i,dA}var c8e=l8e();const d8e=cn(c8e);var Sh=function(e,s){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===s},uA,eW;function u8e(){if(eW)return uA;eW=1;var t=fee();function e(s,n,a){n=="__proto__"&&t?t(s,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):s[n]=a}return uA=e,uA}var hA,tW;function h8e(){if(tW)return hA;tW=1;var t=u8e(),e=hee(),s=Rh();function n(a,i){var o={};return i=s(i,3),e(a,function(l,c,d){t(o,c,i(l,c,d))}),o}return hA=n,hA}var m8e=h8e();const f8e=cn(m8e);var mA,rW;function p8e(){if(rW)return mA;rW=1;function t(e,s){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!s(e[n],n,e))return!1;return!0}return mA=t,mA}var fA,sW;function x8e(){if(sW)return fA;sW=1;var t=L$();function e(s,n){var a=!0;return t(s,function(i,o,l){return a=!!n(i,o,l),a}),a}return fA=e,fA}var pA,nW;function g8e(){if(nW)return pA;nW=1;var t=p8e(),e=x8e(),s=Rh(),n=cc(),a=T5();function i(o,l,c){var d=n(o)?t:e;return c&&a(o,l,c)&&(l=void 0),d(o,s(l,3))}return pA=i,pA}var v8e=g8e();const tre=cn(v8e);var y8e=["x","y"];function Jb(t){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(t)}function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},RT.apply(this,arguments)}function aW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function s1(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?aW(Object(s),!0).forEach(function(n){b8e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):aW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function b8e(t,e,s){return e=w8e(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function w8e(t){var e=j8e(t,"string");return Jb(e)=="symbol"?e:e+""}function j8e(t,e){if(Jb(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Jb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N8e(t,e){if(t==null)return{};var s=S8e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function S8e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function C8e(t,e){var s=t.x,n=t.y,a=N8e(t,y8e),i="".concat(s),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(e.height||a.height),u=parseInt(d,10),h="".concat(e.width||a.width),m=parseInt(h,10);return s1(s1(s1(s1(s1({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:m,name:e.name,radius:e.radius})}function iW(t){return ce.createElement(Yte,RT({shapeType:"rectangle",propTransformer:C8e,activeClassName:"recharts-active-bar"},t))}var k8e=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=er(n)||Q5e(n);return i?e(n,a):(i||tg(),s)}},_8e=["value","background"],rre;function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function A8e(t,e){if(t==null)return{};var s=E8e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function E8e(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function g4(){return g4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},g4.apply(this,arguments)}function oW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function $i(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?oW(Object(s),!0).forEach(function(n){Bf(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):oW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function P8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lW(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nre(n.key),n)}}function T8e(t,e,s){return e&&lW(t.prototype,e),s&&lW(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function O8e(t,e,s){return e=v4(e),I8e(t,sre()?Reflect.construct(e,s||[],v4(t).constructor):e.apply(t,s))}function I8e(t,e){if(e&&(kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $8e(t)}function $8e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sre=function(){return!!t})()}function v4(t){return v4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},v4(t)}function D8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MT(t,e)}function MT(t,e){return MT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},MT(t,e)}function Bf(t,e,s){return e=nre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function nre(t){var e=R8e(t,"string");return kv(e)=="symbol"?e:e+""}function R8e(t,e){if(kv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rm=(function(t){function e(){var s;P8e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=O8e(this,e,[].concat(a)),Bf(s,"state",{isAnimationFinished:!1}),Bf(s,"id",gg("recharts-bar-")),Bf(s,"handleAnimationEnd",function(){var o=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),o&&o()}),Bf(s,"handleAnimationStart",function(){var o=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),o&&o()}),s}return D8e(e,t),T8e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=rs(this.props,!1);return n&&n.map(function(h,m){var f=m===c,v=f?d:o,x=$i($i($i({},u),h),{},{isActive:f,option:v,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ce.createElement(nn,g4({className:"recharts-bar-rectangle"},Qx(a.props,h,m),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(m)}),ce.createElement(iW,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,m=this.state.prevData;return ce.createElement(Iu,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var v=f.t,x=i.map(function(g,b){var w=m&&m[b];if(w){var N=Zi(w.x,g.x),C=Zi(w.y,g.y),S=Zi(w.width,g.width),A=Zi(w.height,g.height);return $i($i({},g),{},{x:N(v),y:C(v),width:S(v),height:A(v)})}if(o==="horizontal"){var k=Zi(0,g.height),E=k(v);return $i($i({},g),{},{y:g.y+g.height-E,height:E})}var O=Zi(0,g.width),$=O(v);return $i($i({},g),{},{width:$})});return ce.createElement(nn,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Jx(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=rs(this.props.background,!1);return i.map(function(d,u){d.value;var h=d.background,m=A8e(d,_8e);if(!h)return null;var f=$i($i($i($i($i({},m),{},{fill:"#eee"},h),c),Qx(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ce.createElement(iW,g4({key:"background-bar-".concat(u),option:n.props.background,isActive:u===l},f))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Wc(u,$w);if(!h)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,f=function(g,b){var w=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:w,errorVal:_i(g,b)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ce.createElement(nn,v,h.map(function(x){return ce.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,u=n.top,h=n.width,m=n.height,f=n.isAnimationActive,v=n.background,x=n.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,b=Rs("recharts-bar",o),w=l&&l.allowDataOverflow,N=c&&c.allowDataOverflow,C=w||N,S=Os(x)?this.id:x;return ce.createElement(nn,{className:b},w||N?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(S)},ce.createElement("rect",{x:w?d:d-h/2,y:N?u:u-m/2,width:w?h:h*2,height:N?m:m*2}))):null,ce.createElement(nn,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,S),(!f||g)&&Nh.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(j.PureComponent);rre=Rm;Bf(Rm,"displayName","Bar");Bf(Rm,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!fp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Bf(Rm,"getComposedData",function(t){var e=t.props,s=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,m=t.offset,f=uPe(n,s);if(!f)return null;var v=e.layout,x=s.type.defaultProps,g=x!==void 0?$i($i({},x),s.props):s.props,b=g.dataKey,w=g.children,N=g.minPointSize,C=v==="horizontal"?o:i,S=d?C.scale.domain():null,A=vPe({numericAxis:C}),k=Wc(w,O5),E=h.map(function(O,$){var T,I,L,z,M,V;d?T=hPe(d[u+$],S):(T=_i(O,b),Array.isArray(T)||(T=[A,T]));var B=k8e(N,rre.defaultProps.minPointSize)(T[1],$);if(v==="horizontal"){var F,J=[o.scale(T[0]),o.scale(T[1])],ee=J[0],q=J[1];I=Iz({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:O,index:$}),L=(F=q??ee)!==null&&F!==void 0?F:void 0,z=f.size;var U=ee-q;if(M=Number.isNaN(U)?0:U,V={x:I,y:o.y,width:z,height:o.height},Math.abs(B)>0&&Math.abs(M)<Math.abs(B)){var Z=Pl(M||B)*(Math.abs(B)-Math.abs(M));L-=Z,M+=Z}}else{var K=[i.scale(T[0]),i.scale(T[1])],se=K[0],ne=K[1];if(I=se,L=Iz({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:O,index:$}),z=ne-se,M=f.size,V={x:i.x,y:L,width:i.width,height:M},Math.abs(B)>0&&Math.abs(z)<Math.abs(B)){var ie=Pl(z||B)*(Math.abs(B)-Math.abs(z));z+=ie}}return $i($i($i({},O),{},{x:I,y:L,width:z,height:M,value:d?T:T[1],payload:O,background:V},k&&k[$]&&k[$].props),{},{tooltipPayload:[Pte(s,O)],tooltipPosition:{x:I+z/2,y:L+M/2}})});return $i({data:E,layout:v},m)});function ew(t){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(t)}function M8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cW(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,are(n.key),n)}}function L8e(t,e,s){return e&&cW(t.prototype,e),s&&cW(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function dW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function pu(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?dW(Object(s),!0).forEach(function(n){K5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function K5(t,e,s){return e=are(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function are(t){var e=F8e(t,"string");return ew(e)=="symbol"?e:e+""}function F8e(t,e){if(ew(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(ew(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f8=function(e,s,n,a,i){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(s),h={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!Ec(d,Rm);return u.reduce(function(f,v){var x=s[v],g=x.orientation,b=x.domain,w=x.padding,N=w===void 0?{}:w,C=x.mirror,S=x.reversed,A="".concat(g).concat(C?"Mirror":""),k,E,O,$,T;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var I=b[1]-b[0],L=1/0,z=x.categoricalDomain.sort(e3e);if(z.forEach(function(K,se){se>0&&(L=Math.min((K||0)-(z[se-1]||0),L))}),Number.isFinite(L)){var M=L/I,V=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(k=M*V/2),x.padding==="no-gap"){var B=Tl(e.barCategoryGap,M*V),F=M*V/2;k=F-B-(F-B)/V*B}}}a==="xAxis"?E=[n.left+(N.left||0)+(k||0),n.left+n.width-(N.right||0)-(k||0)]:a==="yAxis"?E=c==="horizontal"?[n.top+n.height-(N.bottom||0),n.top+(N.top||0)]:[n.top+(N.top||0)+(k||0),n.top+n.height-(N.bottom||0)-(k||0)]:E=x.range,S&&(E=[E[1],E[0]]);var J=kte(x,i,m),ee=J.scale,q=J.realScaleType;ee.domain(b).range(E),_te(ee);var U=Ate(ee,pu(pu({},x),{},{realScaleType:q}));a==="xAxis"?(T=g==="top"&&!C||g==="bottom"&&C,O=n.left,$=h[A]-T*x.height):a==="yAxis"&&(T=g==="left"&&!C||g==="right"&&C,O=h[A]-T*x.width,$=n.top);var Z=pu(pu(pu({},x),U),{},{realScaleType:q,x:O,y:$,scale:ee,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return Z.bandSize=r4(Z,U),!x.hide&&a==="xAxis"?h[A]+=(T?-1:1)*Z.height:x.hide||(h[A]+=(T?-1:1)*Z.width),pu(pu({},f),{},K5({},v,Z))},{})},ire=function(e,s){var n=e.x,a=e.y,i=s.x,o=s.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},B8e=function(e){var s=e.x1,n=e.y1,a=e.x2,i=e.y2;return ire({x:s,y:n},{x:a,y:i})},ore=(function(){function t(e){M8e(this,t),this.scale=e}return L8e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(s!==void 0){if(i)switch(i){case"start":return this.scale(s);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(s)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(s)+l}default:return this.scale(s)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(s)+c}return this.scale(s)}}},{key:"isInRange",value:function(s){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?s>=a&&s<=i:s>=i&&s<=a}}],[{key:"create",value:function(s){return new t(s)}}])})();K5(ore,"EPS",1e-4);var p8=function(e){var s=Object.keys(e).reduce(function(n,a){return pu(pu({},n),{},K5({},a,ore.create(e[a])))},{});return pu(pu({},s),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return f8e(a,function(c,d){return s[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return tre(a,function(i,o){return s[o].isInRange(i)})}})};function U8e(t){return(t%180+180)%180}var z8e=function(e){var s=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=U8e(a),o=i*Math.PI/180,l=Math.atan(n/s),c=o>l&&o<Math.PI-l?n/Math.sin(o):s/Math.cos(o);return Math.abs(c)},xA,uW;function V8e(){if(uW)return xA;uW=1;var t=Rh(),e=Ew(),s=E5();function n(a){return function(i,o,l){var c=Object(i);if(!e(i)){var d=t(o,3);i=s(i),o=function(h){return d(c[h],h,c)}}var u=a(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return xA=n,xA}var gA,hW;function W8e(){if(hW)return gA;hW=1;var t=Qte();function e(s){var n=t(s),a=n%1;return n===n?a?n-a:n:0}return gA=e,gA}var vA,mW;function q8e(){if(mW)return vA;mW=1;var t=oee(),e=Rh(),s=W8e(),n=Math.max;function a(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:s(l);return d<0&&(d=n(c+d,0)),t(i,e(o,3),d)}return vA=a,vA}var yA,fW;function H8e(){if(fW)return yA;fW=1;var t=V8e(),e=q8e(),s=t(e);return yA=s,yA}var G8e=H8e();const Y8e=cn(G8e);var K8e=jJ();const X8e=cn(K8e);var Q8e=X8e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),x8=j.createContext(void 0),g8=j.createContext(void 0),lre=j.createContext(void 0),cre=j.createContext({}),dre=j.createContext(void 0),ure=j.createContext(0),hre=j.createContext(0),pW=function(e){var s=e.state,n=s.xAxisMap,a=s.yAxisMap,i=s.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=Q8e(i);return ce.createElement(x8.Provider,{value:n},ce.createElement(g8.Provider,{value:a},ce.createElement(cre.Provider,{value:i},ce.createElement(lre.Provider,{value:u},ce.createElement(dre.Provider,{value:o},ce.createElement(ure.Provider,{value:d},ce.createElement(hre.Provider,{value:c},l)))))))},Z8e=function(){return j.useContext(dre)},mre=function(e){var s=j.useContext(x8);s==null&&tg();var n=s[e];return n==null&&tg(),n},J8e=function(){var e=j.useContext(x8);return Rf(e)},eDe=function(){var e=j.useContext(g8),s=Y8e(e,function(n){return tre(n.domain,Number.isFinite)});return s||Rf(e)},fre=function(e){var s=j.useContext(g8);s==null&&tg();var n=s[e];return n==null&&tg(),n},tDe=function(){var e=j.useContext(lre);return e},rDe=function(){return j.useContext(cre)},v8=function(){return j.useContext(hre)},y8=function(){return j.useContext(ure)};function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function sDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nDe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xre(n.key),n)}}function aDe(t,e,s){return e&&nDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iDe(t,e,s){return e=y4(e),oDe(t,pre()?Reflect.construct(e,s||[],y4(t).constructor):e.apply(t,s))}function oDe(t,e){if(e&&(_v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lDe(t)}function lDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pre=function(){return!!t})()}function y4(t){return y4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},y4(t)}function cDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LT(t,e)}function LT(t,e){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},LT(t,e)}function xW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function gW(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?xW(Object(s),!0).forEach(function(n){b8(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function b8(t,e,s){return e=xre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function xre(t){var e=dDe(t,"string");return _v(e)=="symbol"?e:e+""}function dDe(t,e){if(_v(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(_v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uDe(t,e){return pDe(t)||fDe(t,e)||mDe(t,e)||hDe()}function hDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mDe(t,e){if(t){if(typeof t=="string")return vW(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return vW(t,e)}}function vW(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function fDe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function pDe(t){if(Array.isArray(t))return t}function FT(){return FT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},FT.apply(this,arguments)}var xDe=function(e,s){var n;return ce.isValidElement(e)?n=ce.cloneElement(e,s):xs(e)?n=e(s):n=ce.createElement("line",FT({},s,{className:"recharts-reference-line-line"})),n},gDe=function(e,s,n,a,i,o,l,c,d){var u=i.x,h=i.y,m=i.width,f=i.height;if(n){var v=d.y,x=e.y.apply(v,{position:o});if(Sh(d,"discard")&&!e.y.isInRange(x))return null;var g=[{x:u+m,y:x},{x:u,y:x}];return c==="left"?g.reverse():g}if(s){var b=d.x,w=e.x.apply(b,{position:o});if(Sh(d,"discard")&&!e.x.isInRange(w))return null;var N=[{x:w,y:h+f},{x:w,y:h}];return l==="top"?N.reverse():N}if(a){var C=d.segment,S=C.map(function(A){return e.apply(A,{position:o})});return Sh(d,"discard")&&d8e(S,function(A){return!e.isInRange(A)})?null:S}return null};function vDe(t){var e=t.x,s=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=Z8e(),u=mre(a),h=fre(i),m=tDe();if(!d||!m)return null;Au(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=p8({x:u.scale,y:h.scale}),v=ro(e),x=ro(s),g=n&&n.length===2,b=gDe(f,v,x,g,m,t.position,u.orientation,h.orientation,t);if(!b)return null;var w=uDe(b,2),N=w[0],C=N.x,S=N.y,A=w[1],k=A.x,E=A.y,O=Sh(t,"hidden")?"url(#".concat(d,")"):void 0,$=gW(gW({clipPath:O},rs(t,!0)),{},{x1:C,y1:S,x2:k,y2:E});return ce.createElement(nn,{className:Rs("recharts-reference-line",l)},xDe(o,$),So.renderCallByParent(t,B8e({x1:C,y1:S,x2:k,y2:E})))}var w8=(function(t){function e(){return sDe(this,e),iDe(this,e,arguments)}return cDe(e,t),aDe(e,[{key:"render",value:function(){return ce.createElement(vDe,this.props)}}])})(ce.Component);b8(w8,"displayName","ReferenceLine");b8(w8,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function BT(){return BT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},BT.apply(this,arguments)}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function yW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function bW(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?yW(Object(s),!0).forEach(function(n){X5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):yW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function yDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bDe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vre(n.key),n)}}function wDe(t,e,s){return e&&bDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jDe(t,e,s){return e=b4(e),NDe(t,gre()?Reflect.construct(e,s||[],b4(t).constructor):e.apply(t,s))}function NDe(t,e){if(e&&(Av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SDe(t)}function SDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gre=function(){return!!t})()}function b4(t){return b4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},b4(t)}function CDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},UT(t,e)}function X5(t,e,s){return e=vre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function vre(t){var e=kDe(t,"string");return Av(e)=="symbol"?e:e+""}function kDe(t,e){if(Av(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _De=function(e){var s=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=p8({x:a.scale,y:i.scale}),l=o.apply({x:s,y:n},{bandAware:!0});return Sh(e,"discard")&&!o.isInRange(l)?null:l},Q5=(function(t){function e(){return yDe(this,e),jDe(this,e,arguments)}return CDe(e,t),wDe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=ro(a),u=ro(i);if(Au(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=_De(this.props);if(!h)return null;var m=h.x,f=h.y,v=this.props,x=v.shape,g=v.className,b=Sh(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=bW(bW({clipPath:b},rs(this.props,!0)),{},{cx:m,cy:f});return ce.createElement(nn,{className:Rs("recharts-reference-dot",g)},e.renderDot(x,w),So.renderCallByParent(this.props,{x:m-o,y:f-o,width:2*o,height:2*o}))}}])})(ce.Component);X5(Q5,"displayName","ReferenceDot");X5(Q5,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});X5(Q5,"renderDot",function(t,e){var s;return ce.isValidElement(t)?s=ce.cloneElement(t,e):xs(t)?s=t(e):s=ce.createElement(Dw,BT({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),s});function zT(){return zT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},zT.apply(this,arguments)}function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function wW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function jW(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?wW(Object(s),!0).forEach(function(n){Z5(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):wW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function ADe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EDe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bre(n.key),n)}}function PDe(t,e,s){return e&&EDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TDe(t,e,s){return e=w4(e),ODe(t,yre()?Reflect.construct(e,s||[],w4(t).constructor):e.apply(t,s))}function ODe(t,e){if(e&&(Ev(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IDe(t)}function IDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yre=function(){return!!t})()}function w4(t){return w4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},w4(t)}function $De(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VT(t,e)}function Z5(t,e,s){return e=bre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function bre(t){var e=DDe(t,"string");return Ev(e)=="symbol"?e:e+""}function DDe(t,e){if(Ev(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Ev(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var RDe=function(e,s,n,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,h=i.yAxis;if(!u||!h)return null;var m=p8({x:u.scale,y:h.scale}),f={x:e?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:s?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(d,{position:"end"}):m.y.rangeMax};return Sh(i,"discard")&&(!m.isInRange(f)||!m.isInRange(v))?null:ire(f,v)},J5=(function(t){function e(){return ADe(this,e),TDe(this,e,arguments)}return $De(e,t),PDe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Au(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ro(a),m=ro(i),f=ro(o),v=ro(l),x=this.props.shape;if(!h&&!m&&!f&&!v&&!x)return null;var g=RDe(h,m,f,v,this.props);if(!g&&!x)return null;var b=Sh(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ce.createElement(nn,{className:Rs("recharts-reference-area",c)},e.renderRect(x,jW(jW({clipPath:b},rs(this.props,!0)),g)),So.renderCallByParent(this.props,g))}}])})(ce.Component);Z5(J5,"displayName","ReferenceArea");Z5(J5,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Z5(J5,"renderRect",function(t,e){var s;return ce.isValidElement(t)?s=ce.cloneElement(t,e):xs(t)?s=t(e):s=ce.createElement(m8,zT({},e,{className:"recharts-reference-area-rect"})),s});function wre(t,e,s){if(e<1)return[];if(e===1&&s===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function MDe(t,e,s){var n={width:t.width+e.width,height:t.height+e.height};return z8e(n,s)}function LDe(t,e,s){var n=s==="width",a=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function j4(t,e,s,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=s();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function FDe(t,e){return wre(t,e+1)}function BDe(t,e,s,n,a){for(var i=(n||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,h=function(){var v=n?.[c];if(v===void 0)return{v:wre(n,d)};var x=c,g,b=function(){return g===void 0&&(g=s(v,x)),g},w=v.coordinate,N=c===0||j4(t,w,b,u,l);N||(c=0,u=o,d+=1),N&&(u=w+t*(b()/2+a),c+=d)},m;d<=i.length;)if(m=h(),m)return m.v;return[]}function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function NW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function al(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?NW(Object(s),!0).forEach(function(n){UDe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):NW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function UDe(t,e,s){return e=zDe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function zDe(t){var e=VDe(t,"string");return tw(e)=="symbol"?e:e+""}function VDe(t,e){if(tw(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(tw(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WDe(t,e,s,n,a){for(var i=(n||[]).slice(),o=i.length,l=e.start,c=e.end,d=function(m){var f=i[m],v,x=function(){return v===void 0&&(v=s(f,m)),v};if(m===o-1){var g=t*(f.coordinate+t*x()/2-c);i[m]=f=al(al({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate})}else i[m]=f=al(al({},f),{},{tickCoord:f.coordinate});var b=j4(t,f.tickCoord,x,l,c);b&&(c=f.tickCoord-t*(x()/2+a),i[m]=al(al({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function qDe(t,e,s,n,a,i){var o=(n||[]).slice(),l=o.length,c=e.start,d=e.end;if(i){var u=n[l-1],h=s(u,l-1),m=t*(u.coordinate+t*h/2-d);o[l-1]=u=al(al({},u),{},{tickCoord:m>0?u.coordinate-m*t:u.coordinate});var f=j4(t,u.tickCoord,function(){return h},c,d);f&&(d=u.tickCoord-t*(h/2+a),o[l-1]=al(al({},u),{},{isShow:!0}))}for(var v=i?l-1:l,x=function(w){var N=o[w],C,S=function(){return C===void 0&&(C=s(N,w)),C};if(w===0){var A=t*(N.coordinate-t*S()/2-c);o[w]=N=al(al({},N),{},{tickCoord:A<0?N.coordinate-A*t:N.coordinate})}else o[w]=N=al(al({},N),{},{tickCoord:N.coordinate});var k=j4(t,N.tickCoord,S,c,d);k&&(c=N.tickCoord+t*(S()/2+a),o[w]=al(al({},N),{},{isShow:!0}))},g=0;g<v;g++)x(g);return o}function j8(t,e,s){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,h=t.angle;if(!a||!a.length||!n)return[];if(er(c)||fp.isSsr)return FDe(a,typeof c=="number"&&er(c)?c:0);var m=[],f=l==="top"||l==="bottom"?"width":"height",v=u&&f==="width"?Y1(u,{fontSize:e,letterSpacing:s}):{width:0,height:0},x=function(N,C){var S=xs(d)?d(N.value,C):N.value;return f==="width"?MDe(Y1(S,{fontSize:e,letterSpacing:s}),v,h):Y1(S,{fontSize:e,letterSpacing:s})[f]},g=a.length>=2?Pl(a[1].coordinate-a[0].coordinate):1,b=LDe(i,g,f);return c==="equidistantPreserveStart"?BDe(g,b,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=qDe(g,b,x,a,o,c==="preserveStartEnd"):m=WDe(g,b,x,a,o),m.filter(function(w){return w.isShow}))}var HDe=["viewBox"],GDe=["viewBox"],YDe=["ticks"];function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},O0.apply(this,arguments)}function SW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Hi(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?SW(Object(s),!0).forEach(function(n){N8(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):SW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function bA(t,e){if(t==null)return{};var s=KDe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function KDe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function XDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CW(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nre(n.key),n)}}function QDe(t,e,s){return e&&CW(t.prototype,e),s&&CW(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZDe(t,e,s){return e=N4(e),JDe(t,jre()?Reflect.construct(e,s||[],N4(t).constructor):e.apply(t,s))}function JDe(t,e){if(e&&(Pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eRe(t)}function eRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jre=function(){return!!t})()}function N4(t){return N4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},N4(t)}function tRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WT(t,e)}function WT(t,e){return WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WT(t,e)}function N8(t,e,s){return e=Nre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Nre(t){var e=rRe(t,"string");return Pv(e)=="symbol"?e:e+""}function rRe(t,e){if(Pv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oy=(function(t){function e(s){var n;return XDe(this,e),n=ZDe(this,e,[s]),n.state={fontSize:"",letterSpacing:""},n}return tRe(e,t),QDe(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=bA(n,HDe),l=this.props,c=l.viewBox,d=bA(l,GDe);return!K0(i,c)||!K0(o,d)||!K0(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,m=a.tickMargin,f,v,x,g,b,w,N=h?-1:1,C=n.tickSize||u,S=er(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":f=v=n.coordinate,g=o+ +!h*c,x=g-N*C,w=x-N*m,b=S;break;case"left":x=g=n.coordinate,v=i+ +!h*l,f=v-N*C,b=f-N*m,w=S;break;case"right":x=g=n.coordinate,v=i+ +h*l,f=v+N*C,b=f+N*m,w=S;break;default:f=v=n.coordinate,g=o+ +h*c,x=g+N*C,w=x+N*m,b=S;break}return{line:{x1:f,y1:x,x2:v,y2:g},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,h=Hi(Hi(Hi({},rs(this.props,!1)),rs(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);h=Hi(Hi({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var f=+(c==="left"&&!d||c==="right"&&d);h=Hi(Hi({},h),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return ce.createElement("line",O0({},h,{className:Rs("recharts-cartesian-axis-line",Vc(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,m=l.unit,f=j8(Hi(Hi({},this.props),{},{ticks:n}),a,i),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),g=rs(this.props,!1),b=rs(u,!1),w=Hi(Hi({},g),{},{fill:"none"},rs(c,!1)),N=f.map(function(C,S){var A=o.getTickLineCoord(C),k=A.line,E=A.tick,O=Hi(Hi(Hi(Hi({textAnchor:v,verticalAnchor:x},g),{},{stroke:"none",fill:d},b),E),{},{index:S,payload:C,visibleTicksCount:f.length,tickFormatter:h});return ce.createElement(nn,O0({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Qx(o.props,C,S)),c&&ce.createElement("line",O0({},w,k,{className:Rs("recharts-cartesian-axis-tick-line",Vc(c,"className"))})),u&&e.renderTickItem(u,O,"".concat(xs(h)?h(C.value,S):C.value).concat(m||"")))});return ce.createElement("g",{className:"recharts-cartesian-axis-ticks"},N)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,m=h.ticks,f=bA(h,YDe),v=m;return xs(c)&&(v=m&&m.length>0?c(this.props):c(f)),o<=0||l<=0||!v||!v.length?null:ce.createElement(nn,{className:Rs("recharts-cartesian-axis",d),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),So.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=Rs(a.className,"recharts-cartesian-axis-tick-value");return ce.isValidElement(n)?o=ce.cloneElement(n,Hi(Hi({},a),{},{className:l})):xs(n)?o=n(Hi(Hi({},a),{},{className:l})):o=ce.createElement(Zx,O0({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(j.Component);N8(oy,"displayName","CartesianAxis");N8(oy,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sRe=["x1","y1","x2","y2","key"],nRe=["offset"];function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function kW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function ol(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?kW(Object(s),!0).forEach(function(n){aRe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):kW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function aRe(t,e,s){return e=iRe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function iRe(t){var e=oRe(t,"string");return rg(e)=="symbol"?e:e+""}function oRe(t,e){if(rg(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_x.apply(this,arguments)}function _W(t,e){if(t==null)return{};var s=lRe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function lRe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}var cRe=function(e){var s=e.fill;if(!s||s==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return ce.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:s,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Sre(t,e){var s;if(ce.isValidElement(t))s=ce.cloneElement(t,e);else if(xs(t))s=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,l=e.key,c=_W(e,sRe),d=rs(c,!1);d.offset;var u=_W(d,nRe);s=ce.createElement("line",_x({},u,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return s}function dRe(t){var e=t.x,s=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ol(ol({},t),{},{x1:e,y1:l,x2:e+s,y2:l,key:"line-".concat(c),index:c});return Sre(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function uRe(t){var e=t.y,s=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ol(ol({},t),{},{x1:l,y1:e,x2:l,y2:e+s,key:"line-".concat(c),index:c});return Sre(a,d)});return ce.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function hRe(t){var e=t.horizontalFill,s=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,f){return m-f});a!==u[0]&&u.unshift(0);var h=u.map(function(m,f){var v=!u[f+1],x=v?a+o-m:u[f+1]-m;if(x<=0)return null;var g=f%e.length;return ce.createElement("rect",{key:"react-".concat(f),y:m,x:n,height:x,width:i,stroke:"none",fill:e[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function mRe(t){var e=t.vertical,s=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!s||!n||!n.length)return null;var u=d.map(function(m){return Math.round(m+i-i)}).sort(function(m,f){return m-f});i!==u[0]&&u.unshift(0);var h=u.map(function(m,f){var v=!u[f+1],x=v?i+l-m:u[f+1]-m;if(x<=0)return null;var g=f%n.length;return ce.createElement("rect",{key:"react-".concat(f),x:m,y:o,width:x,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ce.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var fRe=function(e,s){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return Cte(j8(ol(ol(ol({},oy.defaultProps),n),{},{ticks:Nm(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,s)},pRe=function(e,s){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return Cte(j8(ol(ol(ol({},oy.defaultProps),n),{},{ticks:Nm(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,s)},d0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function rw(t){var e,s,n,a,i,o,l=v8(),c=y8(),d=rDe(),u=ol(ol({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:d0.stroke,fill:(s=t.fill)!==null&&s!==void 0?s:d0.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:d0.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:d0.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:d0.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:d0.verticalFill,x:er(t.x)?t.x:d.left,y:er(t.y)?t.y:d.top,width:er(t.width)?t.width:d.width,height:er(t.height)?t.height:d.height}),h=u.x,m=u.y,f=u.width,v=u.height,x=u.syncWithTicks,g=u.horizontalValues,b=u.verticalValues,w=J8e(),N=eDe();if(!er(f)||f<=0||!er(v)||v<=0||!er(h)||h!==+h||!er(m)||m!==+m)return null;var C=u.verticalCoordinatesGenerator||fRe,S=u.horizontalCoordinatesGenerator||pRe,A=u.horizontalPoints,k=u.verticalPoints;if((!A||!A.length)&&xs(S)){var E=g&&g.length,O=S({yAxis:N?ol(ol({},N),{},{ticks:E?g:N.ticks}):void 0,width:l,height:c,offset:d},E?!0:x);Au(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(rg(O),"]")),Array.isArray(O)&&(A=O)}if((!k||!k.length)&&xs(C)){var $=b&&b.length,T=C({xAxis:w?ol(ol({},w),{},{ticks:$?b:w.ticks}):void 0,width:l,height:c,offset:d},$?!0:x);Au(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(rg(T),"]")),Array.isArray(T)&&(k=T)}return ce.createElement("g",{className:"recharts-cartesian-grid"},ce.createElement(cRe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ce.createElement(dRe,_x({},u,{offset:d,horizontalPoints:A,xAxis:w,yAxis:N})),ce.createElement(uRe,_x({},u,{offset:d,verticalPoints:k,xAxis:w,yAxis:N})),ce.createElement(hRe,_x({},u,{horizontalPoints:A})),ce.createElement(mRe,_x({},u,{verticalPoints:k})))}rw.displayName="CartesianGrid";var xRe=["type","layout","connectNulls","ref"],gRe=["key"];function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function AW(t,e){if(t==null)return{};var s=vRe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function vRe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function eb(){return eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},eb.apply(this,arguments)}function EW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function _c(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?EW(Object(s),!0).forEach(function(n){xu(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):EW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function u0(t){return jRe(t)||wRe(t)||bRe(t)||yRe()}function yRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bRe(t,e){if(t){if(typeof t=="string")return qT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return qT(t,e)}}function wRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jRe(t){if(Array.isArray(t))return qT(t)}function qT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function NRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PW(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kre(n.key),n)}}function SRe(t,e,s){return e&&PW(t.prototype,e),s&&PW(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function CRe(t,e,s){return e=S4(e),kRe(t,Cre()?Reflect.construct(e,s||[],S4(t).constructor):e.apply(t,s))}function kRe(t,e){if(e&&(Tv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Re(t)}function _Re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cre=function(){return!!t})()}function S4(t){return S4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},S4(t)}function ARe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HT(t,e)}function HT(t,e){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HT(t,e)}function xu(t,e,s){return e=kre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function kre(t){var e=ERe(t,"string");return Tv(e)=="symbol"?e:e+""}function ERe(t,e){if(Tv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rw=(function(t){function e(){var s;NRe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=CRe(this,e,[].concat(a)),xu(s,"state",{isAnimationFinished:!0,totalLength:0}),xu(s,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),xu(s,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,w){return b+w});if(!d)return s.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,m=l-o,f=[],v=0,x=0;v<c.length;x+=c[v],++v)if(x+c[v]>h){f=[].concat(u0(c.slice(0,v)),[h-x]);break}var g=f.length%2===0?[0,m]:[m];return[].concat(u0(e.repeat(c,u)),u0(f),g).map(function(b){return"".concat(b,"px")}).join(", ")}),xu(s,"id",gg("recharts-line-")),xu(s,"pathRef",function(o){s.mainCurve=o}),xu(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0}),s.props.onAnimationEnd&&s.props.onAnimationEnd()}),xu(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1}),s.props.onAnimationStart&&s.props.onAnimationStart()}),s}return ARe(e,t),SRe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,h=Wc(u,$w);if(!h)return null;var m=function(x,g){return{x:x.x,y:x.y,value:x.value,errorVal:_i(x.payload,g)}},f={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ce.createElement(nn,f,h.map(function(v){return ce.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=rs(this.props,!1),m=rs(c,!0),f=d.map(function(x,g){var b=_c(_c(_c({key:"dot-".concat(g),r:3},h),m),{},{index:g,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:d});return e.renderDotItem(c,b)}),v={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(nn,eb({className:"recharts-line-dots",key:"dots"},v),f)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=AW(l,xRe),m=_c(_c(_c({},rs(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:d,connectNulls:u});return ce.createElement(Lx,eb({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=o.animateNewValues,x=o.width,g=o.height,b=this.state,w=b.prevPoints,N=b.totalLength;return ce.createElement(Iu,{begin:u,duration:h,isActive:d,easing:m,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var S=C.t;if(w){var A=w.length/l.length,k=l.map(function(I,L){var z=Math.floor(L*A);if(w[z]){var M=w[z],V=Zi(M.x,I.x),B=Zi(M.y,I.y);return _c(_c({},I),{},{x:V(S),y:B(S)})}if(v){var F=Zi(x*2,I.x),J=Zi(g/2,I.y);return _c(_c({},I),{},{x:F(S),y:J(S)})}return _c(_c({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(k,n,a)}var E=Zi(0,N),O=E(S),$;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});$=i.getStrokeDasharray(O,N,T)}else $=i.generateSimpleStrokeDasharray(N,O);return i.renderCurveStatically(l,n,a,{strokeDasharray:$})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!Jx(d,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,h=a.top,m=a.left,f=a.width,v=a.height,x=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,N=Rs("recharts-line",c),C=d&&d.allowDataOverflow,S=u&&u.allowDataOverflow,A=C||S,k=Os(g)?this.id:g,E=(n=rs(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=E.r,$=O===void 0?3:O,T=E.strokeWidth,I=T===void 0?2:T,L=_J(o)?o:{},z=L.clipDot,M=z===void 0?!0:z,V=$*2+I;return ce.createElement(nn,{className:N},C||S?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(k)},ce.createElement("rect",{x:C?m:m-f/2,y:S?h:h-v/2,width:C?f:f*2,height:S?v:v*2})),!M&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(k)},ce.createElement("rect",{x:m-V/2,y:h-V/2,width:f+V,height:v+V}))):null,!w&&this.renderCurve(A,k),this.renderErrorBar(A,k),(w||o)&&this.renderDots(A,M,k),(!x||b)&&Nh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(u0(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(u0(o),u0(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(ce.isValidElement(n))i=ce.cloneElement(n,a);else if(xs(n))i=n(a);else{var o=a.key,l=AW(a,gRe),c=Rs("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ce.createElement(Dw,eb({key:o},l,{className:c}))}return i}}])})(j.PureComponent);xu(Rw,"displayName","Line");xu(Rw,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!fp.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});xu(Rw,"getComposedData",function(t){var e=t.props,s=t.xAxis,n=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=e.layout,h=c.map(function(m,f){var v=_i(m,o);return u==="horizontal"?{x:t4({axis:s,ticks:a,bandSize:l,entry:m,index:f}),y:Os(v)?null:n.scale(v),value:v,payload:m}:{x:Os(v)?null:s.scale(v),y:t4({axis:n,ticks:i,bandSize:l,entry:m,index:f}),value:v,payload:m}});return _c({points:h,layout:u},d)});var PRe=["layout","type","stroke","connectNulls","isRange","ref"],TRe=["key"],_re;function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function Are(t,e){if(t==null)return{};var s=ORe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ORe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function Ax(){return Ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Ax.apply(this,arguments)}function TW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Ef(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?TW(Object(s),!0).forEach(function(n){mh(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):TW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function IRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OW(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pre(n.key),n)}}function $Re(t,e,s){return e&&OW(t.prototype,e),s&&OW(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function DRe(t,e,s){return e=C4(e),RRe(t,Ere()?Reflect.construct(e,s||[],C4(t).constructor):e.apply(t,s))}function RRe(t,e){if(e&&(Ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MRe(t)}function MRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ere(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ere=function(){return!!t})()}function C4(t){return C4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},C4(t)}function LRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GT(t,e)}function mh(t,e,s){return e=Pre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Pre(t){var e=FRe(t,"string");return Ov(e)=="symbol"?e:e+""}function FRe(t,e){if(Ov(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vp=(function(t){function e(){var s;IRe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=DRe(this,e,[].concat(a)),mh(s,"state",{isAnimationFinished:!0}),mh(s,"id",gg("recharts-area-")),mh(s,"handleAnimationEnd",function(){var o=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),xs(o)&&o()}),mh(s,"handleAnimationStart",function(){var o=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),xs(o)&&o()}),s}return LRe(e,t),$Re(e,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,m=rs(this.props,!1),f=rs(d,!0),v=u.map(function(g,b){var w=Ef(Ef(Ef({key:"dot-".concat(b),r:3},m),f),{},{index:b,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:u});return e.renderDotItem(d,w)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ce.createElement(nn,Ax({className:"recharts-area-dots"},x),v)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=n*Math.abs(c-d),h=Ff(o.map(function(m){return m.y||0}));return er(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Ff(i.map(function(m){return m.y||0})),h)),er(h)?ce.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=n*Math.abs(c-d),h=Ff(o.map(function(m){return m.x||0}));return er(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(Ff(i.map(function(m){return m.x||0})),h)),er(h)?ce.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var f=Are(l,PRe);return ce.createElement(nn,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ce.createElement(Lx,Ax({},rs(f,!0),{points:n,connectNulls:h,type:d,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ce.createElement(Lx,Ax({},rs(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:n})),u!=="none"&&m&&ce.createElement(Lx,Ax({},rs(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=this.state,x=v.prevPoints,g=v.prevBaseLine;return ce.createElement(Iu,{begin:u,duration:h,isActive:d,easing:m,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(x){var N=x.length/l.length,C=l.map(function(E,O){var $=Math.floor(O*N);if(x[$]){var T=x[$],I=Zi(T.x,E.x),L=Zi(T.y,E.y);return Ef(Ef({},E),{},{x:I(w),y:L(w)})}return E}),S;if(er(c)&&typeof c=="number"){var A=Zi(g,c);S=A(w)}else if(Os(c)||ry(c)){var k=Zi(g,0);S=k(w)}else S=c.map(function(E,O){var $=Math.floor(O*N);if(g[$]){var T=g[$],I=Zi(T.x,E.x),L=Zi(T.y,E.y);return Ef(Ef({},E),{},{x:I(w),y:L(w)})}return E});return i.renderAreaStatically(C,S,n,a)}return ce.createElement(nn,null,ce.createElement("defs",null,ce.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(w))),ce.createElement(nn,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,m=d.totalLength;return c&&o&&o.length&&(!u&&m>0||!Jx(u,o)||!Jx(h,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.top,u=a.left,h=a.xAxis,m=a.yAxis,f=a.width,v=a.height,x=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,w=l.length===1,N=Rs("recharts-area",c),C=h&&h.allowDataOverflow,S=m&&m.allowDataOverflow,A=C||S,k=Os(g)?this.id:g,E=(n=rs(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=E.r,$=O===void 0?3:O,T=E.strokeWidth,I=T===void 0?2:T,L=_J(o)?o:{},z=L.clipDot,M=z===void 0?!0:z,V=$*2+I;return ce.createElement(nn,{className:N},C||S?ce.createElement("defs",null,ce.createElement("clipPath",{id:"clipPath-".concat(k)},ce.createElement("rect",{x:C?u:u-f/2,y:S?d:d-v/2,width:C?f:f*2,height:S?v:v*2})),!M&&ce.createElement("clipPath",{id:"clipPath-dots-".concat(k)},ce.createElement("rect",{x:u-V/2,y:d-V/2,width:f+V,height:v+V}))):null,w?null:this.renderArea(A,k),(o||w)&&this.renderDots(A,M,k),(!x||b)&&Nh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(j.PureComponent);_re=vp;mh(vp,"displayName","Area");mh(vp,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!fp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});mh(vp,"getBaseValue",function(t,e,s,n){var a=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(er(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:s,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});mh(vp,"getComposedData",function(t){var e=t.props,s=t.item,n=t.xAxis,a=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,m=t.offset,f=e.layout,v=d&&d.length,x=_re.getBaseValue(e,s,n,a),g=f==="horizontal",b=!1,w=h.map(function(C,S){var A;v?A=d[u+S]:(A=_i(C,c),Array.isArray(A)?b=!0:A=[x,A]);var k=A[1]==null||v&&_i(C,c)==null;return g?{x:t4({axis:n,ticks:i,bandSize:l,entry:C,index:S}),y:k?null:a.scale(A[1]),value:A,payload:C}:{x:k?null:n.scale(A[1]),y:t4({axis:a,ticks:o,bandSize:l,entry:C,index:S}),value:A,payload:C}}),N;return v||b?N=w.map(function(C){var S=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:S!=null&&C.y!=null?a.scale(S):null}:{x:S!=null?n.scale(S):null,y:C.y}}):N=g?a.scale(x):n.scale(x),Ef({points:w,baseLine:N,layout:f,isRange:b},m)});mh(vp,"renderDotItem",function(t,e){var s;if(ce.isValidElement(t))s=ce.cloneElement(t,e);else if(xs(t))s=t(e);else{var n=Rs("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,i=Are(e,TRe);s=ce.createElement(Dw,Ax({},i,{key:a,className:n}))}return s});function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function BRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function URe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ire(n.key),n)}}function zRe(t,e,s){return e&&URe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VRe(t,e,s){return e=k4(e),WRe(t,Tre()?Reflect.construct(e,s||[],k4(t).constructor):e.apply(t,s))}function WRe(t,e){if(e&&(Iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qRe(t)}function qRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tre=function(){return!!t})()}function k4(t){return k4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},k4(t)}function HRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YT(t,e)}function Ore(t,e,s){return e=Ire(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ire(t){var e=GRe(t,"string");return Iv(e)=="symbol"?e:e+""}function GRe(t,e){if(Iv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Iv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},KT.apply(this,arguments)}function YRe(t){var e=t.xAxisId,s=v8(),n=y8(),a=mre(e);return a==null?null:j.createElement(oy,KT({},a,{className:Rs("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:n},ticksGenerator:function(o){return Nm(o,!0)}}))}var Mm=(function(t){function e(){return BRe(this,e),VRe(this,e,arguments)}return HRe(e,t),zRe(e,[{key:"render",value:function(){return j.createElement(YRe,this.props)}}])})(j.Component);Ore(Mm,"displayName","XAxis");Ore(Mm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function KRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XRe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rre(n.key),n)}}function QRe(t,e,s){return e&&XRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZRe(t,e,s){return e=_4(e),JRe(t,$re()?Reflect.construct(e,s||[],_4(t).constructor):e.apply(t,s))}function JRe(t,e){if(e&&($v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eMe(t)}function eMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($re=function(){return!!t})()}function _4(t){return _4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_4(t)}function tMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XT(t,e)}function Dre(t,e,s){return e=Rre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Rre(t){var e=rMe(t,"string");return $v(e)=="symbol"?e:e+""}function rMe(t,e){if($v(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if($v(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function QT(){return QT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},QT.apply(this,arguments)}var sMe=function(e){var s=e.yAxisId,n=v8(),a=y8(),i=fre(s);return i==null?null:j.createElement(oy,QT({},i,{className:Rs("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Nm(l,!0)}}))},Ch=(function(t){function e(){return KRe(this,e),ZRe(this,e,arguments)}return tMe(e,t),QRe(e,[{key:"render",value:function(){return j.createElement(sMe,this.props)}}])})(j.Component);Dre(Ch,"displayName","YAxis");Dre(Ch,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function IW(t){return oMe(t)||iMe(t)||aMe(t)||nMe()}function nMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aMe(t,e){if(t){if(typeof t=="string")return ZT(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ZT(t,e)}}function iMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oMe(t){if(Array.isArray(t))return ZT(t)}function ZT(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var JT=function(e,s,n,a,i){var o=Wc(e,w8),l=Wc(e,Q5),c=[].concat(IW(o),IW(l)),d=Wc(e,J5),u="".concat(a,"Id"),h=a[0],m=s;if(c.length&&(m=c.reduce(function(x,g){if(g.props[u]===n&&Sh(g.props,"extendDomain")&&er(g.props[h])){var b=g.props[h];return[Math.min(x[0],b),Math.max(x[1],b)]}return x},m)),d.length){var f="".concat(h,"1"),v="".concat(h,"2");m=d.reduce(function(x,g){if(g.props[u]===n&&Sh(g.props,"extendDomain")&&er(g.props[f])&&er(g.props[v])){var b=g.props[f],w=g.props[v];return[Math.min(x[0],b,w),Math.max(x[1],b,w)]}return x},m)}return i&&i.length&&(m=i.reduce(function(x,g){return er(g)?[Math.min(x[0],g),Math.max(x[1],g)]:x},m)),m},wA={exports:{}},$W;function lMe(){return $W||($W=1,(function(t){var e=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new a(u,h||c,m),v=s?s+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],f]:c._events[v].push(f):(c._events[v]=f,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=s?s+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,v=new Array(f);m<f;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(d){var u=s?s+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,m,f,v){var x=s?s+d:d;if(!this._events[x])return!1;var g=this._events[x],b=arguments.length,w,N;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,m),!0;case 5:return g.fn.call(g.context,u,h,m,f),!0;case 6:return g.fn.call(g.context,u,h,m,f,v),!0}for(N=1,w=new Array(b-1);N<b;N++)w[N-1]=arguments[N];g.fn.apply(g.context,w)}else{var C=g.length,S;for(N=0;N<C;N++)switch(g[N].once&&this.removeListener(d,g[N].fn,void 0,!0),b){case 1:g[N].fn.call(g[N].context);break;case 2:g[N].fn.call(g[N].context,u);break;case 3:g[N].fn.call(g[N].context,u,h);break;case 4:g[N].fn.call(g[N].context,u,h,m);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];g[N].fn.apply(g[N].context,w)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,m){var f=s?s+d:d;if(!this._events[f])return this;if(!u)return o(this,f),this;var v=this._events[f];if(v.fn)v.fn===u&&(!m||v.once)&&(!h||v.context===h)&&o(this,f);else{for(var x=0,g=[],b=v.length;x<b;x++)(v[x].fn!==u||m&&!v[x].once||h&&v[x].context!==h)&&g.push(v[x]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,t.exports=l})(wA)),wA.exports}var cMe=lMe();const dMe=cn(cMe);var jA=new dMe,NA="recharts.syncMouseEvents";function sw(t){"@babel/helpers - typeof";return sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(t)}function uMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hMe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mre(n.key),n)}}function mMe(t,e,s){return e&&hMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SA(t,e,s){return e=Mre(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Mre(t){var e=fMe(t,"string");return sw(e)=="symbol"?e:e+""}function fMe(t,e){if(sw(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(sw(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pMe=(function(){function t(){uMe(this,t),SA(this,"activeIndex",0),SA(this,"coordinateList",[]),SA(this,"layout","horizontal")}return mMe(t,[{key:"setDetails",value:function(s){var n,a=s.coordinateList,i=a===void 0?null:a,o=s.container,l=o===void 0?null:o,c=s.layout,d=c===void 0?null:c,u=s.offset,h=u===void 0?null:u,m=s.mouseHandlerCallback,f=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(s){if(this.coordinateList.length!==0)switch(s.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(s){this.activeIndex=s}},{key:"spoofMouse",value:function(){var s,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((s=window)===null||s===void 0?void 0:s.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,h=i+c+d,m=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])})();function xMe(t,e,s){if(s==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&er(n)&&er(a))return!0}return!1}function gMe(t,e,s,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:s.left+.5,y:t==="horizontal"?s.top+.5:e.y-a,width:t==="horizontal"?n:s.width-1,height:t==="horizontal"?s.height-1:n}}function Lre(t){var e=t.cx,s=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=Sa(e,s,n,a),l=Sa(e,s,n,i);return{points:[o,l],cx:e,cy:s,radius:n,startAngle:a,endAngle:i}}function vMe(t,e,s){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=s.top,o=s.top+s.height;else if(t==="vertical")a=e.y,o=a,n=s.left,i=s.left+s.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,h=e.angle,m=Sa(l,c,d,h),f=Sa(l,c,u,h);n=m.x,a=m.y,i=f.x,o=f.y}else return Lre(e);return[{x:n,y:a},{x:i,y:o}]}function nw(t){"@babel/helpers - typeof";return nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nw(t)}function DW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function cj(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?DW(Object(s),!0).forEach(function(n){yMe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):DW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function yMe(t,e,s){return e=bMe(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function bMe(t){var e=wMe(t,"string");return nw(e)=="symbol"?e:e+""}function wMe(t,e){if(nw(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(nw(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jMe(t){var e,s,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,m=t.chartName,f=(e=n.props.cursor)!==null&&e!==void 0?e:(s=n.type.defaultProps)===null||s===void 0?void 0:s.cursor;if(!n||!f||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var v,x=Lx;if(m==="ScatterChart")v=o,x=$Ie;else if(m==="BarChart")v=gMe(h,o,c,u),x=m8;else if(h==="radial"){var g=Lre(o),b=g.cx,w=g.cy,N=g.radius,C=g.startAngle,S=g.endAngle;v={cx:b,cy:w,startAngle:C,endAngle:S,innerRadius:N,outerRadius:N},x=Rte}else v={points:vMe(h,o,c)},x=Lx;var A=cj(cj(cj(cj({stroke:"#ccc",pointerEvents:"none"},c),v),rs(f,!1)),{},{payload:l,payloadIndex:d,className:Rs("recharts-tooltip-cursor",f.className)});return j.isValidElement(f)?j.cloneElement(f,A):j.createElement(x,A)}var NMe=["item"],SMe=["children","className","width","height","style","compact","title","desc"];function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},I0.apply(this,arguments)}function RW(t,e){return _Me(t)||kMe(t,e)||Bre(t,e)||CMe()}function CMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kMe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Me(t){if(Array.isArray(t))return t}function MW(t,e){if(t==null)return{};var s=AMe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function AMe(t,e){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;s[n]=t[n]}return s}function EMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PMe(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ure(n.key),n)}}function TMe(t,e,s){return e&&PMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OMe(t,e,s){return e=A4(e),IMe(t,Fre()?Reflect.construct(e,s||[],A4(t).constructor):e.apply(t,s))}function IMe(t,e){if(e&&(Dv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Me(t)}function $Me(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fre(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fre=function(){return!!t})()}function A4(t){return A4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},A4(t)}function DMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eO(t,e)}function eO(t,e){return eO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eO(t,e)}function Rv(t){return LMe(t)||MMe(t)||Bre(t)||RMe()}function RMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bre(t,e){if(t){if(typeof t=="string")return tO(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return tO(t,e)}}function MMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LMe(t){if(Array.isArray(t))return tO(t)}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function LW(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function St(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?LW(Object(s),!0).forEach(function(n){ps(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):LW(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function ps(t,e,s){return e=Ure(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ure(t){var e=FMe(t,"string");return Dv(e)=="symbol"?e:e+""}function FMe(t,e){if(Dv(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BMe={xAxis:["bottom","top"],yAxis:["left","right"]},UMe={width:"100%",height:"100%"},zre={x:0,y:0};function dj(t){return t}var zMe=function(e,s){return s==="horizontal"?e.x:s==="vertical"?e.y:s==="centric"?e.angle:e.radius},VMe=function(e,s,n,a){var i=s.find(function(u){return u&&u.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=a.radius;return St(St(St({},a),Sa(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return St(St(St({},a),Sa(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return zre},e3=function(e,s){var n=s.graphicalItems,a=s.dataStartIndex,i=s.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Rv(l),Rv(d)):l},[]);return o.length>0?o:e&&e.length&&er(a)&&er(i)?e.slice(a,i+1):[]};function Vre(t){return t==="number"?[0,"auto"]:void 0}var rO=function(e,s,n,a){var i=e.graphicalItems,o=e.tooltipAxis,l=e3(s,e);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:s;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var f=h===void 0?l:h;m=PN(f,o.dataKey,a)}else m=h&&h[n]||l[n];return m?[].concat(Rv(c),[Pte(d,m)]):c},[])},FW=function(e,s,n,a){var i=a||{x:e.chartX,y:e.chartY},o=zMe(i,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=aPe(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,m=rO(e,s,u,h),f=VMe(n,l,u,i);return{activeTooltipIndex:u,activeLabel:h,activePayload:m,activeCoordinate:f}}return null},WMe=function(e,s){var n=s.axes,a=s.graphicalItems,i=s.axisType,o=s.axisIdKey,l=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=e.layout,h=e.children,m=e.stackOffset,f=Ste(u,i);return n.reduce(function(v,x){var g,b=x.type.defaultProps!==void 0?St(St({},x.type.defaultProps),x.props):x.props,w=b.type,N=b.dataKey,C=b.allowDataOverflow,S=b.allowDuplicatedCategory,A=b.scale,k=b.ticks,E=b.includeHidden,O=b[o];if(v[O])return v;var $=e3(e.data,{graphicalItems:a.filter(function(U){var Z,K=o in U.props?U.props[o]:(Z=U.type.defaultProps)===null||Z===void 0?void 0:Z[o];return K===O}),dataStartIndex:c,dataEndIndex:d}),T=$.length,I,L,z;xMe(b.domain,C,w)&&(I=pT(b.domain,null,C),f&&(w==="number"||A!=="auto")&&(z=X1($,N,"category")));var M=Vre(w);if(!I||I.length===0){var V,B=(V=b.domain)!==null&&V!==void 0?V:M;if(N){if(I=X1($,N,w),w==="category"&&f){var F=J5e(I);S&&F?(L=I,I=f4(0,T)):S||(I=Rz(B,I,x).reduce(function(U,Z){return U.indexOf(Z)>=0?U:[].concat(Rv(U),[Z])},[]))}else if(w==="category")S?I=I.filter(function(U){return U!==""&&!Os(U)}):I=Rz(B,I,x).reduce(function(U,Z){return U.indexOf(Z)>=0||Z===""||Os(Z)?U:[].concat(Rv(U),[Z])},[]);else if(w==="number"){var J=dPe($,a.filter(function(U){var Z,K,se=o in U.props?U.props[o]:(Z=U.type.defaultProps)===null||Z===void 0?void 0:Z[o],ne="hide"in U.props?U.props.hide:(K=U.type.defaultProps)===null||K===void 0?void 0:K.hide;return se===O&&(E||!ne)}),N,i,u);J&&(I=J)}f&&(w==="number"||A!=="auto")&&(z=X1($,N,"category"))}else f?I=f4(0,T):l&&l[O]&&l[O].hasStack&&w==="number"?I=m==="expand"?[0,1]:Ete(l[O].stackGroups,c,d):I=Nte($,a.filter(function(U){var Z=o in U.props?U.props[o]:U.type.defaultProps[o],K="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return Z===O&&(E||!K)}),w,u,!0);if(w==="number")I=JT(h,I,O,i,k),B&&(I=pT(B,I,C));else if(w==="category"&&B){var ee=B,q=I.every(function(U){return ee.indexOf(U)>=0});q&&(I=ee)}}return St(St({},v),{},ps({},O,St(St({},b),{},{axisType:i,domain:I,categoricalDomain:z,duplicateDomain:L,originalDomain:(g=b.domain)!==null&&g!==void 0?g:M,isCategorical:f,layout:u})))},{})},qMe=function(e,s){var n=s.graphicalItems,a=s.Axis,i=s.axisType,o=s.axisIdKey,l=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=e.layout,h=e.children,m=e3(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),f=m.length,v=Ste(u,i),x=-1;return n.reduce(function(g,b){var w=b.type.defaultProps!==void 0?St(St({},b.type.defaultProps),b.props):b.props,N=w[o],C=Vre("number");if(!g[N]){x++;var S;return v?S=f4(0,f):l&&l[N]&&l[N].hasStack?(S=Ete(l[N].stackGroups,c,d),S=JT(h,S,N,i)):(S=pT(C,Nte(m,n.filter(function(A){var k,E,O=o in A.props?A.props[o]:(k=A.type.defaultProps)===null||k===void 0?void 0:k[o],$="hide"in A.props?A.props.hide:(E=A.type.defaultProps)===null||E===void 0?void 0:E.hide;return O===N&&!$}),"number",u),a.defaultProps.allowDataOverflow),S=JT(h,S,N,i)),St(St({},g),{},ps({},N,St(St({axisType:i},a.defaultProps),{},{hide:!0,orientation:Vc(BMe,"".concat(i,".").concat(x%2),null),domain:S,originalDomain:C,isCategorical:v,layout:u})))}return g},{})},HMe=function(e,s){var n=s.axisType,a=n===void 0?"xAxis":n,i=s.AxisComp,o=s.graphicalItems,l=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=e.children,h="".concat(a,"Id"),m=Wc(u,i),f={};return m&&m.length?f=WMe(e,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(f=qMe(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),f},GMe=function(e){var s=Rf(e),n=Nm(s,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:F$(n,function(a){return a.coordinate}),tooltipAxis:s,tooltipAxisBandSize:r4(s,n)}},BW=function(e){var s=e.children,n=e.defaultShowTooltip,a=Ec(s,Cv),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},YMe=function(e){return!e||!e.length?!1:e.some(function(s){var n=km(s&&s.type);return n&&n.indexOf("Bar")>=0})},UW=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},KMe=function(e,s){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,d=n.width,u=n.height,h=n.children,m=n.margin||{},f=Ec(h,Cv),v=Ec(h,Dx),x=Object.keys(c).reduce(function(S,A){var k=c[A],E=k.orientation;return!k.mirror&&!k.hide?St(St({},S),{},ps({},E,S[E]+k.width)):S},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(S,A){var k=o[A],E=k.orientation;return!k.mirror&&!k.hide?St(St({},S),{},ps({},E,Vc(S,"".concat(E))+k.height)):S},{top:m.top||0,bottom:m.bottom||0}),b=St(St({},g),x),w=b.bottom;f&&(b.bottom+=f.props.height||Cv.defaultProps.height),v&&s&&(b=lPe(b,a,n,s));var N=d-b.left-b.right,C=u-b.top-b.bottom;return St(St({brushBottom:w},b),{},{width:Math.max(N,0),height:Math.max(C,0)})},XMe=function(e,s){if(s==="xAxis")return e[s].width;if(s==="yAxis")return e[s].height},t3=function(e){var s=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,m=function(b,w){var N=w.graphicalItems,C=w.stackGroups,S=w.offset,A=w.updateId,k=w.dataStartIndex,E=w.dataEndIndex,O=b.barSize,$=b.layout,T=b.barGap,I=b.barCategoryGap,L=b.maxBarSize,z=UW($),M=z.numericAxisName,V=z.cateAxisName,B=YMe(N),F=[];return N.forEach(function(J,ee){var q=e3(b.data,{graphicalItems:[J],dataStartIndex:k,dataEndIndex:E}),U=J.type.defaultProps!==void 0?St(St({},J.type.defaultProps),J.props):J.props,Z=U.dataKey,K=U.maxBarSize,se=U["".concat(M,"Id")],ne=U["".concat(V,"Id")],ie={},be=c.reduce(function(ut,Ot){var tt=w["".concat(Ot.axisType,"Map")],st=U["".concat(Ot.axisType,"Id")];tt&&tt[st]||Ot.axisType==="zAxis"||tg();var At=tt[st];return St(St({},ut),{},ps(ps({},Ot.axisType,At),"".concat(Ot.axisType,"Ticks"),Nm(At)))},ie),ue=be[V],oe=be["".concat(V,"Ticks")],pe=C&&C[se]&&C[se].hasStack&&yPe(J,C[se].stackGroups),ye=km(J.type).indexOf("Bar")>=0,$e=r4(ue,oe),Se=[],Y=B&&iPe({barSize:O,stackGroups:C,totalSize:XMe(be,V)});if(ye){var Le,xe,mt=Os(K)?L:K,Ue=(Le=(xe=r4(ue,oe,!0))!==null&&xe!==void 0?xe:mt)!==null&&Le!==void 0?Le:0;Se=oPe({barGap:T,barCategoryGap:I,bandSize:Ue!==$e?Ue:$e,sizeList:Y[ne],maxBarSize:mt}),Ue!==$e&&(Se=Se.map(function(ut){return St(St({},ut),{},{position:St(St({},ut.position),{},{offset:ut.position.offset-Ue/2})})}))}var xt=J&&J.type&&J.type.getComposedData;xt&&F.push({props:St(St({},xt(St(St({},be),{},{displayedData:q,props:b,dataKey:Z,item:J,bandSize:$e,barPosition:Se,offset:S,stackedData:pe,layout:$,dataStartIndex:k,dataEndIndex:E}))),{},ps(ps(ps({key:J.key||"item-".concat(ee)},M,be[M]),V,be[V]),"animationId",A)),childIndex:u3e(J,b.children),item:J})}),F},f=function(b,w){var N=b.props,C=b.dataStartIndex,S=b.dataEndIndex,A=b.updateId;if(!Q9({props:N}))return null;var k=N.children,E=N.layout,O=N.stackOffset,$=N.data,T=N.reverseStackOrder,I=UW(E),L=I.numericAxisName,z=I.cateAxisName,M=Wc(k,n),V=gPe($,M,"".concat(L,"Id"),"".concat(z,"Id"),O,T),B=c.reduce(function(U,Z){var K="".concat(Z.axisType,"Map");return St(St({},U),{},ps({},K,HMe(N,St(St({},Z),{},{graphicalItems:M,stackGroups:Z.axisType===L&&V,dataStartIndex:C,dataEndIndex:S}))))},{}),F=KMe(St(St({},B),{},{props:N,graphicalItems:M}),w?.legendBBox);Object.keys(B).forEach(function(U){B[U]=u(N,B[U],F,U.replace("Map",""),s)});var J=B["".concat(z,"Map")],ee=GMe(J),q=m(N,St(St({},B),{},{dataStartIndex:C,dataEndIndex:S,updateId:A,graphicalItems:M,stackGroups:V,offset:F}));return St(St({formattedGraphicalItems:q,graphicalItems:M,offset:F,stackGroups:V},ee),B)},v=(function(g){function b(w){var N,C,S;return EMe(this,b),S=OMe(this,b,[w]),ps(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ps(S,"accessibilityManager",new pMe),ps(S,"handleLegendBBoxUpdate",function(A){if(A){var k=S.state,E=k.dataStartIndex,O=k.dataEndIndex,$=k.updateId;S.setState(St({legendBBox:A},f({props:S.props,dataStartIndex:E,dataEndIndex:O,updateId:$},St(St({},S.state),{},{legendBBox:A}))))}}),ps(S,"handleReceiveSyncEvent",function(A,k,E){if(S.props.syncId===A){if(E===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(k)}}),ps(S,"handleBrushChange",function(A){var k=A.startIndex,E=A.endIndex;if(k!==S.state.dataStartIndex||E!==S.state.dataEndIndex){var O=S.state.updateId;S.setState(function(){return St({dataStartIndex:k,dataEndIndex:E},f({props:S.props,dataStartIndex:k,dataEndIndex:E,updateId:O},S.state))}),S.triggerSyncEvent({dataStartIndex:k,dataEndIndex:E})}}),ps(S,"handleMouseEnter",function(A){var k=S.getMouseInfo(A);if(k){var E=St(St({},k),{},{isTooltipActive:!0});S.setState(E),S.triggerSyncEvent(E);var O=S.props.onMouseEnter;xs(O)&&O(E,A)}}),ps(S,"triggeredAfterMouseMove",function(A){var k=S.getMouseInfo(A),E=k?St(St({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(E),S.triggerSyncEvent(E);var O=S.props.onMouseMove;xs(O)&&O(E,A)}),ps(S,"handleItemMouseEnter",function(A){S.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),ps(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),ps(S,"handleMouseMove",function(A){A.persist(),S.throttleTriggeredAfterMouseMove(A)}),ps(S,"handleMouseLeave",function(A){S.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};S.setState(k),S.triggerSyncEvent(k);var E=S.props.onMouseLeave;xs(E)&&E(k,A)}),ps(S,"handleOuterEvent",function(A){var k=d3e(A),E=Vc(S.props,"".concat(k));if(k&&xs(E)){var O,$;/.*touch.*/i.test(k)?$=S.getMouseInfo(A.changedTouches[0]):$=S.getMouseInfo(A),E((O=$)!==null&&O!==void 0?O:{},A)}}),ps(S,"handleClick",function(A){var k=S.getMouseInfo(A);if(k){var E=St(St({},k),{},{isTooltipActive:!0});S.setState(E),S.triggerSyncEvent(E);var O=S.props.onClick;xs(O)&&O(E,A)}}),ps(S,"handleMouseDown",function(A){var k=S.props.onMouseDown;if(xs(k)){var E=S.getMouseInfo(A);k(E,A)}}),ps(S,"handleMouseUp",function(A){var k=S.props.onMouseUp;if(xs(k)){var E=S.getMouseInfo(A);k(E,A)}}),ps(S,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),ps(S,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseDown(A.changedTouches[0])}),ps(S,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseUp(A.changedTouches[0])}),ps(S,"handleDoubleClick",function(A){var k=S.props.onDoubleClick;if(xs(k)){var E=S.getMouseInfo(A);k(E,A)}}),ps(S,"handleContextMenu",function(A){var k=S.props.onContextMenu;if(xs(k)){var E=S.getMouseInfo(A);k(E,A)}}),ps(S,"triggerSyncEvent",function(A){S.props.syncId!==void 0&&jA.emit(NA,S.props.syncId,A,S.eventEmitterSymbol)}),ps(S,"applySyncEvent",function(A){var k=S.props,E=k.layout,O=k.syncMethod,$=S.state.updateId,T=A.dataStartIndex,I=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)S.setState(St({dataStartIndex:T,dataEndIndex:I},f({props:S.props,dataStartIndex:T,dataEndIndex:I,updateId:$},S.state)));else if(A.activeTooltipIndex!==void 0){var L=A.chartX,z=A.chartY,M=A.activeTooltipIndex,V=S.state,B=V.offset,F=V.tooltipTicks;if(!B)return;if(typeof O=="function")M=O(F,A);else if(O==="value"){M=-1;for(var J=0;J<F.length;J++)if(F[J].value===A.activeLabel){M=J;break}}var ee=St(St({},B),{},{x:B.left,y:B.top}),q=Math.min(L,ee.x+ee.width),U=Math.min(z,ee.y+ee.height),Z=F[M]&&F[M].value,K=rO(S.state,S.props.data,M),se=F[M]?{x:E==="horizontal"?F[M].coordinate:q,y:E==="horizontal"?U:F[M].coordinate}:zre;S.setState(St(St({},A),{},{activeLabel:Z,activeCoordinate:se,activePayload:K,activeTooltipIndex:M}))}else S.setState(A)}),ps(S,"renderCursor",function(A){var k,E=S.state,O=E.isTooltipActive,$=E.activeCoordinate,T=E.activePayload,I=E.offset,L=E.activeTooltipIndex,z=E.tooltipAxisBandSize,M=S.getTooltipEventType(),V=(k=A.props.active)!==null&&k!==void 0?k:O,B=S.props.layout,F=A.key||"_recharts-cursor";return ce.createElement(jMe,{key:F,activeCoordinate:$,activePayload:T,activeTooltipIndex:L,chartName:s,element:A,isActive:V,layout:B,offset:I,tooltipAxisBandSize:z,tooltipEventType:M})}),ps(S,"renderPolarAxis",function(A,k,E){var O=Vc(A,"type.axisType"),$=Vc(S.state,"".concat(O,"Map")),T=A.type.defaultProps,I=T!==void 0?St(St({},T),A.props):A.props,L=$&&$[I["".concat(O,"Id")]];return j.cloneElement(A,St(St({},L),{},{className:Rs(O,L.className),key:A.key||"".concat(k,"-").concat(E),ticks:Nm(L,!0)}))}),ps(S,"renderPolarGrid",function(A){var k=A.props,E=k.radialLines,O=k.polarAngles,$=k.polarRadius,T=S.state,I=T.radiusAxisMap,L=T.angleAxisMap,z=Rf(I),M=Rf(L),V=M.cx,B=M.cy,F=M.innerRadius,J=M.outerRadius;return j.cloneElement(A,{polarAngles:Array.isArray(O)?O:Nm(M,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray($)?$:Nm(z,!0).map(function(ee){return ee.coordinate}),cx:V,cy:B,innerRadius:F,outerRadius:J,key:A.key||"polar-grid",radialLines:E})}),ps(S,"renderLegend",function(){var A=S.state.formattedGraphicalItems,k=S.props,E=k.children,O=k.width,$=k.height,T=S.props.margin||{},I=O-(T.left||0)-(T.right||0),L=wte({children:E,formattedGraphicalItems:A,legendWidth:I,legendContent:d});if(!L)return null;var z=L.item,M=MW(L,NMe);return j.cloneElement(z,St(St({},M),{},{chartWidth:O,chartHeight:$,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),ps(S,"renderTooltip",function(){var A,k=S.props,E=k.children,O=k.accessibilityLayer,$=Ec(E,ec);if(!$)return null;var T=S.state,I=T.isTooltipActive,L=T.activeCoordinate,z=T.activePayload,M=T.activeLabel,V=T.offset,B=(A=$.props.active)!==null&&A!==void 0?A:I;return j.cloneElement($,{viewBox:St(St({},V),{},{x:V.left,y:V.top}),active:B,label:M,payload:B?z:[],coordinate:L,accessibilityLayer:O})}),ps(S,"renderBrush",function(A){var k=S.props,E=k.margin,O=k.data,$=S.state,T=$.offset,I=$.dataStartIndex,L=$.dataEndIndex,z=$.updateId;return j.cloneElement(A,{key:A.key||"_recharts-brush",onChange:aj(S.handleBrushChange,A.props.onChange),data:O,x:er(A.props.x)?A.props.x:T.left,y:er(A.props.y)?A.props.y:T.top+T.height+T.brushBottom-(E.bottom||0),width:er(A.props.width)?A.props.width:T.width,startIndex:I,endIndex:L,updateId:"brush-".concat(z)})}),ps(S,"renderReferenceElement",function(A,k,E){if(!A)return null;var O=S,$=O.clipPathId,T=S.state,I=T.xAxisMap,L=T.yAxisMap,z=T.offset,M=A.type.defaultProps||{},V=A.props,B=V.xAxisId,F=B===void 0?M.xAxisId:B,J=V.yAxisId,ee=J===void 0?M.yAxisId:J;return j.cloneElement(A,{key:A.key||"".concat(k,"-").concat(E),xAxis:I[F],yAxis:L[ee],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:$})}),ps(S,"renderActivePoints",function(A){var k=A.item,E=A.activePoint,O=A.basePoint,$=A.childIndex,T=A.isRange,I=[],L=k.props.key,z=k.item.type.defaultProps!==void 0?St(St({},k.item.type.defaultProps),k.item.props):k.item.props,M=z.activeDot,V=z.dataKey,B=St(St({index:$,dataKey:V,cx:E.x,cy:E.y,r:4,fill:u8(k.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},rs(M,!1)),TN(M));return I.push(b.renderActiveDot(M,B,"".concat(L,"-activePoint-").concat($))),O?I.push(b.renderActiveDot(M,St(St({},B),{},{cx:O.x,cy:O.y}),"".concat(L,"-basePoint-").concat($))):T&&I.push(null),I}),ps(S,"renderGraphicChild",function(A,k,E){var O=S.filterFormatItem(A,k,E);if(!O)return null;var $=S.getTooltipEventType(),T=S.state,I=T.isTooltipActive,L=T.tooltipAxis,z=T.activeTooltipIndex,M=T.activeLabel,V=S.props.children,B=Ec(V,ec),F=O.props,J=F.points,ee=F.isRange,q=F.baseLine,U=O.item.type.defaultProps!==void 0?St(St({},O.item.type.defaultProps),O.item.props):O.item.props,Z=U.activeDot,K=U.hide,se=U.activeBar,ne=U.activeShape,ie=!!(!K&&I&&B&&(Z||se||ne)),be={};$!=="axis"&&B&&B.props.trigger==="click"?be={onClick:aj(S.handleItemMouseEnter,A.props.onClick)}:$!=="axis"&&(be={onMouseLeave:aj(S.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:aj(S.handleItemMouseEnter,A.props.onMouseEnter)});var ue=j.cloneElement(A,St(St({},O.props),be));function oe(Ot){return typeof L.dataKey=="function"?L.dataKey(Ot.payload):null}if(ie)if(z>=0){var pe,ye;if(L.dataKey&&!L.allowDuplicatedCategory){var $e=typeof L.dataKey=="function"?oe:"payload.".concat(L.dataKey.toString());pe=PN(J,$e,M),ye=ee&&q&&PN(q,$e,M)}else pe=J?.[z],ye=ee&&q&&q[z];if(ne||se){var Se=A.props.activeIndex!==void 0?A.props.activeIndex:z;return[j.cloneElement(A,St(St(St({},O.props),be),{},{activeIndex:Se})),null,null]}if(!Os(pe))return[ue].concat(Rv(S.renderActivePoints({item:O,activePoint:pe,basePoint:ye,childIndex:z,isRange:ee})))}else{var Y,Le=(Y=S.getItemByXY(S.state.activeCoordinate))!==null&&Y!==void 0?Y:{graphicalItem:ue},xe=Le.graphicalItem,mt=xe.item,Ue=mt===void 0?A:mt,xt=xe.childIndex,ut=St(St(St({},O.props),be),{},{activeIndex:xt});return[j.cloneElement(Ue,ut),null,null]}return ee?[ue,null,null]:[ue,null]}),ps(S,"renderCustomized",function(A,k,E){return j.cloneElement(A,St(St({key:"recharts-customized-".concat(E)},S.props),S.state))}),ps(S,"renderMap",{CartesianGrid:{handler:dj,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:dj},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:dj},YAxis:{handler:dj},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((N=w.id)!==null&&N!==void 0?N:gg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=bee(S.triggeredAfterMouseMove,(C=w.throttleDelay)!==null&&C!==void 0?C:1e3/60),S.state={},S}return DMe(b,g),TMe(b,[{key:"componentDidMount",value:function(){var N,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,C=N.children,S=N.data,A=N.height,k=N.layout,E=Ec(C,ec);if(E){var O=E.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,T=rO(this.state,S,O,$),I=this.state.tooltipTicks[O].coordinate,L=(this.state.offset.top+A)/2,z=k==="horizontal",M=z?{x:I,y:L}:{y:I,x:L},V=this.state.formattedGraphicalItems.find(function(F){var J=F.item;return J.type.name==="Scatter"});V&&(M=St(St({},M),V.props.points[O].tooltipPosition),T=V.props.points[O].tooltipPayload);var B={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:$,activePayload:T,activeCoordinate:M};this.setState(B),this.renderCursor(E),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var S,A;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(N){MP([Ec(N.children,ec)],[Ec(this.props.children,ec)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=Ec(this.props.children,ec);if(N&&typeof N.props.shared=="boolean"){var C=N.props.shared?"axis":"item";return l.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var C=this.container,S=C.getBoundingClientRect(),A=Qke(S),k={chartX:Math.round(N.pageX-A.left),chartY:Math.round(N.pageY-A.top)},E=S.width/C.offsetWidth||1,O=this.inRange(k.chartX,k.chartY,E);if(!O)return null;var $=this.state,T=$.xAxisMap,I=$.yAxisMap,L=this.getTooltipEventType(),z=FW(this.state,this.props.data,this.props.layout,O);if(L!=="axis"&&T&&I){var M=Rf(T).scale,V=Rf(I).scale,B=M&&M.invert?M.invert(k.chartX):null,F=V&&V.invert?V.invert(k.chartY):null;return St(St({},k),{},{xValue:B,yValue:F},z)}return z?St(St({},k),z):null}},{key:"inRange",value:function(N,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,k=N/S,E=C/S;if(A==="horizontal"||A==="vertical"){var O=this.state.offset,$=k>=O.left&&k<=O.left+O.width&&E>=O.top&&E<=O.top+O.height;return $?{x:k,y:E}:null}var T=this.state,I=T.angleAxisMap,L=T.radiusAxisMap;if(I&&L){var z=Rf(I);return Fz({x:k,y:E},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,C=this.getTooltipEventType(),S=Ec(N,ec),A={};S&&C==="axis"&&(S.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=TN(this.props,this.handleOuterEvent);return St(St({},k),A)}},{key:"addListener",value:function(){jA.on(NA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){jA.removeListener(NA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,C,S){for(var A=this.state.formattedGraphicalItems,k=0,E=A.length;k<E;k++){var O=A[k];if(O.item===N||O.props.key===N.key||C===km(O.item.type)&&S===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,C=this.state.offset,S=C.left,A=C.top,k=C.height,E=C.width;return ce.createElement("defs",null,ce.createElement("clipPath",{id:N},ce.createElement("rect",{x:S,y:A,height:k,width:E})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(C,S){var A=RW(S,2),k=A[0],E=A[1];return St(St({},C),{},ps({},k,E.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(C,S){var A=RW(S,2),k=A[0],E=A[1];return St(St({},C),{},ps({},k,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[N])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(N){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[N])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(N){var C=this.state,S=C.formattedGraphicalItems,A=C.activeItem;if(S&&S.length)for(var k=0,E=S.length;k<E;k++){var O=S[k],$=O.props,T=O.item,I=T.type.defaultProps!==void 0?St(St({},T.type.defaultProps),T.props):T.props,L=km(T.type);if(L==="Bar"){var z=($.data||[]).find(function(F){return fIe(N,F)});if(z)return{graphicalItem:O,payload:z}}else if(L==="RadialBar"){var M=($.data||[]).find(function(F){return Fz(N,F)});if(M)return{graphicalItem:O,payload:M}}else if(G5(O,A)||Y5(O,A)||Qb(O,A)){var V=M$e({graphicalItem:O,activeTooltipItem:A,itemData:I.data}),B=I.activeIndex===void 0?V:I.activeIndex;return{graphicalItem:St(St({},O),{},{childIndex:B}),payload:Qb(O,A)?I.data[V]:O.props.data[V]}}}return null}},{key:"render",value:function(){var N=this;if(!Q9(this))return null;var C=this.props,S=C.children,A=C.className,k=C.width,E=C.height,O=C.style,$=C.compact,T=C.title,I=C.desc,L=MW(C,SMe),z=rs(L,!1);if($)return ce.createElement(pW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement(FP,I0({},z,{width:k,height:E,title:T,desc:I}),this.renderClipPath(),J9(S,this.renderMap)));if(this.props.accessibilityLayer){var M,V;z.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,z.role=(V=this.props.role)!==null&&V!==void 0?V:"application",z.onKeyDown=function(F){N.accessibilityManager.keyboardEvent(F)},z.onFocus=function(){N.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return ce.createElement(pW,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ce.createElement("div",I0({className:Rs("recharts-wrapper",A),style:St({position:"relative",cursor:"default",width:k,height:E},O)},B,{ref:function(J){N.container=J}}),ce.createElement(FP,I0({},z,{width:k,height:E,title:T,desc:I,style:UMe}),this.renderClipPath(),J9(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(j.Component);ps(v,"displayName",s),ps(v,"defaultProps",St({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),ps(v,"getDerivedStateFromProps",function(g,b){var w=g.dataKey,N=g.data,C=g.children,S=g.width,A=g.height,k=g.layout,E=g.stackOffset,O=g.margin,$=b.dataStartIndex,T=b.dataEndIndex;if(b.updateId===void 0){var I=BW(g);return St(St(St({},I),{},{updateId:0},f(St(St({props:g},I),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:N,prevWidth:S,prevHeight:A,prevLayout:k,prevStackOffset:E,prevMargin:O,prevChildren:C})}if(w!==b.prevDataKey||N!==b.prevData||S!==b.prevWidth||A!==b.prevHeight||k!==b.prevLayout||E!==b.prevStackOffset||!K0(O,b.prevMargin)){var L=BW(g),z={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},M=St(St({},FW(b,N,k)),{},{updateId:b.updateId+1}),V=St(St(St({},L),z),M);return St(St(St({},V),f(St({props:g},V),b)),{},{prevDataKey:w,prevData:N,prevWidth:S,prevHeight:A,prevLayout:k,prevStackOffset:E,prevMargin:O,prevChildren:C})}if(!MP(C,b.prevChildren)){var B,F,J,ee,q=Ec(C,Cv),U=q&&(B=(F=q.props)===null||F===void 0?void 0:F.startIndex)!==null&&B!==void 0?B:$,Z=q&&(J=(ee=q.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&J!==void 0?J:T,K=U!==$||Z!==T,se=!Os(N),ne=se&&!K?b.updateId:b.updateId+1;return St(St({updateId:ne},f(St(St({props:g},b),{},{updateId:ne,dataStartIndex:U,dataEndIndex:Z}),b)),{},{prevChildren:C,dataStartIndex:U,dataEndIndex:Z})}return null}),ps(v,"renderActiveDot",function(g,b,w){var N;return j.isValidElement(g)?N=j.cloneElement(g,b):xs(g)?N=g(b):N=ce.createElement(Dw,b),ce.createElement(nn,{className:"recharts-active-dot",key:w},N)});var x=j.forwardRef(function(b,w){return ce.createElement(v,I0({},b,{ref:w}))});return x.displayName=v.displayName,x},QMe=t3({chartName:"LineChart",GraphicalChild:Rw,axisComponents:[{axisType:"xAxis",AxisComp:Mm},{axisType:"yAxis",AxisComp:Ch}],formatAxisMap:f8}),Wre=t3({chartName:"BarChart",GraphicalChild:Rm,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Mm},{axisType:"yAxis",AxisComp:Ch}],formatAxisMap:f8}),ZMe=t3({chartName:"PieChart",GraphicalChild:Um,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:H5},{axisType:"radiusAxis",AxisComp:W5}],formatAxisMap:EPe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),JMe=t3({chartName:"AreaChart",GraphicalChild:vp,axisComponents:[{axisType:"xAxis",AxisComp:Mm},{axisType:"yAxis",AxisComp:Ch}],formatAxisMap:f8});function Ei({title:t,description:e,action:s,sticky:n=!1}){return r.jsxs("div",{className:`
      flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4
      ${n?"sticky top-16 lg:static bg-gray-50 dark:bg-[#161616] py-2 lg:py-0 -mx-4 px-4 sm:-mx-6 sm:px-6 lg:mx-0 lg:px-0 z-10 border-b lg:border-b-0 border-gray-200 dark:border-[#2a2a2a] lg:mb-0":""}
    `,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-gray-900 dark:text-white mb-2 truncate",children:t}),e&&r.jsx("p",{className:"text-gray-600 dark:text-[#737373] text-sm sm:text-base lg:mb-6",children:e})]}),s&&r.jsx("div",{className:"w-full sm:w-auto flex-shrink-0",children:s})]})}const e7e="https://ohfjkcajnqvethmrpdwc.supabase.co",t7e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9oZmprY2FqbnF2ZXRobXJwZHdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDE2OTEsImV4cCI6MjA3Nzc3NzY5MX0.EkzMR6RP3YiVNASU3Ppq4KiJHCP8R8lY4yQxKhs_4e8",pt=RI(e7e,t7e,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});function r7e(){const[t,e]=j.useState(!0),[s,n]=j.useState(null),[a,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState([]),[u,h]=j.useState([]),m=async()=>{try{e(!0);const{data:f,error:v}=await pt.rpc("get_dashboard_stats");if(v)throw v;f&&f.length>0&&n(f[0]);const{data:x,error:g}=await pt.rpc("get_weekly_bookings_trend");if(g)throw g;i(x||[]);const{data:b,error:w}=await pt.rpc("get_upcoming_bookings",{limit_count:5});if(w)throw w;l(b||[]);const{data:N,error:C}=await pt.rpc("get_todays_bookings_by_hour");if(C)throw C;d(N||[]);const{data:S,error:A}=await pt.rpc("get_recent_booking_activity",{limit_count:10});if(A)throw A;h(S||[])}catch(f){console.error("Error fetching dashboard data:",f)}finally{e(!1)}};return j.useEffect(()=>{m();const f=pt.channel("dashboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{m()}).subscribe();return()=>{f.unsubscribe()}},[]),{loading:t,stats:s,weeklyTrend:a,upcomingBookings:o,todaysHourly:c,recentActivity:u,refreshDashboard:m}}function zW({onNavigate:t}={}){const{theme:e}=Nr(),s=e==="dark",[n,a]=j.useState(!1),{loading:i,stats:o,weeklyTrend:l,upcomingBookings:c,todaysHourly:d,recentActivity:u,refreshDashboard:h}=r7e(),m=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),f={primary:"#4f46e5",grid:s?"#2a2a2a":"#e5e7eb",text:s?"#737373":"#6b7280",tooltip:s?"#1e1e1e":"#ffffff",tooltipBorder:s?"#2a2a2a":"#e5e7eb"},v=async()=>{a(!0),await h(),re.success("Dashboard refreshed"),setTimeout(()=>a(!1),500)};return r.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[r.jsx(Ei,{title:"Dashboard",description:`Welcome back! Here's what's happening today - ${m}`,sticky:!0,action:r.jsxs(W,{variant:"outline",className:"h-11",onClick:v,disabled:n,children:[r.jsx(ju,{className:`w-4 h-4 sm:mr-2 ${n?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})}),i?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 lg:gap-6",children:[1,2,3,4].map(x=>r.jsxs("div",{className:"bg-white dark:bg-[#161616] border border-gray-200 dark:border-[#1e1e1e] rounded-lg p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-3/4"})]},x))}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 lg:gap-6",children:[r.jsx(tc,{title:"Total Bookings",value:new Intl.NumberFormat("en-US").format(o?.total_bookings||0),change:12.5,icon:qs,iconColor:"bg-blue-600 dark:bg-[#4f46e5]"}),r.jsx(tc,{title:"Revenue",value:`$${new Intl.NumberFormat("en-US").format(Math.round(o?.total_revenue||0))}`,change:8.2,icon:In,iconColor:"bg-emerald-600 dark:bg-emerald-500"}),r.jsx(tc,{title:"Conversion Rate",value:`${((o?.total_bookings||0)>0?(o?.confirmed_bookings||0)/(o?.total_bookings||1)*100:0).toFixed(2)}%`,change:-2.1,icon:Wn,iconColor:"bg-purple-600 dark:bg-purple-500"}),r.jsx(tc,{title:"Avg Group Size",value:`${(o?.avg_group_size||0).toFixed(1)}`,change:5.3,icon:Xr,iconColor:"bg-orange-600 dark:bg-orange-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 sm:gap-6",children:[r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.15)] transition-all",children:[r.jsx(Ke,{className:"p-5 sm:p-6",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Xe,{className:"text-base sm:text-lg",children:"Weekly Bookings Trend"}),r.jsx(_a,{className:"w-4 h-4 text-[#4f46e5] dark:text-[#6366f1]"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Last 8 weeks performance"})]})})}),r.jsx(_e,{className:"p-5 sm:p-6 pt-0",children:r.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:r.jsx("div",{className:"min-w-[400px] px-4 sm:px-0",children:r.jsx(G1,{width:"100%",height:260,children:r.jsxs(JMe,{data:l.map(x=>({week:x.week_label,bookings:x.bookings_count})),children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorBookings",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:f.primary,stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:f.primary,stopOpacity:0})]})}),r.jsx(rw,{strokeDasharray:"3 3",stroke:f.grid,opacity:.3}),r.jsx(Mm,{dataKey:"week",stroke:f.text,fontSize:11,tickLine:!1}),r.jsx(Ch,{stroke:f.text,fontSize:11,width:35,tickLine:!1}),r.jsx(ec,{contentStyle:{backgroundColor:f.tooltip,border:`1px solid ${f.tooltipBorder}`,borderRadius:"8px",fontSize:"12px",color:s?"#ffffff":"#000000"}}),r.jsx(vp,{type:"monotone",dataKey:"bookings",stroke:f.primary,strokeWidth:2.5,fill:"url(#colorBookings)",dot:{fill:f.primary,r:4,strokeWidth:2,stroke:s?"#161616":"#ffffff"},activeDot:{r:6,strokeWidth:2},name:"Bookings"})]})})})})})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.15)] transition-all",children:[r.jsx(Ke,{className:"p-5 sm:p-6",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Xe,{className:"text-base sm:text-lg",children:"Today's Bookings"}),r.jsx(cl,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Hourly distribution"})]})})}),r.jsx(_e,{className:"p-5 sm:p-6 pt-0",children:r.jsx("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:r.jsx("div",{className:"min-w-[400px] px-4 sm:px-0",children:r.jsx(G1,{width:"100%",height:260,children:r.jsxs(Wre,{data:d.map(x=>({hour:x.hour_slot,bookings:x.bookings_count})),children:[r.jsx(rw,{strokeDasharray:"3 3",stroke:f.grid,opacity:.3}),r.jsx(Mm,{dataKey:"hour",stroke:f.text,fontSize:11,tickLine:!1}),r.jsx(Ch,{stroke:f.text,fontSize:11,width:35,tickLine:!1}),r.jsx(ec,{contentStyle:{backgroundColor:f.tooltip,border:`1px solid ${f.tooltipBorder}`,borderRadius:"8px",fontSize:"12px",color:s?"#ffffff":"#000000"}}),r.jsx(Rm,{dataKey:"bookings",fill:f.primary,radius:[6,6,0,0],name:"Bookings"})]})})})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5 sm:gap-6",children:[r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.15)] transition-all",children:[r.jsx(Ke,{className:"p-5 sm:p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:"text-base sm:text-lg",children:"Upcoming Today"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mt-1",children:"Next bookings scheduled"})]}),r.jsxs(W,{variant:"ghost",size:"sm",className:"text-[#4f46e5] dark:text-[#6366f1] hover:text-[#4338ca] dark:hover:text-[#818cf8] hover:bg-blue-50 dark:hover:bg-[#4f46e5]/10 text-xs sm:text-sm",onClick:()=>t?.("bookings"),children:["View All",r.jsx(due,{className:"w-3 h-3 ml-1"})]})]})}),r.jsx(_e,{className:"p-5 sm:p-6 pt-0",children:r.jsx("div",{className:"space-y-3",children:c.map((x,g)=>r.jsx("div",{className:"group relative flex items-start gap-3 p-3.5 rounded-lg border border-gray-100 dark:border-[#2a2a2a] hover:border-[#4f46e5]/30 dark:hover:border-[#6366f1]/30 hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-all cursor-pointer",style:{animationDelay:`${g*50}ms`},children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate group-hover:text-[#4f46e5] dark:group-hover:text-[#6366f1] transition-colors",children:x.customer_name}),r.jsx(De,{variant:"secondary",className:`flex-shrink-0 text-xs ${x.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30"} border`,children:x.status})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] truncate mb-2",children:x.game_name}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-[#737373]",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(jr,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:x.start_time})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Xr,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:["$",x.total_amount]})]})]})]})},x.booking_id))})})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.15)] transition-all",children:[r.jsx(Ke,{className:"p-5 sm:p-6",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx(Xe,{className:"text-base sm:text-lg",children:"Recent Activity"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mt-1",children:"Latest updates"})]})})}),r.jsx(_e,{className:"p-5 sm:p-6 pt-0",children:r.jsx("div",{className:"space-y-3",children:u.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-[#737373]",children:[r.jsx(cl,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No booking activity today yet"})]}):u.map((x,g)=>r.jsx("div",{className:"group flex items-start gap-3 pb-3.5 border-b border-gray-100 dark:border-[#2a2a2a] last:border-0 last:pb-0 hover:scale-[1.01] transition-transform",style:{animationDelay:`${g*50}ms`},children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate group-hover:text-[#4f46e5] dark:group-hover:text-[#6366f1] transition-colors",children:x.customer_name}),x.is_future_booking&&r.jsx(De,{variant:"secondary",className:"text-xs bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400",children:"Future"})]}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] truncate",children:[x.game_name," at ",x.venue_name]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("p",{className:"text-xs text-gray-500 dark:text-[#737373]",children:[new Date(x.booking_date).toLocaleDateString()," at ",x.booking_time]}),r.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["$",x.total_amount]})]})]})},x.booking_id))})})]})]})]})}var s7e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],n7e=s7e.reduce((t,e)=>{const s=Wv(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),a7e="Label",qre=j.forwardRef((t,e)=>r.jsx(n7e.label,{...t,ref:e,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(t.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));qre.displayName=a7e;var i7e=qre;function X({className:t,...e}){return r.jsx(i7e,{"data-slot":"label",className:Ar("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}var r3="Tabs",[o7e]=fl(r3,[o5]),Hre=o5(),[l7e,S8]=o7e(r3),Gre=j.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=mg(l),[h,m]=qc({prop:n,onChange:a,defaultProp:i??"",caller:r3});return r.jsx(l7e,{scope:s,baseId:Uc(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:r.jsx(Jr.div,{dir:u,"data-orientation":o,...d,ref:e})})});Gre.displayName=r3;var Yre="TabsList",Kre=j.forwardRef((t,e)=>{const{__scopeTabs:s,loop:n=!0,...a}=t,i=S8(Yre,s),o=Hre(s);return r.jsx(LK,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:r.jsx(Jr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:e})})});Kre.displayName=Yre;var Xre="TabsTrigger",Qre=j.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=t,o=S8(Xre,s),l=Hre(s),c=ese(o.baseId,n),d=tse(o.baseId,n),u=n===o.value;return r.jsx(FK,{asChild:!0,...l,focusable:!a,active:u,children:r.jsx(Jr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:e,onMouseDown:ur(t.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:ur(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:ur(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});Qre.displayName=Xre;var Zre="TabsContent",Jre=j.forwardRef((t,e)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...o}=t,l=S8(Zre,s),c=ese(l.baseId,n),d=tse(l.baseId,n),u=n===l.value,h=j.useRef(u);return j.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(Uo,{present:a||u,children:({present:m})=>r.jsx(Jr.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});Jre.displayName=Zre;function ese(t,e){return`${t}-trigger-${e}`}function tse(t,e){return`${t}-content-${e}`}var c7e=Gre,d7e=Kre,u7e=Qre,h7e=Jre;function wn({className:t,...e}){return r.jsx(c7e,{"data-slot":"tabs",className:Ar("flex flex-col gap-2",t),...e})}function kn({className:t,...e}){return r.jsx(d7e,{"data-slot":"tabs-list",className:Ar("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function Tt({className:t,...e}){return r.jsx(u7e,{"data-slot":"tabs-trigger",className:Ar("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Bt({className:t,...e}){return r.jsx(h7e,{"data-slot":"tabs-content",className:Ar("flex-1 outline-none",t),...e})}const rse=6048e5,m7e=864e5,VW=Symbol.for("constructDateFrom");function Bi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&VW in t?t[VW](e):t instanceof Date?new t.constructor(e):new Date(e)}function ca(t,e){return Bi(e||t,t)}function sse(t,e,s){const n=ca(t,s?.in);return isNaN(e)?Bi(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function nse(t,e,s){const n=ca(t,s?.in);if(isNaN(e))return Bi(t,NaN);if(!e)return n;const a=n.getDate(),i=Bi(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const o=i.getDate();return a>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}let f7e={};function Mw(){return f7e}function Mv(t,e){const s=Mw(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=ca(t,e?.in),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function aw(t,e){return Mv(t,{...e,weekStartsOn:1})}function ase(t,e){const s=ca(t,e?.in),n=s.getFullYear(),a=Bi(s,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=aw(a),o=Bi(s,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=aw(o);return s.getTime()>=i.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function WW(t){const e=ca(t),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+t-+s}function ly(t,...e){const s=Bi.bind(null,e.find(n=>typeof n=="object"));return e.map(s)}function iw(t,e){const s=ca(t,e?.in);return s.setHours(0,0,0,0),s}function ise(t,e,s){const[n,a]=ly(s?.in,t,e),i=iw(n),o=iw(a),l=+i-WW(i),c=+o-WW(o);return Math.round((l-c)/m7e)}function p7e(t,e){const s=ase(t,e),n=Bi(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),aw(n)}function x7e(t,e,s){return sse(t,e*7,s)}function g7e(t,e,s){return nse(t,e*12,s)}function v7e(t,e){let s,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Bi.bind(null,a));const i=ca(a,n);(!s||s<i||isNaN(+i))&&(s=i)}),Bi(n,s||NaN)}function y7e(t,e){let s,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Bi.bind(null,a));const i=ca(a,n);(!s||s>i||isNaN(+i))&&(s=i)}),Bi(n,s||NaN)}function b7e(t,e,s){const[n,a]=ly(s?.in,t,e);return+iw(n)==+iw(a)}function ose(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function w7e(t){return!(!ose(t)&&typeof t!="number"||isNaN(+ca(t)))}function j7e(t,e,s){const[n,a]=ly(s?.in,t,e),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function N7e(t,e){const s=ca(t,e?.in),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function lse(t,e){const[s,n]=ly(t,e.start,e.end);return{start:s,end:n}}function S7e(t,e){const{start:s,end:n}=lse(e?.in,t);let a=+s>+n;const i=a?+s:+n,o=a?n:s;o.setHours(0,0,0,0),o.setDate(1);let l=1;const c=[];for(;+o<=i;)c.push(Bi(s,o)),o.setMonth(o.getMonth()+l);return a?c.reverse():c}function C7e(t,e){const s=ca(t,e?.in);return s.setDate(1),s.setHours(0,0,0,0),s}function k7e(t,e){const s=ca(t,e?.in),n=s.getFullYear();return s.setFullYear(n+1,0,0),s.setHours(23,59,59,999),s}function cse(t,e){const s=ca(t,e?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}function _7e(t,e){const{start:s,end:n}=lse(e?.in,t);let a=+s>+n;const i=a?+s:+n,o=a?n:s;o.setHours(0,0,0,0),o.setMonth(0,1);let l=1;const c=[];for(;+o<=i;)c.push(Bi(s,o)),o.setFullYear(o.getFullYear()+l);return a?c.reverse():c}function dse(t,e){const s=Mw(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=ca(t,e?.in),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function A7e(t,e){return dse(t,{...e,weekStartsOn:1})}const E7e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},P7e=(t,e,s)=>{let n;const a=E7e[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function CA(t){return(e={})=>{const s=e.width?String(e.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const T7e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O7e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I7e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$7e={date:CA({formats:T7e,defaultWidth:"full"}),time:CA({formats:O7e,defaultWidth:"full"}),dateTime:CA({formats:I7e,defaultWidth:"full"})},D7e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},R7e=(t,e,s,n)=>D7e[t];function n1(t){return(e,s)=>{const n=s?.context?String(s.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=s?.width?String(s.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=s?.width?String(s.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const M7e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},L7e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F7e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},B7e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U7e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},z7e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V7e=(t,e)=>{const s=Number(t),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},W7e={ordinalNumber:V7e,era:n1({values:M7e,defaultWidth:"wide"}),quarter:n1({values:L7e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:n1({values:F7e,defaultWidth:"wide"}),day:n1({values:B7e,defaultWidth:"wide"}),dayPeriod:n1({values:U7e,defaultWidth:"wide",formattingValues:z7e,defaultFormattingWidth:"wide"})};function a1(t){return(e,s={})=>{const n=s.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?H7e(l,h=>h.test(o)):q7e(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function q7e(t,e){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return s}function H7e(t,e){for(let s=0;s<t.length;s++)if(e(t[s]))return s}function G7e(t){return(e,s={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const Y7e=/^(\d+)(th|st|nd|rd)?/i,K7e=/\d+/i,X7e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Q7e={any:[/^b/i,/^(a|c)/i]},Z7e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J7e={any:[/1/i,/2/i,/3/i,/4/i]},eLe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tLe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rLe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sLe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nLe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aLe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iLe={ordinalNumber:G7e({matchPattern:Y7e,parsePattern:K7e,valueCallback:t=>parseInt(t,10)}),era:a1({matchPatterns:X7e,defaultMatchWidth:"wide",parsePatterns:Q7e,defaultParseWidth:"any"}),quarter:a1({matchPatterns:Z7e,defaultMatchWidth:"wide",parsePatterns:J7e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:a1({matchPatterns:eLe,defaultMatchWidth:"wide",parsePatterns:tLe,defaultParseWidth:"any"}),day:a1({matchPatterns:rLe,defaultMatchWidth:"wide",parsePatterns:sLe,defaultParseWidth:"any"}),dayPeriod:a1({matchPatterns:nLe,defaultMatchWidth:"any",parsePatterns:aLe,defaultParseWidth:"any"})},C8={code:"en-US",formatDistance:P7e,formatLong:$7e,formatRelative:R7e,localize:W7e,match:iLe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oLe(t,e){const s=ca(t,e?.in);return ise(s,cse(s))+1}function use(t,e){const s=ca(t,e?.in),n=+aw(s)-+p7e(s);return Math.round(n/rse)+1}function hse(t,e){const s=ca(t,e?.in),n=s.getFullYear(),a=Mw(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=Bi(e?.in||t,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Mv(o,e),c=Bi(e?.in||t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Mv(c,e);return+s>=+l?n+1:+s>=+d?n:n-1}function lLe(t,e){const s=Mw(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=hse(t,e),i=Bi(e?.in||t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Mv(i,e)}function mse(t,e){const s=ca(t,e?.in),n=+Mv(s,e)-+lLe(s,e);return Math.round(n/rse)+1}function Qn(t,e){const s=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return s+n}const wf={y(t,e){const s=t.getFullYear(),n=s>0?s:1-s;return Qn(e==="yy"?n%100:n,e.length)},M(t,e){const s=t.getMonth();return e==="M"?String(s+1):Qn(s+1,2)},d(t,e){return Qn(t.getDate(),e.length)},a(t,e){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,e){return Qn(t.getHours()%12||12,e.length)},H(t,e){return Qn(t.getHours(),e.length)},m(t,e){return Qn(t.getMinutes(),e.length)},s(t,e){return Qn(t.getSeconds(),e.length)},S(t,e){const s=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return Qn(a,e.length)}},h0={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qW={G:function(t,e,s){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(t,e,s){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return wf.y(t,e)},Y:function(t,e,s,n){const a=hse(t,n),i=a>0?a:1-a;if(e==="YY"){const o=i%100;return Qn(o,2)}return e==="Yo"?s.ordinalNumber(i,{unit:"year"}):Qn(i,e.length)},R:function(t,e){const s=ase(t);return Qn(s,e.length)},u:function(t,e){const s=t.getFullYear();return Qn(s,e.length)},Q:function(t,e,s){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Qn(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,s){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Qn(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,s){const n=t.getMonth();switch(e){case"M":case"MM":return wf.M(t,e);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,s){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Qn(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,s,n){const a=mse(t,n);return e==="wo"?s.ordinalNumber(a,{unit:"week"}):Qn(a,e.length)},I:function(t,e,s){const n=use(t);return e==="Io"?s.ordinalNumber(n,{unit:"week"}):Qn(n,e.length)},d:function(t,e,s){return e==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):wf.d(t,e)},D:function(t,e,s){const n=oLe(t);return e==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):Qn(n,e.length)},E:function(t,e,s){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,s,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Qn(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,s,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Qn(i,e.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,s){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Qn(a,e.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,s){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,s){const n=t.getHours();let a;switch(n===12?a=h0.noon:n===0?a=h0.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,s){const n=t.getHours();let a;switch(n>=17?a=h0.evening:n>=12?a=h0.afternoon:n>=4?a=h0.morning:a=h0.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,s){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return wf.h(t,e)},H:function(t,e,s){return e==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):wf.H(t,e)},K:function(t,e,s){const n=t.getHours()%12;return e==="Ko"?s.ordinalNumber(n,{unit:"hour"}):Qn(n,e.length)},k:function(t,e,s){let n=t.getHours();return n===0&&(n=24),e==="ko"?s.ordinalNumber(n,{unit:"hour"}):Qn(n,e.length)},m:function(t,e,s){return e==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):wf.m(t,e)},s:function(t,e,s){return e==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):wf.s(t,e)},S:function(t,e){return wf.S(t,e)},X:function(t,e,s){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return GW(n);case"XXXX":case"XX":return cx(n);case"XXXXX":case"XXX":default:return cx(n,":")}},x:function(t,e,s){const n=t.getTimezoneOffset();switch(e){case"x":return GW(n);case"xxxx":case"xx":return cx(n);case"xxxxx":case"xxx":default:return cx(n,":")}},O:function(t,e,s){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+HW(n,":");case"OOOO":default:return"GMT"+cx(n,":")}},z:function(t,e,s){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+HW(n,":");case"zzzz":default:return"GMT"+cx(n,":")}},t:function(t,e,s){const n=Math.trunc(+t/1e3);return Qn(n,e.length)},T:function(t,e,s){return Qn(+t,e.length)}};function HW(t,e=""){const s=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?s+String(a):s+String(a)+e+Qn(i,2)}function GW(t,e){return t%60===0?(t>0?"-":"+")+Qn(Math.abs(t)/60,2):cx(t,e)}function cx(t,e=""){const s=t>0?"-":"+",n=Math.abs(t),a=Qn(Math.trunc(n/60),2),i=Qn(n%60,2);return s+a+e+i}const YW=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fse=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cLe=(t,e)=>{const s=t.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return YW(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",YW(n,e)).replace("{{time}}",fse(a,e))},dLe={p:fse,P:cLe},uLe=/^D+$/,hLe=/^Y+$/,mLe=["D","DD","YY","YYYY"];function fLe(t){return uLe.test(t)}function pLe(t){return hLe.test(t)}function xLe(t,e,s){const n=gLe(t,e,s);if(console.warn(n),mLe.includes(t))throw new RangeError(n)}function gLe(t,e,s){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vLe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yLe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bLe=/^'([^]*?)'?$/,wLe=/''/g,jLe=/[a-zA-Z]/;function Rn(t,e,s){const n=Mw(),a=s?.locale??n.locale??C8,i=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=ca(t,s?.in);if(!w7e(l))throw new RangeError("Invalid time value");let c=e.match(yLe).map(u=>{const h=u[0];if(h==="p"||h==="P"){const m=dLe[h];return m(u,a.formatLong)}return u}).join("").match(vLe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:NLe(u)};if(qW[h])return{isToken:!0,value:u};if(h.match(jLe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!s?.useAdditionalWeekYearTokens&&pLe(h)||!s?.useAdditionalDayOfYearTokens&&fLe(h))&&xLe(h,e,String(t));const m=qW[h[0]];return m(l,h,a.localize,d)}).join("")}function NLe(t){const e=t.match(bLe);return e?e[1].replace(wLe,"'"):t}function SLe(t,e){const s=ca(t,e?.in),n=s.getFullYear(),a=s.getMonth(),i=Bi(s,0);return i.setFullYear(n,a+1,0),i.setHours(0,0,0,0),i.getDate()}function CLe(t,e){return ca(t,e?.in).getMonth()}function kLe(t,e){return ca(t,e?.in).getFullYear()}function _Le(t,e){return+ca(t)>+ca(e)}function ALe(t,e){return+ca(t)<+ca(e)}function ELe(t,e,s){const[n,a]=ly(s?.in,t,e);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function PLe(t,e,s){const[n,a]=ly(s?.in,t,e);return n.getFullYear()===a.getFullYear()}function TLe(t,e,s){const n=ca(t,s?.in),a=n.getFullYear(),i=n.getDate(),o=Bi(t,0);o.setFullYear(a,e,15),o.setHours(0,0,0,0);const l=SLe(o);return n.setMonth(e,Math.min(i,l)),n}function OLe(t,e,s){const n=ca(t,s?.in);return isNaN(+n)?Bi(t,NaN):(n.setFullYear(e),n)}const ILe=()=>{const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"bg-[#161616]":"bg-white",i=e?"bg-[#1e1e1e]":"bg-gray-50",o=e?"border-[#2a2a2a]":"border-gray-200",l=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[c,d]=j.useState("chat"),[u,h]=j.useState(""),[m,f]=j.useState("all"),[v,x]=j.useState([]),[g,b]=j.useState(null),[w,N]=j.useState([]),[C,S]=j.useState(null),[A,k]=j.useState([]),[E,O]=j.useState(null);j.useEffect(()=>{$(),T(),I()},[]);const $=()=>{const se=localStorage.getItem("chatConversations");if(se){const ie=JSON.parse(se).map(be=>({...be,timestamp:new Date(be.timestamp),messages:be.messages.map(ue=>({...ue,timestamp:ue.timestamp?new Date(ue.timestamp):void 0}))}));x(ie)}else{const ne=[{id:"1",title:"Booking inquiry for Mystery Mansion",timestamp:new Date(Date.now()-18e5),messages:[{id:"1",type:"user",text:"I'd like to book Mystery Mansion",timestamp:new Date(Date.now()-18e5)},{id:"2",type:"bot",text:"Great choice! Mystery Mansion is available. When would you like to book?",timestamp:new Date(Date.now()-174e4)},{id:"3",type:"user",text:"Tonight at 7pm for 4 people",timestamp:new Date(Date.now()-168e4)},{id:"4",type:"bot",text:"Perfect! I can reserve that for you. The price for 4 people is $120.",timestamp:new Date(Date.now()-162e4)}]}];x(ne)}},T=()=>{const se=localStorage.getItem("callHistory");if(se){const ie=JSON.parse(se).map(be=>({...be,timestamp:new Date(be.timestamp)}));N(ie)}else{const ne=[{id:"1",customerName:"John Smith",customerPhone:"+1 (555) 123-4567",duration:"5:32",timestamp:new Date(Date.now()-72e5),status:"completed",notes:"Customer wants to book for birthday party. Discussed pricing and availability."},{id:"2",customerName:"Sarah Johnson",customerPhone:"+1 (555) 234-5678",duration:"2:15",timestamp:new Date(Date.now()-18e6),status:"completed",notes:"Asked about group discounts for 10+ people."},{id:"3",customerName:"Mike Davis",customerPhone:"+1 (555) 345-6789",duration:"0:00",timestamp:new Date(Date.now()-288e5),status:"missed",notes:"No voicemail left."},{id:"4",customerName:"Emily Brown",customerPhone:"+1 (555) 456-7890",duration:"1:45",timestamp:new Date(Date.now()-864e5),status:"voicemail",notes:"Left message asking about availability for corporate event."}];N(ne),localStorage.setItem("callHistory",JSON.stringify(ne))}},I=()=>{const se=localStorage.getItem("formSubmissions");if(se){const ie=JSON.parse(se).map(be=>({...be,timestamp:new Date(be.timestamp)}));k(ie)}else{const ne=[{id:"1",formType:"Contact Form",customerName:"Alex Turner",customerEmail:"alex.turner@email.com",timestamp:new Date(Date.now()-36e5),status:"new",data:{subject:"Corporate Event Booking",message:"We are interested in booking your facility for a team building event with 25 people. What are your rates and availability for next month?",phone:"+1 (555) 567-8901"}},{id:"2",formType:"Quote Request",customerName:"Jessica Lee",customerEmail:"jessica.lee@company.com",timestamp:new Date(Date.now()-144e5),status:"reviewed",data:{eventType:"Birthday Party",numberOfGuests:8,preferredDate:"2025-11-15",message:"Looking for a package deal with food and drinks included."}},{id:"3",formType:"Feedback Form",customerName:"Robert Martinez",customerEmail:"robert.m@email.com",timestamp:new Date(Date.now()-432e5),status:"responded",data:{rating:5,experience:"Excellent",comments:"Had an amazing time! The staff was very helpful and the room was challenging but fun.",wouldRecommend:!0}},{id:"4",formType:"Partnership Inquiry",customerName:"Lisa Chen",customerEmail:"lisa.chen@business.com",timestamp:new Date(Date.now()-864e5),status:"reviewed",data:{companyName:"Corporate Solutions Inc.",partnershipType:"Bulk Bookings",message:"We would like to discuss ongoing partnership for monthly team events."}}];k(ne),localStorage.setItem("formSubmissions",JSON.stringify(ne))}},L=se=>{const ne=v.filter(ie=>ie.id!==se);x(ne),localStorage.setItem("chatConversations",JSON.stringify(ne)),g?.id===se&&b(null),re.success("Chat conversation deleted")},z=se=>{const ne=w.filter(ie=>ie.id!==se);N(ne),localStorage.setItem("callHistory",JSON.stringify(ne)),C?.id===se&&S(null),re.success("Call record deleted")},M=se=>{const ne=A.filter(ie=>ie.id!==se);k(ne),localStorage.setItem("formSubmissions",JSON.stringify(ne)),E?.id===se&&O(null),re.success("Form submission deleted")},V=se=>{const ne=se.messages.map(oe=>`[${oe.type.toUpperCase()}]: ${oe.text||"(no text)"}`).join(`
`),ie=new Blob([ne],{type:"text/plain"}),be=URL.createObjectURL(ie),ue=document.createElement("a");ue.href=be,ue.download=`chat-${se.id}-${Date.now()}.txt`,ue.click(),URL.revokeObjectURL(be),re.success("Chat exported successfully")},B=(se,ne)=>{const ie=A.map(be=>be.id===se?{...be,status:ne}:be);k(ie),localStorage.setItem("formSubmissions",JSON.stringify(ie)),E?.id===se&&O({...E,status:ne}),re.success(`Status updated to ${ne}`)},F=se=>{const ie=new Date().getTime()-se.getTime();switch(m){case"today":return ie<1e3*60*60*24;case"week":return ie<1e3*60*60*24*7;case"month":return ie<1e3*60*60*24*30;default:return!0}},J=v.filter(se=>{const ne=se.title.toLowerCase().includes(u.toLowerCase())||se.messages.some(be=>be.text?.toLowerCase().includes(u.toLowerCase())),ie=F(se.timestamp);return ne&&ie}),ee=w.filter(se=>{const ne=se.customerName.toLowerCase().includes(u.toLowerCase())||se.customerPhone.includes(u)||se.notes?.toLowerCase().includes(u.toLowerCase()),ie=F(se.timestamp);return ne&&ie}),q=A.filter(se=>{const ne=se.customerName.toLowerCase().includes(u.toLowerCase())||se.customerEmail.toLowerCase().includes(u.toLowerCase())||se.formType.toLowerCase().includes(u.toLowerCase()),ie=F(se.timestamp);return ne&&ie}),U={total:v.length,today:v.filter(se=>Date.now()-se.timestamp.getTime()<1e3*60*60*24).length},Z={total:w.length,completed:w.filter(se=>se.status==="completed").length,missed:w.filter(se=>se.status==="missed").length,today:w.filter(se=>Date.now()-se.timestamp.getTime()<1e3*60*60*24).length},K={total:A.length,new:A.filter(se=>se.status==="new").length,reviewed:A.filter(se=>se.status==="reviewed").length,today:A.filter(se=>Date.now()-se.timestamp.getTime()<1e3*60*60*24).length};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Inbox",description:"Manage all customer communications in one place"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[r.jsx(he,{className:`${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} p-4 sm:p-5 md:p-6`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ni,{className:`w-5 h-5 ${e?"text-blue-400":"text-blue-600"}`}),r.jsx(X,{className:`text-sm ${e?"text-[#a3a3a3]":"text-gray-700"}`,children:"Chat Conversations"})]}),r.jsxs("div",{className:"flex items-baseline gap-2 mt-3",children:[r.jsx("span",{className:`text-3xl ${s}`,children:U.total}),r.jsx("span",{className:`text-sm ${n}`,children:"total"})]}),U.today>0&&r.jsx("div",{className:"mt-2",children:r.jsxs(De,{variant:"secondary",className:"text-xs",children:["+",U.today," today"]})})]}),r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${e?"bg-blue-500/10":"bg-blue-50"}`,children:r.jsx(ni,{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`})})]})}),r.jsx(he,{className:`${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} p-4 sm:p-5 md:p-6`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(la,{className:`w-5 h-5 ${e?"text-green-400":"text-green-600"}`}),r.jsx(X,{className:`text-sm ${e?"text-[#a3a3a3]":"text-gray-700"}`,children:"Call Records"})]}),r.jsxs("div",{className:"flex items-baseline gap-2 mt-3",children:[r.jsx("span",{className:`text-3xl ${s}`,children:Z.total}),r.jsx("span",{className:`text-sm ${n}`,children:"total"})]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[Z.missed>0&&r.jsxs(De,{variant:"destructive",className:"text-xs",children:[Z.missed," missed"]}),Z.today>0&&r.jsxs(De,{variant:"secondary",className:"text-xs",children:["+",Z.today," today"]})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${e?"bg-green-500/10":"bg-green-50"}`,children:r.jsx(la,{className:`w-6 h-6 ${e?"text-green-400":"text-green-600"}`})})]})}),r.jsx(he,{className:`${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} p-4 sm:p-5 md:p-6`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Jn,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`}),r.jsx(X,{className:`text-sm ${e?"text-[#a3a3a3]":"text-gray-700"}`,children:"Form Submissions"})]}),r.jsxs("div",{className:"flex items-baseline gap-2 mt-3",children:[r.jsx("span",{className:`text-3xl ${s}`,children:K.total}),r.jsx("span",{className:`text-sm ${n}`,children:"total"})]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[K.new>0&&r.jsxs(De,{className:"text-xs bg-blue-600 hover:bg-blue-700 text-white",children:[K.new," new"]}),K.today>0&&r.jsxs(De,{variant:"secondary",className:"text-xs",children:["+",K.today," today"]})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${e?"bg-purple-500/10":"bg-purple-50"}`,children:r.jsx(Jn,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})]}),r.jsxs(he,{className:`${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"}`,children:[r.jsx("div",{className:`p-3 sm:p-4 md:p-6 border-b ${o}`,children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search conversations, calls, or forms...",value:u,onChange:se=>h(se.target.value),className:`pl-10 h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0 overflow-x-auto pb-1",children:[r.jsx(W,{variant:m==="all"?"default":"outline",onClick:()=>f("all"),className:"min-h-[44px] h-11 sm:h-12 px-3 sm:px-4 text-sm flex-shrink-0",size:"sm",children:"All"}),r.jsx(W,{variant:m==="today"?"default":"outline",onClick:()=>f("today"),className:"min-h-[44px] h-11 sm:h-12 px-3 sm:px-4 text-sm flex-shrink-0",size:"sm",children:"Today"}),r.jsx(W,{variant:m==="week"?"default":"outline",onClick:()=>f("week"),className:"min-h-[44px] h-11 sm:h-12 px-3 sm:px-4 text-sm flex-shrink-0",size:"sm",children:"Week"}),r.jsx(W,{variant:m==="month"?"default":"outline",onClick:()=>f("month"),className:"min-h-[44px] h-11 sm:h-12 px-3 sm:px-4 text-sm flex-shrink-0",size:"sm",children:"Month"})]})]})}),r.jsxs(wn,{value:c,onValueChange:d,className:"w-full",children:[r.jsx("div",{className:`px-3 sm:px-4 md:px-6 border-b ${o} overflow-x-auto`,children:r.jsxs(kn,{className:"bg-transparent w-full justify-start h-auto p-0 gap-2 sm:gap-4",children:[r.jsxs(Tt,{value:"chat",className:`${e?"data-[state=active]:bg-transparent data-[state=active]:text-white":"data-[state=active]:bg-transparent data-[state=active]:text-gray-900"} rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 px-3 sm:px-4 py-3 sm:py-4 gap-1.5 sm:gap-2 text-xs sm:text-sm flex-shrink-0`,children:[r.jsx(ni,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Chat History"}),r.jsx("span",{className:"sm:hidden",children:"Chat"}),r.jsx(De,{variant:"secondary",className:"ml-1 text-xs",children:J.length})]}),r.jsxs(Tt,{value:"calls",className:`${e?"data-[state=active]:bg-transparent data-[state=active]:text-white":"data-[state=active]:bg-transparent data-[state=active]:text-gray-900"} rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 px-3 sm:px-4 py-3 sm:py-4 gap-1.5 sm:gap-2 text-xs sm:text-sm flex-shrink-0`,children:[r.jsx(la,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Call History"}),r.jsx("span",{className:"sm:hidden",children:"Calls"}),r.jsx(De,{variant:"secondary",className:"ml-1 text-xs",children:ee.length})]}),r.jsxs(Tt,{value:"forms",className:`${e?"data-[state=active]:bg-transparent data-[state=active]:text-white":"data-[state=active]:bg-transparent data-[state=active]:text-gray-900"} rounded-none border-b-2 border-transparent data-[state=active]:border-blue-600 px-3 sm:px-4 py-3 sm:py-4 gap-1.5 sm:gap-2 text-xs sm:text-sm flex-shrink-0`,children:[r.jsx(Jn,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Form Submissions"}),r.jsx("span",{className:"sm:hidden",children:"Forms"}),r.jsx(De,{variant:"secondary",className:"ml-1 text-xs",children:q.length})]})]})}),r.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[r.jsx(Bt,{value:"chat",className:"mt-0",children:r.jsx($Le,{conversations:J,selectedChat:g,onSelectChat:b,onDeleteChat:L,onExportChat:V,isDark:e,textClass:s,textMutedClass:n,bgClass:a,bgElevatedClass:i,borderClass:o,hoverClass:l})}),r.jsx(Bt,{value:"calls",className:"mt-0",children:r.jsx(DLe,{calls:ee,selectedCall:C,onSelectCall:S,onDeleteCall:z,isDark:e,textClass:s,textMutedClass:n,bgClass:a,bgElevatedClass:i,borderClass:o,hoverClass:l})}),r.jsx(Bt,{value:"forms",className:"mt-0",children:r.jsx(RLe,{forms:q,selectedForm:E,onSelectForm:O,onDeleteForm:M,onUpdateStatus:B,isDark:e,textClass:s,textMutedClass:n,bgClass:a,bgElevatedClass:i,borderClass:o,hoverClass:l})})]})]})]})]})};function $Le({conversations:t,selectedChat:e,onSelectChat:s,onDeleteChat:n,onExportChat:a,isDark:i,textClass:o,textMutedClass:l,bgClass:c,bgElevatedClass:d,borderClass:u,hoverClass:h}){return t.length===0?r.jsxs("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg p-12 text-center`,children:[r.jsx(ni,{className:`w-16 h-16 ${l} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${o}`,children:"No conversations found"}),r.jsx("p",{className:l,children:"Chat conversations will appear here when customers interact with your AI assistant"})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(fa,{className:"h-[500px] sm:h-[600px] lg:h-[650px] pr-2 sm:pr-4",children:r.jsx("div",{className:"space-y-2",children:t.map(m=>r.jsx("button",{onClick:()=>s(m),className:`w-full p-3 sm:p-4 rounded-lg border ${u} text-left transition-all min-h-[44px] ${e?.id===m.id?i?"bg-[#1e1e1e] border-blue-500 ring-1 ring-blue-500":"bg-blue-50 border-blue-300 ring-1 ring-blue-300":`${i?"bg-[#1e1e1e]":"bg-white"} ${h}`}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm ${o} line-clamp-2 mb-1`,children:m.title}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-3 h-3 ${l}`}),r.jsx("p",{className:`text-xs ${l}`,children:Rn(m.timestamp,"MMM d, h:mm a")})]})]}),r.jsx(De,{variant:"secondary",className:"text-xs flex-shrink-0",children:m.messages.length})]})},m.id))})})}),r.jsx("div",{className:"lg:col-span-2",children:e?r.jsxs("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} rounded-lg border`,children:[r.jsx("div",{className:`p-3 sm:p-4 md:p-6 border-b ${u}`,children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[r.jsx("h3",{className:`text-base sm:text-lg mb-2 ${o} line-clamp-2`,children:e.title}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-4 h-4 ${l}`}),r.jsx("p",{className:`text-xs sm:text-sm ${l}`,children:Rn(e.timestamp,"MMMM d, yyyy  h:mm a")})]})]}),r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>a(e),className:"min-h-[44px] h-9 sm:h-10 gap-2 flex-1 sm:flex-initial",children:[r.jsx(Sn,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{confirm("Delete this conversation?")&&n(e.id)},className:"min-h-[44px] h-9 sm:h-10 gap-2 flex-1 sm:flex-initial",children:[r.jsx(ks,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})}),r.jsx(fa,{className:"h-[400px] sm:h-[480px] lg:h-[520px] p-3 sm:p-4 md:p-6",children:r.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.messages.map(m=>r.jsx("div",{className:`flex ${m.type==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[85%] sm:max-w-[80%] rounded-lg p-3 sm:p-4 ${m.type==="user"?"bg-blue-600 text-white":i?"bg-[#161616] border border-[#2a2a2a]":"bg-gray-50 border border-gray-200"}`,children:[r.jsx("p",{className:`text-sm sm:text-base ${m.type==="user"?"text-white":o}`,children:m.text}),m.timestamp&&r.jsx("p",{className:`text-xs mt-2 ${m.type==="user"?"text-white/70":l}`,children:Rn(m.timestamp,"h:mm a")})]})},m.id))})})]}):r.jsx("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg border p-12 text-center h-full flex items-center justify-center`,children:r.jsxs("div",{children:[r.jsx(ni,{className:`w-16 h-16 ${l} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${o}`,children:"No conversation selected"}),r.jsx("p",{className:l,children:"Select a conversation from the list to view details"})]})})})]})}function DLe({calls:t,selectedCall:e,onSelectCall:s,onDeleteCall:n,isDark:a,textClass:i,textMutedClass:o,bgClass:l,bgElevatedClass:c,borderClass:d,hoverClass:u}){const h=f=>{switch(f){case"completed":return r.jsx(Lt,{className:"w-4 h-4 text-green-600"});case"missed":return r.jsx(ln,{className:"w-4 h-4 text-red-600"});case"voicemail":return r.jsx(hs,{className:"w-4 h-4 text-amber-600"})}},m=f=>{switch(f){case"completed":return r.jsx(De,{className:"text-xs bg-green-600 hover:bg-green-700 text-white",children:"Completed"});case"missed":return r.jsx(De,{className:"text-xs bg-red-600 hover:bg-red-700 text-white",children:"Missed"});case"voicemail":return r.jsx(De,{className:"text-xs bg-amber-600 hover:bg-amber-700 text-white",children:"Voicemail"})}};return t.length===0?r.jsxs("div",{className:`${a?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg p-12 text-center`,children:[r.jsx(la,{className:`w-16 h-16 ${o} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${i}`,children:"No call records found"}),r.jsx("p",{className:o,children:"Phone call records will appear here when logged"})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(fa,{className:"h-[500px] sm:h-[600px] lg:h-[650px] pr-2 sm:pr-4",children:r.jsx("div",{className:"space-y-2",children:t.map(f=>r.jsxs("button",{onClick:()=>s(f),className:`w-full p-3 sm:p-4 rounded-lg border ${d} text-left transition-all min-h-[44px] ${e?.id===f.id?a?"bg-[#1e1e1e] border-blue-500 ring-1 ring-blue-500":"bg-blue-50 border-blue-300 ring-1 ring-blue-300":`${a?"bg-[#1e1e1e]":"bg-white"} ${u}`}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[h(f.status),r.jsx("p",{className:`text-sm ${i}`,children:f.customerName})]}),m(f.status)]}),r.jsx("p",{className:`text-xs ${o} mb-2`,children:f.customerPhone}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-3 h-3 ${o}`}),r.jsx("p",{className:`text-xs ${o}`,children:Rn(f.timestamp,"MMM d, h:mm a")})]}),r.jsx("p",{className:`text-xs ${o}`,children:f.duration})]})]},f.id))})})}),r.jsx("div",{className:"lg:col-span-2",children:e?r.jsxs("div",{className:`${a?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} rounded-lg border`,children:[r.jsx("div",{className:`p-3 sm:p-4 md:p-6 border-b ${d}`,children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3",children:[h(e.status),r.jsx("h3",{className:`text-base sm:text-lg ${i}`,children:e.customerName}),m(e.status)]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-4 h-4 ${o}`}),r.jsx("p",{className:`text-xs sm:text-sm ${o}`,children:Rn(e.timestamp,"MMMM d, yyyy  h:mm a")})]})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{confirm("Delete this call record?")&&n(e.id)},className:"min-h-[44px] h-9 sm:h-10 gap-2 w-full sm:w-auto",children:[r.jsx(ks,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})}),r.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${a?"text-[#a3a3a3]":"text-gray-700"}`,children:"Phone Number"}),r.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg ${a?"bg-[#161616]":"bg-gray-100 border border-gray-300"}`,children:[r.jsx(la,{className:`w-5 h-5 ${o}`}),r.jsx("p",{className:i,children:e.customerPhone})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${a?"text-[#a3a3a3]":"text-gray-700"}`,children:"Duration"}),r.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg ${a?"bg-[#161616]":"bg-gray-100 border border-gray-300"}`,children:[r.jsx(jr,{className:`w-5 h-5 ${o}`}),r.jsx("p",{className:i,children:e.duration})]})]}),e.notes&&r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${a?"text-[#a3a3a3]":"text-gray-700"}`,children:"Notes"}),r.jsx("div",{className:`p-4 rounded-lg ${a?"bg-[#161616]":"bg-gray-100 border border-gray-300"}`,children:r.jsx("p",{className:i,children:e.notes})})]})]})]}):r.jsx("div",{className:`${a?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg border p-12 text-center h-full flex items-center justify-center`,children:r.jsxs("div",{children:[r.jsx(la,{className:`w-16 h-16 ${o} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${i}`,children:"No call selected"}),r.jsx("p",{className:o,children:"Select a call record from the list to view details"})]})})})]})}function RLe({forms:t,selectedForm:e,onSelectForm:s,onDeleteForm:n,onUpdateStatus:a,isDark:i,textClass:o,textMutedClass:l,bgClass:c,bgElevatedClass:d,borderClass:u,hoverClass:h}){const m=f=>{switch(f){case"new":return r.jsx(De,{className:"text-xs bg-blue-600 hover:bg-blue-700 text-white",children:"New"});case"reviewed":return r.jsx(De,{className:"text-xs bg-amber-600 hover:bg-amber-700 text-white",children:"Reviewed"});case"responded":return r.jsx(De,{className:"text-xs bg-green-600 hover:bg-green-700 text-white",children:"Responded"})}};return t.length===0?r.jsxs("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg p-12 text-center`,children:[r.jsx(Jn,{className:`w-16 h-16 ${l} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${o}`,children:"No form submissions found"}),r.jsx("p",{className:l,children:"Customer form submissions will appear here"})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx(fa,{className:"h-[500px] sm:h-[600px] lg:h-[650px] pr-2 sm:pr-4",children:r.jsx("div",{className:"space-y-2",children:t.map(f=>r.jsxs("button",{onClick:()=>s(f),className:`w-full p-3 sm:p-4 rounded-lg border ${u} text-left transition-all min-h-[44px] ${e?.id===f.id?i?"bg-[#1e1e1e] border-blue-500 ring-1 ring-blue-500":"bg-blue-50 border-blue-300 ring-1 ring-blue-300":`${i?"bg-[#1e1e1e]":"bg-white"} ${h}`}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsx("p",{className:`text-sm ${o}`,children:f.formType}),m(f.status)]}),r.jsx("p",{className:`text-sm ${o} mb-1`,children:f.customerName}),r.jsx("p",{className:`text-xs ${l} mb-2 truncate`,children:f.customerEmail}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-3 h-3 ${l}`}),r.jsx("p",{className:`text-xs ${l}`,children:Rn(f.timestamp,"MMM d, h:mm a")})]})]},f.id))})})}),r.jsx("div",{className:"lg:col-span-2",children:e?r.jsxs("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"} rounded-lg border`,children:[r.jsx("div",{className:`p-3 sm:p-4 md:p-6 border-b ${u}`,children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3",children:[r.jsx("h3",{className:`text-base sm:text-lg ${o}`,children:e.formType}),m(e.status)]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-4 h-4 ${l}`}),r.jsx("p",{className:`text-xs sm:text-sm ${l}`,children:Rn(e.timestamp,"MMMM d, yyyy  h:mm a")})]})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{confirm("Delete this submission?")&&n(e.id)},className:"min-h-[44px] h-9 sm:h-10 gap-2 w-full sm:w-auto",children:[r.jsx(ks,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})}),r.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${i?"text-[#a3a3a3]":"text-gray-700"}`,children:"Customer Name"}),r.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg ${i?"bg-[#161616]":"bg-gray-100 border border-gray-300"}`,children:[r.jsx(ma,{className:`w-5 h-5 ${l}`}),r.jsx("p",{className:o,children:e.customerName})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${i?"text-[#a3a3a3]":"text-gray-700"}`,children:"Email Address"}),r.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg ${i?"bg-[#161616]":"bg-gray-100 border border-gray-300"}`,children:[r.jsx(Ds,{className:`w-5 h-5 ${l}`}),r.jsx("p",{className:o,children:e.customerEmail})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-3 block ${i?"text-[#a3a3a3]":"text-gray-700"}`,children:"Form Details"}),r.jsx("div",{className:`p-4 rounded-lg ${i?"bg-[#161616]":"bg-gray-100 border border-gray-300"} space-y-3`,children:Object.entries(e.data).map(([f,v])=>{const x=f.replace(/([A-Z])/g," $1").trim();return r.jsxs("div",{className:`pb-3 border-b ${u} last:border-0 last:pb-0`,children:[r.jsx("p",{className:`text-xs mb-1 capitalize ${l}`,children:x}),r.jsx("p",{className:`text-sm ${o}`,children:typeof v=="boolean"?v?"Yes":"No":String(v)})]},f)})})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-3 block ${i?"text-[#a3a3a3]":"text-gray-700"}`,children:"Update Status"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(W,{variant:e.status==="new"?"default":"outline",size:"sm",onClick:()=>a(e.id,"new"),className:"flex-1 min-h-[44px] h-10",children:"New"}),r.jsx(W,{variant:e.status==="reviewed"?"default":"outline",size:"sm",onClick:()=>a(e.id,"reviewed"),className:"flex-1 min-h-[44px] h-10",children:"Reviewed"}),r.jsx(W,{variant:e.status==="responded"?"default":"outline",size:"sm",onClick:()=>a(e.id,"responded"),className:"flex-1 min-h-[44px] h-10",children:"Responded"})]})]})]})]}):r.jsx("div",{className:`${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} rounded-lg border p-12 text-center h-full flex items-center justify-center`,children:r.jsxs("div",{children:[r.jsx(Jn,{className:`w-16 h-16 ${l} mx-auto mb-4`}),r.jsx("h3",{className:`text-lg mb-2 ${o}`,children:"No submission selected"}),r.jsx("p",{className:l,children:"Select a form submission from the list to view details"})]})})})]})}function pse(t){const[e,s]=j.useState([]),[n,a]=j.useState(null),i=async(h=!1)=>{try{a(null);const{data:m,error:f}=await pt.rpc("get_bookings_with_details",{p_venue_id:t||null,p_status:null,p_from_date:null,p_to_date:null});if(f)throw f;s(m||[])}catch(m){console.error("Error fetching bookings:",m),a(m.message),h&&re.error("Failed to load bookings")}},o=async h=>{try{const{data:m,error:f}=await pt.rpc("create_booking",{p_venue_id:h.venue_id,p_game_id:h.game_id,p_customer_id:h.customer_id,p_booking_date:h.booking_date,p_booking_time:h.booking_time,p_players:h.players,p_total_amount:h.total_amount,p_notes:h.notes||null});if(f)throw f;return re.success("Booking created successfully!"),await i(),m}catch(m){throw console.error("Error creating booking:",m),re.error(m.message||"Failed to create booking"),m}},l=async(h,m)=>{try{const{data:f,error:v}=await pt.from("bookings").update(m).eq("id",h).select().single();if(v)throw v;return re.success("Booking updated successfully!"),await i(),f}catch(f){throw console.error("Error updating booking:",f),re.error(f.message||"Failed to update booking"),f}},c=async(h,m,f=!1)=>{try{const{data:v,error:x}=await pt.rpc("cancel_booking",{p_booking_id:h,p_reason:m||null,p_issue_refund:f});if(x)throw x;return re.success("Booking cancelled successfully!"),await i(),v}catch(v){throw console.error("Error cancelling booking:",v),re.error(v.message||"Failed to cancel booking"),v}},d=async h=>{try{const{data:m,error:f}=await pt.from("bookings").select("*").eq("id",h).single();if(f)throw f;return m}catch(m){throw console.error("Error fetching booking:",m),re.error("Failed to load booking details"),m}},u=async(h,m)=>{try{const{data:f,error:v}=await pt.rpc("get_available_slots",{p_game_id:h,p_date:m});if(v)throw v;return f}catch(f){return console.error("Error fetching available slots:",f),[]}};return j.useEffect(()=>{i();const h=pt.channel("bookings-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},m=>{console.log("Booking changed:",m),i()}).subscribe();return()=>{h.unsubscribe()}},[t]),{bookings:e,loading:!1,error:n,createBooking:o,updateBooking:l,cancelBooking:c,getBookingById:d,getAvailableSlots:u,refreshBookings:i}}class Oc{static BACKEND_API_URL=window.location.hostname.includes("onrender.com")?"https://bookingtms-backend-api.onrender.com":(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1","http://localhost:3001");static getAuthHeaders(){return{"Content-Type":"application/json"}}static async parseResponse(e){const s=await e.text();if(!s)return{};try{return JSON.parse(s)}catch{throw console.warn("Failed to parse Stripe function response as JSON. Raw response:",s),new Error("Unexpected response format from Stripe service")}}static async createProductAndPrice(e){try{console.log("Creating Stripe product and price with enhanced features:",e);const s={...e.metadata||{},product_name:e.name,product_type:"game",created_at:new Date().toISOString(),currency:e.currency||"usd",...e.metadata?.organization_id&&{organization_id:e.metadata.organization_id},...e.metadata?.organization_name&&{organization_name:e.metadata.organization_name},...e.metadata?.company_name&&{company_name:e.metadata.company_name},...e.metadata?.venue_id&&{venue_id:e.metadata.venue_id},...e.metadata?.venue_name&&{venue_name:e.metadata.venue_name},...e.metadata?.calendar_id&&{calendar_id:e.metadata.calendar_id},...e.metadata?.calendar_name&&{calendar_name:e.metadata.calendar_name},...e.metadata?.venue_calendar_id&&{venue_calendar_id:e.metadata.venue_calendar_id},...e.metadata?.game_name&&{game_name:e.metadata.game_name},...e.metadata?.image_url&&{image_url:e.metadata.image_url},adult_price:e.price.toString(),adult_price_display:`$${e.price.toFixed(2)}`};if(e.childPrice!==void 0&&e.childPrice>0?(s.child_price=e.childPrice.toString(),s.child_price_display=`$${e.childPrice.toFixed(2)}`,s.child_pricing_enabled="true"):s.child_pricing_enabled="false",e.customCapacityFields&&e.customCapacityFields.length>0){s.custom_capacity_enabled="true",s.custom_capacity_count=e.customCapacityFields.length.toString(),e.customCapacityFields.forEach((c,d)=>{s[`custom_${d}_name`]=c.name,s[`custom_${d}_price`]=c.price.toString(),s[`custom_${d}_price_display`]=`$${c.price.toFixed(2)}`,s[`custom_${d}_min`]=c.min.toString(),s[`custom_${d}_max`]=c.max.toString(),s[`custom_${d}_range`]=`${c.min}-${c.max} ${c.name}`});const l=e.customCapacityFields.map(c=>`${c.name}: $${c.price.toFixed(2)}`).join(", ");s.custom_fields_summary=l}else s.custom_capacity_enabled="false";if(e.groupDiscountEnabled&&e.groupTiers&&e.groupTiers.length>0){s.group_discount_enabled="true",s.group_tiers_count=e.groupTiers.length.toString(),e.groupTiers.forEach((c,d)=>{s[`tier_${d}_min`]=c.minSize.toString(),s[`tier_${d}_max`]=c.maxSize.toString(),s[`tier_${d}_discount`]=c.discountPercent.toString(),s[`tier_${d}_display`]=`${c.minSize}-${c.maxSize} people: ${c.discountPercent}% off`});const l=e.groupTiers.map(c=>`${c.minSize}-${c.maxSize}: ${c.discountPercent}%`).join(", ");s.group_tiers_summary=l}else s.group_discount_enabled="false";let n=`Adult: $${e.price.toFixed(2)}`;e.childPrice&&e.childPrice>0&&(n+=`, Child: $${e.childPrice.toFixed(2)}`),e.customCapacityFields&&e.customCapacityFields.length>0&&(n+=`, +${e.customCapacityFields.length} custom`),e.groupDiscountEnabled&&e.groupTiers&&e.groupTiers.length>0&&(n+=`, Group discounts: ${e.groupTiers.length} tiers`),s.pricing_summary=n;const a=Object.fromEntries(Object.entries(s).filter(([l,c])=>c!==void 0));console.log("Enhanced Stripe metadata:",a);const i=await this.createProduct({name:e.name,description:e.description,metadata:a}),o=await this.createPrice(i,{amount:e.price,currency:e.currency||"usd",metadata:a});return console.log("Stripe product created with enhanced pricing:",{productId:i,priceId:o}),{productId:i,priceId:o}}catch(s){throw console.error("Error creating product and price:",s),s}}static async createProduct(e){try{const s=`${this.BACKEND_API_URL}/api/stripe/products`;console.log(" Calling Backend API:",s),console.log(" Request payload:",{name:e.name,description:e.description});const n=this.getAuthHeaders(),a=new AbortController,i=setTimeout(()=>a.abort(),3e4);let o;try{o=await fetch(s,{method:"POST",headers:n,body:JSON.stringify({name:e.name,description:e.description,metadata:e.metadata||{}}),signal:a.signal})}catch(c){throw clearTimeout(i),c.name==="AbortError"?new Error("Backend API request timed out. Please check your connection and try again."):new Error(`Cannot connect to backend API at ${s}. Please check if the backend is running.`)}clearTimeout(i),console.log(" Response status:",o.status,o.statusText);const l=await this.parseResponse(o);if(console.log(" Response data:",l),!o.ok){const c=l.error||`HTTP ${o.status}: Failed to create Stripe product`;throw console.error(" Backend API error:",c),new Error(c)}if(!l.productId)throw new Error("Stripe product creation did not return productId");return console.log(" Product created successfully:",l.productId),l.productId}catch(s){throw console.error(" Error in createProduct:",{message:s.message,name:s.name,stack:s.stack}),s}}static async createPrice(e,s){try{const n=this.getAuthHeaders(),a=await fetch(`${this.BACKEND_API_URL}/api/stripe/prices`,{method:"POST",headers:n,body:JSON.stringify({productId:e,amount:s.amount,currency:s.currency||"usd",lookup_key:s.lookup_key,metadata:s.metadata||{}})}),i=await this.parseResponse(a);if(!a.ok)throw new Error(i.error||"Failed to create Stripe price");if(!i.priceId)throw new Error("Stripe price creation did not return priceId");return i.priceId}catch(n){throw console.error("Error creating Stripe price:",n),n}}static async updateProduct(e,s){try{const n=this.getAuthHeaders(),a=await fetch(`${this.BACKEND_API_URL}/api/stripe/products/${e}`,{method:"PUT",headers:n,body:JSON.stringify(s)});if(!a.ok){const i=await this.parseResponse(a);throw new Error(i.error||"Failed to update Stripe product")}}catch(n){throw console.error("Error updating Stripe product:",n),n}}static async updateProductMetadata(e,s){try{await this.updateProduct(e,{metadata:s})}catch(n){console.error("Error updating product metadata:",n)}}static async archiveProduct(e){try{const s=this.getAuthHeaders(),n=await fetch(`${this.BACKEND_API_URL}/api/stripe/products/${e}`,{method:"DELETE",headers:s});if(!n.ok){const a=await this.parseResponse(n).catch(()=>({}));console.error("Failed to archive Stripe product:",a)}}catch(s){console.error("Error archiving Stripe product:",s)}}static priceHasChanged(e,s){return Math.abs(e-s)>.01}static async createWithRetry(e,s=3){let n=null;for(let a=1;a<=s;a++)try{return await this.createProductAndPrice(e)}catch(i){n=i,console.error(`Attempt ${a} failed:`,i),a<s&&await new Promise(o=>setTimeout(o,1e3*a))}throw n||new Error("Failed to create Stripe product after retries")}static async getProduct(e){try{const s=this.getAuthHeaders(),n=await fetch(`${this.BACKEND_API_URL}/api/stripe/products/${e}`,{method:"GET",headers:s}),a=await this.parseResponse(n);if(!n.ok)throw new Error(a.error||"Failed to get product");return a.product}catch(s){throw console.error("Error getting product:",s),s}}static async getProductPrices(e){try{console.log(" Fetching prices for product:",e);const s=this.getAuthHeaders(),n=await fetch(`${this.BACKEND_API_URL}/api/stripe/products/${e}/prices`,{method:"GET",headers:s}),a=await this.parseResponse(n);if(!n.ok)throw new Error(a.error||"Failed to get prices");return console.log(" Retrieved prices:",a.prices),a.prices}catch(s){throw console.error("Error getting product prices:",s),s}}static async linkExistingProduct(e){try{console.log(" Linking existing product:",e.productId);const s=await this.getProduct(e.productId),n=await this.getProductPrices(e.productId);return{productId:e.productId,priceId:e.priceId||n[0]?.id,prices:n.map(a=>({priceId:a.id,unitAmount:a.unit_amount,currency:a.currency,lookupKey:a.lookup_key,type:a.metadata?.type||a.metadata?.pricing_type,metadata:a.metadata}))}}catch(s){throw console.error("Error linking product:",s),s}}static async updatePriceByLookupKey(e,s,n){try{console.log("Updating price via lookup key:",{lookupKey:e,newAmount:s,productId:n});const a=await this.createPrice(n,{amount:s,currency:"usd",lookup_key:e});return console.log("New price created with lookup key:",a),a}catch(a){throw console.error("Error updating price by lookup key:",a),a}}static async getPriceByLookupKey(e){try{const s=this.getAuthHeaders(),n=await fetch(`${this.BACKEND_API_URL}/api/stripe/prices/lookup/${encodeURIComponent(e)}`,{method:"GET",headers:s}),a=await this.parseResponse(n);if(!n.ok)throw new Error(a.error||"Failed to get price by lookup key");return a.price}catch(s){throw console.error("Error getting price by lookup key:",s),s}}static isValidProductId(e){return/^prod_[a-zA-Z0-9]+$/.test(e)}static isValidLookupKey(e){return/^[a-z0-9_-]+$/.test(e)&&e.length<=250}}function s3(t){const{currentUser:e}=no(),[s,n]=j.useState([]),[a,i]=j.useState(null),[o,l]=j.useState(!0),[c,d]=j.useState(!0),u=async(g=!1)=>{try{i(null),c&&l(!0);let b=pt.from("games").select("*").order("created_at",{ascending:!1});t&&(b=b.eq("venue_id",t));const{data:w,error:N}=await b;if(N)throw N;const C=(w||[]).map(S=>({...S,operatingDays:S.schedule?.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:S.schedule?.startTime||"10:00",endTime:S.schedule?.endTime||"22:00",slotInterval:S.schedule?.slotInterval||60,advanceBooking:S.schedule?.advanceBooking||30,customHoursEnabled:S.schedule?.customHoursEnabled||!1,customHours:S.schedule?.customHours||{},customDates:S.schedule?.customDates||[],blockedDates:S.schedule?.blockedDates||[]}));n(C)}catch(b){console.error("Error fetching games:",b),i(b.message),g&&re.error("Failed to load games")}finally{c&&(l(!1),d(!1))}},h=async g=>{let b=null,w=null,N=null;try{if(console.log("useGames.createGame called with:",g),console.log("Current user from context:",e),!g.venue_id)throw new Error("Venue ID is required to create a game");const{data:C}=await pt.from("venues").select("organization_id, organization_name, name, id").eq("id",g.venue_id).single();if(N=C,g.stripe_product_id&&g.stripe_price_id)console.log("Using Stripe IDs from wizard:",{productId:g.stripe_product_id,priceId:g.stripe_price_id}),b=g.stripe_product_id,w=g.stripe_price_id;else if(g.price&&g.price>0)try{console.log("Attempting to auto-create Stripe product and price..."),re.loading("Creating payment product...",{id:"stripe-create"});const U=`${N?.organization_id||"org"}_${g.venue_id}_${Date.now()}_default`.toLowerCase().replace(/[^a-z0-9_-]/g,"_").substring(0,250),{productId:Z,priceId:K}=await Oc.createProductAndPrice({name:g.name,description:g.description||`${g.name} - ${g.duration} minutes`,price:g.price,currency:"usd",metadata:{game_name:g.name,venue_id:g.venue_id,venue_name:N?.name||"",organization_id:N?.organization_id||"",organization_name:N?.organization_name||"",duration:g.duration.toString(),difficulty:g.difficulty,image_url:g.image_url||"",lookup_key:U}});b=Z,w=K,console.log("Stripe product created:",Z,"price:",K),re.success("Payment product created!",{id:"stripe-create"})}catch(U){console.warn("Stripe product creation failed (non-blocking):",U),re.dismiss("stripe-create"),console.log("Continuing without Stripe integration")}else console.log("No price set or Stripe not configured - skipping Stripe product creation");const{data:{session:S},error:A}=await pt.auth.getSession(),k=S?.user?.id||null;k?console.log("Using Supabase user ID:",k):console.log("No Supabase session - proceeding with anon access");const E={operatingDays:g.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:g.startTime||"10:00",endTime:g.endTime||"22:00",slotInterval:g.slotInterval||60,advanceBooking:g.advanceBooking||30,customHoursEnabled:g.customHoursEnabled||!1,customHours:g.customHours||{},customDates:g.customDates||[],blockedDates:g.blockedDates||[]},{operatingDays:O,startTime:$,endTime:T,slotInterval:I,advanceBooking:L,customHoursEnabled:z,customHours:M,customDates:V,blockedDates:B,...F}=g,J={...F,schedule:E,created_by:k,stripe_product_id:b,stripe_price_id:w,active_price_id:w,stripe_sync_status:b?"synced":"pending",stripe_last_sync:b?new Date().toISOString():null};console.log("Inserting game data:",J);const{data:ee,error:q}=await pt.from("games").insert([J]).select().single();if(q)throw console.error("Supabase insert error:",{message:q.message,code:q.code,details:q.details,hint:q.hint}),q;try{const U=g.child_price||g.childPrice;if(U&&U>0){console.log("Creating pricing tiers:",{adultPrice:g.price,childPrice:U});const{data:Z,error:K}=await pt.rpc("create_default_pricing_tiers",{p_game_id:ee.id,p_organization_id:N?.organization_id,p_adult_price:g.price,p_child_price:U});K?console.warn("Failed to create pricing tiers (non-critical):",K):console.log("Pricing tiers created:",Z)}}catch(U){console.warn("Error creating pricing tiers (non-critical):",U)}if(b)try{console.log("Updating Stripe product with game ID:",ee.id),await Oc.updateProductMetadata(b,{game_id:ee.id})}catch(U){console.warn("Failed to update Stripe metadata (non-critical):",U)}return console.log("Game created successfully in database:",ee),re.success(b?"Game created and ready for payments!":"Game created successfully!"),await u(!1),ee}catch(C){throw console.error("Error creating game:",{message:C?.message,code:C?.code,details:C?.details,hint:C?.hint,stack:C?.stack}),b?(console.log("Rolling back: Archiving Stripe product",b),await Oc.archiveProduct(b),re.error("Failed to create game. Stripe product has been archived.")):re.error(C.message||"Failed to create game"),C}},m=async(g,b)=>{try{const{data:w}=await pt.from("games").select("*").eq("id",g).single();if(!w)throw new Error("Game not found");if((b.name||b.description||b.price)&&w.stripe_product_id){if(console.log("Updating Stripe product..."),re.loading("Updating payment product...",{id:"stripe-update"}),(b.name||b.description)&&await Oc.updateProduct(w.stripe_product_id,{name:b.name,description:b.description}),b.price&&Oc.priceHasChanged(w.price,b.price))if(w.price_lookup_key){const E=await Oc.updatePriceByLookupKey(w.price_lookup_key,b.price,w.stripe_product_id);b.stripe_price_id=E,b.active_price_id=E,console.log("Price updated via lookup key:",E)}else{const E=await Oc.createPrice(w.stripe_product_id,{amount:b.price,currency:"usd"});b.stripe_price_id=E,b.active_price_id=E,console.log("New Stripe price created (no lookup key):",E)}b.stripe_sync_status="synced",b.stripe_last_sync=new Date().toISOString(),re.success("Payment product updated!",{id:"stripe-update"})}const C=["operatingDays","startTime","endTime","slotInterval","advanceBooking","customHoursEnabled","customHours","customDates","blockedDates"];if(C.some(E=>b[E]!==void 0)){const E={operatingDays:b.operatingDays||w.schedule?.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:b.startTime||w.schedule?.startTime||"10:00",endTime:b.endTime||w.schedule?.endTime||"22:00",slotInterval:b.slotInterval||w.schedule?.slotInterval||60,advanceBooking:b.advanceBooking||w.schedule?.advanceBooking||30,customHoursEnabled:b.customHoursEnabled!==void 0?b.customHoursEnabled:w.schedule?.customHoursEnabled||!1,customHours:b.customHours||w.schedule?.customHours||{},customDates:b.customDates||w.schedule?.customDates||[],blockedDates:b.blockedDates||w.schedule?.blockedDates||[]};C.forEach(O=>delete b[O]),b.schedule=E,console.log("Updating game schedule:",E)}const{data:A,error:k}=await pt.from("games").update(b).eq("id",g).select().single();if(k)throw k;return re.success("Game updated successfully!"),await u(),A}catch(w){throw console.error("Error updating game:",w),re.error(w.message||"Failed to update game"),w}},f=async g=>{try{const{data:b,error:w}=await pt.from("bookings").select("id").eq("game_id",g).limit(1);if(w&&console.error("Error checking bookings:",w),b&&b.length>0)throw re.error("Cannot delete game with existing bookings. Please cancel all bookings first or archive the game instead.",{duration:5e3}),new Error("Game has existing bookings");const{error:N}=await pt.from("games").delete().eq("id",g);if(N){if(N.code==="23503")re.error("Cannot delete game with existing bookings. Please cancel all bookings first or archive the game instead.",{duration:5e3});else throw N;throw N}re.success("Game deleted successfully!"),await u()}catch(b){throw console.error("Error deleting game:",b),b.message!=="Game has existing bookings"&&b.code!=="23503"&&re.error(b.message||"Failed to delete game"),b}},v=async g=>{try{const{data:b,error:w}=await pt.from("games").select("*").eq("id",g).single();if(w)throw w;return b}catch(b){throw console.error("Error fetching game:",b),re.error("Failed to load game details"),b}},x=async g=>{try{const{data:b,error:w}=await pt.from("games").select("*").eq("venue_id",g).eq("status","active").order("name");if(w)throw w;return b||[]}catch(b){return console.error("Error fetching games by venue:",b),[]}};return j.useEffect(()=>{u();const g=pt.channel("games-changes").on("postgres_changes",{event:"*",schema:"public",table:"games"},b=>{console.log("Game changed:",b),u()}).subscribe();return()=>{g.unsubscribe()}},[t]),{games:s,loading:o,error:a,createGame:h,updateGame:m,deleteGame:f,getGameById:v,getGamesByVenue:x,refreshGames:u}}function n3(){const[t,e]=j.useState([]),[s,n]=j.useState(null),[a,i]=j.useState(!0),[o,l]=j.useState(!0),c=async(v=!1)=>{try{n(null),o&&i(!0);const{data:x,error:g}=await pt.from("venues").select("*").order("created_at",{ascending:!1});if(g)throw g;e(x||[])}catch(x){console.error("Error fetching venues:",x),n(x.message),v&&re.error("Failed to load venues")}finally{o&&(i(!1),l(!1))}},d=async v=>{try{console.log("Creating venue with data:",v);const{data:{session:x}}=await pt.auth.getSession(),g={...v,created_by:x?.user?.id||null};console.log("Inserting venue data:",g);const{data:b,error:w}=await pt.from("venues").insert([g]).select().single();if(w)throw console.error("Venue insert error:",w),w;return console.log("Venue created successfully:",b),console.log("Generated embed_key:",b.embed_key),console.log("Generated slug:",b.slug),re.success("Venue created successfully!"),await c(),b}catch(x){throw console.error("Error creating venue:",x),re.error(x.message||"Failed to create venue"),x}},u=async(v,x)=>{try{const{data:g,error:b}=await pt.from("venues").update(x).eq("id",v).select().single();if(b)throw b;return re.success("Venue updated successfully!"),await c(),g}catch(g){throw console.error("Error updating venue:",g),re.error(g.message||"Failed to update venue"),g}},h=async v=>{try{const{error:x}=await pt.from("venues").delete().eq("id",v);if(x)throw x;re.success("Venue deleted successfully!"),await c()}catch(x){throw console.error("Error deleting venue:",x),re.error(x.message||"Failed to delete venue"),x}},m=async v=>{try{const{data:x,error:g}=await pt.from("venues").select("*").eq("id",v).single();if(g)throw g;return x}catch(x){throw console.error("Error fetching venue:",x),re.error("Failed to load venue details"),x}},f=async v=>{try{const{data:x,error:g}=await pt.rpc("get_venue_stats",{p_venue_id:v});if(g)throw g;return x}catch(x){return console.error("Error fetching venue stats:",x),null}};return j.useEffect(()=>{c();const v=pt.channel("venues-changes").on("postgres_changes",{event:"*",schema:"public",table:"venues"},x=>{console.log("Venue changed:",x),c()}).subscribe();return()=>{v.unsubscribe()}},[]),{venues:t,loading:a,error:s,createVenue:d,updateVenue:u,deleteVenue:h,getVenueById:m,getVenueStats:f,refreshVenues:c}}const Eu=({children:t,permissions:e,anyPermissions:s,role:n,fallback:a=null,hide:i=!0})=>{const{hasAllPermissions:o,hasAnyPermission:l,isRole:c,currentUser:d}=no();if(n){const u=Array.isArray(n)?n:[n];if(!d||!u.includes(d.role))return i?r.jsx(r.Fragment,{children:a}):null}return e&&!o(e)?i?r.jsx(r.Fragment,{children:a}):null:s&&!l(s)?i?r.jsx(r.Fragment,{children:a}):null:r.jsx(r.Fragment,{children:t})};function Fx({className:t,...e}){return r.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:r.jsx("table",{"data-slot":"table",className:Ar("w-full caption-bottom text-sm",t),...e})})}function Bx({className:t,...e}){return r.jsx("thead",{"data-slot":"table-header",className:Ar("[&_tr]:border-b",t),...e})}function Ux({className:t,...e}){return r.jsx("tbody",{"data-slot":"table-body",className:Ar("[&_tr:last-child]:border-0",t),...e})}function ui({className:t,...e}){return r.jsx("tr",{"data-slot":"table-row",className:Ar("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...e})}function fs({className:t,...e}){return r.jsx("th",{"data-slot":"table-head",className:Ar("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function Jt({className:t,...e}){return r.jsx("td",{"data-slot":"table-cell",className:Ar("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function MLe(t){const e=LLe(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(BLe);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function LLe(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=zLe(a),l=ULe(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FLe=Symbol("radix.slottable");function BLe(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FLe}function ULe(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function zLe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function a3(t){const e=j.useRef({value:t,previous:t});return j.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var xse=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VLe="VisuallyHidden",WLe=j.forwardRef((t,e)=>r.jsx(Jr.span,{...t,ref:e,style:{...xse,...t.style}}));WLe.displayName=VLe;var qLe=[" ","Enter","ArrowUp","ArrowDown"],HLe=[" ","Enter"],sg="Select",[i3,o3,GLe]=fw(sg),[cy]=fl(sg,[GLe,Kv]),l3=Kv(),[YLe,yp]=cy(sg),[KLe,XLe]=cy(sg),gse=t=>{const{__scopeSelect:e,children:s,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:f,form:v}=t,x=l3(e),[g,b]=j.useState(null),[w,N]=j.useState(null),[C,S]=j.useState(!1),A=mg(d),[k,E]=qc({prop:n,defaultProp:a??!1,onChange:i,caller:sg}),[O,$]=qc({prop:o,defaultProp:l,onChange:c,caller:sg}),T=j.useRef(null),I=g?v||!!g.closest("form"):!0,[L,z]=j.useState(new Set),M=Array.from(L).map(V=>V.props.value).join(";");return r.jsx(fI,{...x,children:r.jsxs(YLe,{required:f,scope:e,trigger:g,onTriggerChange:b,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:Uc(),value:O,onValueChange:$,open:k,onOpenChange:E,dir:A,triggerPointerDownPosRef:T,disabled:m,children:[r.jsx(i3.Provider,{scope:e,children:r.jsx(KLe,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(V=>{z(B=>new Set(B).add(V))},[]),onNativeOptionRemove:j.useCallback(V=>{z(B=>{const F=new Set(B);return F.delete(V),F})},[]),children:s})}),I?r.jsxs(Fse,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:O,onChange:V=>$(V.target.value),disabled:m,form:v,children:[O===void 0?r.jsx("option",{value:""}):null,Array.from(L)]},M):null]})})};gse.displayName=sg;var vse="SelectTrigger",yse=j.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:n=!1,...a}=t,i=l3(s),o=yp(vse,s),l=o.disabled||n,c=bs(e,o.onTriggerChange),d=o3(s),u=j.useRef("touch"),[h,m,f]=Use(x=>{const g=d().filter(N=>!N.disabled),b=g.find(N=>N.value===o.value),w=zse(g,x,b);w!==void 0&&o.onValueChange(w.value)}),v=x=>{l||(o.onOpenChange(!0),f()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(i5,{asChild:!0,...i,children:r.jsx(Jr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Bse(o.value)?"":void 0,...a,ref:c,onClick:ur(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&v(x)}),onPointerDown:ur(a.onPointerDown,x=>{u.current=x.pointerType;const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:ur(a.onKeyDown,x=>{const g=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(g&&x.key===" ")&&qLe.includes(x.key)&&(v(),x.preventDefault())})})})});yse.displayName=vse;var bse="SelectValue",wse=j.forwardRef((t,e)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:o="",...l}=t,c=yp(bse,s),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=bs(e,c.onValueNodeChange);return Ai(()=>{d(u)},[d,u]),r.jsx(Jr.span,{...l,ref:h,style:{pointerEvents:"none"},children:Bse(c.value)?r.jsx(r.Fragment,{children:o}):i})});wse.displayName=bse;var QLe="SelectIcon",jse=j.forwardRef((t,e)=>{const{__scopeSelect:s,children:n,...a}=t;return r.jsx(Jr.span,{"aria-hidden":!0,...a,ref:e,children:n||""})});jse.displayName=QLe;var ZLe="SelectPortal",Nse=t=>r.jsx(vw,{asChild:!0,...t});Nse.displayName=ZLe;var ng="SelectContent",Sse=j.forwardRef((t,e)=>{const s=yp(ng,t.__scopeSelect),[n,a]=j.useState();if(Ai(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?zv.createPortal(r.jsx(Cse,{scope:t.__scopeSelect,children:r.jsx(i3.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),i):null}return r.jsx(kse,{...t,ref:e})});Sse.displayName=ng;var du=10,[Cse,bp]=cy(ng),JLe="SelectContentImpl",e9e=MLe("SelectContent.RemoveScroll"),kse=j.forwardRef((t,e)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:x,avoidCollisions:g,...b}=t,w=yp(ng,s),[N,C]=j.useState(null),[S,A]=j.useState(null),k=bs(e,ie=>C(ie)),[E,O]=j.useState(null),[$,T]=j.useState(null),I=o3(s),[L,z]=j.useState(!1),M=j.useRef(!1);j.useEffect(()=>{if(N)return l5(N)},[N]),e5();const V=j.useCallback(ie=>{const[be,...ue]=I().map(ye=>ye.ref.current),[oe]=ue.slice(-1),pe=document.activeElement;for(const ye of ie)if(ye===pe||(ye?.scrollIntoView({block:"nearest"}),ye===be&&S&&(S.scrollTop=0),ye===oe&&S&&(S.scrollTop=S.scrollHeight),ye?.focus(),document.activeElement!==pe))return},[I,S]),B=j.useCallback(()=>V([E,N]),[V,E,N]);j.useEffect(()=>{L&&B()},[L,B]);const{onOpenChange:F,triggerPointerDownPosRef:J}=w;j.useEffect(()=>{if(N){let ie={x:0,y:0};const be=oe=>{ie={x:Math.abs(Math.round(oe.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(oe.pageY)-(J.current?.y??0))}},ue=oe=>{ie.x<=10&&ie.y<=10?oe.preventDefault():N.contains(oe.target)||F(!1),document.removeEventListener("pointermove",be),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",ue,{capture:!0})}}},[N,F,J]),j.useEffect(()=>{const ie=()=>F(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[F]);const[ee,q]=Use(ie=>{const be=I().filter(pe=>!pe.disabled),ue=be.find(pe=>pe.ref.current===document.activeElement),oe=zse(be,ie,ue);oe&&setTimeout(()=>oe.ref.current.focus())}),U=j.useCallback((ie,be,ue)=>{const oe=!M.current&&!ue;(w.value!==void 0&&w.value===be||oe)&&(O(ie),oe&&(M.current=!0))},[w.value]),Z=j.useCallback(()=>N?.focus(),[N]),K=j.useCallback((ie,be,ue)=>{const oe=!M.current&&!ue;(w.value!==void 0&&w.value===be||oe)&&T(ie)},[w.value]),se=n==="popper"?sO:_se,ne=se===sO?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:x,avoidCollisions:g}:{};return r.jsx(Cse,{scope:s,content:N,viewport:S,onViewportChange:A,itemRefCallback:U,selectedItem:E,onItemLeave:Z,itemTextRefCallback:K,focusSelectedItem:B,selectedItemText:$,position:n,isPositioned:L,searchRef:ee,children:r.jsx(bw,{as:e9e,allowPinchZoom:!0,children:r.jsx(xw,{asChild:!0,trapped:w.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:ur(a,ie=>{w.trigger?.focus({preventScroll:!0}),ie.preventDefault()}),children:r.jsx(pw,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:r.jsx(se,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:ie=>ie.preventDefault(),...b,...ne,onPlaced:()=>z(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ur(b.onKeyDown,ie=>{const be=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!be&&ie.key.length===1&&q(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let oe=I().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const pe=ie.target,ye=oe.indexOf(pe);oe=oe.slice(ye+1)}setTimeout(()=>V(oe)),ie.preventDefault()}})})})})})})});kse.displayName=JLe;var t9e="SelectItemAlignedPosition",_se=j.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:n,...a}=t,i=yp(ng,s),o=bp(ng,s),[l,c]=j.useState(null),[d,u]=j.useState(null),h=bs(e,k=>u(k)),m=o3(s),f=j.useRef(!1),v=j.useRef(!0),{viewport:x,selectedItem:g,selectedItemText:b,focusSelectedItem:w}=o,N=j.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&g&&b){const k=i.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),$=b.getBoundingClientRect();if(i.dir!=="rtl"){const pe=$.left-E.left,ye=O.left-pe,$e=k.left-ye,Se=k.width+$e,Y=Math.max(Se,E.width),Le=window.innerWidth-du,xe=xb(ye,[du,Math.max(du,Le-Y)]);l.style.minWidth=Se+"px",l.style.left=xe+"px"}else{const pe=E.right-$.right,ye=window.innerWidth-O.right-pe,$e=window.innerWidth-k.right-ye,Se=k.width+$e,Y=Math.max(Se,E.width),Le=window.innerWidth-du,xe=xb(ye,[du,Math.max(du,Le-Y)]);l.style.minWidth=Se+"px",l.style.right=xe+"px"}const T=m(),I=window.innerHeight-du*2,L=x.scrollHeight,z=window.getComputedStyle(d),M=parseInt(z.borderTopWidth,10),V=parseInt(z.paddingTop,10),B=parseInt(z.borderBottomWidth,10),F=parseInt(z.paddingBottom,10),J=M+V+L+F+B,ee=Math.min(g.offsetHeight*5,J),q=window.getComputedStyle(x),U=parseInt(q.paddingTop,10),Z=parseInt(q.paddingBottom,10),K=k.top+k.height/2-du,se=I-K,ne=g.offsetHeight/2,ie=g.offsetTop+ne,be=M+V+ie,ue=J-be;if(be<=K){const pe=T.length>0&&g===T[T.length-1].ref.current;l.style.bottom="0px";const ye=d.clientHeight-x.offsetTop-x.offsetHeight,$e=Math.max(se,ne+(pe?Z:0)+ye+B),Se=be+$e;l.style.height=Se+"px"}else{const pe=T.length>0&&g===T[0].ref.current;l.style.top="0px";const $e=Math.max(K,M+x.offsetTop+(pe?U:0)+ne)+ue;l.style.height=$e+"px",x.scrollTop=be-K+x.offsetTop}l.style.margin=`${du}px 0`,l.style.minHeight=ee+"px",l.style.maxHeight=I+"px",n?.(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,d,x,g,b,i.dir,n]);Ai(()=>N(),[N]);const[C,S]=j.useState();Ai(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const A=j.useCallback(k=>{k&&v.current===!0&&(N(),w?.(),v.current=!1)},[N,w]);return r.jsx(s9e,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:A,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(Jr.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});_se.displayName=t9e;var r9e="SelectPopperPosition",sO=j.forwardRef((t,e)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=du,...i}=t,o=l3(s);return r.jsx(pI,{...o,...i,ref:e,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sO.displayName=r9e;var[s9e,k8]=cy(ng,{}),nO="SelectViewport",Ase=j.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:n,...a}=t,i=bp(nO,s),o=k8(nO,s),l=bs(e,i.onViewportChange),c=j.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(i3.Slot,{scope:s,children:r.jsx(Jr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ur(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m?.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const v=window.innerHeight-du*2,x=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),b=Math.max(x,g);if(b<v){const w=b+f,N=Math.min(v,w),C=w-N;h.style.height=N+"px",h.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Ase.displayName=nO;var Ese="SelectGroup",[n9e,a9e]=cy(Ese),i9e=j.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,a=Uc();return r.jsx(n9e,{scope:s,id:a,children:r.jsx(Jr.div,{role:"group","aria-labelledby":a,...n,ref:e})})});i9e.displayName=Ese;var Pse="SelectLabel",o9e=j.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,a=a9e(Pse,s);return r.jsx(Jr.div,{id:a.id,...n,ref:e})});o9e.displayName=Pse;var E4="SelectItem",[l9e,Tse]=cy(E4),Ose=j.forwardRef((t,e)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...o}=t,l=yp(E4,s),c=bp(E4,s),d=l.value===n,[u,h]=j.useState(i??""),[m,f]=j.useState(!1),v=bs(e,w=>c.itemRefCallback?.(w,n,a)),x=Uc(),g=j.useRef("touch"),b=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(l9e,{scope:s,value:n,disabled:a,textId:x,isSelected:d,onItemTextChange:j.useCallback(w=>{h(N=>N||(w?.textContent??"").trim())},[]),children:r.jsx(i3.ItemSlot,{scope:s,value:n,disabled:a,textValue:u,children:r.jsx(Jr.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:ur(o.onFocus,()=>f(!0)),onBlur:ur(o.onBlur,()=>f(!1)),onClick:ur(o.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:ur(o.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:ur(o.onPointerDown,w=>{g.current=w.pointerType}),onPointerMove:ur(o.onPointerMove,w=>{g.current=w.pointerType,a?c.onItemLeave?.():g.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ur(o.onPointerLeave,w=>{w.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:ur(o.onKeyDown,w=>{c.searchRef?.current!==""&&w.key===" "||(HLe.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});Ose.displayName=E4;var A1="SelectItemText",Ise=j.forwardRef((t,e)=>{const{__scopeSelect:s,className:n,style:a,...i}=t,o=yp(A1,s),l=bp(A1,s),c=Tse(A1,s),d=XLe(A1,s),[u,h]=j.useState(null),m=bs(e,b=>h(b),c.onItemTextChange,b=>l.itemTextRefCallback?.(b,c.value,c.disabled)),f=u?.textContent,v=j.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:x,onNativeOptionRemove:g}=d;return Ai(()=>(x(v),()=>g(v)),[x,g,v]),r.jsxs(r.Fragment,{children:[r.jsx(Jr.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zv.createPortal(i.children,o.valueNode):null]})});Ise.displayName=A1;var $se="SelectItemIndicator",Dse=j.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t;return Tse($se,s).isSelected?r.jsx(Jr.span,{"aria-hidden":!0,...n,ref:e}):null});Dse.displayName=$se;var aO="SelectScrollUpButton",Rse=j.forwardRef((t,e)=>{const s=bp(aO,t.__scopeSelect),n=k8(aO,t.__scopeSelect),[a,i]=j.useState(!1),o=bs(e,n.onScrollButtonChange);return Ai(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?r.jsx(Lse,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Rse.displayName=aO;var iO="SelectScrollDownButton",Mse=j.forwardRef((t,e)=>{const s=bp(iO,t.__scopeSelect),n=k8(iO,t.__scopeSelect),[a,i]=j.useState(!1),o=bs(e,n.onScrollButtonChange);return Ai(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),a?r.jsx(Lse,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Mse.displayName=iO;var Lse=j.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=t,i=bp("SelectScrollButton",s),o=j.useRef(null),l=o3(s),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),Ai(()=>{l().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),r.jsx(Jr.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:ur(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ur(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ur(a.onPointerLeave,()=>{c()})})}),c9e="SelectSeparator",d9e=j.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t;return r.jsx(Jr.div,{"aria-hidden":!0,...n,ref:e})});d9e.displayName=c9e;var oO="SelectArrow",u9e=j.forwardRef((t,e)=>{const{__scopeSelect:s,...n}=t,a=l3(s),i=yp(oO,s),o=bp(oO,s);return i.open&&o.position==="popper"?r.jsx(xI,{...a,...n,ref:e}):null});u9e.displayName=oO;var h9e="SelectBubbleInput",Fse=j.forwardRef(({__scopeSelect:t,value:e,...s},n)=>{const a=j.useRef(null),i=bs(n,a),o=a3(e);return j.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&u){const h=new Event("change",{bubbles:!0});u.call(l,e),l.dispatchEvent(h)}},[o,e]),r.jsx(Jr.select,{...s,style:{...xse,...s.style},ref:i,defaultValue:e})});Fse.displayName=h9e;function Bse(t){return t===""||t===void 0}function Use(t){const e=Co(t),s=j.useRef(""),n=j.useRef(0),a=j.useCallback(o=>{const l=s.current+o;e(l),(function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),i=j.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function zse(t,e,s){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=s?t.indexOf(s):-1;let o=m9e(t,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==s));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function m9e(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var f9e=gse,p9e=yse,x9e=wse,g9e=jse,v9e=Nse,y9e=Sse,b9e=Ase,w9e=Ose,j9e=Ise,N9e=Dse,S9e=Rse,C9e=Mse;function sr({...t}){return r.jsx(f9e,{"data-slot":"select",...t})}function nr({...t}){return r.jsx(x9e,{"data-slot":"select-value",...t})}function ar({className:t,size:e="default",children:s,...n}){return r.jsxs(p9e,{"data-slot":"select-trigger","data-size":e,className:Ar("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[s,r.jsx(g9e,{asChild:!0,children:r.jsx(Mc,{className:"size-4 opacity-50"})})]})}function ir({className:t,children:e,position:s="popper",...n}){return r.jsx(v9e,{children:r.jsxs(y9e,{"data-slot":"select-content",className:Ar("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[100] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[r.jsx(k9e,{}),r.jsx(b9e,{className:Ar("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),r.jsx(_9e,{})]})})}function Ae({className:t,children:e,...s}){return r.jsxs(w9e,{"data-slot":"select-item",className:Ar("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[r.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:r.jsx(N9e,{children:r.jsx(Sr,{className:"size-4"})})}),r.jsx(j9e,{children:e})]})}function k9e({className:t,...e}){return r.jsx(S9e,{"data-slot":"select-scroll-up-button",className:Ar("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx($Y,{className:"size-4"})})}function _9e({className:t,...e}){return r.jsx(C9e,{"data-slot":"select-scroll-down-button",className:Ar("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(Mc,{className:"size-4"})})}function A9e(t){const e=E9e(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(T9e);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function E9e(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=I9e(a),l=O9e(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var P9e=Symbol("radix.slottable");function T9e(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===P9e}function O9e(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function I9e(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var c3="Dialog",[Vse,Wse]=fl(c3),[$9e,Mu]=Vse(c3),qse=t=>{const{__scopeDialog:e,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=j.useRef(null),c=j.useRef(null),[d,u]=qc({prop:n,defaultProp:a??!1,onChange:i,caller:c3});return r.jsx($9e,{scope:e,triggerRef:l,contentRef:c,contentId:Uc(),titleId:Uc(),descriptionId:Uc(),open:d,onOpenChange:u,onOpenToggle:j.useCallback(()=>u(h=>!h),[u]),modal:o,children:s})};qse.displayName=c3;var Hse="DialogTrigger",Gse=j.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,a=Mu(Hse,s),i=bs(e,a.triggerRef);return r.jsx(Jr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":E8(a.open),...n,ref:i,onClick:ur(t.onClick,a.onOpenToggle)})});Gse.displayName=Hse;var _8="DialogPortal",[D9e,Yse]=Vse(_8,{forceMount:void 0}),Kse=t=>{const{__scopeDialog:e,forceMount:s,children:n,container:a}=t,i=Mu(_8,e);return r.jsx(D9e,{scope:e,forceMount:s,children:j.Children.map(n,o=>r.jsx(Uo,{present:s||i.open,children:r.jsx(vw,{asChild:!0,container:a,children:o})}))})};Kse.displayName=_8;var P4="DialogOverlay",Xse=j.forwardRef((t,e)=>{const s=Yse(P4,t.__scopeDialog),{forceMount:n=s.forceMount,...a}=t,i=Mu(P4,t.__scopeDialog);return i.modal?r.jsx(Uo,{present:n||i.open,children:r.jsx(M9e,{...a,ref:e})}):null});Xse.displayName=P4;var R9e=A9e("DialogOverlay.RemoveScroll"),M9e=j.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,a=Mu(P4,s);return r.jsx(bw,{as:R9e,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Jr.div,{"data-state":E8(a.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),ag="DialogContent",Qse=j.forwardRef((t,e)=>{const s=Yse(ag,t.__scopeDialog),{forceMount:n=s.forceMount,...a}=t,i=Mu(ag,t.__scopeDialog);return r.jsx(Uo,{present:n||i.open,children:i.modal?r.jsx(L9e,{...a,ref:e}):r.jsx(F9e,{...a,ref:e})})});Qse.displayName=ag;var L9e=j.forwardRef((t,e)=>{const s=Mu(ag,t.__scopeDialog),n=j.useRef(null),a=bs(e,s.contentRef,n);return j.useEffect(()=>{const i=n.current;if(i)return l5(i)},[]),r.jsx(Zse,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ur(t.onCloseAutoFocus,i=>{i.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:ur(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ur(t.onFocusOutside,i=>i.preventDefault())})}),F9e=j.forwardRef((t,e)=>{const s=Mu(ag,t.__scopeDialog),n=j.useRef(!1),a=j.useRef(!1);return r.jsx(Zse,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||s.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;s.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Zse=j.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=t,l=Mu(ag,s),c=j.useRef(null),d=bs(e,c);return e5(),r.jsxs(r.Fragment,{children:[r.jsx(xw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(pw,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":E8(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(U9e,{titleId:l.titleId}),r.jsx(V9e,{contentRef:c,descriptionId:l.descriptionId})]})]})}),A8="DialogTitle",Jse=j.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,a=Mu(A8,s);return r.jsx(Jr.h2,{id:a.titleId,...n,ref:e})});Jse.displayName=A8;var ene="DialogDescription",tne=j.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,a=Mu(ene,s);return r.jsx(Jr.p,{id:a.descriptionId,...n,ref:e})});tne.displayName=ene;var rne="DialogClose",sne=j.forwardRef((t,e)=>{const{__scopeDialog:s,...n}=t,a=Mu(rne,s);return r.jsx(Jr.button,{type:"button",...n,ref:e,onClick:ur(t.onClick,()=>a.onOpenChange(!1))})});sne.displayName=rne;function E8(t){return t?"open":"closed"}var nne="DialogTitleWarning",[B9e,ane]=_pe(nne,{contentName:ag,titleName:A8,docsSlug:"dialog"}),U9e=({titleId:t})=>{const e=ane(nne),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},z9e="DialogDescriptionWarning",V9e=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ane(z9e).contentName}}.`;return j.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},ine=qse,W9e=Gse,one=Kse,P8=Xse,lne=Qse,cne=Jse,dne=tne,T8=sne;function mr({...t}){return r.jsx(ine,{"data-slot":"dialog",...t})}function q9e({...t}){return r.jsx(one,{"data-slot":"dialog-portal",...t})}const une=j.forwardRef(({className:t,...e},s)=>r.jsx(P8,{ref:s,"data-slot":"dialog-overlay",className:Ar("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));une.displayName=P8.displayName;function fr({className:t,children:e,...s}){return r.jsxs(q9e,{"data-slot":"dialog-portal",children:[r.jsx(une,{}),r.jsxs(lne,{"data-slot":"dialog-content",className:Ar("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 lg:data-[state=closed]:slide-out-to-bottom-0 lg:data-[state=open]:slide-in-from-bottom-0 fixed z-50 grid w-full gap-4 border shadow-lg duration-200","max-lg:inset-0 max-lg:h-full max-lg:max-w-full max-lg:rounded-none max-lg:p-4 max-lg:translate-x-0 max-lg:translate-y-0","lg:top-[50%] lg:left-[50%] lg:max-w-[calc(100%-2rem)] lg:translate-x-[-50%] lg:translate-y-[-50%] lg:rounded-lg lg:p-6 lg:sm:max-w-lg",t),...s,children:[e,r.jsxs(T8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-3 right-3 lg:top-4 lg:right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-5 lg:[&_svg:not([class*='size-'])]:size-4",children:[r.jsx(Is,{}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function br({className:t,...e}){return r.jsx("div",{"data-slot":"dialog-header",className:Ar("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Us({className:t,...e}){return r.jsx("div",{"data-slot":"dialog-footer",className:Ar("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function pr({className:t,...e}){return r.jsx(cne,{"data-slot":"dialog-title",className:Ar("text-lg leading-none font-semibold",t),...e})}function wr({className:t,...e}){return r.jsx(dne,{"data-slot":"dialog-description",className:Ar("text-muted-foreground text-sm",t),...e})}function H9e(t,e,s="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:s}).format(e).split(/\s/g).slice(2).join(" ")}const G9e={},E1={};function Ex(t,e){try{const n=(G9e[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(e).split("GMT")[1];return n in E1?E1[n]:KW(n,n.split(":"))}catch{if(t in E1)return E1[t];const s=t?.match(Y9e);return s?KW(t,s.slice(1)):NaN}}const Y9e=/([+-]\d\d):?(\d\d)?/;function KW(t,e){const s=+(e[0]||0),n=+(e[1]||0),a=+(e[2]||0)/60;return E1[t]=s*60+n>0?s*60+n+a:s*60-n-a}class fh extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Ex(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),hne(this),lO(this)):this.setTime(Date.now())}static tz(e,...s){return s.length?new fh(...s,e):new fh(Date.now(),e)}withTimeZone(e){return new fh(+this,e)}getTimezoneOffset(){const e=-Ex(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),lO(this),+this}[Symbol.for("constructDateFrom")](e){return new fh(+new Date(e),this.timeZone)}}const XW=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!XW.test(t))return;const e=t.replace(XW,"$1UTC");fh.prototype[e]&&(t.startsWith("get")?fh.prototype[t]=function(){return this.internal[e]()}:(fh.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),K9e(this),+this},fh.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),lO(this),+this}))});function lO(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-Ex(t.timeZone,t)*60))}function K9e(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),hne(t)}function hne(t){const e=Ex(t.timeZone,t),s=e>0?Math.floor(e):Math.ceil(e),n=new Date(+t);n.setUTCHours(n.getUTCHours()-1);const a=-new Date(+t).getTimezoneOffset(),i=-new Date(+n).getTimezoneOffset(),o=a-i,l=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();o&&l&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+o);const c=a-s;c&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+c);const d=new Date(+t);d.setUTCSeconds(0);const u=a>0?d.getSeconds():(d.getSeconds()-60)%60,h=Math.round(-(Ex(t.timeZone,t)*60))%60;(h||u)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+h+u));const m=Ex(t.timeZone,t),f=m>0?Math.floor(m):Math.ceil(m),x=-new Date(+t).getTimezoneOffset()-f,g=f!==s,b=x-c;if(g&&b){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+b);const w=Ex(t.timeZone,t),N=w>0?Math.floor(w):Math.ceil(w),C=f-N;C&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+C),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+C))}}class il extends fh{static tz(e,...s){return s.length?new il(...s,e):new il(Date.now(),e)}toISOString(){const[e,s,n]=this.tzComponents(),a=`${e}${s}:${n}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,s,n,a]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${n} ${s} ${a}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[s,n,a]=this.tzComponents();return`${e} GMT${s}${n}${a} (${H9e(this.timeZone,this)})`}toLocaleString(e,s){return Date.prototype.toLocaleString.call(this,e,{...s,timeZone:s?.timeZone||this.timeZone})}toLocaleDateString(e,s){return Date.prototype.toLocaleDateString.call(this,e,{...s,timeZone:s?.timeZone||this.timeZone})}toLocaleTimeString(e,s){return Date.prototype.toLocaleTimeString.call(this,e,{...s,timeZone:s?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),s=e>0?"-":"+",n=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),a=String(Math.abs(e)%60).padStart(2,"0");return[s,n,a]}withTimeZone(e){return new il(+this,e)}[Symbol.for("constructDateFrom")](e){return new il(+new Date(e),this.timeZone)}}const QW=5,X9e=4;function Q9e(t,e){const s=e.startOfMonth(t),n=s.getDay()>0?s.getDay():7,a=e.addDays(t,-n+1),i=e.addDays(a,QW*7-1);return e.getMonth(t)===e.getMonth(i)?QW:X9e}function mne(t,e){const s=e.startOfMonth(t),n=s.getDay();return n===1?s:n===0?e.addDays(s,-6):e.addDays(s,-1*(n-1))}function Z9e(t,e){const s=mne(t,e),n=Q9e(t,e);return e.addDays(s,n*7-1)}class Hc{constructor(e,s){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?il.tz(this.options.timeZone):new this.Date,this.newDate=(n,a,i)=>this.overrides?.newDate?this.overrides.newDate(n,a,i):this.options.timeZone?new il(n,a,i,this.options.timeZone):new Date(n,a,i),this.addDays=(n,a)=>this.overrides?.addDays?this.overrides.addDays(n,a):sse(n,a),this.addMonths=(n,a)=>this.overrides?.addMonths?this.overrides.addMonths(n,a):nse(n,a),this.addWeeks=(n,a)=>this.overrides?.addWeeks?this.overrides.addWeeks(n,a):x7e(n,a),this.addYears=(n,a)=>this.overrides?.addYears?this.overrides.addYears(n,a):g7e(n,a),this.differenceInCalendarDays=(n,a)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,a):ise(n,a),this.differenceInCalendarMonths=(n,a)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,a):j7e(n,a),this.eachMonthOfInterval=n=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):S7e(n),this.eachYearOfInterval=n=>{const a=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(n):_7e(n),i=new Set(a.map(l=>this.getYear(l)));if(i.size===a.length)return a;const o=[];return i.forEach(l=>{o.push(new Date(l,0,1))}),o},this.endOfBroadcastWeek=n=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):Z9e(n,this),this.endOfISOWeek=n=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(n):A7e(n),this.endOfMonth=n=>this.overrides?.endOfMonth?this.overrides.endOfMonth(n):N7e(n),this.endOfWeek=(n,a)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(n,a):dse(n,this.options),this.endOfYear=n=>this.overrides?.endOfYear?this.overrides.endOfYear(n):k7e(n),this.format=(n,a,i)=>{const o=this.overrides?.format?this.overrides.format(n,a,this.options):Rn(n,a,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=n=>this.overrides?.getISOWeek?this.overrides.getISOWeek(n):use(n),this.getMonth=(n,a)=>this.overrides?.getMonth?this.overrides.getMonth(n,this.options):CLe(n,this.options),this.getYear=(n,a)=>this.overrides?.getYear?this.overrides.getYear(n,this.options):kLe(n,this.options),this.getWeek=(n,a)=>this.overrides?.getWeek?this.overrides.getWeek(n,this.options):mse(n,this.options),this.isAfter=(n,a)=>this.overrides?.isAfter?this.overrides.isAfter(n,a):_Le(n,a),this.isBefore=(n,a)=>this.overrides?.isBefore?this.overrides.isBefore(n,a):ALe(n,a),this.isDate=n=>this.overrides?.isDate?this.overrides.isDate(n):ose(n),this.isSameDay=(n,a)=>this.overrides?.isSameDay?this.overrides.isSameDay(n,a):b7e(n,a),this.isSameMonth=(n,a)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(n,a):ELe(n,a),this.isSameYear=(n,a)=>this.overrides?.isSameYear?this.overrides.isSameYear(n,a):PLe(n,a),this.max=n=>this.overrides?.max?this.overrides.max(n):v7e(n),this.min=n=>this.overrides?.min?this.overrides.min(n):y7e(n),this.setMonth=(n,a)=>this.overrides?.setMonth?this.overrides.setMonth(n,a):TLe(n,a),this.setYear=(n,a)=>this.overrides?.setYear?this.overrides.setYear(n,a):OLe(n,a),this.startOfBroadcastWeek=(n,a)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):mne(n,this),this.startOfDay=n=>this.overrides?.startOfDay?this.overrides.startOfDay(n):iw(n),this.startOfISOWeek=n=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(n):aw(n),this.startOfMonth=n=>this.overrides?.startOfMonth?this.overrides.startOfMonth(n):C7e(n),this.startOfWeek=(n,a)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(n,this.options):Mv(n,this.options),this.startOfYear=n=>this.overrides?.startOfYear?this.overrides.startOfYear(n):cse(n),this.options={locale:C8,...e},this.overrides=s}getDigitMap(){const{numerals:e="latn"}=this.options,s=new Intl.NumberFormat("en-US",{numberingSystem:e}),n={};for(let a=0;a<10;a++)n[a.toString()]=s.format(a);return n}replaceDigits(e){const s=this.getDigitMap();return e.replace(/\d/g,n=>s[n]||n)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){const e=this.options.locale?.code;return e&&Hc.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:s,timeZone:n,numerals:a}=this.options,i=s?.code;if(i&&Hc.yearFirstLocales.has(i))try{return new Intl.DateTimeFormat(i,{month:"long",year:"numeric",timeZone:n,numberingSystem:a}).format(e)}catch{}const o=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,o)}}Hc.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Mh=new Hc;class fne{constructor(e,s,n=Mh){this.date=e,this.displayMonth=s,this.outside=!!(s&&!n.isSameMonth(e,s)),this.dateLib=n}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class J9e{constructor(e,s){this.date=e,this.weeks=s}}class eFe{constructor(e,s){this.days=s,this.weekNumber=e}}function tFe(t){return ce.createElement("button",{...t})}function rFe(t){return ce.createElement("span",{...t})}function sFe(t){const{size:e=24,orientation:s="left",className:n}=t;return ce.createElement("svg",{className:n,width:e,height:e,viewBox:"0 0 24 24"},s==="up"&&ce.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),s==="down"&&ce.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),s==="left"&&ce.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),s==="right"&&ce.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function nFe(t){const{day:e,modifiers:s,...n}=t;return ce.createElement("td",{...n})}function aFe(t){const{day:e,modifiers:s,...n}=t,a=ce.useRef(null);return ce.useEffect(()=>{s.focused&&a.current?.focus()},[s.focused]),ce.createElement("button",{ref:a,...n})}var ns;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(ns||(ns={}));var ti;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(ti||(ti={}));var Cu;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Cu||(Cu={}));var Pc;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Pc||(Pc={}));function iFe(t){const{options:e,className:s,components:n,classNames:a,...i}=t,o=[a[ns.Dropdown],s].join(" "),l=e?.find(({value:c})=>c===i.value);return ce.createElement("span",{"data-disabled":i.disabled,className:a[ns.DropdownRoot]},ce.createElement(n.Select,{className:o,...i},e?.map(({value:c,label:d,disabled:u})=>ce.createElement(n.Option,{key:c,value:c,disabled:u},d))),ce.createElement("span",{className:a[ns.CaptionLabel],"aria-hidden":!0},l?.label,ce.createElement(n.Chevron,{orientation:"down",size:18,className:a[ns.Chevron]})))}function oFe(t){return ce.createElement("div",{...t})}function lFe(t){return ce.createElement("div",{...t})}function cFe(t){const{calendarMonth:e,displayIndex:s,...n}=t;return ce.createElement("div",{...n},t.children)}function dFe(t){const{calendarMonth:e,displayIndex:s,...n}=t;return ce.createElement("div",{...n})}function uFe(t){return ce.createElement("table",{...t})}function hFe(t){return ce.createElement("div",{...t})}const pne=j.createContext(void 0);function Lw(){const t=j.useContext(pne);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function mFe(t){const{components:e}=Lw();return ce.createElement(e.Dropdown,{...t})}function fFe(t){const{onPreviousClick:e,onNextClick:s,previousMonth:n,nextMonth:a,...i}=t,{components:o,classNames:l,labels:{labelPrevious:c,labelNext:d}}=Lw(),u=j.useCallback(m=>{a&&s?.(m)},[a,s]),h=j.useCallback(m=>{n&&e?.(m)},[n,e]);return ce.createElement("nav",{...i},ce.createElement(o.PreviousMonthButton,{type:"button",className:l[ns.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":c(n),onClick:h},ce.createElement(o.Chevron,{disabled:n?void 0:!0,className:l[ns.Chevron],orientation:"left"})),ce.createElement(o.NextMonthButton,{type:"button",className:l[ns.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":d(a),onClick:u},ce.createElement(o.Chevron,{disabled:a?void 0:!0,orientation:"right",className:l[ns.Chevron]})))}function pFe(t){const{components:e}=Lw();return ce.createElement(e.Button,{...t})}function xFe(t){return ce.createElement("option",{...t})}function gFe(t){const{components:e}=Lw();return ce.createElement(e.Button,{...t})}function vFe(t){const{rootRef:e,...s}=t;return ce.createElement("div",{...s,ref:e})}function yFe(t){return ce.createElement("select",{...t})}function bFe(t){const{week:e,...s}=t;return ce.createElement("tr",{...s})}function wFe(t){return ce.createElement("th",{...t})}function jFe(t){return ce.createElement("thead",{"aria-hidden":!0},ce.createElement("tr",{...t}))}function NFe(t){const{week:e,...s}=t;return ce.createElement("th",{...s})}function SFe(t){return ce.createElement("th",{...t})}function CFe(t){return ce.createElement("tbody",{...t})}function kFe(t){const{components:e}=Lw();return ce.createElement(e.Dropdown,{...t})}const _Fe=Object.freeze(Object.defineProperty({__proto__:null,Button:tFe,CaptionLabel:rFe,Chevron:sFe,Day:nFe,DayButton:aFe,Dropdown:iFe,DropdownNav:oFe,Footer:lFe,Month:cFe,MonthCaption:dFe,MonthGrid:uFe,Months:hFe,MonthsDropdown:mFe,Nav:fFe,NextMonthButton:pFe,Option:xFe,PreviousMonthButton:gFe,Root:vFe,Select:yFe,Week:bFe,WeekNumber:NFe,WeekNumberHeader:SFe,Weekday:wFe,Weekdays:jFe,Weeks:CFe,YearsDropdown:kFe},Symbol.toStringTag,{value:"Module"}));function Sm(t,e,s=!1,n=Mh){let{from:a,to:i}=t;const{differenceInCalendarDays:o,isSameDay:l}=n;return a&&i?(o(i,a)<0&&([a,i]=[i,a]),o(e,a)>=(s?1:0)&&o(i,e)>=(s?1:0)):!s&&i?l(i,e):!s&&a?l(a,e):!1}function xne(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function O8(t){return!!(t&&typeof t=="object"&&"from"in t)}function gne(t){return!!(t&&typeof t=="object"&&"after"in t)}function vne(t){return!!(t&&typeof t=="object"&&"before"in t)}function yne(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function bne(t,e){return Array.isArray(t)&&t.every(e.isDate)}function Cm(t,e,s=Mh){const n=Array.isArray(e)?e:[e],{isSameDay:a,differenceInCalendarDays:i,isAfter:o}=s;return n.some(l=>{if(typeof l=="boolean")return l;if(s.isDate(l))return a(t,l);if(bne(l,s))return l.includes(t);if(O8(l))return Sm(l,t,!1,s);if(yne(l))return Array.isArray(l.dayOfWeek)?l.dayOfWeek.includes(t.getDay()):l.dayOfWeek===t.getDay();if(xne(l)){const c=i(l.before,t),d=i(l.after,t),u=c>0,h=d<0;return o(l.before,l.after)?h&&u:u||h}return gne(l)?i(t,l.after)>0:vne(l)?i(l.before,t)>0:typeof l=="function"?l(t):!1})}function AFe(t,e,s,n,a){const{disabled:i,hidden:o,modifiers:l,showOutsideDays:c,broadcastCalendar:d,today:u}=e,{isSameDay:h,isSameMonth:m,startOfMonth:f,isBefore:v,endOfMonth:x,isAfter:g}=a,b=s&&f(s),w=n&&x(n),N={[ti.focused]:[],[ti.outside]:[],[ti.disabled]:[],[ti.hidden]:[],[ti.today]:[]},C={};for(const S of t){const{date:A,displayMonth:k}=S,E=!!(k&&!m(A,k)),O=!!(b&&v(A,b)),$=!!(w&&g(A,w)),T=!!(i&&Cm(A,i,a)),I=!!(o&&Cm(A,o,a))||O||$||!d&&!c&&E||d&&c===!1&&E,L=h(A,u??a.today());E&&N.outside.push(S),T&&N.disabled.push(S),I&&N.hidden.push(S),L&&N.today.push(S),l&&Object.keys(l).forEach(z=>{const M=l?.[z];M&&Cm(A,M,a)&&(C[z]?C[z].push(S):C[z]=[S])})}return S=>{const A={[ti.focused]:!1,[ti.disabled]:!1,[ti.hidden]:!1,[ti.outside]:!1,[ti.today]:!1},k={};for(const E in N){const O=N[E];A[E]=O.some($=>$===S)}for(const E in C)k[E]=C[E].some(O=>O===S);return{...A,...k}}}function EFe(t,e,s={}){return Object.entries(t).filter(([,a])=>a===!0).reduce((a,[i])=>(s[i]?a.push(s[i]):e[ti[i]]?a.push(e[ti[i]]):e[Cu[i]]&&a.push(e[Cu[i]]),a),[e[ns.Day]])}function PFe(t){return{..._Fe,...t}}function TFe(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([s,n])=>{s.startsWith("data-")&&(e[s]=n)}),e}function OFe(){const t={};for(const e in ns)t[ns[e]]=`rdp-${ns[e]}`;for(const e in ti)t[ti[e]]=`rdp-${ti[e]}`;for(const e in Cu)t[Cu[e]]=`rdp-${Cu[e]}`;for(const e in Pc)t[Pc[e]]=`rdp-${Pc[e]}`;return t}function wne(t,e,s){return(s??new Hc(e)).formatMonthYear(t)}const IFe=wne;function $Fe(t,e,s){return(s??new Hc(e)).format(t,"d")}function DFe(t,e=Mh){return e.format(t,"LLLL")}function RFe(t,e,s){return(s??new Hc(e)).format(t,"cccccc")}function MFe(t,e=Mh){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function LFe(){return""}function jne(t,e=Mh){return e.format(t,"yyyy")}const FFe=jne,BFe=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:wne,formatDay:$Fe,formatMonthCaption:IFe,formatMonthDropdown:DFe,formatWeekNumber:MFe,formatWeekNumberHeader:LFe,formatWeekdayName:RFe,formatYearCaption:FFe,formatYearDropdown:jne},Symbol.toStringTag,{value:"Module"}));function UFe(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...BFe,...t}}function zFe(t,e,s,n,a){const{startOfMonth:i,startOfYear:o,endOfYear:l,eachMonthOfInterval:c,getMonth:d}=a;return c({start:o(t),end:l(t)}).map(m=>{const f=n.formatMonthDropdown(m,a),v=d(m),x=e&&m<i(e)||s&&m>i(s)||!1;return{value:v,label:f,disabled:x}})}function VFe(t,e={},s={}){let n={...e?.[ns.Day]};return Object.entries(t).filter(([,a])=>a===!0).forEach(([a])=>{n={...n,...s?.[a]}}),n}function WFe(t,e,s){const n=t.today(),a=e?t.startOfISOWeek(n):t.startOfWeek(n),i=[];for(let o=0;o<7;o++){const l=t.addDays(a,o);i.push(l)}return i}function qFe(t,e,s,n,a=!1){if(!t||!e)return;const{startOfYear:i,endOfYear:o,eachYearOfInterval:l,getYear:c}=n,d=i(t),u=o(e),h=l({start:d,end:u});return a&&h.reverse(),h.map(m=>{const f=s.formatYearDropdown(m,n);return{value:c(m),label:f,disabled:!1}})}function Nne(t,e,s,n){let a=(n??new Hc(s)).format(t,"PPPP");return e.today&&(a=`Today, ${a}`),e.selected&&(a=`${a}, selected`),a}const HFe=Nne;function Sne(t,e,s){return(s??new Hc(e)).formatMonthYear(t)}const GFe=Sne;function YFe(t,e,s,n){let a=(n??new Hc(s)).format(t,"PPPP");return e?.today&&(a=`Today, ${a}`),a}function KFe(t){return"Choose the Month"}function XFe(){return""}function QFe(t){return"Go to the Next Month"}function ZFe(t){return"Go to the Previous Month"}function JFe(t,e,s){return(s??new Hc(e)).format(t,"cccc")}function eBe(t,e){return`Week ${t}`}function tBe(t){return"Week Number"}function rBe(t){return"Choose the Year"}const sBe=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:GFe,labelDay:HFe,labelDayButton:Nne,labelGrid:Sne,labelGridcell:YFe,labelMonthDropdown:KFe,labelNav:XFe,labelNext:QFe,labelPrevious:ZFe,labelWeekNumber:eBe,labelWeekNumberHeader:tBe,labelWeekday:JFe,labelYearDropdown:rBe},Symbol.toStringTag,{value:"Module"})),Fw=t=>t instanceof HTMLElement?t:null,kA=t=>[...t.querySelectorAll("[data-animated-month]")??[]],nBe=t=>Fw(t.querySelector("[data-animated-month]")),_A=t=>Fw(t.querySelector("[data-animated-caption]")),AA=t=>Fw(t.querySelector("[data-animated-weeks]")),aBe=t=>Fw(t.querySelector("[data-animated-nav]")),iBe=t=>Fw(t.querySelector("[data-animated-weekdays]"));function oBe(t,e,{classNames:s,months:n,focused:a,dateLib:i}){const o=j.useRef(null),l=j.useRef(n),c=j.useRef(!1);j.useLayoutEffect(()=>{const d=l.current;if(l.current=n,!e||!t.current||!(t.current instanceof HTMLElement)||n.length===0||d.length===0||n.length!==d.length)return;const u=i.isSameMonth(n[0].date,d[0].date),h=i.isAfter(n[0].date,d[0].date),m=h?s[Pc.caption_after_enter]:s[Pc.caption_before_enter],f=h?s[Pc.weeks_after_enter]:s[Pc.weeks_before_enter],v=o.current,x=t.current.cloneNode(!0);if(x instanceof HTMLElement?(kA(x).forEach(N=>{if(!(N instanceof HTMLElement))return;const C=nBe(N);C&&N.contains(C)&&N.removeChild(C);const S=_A(N);S&&S.classList.remove(m);const A=AA(N);A&&A.classList.remove(f)}),o.current=x):o.current=null,c.current||u||a)return;const g=v instanceof HTMLElement?kA(v):[],b=kA(t.current);if(b?.every(w=>w instanceof HTMLElement)&&g&&g.every(w=>w instanceof HTMLElement)){c.current=!0,t.current.style.isolation="isolate";const w=aBe(t.current);w&&(w.style.zIndex="1"),b.forEach((N,C)=>{const S=g[C];if(!S)return;N.style.position="relative",N.style.overflow="hidden";const A=_A(N);A&&A.classList.add(m);const k=AA(N);k&&k.classList.add(f);const E=()=>{c.current=!1,t.current&&(t.current.style.isolation=""),w&&(w.style.zIndex=""),A&&A.classList.remove(m),k&&k.classList.remove(f),N.style.position="",N.style.overflow="",N.contains(S)&&N.removeChild(S)};S.style.pointerEvents="none",S.style.position="absolute",S.style.overflow="hidden",S.setAttribute("aria-hidden","true");const O=iBe(S);O&&(O.style.opacity="0");const $=_A(S);$&&($.classList.add(h?s[Pc.caption_before_exit]:s[Pc.caption_after_exit]),$.addEventListener("animationend",E));const T=AA(S);T&&T.classList.add(h?s[Pc.weeks_before_exit]:s[Pc.weeks_after_exit]),N.insertBefore(S,N.firstChild)})}})}function lBe(t,e,s,n){const a=t[0],i=t[t.length-1],{ISOWeek:o,fixedWeeks:l,broadcastCalendar:c}=s??{},{addDays:d,differenceInCalendarDays:u,differenceInCalendarMonths:h,endOfBroadcastWeek:m,endOfISOWeek:f,endOfMonth:v,endOfWeek:x,isAfter:g,startOfBroadcastWeek:b,startOfISOWeek:w,startOfWeek:N}=n,C=c?b(a,n):o?w(a):N(a),S=c?m(i):o?f(v(i)):x(v(i)),A=u(S,C),k=h(i,a)+1,E=[];for(let T=0;T<=A;T++){const I=d(C,T);if(e&&g(I,e))break;E.push(I)}const $=(c?35:42)*k;if(l&&E.length<$){const T=$-E.length;for(let I=0;I<T;I++){const L=d(E[E.length-1],1);E.push(L)}}return E}function cBe(t){const e=[];return t.reduce((s,n)=>{const a=n.weeks.reduce((i,o)=>i.concat(o.days.slice()),e.slice());return s.concat(a.slice())},e.slice())}function dBe(t,e,s,n){const{numberOfMonths:a=1}=s,i=[];for(let o=0;o<a;o++){const l=n.addMonths(t,o);if(e&&l>e)break;i.push(l)}return i}function ZW(t,e,s,n){const{month:a,defaultMonth:i,today:o=n.today(),numberOfMonths:l=1}=t;let c=a||i||o;const{differenceInCalendarMonths:d,addMonths:u,startOfMonth:h}=n;if(s&&d(s,c)<l-1){const m=-1*(l-1);c=u(s,m)}return e&&d(c,e)<0&&(c=e),h(c)}function uBe(t,e,s,n){const{addDays:a,endOfBroadcastWeek:i,endOfISOWeek:o,endOfMonth:l,endOfWeek:c,getISOWeek:d,getWeek:u,startOfBroadcastWeek:h,startOfISOWeek:m,startOfWeek:f}=n,v=t.reduce((x,g)=>{const b=s.broadcastCalendar?h(g,n):s.ISOWeek?m(g):f(g),w=s.broadcastCalendar?i(g):s.ISOWeek?o(l(g)):c(l(g)),N=e.filter(k=>k>=b&&k<=w),C=s.broadcastCalendar?35:42;if(s.fixedWeeks&&N.length<C){const k=e.filter(E=>{const O=C-N.length;return E>w&&E<=a(w,O)});N.push(...k)}const S=N.reduce((k,E)=>{const O=s.ISOWeek?d(E):u(E),$=k.find(I=>I.weekNumber===O),T=new fne(E,g,n);return $?$.days.push(T):k.push(new eFe(O,[T])),k},[]),A=new J9e(g,S);return x.push(A),x},[]);return s.reverseMonths?v.reverse():v}function hBe(t,e){let{startMonth:s,endMonth:n}=t;const{startOfYear:a,startOfDay:i,startOfMonth:o,endOfMonth:l,addYears:c,endOfYear:d,newDate:u,today:h}=e,{fromYear:m,toYear:f,fromMonth:v,toMonth:x}=t;!s&&v&&(s=v),!s&&m&&(s=e.newDate(m,0,1)),!n&&x&&(n=x),!n&&f&&(n=u(f,11,31));const g=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return s?s=o(s):m?s=u(m,0,1):!s&&g&&(s=a(c(t.today??h(),-100))),n?n=l(n):f?n=u(f,11,31):!n&&g&&(n=d(t.today??h())),[s&&i(s),n&&i(n)]}function mBe(t,e,s,n){if(s.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i=1}=s,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:c}=n,d=a?i:1,u=o(t);if(!e)return l(u,d);if(!(c(e,t)<i))return l(u,d)}function fBe(t,e,s,n){if(s.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:i}=s,{startOfMonth:o,addMonths:l,differenceInCalendarMonths:c}=n,d=a?i??1:1,u=o(t);if(!e)return l(u,-d);if(!(c(u,e)<=0))return l(u,-d)}function pBe(t){const e=[];return t.reduce((s,n)=>s.concat(n.weeks.slice()),e.slice())}function d3(t,e){const[s,n]=j.useState(t);return[e===void 0?s:e,n]}function xBe(t,e){const[s,n]=hBe(t,e),{startOfMonth:a,endOfMonth:i}=e,o=ZW(t,s,n,e),[l,c]=d3(o,t.month?o:void 0);j.useEffect(()=>{const A=ZW(t,s,n,e);c(A)},[t.timeZone]);const d=dBe(l,n,t,e),u=lBe(d,t.endMonth?i(t.endMonth):void 0,t,e),h=uBe(d,u,t,e),m=pBe(h),f=cBe(h),v=fBe(l,s,t,e),x=mBe(l,n,t,e),{disableNavigation:g,onMonthChange:b}=t,w=A=>m.some(k=>k.days.some(E=>E.isEqualTo(A))),N=A=>{if(g)return;let k=a(A);s&&k<a(s)&&(k=a(s)),n&&k>a(n)&&(k=a(n)),c(k),b?.(k)};return{months:h,weeks:m,days:f,navStart:s,navEnd:n,previousMonth:v,nextMonth:x,goToMonth:N,goToDay:A=>{w(A)||N(A.date)}}}var ah;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(ah||(ah={}));function JW(t){return!t[ti.disabled]&&!t[ti.hidden]&&!t[ti.outside]}function gBe(t,e,s,n){let a,i=-1;for(const o of t){const l=e(o);JW(l)&&(l[ti.focused]&&i<ah.FocusedModifier?(a=o,i=ah.FocusedModifier):n?.isEqualTo(o)&&i<ah.LastFocused?(a=o,i=ah.LastFocused):s(o.date)&&i<ah.Selected?(a=o,i=ah.Selected):l[ti.today]&&i<ah.Today&&(a=o,i=ah.Today))}return a||(a=t.find(o=>JW(e(o)))),a}function vBe(t,e,s,n,a,i,o){const{ISOWeek:l,broadcastCalendar:c}=i,{addDays:d,addMonths:u,addWeeks:h,addYears:m,endOfBroadcastWeek:f,endOfISOWeek:v,endOfWeek:x,max:g,min:b,startOfBroadcastWeek:w,startOfISOWeek:N,startOfWeek:C}=o;let A={day:d,week:h,month:u,year:m,startOfWeek:k=>c?w(k,o):l?N(k):C(k),endOfWeek:k=>c?f(k):l?v(k):x(k)}[t](s,e==="after"?1:-1);return e==="before"&&n?A=g([n,A]):e==="after"&&a&&(A=b([a,A])),A}function Cne(t,e,s,n,a,i,o,l=0){if(l>365)return;const c=vBe(t,e,s.date,n,a,i,o),d=!!(i.disabled&&Cm(c,i.disabled,o)),u=!!(i.hidden&&Cm(c,i.hidden,o)),h=c,m=new fne(c,h,o);return!d&&!u?m:Cne(t,e,m,n,a,i,o,l+1)}function yBe(t,e,s,n,a){const{autoFocus:i}=t,[o,l]=j.useState(),c=gBe(e.days,s,n||(()=>!1),o),[d,u]=j.useState(i?c:void 0);return{isFocusTarget:x=>!!c?.isEqualTo(x),setFocused:u,focused:d,blur:()=>{l(d),u(void 0)},moveFocus:(x,g)=>{if(!d)return;const b=Cne(x,g,d,e.navStart,e.navEnd,t,a);b&&(t.disableNavigation&&!e.days.some(N=>N.isEqualTo(b))||(e.goToDay(b),u(b)))}}}function bBe(t,e){const{selected:s,required:n,onSelect:a}=t,[i,o]=d3(s,a?s:void 0),l=a?s:i,{isSameDay:c}=e,d=f=>l?.some(v=>c(v,f))??!1,{min:u,max:h}=t;return{selected:l,select:(f,v,x)=>{let g=[...l??[]];if(d(f)){if(l?.length===u||n&&l?.length===1)return;g=l?.filter(b=>!c(b,f))}else l?.length===h?g=[f]:g=[...g,f];return a||o(g),a?.(g,f,v,x),g},isSelected:d}}function wBe(t,e,s=0,n=0,a=!1,i=Mh){const{from:o,to:l}=e||{},{isSameDay:c,isAfter:d,isBefore:u}=i;let h;if(!o&&!l)h={from:t,to:s>0?void 0:t};else if(o&&!l)c(o,t)?s===0?h={from:o,to:t}:a?h={from:o,to:void 0}:h=void 0:u(t,o)?h={from:t,to:o}:h={from:o,to:t};else if(o&&l)if(c(o,t)&&c(l,t))a?h={from:o,to:l}:h=void 0;else if(c(o,t))h={from:o,to:s>0?void 0:t};else if(c(l,t))h={from:t,to:s>0?void 0:t};else if(u(t,o))h={from:t,to:l};else if(d(t,o))h={from:o,to:t};else if(d(t,l))h={from:o,to:t};else throw new Error("Invalid range");if(h?.from&&h?.to){const m=i.differenceInCalendarDays(h.to,h.from);n>0&&m>n?h={from:t,to:void 0}:s>1&&m<s&&(h={from:t,to:void 0})}return h}function jBe(t,e,s=Mh){const n=Array.isArray(e)?e:[e];let a=t.from;const i=s.differenceInCalendarDays(t.to,t.from),o=Math.min(i,6);for(let l=0;l<=o;l++){if(n.includes(a.getDay()))return!0;a=s.addDays(a,1)}return!1}function eq(t,e,s=Mh){return Sm(t,e.from,!1,s)||Sm(t,e.to,!1,s)||Sm(e,t.from,!1,s)||Sm(e,t.to,!1,s)}function NBe(t,e,s=Mh){const n=Array.isArray(e)?e:[e];if(n.filter(l=>typeof l!="function").some(l=>typeof l=="boolean"?l:s.isDate(l)?Sm(t,l,!1,s):bne(l,s)?l.some(c=>Sm(t,c,!1,s)):O8(l)?l.from&&l.to?eq(t,{from:l.from,to:l.to},s):!1:yne(l)?jBe(t,l.dayOfWeek,s):xne(l)?s.isAfter(l.before,l.after)?eq(t,{from:s.addDays(l.after,1),to:s.addDays(l.before,-1)},s):Cm(t.from,l,s)||Cm(t.to,l,s):gne(l)||vne(l)?Cm(t.from,l,s)||Cm(t.to,l,s):!1))return!0;const o=n.filter(l=>typeof l=="function");if(o.length){let l=t.from;const c=s.differenceInCalendarDays(t.to,t.from);for(let d=0;d<=c;d++){if(o.some(u=>u(l)))return!0;l=s.addDays(l,1)}}return!1}function SBe(t,e){const{disabled:s,excludeDisabled:n,selected:a,required:i,onSelect:o}=t,[l,c]=d3(a,o?a:void 0),d=o?a:l;return{selected:d,select:(m,f,v)=>{const{min:x,max:g}=t,b=m?wBe(m,d,x,g,i,e):void 0;return n&&s&&b?.from&&b.to&&NBe({from:b.from,to:b.to},s,e)&&(b.from=m,b.to=void 0),o||c(b),o?.(b,m,f,v),b},isSelected:m=>d&&Sm(d,m,!1,e)}}function CBe(t,e){const{selected:s,required:n,onSelect:a}=t,[i,o]=d3(s,a?s:void 0),l=a?s:i,{isSameDay:c}=e;return{selected:l,select:(h,m,f)=>{let v=h;return!n&&l&&l&&c(h,l)&&(v=void 0),a||o(v),a?.(v,h,m,f),v},isSelected:h=>l?c(l,h):!1}}function kBe(t,e){const s=CBe(t,e),n=bBe(t,e),a=SBe(t,e);switch(t.mode){case"single":return s;case"multiple":return n;case"range":return a;default:return}}function _Be(t){let e=t;e.timeZone&&(e={...t},e.today&&(e.today=new il(e.today,e.timeZone)),e.month&&(e.month=new il(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new il(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new il(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new il(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new il(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=e.selected?.map(Pt=>new il(Pt,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new il(e.selected.from,e.timeZone):void 0,to:e.selected.to?new il(e.selected.to,e.timeZone):void 0}));const{components:s,formatters:n,labels:a,dateLib:i,locale:o,classNames:l}=j.useMemo(()=>{const Pt={...C8,...e.locale};return{dateLib:new Hc({locale:Pt,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:PFe(e.components),formatters:UFe(e.formatters),labels:{...sBe,...e.labels},locale:Pt,classNames:{...OFe(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:c,mode:d,navLayout:u,numberOfMonths:h=1,onDayBlur:m,onDayClick:f,onDayFocus:v,onDayKeyDown:x,onDayMouseEnter:g,onDayMouseLeave:b,onNextClick:w,onPrevClick:N,showWeekNumber:C,styles:S}=e,{formatCaption:A,formatDay:k,formatMonthDropdown:E,formatWeekNumber:O,formatWeekNumberHeader:$,formatWeekdayName:T,formatYearDropdown:I}=n,L=xBe(e,i),{days:z,months:M,navStart:V,navEnd:B,previousMonth:F,nextMonth:J,goToMonth:ee}=L,q=AFe(z,e,V,B,i),{isSelected:U,select:Z,selected:K}=kBe(e,i)??{},{blur:se,focused:ne,isFocusTarget:ie,moveFocus:be,setFocused:ue}=yBe(e,L,q,U??(()=>!1),i),{labelDayButton:oe,labelGridcell:pe,labelGrid:ye,labelMonthDropdown:$e,labelNav:Se,labelPrevious:Y,labelNext:Le,labelWeekday:xe,labelWeekNumber:mt,labelWeekNumberHeader:Ue,labelYearDropdown:xt}=a,ut=j.useMemo(()=>WFe(i,e.ISOWeek),[i,e.ISOWeek]),Ot=d!==void 0||f!==void 0,tt=j.useCallback(()=>{F&&(ee(F),N?.(F))},[F,ee,N]),st=j.useCallback(()=>{J&&(ee(J),w?.(J))},[ee,J,w]),At=j.useCallback((Pt,kt)=>zt=>{zt.preventDefault(),zt.stopPropagation(),ue(Pt),Z?.(Pt.date,kt,zt),f?.(Pt.date,kt,zt)},[Z,f,ue]),Yt=j.useCallback((Pt,kt)=>zt=>{ue(Pt),v?.(Pt.date,kt,zt)},[v,ue]),yr=j.useCallback((Pt,kt)=>zt=>{se(),m?.(Pt.date,kt,zt)},[se,m]),Zt=j.useCallback((Pt,kt)=>zt=>{const or={ArrowLeft:[zt.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[zt.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[zt.shiftKey?"year":"week","after"],ArrowUp:[zt.shiftKey?"year":"week","before"],PageUp:[zt.shiftKey?"year":"month","before"],PageDown:[zt.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(or[zt.key]){zt.preventDefault(),zt.stopPropagation();const[Re,Je]=or[zt.key];be(Re,Je)}x?.(Pt.date,kt,zt)},[be,x,e.dir]),Vt=j.useCallback((Pt,kt)=>zt=>{g?.(Pt.date,kt,zt)},[g]),tr=j.useCallback((Pt,kt)=>zt=>{b?.(Pt.date,kt,zt)},[b]),$t=j.useCallback(Pt=>kt=>{const zt=Number(kt.target.value),or=i.setMonth(i.startOfMonth(Pt),zt);ee(or)},[i,ee]),Dr=j.useCallback(Pt=>kt=>{const zt=Number(kt.target.value),or=i.setYear(i.startOfMonth(Pt),zt);ee(or)},[i,ee]),{className:Er,style:hr}=j.useMemo(()=>({className:[l[ns.Root],e.className].filter(Boolean).join(" "),style:{...S?.[ns.Root],...e.style}}),[l,e.className,e.style,S]),Ct=TFe(e),is=j.useRef(null);oBe(is,!!e.animate,{classNames:l,months:M,focused:ne,dateLib:i});const cr={dayPickerProps:e,selected:K,select:Z,isSelected:U,months:M,nextMonth:J,previousMonth:F,goToMonth:ee,getModifiers:q,components:s,classNames:l,styles:S,labels:a,formatters:n};return ce.createElement(pne.Provider,{value:cr},ce.createElement(s.Root,{rootRef:e.animate?is:void 0,className:Er,style:hr,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...Ct},ce.createElement(s.Months,{className:l[ns.Months],style:S?.[ns.Months]},!e.hideNavigation&&!u&&ce.createElement(s.Nav,{"data-animated-nav":e.animate?"true":void 0,className:l[ns.Nav],style:S?.[ns.Nav],"aria-label":Se(),onPreviousClick:tt,onNextClick:st,previousMonth:F,nextMonth:J}),M.map((Pt,kt)=>ce.createElement(s.Month,{"data-animated-month":e.animate?"true":void 0,className:l[ns.Month],style:S?.[ns.Month],key:kt,displayIndex:kt,calendarMonth:Pt},u==="around"&&!e.hideNavigation&&kt===0&&ce.createElement(s.PreviousMonthButton,{type:"button",className:l[ns.PreviousMonthButton],tabIndex:F?void 0:-1,"aria-disabled":F?void 0:!0,"aria-label":Y(F),onClick:tt,"data-animated-button":e.animate?"true":void 0},ce.createElement(s.Chevron,{disabled:F?void 0:!0,className:l[ns.Chevron],orientation:e.dir==="rtl"?"right":"left"})),ce.createElement(s.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:l[ns.MonthCaption],style:S?.[ns.MonthCaption],calendarMonth:Pt,displayIndex:kt},c?.startsWith("dropdown")?ce.createElement(s.DropdownNav,{className:l[ns.Dropdowns],style:S?.[ns.Dropdowns]},(()=>{const zt=c==="dropdown"||c==="dropdown-months"?ce.createElement(s.MonthsDropdown,{key:"month",className:l[ns.MonthsDropdown],"aria-label":$e(),classNames:l,components:s,disabled:!!e.disableNavigation,onChange:$t(Pt.date),options:zFe(Pt.date,V,B,n,i),style:S?.[ns.Dropdown],value:i.getMonth(Pt.date)}):ce.createElement("span",{key:"month"},E(Pt.date,i)),or=c==="dropdown"||c==="dropdown-years"?ce.createElement(s.YearsDropdown,{key:"year",className:l[ns.YearsDropdown],"aria-label":xt(i.options),classNames:l,components:s,disabled:!!e.disableNavigation,onChange:Dr(Pt.date),options:qFe(V,B,n,i,!!e.reverseYears),style:S?.[ns.Dropdown],value:i.getYear(Pt.date)}):ce.createElement("span",{key:"year"},I(Pt.date,i));return i.getMonthYearOrder()==="year-first"?[or,zt]:[zt,or]})(),ce.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},A(Pt.date,i.options,i))):ce.createElement(s.CaptionLabel,{className:l[ns.CaptionLabel],role:"status","aria-live":"polite"},A(Pt.date,i.options,i))),u==="around"&&!e.hideNavigation&&kt===h-1&&ce.createElement(s.NextMonthButton,{type:"button",className:l[ns.NextMonthButton],tabIndex:J?void 0:-1,"aria-disabled":J?void 0:!0,"aria-label":Le(J),onClick:st,"data-animated-button":e.animate?"true":void 0},ce.createElement(s.Chevron,{disabled:J?void 0:!0,className:l[ns.Chevron],orientation:e.dir==="rtl"?"left":"right"})),kt===h-1&&u==="after"&&!e.hideNavigation&&ce.createElement(s.Nav,{"data-animated-nav":e.animate?"true":void 0,className:l[ns.Nav],style:S?.[ns.Nav],"aria-label":Se(),onPreviousClick:tt,onNextClick:st,previousMonth:F,nextMonth:J}),ce.createElement(s.MonthGrid,{role:"grid","aria-multiselectable":d==="multiple"||d==="range","aria-label":ye(Pt.date,i.options,i)||void 0,className:l[ns.MonthGrid],style:S?.[ns.MonthGrid]},!e.hideWeekdays&&ce.createElement(s.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:l[ns.Weekdays],style:S?.[ns.Weekdays]},C&&ce.createElement(s.WeekNumberHeader,{"aria-label":Ue(i.options),className:l[ns.WeekNumberHeader],style:S?.[ns.WeekNumberHeader],scope:"col"},$()),ut.map(zt=>ce.createElement(s.Weekday,{"aria-label":xe(zt,i.options,i),className:l[ns.Weekday],key:String(zt),style:S?.[ns.Weekday],scope:"col"},T(zt,i.options,i)))),ce.createElement(s.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:l[ns.Weeks],style:S?.[ns.Weeks]},Pt.weeks.map(zt=>ce.createElement(s.Week,{className:l[ns.Week],key:zt.weekNumber,style:S?.[ns.Week],week:zt},C&&ce.createElement(s.WeekNumber,{week:zt,style:S?.[ns.WeekNumber],"aria-label":mt(zt.weekNumber,{locale:o}),className:l[ns.WeekNumber],scope:"row",role:"rowheader"},O(zt.weekNumber,i)),zt.days.map(or=>{const{date:Re}=or,Je=q(or);if(Je[ti.focused]=!Je.hidden&&!!ne?.isEqualTo(or),Je[Cu.selected]=U?.(Re)||Je.selected,O8(K)){const{from:Ce,to:Qe}=K;Je[Cu.range_start]=!!(Ce&&Qe&&i.isSameDay(Re,Ce)),Je[Cu.range_end]=!!(Ce&&Qe&&i.isSameDay(Re,Qe)),Je[Cu.range_middle]=Sm(K,Re,!0,i)}const bt=VFe(Je,S,e.modifiersStyles),gr=EFe(Je,l,e.modifiersClassNames),je=!Ot&&!Je.hidden?pe(Re,Je,i.options,i):void 0;return ce.createElement(s.Day,{key:`${i.format(Re,"yyyy-MM-dd")}_${i.format(or.displayMonth,"yyyy-MM")}`,day:or,modifiers:Je,className:gr.join(" "),style:bt,role:"gridcell","aria-selected":Je.selected||void 0,"aria-label":je,"data-day":i.format(Re,"yyyy-MM-dd"),"data-month":or.outside?i.format(Re,"yyyy-MM"):void 0,"data-selected":Je.selected||void 0,"data-disabled":Je.disabled||void 0,"data-hidden":Je.hidden||void 0,"data-outside":or.outside||void 0,"data-focused":Je.focused||void 0,"data-today":Je.today||void 0},!Je.hidden&&Ot?ce.createElement(s.DayButton,{className:l[ns.DayButton],style:S?.[ns.DayButton],type:"button",day:or,modifiers:Je,disabled:Je.disabled||void 0,tabIndex:ie(or)?0:-1,"aria-label":oe(Re,Je,i.options,i),onClick:At(or,Je),onBlur:yr(or,Je),onFocus:Yt(or,Je),onKeyDown:Zt(or,Je),onMouseEnter:Vt(or,Je),onMouseLeave:tr(or,Je)},k(Re,i.options,i)):!Je.hidden&&k(or.date,i.options,i))})))))))),e.footer&&ce.createElement(s.Footer,{className:l[ns.Footer],style:S?.[ns.Footer],role:"status","aria-live":"polite"},e.footer)))}function Ah({className:t,classNames:e,showOutsideDays:s=!0,...n}){return r.jsx(_Be,{showOutsideDays:s,className:Ar("p-3",t),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:Ar(lb({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Ar("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Ar(lb({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:a,...i})=>r.jsx(an,{className:Ar("size-4",a),...i}),IconRight:({className:a,...i})=>r.jsx($n,{className:Ar("size-4",a),...i})},...n})}function Ps({className:t,...e}){return r.jsx("textarea",{"data-slot":"textarea",className:Ar("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function ea(t){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ea(t)}var $u=Uint8Array,Lc=Uint16Array,I8=Int32Array,$8=new $u([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D8=new $u([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tq=new $u([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kne=function(t,e){for(var s=new Lc(31),n=0;n<31;++n)s[n]=e+=1<<t[n-1];for(var a=new I8(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)a[i]=i-s[n]<<5|n;return{b:s,r:a}},_ne=kne($8,2),ABe=_ne.b,cO=_ne.r;ABe[28]=258,cO[258]=28;var EBe=kne(D8,0),rq=EBe.r,dO=new Lc(32768);for(var Ia=0;Ia<32768;++Ia){var jf=(Ia&43690)>>1|(Ia&21845)<<1;jf=(jf&52428)>>2|(jf&13107)<<2,jf=(jf&61680)>>4|(jf&3855)<<4,dO[Ia]=((jf&65280)>>8|(jf&255)<<8)>>1}var tb=(function(t,e,s){for(var n=t.length,a=0,i=new Lc(e);a<n;++a)t[a]&&++i[t[a]-1];var o=new Lc(e);for(a=1;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(s){l=new Lc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var d=a<<4|t[a],u=e-t[a],h=o[t[a]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[dO[h]>>c]=d}else for(l=new Lc(n),a=0;a<n;++a)t[a]&&(l[a]=dO[o[t[a]-1]++]>>15-t[a]);return l}),ig=new $u(288);for(var Ia=0;Ia<144;++Ia)ig[Ia]=8;for(var Ia=144;Ia<256;++Ia)ig[Ia]=9;for(var Ia=256;Ia<280;++Ia)ig[Ia]=7;for(var Ia=280;Ia<288;++Ia)ig[Ia]=8;var T4=new $u(32);for(var Ia=0;Ia<32;++Ia)T4[Ia]=5;var PBe=tb(ig,9,0),TBe=tb(T4,5,0),Ane=function(t){return(t+7)/8|0},OBe=function(t,e,s){return(s==null||s>t.length)&&(s=t.length),new $u(t.subarray(e,s))},mm=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8},i1=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8,t[n+2]|=s>>16},EA=function(t,e){for(var s=[],n=0;n<t.length;++n)t[n]&&s.push({s:n,f:t[n]});var a=s.length,i=s.slice();if(!a)return{t:Pne,l:0};if(a==1){var o=new $u(s[0].s+1);return o[s[0].s]=1,{t:o,l:1}}s.sort(function(S,A){return S.f-A.f}),s.push({s:-1,f:25001});var l=s[0],c=s[1],d=0,u=1,h=2;for(s[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=s[s[d].f<s[h].f?d++:h++],c=s[d!=u&&s[d].f<s[h].f?d++:h++],s[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<a;++n)i[n].s>m&&(m=i[n].s);var f=new Lc(m+1),v=uO(s[u-1],f,0);if(v>e){var n=0,x=0,g=v-e,b=1<<g;for(i.sort(function(A,k){return f[k.s]-f[A.s]||A.f-k.f});n<a;++n){var w=i[n].s;if(f[w]>e)x+=b-(1<<v-f[w]),f[w]=e;else break}for(x>>=g;x>0;){var N=i[n].s;f[N]<e?x-=1<<e-f[N]++-1:++n}for(;n>=0&&x;--n){var C=i[n].s;f[C]==e&&(--f[C],++x)}v=e}return{t:new $u(f),l:v}},uO=function(t,e,s){return t.s==-1?Math.max(uO(t.l,e,s+1),uO(t.r,e,s+1)):e[t.s]=s},sq=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new Lc(++e),n=0,a=t[0],i=1,o=function(c){s[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return{c:s.subarray(0,n),n:e}},o1=function(t,e){for(var s=0,n=0;n<e.length;++n)s+=t[n]*e[n];return s},Ene=function(t,e,s){var n=s.length,a=Ane(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=s[i];return(a+4+n)*8},nq=function(t,e,s,n,a,i,o,l,c,d,u){mm(e,u++,s),++a[256];for(var h=EA(a,15),m=h.t,f=h.l,v=EA(i,15),x=v.t,g=v.l,b=sq(m),w=b.c,N=b.n,C=sq(x),S=C.c,A=C.n,k=new Lc(19),E=0;E<w.length;++E)++k[w[E]&31];for(var E=0;E<S.length;++E)++k[S[E]&31];for(var O=EA(k,7),$=O.t,T=O.l,I=19;I>4&&!$[tq[I-1]];--I);var L=d+5<<3,z=o1(a,ig)+o1(i,T4)+o,M=o1(a,m)+o1(i,x)+o+14+3*I+o1(k,$)+2*k[16]+3*k[17]+7*k[18];if(c>=0&&L<=z&&L<=M)return Ene(e,u,t.subarray(c,c+d));var V,B,F,J;if(mm(e,u,1+(M<z)),u+=2,M<z){V=tb(m,f,0),B=m,F=tb(x,g,0),J=x;var ee=tb($,T,0);mm(e,u,N-257),mm(e,u+5,A-1),mm(e,u+10,I-4),u+=14;for(var E=0;E<I;++E)mm(e,u+3*E,$[tq[E]]);u+=3*I;for(var q=[w,S],U=0;U<2;++U)for(var Z=q[U],E=0;E<Z.length;++E){var K=Z[E]&31;mm(e,u,ee[K]),u+=$[K],K>15&&(mm(e,u,Z[E]>>5&127),u+=Z[E]>>12)}}else V=PBe,B=ig,F=TBe,J=T4;for(var E=0;E<l;++E){var se=n[E];if(se>255){var K=se>>18&31;i1(e,u,V[K+257]),u+=B[K+257],K>7&&(mm(e,u,se>>23&31),u+=$8[K]);var ne=se&31;i1(e,u,F[ne]),u+=J[ne],ne>3&&(i1(e,u,se>>5&8191),u+=D8[ne])}else i1(e,u,V[se]),u+=B[se]}return i1(e,u,V[256]),u+B[256]},IBe=new I8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pne=new $u(0),$Be=function(t,e,s,n,a,i){var o=i.z||t.length,l=new $u(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),d=i.l,u=(i.r||0)&7;if(e){u&&(c[0]=i.r>>3);for(var h=IBe[e-1],m=h>>13,f=h&8191,v=(1<<s)-1,x=i.p||new Lc(32768),g=i.h||new Lc(v+1),b=Math.ceil(s/3),w=2*b,N=function(Se){return(t[Se]^t[Se+1]<<b^t[Se+2]<<w)&v},C=new I8(25e3),S=new Lc(288),A=new Lc(32),k=0,E=0,O=i.i||0,$=0,T=i.w||0,I=0;O+2<o;++O){var L=N(O),z=O&32767,M=g[L];if(x[z]=M,g[L]=z,T<=O){var V=o-O;if((k>7e3||$>24576)&&(V>423||!d)){u=nq(t,c,0,C,S,A,E,$,I,O-I,u),$=k=E=0,I=O;for(var B=0;B<286;++B)S[B]=0;for(var B=0;B<30;++B)A[B]=0}var F=2,J=0,ee=f,q=z-M&32767;if(V>2&&L==N(O-q))for(var U=Math.min(m,V)-1,Z=Math.min(32767,O),K=Math.min(258,V);q<=Z&&--ee&&z!=M;){if(t[O+F]==t[O+F-q]){for(var se=0;se<K&&t[O+se]==t[O+se-q];++se);if(se>F){if(F=se,J=q,se>U)break;for(var ne=Math.min(q,se-2),ie=0,B=0;B<ne;++B){var be=O-q+B&32767,ue=x[be],oe=be-ue&32767;oe>ie&&(ie=oe,M=be)}}}z=M,M=x[z],q+=z-M&32767}if(J){C[$++]=268435456|cO[F]<<18|rq[J];var pe=cO[F]&31,ye=rq[J]&31;E+=$8[pe]+D8[ye],++S[257+pe],++A[ye],T=O+F,++k}else C[$++]=t[O],++S[t[O]]}}for(O=Math.max(O,T);O<o;++O)C[$++]=t[O],++S[t[O]];u=nq(t,c,d,C,S,A,E,$,I,O-I,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=x,i.i=O,i.w=T)}else{for(var O=i.w||0;O<o+d;O+=65535){var $e=O+65535;$e>=o&&(c[u/8|0]=d,$e=o),u=Ene(c,u+1,t.subarray(O,$e))}i.i=o}return OBe(l,0,n+Ane(u)+a)},Tne=function(){var t=1,e=0;return{p:function(s){for(var n=t,a=e,i=s.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=s[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},DBe=function(t,e,s,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new $u(i.length+t.length);o.set(i),o.set(t,i.length),t=o,a.w=i.length}return $Be(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,s,n,a)},One=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},RBe=function(t,e){var s=e.level,n=s==0?0:s<6?1:s==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Tne();a.p(e.dictionary),One(t,2,a.d())}};function hO(t,e){e||(e={});var s=Tne();s.p(t);var n=DBe(t,e,e.dictionary?6:2,4);return RBe(n,e),One(n,n.length-4,s.d()),n}var MBe=typeof TextDecoder<"u"&&new TextDecoder,LBe=0;try{MBe.decode(Pne,{stream:!0}),LBe=1}catch{}function FBe(t){if(Array.isArray(t))return t}function BBe(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function aq(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=Array(e);s<e;s++)n[s]=t[s];return n}function UBe(t,e){if(t){if(typeof t=="string")return aq(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?aq(t,e):void 0}}function zBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iq(t,e){return FBe(t)||BBe(t,e)||UBe(t,e)||zBe()}function oq(t,e="utf8"){return new TextDecoder(e).decode(t)}const VBe=new TextEncoder;function WBe(t){return VBe.encode(t)}const qBe=1024*8,HBe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),PA={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class R8{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=qBe,s={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=s.offset?s.offset>>>0:0,i=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof R8)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,s){const n=PA[s].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===HBe&&s!=="uint8"&&s!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new PA[s](l.buffer);return this.offset+=n,c.reverse(),c}const o=new PA[s](i);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let s="";for(let n=0;n<e;n++)s+=this.readChar();return s}readUtf8(e=1){return oq(this.readBytes(e))}decodeText(e=1,s="utf8"){return oq(this.readBytes(e),s)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let s=0;s<e.length;s++)this._data.setUint8(this.offset++,e[s]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));return this}writeUtf8(e){return this.writeBytes(WBe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function dy(t){let e=t.length;for(;--e>=0;)t[e]=0}const GBe=3,YBe=258,Ine=29,KBe=256,XBe=KBe+1+Ine,$ne=30,QBe=512,ZBe=new Array((XBe+2)*2);dy(ZBe);const JBe=new Array($ne*2);dy(JBe);const eUe=new Array(QBe);dy(eUe);const tUe=new Array(YBe-GBe+1);dy(tUe);const rUe=new Array(Ine);dy(rUe);const sUe=new Array($ne);dy(sUe);const nUe=(t,e,s,n)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;s!==0;){o=s>2e3?2e3:s,s-=o;do a=a+e[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var mO=nUe;const aUe=()=>{let t,e=[];for(var s=0;s<256;s++){t=s;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[s]=t}return e},iUe=new Uint32Array(aUe()),oUe=(t,e,s,n)=>{const a=iUe,i=n+s;t^=-1;for(let o=n;o<i;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var sh=oUe,fO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Dne={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const lUe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var cUe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const s=e.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const n in s)lUe(s,n)&&(t[n]=s[n])}}return t},dUe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const s=new Uint8Array(e);for(let n=0,a=0,i=t.length;n<i;n++){let o=t[n];s.set(o,a),a+=o.length}return s},Rne={assign:cUe,flattenChunks:dUe};let Mne=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Mne=!1}const ow=new Uint8Array(256);for(let t=0;t<256;t++)ow[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ow[254]=ow[254]=1;var uUe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,s,n,a,i,o=t.length,l=0;for(a=0;a<o;a++)s=t.charCodeAt(a),(s&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),l+=s<128?1:s<2048?2:s<65536?3:4;for(e=new Uint8Array(l),i=0,a=0;i<l;a++)s=t.charCodeAt(a),(s&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),s<128?e[i++]=s:s<2048?(e[i++]=192|s>>>6,e[i++]=128|s&63):s<65536?(e[i++]=224|s>>>12,e[i++]=128|s>>>6&63,e[i++]=128|s&63):(e[i++]=240|s>>>18,e[i++]=128|s>>>12&63,e[i++]=128|s>>>6&63,e[i++]=128|s&63);return e};const hUe=(t,e)=>{if(e<65534&&t.subarray&&Mne)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let s="";for(let n=0;n<e;n++)s+=String.fromCharCode(t[n]);return s};var mUe=(t,e)=>{const s=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const i=new Array(s*2);for(a=0,n=0;n<s;){let o=t[n++];if(o<128){i[a++]=o;continue}let l=ow[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<s;)o=o<<6|t[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return hUe(i,a)},fUe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let s=e-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?e:s+ow[t[s]]>e?s:e},pO={string2buf:uUe,buf2string:mUe,utf8border:fUe};function pUe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var xUe=pUe;const uj=16209,gUe=16191;var vUe=function(e,s){let n,a,i,o,l,c,d,u,h,m,f,v,x,g,b,w,N,C,S,A,k,E,O,$;const T=e.state;n=e.next_in,O=e.input,a=n+(e.avail_in-5),i=e.next_out,$=e.output,o=i-(s-e.avail_out),l=i+(e.avail_out-257),c=T.dmax,d=T.wsize,u=T.whave,h=T.wnext,m=T.window,f=T.hold,v=T.bits,x=T.lencode,g=T.distcode,b=(1<<T.lenbits)-1,w=(1<<T.distbits)-1;e:do{v<15&&(f+=O[n++]<<v,v+=8,f+=O[n++]<<v,v+=8),N=x[f&b];t:for(;;){if(C=N>>>24,f>>>=C,v-=C,C=N>>>16&255,C===0)$[i++]=N&65535;else if(C&16){S=N&65535,C&=15,C&&(v<C&&(f+=O[n++]<<v,v+=8),S+=f&(1<<C)-1,f>>>=C,v-=C),v<15&&(f+=O[n++]<<v,v+=8,f+=O[n++]<<v,v+=8),N=g[f&w];r:for(;;){if(C=N>>>24,f>>>=C,v-=C,C=N>>>16&255,C&16){if(A=N&65535,C&=15,v<C&&(f+=O[n++]<<v,v+=8,v<C&&(f+=O[n++]<<v,v+=8)),A+=f&(1<<C)-1,A>c){e.msg="invalid distance too far back",T.mode=uj;break e}if(f>>>=C,v-=C,C=i-o,A>C){if(C=A-C,C>u&&T.sane){e.msg="invalid distance too far back",T.mode=uj;break e}if(k=0,E=m,h===0){if(k+=d-C,C<S){S-=C;do $[i++]=m[k++];while(--C);k=i-A,E=$}}else if(h<C){if(k+=d+h-C,C-=h,C<S){S-=C;do $[i++]=m[k++];while(--C);if(k=0,h<S){C=h,S-=C;do $[i++]=m[k++];while(--C);k=i-A,E=$}}}else if(k+=h-C,C<S){S-=C;do $[i++]=m[k++];while(--C);k=i-A,E=$}for(;S>2;)$[i++]=E[k++],$[i++]=E[k++],$[i++]=E[k++],S-=3;S&&($[i++]=E[k++],S>1&&($[i++]=E[k++]))}else{k=i-A;do $[i++]=$[k++],$[i++]=$[k++],$[i++]=$[k++],S-=3;while(S>2);S&&($[i++]=$[k++],S>1&&($[i++]=$[k++]))}}else if((C&64)===0){N=g[(N&65535)+(f&(1<<C)-1)];continue r}else{e.msg="invalid distance code",T.mode=uj;break e}break}}else if((C&64)===0){N=x[(N&65535)+(f&(1<<C)-1)];continue t}else if(C&32){T.mode=gUe;break e}else{e.msg="invalid literal/length code",T.mode=uj;break e}break}}while(n<a&&i<l);S=v>>3,n-=S,v-=S<<3,f&=(1<<v)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=i<l?257+(l-i):257-(i-l),T.hold=f,T.bits=v};const m0=15,lq=852,cq=592,dq=0,TA=1,uq=2,yUe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bUe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wUe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jUe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),NUe=(t,e,s,n,a,i,o,l)=>{const c=l.bits;let d=0,u=0,h=0,m=0,f=0,v=0,x=0,g=0,b=0,w=0,N,C,S,A,k,E=null,O;const $=new Uint16Array(m0+1),T=new Uint16Array(m0+1);let I=null,L,z,M;for(d=0;d<=m0;d++)$[d]=0;for(u=0;u<n;u++)$[e[s+u]]++;for(f=c,m=m0;m>=1&&$[m]===0;m--);if(f>m&&(f=m),m===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<m&&$[h]===0;h++);for(f<h&&(f=h),g=1,d=1;d<=m0;d++)if(g<<=1,g-=$[d],g<0)return-1;if(g>0&&(t===dq||m!==1))return-1;for(T[1]=0,d=1;d<m0;d++)T[d+1]=T[d]+$[d];for(u=0;u<n;u++)e[s+u]!==0&&(o[T[e[s+u]]++]=u);if(t===dq?(E=I=o,O=20):t===TA?(E=yUe,I=bUe,O=257):(E=wUe,I=jUe,O=0),w=0,u=0,d=h,k=i,v=f,x=0,S=-1,b=1<<f,A=b-1,t===TA&&b>lq||t===uq&&b>cq)return 1;for(;;){L=d-x,o[u]+1<O?(z=0,M=o[u]):o[u]>=O?(z=I[o[u]-O],M=E[o[u]-O]):(z=96,M=0),N=1<<d-x,C=1<<v,h=C;do C-=N,a[k+(w>>x)+C]=L<<24|z<<16|M|0;while(C!==0);for(N=1<<d-1;w&N;)N>>=1;if(N!==0?(w&=N-1,w+=N):w=0,u++,--$[d]===0){if(d===m)break;d=e[s+o[u]]}if(d>f&&(w&A)!==S){for(x===0&&(x=f),k+=h,v=d-x,g=1<<v;v+x<m&&(g-=$[v+x],!(g<=0));)v++,g<<=1;if(b+=1<<v,t===TA&&b>lq||t===uq&&b>cq)return 1;S=w&A,a[S]=f<<24|v<<16|k-i|0}}return w!==0&&(a[k+w]=d-x<<24|64<<16|0),l.bits=f,0};var rb=NUe;const SUe=0,Lne=1,Fne=2,{Z_FINISH:hq,Z_BLOCK:CUe,Z_TREES:hj,Z_OK:og,Z_STREAM_END:kUe,Z_NEED_DICT:_Ue,Z_STREAM_ERROR:Rd,Z_DATA_ERROR:Bne,Z_MEM_ERROR:Une,Z_BUF_ERROR:AUe,Z_DEFLATED:mq}=Dne,u3=16180,fq=16181,pq=16182,xq=16183,gq=16184,vq=16185,yq=16186,bq=16187,wq=16188,jq=16189,O4=16190,fm=16191,OA=16192,Nq=16193,IA=16194,Sq=16195,Cq=16196,kq=16197,_q=16198,mj=16199,fj=16200,Aq=16201,Eq=16202,Pq=16203,Tq=16204,Oq=16205,$A=16206,Iq=16207,$q=16208,Ba=16209,zne=16210,Vne=16211,EUe=852,PUe=592,TUe=15,OUe=TUe,Dq=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function IUe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<u3||e.mode>Vne?1:0},Wne=t=>{if(wg(t))return Rd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=u3,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(EUe),e.distcode=e.distdyn=new Int32Array(PUe),e.sane=1,e.back=-1,og},qne=t=>{if(wg(t))return Rd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Wne(t)},Hne=(t,e)=>{let s;if(wg(t))return Rd;const n=t.state;return e<0?(s=0,e=-e):(s=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Rd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=s,n.wbits=e,qne(t))},Gne=(t,e)=>{if(!t)return Rd;const s=new IUe;t.state=s,s.strm=t,s.window=null,s.mode=u3;const n=Hne(t,e);return n!==og&&(t.state=null),n},$Ue=t=>Gne(t,OUe);let Rq=!0,DA,RA;const DUe=t=>{if(Rq){DA=new Int32Array(512),RA=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(rb(Lne,t.lens,0,288,DA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;rb(Fne,t.lens,0,32,RA,0,t.work,{bits:5}),Rq=!1}t.lencode=DA,t.lenbits=9,t.distcode=RA,t.distbits=5},Yne=(t,e,s,n)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(s-i.wsize,s),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(e.subarray(s-n,s-n+a),i.wnext),n-=a,n?(i.window.set(e.subarray(s-n,s),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},RUe=(t,e)=>{let s,n,a,i,o,l,c,d,u,h,m,f,v,x,g=0,b,w,N,C,S,A,k,E;const O=new Uint8Array(4);let $,T;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wg(t)||!t.output||!t.input&&t.avail_in!==0)return Rd;s=t.state,s.mode===fm&&(s.mode=OA),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,d=s.hold,u=s.bits,h=l,m=c,E=og;e:for(;;)switch(s.mode){case u3:if(s.wrap===0){s.mode=OA;break}for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(s.wrap&2&&d===35615){s.wbits===0&&(s.wbits=15),s.check=0,O[0]=d&255,O[1]=d>>>8&255,s.check=sh(s.check,O,2,0),d=0,u=0,s.mode=fq;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",s.mode=Ba;break}if((d&15)!==mq){t.msg="unknown compression method",s.mode=Ba;break}if(d>>>=4,u-=4,k=(d&15)+8,s.wbits===0&&(s.wbits=k),k>15||k>s.wbits){t.msg="invalid window size",s.mode=Ba;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=d&512?jq:fm,d=0,u=0;break;case fq:for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(s.flags=d,(s.flags&255)!==mq){t.msg="unknown compression method",s.mode=Ba;break}if(s.flags&57344){t.msg="unknown header flags set",s.mode=Ba;break}s.head&&(s.head.text=d>>8&1),s.flags&512&&s.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,s.check=sh(s.check,O,2,0)),d=0,u=0,s.mode=pq;case pq:for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.head&&(s.head.time=d),s.flags&512&&s.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,O[2]=d>>>16&255,O[3]=d>>>24&255,s.check=sh(s.check,O,4,0)),d=0,u=0,s.mode=xq;case xq:for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.head&&(s.head.xflags=d&255,s.head.os=d>>8),s.flags&512&&s.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,s.check=sh(s.check,O,2,0)),d=0,u=0,s.mode=gq;case gq:if(s.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.length=d,s.head&&(s.head.extra_len=d),s.flags&512&&s.wrap&4&&(O[0]=d&255,O[1]=d>>>8&255,s.check=sh(s.check,O,2,0)),d=0,u=0}else s.head&&(s.head.extra=null);s.mode=vq;case vq:if(s.flags&1024&&(f=s.length,f>l&&(f=l),f&&(s.head&&(k=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(n.subarray(i,i+f),k)),s.flags&512&&s.wrap&4&&(s.check=sh(s.check,n,f,i)),l-=f,i+=f,s.length-=f),s.length))break e;s.length=0,s.mode=yq;case yq:if(s.flags&2048){if(l===0)break e;f=0;do k=n[i+f++],s.head&&k&&s.length<65536&&(s.head.name+=String.fromCharCode(k));while(k&&f<l);if(s.flags&512&&s.wrap&4&&(s.check=sh(s.check,n,f,i)),l-=f,i+=f,k)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=bq;case bq:if(s.flags&4096){if(l===0)break e;f=0;do k=n[i+f++],s.head&&k&&s.length<65536&&(s.head.comment+=String.fromCharCode(k));while(k&&f<l);if(s.flags&512&&s.wrap&4&&(s.check=sh(s.check,n,f,i)),l-=f,i+=f,k)break e}else s.head&&(s.head.comment=null);s.mode=wq;case wq:if(s.flags&512){for(;u<16;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(s.wrap&4&&d!==(s.check&65535)){t.msg="header crc mismatch",s.mode=Ba;break}d=0,u=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=fm;break;case jq:for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}t.adler=s.check=Dq(d),d=0,u=0,s.mode=O4;case O4:if(s.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,s.hold=d,s.bits=u,_Ue;t.adler=s.check=1,s.mode=fm;case fm:if(e===CUe||e===hj)break e;case OA:if(s.last){d>>>=u&7,u-=u&7,s.mode=$A;break}for(;u<3;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}switch(s.last=d&1,d>>>=1,u-=1,d&3){case 0:s.mode=Nq;break;case 1:if(DUe(s),s.mode=mj,e===hj){d>>>=2,u-=2;break e}break;case 2:s.mode=Cq;break;case 3:t.msg="invalid block type",s.mode=Ba}d>>>=2,u-=2;break;case Nq:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",s.mode=Ba;break}if(s.length=d&65535,d=0,u=0,s.mode=IA,e===hj)break e;case IA:s.mode=Sq;case Sq:if(f=s.length,f){if(f>l&&(f=l),f>c&&(f=c),f===0)break e;a.set(n.subarray(i,i+f),o),l-=f,i+=f,c-=f,o+=f,s.length-=f;break}s.mode=fm;break;case Cq:for(;u<14;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(s.nlen=(d&31)+257,d>>>=5,u-=5,s.ndist=(d&31)+1,d>>>=5,u-=5,s.ncode=(d&15)+4,d>>>=4,u-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=Ba;break}s.have=0,s.mode=kq;case kq:for(;s.have<s.ncode;){for(;u<3;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.lens[I[s.have++]]=d&7,d>>>=3,u-=3}for(;s.have<19;)s.lens[I[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,$={bits:s.lenbits},E=rb(SUe,s.lens,0,19,s.lencode,0,s.work,$),s.lenbits=$.bits,E){t.msg="invalid code lengths set",s.mode=Ba;break}s.have=0,s.mode=_q;case _q:for(;s.have<s.nlen+s.ndist;){for(;g=s.lencode[d&(1<<s.lenbits)-1],b=g>>>24,w=g>>>16&255,N=g&65535,!(b<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(N<16)d>>>=b,u-=b,s.lens[s.have++]=N;else{if(N===16){for(T=b+2;u<T;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(d>>>=b,u-=b,s.have===0){t.msg="invalid bit length repeat",s.mode=Ba;break}k=s.lens[s.have-1],f=3+(d&3),d>>>=2,u-=2}else if(N===17){for(T=b+3;u<T;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=b,u-=b,k=0,f=3+(d&7),d>>>=3,u-=3}else{for(T=b+7;u<T;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=b,u-=b,k=0,f=11+(d&127),d>>>=7,u-=7}if(s.have+f>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=Ba;break}for(;f--;)s.lens[s.have++]=k}}if(s.mode===Ba)break;if(s.lens[256]===0){t.msg="invalid code -- missing end-of-block",s.mode=Ba;break}if(s.lenbits=9,$={bits:s.lenbits},E=rb(Lne,s.lens,0,s.nlen,s.lencode,0,s.work,$),s.lenbits=$.bits,E){t.msg="invalid literal/lengths set",s.mode=Ba;break}if(s.distbits=6,s.distcode=s.distdyn,$={bits:s.distbits},E=rb(Fne,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,$),s.distbits=$.bits,E){t.msg="invalid distances set",s.mode=Ba;break}if(s.mode=mj,e===hj)break e;case mj:s.mode=fj;case fj:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,s.hold=d,s.bits=u,vUe(t,m),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,d=s.hold,u=s.bits,s.mode===fm&&(s.back=-1);break}for(s.back=0;g=s.lencode[d&(1<<s.lenbits)-1],b=g>>>24,w=g>>>16&255,N=g&65535,!(b<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(w&&(w&240)===0){for(C=b,S=w,A=N;g=s.lencode[A+((d&(1<<C+S)-1)>>C)],b=g>>>24,w=g>>>16&255,N=g&65535,!(C+b<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=C,u-=C,s.back+=C}if(d>>>=b,u-=b,s.back+=b,s.length=N,w===0){s.mode=Oq;break}if(w&32){s.back=-1,s.mode=fm;break}if(w&64){t.msg="invalid literal/length code",s.mode=Ba;break}s.extra=w&15,s.mode=Aq;case Aq:if(s.extra){for(T=s.extra;u<T;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.length+=d&(1<<s.extra)-1,d>>>=s.extra,u-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=Eq;case Eq:for(;g=s.distcode[d&(1<<s.distbits)-1],b=g>>>24,w=g>>>16&255,N=g&65535,!(b<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if((w&240)===0){for(C=b,S=w,A=N;g=s.distcode[A+((d&(1<<C+S)-1)>>C)],b=g>>>24,w=g>>>16&255,N=g&65535,!(C+b<=u);){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}d>>>=C,u-=C,s.back+=C}if(d>>>=b,u-=b,s.back+=b,w&64){t.msg="invalid distance code",s.mode=Ba;break}s.offset=N,s.extra=w&15,s.mode=Pq;case Pq:if(s.extra){for(T=s.extra;u<T;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}s.offset+=d&(1<<s.extra)-1,d>>>=s.extra,u-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=Ba;break}s.mode=Tq;case Tq:if(c===0)break e;if(f=m-c,s.offset>f){if(f=s.offset-f,f>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=Ba;break}f>s.wnext?(f-=s.wnext,v=s.wsize-f):v=s.wnext-f,f>s.length&&(f=s.length),x=s.window}else x=a,v=o-s.offset,f=s.length;f>c&&(f=c),c-=f,s.length-=f;do a[o++]=x[v++];while(--f);s.length===0&&(s.mode=fj);break;case Oq:if(c===0)break e;a[o++]=s.length,c--,s.mode=fj;break;case $A:if(s.wrap){for(;u<32;){if(l===0)break e;l--,d|=n[i++]<<u,u+=8}if(m-=c,t.total_out+=m,s.total+=m,s.wrap&4&&m&&(t.adler=s.check=s.flags?sh(s.check,a,m,o-m):mO(s.check,a,m,o-m)),m=c,s.wrap&4&&(s.flags?d:Dq(d))!==s.check){t.msg="incorrect data check",s.mode=Ba;break}d=0,u=0}s.mode=Iq;case Iq:if(s.wrap&&s.flags){for(;u<32;){if(l===0)break e;l--,d+=n[i++]<<u,u+=8}if(s.wrap&4&&d!==(s.total&4294967295)){t.msg="incorrect length check",s.mode=Ba;break}d=0,u=0}s.mode=$q;case $q:E=kUe;break e;case Ba:E=Bne;break e;case zne:return Une;case Vne:default:return Rd}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,s.hold=d,s.bits=u,(s.wsize||m!==t.avail_out&&s.mode<Ba&&(s.mode<$A||e!==hq))&&Yne(t,t.output,t.next_out,m-t.avail_out),h-=t.avail_in,m-=t.avail_out,t.total_in+=h,t.total_out+=m,s.total+=m,s.wrap&4&&m&&(t.adler=s.check=s.flags?sh(s.check,a,m,t.next_out-m):mO(s.check,a,m,t.next_out-m)),t.data_type=s.bits+(s.last?64:0)+(s.mode===fm?128:0)+(s.mode===mj||s.mode===IA?256:0),(h===0&&m===0||e===hq)&&E===og&&(E=AUe),E},MUe=t=>{if(wg(t))return Rd;let e=t.state;return e.window&&(e.window=null),t.state=null,og},LUe=(t,e)=>{if(wg(t))return Rd;const s=t.state;return(s.wrap&2)===0?Rd:(s.head=e,e.done=!1,og)},FUe=(t,e)=>{const s=e.length;let n,a,i;return wg(t)||(n=t.state,n.wrap!==0&&n.mode!==O4)?Rd:n.mode===O4&&(a=1,a=mO(a,e,s,0),a!==n.check)?Bne:(i=Yne(t,e,s,s),i?(n.mode=zne,Une):(n.havedict=1,og))};var BUe=qne,UUe=Hne,zUe=Wne,VUe=$Ue,WUe=Gne,qUe=RUe,HUe=MUe,GUe=LUe,YUe=FUe,KUe="pako inflate (from Nodeca project)",gm={inflateReset:BUe,inflateReset2:UUe,inflateResetKeep:zUe,inflateInit:VUe,inflateInit2:WUe,inflate:qUe,inflateEnd:HUe,inflateGetHeader:GUe,inflateSetDictionary:YUe,inflateInfo:KUe};function XUe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QUe=XUe;const Kne=Object.prototype.toString,{Z_NO_FLUSH:ZUe,Z_FINISH:JUe,Z_OK:lw,Z_STREAM_END:MA,Z_NEED_DICT:LA,Z_STREAM_ERROR:eze,Z_DATA_ERROR:Mq,Z_MEM_ERROR:tze}=Dne;function Bw(t){this.options=Rne.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xUe,this.strm.avail_out=0;let s=gm.inflateInit2(this.strm,e.windowBits);if(s!==lw)throw new Error(fO[s]);if(this.header=new QUe,gm.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=pO.string2buf(e.dictionary):Kne.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(s=gm.inflateSetDictionary(this.strm,e.dictionary),s!==lw)))throw new Error(fO[s])}Bw.prototype.push=function(t,e){const s=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?JUe:ZUe,Kne.call(t)==="[object ArrayBuffer]"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(n),s.next_out=0,s.avail_out=n),i=gm.inflate(s,o),i===LA&&a&&(i=gm.inflateSetDictionary(s,a),i===lw?i=gm.inflate(s,o):i===Mq&&(i=LA));s.avail_in>0&&i===MA&&s.state.wrap>0&&t[s.next_in]!==0;)gm.inflateReset(s),i=gm.inflate(s,o);switch(i){case eze:case Mq:case LA:case tze:return this.onEnd(i),this.ended=!0,!1}if(l=s.avail_out,s.next_out&&(s.avail_out===0||i===MA))if(this.options.to==="string"){let c=pO.utf8border(s.output,s.next_out),d=s.next_out-c,u=pO.buf2string(s.output,c);s.next_out=d,s.avail_out=n-d,d&&s.output.set(s.output.subarray(c,c+d),0),this.onData(u)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(i===lw&&l===0)){if(i===MA)return i=gm.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Bw.prototype.onData=function(t){this.chunks.push(t)};Bw.prototype.onEnd=function(t){t===lw&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rne.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function rze(t,e){const s=new Bw(e);if(s.push(t),s.err)throw s.msg||fO[s.err];return s.result}var sze=Bw,nze=rze,aze={Inflate:sze,inflate:nze};const{Inflate:ize,inflate:oze}=aze;var Lq=ize,lze=oze;const Xne=[];for(let t=0;t<256;t++){let e=t;for(let s=0;s<8;s++)e&1?e=3988292384^e>>>1:e=e>>>1;Xne[t]=e}const Fq=4294967295;function cze(t,e,s){let n=t;for(let a=0;a<s;a++)n=Xne[(n^e[a])&255]^n>>>8;return n}function dze(t,e){return(cze(Fq,t,e)^Fq)>>>0}function Bq(t,e,s){const n=t.readUint32(),a=dze(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${s}. Expected ${n}, found ${a}`)}function Qne(t,e,s){for(let n=0;n<s;n++)e[n]=t[n]}function Zne(t,e,s,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<s;a++)e[a]=t[a]+e[a-n]&255}function Jne(t,e,s,n){let a=0;if(s.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+s[a]&255}function eae(t,e,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-a]>>1)&255}else{for(;i<a;i++)e[i]=t[i]+(s[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-a]+s[i]>>1)&255}}function tae(t,e,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-a]&255}else{for(;i<a;i++)e[i]=t[i]+s[i]&255;for(;i<n;i++)e[i]=t[i]+uze(e[i-a],s[i],s[i-a])&255}}function uze(t,e,s){const n=t+e-s,a=Math.abs(n-t),i=Math.abs(n-e),o=Math.abs(n-s);return a<=i&&a<=o?t:i<=o?e:s}function hze(t,e,s,n,a,i){switch(t){case 0:Qne(e,s,a);break;case 1:Zne(e,s,a,i);break;case 2:Jne(e,s,n,a);break;case 3:eae(e,s,n,a,i);break;case 4:tae(e,s,n,a,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const mze=new Uint16Array([255]),fze=new Uint8Array(mze.buffer),pze=fze[0]===255;function xze(t){const{data:e,width:s,height:n,channels:a,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*s*l);let d=0;for(let u=0;u<7;u++){const h=o[u],m=Math.ceil((s-h.x)/h.xStep),f=Math.ceil((n-h.y)/h.yStep);if(m<=0||f<=0)continue;const v=m*l,x=new Uint8Array(v);for(let g=0;g<f;g++){const b=e[d++],w=e.subarray(d,d+v);d+=v;const N=new Uint8Array(v);hze(b,w,N,x,v,l),x.set(N);for(let C=0;C<m;C++){const S=h.x+C*h.xStep,A=h.y+g*h.yStep;if(!(S>=s||A>=n))for(let k=0;k<l;k++)c[(A*s+S)*l+k]=N[C*l+k]}}}if(i===16){const u=new Uint16Array(c.buffer);if(pze)for(let h=0;h<u.length;h++)u[h]=gze(u[h]);return u}else return c}function gze(t){return(t&255)<<8|t>>8&255}const vze=new Uint16Array([255]),yze=new Uint8Array(vze.buffer),bze=yze[0]===255,wze=new Uint8Array(0);function Uq(t){const{data:e,width:s,height:n,channels:a,depth:i}=t,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*s),c=new Uint8Array(n*l);let d=wze,u=0,h,m;for(let f=0;f<n;f++){switch(h=e.subarray(u+1,u+1+l),m=c.subarray(f*l,(f+1)*l),e[u]){case 0:Qne(h,m,l);break;case 1:Zne(h,m,l,o);break;case 2:Jne(h,m,d,l);break;case 3:eae(h,m,d,l,o);break;case 4:tae(h,m,d,l,o);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}d=m,u+=l+1}if(i===16){const f=new Uint16Array(c.buffer);if(bze)for(let v=0;v<f.length;v++)f[v]=jze(f[v]);return f}else return c}function jze(t){return(t&255)<<8|t>>8&255}const Gj=Uint8Array.of(137,80,78,71,13,10,26,10);function zq(t){if(!Nze(t.readBytes(Gj.length)))throw new Error("wrong PNG signature")}function Nze(t){if(t.length<Gj.length)return!1;for(let e=0;e<Gj.length;e++)if(t[e]!==Gj[e])return!1;return!0}const Sze="tEXt",Cze=0,rae=new TextDecoder("latin1");function kze(t){if(Aze(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const _ze=/^[\u0000-\u00FF]*$/;function Aze(t){if(!_ze.test(t))throw new Error("invalid latin1 text")}function Eze(t,e,s){const n=sae(e);t[n]=Pze(e,s-n.length-1)}function sae(t){for(t.mark();t.readByte()!==Cze;);const e=t.offset;t.reset();const s=rae.decode(t.readBytes(e-t.offset-1));return t.skip(1),kze(s),s}function Pze(t,e){return rae.decode(t.readBytes(e))}const kc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},FA={UNKNOWN:-1,DEFLATE:0},Vq={UNKNOWN:-1,ADAPTIVE:0},BA={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},pj={NONE:0,BACKGROUND:1,PREVIOUS:2},UA={SOURCE:0,OVER:1};class Tze extends R8{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,s={}){super(e);const{checkCrc:n=!1}=s;this._checkCrc=n,this._inflator=new Lq,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=FA.UNKNOWN,this._filterMethod=Vq.UNKNOWN,this._interlaceMethod=BA.UNKNOWN,this._colorType=kc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(zq(this);!this._end;){const e=this.readUint32(),s=this.readChars(4);this.decodeChunk(e,s)}return this.decodeImage(),this._png}decodeApng(){for(zq(this);!this._end;){const e=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(e,s)}return this.decodeApngImage(),this._apng}decodeChunk(e,s){const n=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Sze:Eze(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Bq(this,e+4,s):this.skip(4)}decodeApngChunk(e,s){const n=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,s),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?Bq(this,e+4,s):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Oze(this.readUint8());const s=this.readUint8();this._colorType=s;let n;switch(s){case kc.GREYSCALE:n=1;break;case kc.TRUECOLOUR:n=3;break;case kc.INDEXED_COLOUR:n=1;break;case kc.GREYSCALE_ALPHA:n=2;break;case kc.TRUECOLOUR_ALPHA:n=4;break;case kc.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==FA.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const s=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<s;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const s=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let s=e,n=this.offset+this.byteOffset;if(n+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,n,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case kc.GREYSCALE:case kc.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let s=0;s<e/2;s++)this._transparency[s]=this.readUint16();break}case kc.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let s=0;for(;s<e;s++){const n=this.readByte();this._palette[s].push(n)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case kc.UNKNOWN:case kc.GREYSCALE_ALPHA:case kc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const s=sae(this),n=this.readUint8();if(n!==FA.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const a=this.readBytes(e-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:lze(a)}}decodepHYs(){const e=this.readUint32(),s=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:s,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const s={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=Uq({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)s.data=n.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(n,a,s),this.addFrameDataToCanvas(s,n)}this._apng.frames.push(s)}}return this._apng}disposeFrame(e,s,n){switch(e.disposeOp){case pj.NONE:break;case pj.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let i=0;i<this._png.width;i++){const o=(a*e.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)n.data[o+l]=0}break;case pj.PREVIOUS:n.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,s){const n=1<<this._png.depth,a=(i,o)=>{const l=((i+s.yOffset)*this._png.width+s.xOffset+o)*this._png.channels,c=(i*s.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(s.blendOp){case UA.SOURCE:for(let i=0;i<s.height;i++)for(let o=0;o<s.width;o++){const{index:l,frameIndex:c}=a(i,o);for(let d=0;d<this._png.channels;d++)e.data[l+d]=s.data[c+d]}break;case UA.OVER:for(let i=0;i<s.height;i++)for(let o=0;o<s.width;o++){const{index:l,frameIndex:c}=a(i,o);for(let d=0;d<this._png.channels;d++){const u=s.data[c+this._png.channels-1]/n,h=d%(this._png.channels-1)===0?1:s.data[c+d],m=Math.floor(u*h+(1-u)*e.data[l+d]);e.data[l+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Vq.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===BA.NO_INTERLACE)this._png.data=Uq({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===BA.ADAM7)this._png.data=xze({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,s=this._frames.at(-1);s?s.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:pj.NONE,blendOp:UA.SOURCE,data:e}),this._inflator=new Lq,this._writingDataChunks=!1}}function Oze(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var Wq;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(Wq||(Wq={}));function Ize(t,e){return new Tze(t,e).decode()}var As=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function zA(){As.console&&typeof As.console.log=="function"&&As.console.log.apply(As.console,arguments)}var ha={log:zA,warn:function(t){As.console&&(typeof As.console.warn=="function"?As.console.warn.apply(As.console,arguments):zA.call(null,arguments))},error:function(t){As.console&&(typeof As.console.error=="function"?As.console.error.apply(As.console,arguments):zA(t))}};function VA(t,e,s){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){dx(n.response,e,s)},n.onerror=function(){ha.error("could not download file")},n.send()}function qq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function xj(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var dx=As.saveAs||((typeof window>"u"?"undefined":ea(window))!=="object"||window!==As?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,s){var n=As.URL||As.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?qq(a.href)?VA(t,e,s):xj(a,a.target="_blank"):xj(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){xj(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,s){if(e=e||t.name||"download",typeof t=="string")if(qq(t))VA(t,e,s);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){xj(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:ea(i)!=="object"&&(ha.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,s),e)}:function(t,e,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return VA(t,e,s);var a=t.type==="application/octet-stream",i=/constructor/i.test(As.HTMLElement)||As.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":ea(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(t)}else{var c=As.URL||As.webkitURL,d=c.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function nae(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<s.length;n++){var a=s[n].re,i=s[n].process,o=a.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var Yj=As.atob.bind(As),Hq=As.btoa.bind(As);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function WA(t,e){var s=t[0],n=t[1],a=t[2],i=t[3];s=Jo(s,n,a,i,e[0],7,-680876936),i=Jo(i,s,n,a,e[1],12,-389564586),a=Jo(a,i,s,n,e[2],17,606105819),n=Jo(n,a,i,s,e[3],22,-1044525330),s=Jo(s,n,a,i,e[4],7,-176418897),i=Jo(i,s,n,a,e[5],12,1200080426),a=Jo(a,i,s,n,e[6],17,-1473231341),n=Jo(n,a,i,s,e[7],22,-45705983),s=Jo(s,n,a,i,e[8],7,1770035416),i=Jo(i,s,n,a,e[9],12,-1958414417),a=Jo(a,i,s,n,e[10],17,-42063),n=Jo(n,a,i,s,e[11],22,-1990404162),s=Jo(s,n,a,i,e[12],7,1804603682),i=Jo(i,s,n,a,e[13],12,-40341101),a=Jo(a,i,s,n,e[14],17,-1502002290),s=el(s,n=Jo(n,a,i,s,e[15],22,1236535329),a,i,e[1],5,-165796510),i=el(i,s,n,a,e[6],9,-1069501632),a=el(a,i,s,n,e[11],14,643717713),n=el(n,a,i,s,e[0],20,-373897302),s=el(s,n,a,i,e[5],5,-701558691),i=el(i,s,n,a,e[10],9,38016083),a=el(a,i,s,n,e[15],14,-660478335),n=el(n,a,i,s,e[4],20,-405537848),s=el(s,n,a,i,e[9],5,568446438),i=el(i,s,n,a,e[14],9,-1019803690),a=el(a,i,s,n,e[3],14,-187363961),n=el(n,a,i,s,e[8],20,1163531501),s=el(s,n,a,i,e[13],5,-1444681467),i=el(i,s,n,a,e[2],9,-51403784),a=el(a,i,s,n,e[7],14,1735328473),s=tl(s,n=el(n,a,i,s,e[12],20,-1926607734),a,i,e[5],4,-378558),i=tl(i,s,n,a,e[8],11,-2022574463),a=tl(a,i,s,n,e[11],16,1839030562),n=tl(n,a,i,s,e[14],23,-35309556),s=tl(s,n,a,i,e[1],4,-1530992060),i=tl(i,s,n,a,e[4],11,1272893353),a=tl(a,i,s,n,e[7],16,-155497632),n=tl(n,a,i,s,e[10],23,-1094730640),s=tl(s,n,a,i,e[13],4,681279174),i=tl(i,s,n,a,e[0],11,-358537222),a=tl(a,i,s,n,e[3],16,-722521979),n=tl(n,a,i,s,e[6],23,76029189),s=tl(s,n,a,i,e[9],4,-640364487),i=tl(i,s,n,a,e[12],11,-421815835),a=tl(a,i,s,n,e[15],16,530742520),s=rl(s,n=tl(n,a,i,s,e[2],23,-995338651),a,i,e[0],6,-198630844),i=rl(i,s,n,a,e[7],10,1126891415),a=rl(a,i,s,n,e[14],15,-1416354905),n=rl(n,a,i,s,e[5],21,-57434055),s=rl(s,n,a,i,e[12],6,1700485571),i=rl(i,s,n,a,e[3],10,-1894986606),a=rl(a,i,s,n,e[10],15,-1051523),n=rl(n,a,i,s,e[1],21,-2054922799),s=rl(s,n,a,i,e[8],6,1873313359),i=rl(i,s,n,a,e[15],10,-30611744),a=rl(a,i,s,n,e[6],15,-1560198380),n=rl(n,a,i,s,e[13],21,1309151649),s=rl(s,n,a,i,e[4],6,-145523070),i=rl(i,s,n,a,e[11],10,-1120210379),a=rl(a,i,s,n,e[2],15,718787259),n=rl(n,a,i,s,e[9],21,-343485551),t[0]=Uf(s,t[0]),t[1]=Uf(n,t[1]),t[2]=Uf(a,t[2]),t[3]=Uf(i,t[3])}function h3(t,e,s,n,a,i){return e=Uf(Uf(e,t),Uf(n,i)),Uf(e<<a|e>>>32-a,s)}function Jo(t,e,s,n,a,i,o){return h3(e&s|~e&n,t,e,a,i,o)}function el(t,e,s,n,a,i,o){return h3(e&n|s&~n,t,e,a,i,o)}function tl(t,e,s,n,a,i,o){return h3(e^s^n,t,e,a,i,o)}function rl(t,e,s,n,a,i,o){return h3(s^(e|~n),t,e,a,i,o)}function aae(t){var e,s=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)WA(n,$ze(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(WA(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*s,WA(n,a),n}function $ze(t){var e,s=[];for(e=0;e<64;e+=4)s[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return s}var Gq="0123456789abcdef".split("");function Dze(t){for(var e="",s=0;s<4;s++)e+=Gq[t>>8*s+4&15]+Gq[t>>8*s&15];return e}function Rze(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function xO(t){return aae(t).map(Rze).join("")}var Mze=(function(t){for(var e=0;e<t.length;e++)t[e]=Dze(t[e]);return t.join("")})(aae("hello"))!="5d41402abc4b2a76b9719d911017c592";function Uf(t,e){if(Mze){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function gO(t,e){var s,n,a,i;if(t!==s){for(var o=(a=t,i=1+(256/t.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}s=t,n=l}else l=n;var h=e.length,m=0,f=0,v="";for(c=0;c<h;c++)f=(f+(u=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=u,o=l[(l[m]+l[f])%256],v+=String.fromCharCode(e.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Yq={print:4,modify:8,copy:16,"annot-forms":32};function w0(t,e,s,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(Yq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=Yq[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=xO(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=gO(this.encryptionKey,this.padding)}function j0(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",s=t.length,n=0;n<s;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function Kq(t){if(ea(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(s,n,a){if(a=a||!1,typeof s!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(s)||(e[s]={});var i=Math.random().toString(35);return e[s][i]=[n,!!a],i},this.unsubscribe=function(s){for(var n in e)if(e[n][s])return delete e[n][s],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(s){if(e.hasOwnProperty(s)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[s]){var o=e[s][i];try{o[0].apply(t,n)}catch(l){As.console&&ha.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function I4(t){if(!(this instanceof I4))return new I4(t);var e="opacity,stroke-opacity".split(",");for(var s in t)t.hasOwnProperty(s)&&e.indexOf(s)>=0&&(this[s]=t[s]);this.id="",this.objectNumber=-1}function iae(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vx(t,e,s,n,a){if(!(this instanceof vx))return new vx(t,e,s,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=s,iae.call(this,n,a)}function $0(t,e,s,n,a){if(!(this instanceof $0))return new $0(t,e,s,n,a);this.boundingBox=t,this.xStep=e,this.yStep=s,this.stream="",this.cloneIndex=0,iae.call(this,n,a)}function zr(t){var e,s=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;ea(t=t||{})==="object"&&(s=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",s=(""+(s||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=Kq;var v="1.3",x=f.__private__.getPdfVersion=function(){return v};f.__private__.setPdfVersion=function(H){v=H};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var b=f.__private__.getPageFormat=function(H){return g[H]};a=a||"a4";var w="compat",N="advanced",C=w;function S(){this.saveGraphicsState(),Y(new He(tr,0,0,-tr,0,Bl()*tr).toString()+" cm"),this.setFontSize(this.getFontSize()/tr),d="n",C=N}function A(){this.restoreGraphicsState(),d="S",C=w}var k=f.__private__.combineFontStyleAndFontWeight=function(H,fe){if(H=="bold"&&fe=="normal"||H=="bold"&&fe==400||H=="normal"&&fe=="italic"||H=="bold"&&fe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return fe&&(H=fe==400||fe==="normal"?H==="italic"?"italic":"normal":fe!=700&&fe!=="bold"||H!=="normal"?(fe==700?"bold":fe)+""+H:"bold"),H};f.advancedAPI=function(H){var fe=C===w;return fe&&S.call(this),typeof H!="function"||(H(this),fe&&A.call(this)),this},f.compatAPI=function(H){var fe=C===N;return fe&&A.call(this),typeof H!="function"||(H(this),fe&&S.call(this)),this},f.isAdvancedAPI=function(){return C===N};var E,O=function(H){if(C!==N)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=f.roundToPrecision=f.__private__.roundToPrecision=function(H,fe){var Ie=e||fe;if(isNaN(H)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(Ie).replace(/0+$/,"")};E=f.hpf=f.__private__.hpf=typeof c=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return $(H,c)}:c==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return $(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return $(H,16)};var T=f.f2=f.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return $(H,2)},I=f.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return $(H,3)},L=f.scale=f.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return C===w?H*tr:C===N?H:void 0},z=function(H){return L((function(fe){return C===w?Bl()-fe:C===N?fe:void 0})(H))};f.__private__.setPrecision=f.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(e=parseInt(H,10))};var M,V="00000000000000000000000000000000",B=f.__private__.getFileId=function(){return V},F=f.__private__.setFileId=function(H){return V=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Hs=new w0(u.userPermissions,u.userPassword,u.ownerPassword,V)),V};f.setFileId=function(H){return F(H),this},f.getFileId=function(){return B()};var J=f.__private__.convertDateToPDFDate=function(H){var fe=H.getTimezoneOffset(),Ie=fe<0?"+":"-",Be=Math.floor(Math.abs(fe/60)),et=Math.abs(fe%60),Nt=[Ie,K(Be),"'",K(et),"'"].join("");return["D:",H.getFullYear(),K(H.getMonth()+1),K(H.getDate()),K(H.getHours()),K(H.getMinutes()),K(H.getSeconds()),Nt].join("")},ee=f.__private__.convertPDFDateToDate=function(H){var fe=parseInt(H.substr(2,4),10),Ie=parseInt(H.substr(6,2),10)-1,Be=parseInt(H.substr(8,2),10),et=parseInt(H.substr(10,2),10),Nt=parseInt(H.substr(12,2),10),Ut=parseInt(H.substr(14,2),10);return new Date(fe,Ie,Be,et,Nt,Ut,0)},q=f.__private__.setCreationDate=function(H){var fe;if(H===void 0&&(H=new Date),H instanceof Date)fe=J(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");fe=H}return M=fe},U=f.__private__.getCreationDate=function(H){var fe=M;return H==="jsDate"&&(fe=ee(M)),fe};f.setCreationDate=function(H){return q(H),this},f.getCreationDate=function(H){return U(H)};var Z,K=f.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},se=f.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},ne=0,ie=[],be=[],ue=0,oe=[],pe=[],ye=!1,$e=be;f.__private__.setCustomOutputDestination=function(H){ye=!0,$e=H};var Se=function(H){ye||($e=H)};f.__private__.resetCustomOutputDestination=function(){ye=!1,$e=be};var Y=f.__private__.out=function(H){return H=H.toString(),ue+=H.length+1,$e.push(H),$e},Le=f.__private__.write=function(H){return Y(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},xe=f.__private__.getArrayBuffer=function(H){for(var fe=H.length,Ie=new ArrayBuffer(fe),Be=new Uint8Array(Ie);fe--;)Be[fe]=H.charCodeAt(fe);return Ie},mt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return mt};var Ue=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(H){return Ue=C===N?H/tr:H,this};var xt,ut=f.__private__.getFontSize=f.getFontSize=function(){return C===w?Ue:Ue*tr},Ot=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(H){return Ot=H,this},f.__private__.getR2L=f.getR2L=function(){return Ot};var tt,st=f.__private__.setZoomMode=function(H){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))xt=H;else if(isNaN(H)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');xt=H}else xt=parseInt(H,10)};f.__private__.getZoomMode=function(){return xt};var At,Yt=f.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');tt=H};f.__private__.getPageMode=function(){return tt};var yr=f.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');At=H};f.__private__.getLayoutMode=function(){return At},f.__private__.setDisplayMode=f.setDisplayMode=function(H,fe,Ie){return st(H),yr(fe),Yt(Ie),this};var Zt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(H){if(Object.keys(Zt).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Zt[H]},f.__private__.getDocumentProperties=function(){return Zt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(H){for(var fe in Zt)Zt.hasOwnProperty(fe)&&H[fe]&&(Zt[fe]=H[fe]);return this},f.__private__.setDocumentProperty=function(H,fe){if(Object.keys(Zt).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Zt[H]=fe};var Vt,tr,$t,Dr,Er,hr={},Ct={},is=[],cr={},Pt={},kt={},zt={},or=null,Re=0,Je=[],bt=new Kq(f),gr=t.hotfixes||[],je={},Ce={},Qe=[],He=function H(fe,Ie,Be,et,Nt,Ut){if(!(this instanceof H))return new H(fe,Ie,Be,et,Nt,Ut);isNaN(fe)&&(fe=1),isNaN(Ie)&&(Ie=0),isNaN(Be)&&(Be=0),isNaN(et)&&(et=1),isNaN(Nt)&&(Nt=0),isNaN(Ut)&&(Ut=0),this._matrix=[fe,Ie,Be,et,Nt,Ut]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),He.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(H)},He.prototype.multiply=function(H){var fe=H.sx*this.sx+H.shy*this.shx,Ie=H.sx*this.shy+H.shy*this.sy,Be=H.shx*this.sx+H.sy*this.shx,et=H.shx*this.shy+H.sy*this.sy,Nt=H.tx*this.sx+H.ty*this.shx+this.tx,Ut=H.tx*this.shy+H.ty*this.sy+this.ty;return new He(fe,Ie,Be,et,Nt,Ut)},He.prototype.decompose=function(){var H=this.sx,fe=this.shy,Ie=this.shx,Be=this.sy,et=this.tx,Nt=this.ty,Ut=Math.sqrt(H*H+fe*fe),Rr=(H/=Ut)*Ie+(fe/=Ut)*Be;Ie-=H*Rr,Be-=fe*Rr;var Yr=Math.sqrt(Ie*Ie+Be*Be);return Rr/=Yr,H*(Be/=Yr)<fe*(Ie/=Yr)&&(H=-H,fe=-fe,Rr=-Rr,Ut=-Ut),{scale:new He(Ut,0,0,Yr,0,0),translate:new He(1,0,0,1,et,Nt),rotate:new He(H,fe,-fe,H,0,0),skew:new He(1,0,Rr,1,0,0)}},He.prototype.toString=function(H){return this.join(" ")},He.prototype.inversed=function(){var H=this.sx,fe=this.shy,Ie=this.shx,Be=this.sy,et=this.tx,Nt=this.ty,Ut=1/(H*Be-fe*Ie),Rr=Be*Ut,Yr=-fe*Ut,js=-Ie*Ut,Ns=H*Ut;return new He(Rr,Yr,js,Ns,-Rr*et-js*Nt,-Yr*et-Ns*Nt)},He.prototype.applyToPoint=function(H){var fe=H.x*this.sx+H.y*this.shx+this.tx,Ie=H.x*this.shy+H.y*this.sy+this.ty;return new Jc(fe,Ie)},He.prototype.applyToRectangle=function(H){var fe=this.applyToPoint(H),Ie=this.applyToPoint(new Jc(H.x+H.w,H.y+H.h));return new Uh(fe.x,fe.y,Ie.x-fe.x,Ie.y-fe.y)},He.prototype.clone=function(){var H=this.sx,fe=this.shy,Ie=this.shx,Be=this.sy,et=this.tx,Nt=this.ty;return new He(H,fe,Ie,Be,et,Nt)},f.Matrix=He;var vt=f.matrixMult=function(H,fe){return fe.multiply(H)},le=new He(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=le;var Ee=function(H,fe){if(!Pt[H]){var Ie=(fe instanceof vx?"Sh":"P")+(Object.keys(cr).length+1).toString(10);fe.id=Ie,Pt[H]=Ie,cr[Ie]=fe,bt.publish("addPattern",fe)}};f.ShadingPattern=vx,f.TilingPattern=$0,f.addShadingPattern=function(H,fe){return O("addShadingPattern()"),Ee(H,fe),this},f.beginTilingPattern=function(H){O("beginTilingPattern()"),Ml(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},f.endTilingPattern=function(H,fe){O("endTilingPattern()"),fe.stream=pe[Z].join(`
`),Ee(H,fe),bt.publish("endTilingPattern",fe),Qe.pop().restore()};var We,at=f.__private__.newObject=function(){var H=nt();return It(H,!0),H},nt=f.__private__.newObjectDeferred=function(){return ne++,ie[ne]=function(){return ue},ne},It=function(H,fe){return fe=typeof fe=="boolean"&&fe,ie[H]=ue,fe&&Y(H+" 0 obj"),H},vr=f.__private__.newAdditionalObject=function(){var H={objId:nt(),content:""};return oe.push(H),H},Xt=nt(),Mt=nt(),Gt=f.__private__.decodeColorString=function(H){var fe=H.split(" ");if(fe.length!==2||fe[1]!=="g"&&fe[1]!=="G")fe.length!==5||fe[4]!=="k"&&fe[4]!=="K"||(fe=[(1-fe[0])*(1-fe[3]),(1-fe[1])*(1-fe[3]),(1-fe[2])*(1-fe[3]),"r"]);else{var Ie=parseFloat(fe[0]);fe=[Ie,Ie,Ie,"r"]}for(var Be="#",et=0;et<3;et++)Be+=("0"+Math.floor(255*parseFloat(fe[et])).toString(16)).slice(-2);return Be},Wt=f.__private__.encodeColorString=function(H){var fe;typeof H=="string"&&(H={ch1:H});var Ie=H.ch1,Be=H.ch2,et=H.ch3,Nt=H.ch4,Ut=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var Rr=new nae(Ie);if(Rr.ok)Ie=Rr.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var Yr=parseInt(Ie.substr(1),16);Ie=Yr>>16&255,Be=Yr>>8&255,et=255&Yr}if(Be===void 0||Nt===void 0&&Ie===Be&&Be===et)fe=typeof Ie=="string"?Ie+" "+Ut[0]:H.precision===2?T(Ie/255)+" "+Ut[0]:I(Ie/255)+" "+Ut[0];else if(Nt===void 0||ea(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return["1.","1.","1.",Ut[1]].join(" ");fe=typeof Ie=="string"?[Ie,Be,et,Ut[1]].join(" "):H.precision===2?[T(Ie/255),T(Be/255),T(et/255),Ut[1]].join(" "):[I(Ie/255),I(Be/255),I(et/255),Ut[1]].join(" ")}else fe=typeof Ie=="string"?[Ie,Be,et,Nt,Ut[2]].join(" "):H.precision===2?[T(Ie),T(Be),T(et),T(Nt),Ut[2]].join(" "):[I(Ie),I(Be),I(et),I(Nt),Ut[2]].join(" ");return fe},xr=f.__private__.getFilters=function(){return o},Cr=f.__private__.putStream=function(H){var fe=(H=H||{}).data||"",Ie=H.filters||xr(),Be=H.alreadyAppliedFilters||[],et=H.addLength1||!1,Nt=fe.length,Ut=H.objectId,Rr=function(gi){return gi};if(u!==null&&Ut===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Rr=Hs.encryptor(Ut,0));var Yr={};Ie===!0&&(Ie=["FlateEncode"]);var js=H.additionalKeyValues||[],Ns=(Yr=zr.API.processDataByFilters!==void 0?zr.API.processDataByFilters(fe,Ie):{data:fe,reverseChain:[]}).reverseChain+(Array.isArray(Be)?Be.join(" "):Be.toString());if(Yr.data.length!==0&&(js.push({key:"Length",value:Yr.data.length}),et===!0&&js.push({key:"Length1",value:Nt})),Ns.length!=0)if(Ns.split("/").length-1==1)js.push({key:"Filter",value:Ns});else{js.push({key:"Filter",value:"["+Ns+"]"});for(var pn=0;pn<js.length;pn+=1)if(js[pn].key==="DecodeParms"){for(var Aa=[],ai=0;ai<Yr.reverseChain.split("/").length-1;ai+=1)Aa.push("null");Aa.push(js[pn].value),js[pn].value="["+Aa.join(" ")+"]"}}Y("<<");for(var ra=0;ra<js.length;ra++)Y("/"+js[ra].key+" "+js[ra].value);Y(">>"),Yr.data.length!==0&&(Y("stream"),Y(Rr(Yr.data)),Y("endstream"))},Pr=f.__private__.putPage=function(H){var fe=H.number,Ie=H.data,Be=H.objId,et=H.contentsObjId;It(Be,!0),Y("<</Type /Page"),Y("/Parent "+H.rootDictionaryObjId+" 0 R"),Y("/Resources "+H.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(E(H.mediaBox.bottomLeftX))+" "+parseFloat(E(H.mediaBox.bottomLeftY))+" "+E(H.mediaBox.topRightX)+" "+E(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&Y("/CropBox ["+E(H.cropBox.bottomLeftX)+" "+E(H.cropBox.bottomLeftY)+" "+E(H.cropBox.topRightX)+" "+E(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&Y("/BleedBox ["+E(H.bleedBox.bottomLeftX)+" "+E(H.bleedBox.bottomLeftY)+" "+E(H.bleedBox.topRightX)+" "+E(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&Y("/TrimBox ["+E(H.trimBox.bottomLeftX)+" "+E(H.trimBox.bottomLeftY)+" "+E(H.trimBox.topRightX)+" "+E(H.trimBox.topRightY)+"]"),H.artBox!==null&&Y("/ArtBox ["+E(H.artBox.bottomLeftX)+" "+E(H.artBox.bottomLeftY)+" "+E(H.artBox.topRightX)+" "+E(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&Y("/UserUnit "+H.userUnit),bt.publish("putPage",{objId:Be,pageContext:Je[fe],pageNumber:fe,page:Ie}),Y("/Contents "+et+" 0 R"),Y(">>"),Y("endobj");var Nt=Ie.join(`
`);return C===N&&(Nt+=`
Q`),It(et,!0),Cr({data:Nt,filters:xr(),objectId:et}),Y("endobj"),Be},Gr=f.__private__.putPages=function(){var H,fe,Ie=[];for(H=1;H<=Re;H++)Je[H].objId=nt(),Je[H].contentsObjId=nt();for(H=1;H<=Re;H++)Ie.push(Pr({number:H,data:pe[H],objId:Je[H].objId,contentsObjId:Je[H].contentsObjId,mediaBox:Je[H].mediaBox,cropBox:Je[H].cropBox,bleedBox:Je[H].bleedBox,trimBox:Je[H].trimBox,artBox:Je[H].artBox,userUnit:Je[H].userUnit,rootDictionaryObjId:Xt,resourceDictionaryObjId:Mt}));It(Xt,!0),Y("<</Type /Pages");var Be="/Kids [";for(fe=0;fe<Re;fe++)Be+=Ie[fe]+" 0 R ";Y(Be+"]"),Y("/Count "+Re),Y(">>"),Y("endobj"),bt.publish("postPutPages")},os=function(H){bt.publish("putFont",{font:H,out:Y,newObject:at,putStream:Cr}),H.isAlreadyPutted!==!0&&(H.objectNumber=at(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+j0(H.postScriptName)),Y("/Subtype /Type1"),typeof H.encoding=="string"&&Y("/Encoding /"+H.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},ws=function(H){H.objectNumber=at();var fe=[];fe.push({key:"Type",value:"/XObject"}),fe.push({key:"Subtype",value:"/Form"}),fe.push({key:"BBox",value:"["+[E(H.x),E(H.y),E(H.x+H.width),E(H.y+H.height)].join(" ")+"]"}),fe.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var Ie=H.pages[1].join(`
`);Cr({data:Ie,additionalKeyValues:fe,objectId:H.objectNumber}),Y("endobj")},Wa=function(H,fe){fe||(fe=21);var Ie=at(),Be=(function(Ut,Rr){var Yr,js=[],Ns=1/(Rr-1);for(Yr=0;Yr<1;Yr+=Ns)js.push(Yr);if(js.push(1),Ut[0].offset!=0){var pn={offset:0,color:Ut[0].color};Ut.unshift(pn)}if(Ut[Ut.length-1].offset!=1){var Aa={offset:1,color:Ut[Ut.length-1].color};Ut.push(Aa)}for(var ai="",ra=0,gi=0;gi<js.length;gi++){for(Yr=js[gi];Yr>Ut[ra+1].offset;)ra++;var qa=Ut[ra].offset,Ui=(Yr-qa)/(Ut[ra+1].offset-qa),Ul=Ut[ra].color,Vo=Ut[ra+1].color;ai+=se(Math.round((1-Ui)*Ul[0]+Ui*Vo[0]).toString(16))+se(Math.round((1-Ui)*Ul[1]+Ui*Vo[1]).toString(16))+se(Math.round((1-Ui)*Ul[2]+Ui*Vo[2]).toString(16))}return ai.trim()})(H.colors,fe),et=[];et.push({key:"FunctionType",value:"0"}),et.push({key:"Domain",value:"[0.0 1.0]"}),et.push({key:"Size",value:"["+fe+"]"}),et.push({key:"BitsPerSample",value:"8"}),et.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),et.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cr({data:Be,additionalKeyValues:et,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Y("endobj"),H.objectNumber=at(),Y("<< /ShadingType "+H.type),Y("/ColorSpace /DeviceRGB");var Nt="/Coords ["+E(parseFloat(H.coords[0]))+" "+E(parseFloat(H.coords[1]))+" ";H.type===2?Nt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3])):Nt+=E(parseFloat(H.coords[2]))+" "+E(parseFloat(H.coords[3]))+" "+E(parseFloat(H.coords[4]))+" "+E(parseFloat(H.coords[5])),Y(Nt+="]"),H.matrix&&Y("/Matrix ["+H.matrix.toString()+"]"),Y("/Function "+Ie+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},xi=function(H,fe){var Ie=nt(),Be=at();fe.push({resourcesOid:Ie,objectOid:Be}),H.objectNumber=Be;var et=[];et.push({key:"Type",value:"/Pattern"}),et.push({key:"PatternType",value:"1"}),et.push({key:"PaintType",value:"1"}),et.push({key:"TilingType",value:"1"}),et.push({key:"BBox",value:"["+H.boundingBox.map(E).join(" ")+"]"}),et.push({key:"XStep",value:E(H.xStep)}),et.push({key:"YStep",value:E(H.yStep)}),et.push({key:"Resources",value:Ie+" 0 R"}),H.matrix&&et.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),Cr({data:H.stream,additionalKeyValues:et,objectId:H.objectNumber}),Y("endobj")},Ao=function(H){for(var fe in H.objectNumber=at(),Y("<<"),H)switch(fe){case"opacity":Y("/ca "+T(H[fe]));break;case"stroke-opacity":Y("/CA "+T(H[fe]))}Y(">>"),Y("endobj")},Vs=function(H){It(H.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var fe in Y("/Font <<"),hr)hr.hasOwnProperty(fe)&&(h===!1||h===!0&&m.hasOwnProperty(fe))&&Y("/"+fe+" "+hr[fe].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(cr).length>0){for(var fe in Y("/Shading <<"),cr)cr.hasOwnProperty(fe)&&cr[fe]instanceof vx&&cr[fe].objectNumber>=0&&Y("/"+fe+" "+cr[fe].objectNumber+" 0 R");bt.publish("putShadingPatternDict"),Y(">>")}})(),(function(fe){if(Object.keys(cr).length>0){for(var Ie in Y("/Pattern <<"),cr)cr.hasOwnProperty(Ie)&&cr[Ie]instanceof f.TilingPattern&&cr[Ie].objectNumber>=0&&cr[Ie].objectNumber<fe&&Y("/"+Ie+" "+cr[Ie].objectNumber+" 0 R");bt.publish("putTilingPatternDict"),Y(">>")}})(H.objectOid),(function(){if(Object.keys(kt).length>0){var fe;for(fe in Y("/ExtGState <<"),kt)kt.hasOwnProperty(fe)&&kt[fe].objectNumber>=0&&Y("/"+fe+" "+kt[fe].objectNumber+" 0 R");bt.publish("putGStateDict"),Y(">>")}})(),(function(){for(var fe in Y("/XObject <<"),je)je.hasOwnProperty(fe)&&je[fe].objectNumber>=0&&Y("/"+fe+" "+je[fe].objectNumber+" 0 R");bt.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},Gc=function(H){Ct[H.fontName]=Ct[H.fontName]||{},Ct[H.fontName][H.fontStyle]=H.id},io=function(H,fe,Ie,Be,et){var Nt={id:"F"+(Object.keys(hr).length+1).toString(10),postScriptName:H,fontName:fe,fontStyle:Ie,encoding:Be,isStandardFont:et||!1,metadata:{}};return bt.publish("addFont",{font:Nt,instance:this}),hr[Nt.id]=Nt,Gc(Nt),Nt.id},da=f.__private__.pdfEscape=f.pdfEscape=function(H,fe){return(function(Ie,Be){var et,Nt,Ut,Rr,Yr,js,Ns,pn,Aa;if(Ut=(Be=Be||{}).sourceEncoding||"Unicode",Yr=Be.outputEncoding,(Be.autoencode||Yr)&&hr[Vt].metadata&&hr[Vt].metadata[Ut]&&hr[Vt].metadata[Ut].encoding&&(Rr=hr[Vt].metadata[Ut].encoding,!Yr&&hr[Vt].encoding&&(Yr=hr[Vt].encoding),!Yr&&Rr.codePages&&(Yr=Rr.codePages[0]),typeof Yr=="string"&&(Yr=Rr[Yr]),Yr)){for(Ns=!1,js=[],et=0,Nt=Ie.length;et<Nt;et++)(pn=Yr[Ie.charCodeAt(et)])?js.push(String.fromCharCode(pn)):js.push(Ie[et]),js[et].charCodeAt(0)>>8&&(Ns=!0);Ie=js.join("")}for(et=Ie.length;Ns===void 0&&et!==0;)Ie.charCodeAt(et-1)>>8&&(Ns=!0),et--;if(!Ns)return Ie;for(js=Be.noBOM?[]:[254,255],et=0,Nt=Ie.length;et<Nt;et++){if((Aa=(pn=Ie.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+Ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");js.push(Aa),js.push(pn-(Aa<<8))}return String.fromCharCode.apply(void 0,js)})(H,fe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eo=f.__private__.beginPage=function(H){pe[++Re]=[],Je[Re]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},Xs(Re),Se(pe[Z])},qe=function(H,fe){var Ie,Be,et;switch(s=fe||s,typeof H=="string"&&(Ie=b(H.toLowerCase()),Array.isArray(Ie)&&(Be=Ie[0],et=Ie[1])),Array.isArray(H)&&(Be=H[0]*tr,et=H[1]*tr),isNaN(Be)&&(Be=a[0],et=a[1]),(Be>14400||et>14400)&&(ha.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Be=Math.min(14400,Be),et=Math.min(14400,et)),a=[Be,et],s.substr(0,1)){case"l":et>Be&&(a=[et,Be]);break;case"p":Be>et&&(a=[et,Be])}Eo(a),Fh(Rl),Y(Bh),Sp!==0&&Y(Sp+" J"),Cp!==0&&Y(Cp+" j"),bt.publish("addPage",{pageNumber:Re})},Fs=function(H){H>0&&H<=Re&&(pe.splice(H,1),Je.splice(H,1),Re--,Z>Re&&(Z=Re),this.setPage(Z))},Xs=function(H){H>0&&H<=Re&&(Z=H)},ta=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return pe.length-1},ts=function(H,fe,Ie){var Be,et=void 0;return Ie=Ie||{},H=H!==void 0?H:hr[Vt].fontName,fe=fe!==void 0?fe:hr[Vt].fontStyle,Be=H.toLowerCase(),Ct[Be]!==void 0&&Ct[Be][fe]!==void 0?et=Ct[Be][fe]:Ct[H]!==void 0&&Ct[H][fe]!==void 0?et=Ct[H][fe]:Ie.disableWarning===!1&&ha.warn("Unable to look up font label for font '"+H+"', '"+fe+"'. Refer to getFontList() for available fonts."),et||Ie.noFallback||(et=Ct.times[fe])==null&&(et=Ct.times.normal),et},es=f.__private__.putInfo=function(){var H=at(),fe=function(Be){return Be};for(var Ie in u!==null&&(fe=Hs.encryptor(H,0)),Y("<<"),Y("/Producer ("+da(fe("jsPDF "+zr.version))+")"),Zt)Zt.hasOwnProperty(Ie)&&Zt[Ie]&&Y("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+da(fe(Zt[Ie]))+")");Y("/CreationDate ("+da(fe(M))+")"),Y(">>"),Y("endobj")},$l=f.__private__.putCatalog=function(H){var fe=(H=H||{}).rootDictionaryObjId||Xt;switch(at(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+fe+" 0 R"),xt||(xt="fullwidth"),xt){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+xt;Ie.substr(Ie.length-1)==="%"&&(xt=parseInt(xt)/100),typeof xt=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+T(xt)+"]")}switch(At||(At="continuous"),At){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}tt&&Y("/PageMode /"+tt),bt.publish("putCatalog"),Y(">>"),Y("endobj")},Fe=f.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ne+1)),Y("/Root "+ne+" 0 R"),Y("/Info "+(ne-1)+" 0 R"),u!==null&&Y("/Encrypt "+Hs.oid+" 0 R"),Y("/ID [ <"+V+"> <"+V+"> ]"),Y(">>")},Kt=f.__private__.putHeader=function(){Y("%PDF-"+v),Y("%")},kr=f.__private__.putXRef=function(){var H="0000000000";Y("xref"),Y("0 "+(ne+1)),Y("0000000000 65535 f ");for(var fe=1;fe<=ne;fe++)typeof ie[fe]=="function"?Y((H+ie[fe]()).slice(-10)+" 00000 n "):ie[fe]!==void 0?Y((H+ie[fe]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Vr=f.__private__.buildDocument=function(){var H;ne=0,ue=0,be=[],ie=[],oe=[],Xt=nt(),Mt=nt(),Se(be),bt.publish("buildDocument"),Kt(),Gr(),(function(){bt.publish("putAdditionalObjects");for(var Ie=0;Ie<oe.length;Ie++){var Be=oe[Ie];It(Be.objId,!0),Y(Be.content),Y("endobj")}bt.publish("postPutAdditionalObjects")})(),H=[],(function(){for(var Ie in hr)hr.hasOwnProperty(Ie)&&(h===!1||h===!0&&m.hasOwnProperty(Ie))&&os(hr[Ie])})(),(function(){var Ie;for(Ie in kt)kt.hasOwnProperty(Ie)&&Ao(kt[Ie])})(),(function(){for(var Ie in je)je.hasOwnProperty(Ie)&&ws(je[Ie])})(),(function(Ie){var Be;for(Be in cr)cr.hasOwnProperty(Be)&&(cr[Be]instanceof vx?Wa(cr[Be]):cr[Be]instanceof $0&&xi(cr[Be],Ie))})(H),bt.publish("putResources"),H.forEach(Vs),Vs({resourcesOid:Mt,objectOid:Number.MAX_SAFE_INTEGER}),bt.publish("postPutResources"),u!==null&&(Hs.oid=at(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Hs.v),Y("/R "+Hs.r),Y("/U <"+Hs.toHexString(Hs.U)+">"),Y("/O <"+Hs.toHexString(Hs.O)+">"),Y("/P "+Hs.P),Y(">>"),Y("endobj")),es(),$l();var fe=ue;return kr(),Fe(),Y("startxref"),Y(""+fe),Y("%%EOF"),Se(pe[Z]),be.join(`
`)},gs=f.__private__.getBlob=function(H){return new Blob([xe(H)],{type:"application/pdf"})},dn=f.output=f.__private__.output=(We=function(H,fe){switch(typeof(fe=fe||{})=="string"?fe={filename:fe}:fe.filename=fe.filename||"generated.pdf",H){case void 0:return Vr();case"save":f.save(fe.filename);break;case"arraybuffer":return xe(Vr());case"blob":return gs(Vr());case"bloburi":case"bloburl":if(As.URL!==void 0&&typeof As.URL.createObjectURL=="function")return As.URL&&As.URL.createObjectURL(gs(Vr()))||void 0;ha.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Be=Vr();try{Ie=Hq(Be)}catch{Ie=Hq(unescape(encodeURIComponent(Be)))}return"data:application/pdf;filename="+fe.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(As)==="[object Window]"){var et="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';fe.pdfObjectUrl&&(et=fe.pdfObjectUrl,Nt="");var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+et+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(fe)+");<\/script></body></html>",Rr=As.open();return Rr!==null&&Rr.document.write(Ut),Rr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(As)==="[object Window]"){var Yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(fe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+fe.filename+'" width="500px" height="400px" /></body></html>',js=As.open();if(js!==null){js.document.write(Yr);var Ns=this;js.document.documentElement.querySelector("#pdfViewer").onload=function(){js.document.title=fe.filename,js.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ns.output("bloburl"))}}return js}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(As)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",fe)+'"></iframe></body></html>',Aa=As.open();if(Aa!==null&&(Aa.document.write(pn),Aa.document.title=fe.filename),Aa||typeof safari>"u")return Aa;break;case"datauri":case"dataurl":return As.document.location.href=this.output("datauristring",fe);default:return null}},We.foo=function(){try{return We.apply(this,arguments)}catch(Ie){var H=Ie.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var fe="Error in function "+H.split(`
`)[0].split("<")[0]+": "+Ie.message;if(!As.console)throw new Error(fe);As.console.error(fe,Ie),As.alert&&alert(fe)}},We.foo.bar=We,We.foo),oo=function(H){return Array.isArray(gr)===!0&&gr.indexOf(H)>-1};switch(n){case"pt":tr=1;break;case"mm":tr=72/25.4;break;case"cm":tr=72/2.54;break;case"in":tr=72;break;case"px":tr=oo("px_scaling")==1?.75:96/72;break;case"pc":case"em":tr=12;break;case"ex":tr=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);tr=n}var Hs=null;q(),F();var Po=f.__private__.getPageInfo=f.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[H].objId,pageNumber:H,pageContext:Je[H]}},lo=f.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var fe in Je)if(Je[fe].objId===H)break;return Po(fe)},Yc=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Je[Z].objId,pageNumber:Z,pageContext:Je[Z]}};f.addPage=function(){return qe.apply(this,arguments),this},f.setPage=function(){return Xs.apply(this,arguments),Se.call(this,pe[Z]),this},f.insertPage=function(H){return this.addPage(),this.movePage(Z,H),this},f.movePage=function(H,fe){var Ie,Be;if(H>fe){Ie=pe[H],Be=Je[H];for(var et=H;et>fe;et--)pe[et]=pe[et-1],Je[et]=Je[et-1];pe[fe]=Ie,Je[fe]=Be,this.setPage(fe)}else if(H<fe){Ie=pe[H],Be=Je[H];for(var Nt=H;Nt<fe;Nt++)pe[Nt]=pe[Nt+1],Je[Nt]=Je[Nt+1];pe[fe]=Ie,Je[fe]=Be,this.setPage(fe)}return this},f.deletePage=function(){return Fs.apply(this,arguments),this},f.__private__.text=f.text=function(H,fe,Ie,Be,et){var Nt,Ut,Rr,Yr,js,Ns,pn,Aa,ai,ra=(Be=Be||{}).scope||this;if(typeof H=="number"&&typeof fe=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var gi=Ie;Ie=fe,fe=H,H=gi}if(arguments[3]instanceof He==0?(Rr=arguments[4],Yr=arguments[5],ea(pn=arguments[3])==="object"&&pn!==null||(typeof Rr=="string"&&(Yr=Rr,Rr=null),typeof pn=="string"&&(Yr=pn,pn=null),typeof pn=="number"&&(Rr=pn,pn=null),Be={flags:pn,angle:Rr,align:Yr})):(O("The transform parameter of text() with a Matrix value"),ai=et),isNaN(fe)||isNaN(Ie)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return ra;var qa,Ui="",Ul=typeof Be.lineHeightFactor=="number"?Be.lineHeightFactor:zo,Vo=ra.internal.scaleFactor;function Ag(xn){return xn=xn.split("	").join(Array(Be.TabLen||9).join(" ")),da(xn,pn)}function Uu(xn){for(var Fn,Ra=xn.concat(),ii=[],yc=Ra.length;yc--;)typeof(Fn=Ra.shift())=="string"?ii.push(Fn):Array.isArray(xn)&&(Fn.length===1||Fn[1]===void 0&&Fn[2]===void 0)?ii.push(Fn[0]):ii.push([Fn[0],Fn[1],Fn[2]]);return ii}function Wh(xn,Fn){var Ra;if(typeof xn=="string")Ra=Fn(xn)[0];else if(Array.isArray(xn)){for(var ii,yc,Pp=xn.concat(),Jm=[],Yd=Pp.length;Yd--;)typeof(ii=Pp.shift())=="string"?Jm.push(Fn(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(yc=Fn(ii[0],ii[1],ii[2]),Jm.push([yc[0],yc[1],yc[2]]));Ra=Jm}return Ra}var zu=!1,qh=!0;if(typeof H=="string")zu=!0;else if(Array.isArray(H)){var Vu=H.concat();Ut=[];for(var Hh,uo=Vu.length;uo--;)(typeof(Hh=Vu.shift())!="string"||Array.isArray(Hh)&&typeof Hh[0]!="string")&&(qh=!1);zu=qh}if(zu===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var Gh=Ue/ra.internal.scaleFactor,Yh=Gh*(Ul-1);switch(Be.baseline){case"bottom":Ie-=Yh;break;case"top":Ie+=Gh-Yh;break;case"hanging":Ie+=Gh-2*Yh;break;case"middle":Ie+=Gh/2-Yh}if((Ns=Be.maxWidth||0)>0&&(typeof H=="string"?H=ra.splitTextToSize(H,Ns):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce(function(xn,Fn){return xn.concat(ra.splitTextToSize(Fn,Ns))},[]))),Nt={text:H,x:fe,y:Ie,options:Be,mutex:{pdfEscape:da,activeFontKey:Vt,fonts:hr,activeFontSize:Ue}},bt.publish("preProcessText",Nt),H=Nt.text,Rr=(Be=Nt.options).angle,ai instanceof He==0&&Rr&&typeof Rr=="number"){Rr*=Math.PI/180,Be.rotationDirection===0&&(Rr=-Rr),C===N&&(Rr=-Rr);var Ap=Math.cos(Rr),Ep=Math.sin(Rr);ai=new He(Ap,Ep,-Ep,Ap,0,0)}else Rr&&Rr instanceof He&&(ai=Rr);C!==N||ai||(ai=le),(js=Be.charSpace||xc)!==void 0&&(Ui+=E(L(js))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Aa=Be.horizontalScale)!==void 0&&(Ui+=E(100*Aa)+` Tz
`),Be.lang;var $a=-1,gc=Be.renderingMode!==void 0?Be.renderingMode:Be.stroke,ed=ra.internal.getCurrentPageInfo().pageContext;switch(gc){case 0:case!1:case"fill":$a=0;break;case 1:case!0:case"stroke":$a=1;break;case 2:case"fillThenStroke":$a=2;break;case 3:case"invisible":$a=3;break;case 4:case"fillAndAddForClipping":$a=4;break;case 5:case"strokeAndAddPathForClipping":$a=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$a=6;break;case 7:case"addToPathForClipping":$a=7}var Eg=ed.usedRenderingMode!==void 0?ed.usedRenderingMode:-1;$a!==-1?Ui+=$a+` Tr
`:Eg!==-1&&(Ui+=`0 Tr
`),$a!==-1&&(ed.usedRenderingMode=$a),Yr=Be.align||"left";var gl,Wu=Ue*Ul,Km=ra.internal.pageSize.getWidth(),Xm=hr[Vt];js=Be.charSpace||xc,Ns=Be.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},Be.flags);var Wd=[],zl=function(xn){return ra.getStringUnitWidth(xn,{font:Xm,charSpace:js,fontSize:Ue,doKerning:!1})*Ue/Vo};if(Object.prototype.toString.call(H)==="[object Array]"){var vl;Ut=Uu(H),Yr!=="left"&&(gl=Ut.map(zl));var yl,qu=0;if(Yr==="right"){fe-=gl[0],H=[],uo=Ut.length;for(var td=0;td<uo;td++)td===0?(yl=xl(fe),vl=Ud(Ie)):(yl=L(qu-gl[td]),vl=-Wu),H.push([Ut[td],yl,vl]),qu=gl[td]}else if(Yr==="center"){fe-=gl[0]/2,H=[],uo=Ut.length;for(var qd=0;qd<uo;qd++)qd===0?(yl=xl(fe),vl=Ud(Ie)):(yl=L((qu-gl[qd])/2),vl=-Wu),H.push([Ut[qd],yl,vl]),qu=gl[qd]}else if(Yr==="left"){H=[],uo=Ut.length;for(var Hd=0;Hd<uo;Hd++)H.push(Ut[Hd])}else if(Yr==="justify"&&Xm.encoding==="Identity-H"){H=[],uo=Ut.length,Ns=Ns!==0?Ns:Km;for(var rd=0,Ha=0;Ha<uo;Ha++)if(vl=Ha===0?Ud(Ie):-Wu,yl=Ha===0?xl(fe):rd,Ha<uo-1){var Kh=L((Ns-gl[Ha])/(Ut[Ha].split(" ").length-1)),sd=Ut[Ha].split(" ");H.push([sd[0]+" ",yl,vl]),rd=0;for(var vc=1;vc<sd.length;vc++){var Xh=(zl(sd[vc-1]+" "+sd[vc])-zl(sd[vc]))*Vo+Kh;vc==sd.length-1?H.push([sd[vc],Xh,0]):H.push([sd[vc]+" ",Xh,0]),rd-=Xh}}else H.push([Ut[Ha],yl,vl]);H.push(["",rd,0])}else{if(Yr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],uo=Ut.length,Ns=Ns!==0?Ns:Km,Ha=0;Ha<uo;Ha++){vl=Ha===0?Ud(Ie):-Wu,yl=Ha===0?xl(fe):0;var Qh=Ut[Ha].split(" ").length-1,Qm=Qh>0?(Ns-gl[Ha])/Qh:0;Ha<uo-1?Wd.push(E(L(Qm))):Wd.push(0),H.push([Ut[Ha],yl,vl])}}}(typeof Be.R2L=="boolean"?Be.R2L:Ot)===!0&&(H=Wh(H,function(xn,Fn,Ra){return[xn.split("").reverse().join(""),Fn,Ra]})),Nt={text:H,x:fe,y:Ie,options:Be,mutex:{pdfEscape:da,activeFontKey:Vt,fonts:hr,activeFontSize:Ue}},bt.publish("postProcessText",Nt),H=Nt.text,qa=Nt.mutex.isHex||!1;var Zm=hr[Vt].encoding;Zm!=="WinAnsiEncoding"&&Zm!=="StandardEncoding"||(H=Wh(H,function(xn,Fn,Ra){return[Ag(xn),Fn,Ra]})),Ut=Uu(H),H=[];for(var Gd,Hu,Gu,Zh=Array.isArray(Ut[0])?1:0,Yu="",Jh=function(xn,Fn,Ra){var ii="";return Ra instanceof He?(Ra=typeof Be.angle=="number"?vt(Ra,new He(1,0,0,1,xn,Fn)):vt(new He(1,0,0,1,xn,Fn),Ra),C===N&&(Ra=vt(new He(1,0,0,-1,0,0),Ra)),ii=Ra.join(" ")+` Tm
`):ii=E(xn)+" "+E(Fn)+` Td
`,ii},Da=0;Da<Ut.length;Da++){switch(Yu="",Zh){case 1:Gu=(qa?"<":"(")+Ut[Da][0]+(qa?">":")"),Gd=parseFloat(Ut[Da][1]),Hu=parseFloat(Ut[Da][2]);break;case 0:Gu=(qa?"<":"(")+Ut[Da]+(qa?">":")"),Gd=xl(fe),Hu=Ud(Ie)}Wd!==void 0&&Wd[Da]!==void 0&&(Yu=Wd[Da]+` Tw
`),Da===0?H.push(Yu+Jh(Gd,Hu,ai)+Gu):Zh===0?H.push(Yu+Gu):Zh===1&&H.push(Yu+Jh(Gd,Hu,ai)+Gu)}H=Zh===0?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var Wo=`BT
/`;return Wo+=Vt+" "+Ue+` Tf
`,Wo+=E(Ue*Ul)+` TL
`,Wo+=pc+`
`,Wo+=Ui,Wo+=H,Y(Wo+="ET"),m[Vt]=!0,ra};var Dl=f.__private__.clip=f.clip=function(H){return Y(H==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Dl("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Y("n"),this};var Kc=f.__private__.isValidStyle=function(H){var fe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(fe=!0),fe};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(H){return Kc(H)&&(d=H),this};var Vm=f.__private__.getStyle=f.getStyle=function(H){var fe=d;switch(H){case"D":case"S":fe="S";break;case"F":fe="f";break;case"FD":case"DF":fe="B";break;case"f":case"f*":case"B":case"B*":fe=H}return fe},hn=f.close=function(){return Y("h"),this};f.stroke=function(){return Y("S"),this},f.fill=function(H){return Fd("f",H),this},f.fillEvenOdd=function(H){return Fd("f*",H),this},f.fillStroke=function(H){return Fd("B",H),this},f.fillStrokeEvenOdd=function(H){return Fd("B*",H),this};var Fd=function(H,fe){ea(fe)==="object"?Sg(fe,H):Y(H)},Wm=function(H){H===null||C===N&&H===void 0||(H=Vm(H),Y(H))};function jp(H,fe,Ie,Be,et){var Nt=new $0(fe||this.boundingBox,Ie||this.xStep,Be||this.yStep,this.gState,et||this.matrix);Nt.stream=this.stream;var Ut=H+"$$"+this.cloneIndex+++"$$";return Ee(Ut,Nt),Nt}var Sg=function(H,fe){var Ie=Pt[H.key],Be=cr[Ie];if(Be instanceof vx)Y("q"),Y(Cg(fe)),Be.gState&&f.setGState(Be.gState),Y(H.matrix.toString()+" cm"),Y("/"+Ie+" sh"),Y("Q");else if(Be instanceof $0){var et=new He(1,0,0,-1,0,Bl());H.matrix&&(et=et.multiply(H.matrix||le),Ie=jp.call(Be,H.key,H.boundingBox,H.xStep,H.yStep,et).id),Y("q"),Y("/Pattern cs"),Y("/"+Ie+" scn"),Be.gState&&f.setGState(Be.gState),Y(fe),Y("Q")}},Cg=function(H){switch(H){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qm=f.moveTo=function(H,fe){return Y(E(L(H))+" "+E(z(fe))+" m"),this},Bd=f.lineTo=function(H,fe){return Y(E(L(H))+" "+E(z(fe))+" l"),this},fc=f.curveTo=function(H,fe,Ie,Be,et,Nt){return Y([E(L(H)),E(z(fe)),E(L(Ie)),E(z(Be)),E(L(et)),E(z(Nt)),"c"].join(" ")),this};f.__private__.line=f.line=function(H,fe,Ie,Be,et){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||isNaN(Be)||!Kc(et))throw new Error("Invalid arguments passed to jsPDF.line");return C===w?this.lines([[Ie-H,Be-fe]],H,fe,[1,1],et||"S"):this.lines([[Ie-H,Be-fe]],H,fe,[1,1]).stroke()},f.__private__.lines=f.lines=function(H,fe,Ie,Be,et,Nt){var Ut,Rr,Yr,js,Ns,pn,Aa,ai,ra,gi,qa,Ui;if(typeof H=="number"&&(Ui=Ie,Ie=fe,fe=H,H=Ui),Be=Be||[1,1],Nt=Nt||!1,isNaN(fe)||isNaN(Ie)||!Array.isArray(H)||!Array.isArray(Be)||!Kc(et)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qm(fe,Ie),Ut=Be[0],Rr=Be[1],js=H.length,gi=fe,qa=Ie,Yr=0;Yr<js;Yr++)(Ns=H[Yr]).length===2?(gi=Ns[0]*Ut+gi,qa=Ns[1]*Rr+qa,Bd(gi,qa)):(pn=Ns[0]*Ut+gi,Aa=Ns[1]*Rr+qa,ai=Ns[2]*Ut+gi,ra=Ns[3]*Rr+qa,gi=Ns[4]*Ut+gi,qa=Ns[5]*Rr+qa,fc(pn,Aa,ai,ra,gi,qa));return Nt&&hn(),Wm(et),this},f.path=function(H){for(var fe=0;fe<H.length;fe++){var Ie=H[fe],Be=Ie.c;switch(Ie.op){case"m":qm(Be[0],Be[1]);break;case"l":Bd(Be[0],Be[1]);break;case"c":fc.apply(this,Be);break;case"h":hn()}}return this},f.__private__.rect=f.rect=function(H,fe,Ie,Be,et){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||isNaN(Be)||!Kc(et))throw new Error("Invalid arguments passed to jsPDF.rect");return C===w&&(Be=-Be),Y([E(L(H)),E(z(fe)),E(L(Ie)),E(L(Be)),"re"].join(" ")),Wm(et),this},f.__private__.triangle=f.triangle=function(H,fe,Ie,Be,et,Nt,Ut){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||isNaN(Be)||isNaN(et)||isNaN(Nt)||!Kc(Ut))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-H,Be-fe],[et-Ie,Nt-Be],[H-et,fe-Nt]],H,fe,[1,1],Ut,!0),this},f.__private__.roundedRect=f.roundedRect=function(H,fe,Ie,Be,et,Nt,Ut){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||isNaN(Be)||isNaN(et)||isNaN(Nt)||!Kc(Ut))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rr=4/3*(Math.SQRT2-1);return et=Math.min(et,.5*Ie),Nt=Math.min(Nt,.5*Be),this.lines([[Ie-2*et,0],[et*Rr,0,et,Nt-Nt*Rr,et,Nt],[0,Be-2*Nt],[0,Nt*Rr,-et*Rr,Nt,-et,Nt],[2*et-Ie,0],[-et*Rr,0,-et,-Nt*Rr,-et,-Nt],[0,2*Nt-Be],[0,-Nt*Rr,et*Rr,-Nt,et,-Nt]],H+et,fe,[1,1],Ut,!0),this},f.__private__.ellipse=f.ellipse=function(H,fe,Ie,Be,et){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||isNaN(Be)||!Kc(et))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*Ie,Ut=4/3*(Math.SQRT2-1)*Be;return qm(H+Ie,fe),fc(H+Ie,fe-Ut,H+Nt,fe-Be,H,fe-Be),fc(H-Nt,fe-Be,H-Ie,fe-Ut,H-Ie,fe),fc(H-Ie,fe+Ut,H-Nt,fe+Be,H,fe+Be),fc(H+Nt,fe+Be,H+Ie,fe+Ut,H+Ie,fe),Wm(et),this},f.__private__.circle=f.circle=function(H,fe,Ie,Be){if(isNaN(H)||isNaN(fe)||isNaN(Ie)||!Kc(Be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,fe,Ie,Ie,Be)},f.setFont=function(H,fe,Ie){return Ie&&(fe=k(fe,Ie)),Vt=ts(H,fe,{disableWarning:!1}),this};var Xc=f.__private__.getFont=f.getFont=function(){return hr[ts.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var H,fe,Ie={};for(H in Ct)if(Ct.hasOwnProperty(H))for(fe in Ie[H]=[],Ct[H])Ct[H].hasOwnProperty(fe)&&Ie[H].push(fe);return Ie},f.addFont=function(H,fe,Ie,Be,et){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?et=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(Ie=k(Ie,Be)),io.call(this,H,fe,Ie,et=et||"Identity-H")};var zo,Rl=t.lineWidth||.200025,ms=f.__private__.getLineWidth=f.getLineWidth=function(){return Rl},Fh=f.__private__.setLineWidth=f.setLineWidth=function(H){return Rl=H,Y(E(L(H))+" w"),this};f.__private__.setLineDash=zr.API.setLineDash=zr.API.setLineDashPattern=function(H,fe){if(H=H||[],fe=fe||0,isNaN(fe)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map(function(Ie){return E(L(Ie))}).join(" "),fe=E(L(fe)),Y("["+H+"] "+fe+" d"),this};var Qc=f.__private__.getLineHeight=f.getLineHeight=function(){return Ue*zo};f.__private__.getLineHeight=f.getLineHeight=function(){return Ue*zo};var xy=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(zo=H),this},kg=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return zo};xy(t.lineHeight);var xl=f.__private__.getHorizontalCoordinate=function(H){return L(H)},Ud=f.__private__.getVerticalCoordinate=function(H){return C===N?H:Je[Z].mediaBox.topRightY-Je[Z].mediaBox.bottomLeftY-L(H)},_g=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(H){return E(xl(H))},Hm=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(H){return E(Ud(H))},Bh=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Gt(Bh)},f.__private__.setStrokeColor=f.setDrawColor=function(H,fe,Ie,Be){return Bh=Wt({ch1:H,ch2:fe,ch3:Ie,ch4:Be,pdfColorType:"draw",precision:2}),Y(Bh),this};var Np=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Gt(Np)},f.__private__.setFillColor=f.setFillColor=function(H,fe,Ie,Be){return Np=Wt({ch1:H,ch2:fe,ch3:Ie,ch4:Be,pdfColorType:"fill",precision:2}),Y(Np),this};var pc=t.textColor||"0 g",Zc=f.__private__.getTextColor=f.getTextColor=function(){return Gt(pc)};f.__private__.setTextColor=f.setTextColor=function(H,fe,Ie,Be){return pc=Wt({ch1:H,ch2:fe,ch3:Ie,ch4:Be,pdfColorType:"text",precision:3}),this};var xc=t.charSpace,Gm=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(xc||0)};f.__private__.setCharSpace=f.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xc=H,this};var Sp=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(H){var fe=f.CapJoinStyles[H];if(fe===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sp=fe,Y(fe+" J"),this};var Cp=0;f.__private__.setLineJoin=f.setLineJoin=function(H){var fe=f.CapJoinStyles[H];if(fe===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cp=fe,Y(fe+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(E(L(H))+" M"),this},f.GState=I4,f.setGState=function(H){(H=typeof H=="string"?kt[zt[H]]:zd(null,H)).equals(or)||(Y("/"+H.id+" gs"),or=H)};var zd=function(H,fe){if(!H||!zt[H]){var Ie=!1;for(var Be in kt)if(kt.hasOwnProperty(Be)&&kt[Be].equals(fe)){Ie=!0;break}if(Ie)fe=kt[Be];else{var et="GS"+(Object.keys(kt).length+1).toString(10);kt[et]=fe,fe.id=et}return H&&(zt[H]=fe.id),bt.publish("addGState",fe),fe}};f.addGState=function(H,fe){return zd(H,fe),this},f.saveGraphicsState=function(){return Y("q"),is.push({key:Vt,size:Ue,color:pc}),this},f.restoreGraphicsState=function(){Y("Q");var H=is.pop();return Vt=H.key,Ue=H.size,pc=H.color,or=null,this},f.setCurrentTransformationMatrix=function(H){return Y(H.toString()+" cm"),this},f.comment=function(H){return Y("#"+H),this};var Jc=function(H,fe){var Ie=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(Nt){isNaN(Nt)||(Ie=parseFloat(Nt))}});var Be=fe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function(Nt){isNaN(Nt)||(Be=parseFloat(Nt))}});var et="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return et},set:function(Nt){et=Nt.toString()}}),this},Uh=function(H,fe,Ie,Be){Jc.call(this,H,fe),this.type="rect";var et=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return et},set:function(Ut){isNaN(Ut)||(et=parseFloat(Ut))}});var Nt=Be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(Ut){isNaN(Ut)||(Nt=parseFloat(Ut))}}),this},zh=function(){this.page=Re,this.currentPage=Z,this.pages=pe.slice(0),this.pagesContext=Je.slice(0),this.x=$t,this.y=Dr,this.matrix=Er,this.width=Vh(Z),this.height=Ll(Z),this.outputDestination=$e,this.id="",this.objectNumber=-1};zh.prototype.restore=function(){Re=this.page,Z=this.currentPage,Je=this.pagesContext,pe=this.pages,$t=this.x,Dr=this.y,Er=this.matrix,kp(Z,this.width),Fl(Z,this.height),$e=this.outputDestination};var Ml=function(H,fe,Ie,Be,et){Qe.push(new zh),Re=Z=0,pe=[],$t=H,Dr=fe,Er=et,Eo([Ie,Be])};for(var Vd in f.beginFormObject=function(H,fe,Ie,Be,et){return Ml(H,fe,Ie,Be,et),this},f.endFormObject=function(H){return(function(fe){if(Ce[fe])Qe.pop().restore();else{var Ie=new zh,Be="Xo"+(Object.keys(je).length+1).toString(10);Ie.id=Be,Ce[fe]=Be,je[Be]=Ie,bt.publish("addFormObject",Ie),Qe.pop().restore()}})(H),this},f.doFormObject=function(H,fe){var Ie=je[Ce[H]];return Y("q"),Y(fe.toString()+" cm"),Y("/"+Ie.id+" Do"),Y("Q"),this},f.getFormObject=function(H){var fe=je[Ce[H]];return{x:fe.x,y:fe.y,width:fe.width,height:fe.height,matrix:fe.matrix}},f.save=function(H,fe){return H=H||"generated.pdf",(fe=fe||{}).returnPromise=fe.returnPromise||!1,fe.returnPromise===!1?(dx(gs(Vr()),H),typeof dx.unload=="function"&&As.setTimeout&&setTimeout(dx.unload,911),this):new Promise(function(Ie,Be){try{var et=dx(gs(Vr()),H);typeof dx.unload=="function"&&As.setTimeout&&setTimeout(dx.unload,911),Ie(et)}catch(Nt){Be(Nt.message)}})},zr.API)zr.API.hasOwnProperty(Vd)&&(Vd==="events"&&zr.API.events.length?(function(H,fe){var Ie,Be,et;for(et=fe.length-1;et!==-1;et--)Ie=fe[et][0],Be=fe[et][1],H.subscribe.apply(H,[Ie].concat(typeof Be=="function"?[Be]:Be))})(bt,zr.API.events):f[Vd]=zr.API[Vd]);function Vh(H){return Je[H].mediaBox.topRightX-Je[H].mediaBox.bottomLeftX}function kp(H,fe){Je[H].mediaBox.topRightX=fe+Je[H].mediaBox.bottomLeftX}function Ll(H){return Je[H].mediaBox.topRightY-Je[H].mediaBox.bottomLeftY}function Fl(H,fe){Je[H].mediaBox.topRightY=fe+Je[H].mediaBox.bottomLeftY}var _p=f.getPageWidth=function(H){return Vh(H=H||Z)/tr},co=f.setPageWidth=function(H,fe){kp(H,fe*tr)},Bl=f.getPageHeight=function(H){return Ll(H=H||Z)/tr},Ym=f.setPageHeight=function(H,fe){Fl(H,fe*tr)};return f.internal={pdfEscape:da,getStyle:Vm,getFont:Xc,getFontSize:ut,getCharSpace:Gm,getTextColor:Zc,getLineHeight:Qc,getLineHeightFactor:kg,getLineWidth:ms,write:Le,getHorizontalCoordinate:xl,getVerticalCoordinate:Ud,getCoordinateString:_g,getVerticalCoordinateString:Hm,collections:{},newObject:at,newAdditionalObject:vr,newObjectDeferred:nt,newObjectDeferredBegin:It,getFilters:xr,putStream:Cr,events:bt,scaleFactor:tr,pageSize:{getWidth:function(){return _p(Z)},setWidth:function(H){co(Z,H)},getHeight:function(){return Bl(Z)},setHeight:function(H){Ym(Z,H)}},encryptionOptions:u,encryption:Hs,getEncryptor:function(H){return u!==null?Hs.encryptor(H,0):function(fe){return fe}},output:dn,getNumberOfPages:ta,pages:pe,out:Y,f2:T,f3:I,getPageInfo:Po,getPageInfoByObjId:lo,getCurrentPageInfo:Yc,getPDFVersion:x,Point:Jc,Rectangle:Uh,Matrix:He,hasHotfix:oo},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return _p(Z)},set:function(H){co(Z,H)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Bl(Z)},set:function(H){Ym(Z,H)},enumerable:!0,configurable:!0}),function(H){for(var fe=0,Ie=mt.length;fe<Ie;fe++){var Be=io.call(this,H[fe][0],H[fe][1],H[fe][2],mt[fe][3],!0);h===!1&&(m[Be]=!0);var et=H[fe][0].split("-");Gc({id:Be,fontName:et[0],fontStyle:et[1]||""})}bt.publish("addFonts",{fonts:hr,dictionary:Ct})}.call(f,mt),Vt="F1",qe(a,s),bt.publish("initialized"),f}w0.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},w0.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},w0.prototype.hexToBytes=function(t){for(var e=[],s=0;s<t.length;s+=2)e.push(String.fromCharCode(parseInt(t.substr(s,2),16)));return e.join("")},w0.prototype.processOwnerPassword=function(t,e){return gO(xO(e).substr(0,5),t)},w0.prototype.encryptor=function(t,e){var s=xO(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return gO(s,n)}},I4.prototype.equals=function(t){var e,s="id,objectNumber,equals";if(!t||ea(t)!==ea(this))return!1;var n=0;for(e in this)if(!(s.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&s.indexOf(e)<0&&n--;return n===0},zr.API={events:[]},zr.version="3.0.3";var hi=zr.API,M8=1,jg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},f0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ls=function(t){return t.toFixed(2)},Nf=function(t){return t.toFixed(5)};hi.__acroform__={};var dc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Xq=function(t){return t*M8},nh=function(t){var e=new lae,s=Ur.internal.getHeight(t)||0,n=Ur.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ls(n)),Number(Ls(s))],e},Lze=hi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Fze=hi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Bze=hi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Si=hi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Bze(t,e-1)},Ci=hi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Lze(t,e-1)},ki=hi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fze(t,e-1)},Uze=hi.__acroform__.calculateCoordinates=function(t,e){var s=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],i=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=s(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=s(a+o)||0,c.upperRight_Y=n(i)||0,[Number(Ls(c.lowerLeft_X)),Number(Ls(c.lowerLeft_Y)),Number(Ls(c.upperRight_X)),Number(Ls(c.upperRight_Y))]},zze=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],s=t._V||t.DV,n=vO(t,s),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Ls(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=nh(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},vO=function(t,e){var s=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var i=s,o=Ur.internal.getHeight(t)||0;o=o<0?-o:o;var l=Ur.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(T,I,L){if(T+1<a.length){var z=I+" "+a[T+1][0];return gj(z,t,L).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var d,u,h=gj("3",t,i).height,m=t.multiline?o-i:(o-h)/2,f=m+=2,v=0,x=0,g=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+gj(e,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var b="",w=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var C=!1;if(a[N].length!==1&&g!==a[N].length-1){if((h+2)*(w+2)+2>o)continue e;b+=a[N][g],C=!0,x=N,N--}else{b=(b+=a[N][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var S=parseInt(N),A=c(S,b,i),k=N>=a.length-1;if(A&&!k){b+=" ",g=0;continue}if(A||k){if(k)x=S;else if(t.multiline&&(h+2)*(w+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(w+2)+2>o)continue e;x=S}}for(var E="",O=v;O<=x;O++){var $=a[O];if(t.multiline){if(O===x){E+=$[g]+" ",g=(g+1)%$.length;continue}if(O===v){E+=$[$.length-1]+" ";continue}}E+=$[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=gj(E,t,i).width,t.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}e+=Ls(d)+" "+Ls(f)+` Td
`,e+="("+jg(E)+`) Tj
`,e+=-Ls(d)+` 0 Td
`,f=-(i+2),u=0,v=C?x:x+1,w++,b=""}break}return n.text=e,n.fontSize=i,n},gj=function(t,e,s){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:a}},Vze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Wze=function(t,e){var s={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===s.type&&n.object===s.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(s)},qze=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Lu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Vze)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M8=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new cae,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Wze(i,s)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(s){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Uze(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ur.createDefaultAppearanceStream(l),ea(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=zze(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var v=f[o];typeof v=="function"&&(v=v.call(a,l)),h+="/"+o+" "+v+" ",a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v)}}else typeof(v=f)=="function"&&(v=v.call(a,l)),h+="/"+o+" "+v,a.internal.acroformPlugin.xForms.indexOf(v)>=0||a.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&(function(x,g){for(var b in x)if(x.hasOwnProperty(b)){var w=b,N=x[b];g.internal.newObjectDeferredBegin(N.objId,!0),ea(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete x[w]}})(a.internal.acroformPlugin.xForms,a)})(s,t)}),t.internal.acroformPlugin.isInitialized=!0}},oae=hi.__acroform__.arrayToPdfArray=function(t,e,s){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),ea(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&s&&(n=s.internal.getEncryptor(e)),a+="("+jg(n(t[i].toString()))+")"):a+=t[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qA=function(t,e,s){var n=function(a){return a};return e!==void 0&&s&&(n=s.internal.getEncryptor(e)),(t=t||"").toString(),"("+jg(n(t))+")"},ph=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ph.prototype.toString=function(){return this.objId+" 0 R"},ph.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ph.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in e)if(Object.getOwnPropertyDescriptor(this,e[s]).configurable===!1){var n=e[s],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:oae(a,this.objId,this.scope)}):a instanceof ph?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var lae=function(){ph.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){t=s.trim()},get:function(){return t||null}})};dc(lae,ph);var cae=function(){ph.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var s=function(n){return n};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+jg(s(t))+")"}},set:function(s){t=s}})};dc(cae,ph);var Lu=function t(){ph.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Si(e,3)},set:function(b){b?this.F=Ci(e,3):this.F=ki(e,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');s=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof $4)return;i="FieldObject"+t.FieldNum++}var b=function(w){return w};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+jg(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/M8:d},set:function(b){d=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof $4||this instanceof zx))return qA(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof wo==0?qA(m,this.objId,this.scope):m},set:function(b){b=b.toString(),m=this instanceof wo==0?b.substr(0,1)==="("?f0(b.substr(1,b.length-2)):f0(b):b}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof wo==1?f0(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof wo==1?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof wo==0?qA(f,this.objId,this.scope):f},set:function(b){b=b.toString(),f=this instanceof wo==0?b.substr(0,1)==="("?f0(b.substr(1,b.length-2)):f0(b):b}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof wo==1?f0(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof wo==1?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(b){b=!!b,x=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(b){v=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,1)},set:function(b){b?this.Ff=Ci(this.Ff,1):this.Ff=ki(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,2)},set:function(b){b?this.Ff=Ci(this.Ff,2):this.Ff=ki(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,3)},set:function(b){b?this.Ff=Ci(this.Ff,3):this.Ff=ki(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};dc(Lu,ph);var Z0=function(){Lu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){t=s}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return oae(e,this.objId,this.scope)},set:function(s){var n,a;a=[],typeof(n=s)=="string"&&(a=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(s){e=s,this.sort&&e.sort()},this.addOption=function(s){s=(s=s||"").toString(),e.push(s),this.sort&&e.sort()},this.removeOption=function(s,n){for(n=n||!1,s=(s=s||"").toString();e.indexOf(s)!==-1&&(e.splice(e.indexOf(s),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,18)},set:function(s){s?this.Ff=Ci(this.Ff,18):this.Ff=ki(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=Ci(this.Ff,19):this.Ff=ki(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,20)},set:function(s){s?(this.Ff=Ci(this.Ff,20),e.sort()):this.Ff=ki(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,22)},set:function(s){s?this.Ff=Ci(this.Ff,22):this.Ff=ki(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,23)},set:function(s){s?this.Ff=Ci(this.Ff,23):this.Ff=ki(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,27)},set:function(s){s?this.Ff=Ci(this.Ff,27):this.Ff=ki(this.Ff,27)}}),this.hasAppearanceStream=!1};dc(Z0,Lu);var J0=function(){Z0.call(this),this.fontName="helvetica",this.combo=!1};dc(J0,Z0);var ev=function(){J0.call(this),this.combo=!0};dc(ev,J0);var Kj=function(){ev.call(this),this.edit=!0};dc(Kj,ev);var wo=function(){Lu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,15)},set:function(s){s?this.Ff=Ci(this.Ff,15):this.Ff=ki(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,16)},set:function(s){s?this.Ff=Ci(this.Ff,16):this.Ff=ki(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,17)},set:function(s){s?this.Ff=Ci(this.Ff,17):this.Ff=ki(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,26)},set:function(s){s?this.Ff=Ci(this.Ff,26):this.Ff=ki(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+jg(s(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(s){ea(s)==="object"&&(e=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(s){typeof s=="string"&&(e.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}})};dc(wo,Lu);var Xj=function(){wo.call(this),this.pushButton=!0};dc(Xj,wo);var tv=function(){wo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};dc(tv,wo);var $4=function(){var t,e;Lu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var s,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+jg(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){ea(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ur.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dc($4,Lu),tv.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var s=this.Kids[e];s.appearanceStreamContent=t.createAppearanceStream(s.optionName),s.caption=t.getCA()}},tv.prototype.createOption=function(t){var e=new $4;return e.Parent=this,e.optionName=t,this.Kids.push(e),Hze.call(this.scope,e),e};var Qj=function(){wo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ur.CheckBox.createAppearanceStream()};dc(Qj,wo);var zx=function(){Lu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,13)},set:function(e){e?this.Ff=Ci(this.Ff,13):this.Ff=ki(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,21)},set:function(e){e?this.Ff=Ci(this.Ff,21):this.Ff=ki(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,23)},set:function(e){e?this.Ff=Ci(this.Ff,23):this.Ff=ki(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,24)},set:function(e){e?this.Ff=Ci(this.Ff,24):this.Ff=ki(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,25)},set:function(e){e?this.Ff=Ci(this.Ff,25):this.Ff=ki(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,26)},set:function(e){e?this.Ff=Ci(this.Ff,26):this.Ff=ki(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dc(zx,Lu);var Zj=function(){zx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,14)},set:function(t){t?this.Ff=Ci(this.Ff,14):this.Ff=ki(this.Ff,14)}}),this.password=!0};dc(Zj,zx);var Ur={CheckBox:{createAppearanceStream:function(){return{N:{On:Ur.CheckBox.YesNormal},D:{On:Ur.CheckBox.YesPushDown,Off:Ur.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=vO(t,t.caption);return s.push("0.749023 g"),s.push("0 0 "+Ls(Ur.internal.getWidth(t))+" "+Ls(Ur.internal.getHeight(t))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+n+" "+Ls(i.fontSize)+" Tf "+a),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),e.stream=s.join(`
`),e},YesNormal:function(t){var e=nh(t);e.scope=t.scope;var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=Ur.internal.getHeight(t),o=Ur.internal.getWidth(t),l=vO(t,t.caption);return a.push("1 g"),a.push("0 0 "+Ls(o)+" "+Ls(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ls(o-1)+" "+Ls(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+s+" "+Ls(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Ls(Ur.internal.getWidth(t))+" "+Ls(Ur.internal.getHeight(t))+" re"),s.push("f"),e.stream=s.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ur.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ur.RadioButton.Circle.YesNormal,e.D[t]=Ur.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=nh(t);e.scope=t.scope;var s=[],n=Ur.internal.getWidth(t)<=Ur.internal.getHeight(t)?Ur.internal.getWidth(t)/4:Ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Ur.internal.Bezier_C,i=Number((n*a).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+Nf(Ur.internal.getWidth(t)/2)+" "+Nf(Ur.internal.getHeight(t)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=[],n=Ur.internal.getWidth(t)<=Ur.internal.getHeight(t)?Ur.internal.getWidth(t)/4:Ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ur.internal.Bezier_C).toFixed(5)),o=Number((n*Ur.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Nf(Ur.internal.getWidth(t)/2)+" "+Nf(Ur.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+Nf(Ur.internal.getWidth(t)/2)+" "+Nf(Ur.internal.getHeight(t)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),s.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),s.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),s.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=[],n=Ur.internal.getWidth(t)<=Ur.internal.getHeight(t)?Ur.internal.getWidth(t)/4:Ur.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ur.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Nf(Ur.internal.getWidth(t)/2)+" "+Nf(Ur.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ur.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ur.RadioButton.Cross.YesNormal,e.D[t]=Ur.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=nh(t);e.scope=t.scope;var s=[],n=Ur.internal.calculateCross(t);return s.push("q"),s.push("1 1 "+Ls(Ur.internal.getWidth(t)-2)+" "+Ls(Ur.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(Ls(n.x1.x)+" "+Ls(n.x1.y)+" m"),s.push(Ls(n.x2.x)+" "+Ls(n.x2.y)+" l"),s.push(Ls(n.x4.x)+" "+Ls(n.x4.y)+" m"),s.push(Ls(n.x3.x)+" "+Ls(n.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=Ur.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ls(Ur.internal.getWidth(t))+" "+Ls(Ur.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ls(Ur.internal.getWidth(t)-2)+" "+Ls(Ur.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ls(s.x1.x)+" "+Ls(s.x1.y)+" m"),n.push(Ls(s.x2.x)+" "+Ls(s.x2.y)+" l"),n.push(Ls(s.x4.x)+" "+Ls(s.x4.y)+" m"),n.push(Ls(s.x3.x)+" "+Ls(s.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=nh(t);e.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+Ls(Ur.internal.getWidth(t))+" "+Ls(Ur.internal.getHeight(t))+" re"),s.push("f"),e.stream=s.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+s}};Ur.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ur.internal.getWidth(t),s=Ur.internal.getHeight(t),n=Math.min(e,s);return{x1:{x:(e-n)/2,y:(s-n)/2+n},x2:{x:(e-n)/2+n,y:(s-n)/2},x3:{x:(e-n)/2,y:(s-n)/2},x4:{x:(e-n)/2+n,y:(s-n)/2+n}}}},Ur.internal.getWidth=function(t){var e=0;return ea(t)==="object"&&(e=Xq(t.Rect[2])),e},Ur.internal.getHeight=function(t){var e=0;return ea(t)==="object"&&(e=Xq(t.Rect[3])),e};var Hze=hi.addField=function(t){if(qze(this,t),!(t instanceof Lu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};hi.AcroFormChoiceField=Z0,hi.AcroFormListBox=J0,hi.AcroFormComboBox=ev,hi.AcroFormEditBox=Kj,hi.AcroFormButton=wo,hi.AcroFormPushButton=Xj,hi.AcroFormRadioButton=tv,hi.AcroFormCheckBox=Qj,hi.AcroFormTextField=zx,hi.AcroFormPasswordField=Zj,hi.AcroFormAppearance=Ur,hi.AcroForm={ChoiceField:Z0,ListBox:J0,ComboBox:ev,EditBox:Kj,Button:wo,PushButton:Xj,RadioButton:tv,CheckBox:Qj,TextField:zx,PasswordField:Zj,Appearance:Ur},zr.AcroForm={ChoiceField:Z0,ListBox:J0,ComboBox:ev,EditBox:Kj,Button:wo,PushButton:Xj,RadioButton:tv,CheckBox:Qj,TextField:zx,PasswordField:Zj,Appearance:Ur};zr.AcroForm;function dae(t){return t.reduce(function(e,s,n){return e[s]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var s="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(T,I){var L,z,M,V,B,F=s;if((I=I||s)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(A(T))for(B in n)for(M=n[B],L=0;L<M.length;L+=1){for(V=!0,z=0;z<M[L].length;z+=1)if(M[L][z]!==void 0&&M[L][z]!==T[z]){V=!1;break}if(V===!0){F=B;break}}else for(B in n)for(M=n[B],L=0;L<M.length;L+=1){for(V=!0,z=0;z<M[L].length;z+=1)if(M[L][z]!==void 0&&M[L][z]!==T.charCodeAt(z)){V=!1;break}if(V===!0){F=B;break}}return F===s&&I!==s&&(F=I),F},i=function T(I){for(var L=this.internal.write,z=this.internal.putStream,M=(0,this.internal.getFilters)();M.indexOf("FlateEncode")!==-1;)M.splice(M.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===b.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===b.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var B="",F=0,J=I.transparency.length;F<J;F++)B+=I.transparency[F]+" "+I.transparency[F]+" ";V.push({key:"Mask",value:"["+B+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var ee=I.filter!==void 0?["/"+I.filter]:void 0;if(z({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:ee,objectId:I.objectId}),L("endobj"),"sMask"in I&&I.sMask!==void 0){var q,U=(q=I.sMaskBitsPerComponent)!==null&&q!==void 0?q:I.bitsPerComponent,Z={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:I.sMask};"filter"in I&&(Z.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(I.width),Z.filter=I.filter),T.call(this,Z)}if(I.colorSpace===b.INDEXED){var K=this.internal.newObject();z({data:E(new Uint8Array(I.palette)),objectId:K}),L("endobj")}},o=function(){var T=this.internal.collections[e+"images"];for(var I in T)i.call(this,T[I])},l=function(){var T,I=this.internal.collections[e+"images"],L=this.internal.write;for(var z in I)L("/I"+(T=I[z]).index,T.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var T=this.internal.collections[e+"images"];return c.call(this),T},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(T){return typeof t["process"+T.toUpperCase()]=="function"},m=function(T){return ea(T)==="object"&&T.nodeType===1},f=function(T,I){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var L=""+T.getAttribute("src");if(L.indexOf("data:image/")===0)return Yj(unescape(L).split("base64,").pop());var z=t.loadFile(L,!0);if(z!==void 0)return z}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var M;switch(I){case"PNG":M="image/png";break;case"WEBP":M="image/webp";break;default:M="image/jpeg"}return Yj(T.toDataURL(M,1).split("base64,").pop())}},v=function(T){var I=this.internal.collections[e+"images"];if(I){for(var L in I)if(T===I[L].alias)return I[L]}},x=function(T,I,L){return T||I||(T=-96,I=-96),T<0&&(T=-1*L.width*72/T/this.internal.scaleFactor),I<0&&(I=-1*L.height*72/I/this.internal.scaleFactor),T===0&&(T=I*L.width/L.height),I===0&&(I=T*L.height/L.width),[T,I]},g=function(T,I,L,z,M,V){var B=x.call(this,L,z,M),F=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,ee=d.call(this);if(L=B[0],z=B[1],ee[M.index]=M,V){V*=Math.PI/180;var q=Math.cos(V),U=Math.sin(V),Z=function(se){return se.toFixed(4)},K=[Z(q),Z(U),Z(-1*U),Z(q),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,F(T),J(I+z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([F(L),"0","0",F(z),"0","0","cm"].join(" "))):this.internal.write([F(L),"0","0",F(z),F(T),J(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+M.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(T){var I,L,z=0;if(typeof T=="string")for(L=T.length,I=0;I<L;I++)z=(z<<5)-z+T.charCodeAt(I),z|=0;else if(A(T))for(L=T.byteLength/2,I=0;I<L;I++)z=(z<<5)-z+T[I],z|=0;return z},C=t.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var I=!0;return T.length===0&&(I=!1),T.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(I=!1),I},S=t.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var I=T.indexOf(",");return I<0?null:T.substring(0,I).trim().endsWith("base64")?T.substring(I+1):null};t.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var A=t.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},k=t.__addimage__.binaryStringToUint8Array=function(T){for(var I=T.length,L=new Uint8Array(I),z=0;z<I;z++)L[z]=T.charCodeAt(z);return L},E=t.__addimage__.arrayBufferToBinaryString=function(T){for(var I="",L=A(T)?T:new Uint8Array(T),z=0;z<L.length;z+=8192)I+=String.fromCharCode.apply(null,L.subarray(z,z+8192));return I};t.addImage=function(){var T,I,L,z,M,V,B,F,J;if(typeof arguments[1]=="number"?(I=s,L=arguments[1],z=arguments[2],M=arguments[3],V=arguments[4],B=arguments[5],F=arguments[6],J=arguments[7]):(I=arguments[1],L=arguments[2],z=arguments[3],M=arguments[4],V=arguments[5],B=arguments[6],F=arguments[7],J=arguments[8]),ea(T=arguments[0])==="object"&&!m(T)&&"imageData"in T){var ee=T;T=ee.imageData,I=ee.format||I||s,L=ee.x||L||0,z=ee.y||z||0,M=ee.w||ee.width||M,V=ee.h||ee.height||V,B=ee.alias||B,F=ee.compression||F,J=ee.rotation||ee.angle||J}var q=this.internal.getFilters();if(F===void 0&&q.indexOf("FlateEncode")!==-1&&(F="SLOW"),isNaN(L)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var U=O.call(this,T,I,B,F);return g.call(this,L,z,M,V,U,J),this};var O=function(T,I,L,z){var M,V,B;if(typeof T=="string"&&a(T)===s){T=unescape(T);var F=$(T,!1);(F!==""||(F=t.loadFile(T,!0))!==void 0)&&(T=F)}if(m(T)&&(T=f(T,I)),I=a(T,I),!h(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((B=L)==null||B.length===0)&&(L=(function(J){return typeof J=="string"||A(J)?N(J):A(J.data)?N(J.data):null})(T)),(M=v.call(this,L))||(T instanceof Uint8Array||I==="RGBA"||(V=T,T=k(T)),M=this["process"+I.toUpperCase()](T,u.call(this),L,(function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:w.NONE})(z),V)),!M)throw new Error("An unknown error occurred whilst processing the image.");return M},$=t.__addimage__.convertBase64ToBinaryString=function(T,I){I=typeof I!="boolean"||I;var L,z="";if(typeof T=="string"){var M;L=(M=S(T))!==null&&M!==void 0?M:T;try{z=Yj(L)}catch(V){if(I)throw C(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(T){var I,L,z="";if(m(T)&&(T=f(T)),typeof T=="string"&&a(T)===s&&((z=$(T,!1))===""&&(z=t.loadFile(T)||""),T=z),L=a(T),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(T instanceof Uint8Array||(T=k(T)),!(I=this["process"+L.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=L,I}})(zr.API),(function(t){var e=function(s){if(s!==void 0&&s!="")return!0};zr.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(s){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(s.objId),d=s.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var f=this.internal.pdfEscape,v=this.internal.getEncryptor(s.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(x.objId),w=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+f(b(n.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(b(w))+") >>",x.content=i;var N=x.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(x.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var A=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+A+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(s){var n=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":n.pageContext.annotations.push(s)}},t.link=function(s,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(s),y:d(n),w:c(s+a),h:d(n+i)},options:o,type:"link"})},t.textWithLink=function(s,n,a,i){var o,l,c=this.getTextWidth(s),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(s,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(s,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,l,o,i),c},t.getTextWidth=function(s){var n=this.internal.getFontSize();return this.getStringUnitWidth(s)*n/this.internal.scaleFactor}})(zr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},l=t.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&i(x)&&e[x.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&a.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&i(x)&&e[x.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&i(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&i(x)&&e[x.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&i(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var g=0,b=s,w="",N=0;for(g=0;g<x.length;g+=1)b[x.charCodeAt(g)]!==void 0?(N++,typeof(b=b[x.charCodeAt(g)])=="number"&&(w+=String.fromCharCode(b),b=s,N=0),g===x.length-1&&(b=s,w+=x.charAt(g-(N-1)),g-=N-1,N=0)):(b=s,w+=x.charAt(g-N),g-=N,N=0);return w};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(x,g,b){return o(x)?i(x)===!1?-1:!d(x)||!o(g)&&!o(b)||!o(b)&&l(g)||l(x)&&!o(g)||l(x)&&c(g)||l(x)&&l(g)?0:u(x)&&o(g)&&!l(g)&&o(b)&&d(b)?3:l(x)||!o(b)?1:2:-1},f=function(x){var g=0,b=0,w=0,N="",C="",S="",A=(x=x||"").split("\\s+"),k=[];for(g=0;g<A.length;g+=1){for(k.push(""),b=0;b<A[g].length;b+=1)N=A[g][b],C=A[g][b-1],S=A[g][b+1],o(N)?(w=m(N,C,S),k[g]+=w!==-1?String.fromCharCode(e[N.charCodeAt(0)][w]):N):k[g]+=N;k[g]=h(k[g])}return k.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var x,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var w=0;for(b=[],w=0;w<g.length;w+=1)Array.isArray(g[w])?b.push([f(g[w][0]),g[w][1],g[w][2]]):b.push([f(g[w])]);x=b}else x=f(g);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",v])})(zr.API),zr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(l){s=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(s,n){var a;if((s=s||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(zr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},s=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(x){v=x}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,v=0,x=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=d.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,C){return N.concat(g.splitTextToSize(C,b))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)f<(x=this.getStringUnitWidth(c[w],{font:h})*u)&&(f=x);return f!==0&&(v=c.length),{w:f/=m,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,s===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,v,x,g,b=[],w=[],N=[],C={},S={},A=[],k=[],E=(m=m||{}).autoSize||!1,O=m.printHeaders!==!1,$=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,T=m.margins||Object.assign({width:this.getPageWidth()},e),I=typeof m.padding=="number"?m.padding:3,L=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=z,this.setFontSize($),h==null)w=b=Object.keys(u[0]),N=b.map(function(){return"left"});else if(Array.isArray(h)&&ea(h[0])==="object")for(b=h.map(function(ee){return ee.name}),w=h.map(function(ee){return ee.prompt||ee.name||""}),N=h.map(function(ee){return ee.align||"left"}),f=0;f<h.length;f+=1)S[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(w=b=h,N=b.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<b.length;f+=1){for(C[g=b[f]]=u.map(function(ee){return ee[g]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(w[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=C[g],this.setFont(void 0,"normal"),x=0;x<v.length;x+=1)A.push(this.getTextDimensions(v[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,A)+I+I,A=[]}if(O){var M={};for(f=0;f<b.length;f+=1)M[b[f]]={},M[b[f]].text=w[f],M[b[f]].align=N[f];var V=l.call(this,M,S);k=b.map(function(ee){return new i(c,d,S[ee],V,M[ee].text,void 0,M[ee].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var B=h.reduce(function(ee,q){return ee[q.name]=q.align,ee},{});for(f=0;f<u.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:u[f]},this);var F=l.call(this,u[f],S);for(x=0;x<b.length;x+=1){var J=u[f][b[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:x,data:J},this),o.call(this,new i(c,d,S[b[x]],F,J,f+2,B[b[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var v=c[f];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/m+u+u},this).reduce(function(f,v){return Math.max(f,v)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),s=!1}})(zr.API);var uae={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},hae=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yO=dae(hae),mae=[100,200,300,400,500,600,700,800,900],Gze=dae(mae);function HA(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),s=(function(i){return uae[i=i||"normal"]?i:"normal"})(t.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),a=(function(i){return typeof yO[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:s,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,s,n].join(" ")}}}function Qq(t,e,s,n){var a;for(a=s;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=s;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Yze={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Zq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Jq(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function eH(t){return t.trimLeft()}function Kze(t,e){for(var s=0;s<t.length;){if(t.charAt(s)===e)return[t.substring(0,s),t.substring(s+1)];s+=1}return null}function Xze(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var vj,tH,rH,p0,yj,sH,nH,aH,GA=["times"];function iH(t,e,s,n,a){var i=4,o=lH;switch(a){case zr.API.image_compression.FAST:i=1,o=oH;break;case zr.API.image_compression.MEDIUM:i=6,o=cH;break;case zr.API.image_compression.SLOW:i=9,o=dH}t=(function(c,d,u,h){for(var m,f=c.length/d,v=new Uint8Array(c.length+f),x=[Qze,oH,lH,cH,dH],g=0;g<f;g+=1){var b=g*d,w=c.subarray(b,b+d);if(h)v.set(h(w,u,m),b+g);else{for(var N=x.length,C=[],S=0;S<N;S+=1)C[S]=x[S](w,u,m);var A=Jze(C.concat());v.set(C[A],b+g)}m=w}return v})(t,e,Math.ceil(s*n/8),o);var l=hO(t,{level:i});return zr.API.__addimage__.arrayBufferToBinaryString(l)}function Qze(t){var e=Array.apply([],t);return e.unshift(0),e}function oH(t,e){var s=t.length,n=[];n[0]=1;for(var a=0;a<s;a+=1){var i=t[a-e]||0;n[a+1]=t[a]-i+256&255}return n}function lH(t,e,s){var n=t.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=s&&s[i]||0;a[i+1]=t[i]-o+256&255}return a}function cH(t,e,s){var n=t.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=t[i-e]||0,l=s&&s[i]||0;a[i+1]=t[i]+256-(o+l>>>1)&255}return a}function dH(t,e,s){var n=t.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=Zze(t[i-e]||0,s&&s[i]||0,s&&s[i-e]||0);a[i+1]=t[i]-o+256&255}return a}function Zze(t,e,s){if(t===e&&e===s)return t;var n=Math.abs(e-s),a=Math.abs(t-s),i=Math.abs(t+e-s-s);return n<=a&&n<=i?t:a<=i?e:s}function Jze(t){var e=t.map(function(s){return s.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function YA(t,e,s){var n=e*s,a=Math.floor(n/8),i=16-(n-8*a+s),o=(1<<s)-1;return fae(t,a)>>i&o}function uH(t,e,s,n){var a=s*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,c=(e&l)<<o;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var m=h>>8&255;d.setUint8(u,m)}})(t,i,fae(t,i)&~(l<<o)&65535|c)}function fae(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function eVe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],i=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;i&&(l=e,c=o,e+=3*o);var d=!0,u=[],h=0,m=null,f=0,v=null;for(this.width=s,this.height=n;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],1&x||(m=null),f=x>>2&7,e++;break;case 254:for(;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,C=t[e++],S=C>>6&1,A=1<<1+(7&C),k=l,E=c,O=!1;C>>7&&(O=!0,k=e,E=A,e+=3*A);var $=e;for(e++;;){var T;if(!((T=t[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}u.push({x:g,y:b,width:w,height:N,has_local_palette:O,palette_offset:k,palette_size:E,data_offset:$,data_length:e-$,transparent_index:m,interlaced:!!S,delay:h,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(I){if(I<0||I>=u.length)throw new Error("Frame index out of range.");return u[I]},this.decodeAndBlitFrameBGRA=function(I,L){var z=this.frameInfo(I),M=z.width*z.height,V=new Uint8Array(M);hH(t,z.data_offset,V,M);var B=z.palette_offset,F=z.transparent_index;F===null&&(F=256);var J=z.width,ee=s-J,q=J,U=4*(z.y*s+z.x),Z=4*((z.y+z.height)*s+z.x),K=U,se=4*ee;z.interlaced===!0&&(se+=4*s*7);for(var ne=8,ie=0,be=V.length;ie<be;++ie){var ue=V[ie];if(q===0&&(q=J,(K+=se)>=Z&&(se=4*ee+4*s*(ne-1),K=U+(J+ee)*(ne<<1),ne>>=1)),ue===F)K+=4;else{var oe=t[B+3*ue],pe=t[B+3*ue+1],ye=t[B+3*ue+2];L[K++]=ye,L[K++]=pe,L[K++]=oe,L[K++]=255}--q}},this.decodeAndBlitFrameRGBA=function(I,L){var z=this.frameInfo(I),M=z.width*z.height,V=new Uint8Array(M);hH(t,z.data_offset,V,M);var B=z.palette_offset,F=z.transparent_index;F===null&&(F=256);var J=z.width,ee=s-J,q=J,U=4*(z.y*s+z.x),Z=4*((z.y+z.height)*s+z.x),K=U,se=4*ee;z.interlaced===!0&&(se+=4*s*7);for(var ne=8,ie=0,be=V.length;ie<be;++ie){var ue=V[ie];if(q===0&&(q=J,(K+=se)>=Z&&(se=4*ee+4*s*(ne-1),K=U+(J+ee)*(ne<<1),ne>>=1)),ue===F)K+=4;else{var oe=t[B+3*ue],pe=t[B+3*ue+1],ye=t[B+3*ue+2];L[K++]=oe,L[K++]=pe,L[K++]=ye,L[K++]=255}--q}}}function hH(t,e,s,n){for(var a=t[e++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,m=0,f=t[e++],v=new Int32Array(4096),x=null;;){for(;u<16&&f!==0;)h|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<c)break;var g=h&d;if(h>>=c,u-=c,g!==i){if(g===o)break;for(var b=g<l?g:x,w=0,N=b;N>i;)N=v[N]>>8,++w;var C=N;if(m+w+(b!==g?1:0)>n)return void ha.log("Warning, gif stream longer than expected.");s[m++]=C;var S=m+=w;for(b!==g&&(s[m++]=C),N=b;w--;)N=v[N],s[--S]=255&N,N>>=8;x!==null&&l<4096&&(v[l++]=x<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),x=g}else l=o+1,d=(1<<(c=a+1))-1,x=null}return m!==n&&ha.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function KA(t){var e,s,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),f=new Array(64),v=new Array(64),x=[],g=0,b=7,w=new Array(64),N=new Array(64),C=new Array(64),S=new Array(256),A=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(U,Z){for(var K=0,se=0,ne=new Array,ie=1;ie<=16;ie++){for(var be=1;be<=U[ie];be++)ne[Z[se]]=[],ne[Z[se]][0]=K,ne[Z[se]][1]=ie,se++,K++;K*=2}return ne}function B(U){for(var Z=U[0],K=U[1]-1;K>=0;)Z&1<<K&&(g|=1<<b),K--,--b<0&&(g==255?(F(255),F(0)):F(g),b=7,g=0)}function F(U){x.push(U)}function J(U){F(U>>8&255),F(255&U)}function ee(U,Z,K,se,ne){for(var ie,be=ne[0],ue=ne[240],oe=(function(Ue,xt){var ut,Ot,tt,st,At,Yt,yr,Zt,Vt,tr,$t=0;for(Vt=0;Vt<8;++Vt){ut=Ue[$t],Ot=Ue[$t+1],tt=Ue[$t+2],st=Ue[$t+3],At=Ue[$t+4],Yt=Ue[$t+5],yr=Ue[$t+6];var Dr=ut+(Zt=Ue[$t+7]),Er=ut-Zt,hr=Ot+yr,Ct=Ot-yr,is=tt+Yt,cr=tt-Yt,Pt=st+At,kt=st-At,zt=Dr+Pt,or=Dr-Pt,Re=hr+is,Je=hr-is;Ue[$t]=zt+Re,Ue[$t+4]=zt-Re;var bt=.707106781*(Je+or);Ue[$t+2]=or+bt,Ue[$t+6]=or-bt;var gr=.382683433*((zt=kt+cr)-(Je=Ct+Er)),je=.5411961*zt+gr,Ce=1.306562965*Je+gr,Qe=.707106781*(Re=cr+Ct),He=Er+Qe,vt=Er-Qe;Ue[$t+5]=vt+je,Ue[$t+3]=vt-je,Ue[$t+1]=He+Ce,Ue[$t+7]=He-Ce,$t+=8}for($t=0,Vt=0;Vt<8;++Vt){ut=Ue[$t],Ot=Ue[$t+8],tt=Ue[$t+16],st=Ue[$t+24],At=Ue[$t+32],Yt=Ue[$t+40],yr=Ue[$t+48];var le=ut+(Zt=Ue[$t+56]),Ee=ut-Zt,We=Ot+yr,at=Ot-yr,nt=tt+Yt,It=tt-Yt,vr=st+At,Xt=st-At,Mt=le+vr,Gt=le-vr,Wt=We+nt,xr=We-nt;Ue[$t]=Mt+Wt,Ue[$t+32]=Mt-Wt;var Cr=.707106781*(xr+Gt);Ue[$t+16]=Gt+Cr,Ue[$t+48]=Gt-Cr;var Pr=.382683433*((Mt=Xt+It)-(xr=at+Ee)),Gr=.5411961*Mt+Pr,os=1.306562965*xr+Pr,ws=.707106781*(Wt=It+at),Wa=Ee+ws,xi=Ee-ws;Ue[$t+40]=xi+Gr,Ue[$t+24]=xi-Gr,Ue[$t+8]=Wa+os,Ue[$t+56]=Wa-os,$t++}for(Vt=0;Vt<64;++Vt)tr=Ue[Vt]*xt[Vt],f[Vt]=tr>0?tr+.5|0:tr-.5|0;return f})(U,Z),pe=0;pe<64;++pe)v[k[pe]]=oe[pe];var ye=v[0]-K;K=v[0],ye==0?B(se[0]):(B(se[m[ie=32767+ye]]),B(h[ie]));for(var $e=63;$e>0&&v[$e]==0;)$e--;if($e==0)return B(be),K;for(var Se,Y=1;Y<=$e;){for(var Le=Y;v[Y]==0&&Y<=$e;)++Y;var xe=Y-Le;if(xe>=16){Se=xe>>4;for(var mt=1;mt<=Se;++mt)B(ue);xe&=15}ie=32767+v[Y],B(ne[(xe<<4)+m[ie]]),B(h[ie]),Y++}return $e!=63&&B(be),K}function q(U){U=Math.min(Math.max(U,1),100),i!=U&&((function(Z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var ne=o((K[se]*Z+50)/100);ne=Math.min(Math.max(ne,1),255),l[k[se]]=ne}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var ue=o((ie[be]*Z+50)/100);ue=Math.min(Math.max(ue,1),255),c[k[be]]=ue}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pe=0,ye=0;ye<8;ye++)for(var $e=0;$e<8;$e++)d[pe]=1/(l[k[pe]]*oe[ye]*oe[$e]*8),u[pe]=1/(c[k[pe]]*oe[ye]*oe[$e]*8),pe++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),i=U)}this.encode=function(U,Z){Z&&q(Z),x=new Array,g=0,b=7,J(65496),J(65504),J(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),J(1),J(1),F(0),F(0),(function(){J(65499),J(132),F(0);for(var Ot=0;Ot<64;Ot++)F(l[Ot]);F(1);for(var tt=0;tt<64;tt++)F(c[tt])})(),(function(Ot,tt){J(65472),J(17),F(8),J(tt),J(Ot),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)})(U.width,U.height),(function(){J(65476),J(418),F(0);for(var Ot=0;Ot<16;Ot++)F(E[Ot+1]);for(var tt=0;tt<=11;tt++)F(O[tt]);F(16);for(var st=0;st<16;st++)F($[st+1]);for(var At=0;At<=161;At++)F(T[At]);F(1);for(var Yt=0;Yt<16;Yt++)F(I[Yt+1]);for(var yr=0;yr<=11;yr++)F(L[yr]);F(17);for(var Zt=0;Zt<16;Zt++)F(z[Zt+1]);for(var Vt=0;Vt<=161;Vt++)F(M[Vt])})(),J(65498),J(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var K=0,se=0,ne=0;g=0,b=7,this.encode.displayName="_encode_";for(var ie,be,ue,oe,pe,ye,$e,Se,Y,Le=U.data,xe=U.width,mt=U.height,Ue=4*xe,xt=0;xt<mt;){for(ie=0;ie<Ue;){for(pe=Ue*xt+ie,$e=-1,Se=0,Y=0;Y<64;Y++)ye=pe+(Se=Y>>3)*Ue+($e=4*(7&Y)),xt+Se>=mt&&(ye-=Ue*(xt+1+Se-mt)),ie+$e>=Ue&&(ye-=ie+$e-Ue+4),be=Le[ye++],ue=Le[ye++],oe=Le[ye++],w[Y]=(A[be]+A[ue+256|0]+A[oe+512|0]>>16)-128,N[Y]=(A[be+768|0]+A[ue+1024|0]+A[oe+1280|0]>>16)-128,C[Y]=(A[be+1280|0]+A[ue+1536|0]+A[oe+1792|0]>>16)-128;K=ee(w,d,K,e,n),se=ee(N,u,se,s,a),ne=ee(C,u,ne,s,a),ie+=32}xt+=8}if(b>=0){var ut=[];ut[1]=b+1,ut[0]=(1<<b+1)-1,B(ut)}return J(65497),new Uint8Array(x)},t=t||50,(function(){for(var U=String.fromCharCode,Z=0;Z<256;Z++)S[Z]=U(Z)})(),e=V(E,O),s=V(I,L),n=V($,T),a=V(z,M),(function(){for(var U=1,Z=2,K=1;K<=15;K++){for(var se=U;se<Z;se++)m[32767+se]=K,h[32767+se]=[],h[32767+se][1]=K,h[32767+se][0]=se;for(var ne=-(Z-1);ne<=-U;ne++)m[32767+ne]=K,h[32767+ne]=[],h[32767+ne][1]=K,h[32767+ne][0]=Z-1+ne;U<<=1,Z<<=1}})(),(function(){for(var U=0;U<256;U++)A[U]=19595*U,A[U+256|0]=38470*U,A[U+512|0]=7471*U+32768,A[U+768|0]=-11059*U,A[U+1024|0]=-21709*U,A[U+1280|0]=32768*U+8421375,A[U+1536|0]=-27439*U,A[U+1792|0]=-5329*U})(),q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function au(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mH(t){function e(O){if(!O)throw Error("assert :P")}function s(O,$,T){for(var I=0;4>I;I++)if(O[$+I]!=T.charCodeAt(I))return!0;return!1}function n(O,$,T,I,L){for(var z=0;z<L;z++)O[$+z]=T[I+z]}function a(O,$,T,I){for(var L=0;L<I;L++)O[$+L]=T}function i(O){return new Int32Array(O)}function o(O,$){for(var T=[],I=0;I<O;I++)T.push(new $);return T}function l(O,$){var T=[];return(function I(L,z,M){for(var V=M[z],B=0;B<V&&(L.push(M.length>z+1?[]:new $),!(M.length<z+1));B++)I(L[B],z+1,M)})(T,0,O),T}var c=function(){var O=this;function $(P,R){for(var Q=1<<R-1>>>0;P&Q;)Q>>>=1;return Q?(P&Q-1)+Q:P}function T(P,R,Q,ae,me){e(!(ae%Q));do P[R+(ae-=Q)]=me;while(0<ae)}function I(P,R,Q,ae,me){if(e(2328>=me),512>=me)var ve=i(512);else if((ve=i(me))==null)return 0;return(function(we,Ne,ke,Pe,ze,it){var Oe,Ge,rt=Ne,wt=1<<ke,lt=i(16),gt=i(16);for(e(ze!=0),e(Pe!=null),e(we!=null),e(0<ke),Ge=0;Ge<ze;++Ge){if(15<Pe[Ge])return 0;++lt[Pe[Ge]]}if(lt[0]==ze)return 0;for(gt[1]=0,Oe=1;15>Oe;++Oe){if(lt[Oe]>1<<Oe)return 0;gt[Oe+1]=gt[Oe]+lt[Oe]}for(Ge=0;Ge<ze;++Ge)Oe=Pe[Ge],0<Pe[Ge]&&(it[gt[Oe]++]=Ge);if(gt[15]==1)return(Pe=new L).g=0,Pe.value=it[0],T(we,rt,1,wt,Pe),wt;var yt,_t=-1,Et=wt-1,Kr=0,Tr=1,$s=1,Mr=1<<ke;for(Ge=0,Oe=1,ze=2;Oe<=ke;++Oe,ze<<=1){if(Tr+=$s<<=1,0>($s-=lt[Oe]))return 0;for(;0<lt[Oe];--lt[Oe])(Pe=new L).g=Oe,Pe.value=it[Ge++],T(we,rt+Kr,ze,Mr,Pe),Kr=$(Kr,Oe)}for(Oe=ke+1,ze=2;15>=Oe;++Oe,ze<<=1){if(Tr+=$s<<=1,0>($s-=lt[Oe]))return 0;for(;0<lt[Oe];--lt[Oe]){if(Pe=new L,(Kr&Et)!=_t){for(rt+=Mr,yt=1<<(_t=Oe)-ke;15>_t&&!(0>=(yt-=lt[_t]));)++_t,yt<<=1;wt+=Mr=1<<(yt=_t-ke),we[Ne+(_t=Kr&Et)].g=yt+ke,we[Ne+_t].value=rt-Ne-_t}Pe.g=Oe-ke,Pe.value=it[Ge++],T(we,rt+(Kr>>ke),ze,Mr,Pe),Kr=$(Kr,Oe)}}return Tr!=2*gt[15]-1?0:wt})(P,R,Q,ae,me,ve)}function L(){this.value=this.g=0}function z(){this.value=this.g=0}function M(){this.G=o(5,L),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(zl,z)}function V(P,R,Q,ae){e(P!=null),e(R!=null),e(2147483648>ae),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=R,P.pa=Q,P.Jd=R,P.Yc=Q+ae,P.Zc=4<=ae?Q+ae-4+1:Q,be(P)}function B(P,R){for(var Q=0;0<R--;)Q|=oe(P,128)<<R;return Q}function F(P,R){var Q=B(P,R);return ue(P)?-Q:Q}function J(P,R,Q,ae){var me,ve=0;for(e(P!=null),e(R!=null),e(4294967288>ae),P.Sb=ae,P.Ra=0,P.u=0,P.h=0,4<ae&&(ae=4),me=0;me<ae;++me)ve+=R[Q+me]<<8*me;P.Ra=ve,P.bb=ae,P.oa=R,P.pa=Q}function ee(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<qu-8>>>0,++P.bb,P.u-=8;se(P)&&(P.h=1,P.u=0)}function q(P,R){if(e(0<=R),!P.h&&R<=yl){var Q=K(P)&vl[R];return P.u+=R,ee(P),Q}return P.h=1,P.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(P){return P.Ra>>>(P.u&qu-1)>>>0}function se(P){return e(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>qu}function ne(P,R){P.u=R,P.h=se(P)}function ie(P){P.u>=td&&(e(P.u>=td),ee(P))}function be(P){e(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(e(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function ue(P){return B(P,1)}function oe(P,R){var Q=P.Ca;0>P.b&&be(P);var ae=P.b,me=Q*R>>>8,ve=(P.I>>>ae>me)+0;for(ve?(Q-=me,P.I-=me+1<<ae>>>0):Q=me+1,ae=Q,me=0;256<=ae;)me+=8,ae>>=8;return ae=7^me+qd[ae],P.b-=ae,P.Ca=(Q<<ae)-1,ve}function pe(P,R,Q){P[R+0]=Q>>24&255,P[R+1]=Q>>16&255,P[R+2]=Q>>8&255,P[R+3]=255&Q}function ye(P,R){return P[R+0]|P[R+1]<<8}function $e(P,R){return ye(P,R)|P[R+2]<<16}function Se(P,R){return ye(P,R)|ye(P,R+2)<<16}function Y(P,R){var Q=1<<R;return e(P!=null),e(0<R),P.X=i(Q),P.X==null?0:(P.Mb=32-R,P.Xa=R,1)}function Le(P,R){e(P!=null),e(R!=null),e(P.Xa==R.Xa),n(R.X,0,P.X,0,1<<R.Xa)}function xe(){this.X=[],this.Xa=this.Mb=0}function mt(P,R,Q,ae){e(Q!=null),e(ae!=null);var me=Q[0],ve=ae[0];return me==0&&(me=(P*ve+R/2)/R),ve==0&&(ve=(R*me+P/2)/P),0>=me||0>=ve?0:(Q[0]=me,ae[0]=ve,1)}function Ue(P,R){return P+(1<<R)-1>>>R}function xt(P,R){return((4278255360&P)+(4278255360&R)>>>0&4278255360)+((16711935&P)+(16711935&R)>>>0&16711935)>>>0}function ut(P,R){O[R]=function(Q,ae,me,ve,we,Ne,ke){var Pe;for(Pe=0;Pe<we;++Pe){var ze=O[P](Ne[ke+Pe-1],me,ve+Pe);Ne[ke+Pe]=xt(Q[ae+Pe],ze)}}}function Ot(){this.ud=this.hd=this.jd=0}function tt(P,R){return((4278124286&(P^R))>>>1)+(P&R)>>>0}function st(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function At(P,R){return st(P+(P-R+.5>>1))}function Yt(P,R,Q){return Math.abs(R-Q)-Math.abs(P-Q)}function yr(P,R,Q,ae,me,ve,we){for(ae=ve[we-1],Q=0;Q<me;++Q)ve[we+Q]=ae=xt(P[R+Q],ae)}function Zt(P,R,Q,ae,me){var ve;for(ve=0;ve<Q;++ve){var we=P[R+ve],Ne=we>>8&255,ke=16711935&(ke=(ke=16711935&we)+((Ne<<16)+Ne));ae[me+ve]=(4278255360&we)+ke>>>0}}function Vt(P,R){R.jd=255&P,R.hd=P>>8&255,R.ud=P>>16&255}function tr(P,R,Q,ae,me,ve){var we;for(we=0;we<ae;++we){var Ne=R[Q+we],ke=Ne>>>8,Pe=Ne,ze=255&(ze=(ze=Ne>>>16)+((P.jd<<24>>24)*(ke<<24>>24)>>>5));Pe=255&(Pe=(Pe+=(P.hd<<24>>24)*(ke<<24>>24)>>>5)+((P.ud<<24>>24)*(ze<<24>>24)>>>5)),me[ve+we]=(4278255360&Ne)+(ze<<16)+Pe}}function $t(P,R,Q,ae,me){O[R]=function(ve,we,Ne,ke,Pe,ze,it,Oe,Ge){for(ke=it;ke<Oe;++ke)for(it=0;it<Ge;++it)Pe[ze++]=me(Ne[ae(ve[we++])])},O[P]=function(ve,we,Ne,ke,Pe,ze,it){var Oe=8>>ve.b,Ge=ve.Ea,rt=ve.K[0],wt=ve.w;if(8>Oe)for(ve=(1<<ve.b)-1,wt=(1<<Oe)-1;we<Ne;++we){var lt,gt=0;for(lt=0;lt<Ge;++lt)lt&ve||(gt=ae(ke[Pe++])),ze[it++]=me(rt[gt&wt]),gt>>=Oe}else O["VP8LMapColor"+Q](ke,Pe,rt,wt,ze,it,we,Ne,Ge)}}function Dr(P,R,Q,ae,me){for(Q=R+Q;R<Q;){var ve=P[R++];ae[me++]=ve>>16&255,ae[me++]=ve>>8&255,ae[me++]=255&ve}}function Er(P,R,Q,ae,me){for(Q=R+Q;R<Q;){var ve=P[R++];ae[me++]=ve>>16&255,ae[me++]=ve>>8&255,ae[me++]=255&ve,ae[me++]=ve>>24&255}}function hr(P,R,Q,ae,me){for(Q=R+Q;R<Q;){var ve=(we=P[R++])>>16&240|we>>12&15,we=240&we|we>>28&15;ae[me++]=ve,ae[me++]=we}}function Ct(P,R,Q,ae,me){for(Q=R+Q;R<Q;){var ve=(we=P[R++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;ae[me++]=ve,ae[me++]=we}}function is(P,R,Q,ae,me){for(Q=R+Q;R<Q;){var ve=P[R++];ae[me++]=255&ve,ae[me++]=ve>>8&255,ae[me++]=ve>>16&255}}function cr(P,R,Q,ae,me,ve){if(ve==0)for(Q=R+Q;R<Q;)pe(ae,((ve=P[R++])[0]>>24|ve[1]>>8&65280|ve[2]<<8&16711680|ve[3]<<24)>>>0),me+=32;else n(ae,me,P,R,Q)}function Pt(P,R){O[R][0]=O[P+"0"],O[R][1]=O[P+"1"],O[R][2]=O[P+"2"],O[R][3]=O[P+"3"],O[R][4]=O[P+"4"],O[R][5]=O[P+"5"],O[R][6]=O[P+"6"],O[R][7]=O[P+"7"],O[R][8]=O[P+"8"],O[R][9]=O[P+"9"],O[R][10]=O[P+"10"],O[R][11]=O[P+"11"],O[R][12]=O[P+"12"],O[R][13]=O[P+"13"],O[R][14]=O[P+"0"],O[R][15]=O[P+"0"]}function kt(P){return P==rf||P==rm||P==Dp||P==Rp}function zt(){this.eb=[],this.size=this.A=this.fb=0}function or(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Re(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new zt,this.f.kb=new or,this.sd=null}function Je(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function bt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function je(P,R){var Q=P.T,ae=R.ba.f.RGBA,me=ae.eb,ve=ae.fb+P.ka*ae.A,we=Ho[R.ba.S],Ne=P.y,ke=P.O,Pe=P.f,ze=P.N,it=P.ea,Oe=P.W,Ge=R.cc,rt=R.dc,wt=R.Mc,lt=R.Nc,gt=P.ka,yt=P.ka+P.T,_t=P.U,Et=_t+1>>1;for(gt==0?we(Ne,ke,null,null,Pe,ze,it,Oe,Pe,ze,it,Oe,me,ve,null,null,_t):(we(R.ec,R.fc,Ne,ke,Ge,rt,wt,lt,Pe,ze,it,Oe,me,ve-ae.A,me,ve,_t),++Q);gt+2<yt;gt+=2)Ge=Pe,rt=ze,wt=it,lt=Oe,ze+=P.Rc,Oe+=P.Rc,ve+=2*ae.A,we(Ne,(ke+=2*P.fa)-P.fa,Ne,ke,Ge,rt,wt,lt,Pe,ze,it,Oe,me,ve-ae.A,me,ve,_t);return ke+=P.fa,P.j+yt<P.o?(n(R.ec,R.fc,Ne,ke,_t),n(R.cc,R.dc,Pe,ze,Et),n(R.Mc,R.Nc,it,Oe,Et),Q--):1&yt||we(Ne,ke,null,null,Pe,ze,it,Oe,Pe,ze,it,Oe,me,ve+ae.A,null,null,_t),Q}function Ce(P,R,Q){var ae=P.F,me=[P.J];if(ae!=null){var ve=P.U,we=R.ba.S,Ne=we==$p||we==Dp;R=R.ba.f.RGBA;var ke=[0],Pe=P.ka;ke[0]=P.T,P.Kb&&(Pe==0?--ke[0]:(--Pe,me[0]-=P.width),P.j+P.ka+P.T==P.o&&(ke[0]=P.o-P.j-Pe));var ze=R.eb;Pe=R.fb+Pe*R.A,P=Op(ae,me[0],P.width,ve,ke,ze,Pe+(Ne?0:3),R.A),e(Q==ke),P&&kt(we)&&tm(ze,Pe,Ne,ve,ke,R.A)}return 0}function Qe(P){var R=P.ma,Q=R.ba.S,ae=11>Q,me=Q==Ku||Q==Ip||Q==$p||Q==qn||Q==12||kt(Q);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!Km(R.Oa,P,me?11:12))return 0;if(me&&kt(Q)&&Ag(),P.da)alert("todo:use_scaling");else{if(ae){if(R.Ib=gr,P.Kb){if(Q=P.U+1>>1,R.memory=i(P.U+2*Q),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+P.U,R.Mc=R.cc,R.Nc=R.dc+Q,R.Ib=je,Ag()}}else alert("todo:EmitYUV");me&&(R.Jb=Ce,ae&&Ul())}if(ae&&!zi){for(P=0;256>P;++P)Go[P]=89858*(P-128)+bc>>Kd,Yo[P]=-22014*(P-128)+bc,of[P]=-45773*(P-128),im[P]=113618*(P-128)+bc>>Kd;for(P=_n;P<Bn;++P)R=76283*(P-16)+bc>>Kd,Rg[P-_n]=$a(R,255),Xw[P-_n]=$a(R+8>>4,15);zi=1}return 1}function He(P){var R=P.ma,Q=P.U,ae=P.T;return e(!(1&P.ka)),0>=Q||0>=ae?0:(Q=R.Ib(P,R),R.Jb!=null&&R.Jb(P,R,Q),R.Dc+=Q,1)}function vt(P){P.ma.memory=null}function le(P,R,Q,ae){return q(P,8)!=47?0:(R[0]=q(P,14)+1,Q[0]=q(P,14)+1,ae[0]=q(P,1),q(P,3)!=0?0:!P.h)}function Ee(P,R){if(4>P)return P+1;var Q=P-2>>1;return(2+(1&P)<<Q)+q(R,Q)+1}function We(P,R){return 120<R?R-120:1<=(Q=((Q=D3[R-1])>>4)*P+(8-(15&Q)))?Q:1;var Q}function at(P,R,Q){var ae=K(Q),me=P[R+=255&ae].g-8;return 0<me&&(ne(Q,Q.u+8),ae=K(Q),R+=P[R].value,R+=ae&(1<<me)-1),ne(Q,Q.u+P[R].g),P[R].value}function nt(P,R,Q){return Q.g+=P.g,Q.value+=P.value<<R>>>0,e(8>=Q.g),P.g}function It(P,R,Q){var ae=P.xc;return e((R=ae==0?0:P.vc[P.md*(Q>>ae)+(R>>ae)])<P.Wb),P.Ya[R]}function vr(P,R,Q,ae){var me=P.ab,ve=P.c*R,we=P.C;R=we+R;var Ne=Q,ke=ae;for(ae=P.Ta,Q=P.Ua;0<me--;){var Pe=P.gc[me],ze=we,it=R,Oe=Ne,Ge=ke,rt=(ke=ae,Ne=Q,Pe.Ea);switch(e(ze<it),e(it<=Pe.nc),Pe.hc){case 2:Ha(Oe,Ge,(it-ze)*rt,ke,Ne);break;case 0:var wt=ze,lt=it,gt=ke,yt=Ne,_t=(Mr=Pe).Ea;wt==0&&(Hd(Oe,Ge,null,null,1,gt,yt),yr(Oe,Ge+1,0,0,_t-1,gt,yt+1),Ge+=_t,yt+=_t,++wt);for(var Et=1<<Mr.b,Kr=Et-1,Tr=Ue(_t,Mr.b),$s=Mr.K,Mr=Mr.w+(wt>>Mr.b)*Tr;wt<lt;){var Qs=$s,Ma=Mr,Ms=1;for(rd(Oe,Ge,gt,yt-_t,1,gt,yt);Ms<_t;){var Or=(Ms&~Kr)+Et;Or>_t&&(Or=_t),(0,Qh[Qs[Ma++]>>8&15])(Oe,Ge+ +Ms,gt,yt+Ms-_t,Or-Ms,gt,yt+Ms),Ms=Or}Ge+=_t,yt+=_t,++wt&Kr||(Mr+=Tr)}it!=Pe.nc&&n(ke,Ne-rt,ke,Ne+(it-ze-1)*rt,rt);break;case 1:for(rt=Oe,lt=Ge,_t=(Oe=Pe.Ea)-(yt=Oe&~(gt=(Ge=1<<Pe.b)-1)),wt=Ue(Oe,Pe.b),Et=Pe.K,Pe=Pe.w+(ze>>Pe.b)*wt;ze<it;){for(Kr=Et,Tr=Pe,$s=new Ot,Mr=lt+yt,Qs=lt+Oe;lt<Mr;)Vt(Kr[Tr++],$s),Qm($s,rt,lt,Ge,ke,Ne),lt+=Ge,Ne+=Ge;lt<Qs&&(Vt(Kr[Tr++],$s),Qm($s,rt,lt,_t,ke,Ne),lt+=_t,Ne+=_t),++ze&gt||(Pe+=wt)}break;case 3:if(Oe==ke&&Ge==Ne&&0<Pe.b){for(lt=ke,Oe=rt=Ne+(it-ze)*rt-(yt=(it-ze)*Ue(Pe.Ea,Pe.b)),Ge=ke,gt=Ne,wt=[],yt=(_t=yt)-1;0<=yt;--yt)wt[yt]=Ge[gt+yt];for(yt=_t-1;0<=yt;--yt)lt[Oe+yt]=wt[yt];Kh(Pe,ze,it,ke,rt,ke,Ne)}else Kh(Pe,ze,it,Oe,Ge,ke,Ne)}Ne=ae,ke=Q}ke!=Q&&n(ae,Q,Ne,ke,ve)}function Xt(P,R){var Q=P.V,ae=P.Ba+P.c*P.C,me=R-P.C;if(e(R<=P.l.o),e(16>=me),0<me){var ve=P.l,we=P.Ta,Ne=P.Ua,ke=ve.width;if(vr(P,me,Q,ae),me=Ne=[Ne],e((Q=P.C)<(ae=R)),e(ve.v<ve.va),ae>ve.o&&(ae=ve.o),Q<ve.j){var Pe=ve.j-Q;Q=ve.j,me[0]+=Pe*ke}if(Q>=ae?Q=0:(me[0]+=4*ve.v,ve.ka=Q-ve.j,ve.U=ve.va-ve.v,ve.T=ae-Q,Q=1),Q){if(Ne=Ne[0],11>(Q=P.ca).S){var ze=Q.f.RGBA,it=(ae=Q.S,me=ve.U,ve=ve.T,Pe=ze.eb,ze.A),Oe=ve;for(ze=ze.fb+P.Ma*ze.A;0<Oe--;){var Ge=we,rt=Ne,wt=me,lt=Pe,gt=ze;switch(ae){case Og:Zm(Ge,rt,wt,lt,gt);break;case Ku:Gd(Ge,rt,wt,lt,gt);break;case rf:Gd(Ge,rt,wt,lt,gt),tm(lt,gt,0,wt,1,0);break;case qw:Zh(Ge,rt,wt,lt,gt);break;case Ip:cr(Ge,rt,wt,lt,gt,1);break;case rm:cr(Ge,rt,wt,lt,gt,1),tm(lt,gt,0,wt,1,0);break;case $p:cr(Ge,rt,wt,lt,gt,0);break;case Dp:cr(Ge,rt,wt,lt,gt,0),tm(lt,gt,1,wt,1,0);break;case qn:Hu(Ge,rt,wt,lt,gt);break;case Rp:Hu(Ge,rt,wt,lt,gt),vy(lt,gt,wt,1,0);break;case Ig:Gu(Ge,rt,wt,lt,gt);break;default:e(0)}Ne+=ke,ze+=it}P.Ma+=ve}else alert("todo:EmitRescaledRowsYUVA");e(P.Ma<=Q.height)}}P.C=R,e(P.C<=P.i)}function Mt(P){var R;if(0<P.ua)return 0;for(R=0;R<P.Wb;++R){var Q=P.Ya[R].G,ae=P.Ya[R].H;if(0<Q[1][ae[1]+0].g||0<Q[2][ae[2]+0].g||0<Q[3][ae[3]+0].g)return 0}return 1}function Gt(P,R,Q,ae,me,ve){if(P.Z!=0){var we=P.qd,Ne=P.rd;for(e(ho[P.Z]!=null);R<Q;++R)ho[P.Z](we,Ne,ae,me,ae,me,ve),we=ae,Ne=me,me+=ve;P.qd=we,P.rd=Ne}}function Wt(P,R){var Q=P.l.ma,ae=Q.Z==0||Q.Z==1?P.l.j:P.C;if(ae=P.C<ae?ae:P.C,e(R<=P.l.o),R>ae){var me=P.l.width,ve=Q.ca,we=Q.tb+me*ae,Ne=P.V,ke=P.Ba+P.c*ae,Pe=P.gc;e(P.ab==1),e(Pe[0].hc==3),vc(Pe[0],ae,R,Ne,ke,ve,we),Gt(Q,ae,R,ve,we,me)}P.C=P.Ma=R}function xr(P,R,Q,ae,me,ve,we){var Ne=P.$/ae,ke=P.$%ae,Pe=P.m,ze=P.s,it=Q+P.$,Oe=it;me=Q+ae*me;var Ge=Q+ae*ve,rt=280+ze.ua,wt=P.Pb?Ne:16777216,lt=0<ze.ua?ze.Wa:null,gt=ze.wc,yt=it<Ge?It(ze,ke,Ne):null;e(P.C<ve),e(Ge<=me);var _t=!1;e:for(;;){for(;_t||it<Ge;){var Et=0;if(Ne>=wt){var Kr=it-Q;e((wt=P).Pb),wt.wd=wt.m,wt.xd=Kr,0<wt.s.ua&&Le(wt.s.Wa,wt.s.vb),wt=Ne+Dg}if(ke&gt||(yt=It(ze,ke,Ne)),e(yt!=null),yt.Qb&&(R[it]=yt.qb,_t=!0),!_t)if(ie(Pe),yt.jc){Et=Pe,Kr=R;var Tr=it,$s=yt.pd[K(Et)&zl-1];e(yt.jc),256>$s.g?(ne(Et,Et.u+$s.g),Kr[Tr]=$s.value,Et=0):(ne(Et,Et.u+$s.g-256),e(256<=$s.value),Et=$s.value),Et==0&&(_t=!0)}else Et=at(yt.G[0],yt.H[0],Pe);if(Pe.h)break;if(_t||256>Et){if(!_t)if(yt.nd)R[it]=(yt.qb|Et<<8)>>>0;else{if(ie(Pe),_t=at(yt.G[1],yt.H[1],Pe),ie(Pe),Kr=at(yt.G[2],yt.H[2],Pe),Tr=at(yt.G[3],yt.H[3],Pe),Pe.h)break;R[it]=(Tr<<24|_t<<16|Et<<8|Kr)>>>0}if(_t=!1,++it,++ke>=ae&&(ke=0,++Ne,we!=null&&Ne<=ve&&!(Ne%16)&&we(P,Ne),lt!=null))for(;Oe<it;)Et=R[Oe++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et}else if(280>Et){if(Et=Ee(Et-256,Pe),Kr=at(yt.G[4],yt.H[4],Pe),ie(Pe),Kr=We(ae,Kr=Ee(Kr,Pe)),Pe.h)break;if(it-Q<Kr||me-it<Et)break e;for(Tr=0;Tr<Et;++Tr)R[it+Tr]=R[it+Tr-Kr];for(it+=Et,ke+=Et;ke>=ae;)ke-=ae,++Ne,we!=null&&Ne<=ve&&!(Ne%16)&&we(P,Ne);if(e(it<=me),ke&gt&&(yt=It(ze,ke,Ne)),lt!=null)for(;Oe<it;)Et=R[Oe++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et}else{if(!(Et<rt))break e;for(_t=Et-280,e(lt!=null);Oe<it;)Et=R[Oe++],lt.X[(506832829*Et&4294967295)>>>lt.Mb]=Et;Et=it,e(!(_t>>>(Kr=lt).Xa)),R[Et]=Kr.X[_t],_t=!0}_t||e(Pe.h==se(Pe))}if(P.Pb&&Pe.h&&it<me)e(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&Le(P.s.vb,P.s.Wa);else{if(Pe.h)break e;we?.(P,Ne>ve?ve:Ne),P.a=0,P.$=it-Q}return 1}return P.a=3,0}function Cr(P){e(P!=null),P.vc=null,P.yc=null,P.Ya=null;var R=P.Wa;R!=null&&(R.X=null),P.vb=null,e(P!=null)}function Pr(){var P=new Yr;return P==null?null:(P.a=0,P.xb=nf,Pt("Predictor","VP8LPredictors"),Pt("Predictor","VP8LPredictors_C"),Pt("PredictorAdd","VP8LPredictorsAdd"),Pt("PredictorAdd","VP8LPredictorsAdd_C"),Ha=Zt,Qm=tr,Zm=Dr,Gd=Er,Hu=hr,Gu=Ct,Zh=is,O.VP8LMapColor32b=sd,O.VP8LMapColor8b=Xh,P)}function Gr(P,R,Q,ae,me){var ve=1,we=[P],Ne=[R],ke=ae.m,Pe=ae.s,ze=null,it=0;e:for(;;){if(Q)for(;ve&&q(ke,1);){var Oe=we,Ge=Ne,rt=ae,wt=1,lt=rt.m,gt=rt.gc[rt.ab],yt=q(lt,2);if(rt.Oc&1<<yt)ve=0;else{switch(rt.Oc|=1<<yt,gt.hc=yt,gt.Ea=Oe[0],gt.nc=Ge[0],gt.K=[null],++rt.ab,e(4>=rt.ab),yt){case 0:case 1:gt.b=q(lt,3)+2,wt=Gr(Ue(gt.Ea,gt.b),Ue(gt.nc,gt.b),0,rt,gt.K),gt.K=gt.K[0];break;case 3:var _t,Et=q(lt,8)+1,Kr=16<Et?0:4<Et?1:2<Et?2:3;if(Oe[0]=Ue(gt.Ea,Kr),gt.b=Kr,_t=wt=Gr(Et,1,0,rt,gt.K)){var Tr,$s=Et,Mr=gt,Qs=1<<(8>>Mr.b),Ma=i(Qs);if(Ma==null)_t=0;else{var Ms=Mr.K[0],Or=Mr.w;for(Ma[0]=Mr.K[0][0],Tr=1;Tr<1*$s;++Tr)Ma[Tr]=xt(Ms[Or+Tr],Ma[Tr-1]);for(;Tr<4*Qs;++Tr)Ma[Tr]=0;Mr.K[0]=null,Mr.K[0]=Ma,_t=1}}wt=_t;break;case 2:break;default:e(0)}ve=wt}}if(we=we[0],Ne=Ne[0],ve&&q(ke,1)&&!(ve=1<=(it=q(ke,4))&&11>=it)){ae.a=3;break e}var dr;if(dr=ve)t:{var Ga,vs,Gs,sa=ae,Pi=we,oi=Ne,Ea=it,vi=Q,Ti=sa.m,xa=sa.s,sn=[null],gn=1,ga=0,vn=Gw[Ea];r:for(;;){if(vi&&q(Ti,1)){var La=q(Ti,3)+2,Fa=Ue(Pi,La),Hn=Ue(oi,La),mo=Fa*Hn;if(!Gr(Fa,Hn,0,sa,sn))break r;for(sn=sn[0],xa.xc=La,Ga=0;Ga<mo;++Ga){var Un=sn[Ga]>>8&65535;sn[Ga]=Un,Un>=gn&&(gn=Un+1)}}if(Ti.h)break r;for(vs=0;5>vs;++vs){var Gn=sm[vs];!vs&&0<Ea&&(Gn+=1<<Ea),ga<Gn&&(ga=Gn)}var li=o(gn*vn,L),Vi=gn,Ko=o(Vi,M);if(Ko==null)var Ya=null;else e(65536>=Vi),Ya=Ko;var Ka=i(ga);if(Ya==null||Ka==null||li==null){sa.a=1;break r}var fo=li;for(Ga=Gs=0;Ga<gn;++Ga){var Yn=Ya[Ga],po=Yn.G,ql=Yn.H,wc=0,Oi=1,Xa=0;for(vs=0;5>vs;++vs){Gn=sm[vs],po[vs]=fo,ql[vs]=Gs,!vs&&0<Ea&&(Gn+=1<<Ea);n:{var Zu,Qd=Gn,lf=sa,id=Ka,Zw=fo,Py=Gs,ua=0,jc=lf.m,Ty=q(jc,1);if(a(id,0,0,Qd),Ty){var Oy=q(jc,1)+1,Mg=q(jc,1),Lg=q(jc,Mg==0?1:8);id[Lg]=1,Oy==2&&(id[Lg=q(jc,8)]=1);var od=1}else{var va=i(19),ci=q(jc,4)+4;if(19<ci){lf.a=3;var Qa=0;break n}for(Zu=0;Zu<ci;++Zu)va[$3[Zu]]=q(jc,3);var cf=void 0,Zd=void 0,df=lf,B3=va,yi=Qd,Fg=id,Up=0,ld=df.m,Nc=8,bl=o(128,L);s:for(;I(bl,0,7,B3,19);){if(q(ld,1)){var zp=2+2*q(ld,3);if((cf=2+q(ld,zp))>yi)break s}else cf=yi;for(Zd=0;Zd<yi&&cf--;){ie(ld);var Bg=bl[0+(127&K(ld))];ne(ld,ld.u+Bg.g);var Ju=Bg.value;if(16>Ju)Fg[Zd++]=Ju,Ju!=0&&(Nc=Ju);else{var Jw=Ju==16,Iy=Ju-16,e2=$g[Iy],$y=q(ld,Mp[Iy])+e2;if(Zd+$y>yi)break s;for(var t2=Jw?Nc:0;0<$y--;)Fg[Zd++]=t2}}Up=1;break s}Up||(df.a=3),od=Up}(od=od&&!jc.h)&&(ua=I(Zw,Py,8,id,Qd)),od&&ua!=0?Qa=ua:(lf.a=3,Qa=0)}if(Qa==0)break r;if(Oi&&Hw[vs]==1&&(Oi=fo[Gs].g==0),wc+=fo[Gs].g,Gs+=Qa,3>=vs){var uf,Ug=Ka[0];for(uf=1;uf<Gn;++uf)Ka[uf]>Ug&&(Ug=Ka[uf]);Xa+=Ug}}if(Yn.nd=Oi,Yn.Qb=0,Oi&&(Yn.qb=(po[3][ql[3]+0].value<<24|po[1][ql[1]+0].value<<16|po[2][ql[2]+0].value)>>>0,wc==0&&256>po[0][ql[0]+0].value&&(Yn.Qb=1,Yn.qb+=po[0][ql[0]+0].value<<8)),Yn.jc=!Yn.Qb&&6>Xa,Yn.jc){var Vp,wl=Yn;for(Vp=0;Vp<zl;++Vp){var Jd=Vp,Sc=wl.pd[Jd],lm=wl.G[0][wl.H[0]+Jd];256<=lm.value?(Sc.g=lm.g+256,Sc.value=lm.value):(Sc.g=0,Sc.value=0,Jd>>=nt(lm,8,Sc),Jd>>=nt(wl.G[1][wl.H[1]+Jd],16,Sc),Jd>>=nt(wl.G[2][wl.H[2]+Jd],0,Sc),nt(wl.G[3][wl.H[3]+Jd],24,Sc))}}}xa.vc=sn,xa.Wb=gn,xa.Ya=Ya,xa.yc=li,dr=1;break t}dr=0}if(!(ve=dr)){ae.a=3;break e}if(0<it){if(Pe.ua=1<<it,!Y(Pe.Wa,it)){ae.a=1,ve=0;break e}}else Pe.ua=0;var zg=ae,Vg=we,r2=Ne,Wg=zg.s,qg=Wg.xc;if(zg.c=Vg,zg.i=r2,Wg.md=Ue(Vg,qg),Wg.wc=qg==0?-1:(1<<qg)-1,Q){ae.xb=ad;break e}if((ze=i(we*Ne))==null){ae.a=1,ve=0;break e}ve=(ve=xr(ae,ze,0,we,Ne,Ne,null))&&!ke.h;break e}return ve?(me!=null?me[0]=ze:(e(ze==null),e(Q)),ae.$=0,Q||Cr(Pe)):Cr(Pe),ve}function os(P,R){var Q=P.c*P.i,ae=Q+R+16*R;return e(P.c<=R),P.V=i(ae),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+Q+R,1)}function ws(P,R){var Q=P.C,ae=R-Q,me=P.V,ve=P.Ba+P.c*Q;for(e(R<=P.l.o);0<ae;){var we=16<ae?16:ae,Ne=P.l.ma,ke=P.l.width,Pe=ke*we,ze=Ne.ca,it=Ne.tb+ke*Q,Oe=P.Ta,Ge=P.Ua;vr(P,we,me,ve),yy(Oe,Ge,ze,it,Pe),Gt(Ne,Q,Q+we,ze,it,ke),ae-=we,me+=we*P.c,Q+=we}e(Q==R),P.C=P.Ma=R}function Wa(){this.ub=this.yd=this.td=this.Rb=0}function xi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ao(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Vs(){this.Yb=(function(){var P=[];return(function R(Q,ae,me){for(var ve=me[ae],we=0;we<ve&&(Q.push(me.length>ae+1?[]:0),!(me.length<ae+1));we++)R(Q[we],ae+1,me)})(P,0,[3,11]),P})()}function Gc(){this.jb=i(3),this.Wc=l([4,8],Vs),this.Xc=l([4,17],Vs)}function io(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function da(){this.ld=this.La=this.dd=this.tc=0}function Eo(){this.Na=this.la=0}function qe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fs(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Xs(){this.uc=this.M=this.Nb=0,this.wa=Array(new da),this.Y=0,this.ya=Array(new Fs),this.aa=0,this.l=new es}function ta(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ts(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new Wa,this.Kc=new xi,this.ed=new io,this.Qa=new Ao,this.Ic=this.$c=this.Aa=0,this.D=new Xs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,U),this.ia=0,this.pb=o(4,qe),this.Pa=new Gc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ta),this.Hd=0,this.rb=Array(new Eo),this.sb=0,this.wa=Array(new da),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fs),this.L=this.aa=0,this.gd=l([4,2],da),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $l(){var P=new ts;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,nm||(nm=Vr)),P}function Fe(P,R,Q){return P.a==0&&(P.a=R,P.sc=Q,P.cb=0),0}function Kt(P,R,Q){return 3<=Q&&P[R+0]==157&&P[R+1]==1&&P[R+2]==42}function kr(P,R){if(P==null)return 0;if(P.a=0,P.sc="OK",R==null)return Fe(P,2,"null VP8Io passed to VP8GetHeaders()");var Q=R.data,ae=R.w,me=R.ha;if(4>me)return Fe(P,7,"Truncated header.");var ve=Q[ae+0]|Q[ae+1]<<8|Q[ae+2]<<16,we=P.Od;if(we.Rb=!(1&ve),we.td=ve>>1&7,we.yd=ve>>4&1,we.ub=ve>>5,3<we.td)return Fe(P,3,"Incorrect keyframe parameters.");if(!we.yd)return Fe(P,4,"Frame not displayable.");ae+=3,me-=3;var Ne=P.Kc;if(we.Rb){if(7>me)return Fe(P,7,"cannot parse picture header");if(!Kt(Q,ae,me))return Fe(P,3,"Bad code word");Ne.c=16383&(Q[ae+4]<<8|Q[ae+3]),Ne.Td=Q[ae+4]>>6,Ne.i=16383&(Q[ae+6]<<8|Q[ae+5]),Ne.Ud=Q[ae+6]>>6,ae+=7,me-=7,P.za=Ne.c+15>>4,P.Ub=Ne.i+15>>4,R.width=Ne.c,R.height=Ne.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,a((ve=P.Pa).jb,0,255,ve.jb.length),e((ve=P.Qa)!=null),ve.Cb=0,ve.Bb=0,ve.Fb=1,a(ve.Zb,0,0,ve.Zb.length),a(ve.Lb,0,0,ve.Lb)}if(we.ub>me)return Fe(P,7,"bad partition length");V(ve=P.m,Q,ae,we.ub),ae+=we.ub,me-=we.ub,we.Rb&&(Ne.Ld=ue(ve),Ne.Kd=ue(ve)),Ne=P.Qa;var ke,Pe=P.Pa;if(e(ve!=null),e(Ne!=null),Ne.Cb=ue(ve),Ne.Cb){if(Ne.Bb=ue(ve),ue(ve)){for(Ne.Fb=ue(ve),ke=0;4>ke;++ke)Ne.Zb[ke]=ue(ve)?F(ve,7):0;for(ke=0;4>ke;++ke)Ne.Lb[ke]=ue(ve)?F(ve,6):0}if(Ne.Bb)for(ke=0;3>ke;++ke)Pe.jb[ke]=ue(ve)?B(ve,8):255}else Ne.Bb=0;if(ve.Ka)return Fe(P,3,"cannot parse segment header");if((Ne=P.ed).zd=ue(ve),Ne.Tb=B(ve,6),Ne.wb=B(ve,3),Ne.Pc=ue(ve),Ne.Pc&&ue(ve)){for(Pe=0;4>Pe;++Pe)ue(ve)&&(Ne.vd[Pe]=F(ve,6));for(Pe=0;4>Pe;++Pe)ue(ve)&&(Ne.od[Pe]=F(ve,6))}if(P.L=Ne.Tb==0?0:Ne.zd?1:2,ve.Ka)return Fe(P,3,"cannot parse filter header");var ze=me;if(me=ke=ae,ae=ke+ze,Ne=ze,P.Xb=(1<<B(P.m,2))-1,ze<3*(Pe=P.Xb))Q=7;else{for(ke+=3*Pe,Ne-=3*Pe,ze=0;ze<Pe;++ze){var it=Q[me+0]|Q[me+1]<<8|Q[me+2]<<16;it>Ne&&(it=Ne),V(P.Jc[+ze],Q,ke,it),ke+=it,Ne-=it,me+=3}V(P.Jc[+Pe],Q,ke,Ne),Q=ke<ae?0:5}if(Q!=0)return Fe(P,Q,"cannot parse partitions");for(Q=B(ke=P.m,7),me=ue(ke)?F(ke,4):0,ae=ue(ke)?F(ke,4):0,Ne=ue(ke)?F(ke,4):0,Pe=ue(ke)?F(ke,4):0,ke=ue(ke)?F(ke,4):0,ze=P.Qa,it=0;4>it;++it){if(ze.Cb){var Oe=ze.Zb[it];ze.Fb||(Oe+=Q)}else{if(0<it){P.pb[it]=P.pb[0];continue}Oe=Q}var Ge=P.pb[it];Ge.Sc[0]=sf[$a(Oe+me,127)],Ge.Sc[1]=Lp[$a(Oe+0,127)],Ge.Eb[0]=2*sf[$a(Oe+ae,127)],Ge.Eb[1]=101581*Lp[$a(Oe+Ne,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=sf[$a(Oe+Pe,117)],Ge.Qc[1]=Lp[$a(Oe+ke,127)],Ge.lc=Oe+ke}if(!we.Rb)return Fe(P,4,"Not a key frame.");for(ue(ve),we=P.Pa,Q=0;4>Q;++Q){for(me=0;8>me;++me)for(ae=0;3>ae;++ae)for(Ne=0;11>Ne;++Ne)Pe=oe(ve,M3[Q][me][ae][Ne])?B(ve,8):Kw[Q][me][ae][Ne],we.Wc[Q][me].Yb[ae][Ne]=Pe;for(me=0;17>me;++me)we.Xc[Q][me]=we.Wc[Q][_y[me]]}return P.kc=ue(ve),P.kc&&(P.Bd=B(ve,8)),P.cb=1}function Vr(P,R,Q,ae,me,ve,we){var Ne=R[me].Yb[Q];for(Q=0;16>me;++me){if(!oe(P,Ne[Q+0]))return me;for(;!oe(P,Ne[Q+1]);)if(Ne=R[++me].Yb[0],Q=0,me==16)return 16;var ke=R[me+1].Yb;if(oe(P,Ne[Q+2])){var Pe=P,ze=0;if(oe(Pe,(Oe=Ne)[(it=Q)+3]))if(oe(Pe,Oe[it+6])){for(Ne=0,it=2*(ze=oe(Pe,Oe[it+8]))+(Oe=oe(Pe,Oe[it+9+ze])),ze=0,Oe=Cy[it];Oe[Ne];++Ne)ze+=ze+oe(Pe,Oe[Ne]);ze+=3+(8<<it)}else oe(Pe,Oe[it+7])?(ze=7+2*oe(Pe,165),ze+=oe(Pe,145)):ze=5+oe(Pe,159);else ze=oe(Pe,Oe[it+4])?3+oe(Pe,Oe[it+5]):2;Ne=ke[2]}else ze=1,Ne=ke[1];ke=we+ky[me],0>(Pe=P).b&&be(Pe);var it,Oe=Pe.b,Ge=(it=Pe.Ca>>1)-(Pe.I>>Oe)>>31;--Pe.b,Pe.Ca+=Ge,Pe.Ca|=1,Pe.I-=(it+1&Ge)<<Oe,ve[ke]=((ze^Ge)-Ge)*ae[(0<me)+0]}return 16}function gs(P){var R=P.rb[P.sb-1];R.la=0,R.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function dn(P,R,Q,ae,me){me=P[R+Q+32*ae]+(me>>3),P[R+Q+32*ae]=-256&me?0>me?0:255:me}function oo(P,R,Q,ae,me,ve){dn(P,R,0,Q,ae+me),dn(P,R,1,Q,ae+ve),dn(P,R,2,Q,ae-ve),dn(P,R,3,Q,ae-me)}function Hs(P){return(20091*P>>16)+P}function Po(P,R,Q,ae){var me,ve=0,we=i(16);for(me=0;4>me;++me){var Ne=P[R+0]+P[R+8],ke=P[R+0]-P[R+8],Pe=(35468*P[R+4]>>16)-Hs(P[R+12]),ze=Hs(P[R+4])+(35468*P[R+12]>>16);we[ve+0]=Ne+ze,we[ve+1]=ke+Pe,we[ve+2]=ke-Pe,we[ve+3]=Ne-ze,ve+=4,R++}for(me=ve=0;4>me;++me)Ne=(P=we[ve+0]+4)+we[ve+8],ke=P-we[ve+8],Pe=(35468*we[ve+4]>>16)-Hs(we[ve+12]),dn(Q,ae,0,0,Ne+(ze=Hs(we[ve+4])+(35468*we[ve+12]>>16))),dn(Q,ae,1,0,ke+Pe),dn(Q,ae,2,0,ke-Pe),dn(Q,ae,3,0,Ne-ze),ve++,ae+=32}function lo(P,R,Q,ae){var me=P[R+0]+4,ve=35468*P[R+4]>>16,we=Hs(P[R+4]),Ne=35468*P[R+1]>>16;oo(Q,ae,0,me+we,P=Hs(P[R+1]),Ne),oo(Q,ae,1,me+ve,P,Ne),oo(Q,ae,2,me-ve,P,Ne),oo(Q,ae,3,me-we,P,Ne)}function Yc(P,R,Q,ae,me){Po(P,R,Q,ae),me&&Po(P,R+16,Q,ae+4)}function Dl(P,R,Q,ae){Jh(P,R+0,Q,ae,1),Jh(P,R+32,Q,ae+128,1)}function Kc(P,R,Q,ae){var me;for(P=P[R+0]+4,me=0;4>me;++me)for(R=0;4>R;++R)dn(Q,ae,R,me,P)}function Vm(P,R,Q,ae){P[R+0]&&xn(P,R+0,Q,ae),P[R+16]&&xn(P,R+16,Q,ae+4),P[R+32]&&xn(P,R+32,Q,ae+128),P[R+48]&&xn(P,R+48,Q,ae+128+4)}function hn(P,R,Q,ae){var me,ve=i(16);for(me=0;4>me;++me){var we=P[R+0+me]+P[R+12+me],Ne=P[R+4+me]+P[R+8+me],ke=P[R+4+me]-P[R+8+me],Pe=P[R+0+me]-P[R+12+me];ve[0+me]=we+Ne,ve[8+me]=we-Ne,ve[4+me]=Pe+ke,ve[12+me]=Pe-ke}for(me=0;4>me;++me)we=(P=ve[0+4*me]+3)+ve[3+4*me],Ne=ve[1+4*me]+ve[2+4*me],ke=ve[1+4*me]-ve[2+4*me],Pe=P-ve[3+4*me],Q[ae+0]=we+Ne>>3,Q[ae+16]=Pe+ke>>3,Q[ae+32]=we-Ne>>3,Q[ae+48]=Pe-ke>>3,ae+=64}function Fd(P,R,Q){var ae,me=R-32,ve=To,we=255-P[me-1];for(ae=0;ae<Q;++ae){var Ne,ke=ve,Pe=we+P[R-1];for(Ne=0;Ne<Q;++Ne)P[R+Ne]=ke[Pe+P[me+Ne]];R+=32}}function Wm(P,R){Fd(P,R,4)}function jp(P,R){Fd(P,R,8)}function Sg(P,R){Fd(P,R,16)}function Cg(P,R){var Q;for(Q=0;16>Q;++Q)n(P,R+32*Q,P,R-32,16)}function qm(P,R){var Q;for(Q=16;0<Q;--Q)a(P,R,P[R-1],16),R+=32}function Bd(P,R,Q){var ae;for(ae=0;16>ae;++ae)a(R,Q+32*ae,P,16)}function fc(P,R){var Q,ae=16;for(Q=0;16>Q;++Q)ae+=P[R-1+32*Q]+P[R+Q-32];Bd(ae>>5,P,R)}function Xc(P,R){var Q,ae=8;for(Q=0;16>Q;++Q)ae+=P[R-1+32*Q];Bd(ae>>4,P,R)}function zo(P,R){var Q,ae=8;for(Q=0;16>Q;++Q)ae+=P[R+Q-32];Bd(ae>>4,P,R)}function Rl(P,R){Bd(128,P,R)}function ms(P,R,Q){return P+2*R+Q+2>>2}function Fh(P,R){var Q,ae=R-32;for(ae=new Uint8Array([ms(P[ae-1],P[ae+0],P[ae+1]),ms(P[ae+0],P[ae+1],P[ae+2]),ms(P[ae+1],P[ae+2],P[ae+3]),ms(P[ae+2],P[ae+3],P[ae+4])]),Q=0;4>Q;++Q)n(P,R+32*Q,ae,0,ae.length)}function Qc(P,R){var Q=P[R-1],ae=P[R-1+32],me=P[R-1+64],ve=P[R-1+96];pe(P,R+0,16843009*ms(P[R-1-32],Q,ae)),pe(P,R+32,16843009*ms(Q,ae,me)),pe(P,R+64,16843009*ms(ae,me,ve)),pe(P,R+96,16843009*ms(me,ve,ve))}function xy(P,R){var Q,ae=4;for(Q=0;4>Q;++Q)ae+=P[R+Q-32]+P[R-1+32*Q];for(ae>>=3,Q=0;4>Q;++Q)a(P,R+32*Q,ae,4)}function kg(P,R){var Q=P[R-1+0],ae=P[R-1+32],me=P[R-1+64],ve=P[R-1-32],we=P[R+0-32],Ne=P[R+1-32],ke=P[R+2-32],Pe=P[R+3-32];P[R+0+96]=ms(ae,me,P[R-1+96]),P[R+1+96]=P[R+0+64]=ms(Q,ae,me),P[R+2+96]=P[R+1+64]=P[R+0+32]=ms(ve,Q,ae),P[R+3+96]=P[R+2+64]=P[R+1+32]=P[R+0+0]=ms(we,ve,Q),P[R+3+64]=P[R+2+32]=P[R+1+0]=ms(Ne,we,ve),P[R+3+32]=P[R+2+0]=ms(ke,Ne,we),P[R+3+0]=ms(Pe,ke,Ne)}function xl(P,R){var Q=P[R+1-32],ae=P[R+2-32],me=P[R+3-32],ve=P[R+4-32],we=P[R+5-32],Ne=P[R+6-32],ke=P[R+7-32];P[R+0+0]=ms(P[R+0-32],Q,ae),P[R+1+0]=P[R+0+32]=ms(Q,ae,me),P[R+2+0]=P[R+1+32]=P[R+0+64]=ms(ae,me,ve),P[R+3+0]=P[R+2+32]=P[R+1+64]=P[R+0+96]=ms(me,ve,we),P[R+3+32]=P[R+2+64]=P[R+1+96]=ms(ve,we,Ne),P[R+3+64]=P[R+2+96]=ms(we,Ne,ke),P[R+3+96]=ms(Ne,ke,ke)}function Ud(P,R){var Q=P[R-1+0],ae=P[R-1+32],me=P[R-1+64],ve=P[R-1-32],we=P[R+0-32],Ne=P[R+1-32],ke=P[R+2-32],Pe=P[R+3-32];P[R+0+0]=P[R+1+64]=ve+we+1>>1,P[R+1+0]=P[R+2+64]=we+Ne+1>>1,P[R+2+0]=P[R+3+64]=Ne+ke+1>>1,P[R+3+0]=ke+Pe+1>>1,P[R+0+96]=ms(me,ae,Q),P[R+0+64]=ms(ae,Q,ve),P[R+0+32]=P[R+1+96]=ms(Q,ve,we),P[R+1+32]=P[R+2+96]=ms(ve,we,Ne),P[R+2+32]=P[R+3+96]=ms(we,Ne,ke),P[R+3+32]=ms(Ne,ke,Pe)}function _g(P,R){var Q=P[R+0-32],ae=P[R+1-32],me=P[R+2-32],ve=P[R+3-32],we=P[R+4-32],Ne=P[R+5-32],ke=P[R+6-32],Pe=P[R+7-32];P[R+0+0]=Q+ae+1>>1,P[R+1+0]=P[R+0+64]=ae+me+1>>1,P[R+2+0]=P[R+1+64]=me+ve+1>>1,P[R+3+0]=P[R+2+64]=ve+we+1>>1,P[R+0+32]=ms(Q,ae,me),P[R+1+32]=P[R+0+96]=ms(ae,me,ve),P[R+2+32]=P[R+1+96]=ms(me,ve,we),P[R+3+32]=P[R+2+96]=ms(ve,we,Ne),P[R+3+64]=ms(we,Ne,ke),P[R+3+96]=ms(Ne,ke,Pe)}function Hm(P,R){var Q=P[R-1+0],ae=P[R-1+32],me=P[R-1+64],ve=P[R-1+96];P[R+0+0]=Q+ae+1>>1,P[R+2+0]=P[R+0+32]=ae+me+1>>1,P[R+2+32]=P[R+0+64]=me+ve+1>>1,P[R+1+0]=ms(Q,ae,me),P[R+3+0]=P[R+1+32]=ms(ae,me,ve),P[R+3+32]=P[R+1+64]=ms(me,ve,ve),P[R+3+64]=P[R+2+64]=P[R+0+96]=P[R+1+96]=P[R+2+96]=P[R+3+96]=ve}function Bh(P,R){var Q=P[R-1+0],ae=P[R-1+32],me=P[R-1+64],ve=P[R-1+96],we=P[R-1-32],Ne=P[R+0-32],ke=P[R+1-32],Pe=P[R+2-32];P[R+0+0]=P[R+2+32]=Q+we+1>>1,P[R+0+32]=P[R+2+64]=ae+Q+1>>1,P[R+0+64]=P[R+2+96]=me+ae+1>>1,P[R+0+96]=ve+me+1>>1,P[R+3+0]=ms(Ne,ke,Pe),P[R+2+0]=ms(we,Ne,ke),P[R+1+0]=P[R+3+32]=ms(Q,we,Ne),P[R+1+32]=P[R+3+64]=ms(ae,Q,we),P[R+1+64]=P[R+3+96]=ms(me,ae,Q),P[R+1+96]=ms(ve,me,ae)}function Np(P,R){var Q;for(Q=0;8>Q;++Q)n(P,R+32*Q,P,R-32,8)}function pc(P,R){var Q;for(Q=0;8>Q;++Q)a(P,R,P[R-1],8),R+=32}function Zc(P,R,Q){var ae;for(ae=0;8>ae;++ae)a(R,Q+32*ae,P,8)}function xc(P,R){var Q,ae=8;for(Q=0;8>Q;++Q)ae+=P[R+Q-32]+P[R-1+32*Q];Zc(ae>>4,P,R)}function Gm(P,R){var Q,ae=4;for(Q=0;8>Q;++Q)ae+=P[R+Q-32];Zc(ae>>3,P,R)}function Sp(P,R){var Q,ae=4;for(Q=0;8>Q;++Q)ae+=P[R-1+32*Q];Zc(ae>>3,P,R)}function Cp(P,R){Zc(128,P,R)}function zd(P,R,Q){var ae=P[R-Q],me=P[R+0],ve=3*(me-ae)+nd[1020+P[R-2*Q]-P[R+Q]],we=tf[112+(ve+4>>3)];P[R-Q]=To[255+ae+tf[112+(ve+3>>3)]],P[R+0]=To[255+me-we]}function Jc(P,R,Q,ae){var me=P[R+0],ve=P[R+Q];return Vl[255+P[R-2*Q]-P[R-Q]]>ae||Vl[255+ve-me]>ae}function Uh(P,R,Q,ae){return 4*Vl[255+P[R-Q]-P[R+0]]+Vl[255+P[R-2*Q]-P[R+Q]]<=ae}function zh(P,R,Q,ae,me){var ve=P[R-3*Q],we=P[R-2*Q],Ne=P[R-Q],ke=P[R+0],Pe=P[R+Q],ze=P[R+2*Q],it=P[R+3*Q];return 4*Vl[255+Ne-ke]+Vl[255+we-Pe]>ae?0:Vl[255+P[R-4*Q]-ve]<=me&&Vl[255+ve-we]<=me&&Vl[255+we-Ne]<=me&&Vl[255+it-ze]<=me&&Vl[255+ze-Pe]<=me&&Vl[255+Pe-ke]<=me}function Ml(P,R,Q,ae){var me=2*ae+1;for(ae=0;16>ae;++ae)Uh(P,R+ae,Q,me)&&zd(P,R+ae,Q)}function Vd(P,R,Q,ae){var me=2*ae+1;for(ae=0;16>ae;++ae)Uh(P,R+ae*Q,1,me)&&zd(P,R+ae*Q,1)}function Vh(P,R,Q,ae){var me;for(me=3;0<me;--me)Ml(P,R+=4*Q,Q,ae)}function kp(P,R,Q,ae){var me;for(me=3;0<me;--me)Vd(P,R+=4,Q,ae)}function Ll(P,R,Q,ae,me,ve,we,Ne){for(ve=2*ve+1;0<me--;){if(zh(P,R,Q,ve,we))if(Jc(P,R,Q,Ne))zd(P,R,Q);else{var ke=P,Pe=R,ze=Q,it=ke[Pe-2*ze],Oe=ke[Pe-ze],Ge=ke[Pe+0],rt=ke[Pe+ze],wt=ke[Pe+2*ze],lt=27*(yt=nd[1020+3*(Ge-Oe)+nd[1020+it-rt]])+63>>7,gt=18*yt+63>>7,yt=9*yt+63>>7;ke[Pe-3*ze]=To[255+ke[Pe-3*ze]+yt],ke[Pe-2*ze]=To[255+it+gt],ke[Pe-ze]=To[255+Oe+lt],ke[Pe+0]=To[255+Ge-lt],ke[Pe+ze]=To[255+rt-gt],ke[Pe+2*ze]=To[255+wt-yt]}R+=ae}}function Fl(P,R,Q,ae,me,ve,we,Ne){for(ve=2*ve+1;0<me--;){if(zh(P,R,Q,ve,we))if(Jc(P,R,Q,Ne))zd(P,R,Q);else{var ke=P,Pe=R,ze=Q,it=ke[Pe-ze],Oe=ke[Pe+0],Ge=ke[Pe+ze],rt=tf[112+(4+(wt=3*(Oe-it))>>3)],wt=tf[112+(wt+3>>3)],lt=rt+1>>1;ke[Pe-2*ze]=To[255+ke[Pe-2*ze]+lt],ke[Pe-ze]=To[255+it+wt],ke[Pe+0]=To[255+Oe-rt],ke[Pe+ze]=To[255+Ge-lt]}R+=ae}}function _p(P,R,Q,ae,me,ve){Ll(P,R,Q,1,16,ae,me,ve)}function co(P,R,Q,ae,me,ve){Ll(P,R,1,Q,16,ae,me,ve)}function Bl(P,R,Q,ae,me,ve){var we;for(we=3;0<we;--we)Fl(P,R+=4*Q,Q,1,16,ae,me,ve)}function Ym(P,R,Q,ae,me,ve){var we;for(we=3;0<we;--we)Fl(P,R+=4,1,Q,16,ae,me,ve)}function H(P,R,Q,ae,me,ve,we,Ne){Ll(P,R,me,1,8,ve,we,Ne),Ll(Q,ae,me,1,8,ve,we,Ne)}function fe(P,R,Q,ae,me,ve,we,Ne){Ll(P,R,1,me,8,ve,we,Ne),Ll(Q,ae,1,me,8,ve,we,Ne)}function Ie(P,R,Q,ae,me,ve,we,Ne){Fl(P,R+4*me,me,1,8,ve,we,Ne),Fl(Q,ae+4*me,me,1,8,ve,we,Ne)}function Be(P,R,Q,ae,me,ve,we,Ne){Fl(P,R+4,1,me,8,ve,we,Ne),Fl(Q,ae+4,1,me,8,ve,we,Ne)}function et(){this.ba=new Re,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new bt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ut(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rr(){this.ua=0,this.Wa=new xe,this.vb=new xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new L}function Yr(){this.xb=this.a=0,this.l=new es,this.ca=new Re,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rr,this.ab=0,this.gc=o(4,Ut),this.Oc=0}function js(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ns(P,R,Q,ae,me,ve,we){for(P=P==null?0:P[R+0],R=0;R<we;++R)me[ve+R]=P+Q[ae+R]&255,P=me[ve+R]}function pn(P,R,Q,ae,me,ve,we){var Ne;if(P==null)Ns(null,null,Q,ae,me,ve,we);else for(Ne=0;Ne<we;++Ne)me[ve+Ne]=P[R+Ne]+Q[ae+Ne]&255}function Aa(P,R,Q,ae,me,ve,we){if(P==null)Ns(null,null,Q,ae,me,ve,we);else{var Ne,ke=P[R+0],Pe=ke,ze=ke;for(Ne=0;Ne<we;++Ne)Pe=ze+(ke=P[R+Ne])-Pe,ze=Q[ae+Ne]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=ke,me[ve+Ne]=ze}}function ai(P,R,Q,ae){var me=R.width,ve=R.o;if(e(P!=null&&R!=null),0>Q||0>=ae||Q+ae>ve)return null;if(!P.Cc){if(P.ga==null){var we;if(P.ga=new js,(we=P.ga==null)||(we=R.width*R.o,e(P.Gb.length==0),P.Gb=i(we),P.Uc=0,P.Gb==null?we=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,we=1),we=!we),!we){we=P.ga;var Ne=P.Fa,ke=P.P,Pe=P.qc,ze=P.mb,it=P.nb,Oe=ke+1,Ge=Pe-1,rt=we.l;if(e(Ne!=null&&ze!=null&&R!=null),ho[0]=null,ho[1]=Ns,ho[2]=pn,ho[3]=Aa,we.ca=ze,we.tb=it,we.c=R.width,we.i=R.height,e(0<we.c&&0<we.i),1>=Pe)R=0;else if(we.$a=3&Ne[ke+0],we.Z=Ne[ke+0]>>2&3,we.Lc=Ne[ke+0]>>4&3,ke=Ne[ke+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||ke)R=0;else if(rt.put=He,rt.ac=Qe,rt.bc=vt,rt.ma=we,rt.width=R.width,rt.height=R.height,rt.Da=R.Da,rt.v=R.v,rt.va=R.va,rt.j=R.j,rt.o=R.o,we.$a)e:{e(we.$a==1),R=Pr();t:for(;;){if(R==null){R=0;break e}if(e(we!=null),we.mc=R,R.c=we.c,R.i=we.i,R.l=we.l,R.l.ma=we,R.l.width=we.c,R.l.height=we.i,R.a=0,J(R.m,Ne,Oe,Ge),!Gr(we.c,we.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&Mt(R.s)?(we.ic=1,Ne=R.c*R.i,R.Ta=null,R.Ua=0,R.V=i(Ne),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(we.ic=0,R=os(R,we.c)),!R))break t;R=1;break e}we.mc=null,R=0}else R=Ge>=we.c*we.i;we=!R}if(we)return null;P.ga.Lc!=1?P.Ga=0:ae=ve-Q}e(P.ga!=null),e(Q+ae<=ve);e:{if(R=(Ne=P.ga).c,ve=Ne.l.o,Ne.$a==0){if(Oe=P.rc,Ge=P.Vc,rt=P.Fa,ke=P.P+1+Q*R,Pe=P.mb,ze=P.nb+Q*R,e(ke<=P.P+P.qc),Ne.Z!=0)for(e(ho[Ne.Z]!=null),we=0;we<ae;++we)ho[Ne.Z](Oe,Ge,rt,ke,Pe,ze,R),Oe=Pe,Ge=ze,ze+=R,ke+=R;else for(we=0;we<ae;++we)n(Pe,ze,rt,ke,R),Oe=Pe,Ge=ze,ze+=R,ke+=R;P.rc=Oe,P.Vc=Ge}else{if(e(Ne.mc!=null),R=Q+ae,e((we=Ne.mc)!=null),e(R<=we.i),we.C>=R)R=1;else if(Ne.ic||Ul(),Ne.ic){Ne=we.V,Oe=we.Ba,Ge=we.c;var wt=we.i,lt=(rt=1,ke=we.$/Ge,Pe=we.$%Ge,ze=we.m,it=we.s,we.$),gt=Ge*wt,yt=Ge*R,_t=it.wc,Et=lt<yt?It(it,Pe,ke):null;e(lt<=gt),e(R<=wt),e(Mt(it));t:for(;;){for(;!ze.h&&lt<yt;){if(Pe&_t||(Et=It(it,Pe,ke)),e(Et!=null),ie(ze),256>(wt=at(Et.G[0],Et.H[0],ze)))Ne[Oe+lt]=wt,++lt,++Pe>=Ge&&(Pe=0,++ke<=R&&!(ke%16)&&Wt(we,ke));else{if(!(280>wt)){rt=0;break t}wt=Ee(wt-256,ze);var Kr,Tr=at(Et.G[4],Et.H[4],ze);if(ie(ze),!(lt>=(Tr=We(Ge,Tr=Ee(Tr,ze)))&&gt-lt>=wt)){rt=0;break t}for(Kr=0;Kr<wt;++Kr)Ne[Oe+lt+Kr]=Ne[Oe+lt+Kr-Tr];for(lt+=wt,Pe+=wt;Pe>=Ge;)Pe-=Ge,++ke<=R&&!(ke%16)&&Wt(we,ke);lt<yt&&Pe&_t&&(Et=It(it,Pe,ke))}e(ze.h==se(ze))}Wt(we,ke>R?R:ke);break t}!rt||ze.h&&lt<gt?(rt=0,we.a=ze.h?5:3):we.$=lt,R=rt}else R=xr(we,we.V,we.Ba,we.c,we.i,R,ws);if(!R){ae=0;break e}}Q+ae>=ve&&(P.Cc=1),ae=1}if(!ae)return null;if(P.Cc&&((ae=P.ga)!=null&&(ae.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+Q*me}function ra(P,R,Q,ae,me,ve){for(;0<me--;){var we,Ne=P,ke=R+(Q?1:0),Pe=P,ze=R+(Q?0:3);for(we=0;we<ae;++we){var it=Pe[ze+4*we];it!=255&&(it*=32897,Ne[ke+4*we+0]=Ne[ke+4*we+0]*it>>23,Ne[ke+4*we+1]=Ne[ke+4*we+1]*it>>23,Ne[ke+4*we+2]=Ne[ke+4*we+2]*it>>23)}R+=ve}}function gi(P,R,Q,ae,me){for(;0<ae--;){var ve;for(ve=0;ve<Q;++ve){var we=P[R+2*ve+0],Ne=15&(Pe=P[R+2*ve+1]),ke=4369*Ne,Pe=(240&Pe|Pe>>4)*ke>>16;P[R+2*ve+0]=(240&we|we>>4)*ke>>16&240|(15&we|we<<4)*ke>>16>>4&15,P[R+2*ve+1]=240&Pe|Ne}R+=me}}function qa(P,R,Q,ae,me,ve,we,Ne){var ke,Pe,ze=255;for(Pe=0;Pe<me;++Pe){for(ke=0;ke<ae;++ke){var it=P[R+ke];ve[we+4*ke]=it,ze&=it}R+=Q,we+=Ne}return ze!=255}function Ui(P,R,Q,ae,me){var ve;for(ve=0;ve<me;++ve)Q[ae+ve]=P[R+ve]>>8}function Ul(){tm=ra,vy=gi,Op=qa,yy=Ui}function Vo(P,R,Q){O[P]=function(ae,me,ve,we,Ne,ke,Pe,ze,it,Oe,Ge,rt,wt,lt,gt,yt,_t){var Et,Kr=_t-1>>1,Tr=Ne[ke+0]|Pe[ze+0]<<16,$s=it[Oe+0]|Ge[rt+0]<<16;e(ae!=null);var Mr=3*Tr+$s+131074>>2;for(R(ae[me+0],255&Mr,Mr>>16,wt,lt),ve!=null&&(Mr=3*$s+Tr+131074>>2,R(ve[we+0],255&Mr,Mr>>16,gt,yt)),Et=1;Et<=Kr;++Et){var Qs=Ne[ke+Et]|Pe[ze+Et]<<16,Ma=it[Oe+Et]|Ge[rt+Et]<<16,Ms=Tr+Qs+$s+Ma+524296,Or=Ms+2*(Qs+$s)>>3;Mr=Or+Tr>>1,Tr=(Ms=Ms+2*(Tr+Ma)>>3)+Qs>>1,R(ae[me+2*Et-1],255&Mr,Mr>>16,wt,lt+(2*Et-1)*Q),R(ae[me+2*Et-0],255&Tr,Tr>>16,wt,lt+(2*Et-0)*Q),ve!=null&&(Mr=Ms+$s>>1,Tr=Or+Ma>>1,R(ve[we+2*Et-1],255&Mr,Mr>>16,gt,yt+(2*Et-1)*Q),R(ve[we+2*Et+0],255&Tr,Tr>>16,gt,yt+(2*Et+0)*Q)),Tr=Qs,$s=Ma}1&_t||(Mr=3*Tr+$s+131074>>2,R(ae[me+_t-1],255&Mr,Mr>>16,wt,lt+(_t-1)*Q),ve!=null&&(Mr=3*$s+Tr+131074>>2,R(ve[we+_t-1],255&Mr,Mr>>16,gt,yt+(_t-1)*Q)))}}function Ag(){Ho[Og]=L3,Ho[Ku]=Xu,Ho[qw]=F3,Ho[Ip]=af,Ho[$p]=am,Ho[qn]=Fp,Ho[Ig]=Ay,Ho[rf]=Xu,Ho[rm]=af,Ho[Dp]=am,Ho[Rp]=Fp}function Uu(P){return P&-16384?0>P?0:255:P>>Qu}function Wh(P,R){return Uu((19077*P>>8)+(26149*R>>8)-14234)}function zu(P,R,Q){return Uu((19077*P>>8)-(6419*R>>8)-(13320*Q>>8)+8708)}function qh(P,R){return Uu((19077*P>>8)+(33050*R>>8)-17685)}function Vu(P,R,Q,ae,me){ae[me+0]=Wh(P,Q),ae[me+1]=zu(P,R,Q),ae[me+2]=qh(P,R)}function Hh(P,R,Q,ae,me){ae[me+0]=qh(P,R),ae[me+1]=zu(P,R,Q),ae[me+2]=Wh(P,Q)}function uo(P,R,Q,ae,me){var ve=zu(P,R,Q);R=ve<<3&224|qh(P,R)>>3,ae[me+0]=248&Wh(P,Q)|ve>>5,ae[me+1]=R}function Gh(P,R,Q,ae,me){var ve=240&qh(P,R)|15;ae[me+0]=240&Wh(P,Q)|zu(P,R,Q)>>4,ae[me+1]=ve}function Yh(P,R,Q,ae,me){ae[me+0]=255,Vu(P,R,Q,ae,me+1)}function Ap(P,R,Q,ae,me){Hh(P,R,Q,ae,me),ae[me+3]=255}function Ep(P,R,Q,ae,me){Vu(P,R,Q,ae,me),ae[me+3]=255}function $a(P,R){return 0>P?0:P>R?R:P}function gc(P,R,Q){O[P]=function(ae,me,ve,we,Ne,ke,Pe,ze,it){for(var Oe=ze+(-2&it)*Q;ze!=Oe;)R(ae[me+0],ve[we+0],Ne[ke+0],Pe,ze),R(ae[me+1],ve[we+0],Ne[ke+0],Pe,ze+Q),me+=2,++we,++ke,ze+=2*Q;1&it&&R(ae[me+0],ve[we+0],Ne[ke+0],Pe,ze)}}function ed(P,R,Q){return Q==0?P==0?R==0?6:5:R==0?4:0:Q}function Eg(P,R,Q,ae,me){switch(P>>>30){case 3:Jh(R,Q,ae,me,0);break;case 2:Da(R,Q,ae,me);break;case 1:xn(R,Q,ae,me)}}function gl(P,R){var Q,ae,me=R.M,ve=R.Nb,we=P.oc,Ne=P.pc+40,ke=P.oc,Pe=P.pc+584,ze=P.oc,it=P.pc+600;for(Q=0;16>Q;++Q)we[Ne+32*Q-1]=129;for(Q=0;8>Q;++Q)ke[Pe+32*Q-1]=129,ze[it+32*Q-1]=129;for(0<me?we[Ne-1-32]=ke[Pe-1-32]=ze[it-1-32]=129:(a(we,Ne-32-1,127,21),a(ke,Pe-32-1,127,9),a(ze,it-32-1,127,9)),ae=0;ae<P.za;++ae){var Oe=R.ya[R.aa+ae];if(0<ae){for(Q=-1;16>Q;++Q)n(we,Ne+32*Q-4,we,Ne+32*Q+12,4);for(Q=-1;8>Q;++Q)n(ke,Pe+32*Q-4,ke,Pe+32*Q+4,4),n(ze,it+32*Q-4,ze,it+32*Q+4,4)}var Ge=P.Gd,rt=P.Hd+ae,wt=Oe.ad,lt=Oe.Hc;if(0<me&&(n(we,Ne-32,Ge[rt].y,0,16),n(ke,Pe-32,Ge[rt].f,0,8),n(ze,it-32,Ge[rt].ea,0,8)),Oe.Za){var gt=we,yt=Ne-32+16;for(0<me&&(ae>=P.za-1?a(gt,yt,Ge[rt].y[15],4):n(gt,yt,Ge[rt+1].y,0,4)),Q=0;4>Q;Q++)gt[yt+128+Q]=gt[yt+256+Q]=gt[yt+384+Q]=gt[yt+0+Q];for(Q=0;16>Q;++Q,lt<<=2)gt=we,yt=Ne+Ey[Q],Wl[Oe.Ob[Q]](gt,yt),Eg(lt,wt,16*+Q,gt,yt)}else if(gt=ed(ae,me,Oe.Ob[0]),Oo[gt](we,Ne),lt!=0)for(Q=0;16>Q;++Q,lt<<=2)Eg(lt,wt,16*+Q,we,Ne+Ey[Q]);for(Q=Oe.Gc,gt=ed(ae,me,Oe.Dd),qo[gt](ke,Pe),qo[gt](ze,it),lt=wt,gt=ke,yt=Pe,255&(Oe=0|Q)&&(170&Oe?Wo(lt,256,gt,yt):Fn(lt,256,gt,yt)),Oe=ze,lt=it,255&(Q>>=8)&&(170&Q?Wo(wt,320,Oe,lt):Fn(wt,320,Oe,lt)),me<P.Ub-1&&(n(Ge[rt].y,0,we,Ne+480,16),n(Ge[rt].f,0,ke,Pe+224,8),n(Ge[rt].ea,0,ze,it+224,8)),Q=8*ve*P.B,Ge=P.sa,rt=P.ta+16*ae+16*ve*P.R,wt=P.qa,Oe=P.ra+8*ae+Q,lt=P.Ha,gt=P.Ia+8*ae+Q,Q=0;16>Q;++Q)n(Ge,rt+Q*P.R,we,Ne+32*Q,16);for(Q=0;8>Q;++Q)n(wt,Oe+Q*P.B,ke,Pe+32*Q,8),n(lt,gt+Q*P.B,ze,it+32*Q,8)}}function Wu(P,R,Q,ae,me,ve,we,Ne,ke){var Pe=[0],ze=[0],it=0,Oe=ke!=null?ke.kd:0,Ge=ke??new Nt;if(P==null||12>Q)return 7;Ge.data=P,Ge.w=R,Ge.ha=Q,R=[R],Q=[Q],Ge.gb=[Ge.gb];e:{var rt=R,wt=Q,lt=Ge.gb;if(e(P!=null),e(wt!=null),e(lt!=null),lt[0]=0,12<=wt[0]&&!s(P,rt[0],"RIFF")){if(s(P,rt[0]+8,"WEBP")){lt=3;break e}var gt=Se(P,rt[0]+4);if(12>gt||4294967286<gt){lt=3;break e}if(Oe&&gt>wt[0]-8){lt=7;break e}lt[0]=gt,rt[0]+=12,wt[0]-=12}lt=0}if(lt!=0)return lt;for(gt=0<Ge.gb[0],Q=Q[0];;){e:{var yt=P;wt=R,lt=Q;var _t=Pe,Et=ze,Kr=rt=[0];if((Mr=it=[it])[0]=0,8>lt[0])lt=7;else{if(!s(yt,wt[0],"VP8X")){if(Se(yt,wt[0]+4)!=10){lt=3;break e}if(18>lt[0]){lt=7;break e}var Tr=Se(yt,wt[0]+8),$s=1+$e(yt,wt[0]+12);if(2147483648<=$s*(yt=1+$e(yt,wt[0]+15))){lt=3;break e}Kr!=null&&(Kr[0]=Tr),_t!=null&&(_t[0]=$s),Et!=null&&(Et[0]=yt),wt[0]+=18,lt[0]-=18,Mr[0]=1}lt=0}}if(it=it[0],rt=rt[0],lt!=0)return lt;if(wt=!!(2&rt),!gt&&it)return 3;if(ve!=null&&(ve[0]=!!(16&rt)),we!=null&&(we[0]=wt),Ne!=null&&(Ne[0]=0),we=Pe[0],rt=ze[0],it&&wt&&ke==null){lt=0;break}if(4>Q){lt=7;break}if(gt&&it||!gt&&!it&&!s(P,R[0],"ALPH")){Q=[Q],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Tr=P,lt=R,gt=Q;var Mr=Ge.gb;_t=Ge.na,Et=Ge.P,Kr=Ge.Sa,$s=22,e(Tr!=null),e(gt!=null),yt=lt[0];var Qs=gt[0];for(e(_t!=null),e(Kr!=null),_t[0]=null,Et[0]=null,Kr[0]=0;;){if(lt[0]=yt,gt[0]=Qs,8>Qs){lt=7;break e}var Ma=Se(Tr,yt+4);if(4294967286<Ma){lt=3;break e}var Ms=8+Ma+1&-2;if($s+=Ms,0<Mr&&$s>Mr){lt=3;break e}if(!s(Tr,yt,"VP8 ")||!s(Tr,yt,"VP8L")){lt=0;break e}if(Qs[0]<Ms){lt=7;break e}s(Tr,yt,"ALPH")||(_t[0]=Tr,Et[0]=yt+8,Kr[0]=Ma),yt+=Ms,Qs-=Ms}}if(Q=Q[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],lt!=0)break}Q=[Q],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Mr=P,lt=R,gt=Q,_t=Ge.gb[0],Et=Ge.Ja,Kr=Ge.xa,Tr=lt[0],yt=!s(Mr,Tr,"VP8 "),$s=!s(Mr,Tr,"VP8L"),e(Mr!=null),e(gt!=null),e(Et!=null),e(Kr!=null),8>gt[0])lt=7;else{if(yt||$s){if(Mr=Se(Mr,Tr+4),12<=_t&&Mr>_t-12){lt=3;break e}if(Oe&&Mr>gt[0]-8){lt=7;break e}Et[0]=Mr,lt[0]+=8,gt[0]-=8,Kr[0]=$s}else Kr[0]=5<=gt[0]&&Mr[Tr+0]==47&&!(Mr[Tr+4]>>5),Et[0]=gt[0];lt=0}if(Q=Q[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],R=R[0],lt!=0)break;if(4294967286<Ge.Ja)return 3;if(Ne==null||wt||(Ne[0]=Ge.xa?2:1),we=[we],rt=[rt],Ge.xa){if(5>Q){lt=7;break}Ne=we,Oe=rt,wt=ve,P==null||5>Q?P=0:5<=Q&&P[R+0]==47&&!(P[R+4]>>5)?(gt=[0],Mr=[0],_t=[0],J(Et=new Z,P,R,Q),le(Et,gt,Mr,_t)?(Ne!=null&&(Ne[0]=gt[0]),Oe!=null&&(Oe[0]=Mr[0]),wt!=null&&(wt[0]=_t[0]),P=1):P=0):P=0}else{if(10>Q){lt=7;break}Ne=rt,P==null||10>Q||!Kt(P,R+3,Q-3)?P=0:(Oe=P[R+0]|P[R+1]<<8|P[R+2]<<16,wt=16383&(P[R+7]<<8|P[R+6]),P=16383&(P[R+9]<<8|P[R+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ge.Ja||!wt||!P?P=0:(we&&(we[0]=wt),Ne&&(Ne[0]=P),P=1))}if(!P||(we=we[0],rt=rt[0],it&&(Pe[0]!=we||ze[0]!=rt)))return 3;ke!=null&&(ke[0]=Ge,ke.offset=R-ke.w,e(4294967286>R-ke.w),e(ke.offset==ke.ha-Q));break}return lt==0||lt==7&&it&&ke==null?(ve!=null&&(ve[0]|=Ge.na!=null&&0<Ge.na.length),ae!=null&&(ae[0]=we),me!=null&&(me[0]=rt),0):lt}function Km(P,R,Q){var ae=R.width,me=R.height,ve=0,we=0,Ne=ae,ke=me;if(R.Da=P!=null&&0<P.Da,R.Da&&(Ne=P.cd,ke=P.bd,ve=P.v,we=P.j,11>Q||(ve&=-2,we&=-2),0>ve||0>we||0>=Ne||0>=ke||ve+Ne>ae||we+ke>me))return 0;if(R.v=ve,R.j=we,R.va=ve+Ne,R.o=we+ke,R.U=Ne,R.T=ke,R.da=P!=null&&0<P.da,R.da){if(!mt(Ne,ke,Q=[P.ib],ve=[P.hb]))return 0;R.ib=Q[0],R.hb=ve[0]}return R.ob=P!=null&&P.ob,R.Kb=P==null||!P.Sd,R.da&&(R.ob=R.ib<3*ae/4&&R.hb<3*me/4,R.Kb=0),1}function Xm(P){if(P==null)return 2;if(11>P.S){var R=P.f.RGBA;R.fb+=(P.height-1)*R.A,R.A=-R.A}else R=P.f.kb,P=P.height,R.O+=(P-1)*R.fa,R.fa=-R.fa,R.N+=(P-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(P-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(P-1)*R.lb,R.lb=-R.lb);return 0}function Wd(P,R,Q,ae){if(ae==null||0>=P||0>=R)return 2;if(Q!=null){if(Q.Da){var me=Q.cd,ve=Q.bd,we=-2&Q.v,Ne=-2&Q.j;if(0>we||0>Ne||0>=me||0>=ve||we+me>P||Ne+ve>R)return 2;P=me,R=ve}if(Q.da){if(!mt(P,R,me=[Q.ib],ve=[Q.hb]))return 2;P=me[0],R=ve[0]}}ae.width=P,ae.height=R;e:{var ke=ae.width,Pe=ae.height;if(P=ae.S,0>=ke||0>=Pe||!(P>=Og&&13>P))P=2;else{if(0>=ae.Rd&&ae.sd==null){we=ve=me=R=0;var ze=(Ne=ke*Bp[P])*Pe;if(11>P||(ve=(Pe+1)/2*(R=(ke+1)/2),P==12&&(we=(me=ke)*Pe)),(Pe=i(ze+2*ve+we))==null){P=1;break e}ae.sd=Pe,11>P?((ke=ae.f.RGBA).eb=Pe,ke.fb=0,ke.A=Ne,ke.size=ze):((ke=ae.f.kb).y=Pe,ke.O=0,ke.fa=Ne,ke.Fd=ze,ke.f=Pe,ke.N=0+ze,ke.Ab=R,ke.Cd=ve,ke.ea=Pe,ke.W=0+ze+ve,ke.Db=R,ke.Ed=ve,P==12&&(ke.F=Pe,ke.J=0+ze+2*ve),ke.Tc=we,ke.lb=me)}if(R=1,me=ae.S,ve=ae.width,we=ae.height,me>=Og&&13>me)if(11>me)P=ae.f.RGBA,R&=(Ne=Math.abs(P.A))*(we-1)+ve<=P.size,R&=Ne>=ve*Bp[me],R&=P.eb!=null;else{P=ae.f.kb,Ne=(ve+1)/2,ze=(we+1)/2,ke=Math.abs(P.fa),Pe=Math.abs(P.Ab);var it=Math.abs(P.Db),Oe=Math.abs(P.lb),Ge=Oe*(we-1)+ve;R&=ke*(we-1)+ve<=P.Fd,R&=Pe*(ze-1)+Ne<=P.Cd,R=(R&=it*(ze-1)+Ne<=P.Ed)&ke>=ve&Pe>=Ne&it>=Ne,R&=P.y!=null,R&=P.f!=null,R&=P.ea!=null,me==12&&(R&=Oe>=ve,R&=Ge<=P.Tc,R&=P.F!=null)}else R=0;P=R?0:2}}return P!=0||Q!=null&&Q.fd&&(P=Xm(ae)),P}var zl=64,vl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yl=24,qu=32,td=8,qd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ut("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(P){return P},O.Predictor2=function(P,R,Q){return R[Q+0]},O.Predictor3=function(P,R,Q){return R[Q+1]},O.Predictor4=function(P,R,Q){return R[Q-1]},O.Predictor5=function(P,R,Q){return tt(tt(P,R[Q+1]),R[Q+0])},O.Predictor6=function(P,R,Q){return tt(P,R[Q-1])},O.Predictor7=function(P,R,Q){return tt(P,R[Q+0])},O.Predictor8=function(P,R,Q){return tt(R[Q-1],R[Q+0])},O.Predictor9=function(P,R,Q){return tt(R[Q+0],R[Q+1])},O.Predictor10=function(P,R,Q){return tt(tt(P,R[Q-1]),tt(R[Q+0],R[Q+1]))},O.Predictor11=function(P,R,Q){var ae=R[Q+0];return 0>=Yt(ae>>24&255,P>>24&255,(R=R[Q-1])>>24&255)+Yt(ae>>16&255,P>>16&255,R>>16&255)+Yt(ae>>8&255,P>>8&255,R>>8&255)+Yt(255&ae,255&P,255&R)?ae:P},O.Predictor12=function(P,R,Q){var ae=R[Q+0];return(st((P>>24&255)+(ae>>24&255)-((R=R[Q-1])>>24&255))<<24|st((P>>16&255)+(ae>>16&255)-(R>>16&255))<<16|st((P>>8&255)+(ae>>8&255)-(R>>8&255))<<8|st((255&P)+(255&ae)-(255&R)))>>>0},O.Predictor13=function(P,R,Q){var ae=R[Q-1];return(At((P=tt(P,R[Q+0]))>>24&255,ae>>24&255)<<24|At(P>>16&255,ae>>16&255)<<16|At(P>>8&255,ae>>8&255)<<8|At(255&P,255&ae))>>>0};var Hd=O.PredictorAdd0;O.PredictorAdd1=yr,ut("Predictor2","PredictorAdd2"),ut("Predictor3","PredictorAdd3"),ut("Predictor4","PredictorAdd4"),ut("Predictor5","PredictorAdd5"),ut("Predictor6","PredictorAdd6"),ut("Predictor7","PredictorAdd7"),ut("Predictor8","PredictorAdd8"),ut("Predictor9","PredictorAdd9"),ut("Predictor10","PredictorAdd10"),ut("Predictor11","PredictorAdd11"),ut("Predictor12","PredictorAdd12"),ut("Predictor13","PredictorAdd13");var rd=O.PredictorAdd2;$t("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),$t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var Ha,Kh=O.ColorIndexInverseTransform,sd=O.MapARGB,vc=O.VP8LColorIndexInverseTransformAlpha,Xh=O.MapAlpha,Qh=O.VP8LPredictorsAdd=[];Qh.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Qm,Zm,Gd,Hu,Gu,Zh,Yu,Jh,Da,Wo,xn,Fn,Ra,ii,yc,Pp,Jm,Yd,Pg,ef,Tg,gy,Tp,em,tm,vy,Op,yy,by=i(511),wy=i(2041),jy=i(225),Ny=i(767),Sy=0,nd=wy,tf=jy,To=Ny,Vl=by,Og=0,Ku=1,qw=2,Ip=3,$p=4,qn=5,Ig=6,rf=7,rm=8,Dp=9,Rp=10,Mp=[2,3,7],$g=[3,3,11],sm=[280,256,256,256,40],Hw=[0,1,1,1,0],$3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],D3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dg=8,sf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nm=null,Cy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ky=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],R3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],M3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_y=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oo=[],Wl=[],qo=[],ad=1,nf=2,ho=[],Ho=[];Vo("UpsampleRgbLinePair",Vu,3),Vo("UpsampleBgrLinePair",Hh,3),Vo("UpsampleRgbaLinePair",Ep,4),Vo("UpsampleBgraLinePair",Ap,4),Vo("UpsampleArgbLinePair",Yh,4),Vo("UpsampleRgba4444LinePair",Gh,2),Vo("UpsampleRgb565LinePair",uo,2);var L3=O.UpsampleRgbLinePair,F3=O.UpsampleBgrLinePair,Xu=O.UpsampleRgbaLinePair,af=O.UpsampleBgraLinePair,am=O.UpsampleArgbLinePair,Fp=O.UpsampleRgba4444LinePair,Ay=O.UpsampleRgb565LinePair,Kd=16,bc=1<<Kd-1,_n=-227,Bn=482,Qu=6,zi=0,Go=i(256),im=i(256),of=i(256),Yo=i(256),Rg=i(Bn-_n),Xw=i(Bn-_n);gc("YuvToRgbRow",Vu,3),gc("YuvToBgrRow",Hh,3),gc("YuvToRgbaRow",Ep,4),gc("YuvToBgraRow",Ap,4),gc("YuvToArgbRow",Yh,4),gc("YuvToRgba4444Row",Gh,2),gc("YuvToRgb565Row",uo,2);var Ey=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],om=[0,2,8],Qw=[8,7,6,4,4,2,2,2,1,1,1,1],Xd=1;this.WebPDecodeRGBA=function(P,R,Q,ae,me){var ve=Ku,we=new et,Ne=new Re;we.ba=Ne,Ne.S=ve,Ne.width=[Ne.width],Ne.height=[Ne.height];var ke=Ne.width,Pe=Ne.height,ze=new Je;if(ze==null||P==null)var it=2;else e(ze!=null),it=Wu(P,R,Q,ze.width,ze.height,ze.Pd,ze.Qd,ze.format,null);if(it!=0?ke=0:(ke!=null&&(ke[0]=ze.width[0]),Pe!=null&&(Pe[0]=ze.height[0]),ke=1),ke){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ae!=null&&(ae[0]=Ne.width),me!=null&&(me[0]=Ne.height);e:{if(ae=new es,(me=new Nt).data=P,me.w=R,me.ha=Q,me.kd=1,R=[0],e(me!=null),((P=Wu(me.data,me.w,me.ha,null,null,null,R,null,me))==0||P==7)&&R[0]&&(P=4),(R=P)==0){if(e(we!=null),ae.data=me.data,ae.w=me.w+me.offset,ae.ha=me.ha-me.offset,ae.put=He,ae.ac=Qe,ae.bc=vt,ae.ma=we,me.xa){if((P=Pr())==null){we=1;break e}if((function(Oe,Ge){var rt=[0],wt=[0],lt=[0];t:for(;;){if(Oe==null)return 0;if(Ge==null)return Oe.a=2,0;if(Oe.l=Ge,Oe.a=0,J(Oe.m,Ge.data,Ge.w,Ge.ha),!le(Oe.m,rt,wt,lt)){Oe.a=3;break t}if(Oe.xb=nf,Ge.width=rt[0],Ge.height=wt[0],!Gr(rt[0],wt[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0})(P,ae)){if(ae=(R=Wd(ae.width,ae.height,we.Oa,we.ba))==0){t:{ae=P;r:for(;;){if(ae==null){ae=0;break t}if(e(ae.s.yc!=null),e(ae.s.Ya!=null),e(0<ae.s.Wb),e((Q=ae.l)!=null),e((me=Q.ma)!=null),ae.xb!=0){if(ae.ca=me.ba,ae.tb=me.tb,e(ae.ca!=null),!Km(me.Oa,Q,Ip)){ae.a=2;break r}if(!os(ae,Q.width)||Q.da)break r;if((Q.da||kt(ae.ca.S))&&Ul(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ul()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!Y(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!xr(ae,ae.V,ae.Ba,ae.c,ae.i,Q.o,Xt))break r;me.Dc=ae.Ma,ae=1;break t}e(ae.a!=0),ae=0}ae=!ae}ae&&(R=P.a)}else R=P.a}else{if((P=new $l)==null){we=1;break e}if(P.Fa=me.na,P.P=me.P,P.qc=me.Sa,kr(P,ae)){if((R=Wd(ae.width,ae.height,we.Oa,we.ba))==0){if(P.Aa=0,Q=we.Oa,e((me=P)!=null),Q!=null){if(0<(ke=0>(ke=Q.Md)?0:100<ke?255:255*ke/100)){for(Pe=ze=0;4>Pe;++Pe)12>(it=me.pb[Pe]).lc&&(it.ia=ke*Qw[0>it.lc?0:it.lc]>>3),ze|=it.ia;ze&&(alert("todo:VP8InitRandom"),me.ia=1)}me.Ga=Q.Id,100<me.Ga?me.Ga=100:0>me.Ga&&(me.Ga=0)}(function(Oe,Ge){if(Oe==null)return 0;if(Ge==null)return Fe(Oe,2,"NULL VP8Io parameter in VP8Decode().");if(!Oe.cb&&!kr(Oe,Ge))return 0;if(e(Oe.cb),Ge.ac==null||Ge.ac(Ge)){Ge.ob&&(Oe.L=0);var rt=om[Oe.L];if(Oe.L==2?(Oe.yb=0,Oe.zb=0):(Oe.yb=Ge.v-rt>>4,Oe.zb=Ge.j-rt>>4,0>Oe.yb&&(Oe.yb=0),0>Oe.zb&&(Oe.zb=0)),Oe.Va=Ge.o+15+rt>>4,Oe.Hb=Ge.va+15+rt>>4,Oe.Hb>Oe.za&&(Oe.Hb=Oe.za),Oe.Va>Oe.Ub&&(Oe.Va=Oe.Ub),0<Oe.L){var wt=Oe.ed;for(rt=0;4>rt;++rt){var lt;if(Oe.Qa.Cb){var gt=Oe.Qa.Lb[rt];Oe.Qa.Fb||(gt+=wt.Tb)}else gt=wt.Tb;for(lt=0;1>=lt;++lt){var yt=Oe.gd[rt][lt],_t=gt;if(wt.Pc&&(_t+=wt.vd[0],lt&&(_t+=wt.od[0])),0<(_t=0>_t?0:63<_t?63:_t)){var Et=_t;0<wt.wb&&(Et=4<wt.wb?Et>>2:Et>>1)>9-wt.wb&&(Et=9-wt.wb),1>Et&&(Et=1),yt.dd=Et,yt.tc=2*_t+Et,yt.ld=40<=_t?2:15<=_t?1:0}else yt.tc=0;yt.La=lt}}}rt=0}else Fe(Oe,6,"Frame setup failed"),rt=Oe.a;if(rt=rt==0){if(rt){Oe.$c=0,0<Oe.Aa||(Oe.Ic=Xd);t:{rt=Oe.Ic,wt=4*(Et=Oe.za);var Kr=32*Et,Tr=Et+1,$s=0<Oe.L?Et*(0<Oe.Aa?2:1):0,Mr=(Oe.Aa==2?2:1)*Et;if((yt=wt+832+(lt=3*(16*rt+om[Oe.L])/2*Kr)+(gt=Oe.Fa!=null&&0<Oe.Fa.length?Oe.Kc.c*Oe.Kc.i:0))!=yt)rt=0;else{if(yt>Oe.Vb){if(Oe.Vb=0,Oe.Ec=i(yt),Oe.Fc=0,Oe.Ec==null){rt=Fe(Oe,1,"no memory during frame initialization.");break t}Oe.Vb=yt}yt=Oe.Ec,_t=Oe.Fc,Oe.Ac=yt,Oe.Bc=_t,_t+=wt,Oe.Gd=o(Kr,ta),Oe.Hd=0,Oe.rb=o(Tr+1,Eo),Oe.sb=1,Oe.wa=$s?o($s,da):null,Oe.Y=0,Oe.D.Nb=0,Oe.D.wa=Oe.wa,Oe.D.Y=Oe.Y,0<Oe.Aa&&(Oe.D.Y+=Et),e(!0),Oe.oc=yt,Oe.pc=_t,_t+=832,Oe.ya=o(Mr,Fs),Oe.aa=0,Oe.D.ya=Oe.ya,Oe.D.aa=Oe.aa,Oe.Aa==2&&(Oe.D.aa+=Et),Oe.R=16*Et,Oe.B=8*Et,Et=(Kr=om[Oe.L])*Oe.R,Kr=Kr/2*Oe.B,Oe.sa=yt,Oe.ta=_t+Et,Oe.qa=Oe.sa,Oe.ra=Oe.ta+16*rt*Oe.R+Kr,Oe.Ha=Oe.qa,Oe.Ia=Oe.ra+8*rt*Oe.B+Kr,Oe.$c=0,_t+=lt,Oe.mb=gt?yt:null,Oe.nb=gt?_t:null,e(_t+gt<=Oe.Fc+Oe.Vb),gs(Oe),a(Oe.Ac,Oe.Bc,0,wt),rt=1}}if(rt){if(Ge.ka=0,Ge.y=Oe.sa,Ge.O=Oe.ta,Ge.f=Oe.qa,Ge.N=Oe.ra,Ge.ea=Oe.Ha,Ge.Vd=Oe.Ia,Ge.fa=Oe.R,Ge.Rc=Oe.B,Ge.F=null,Ge.J=0,!Sy){for(rt=-255;255>=rt;++rt)by[255+rt]=0>rt?-rt:rt;for(rt=-1020;1020>=rt;++rt)wy[1020+rt]=-128>rt?-128:127<rt?127:rt;for(rt=-112;112>=rt;++rt)jy[112+rt]=-16>rt?-16:15<rt?15:rt;for(rt=-255;510>=rt;++rt)Ny[255+rt]=0>rt?0:255<rt?255:rt;Sy=1}Yu=hn,Jh=Yc,Wo=Dl,xn=Kc,Fn=Vm,Da=lo,Ra=_p,ii=co,yc=H,Pp=fe,Jm=Bl,Yd=Ym,Pg=Ie,ef=Be,Tg=Ml,gy=Vd,Tp=Vh,em=kp,Wl[0]=xy,Wl[1]=Wm,Wl[2]=Fh,Wl[3]=Qc,Wl[4]=kg,Wl[5]=Ud,Wl[6]=xl,Wl[7]=_g,Wl[8]=Bh,Wl[9]=Hm,Oo[0]=fc,Oo[1]=Sg,Oo[2]=Cg,Oo[3]=qm,Oo[4]=Xc,Oo[5]=zo,Oo[6]=Rl,qo[0]=xc,qo[1]=jp,qo[2]=Np,qo[3]=pc,qo[4]=Sp,qo[5]=Gm,qo[6]=Cp,rt=1}else rt=0}rt&&(rt=(function(Qs,Ma){for(Qs.M=0;Qs.M<Qs.Va;++Qs.M){var Ms,Or=Qs.Jc[Qs.M&Qs.Xb],dr=Qs.m,Ga=Qs;for(Ms=0;Ms<Ga.za;++Ms){var vs=dr,Gs=Ga,sa=Gs.Ac,Pi=Gs.Bc+4*Ms,oi=Gs.zc,Ea=Gs.ya[Gs.aa+Ms];if(Gs.Qa.Bb?Ea.$b=oe(vs,Gs.Pa.jb[0])?2+oe(vs,Gs.Pa.jb[2]):oe(vs,Gs.Pa.jb[1]):Ea.$b=0,Gs.kc&&(Ea.Ad=oe(vs,Gs.Bd)),Ea.Za=!oe(vs,145)+0,Ea.Za){var vi=Ea.Ob,Ti=0;for(Gs=0;4>Gs;++Gs){var xa,sn=oi[0+Gs];for(xa=0;4>xa;++xa){sn=R3[sa[Pi+xa]][sn];for(var gn=Yw[oe(vs,sn[0])];0<gn;)gn=Yw[2*gn+oe(vs,sn[gn])];sn=-gn,sa[Pi+xa]=sn}n(vi,Ti,sa,Pi,4),Ti+=4,oi[0+Gs]=sn}}else sn=oe(vs,156)?oe(vs,128)?1:3:oe(vs,163)?2:0,Ea.Ob[0]=sn,a(sa,Pi,sn,4),a(oi,0,sn,4);Ea.Dd=oe(vs,142)?oe(vs,114)?oe(vs,183)?1:3:2:0}if(Ga.m.Ka)return Fe(Qs,7,"Premature end-of-partition0 encountered.");for(;Qs.ja<Qs.za;++Qs.ja){if(Ga=Or,vs=(dr=Qs).rb[dr.sb-1],sa=dr.rb[dr.sb+dr.ja],Ms=dr.ya[dr.aa+dr.ja],Pi=dr.kc?Ms.Ad:0)vs.la=sa.la=0,Ms.Za||(vs.Na=sa.Na=0),Ms.Hc=0,Ms.Gc=0,Ms.ia=0;else{var ga,vn;if(vs=sa,sa=Ga,Pi=dr.Pa.Xc,oi=dr.ya[dr.aa+dr.ja],Ea=dr.pb[oi.$b],Gs=oi.ad,vi=0,Ti=dr.rb[dr.sb-1],sn=xa=0,a(Gs,vi,0,384),oi.Za)var La=0,Fa=Pi[3];else{gn=i(16);var Hn=vs.Na+Ti.Na;if(Hn=nm(sa,Pi[1],Hn,Ea.Eb,0,gn,0),vs.Na=Ti.Na=(0<Hn)+0,1<Hn)Yu(gn,0,Gs,vi);else{var mo=gn[0]+3>>3;for(gn=0;256>gn;gn+=16)Gs[vi+gn]=mo}La=1,Fa=Pi[0]}var Un=15&vs.la,Gn=15&Ti.la;for(gn=0;4>gn;++gn){var li=1&Gn;for(mo=vn=0;4>mo;++mo)Un=Un>>1|(li=(Hn=nm(sa,Fa,Hn=li+(1&Un),Ea.Sc,La,Gs,vi))>La)<<7,vn=vn<<2|(3<Hn?3:1<Hn?2:Gs[vi+0]!=0),vi+=16;Un>>=4,Gn=Gn>>1|li<<7,xa=(xa<<8|vn)>>>0}for(Fa=Un,La=Gn>>4,ga=0;4>ga;ga+=2){for(vn=0,Un=vs.la>>4+ga,Gn=Ti.la>>4+ga,gn=0;2>gn;++gn){for(li=1&Gn,mo=0;2>mo;++mo)Hn=li+(1&Un),Un=Un>>1|(li=0<(Hn=nm(sa,Pi[2],Hn,Ea.Qc,0,Gs,vi)))<<3,vn=vn<<2|(3<Hn?3:1<Hn?2:Gs[vi+0]!=0),vi+=16;Un>>=2,Gn=Gn>>1|li<<5}sn|=vn<<4*ga,Fa|=Un<<4<<ga,La|=(240&Gn)<<ga}vs.la=Fa,Ti.la=La,oi.Hc=xa,oi.Gc=sn,oi.ia=43690&sn?0:Ea.ia,Pi=!(xa|sn)}if(0<dr.L&&(dr.wa[dr.Y+dr.ja]=dr.gd[Ms.$b][Ms.Za],dr.wa[dr.Y+dr.ja].La|=!Pi),Ga.Ka)return Fe(Qs,7,"Premature end-of-file encountered.")}if(gs(Qs),dr=Ma,Ga=1,Ms=(Or=Qs).D,vs=0<Or.L&&Or.M>=Or.zb&&Or.M<=Or.Va,Or.Aa==0)t:{if(Ms.M=Or.M,Ms.uc=vs,gl(Or,Ms),Ga=1,Ms=(vn=Or.D).Nb,vs=(sn=om[Or.L])*Or.R,sa=sn/2*Or.B,gn=16*Ms*Or.R,mo=8*Ms*Or.B,Pi=Or.sa,oi=Or.ta-vs+gn,Ea=Or.qa,Gs=Or.ra-sa+mo,vi=Or.Ha,Ti=Or.Ia-sa+mo,Gn=(Un=vn.M)==0,xa=Un>=Or.Va-1,Or.Aa==2&&gl(Or,vn),vn.uc)for(li=(Hn=Or).D.M,e(Hn.D.uc),vn=Hn.yb;vn<Hn.Hb;++vn){La=vn,Fa=li;var Vi=(Ko=(Xa=Hn).D).Nb;ga=Xa.R;var Ko=Ko.wa[Ko.Y+La],Ya=Xa.sa,Ka=Xa.ta+16*Vi*ga+16*La,fo=Ko.dd,Yn=Ko.tc;if(Yn!=0)if(e(3<=Yn),Xa.L==1)0<La&&gy(Ya,Ka,ga,Yn+4),Ko.La&&em(Ya,Ka,ga,Yn),0<Fa&&Tg(Ya,Ka,ga,Yn+4),Ko.La&&Tp(Ya,Ka,ga,Yn);else{var po=Xa.B,ql=Xa.qa,wc=Xa.ra+8*Vi*po+8*La,Oi=Xa.Ha,Xa=Xa.Ia+8*Vi*po+8*La;Vi=Ko.ld,0<La&&(ii(Ya,Ka,ga,Yn+4,fo,Vi),Pp(ql,wc,Oi,Xa,po,Yn+4,fo,Vi)),Ko.La&&(Yd(Ya,Ka,ga,Yn,fo,Vi),ef(ql,wc,Oi,Xa,po,Yn,fo,Vi)),0<Fa&&(Ra(Ya,Ka,ga,Yn+4,fo,Vi),yc(ql,wc,Oi,Xa,po,Yn+4,fo,Vi)),Ko.La&&(Jm(Ya,Ka,ga,Yn,fo,Vi),Pg(ql,wc,Oi,Xa,po,Yn,fo,Vi))}}if(Or.ia&&alert("todo:DitherRow"),dr.put!=null){if(vn=16*Un,Un=16*(Un+1),Gn?(dr.y=Or.sa,dr.O=Or.ta+gn,dr.f=Or.qa,dr.N=Or.ra+mo,dr.ea=Or.Ha,dr.W=Or.Ia+mo):(vn-=sn,dr.y=Pi,dr.O=oi,dr.f=Ea,dr.N=Gs,dr.ea=vi,dr.W=Ti),xa||(Un-=sn),Un>dr.o&&(Un=dr.o),dr.F=null,dr.J=null,Or.Fa!=null&&0<Or.Fa.length&&vn<Un&&(dr.J=ai(Or,dr,vn,Un-vn),dr.F=Or.mb,dr.F==null&&dr.F.length==0)){Ga=Fe(Or,3,"Could not decode alpha data.");break t}vn<dr.j&&(sn=dr.j-vn,vn=dr.j,e(!(1&sn)),dr.O+=Or.R*sn,dr.N+=Or.B*(sn>>1),dr.W+=Or.B*(sn>>1),dr.F!=null&&(dr.J+=dr.width*sn)),vn<Un&&(dr.O+=dr.v,dr.N+=dr.v>>1,dr.W+=dr.v>>1,dr.F!=null&&(dr.J+=dr.v),dr.ka=vn-dr.j,dr.U=dr.va-dr.v,dr.T=Un-vn,Ga=dr.put(dr))}Ms+1!=Or.Ic||xa||(n(Or.sa,Or.ta-vs,Pi,oi+16*Or.R,vs),n(Or.qa,Or.ra-sa,Ea,Gs+8*Or.B,sa),n(Or.Ha,Or.Ia-sa,vi,Ti+8*Or.B,sa))}if(!Ga)return Fe(Qs,6,"Output aborted.")}return 1})(Oe,Ge)),Ge.bc!=null&&Ge.bc(Ge),rt&=1}return rt?(Oe.cb=0,rt):0})(P,ae)||(R=P.a)}}else R=P.a}R==0&&we.Oa!=null&&we.Oa.fd&&(R=Xm(we.ba))}we=R}ve=we!=0?null:11>ve?Ne.f.RGBA.eb:Ne.f.kb.y}else ve=null;return ve};var Bp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(O,$){for(var T="",I=0;I<4;I++)T+=String.fromCharCode(O[$++]);return T}function u(O,$){return O[$+0]|O[$+1]<<8}function h(O,$){return(O[$+0]|O[$+1]<<8|O[$+2]<<16)>>>0}function m(O,$){return(O[$+0]|O[$+1]<<8|O[$+2]<<16|O[$+3]<<24)>>>0}new c;var f=[0],v=[0],x=[],g=new c,b=t,w=(function(O,$){var T={},I=0,L=!1,z=0,M=0;if(T.frames=[],!(function(U,Z){for(var K=0;K<4;K++)if(U[Z+K]!="RIFF".charCodeAt(K))return!0;return!1})(O,$)){for(m(O,$+=4),$+=8;$<O.length;){var V=d(O,$),B=m(O,$+=4);$+=4;var F=B+(1&B);switch(V){case"VP8 ":case"VP8L":T.frames[I]===void 0&&(T.frames[I]={}),(q=T.frames[I]).src_off=L?M:$-8,q.src_size=z+B+8,I++,L&&(L=!1,z=0,M=0);break;case"VP8X":(q=T.header={}).feature_flags=O[$];var J=$+4;q.canvas_width=1+h(O,J),J+=3,q.canvas_height=1+h(O,J),J+=3;break;case"ALPH":L=!0,z=F+8,M=$-8;break;case"ANIM":(q=T.header).bgcolor=m(O,$),J=$+4,q.loop_count=u(O,J),J+=2;break;case"ANMF":var ee,q;(q=T.frames[I]={}).offset_x=2*h(O,$),$+=3,q.offset_y=2*h(O,$),$+=3,q.width=1+h(O,$),$+=3,q.height=1+h(O,$),$+=3,q.duration=h(O,$),$+=3,ee=O[$++],q.dispose=1&ee,q.blend=ee>>1&1}V!="ANMF"&&($+=F)}return T}})(b,0);w.response=b,w.rgbaoutput=!0,w.dataurl=!1;var N=w.header?w.header:null,C=w.frames?w.frames:null;if(N){N.loop_counter=N.loop_count,f=[N.canvas_height],v=[N.canvas_width];for(var S=0;S<C.length&&C[S].blend!=0;S++);}var A=C[0],k=g.WebPDecodeRGBA(b,A.src_off,A.src_size,v,f);A.rgba=k,A.imgwidth=v[0],A.imgheight=f[0];for(var E=0;E<v[0]*f[0]*4;E++)x[E]=k[E];return this.width=v,this.height=f,this.data=x,this}(function(t){var e,s,n,a,i,o,l,c,d,u=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new c,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new o,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new o,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,s=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=U;Object.defineProperty(this,"pdf",{get:function(){return Z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Se){K=!!Se}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(Se){se=!!Se}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Se){isNaN(Se)||(ne=Se)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(Se){isNaN(Se)||(ie=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var Y;typeof Se=="number"?Y=[Se,Se,Se,Se]:((Y=new Array(4))[0]=Se[0],Y[1]=Se.length>=2?Se[1]:Y[0],Y[2]=Se.length>=3?Se[2]:Y[0],Y[3]=Se.length>=4?Se[3]:Y[1]),d.margin=Y}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Se){be=Se}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Se){ue=Se}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(Se){oe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof u&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return pe},set:function(Se){pe=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var Y;Y=m(Se),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var Y=m(Se);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ye=null,$e=null;Object.defineProperty(this,"fontFaces",{get:function(){return $e},set:function(Se){ye=null,$e=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var Y;if(this.ctx.font=Se,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Le=Y[1];Y[2];var xe=Y[3],mt=Y[4];Y[5];var Ue=Y[6],xt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(mt)[2];mt=Math.floor(xt==="px"?parseFloat(mt)*this.pdf.internal.scaleFactor:xt==="em"?parseFloat(mt)*this.pdf.getFontSize():parseFloat(mt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(mt);var ut=(function(tr){var $t,Dr,Er=[],hr=tr.trim();if(hr==="")return GA;if(hr in Zq)return[Zq[hr]];for(;hr!=="";){switch(Dr=null,$t=(hr=eH(hr)).charAt(0)){case'"':case"'":Dr=Kze(hr.substring(1),$t);break;default:Dr=Xze(hr)}if(Dr===null||(Er.push(Dr[0]),(hr=eH(Dr[1]))!==""&&hr.charAt(0)!==","))return GA;hr=hr.replace(/^,/,"")}return Er})(Ue);if(this.fontFaces){var Ot=(function(tr,$t){if(ye===null){var Dr=(function(Er){var hr=[];return Object.keys(Er).forEach(function(Ct){Er[Ct].forEach(function(is){var cr=null;switch(is){case"bold":cr={family:Ct,weight:"bold"};break;case"italic":cr={family:Ct,style:"italic"};break;case"bolditalic":cr={family:Ct,weight:"bold",style:"italic"};break;case"":case"normal":cr={family:Ct}}cr!==null&&(cr.ref={name:Ct,style:is},hr.push(cr))})}),hr})(tr.getFontList());ye=(function(Er){for(var hr={},Ct=0;Ct<Er.length;++Ct){var is=HA(Er[Ct]),cr=is.family,Pt=is.stretch,kt=is.style,zt=is.weight;hr[cr]=hr[cr]||{},hr[cr][Pt]=hr[cr][Pt]||{},hr[cr][Pt][kt]=hr[cr][Pt][kt]||{},hr[cr][Pt][kt][zt]=is}return hr})(Dr.concat($t))}return ye})(this.pdf,this.fontFaces),tt=ut.map(function(tr){return{family:tr,stretch:"normal",weight:xe,style:Le}}),st=(function(tr,$t,Dr){for(var Er=(Dr=Dr||{}).defaultFontFamily||"times",hr=Object.assign({},Yze,Dr.genericFontFamilies||{}),Ct=null,is=null,cr=0;cr<$t.length;++cr)if(hr[(Ct=HA($t[cr])).family]&&(Ct.family=hr[Ct.family]),tr.hasOwnProperty(Ct.family)){is=tr[Ct.family];break}if(!(is=is||tr[Er]))throw new Error("Could not find a font-family for the rule '"+Jq(Ct)+"' and default family '"+Er+"'.");if(is=(function(Pt,kt){if(kt[Pt])return kt[Pt];var zt=yO[Pt],or=zt<=yO.normal?-1:1,Re=Qq(kt,hae,zt,or);if(!Re)throw new Error("Could not find a matching font-stretch value for "+Pt);return Re})(Ct.stretch,is),is=(function(Pt,kt){if(kt[Pt])return kt[Pt];for(var zt=uae[Pt],or=0;or<zt.length;++or)if(kt[zt[or]])return kt[zt[or]];throw new Error("Could not find a matching font-style for "+Pt)})(Ct.style,is),!(is=(function(Pt,kt){if(kt[Pt])return kt[Pt];if(Pt===400&&kt[500])return kt[500];if(Pt===500&&kt[400])return kt[400];var zt=Gze[Pt],or=Qq(kt,mae,zt,Pt<400?-1:1);if(!or)throw new Error("Could not find a matching font-weight for value "+Pt);return or})(Ct.weight,is)))throw new Error("Failed to resolve a font for the rule '"+Jq(Ct)+"'.");return is})(Ot,tt);this.pdf.setFont(st.ref.name,st.ref.style)}else{var At="";(xe==="bold"||parseInt(xe,10)>=700||Le==="bold")&&(At="bold"),Le==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Yt="",yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Zt=0;Zt<ut.length;Zt++){if(this.pdf.internal.getFont(ut[Zt],At,{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[Zt];break}if(At==="bolditalic"&&this.pdf.internal.getFont(ut[Zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yt=ut[Zt],At="bold";else if(this.pdf.internal.getFont(ut[Zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yt=ut[Zt],At="normal";break}}if(Yt===""){for(var Vt=0;Vt<ut.length;Vt++)if(yr[ut[Vt]]){Yt=yr[ut[Vt]];break}}Yt=Yt===""?"Times":Yt,this.pdf.setFont(Yt,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(U){this.lineDash=U},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(U,Z){if(isNaN(U)||isNaN(Z))throw ha.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(U,Z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(U,Z)},h.prototype.closePath=function(){var U=new o(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&ea(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){U=new o(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(U.x,U.y)},h.prototype.lineTo=function(U,Z){if(isNaN(U)||isNaN(Z))throw ha.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(U,Z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(U,Z,K,se){if(isNaN(K)||isNaN(se)||isNaN(U)||isNaN(Z))throw ha.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(K,se)),ie=this.ctx.transform.applyToPoint(new o(U,Z));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.bezierCurveTo=function(U,Z,K,se,ne,ie){if(isNaN(ne)||isNaN(ie)||isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se))throw ha.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(ne,ie)),ue=this.ctx.transform.applyToPoint(new o(U,Z)),oe=this.ctx.transform.applyToPoint(new o(K,se));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:oe.x,y2:oe.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},h.prototype.arc=function(U,Z,K,se,ne,ie){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se)||isNaN(ne))throw ha.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(U,Z));U=be.x,Z=be.y;var ue=this.ctx.transform.applyToPoint(new o(0,K)),oe=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(ue.x-oe.x,2)+Math.pow(ue.y-oe.y,2))}Math.abs(ne-se)>=2*Math.PI&&(se=0,ne=2*Math.PI),this.path.push({type:"arc",x:U,y:Z,radius:K,startAngle:se,endAngle:ne,counterclockwise:ie})},h.prototype.arcTo=function(U,Z,K,se,ne){throw new Error("arcTo not implemented.")},h.prototype.rect=function(U,Z,K,se){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se))throw ha.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,Z),this.lineTo(U+K,Z),this.lineTo(U+K,Z+se),this.lineTo(U,Z+se),this.lineTo(U,Z),this.lineTo(U+K,Z),this.lineTo(U,Z)},h.prototype.fillRect=function(U,Z,K,se){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se))throw ha.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,Z,K,se),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},h.prototype.strokeRect=function(U,Z,K,se){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se))throw ha.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(U,Z,K,se),this.stroke())},h.prototype.clearRect=function(U,Z,K,se){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se))throw ha.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,Z,K,se))},h.prototype.save=function(U){U=typeof U!="boolean"||U;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},h.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(U){var Z,K,se,ne;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))Z=0,K=0,se=0,ne=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(ie!==null)Z=parseInt(ie[1]),K=parseInt(ie[2]),se=parseInt(ie[3]),ne=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)Z=parseInt(ie[1]),K=parseInt(ie[2]),se=parseInt(ie[3]),ne=parseFloat(ie[4]);else{if(ne=1,typeof U=="string"&&U.charAt(0)!=="#"){var be=new nae(U);U=be.ok?be.toHex():"#000000"}U.length===4?(Z=U.substring(1,2),Z+=Z,K=U.substring(2,3),K+=K,se=U.substring(3,4),se+=se):(Z=U.substring(1,3),K=U.substring(3,5),se=U.substring(5,7)),Z=parseInt(Z,16),K=parseInt(K,16),se=parseInt(se,16)}}return{r:Z,g:K,b:se,a:ne,style:U}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(U,Z,K,se){if(isNaN(Z)||isNaN(K)||typeof U!="string")throw ha.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!f.call(this)){var ne=F(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;I.call(this,{text:U,x:Z,y:K,scale:ie,angle:ne,align:this.textAlign,maxWidth:se})}},h.prototype.strokeText=function(U,Z,K,se){if(isNaN(Z)||isNaN(K)||typeof U!="string")throw ha.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){se=isNaN(se)?void 0:se;var ne=F(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;I.call(this,{text:U,x:Z,y:K,scale:ie,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:se})}},h.prototype.measureText=function(U){if(typeof U!="string")throw ha.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,K=this.pdf.internal.scaleFactor,se=Z.internal.getFontSize(),ne=Z.getStringUnitWidth(U)*se/Z.internal.scaleFactor;return new function(ie){var be=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this}({width:ne*=Math.round(96*K/72*1e4)/1e4})},h.prototype.scale=function(U,Z){if(isNaN(U)||isNaN(Z))throw ha.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new c(U,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.rotate=function(U){if(isNaN(U))throw ha.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new c(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.translate=function(U,Z){if(isNaN(U)||isNaN(Z))throw ha.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new c(1,0,0,1,U,Z);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.transform=function(U,Z,K,se,ne,ie){if(isNaN(U)||isNaN(Z)||isNaN(K)||isNaN(se)||isNaN(ne)||isNaN(ie))throw ha.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new c(U,Z,K,se,ne,ie);this.ctx.transform=this.ctx.transform.multiply(be)},h.prototype.setTransform=function(U,Z,K,se,ne,ie){U=isNaN(U)?1:U,Z=isNaN(Z)?0:Z,K=isNaN(K)?0:K,se=isNaN(se)?1:se,ne=isNaN(ne)?0:ne,ie=isNaN(ie)?0:ie,this.ctx.transform=new c(U,Z,K,se,ne,ie)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(U,Z,K,se,ne,ie,be,ue,oe){var pe=this.pdf.getImageProperties(U),ye=1,$e=1,Se=1,Y=1;se!==void 0&&ue!==void 0&&(Se=ue/se,Y=oe/ne,ye=pe.width/se*ue/se,$e=pe.height/ne*oe/ne),ie===void 0&&(ie=Z,be=K,Z=0,K=0),se!==void 0&&ue===void 0&&(ue=se,oe=ne),se===void 0&&ue===void 0&&(ue=pe.width,oe=pe.height);for(var Le,xe=this.ctx.transform.decompose(),mt=F(xe.rotate.shx),Ue=new c,xt=(Ue=(Ue=(Ue=Ue.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale)).applyToRectangle(new l(ie-Z*Se,be-K*Y,se*ye,ne*$e)),ut=g.call(this,xt),Ot=[],tt=0;tt<ut.length;tt+=1)Ot.indexOf(ut[tt])===-1&&Ot.push(ut[tt]);if(N(Ot),this.autoPaging)for(var st=Ot[0],At=Ot[Ot.length-1],Yt=st;Yt<At+1;Yt++){this.pdf.setPage(Yt);var yr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Yt===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=Yt===1?0:Vt+(Yt-2)*tr;if(this.ctx.clip_path.length!==0){var Dr=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Le,this.posX+this.margin[3],-$t+Zt+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Dr}var Er=JSON.parse(JSON.stringify(xt));Er=w([Er],this.posX+this.margin[3],-$t+Zt+this.ctx.prevPageLastElemOffset)[0];var hr=(Yt>st||Yt<At)&&x.call(this);hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,tr,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Er.x,Er.y,Er.w,Er.h,null,null,mt),hr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,mt)};var g=function(U,Z,K){var se=[];Z=Z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":se.push(Math.floor((U.y+ne)/K)+1);break;case"arc":se.push(Math.floor((U.y+ne-U.radius)/K)+1),se.push(Math.floor((U.y+ne+U.radius)/K)+1);break;case"qct":var ie=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);se.push(Math.floor((ie.y+ne)/K)+1),se.push(Math.floor((ie.y+ie.h+ne)/K)+1);break;case"bct":var be=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);se.push(Math.floor((be.y+ne)/K)+1),se.push(Math.floor((be.y+be.h+ne)/K)+1);break;case"rect":se.push(Math.floor((U.y+ne)/K)+1),se.push(Math.floor((U.y+U.h+ne)/K)+1)}for(var ue=0;ue<se.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<se[ue];)b.call(this);return se},b=function(){var U=this.fillStyle,Z=this.strokeStyle,K=this.font,se=this.lineCap,ne=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=Z,this.font=K,this.lineCap=se,this.lineWidth=ne,this.lineJoin=ie},w=function(U,Z,K){for(var se=0;se<U.length;se++)switch(U[se].type){case"bct":U[se].x2+=Z,U[se].y2+=K;case"qct":U[se].x1+=Z,U[se].y1+=K;default:U[se].x+=Z,U[se].y+=K}return U},N=function(U){return U.sort(function(Z,K){return Z-K})},C=function(U,Z){for(var K,se,ne=this.fillStyle,ie=this.strokeStyle,be=this.lineCap,ue=this.lineWidth,oe=Math.abs(ue*this.ctx.transform.scaleX),pe=this.lineJoin,ye=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),Se=[],Y=0;Y<$e.length;Y++)if($e[Y].x!==void 0)for(var Le=g.call(this,$e[Y]),xe=0;xe<Le.length;xe+=1)Se.indexOf(Le[xe])===-1&&Se.push(Le[xe]);for(var mt=0;mt<Se.length;mt++)for(;this.pdf.internal.getNumberOfPages()<Se[mt];)b.call(this);if(N(Se),this.autoPaging)for(var Ue=Se[0],xt=Se[Se.length-1],ut=Ue;ut<xt+1;ut++){this.pdf.setPage(ut),this.fillStyle=ne,this.strokeStyle=ie,this.lineCap=be,this.lineWidth=oe,this.lineJoin=pe;var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=ut===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=ut===1?0:st+(ut-2)*At;if(this.ctx.clip_path.length!==0){var yr=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(K,this.posX+this.margin[3],-Yt+tt+this.ctx.prevPageLastElemOffset),S.call(this,U,!0),this.path=yr}if(se=JSON.parse(JSON.stringify(ye)),this.path=w(se,this.posX+this.margin[3],-Yt+tt+this.ctx.prevPageLastElemOffset),Z===!1||ut===0){var Zt=(ut>Ue||ut<xt)&&x.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,At,null).clip().discardPath()),S.call(this,U,Z),Zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=oe,S.call(this,U,Z),this.lineWidth=ue;this.path=ye},S=function(U,Z){if((U!=="stroke"||Z||!v.call(this))&&(U==="stroke"||Z||!f.call(this))){for(var K,se,ne=[],ie=this.path,be=0;be<ie.length;be++){var ue=ie[be];switch(ue.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:ue,deltas:[],abs:[]});break;case"lt":var oe=ne.length;if(ie[be-1]&&!isNaN(ie[be-1].x)&&(K=[ue.x-ie[be-1].x,ue.y-ie[be-1].y],oe>0)){for(;oe>=0;oe--)if(ne[oe-1].close!==!0&&ne[oe-1].begin!==!0){ne[oe-1].deltas.push(K),ne[oe-1].abs.push(ue);break}}break;case"bct":K=[ue.x1-ie[be-1].x,ue.y1-ie[be-1].y,ue.x2-ie[be-1].x,ue.y2-ie[be-1].y,ue.x-ie[be-1].x,ue.y-ie[be-1].y],ne[ne.length-1].deltas.push(K);break;case"qct":var pe=ie[be-1].x+2/3*(ue.x1-ie[be-1].x),ye=ie[be-1].y+2/3*(ue.y1-ie[be-1].y),$e=ue.x+2/3*(ue.x1-ue.x),Se=ue.y+2/3*(ue.y1-ue.y),Y=ue.x,Le=ue.y;K=[pe-ie[be-1].x,ye-ie[be-1].y,$e-ie[be-1].x,Se-ie[be-1].y,Y-ie[be-1].x,Le-ie[be-1].y],ne[ne.length-1].deltas.push(K);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(ue)}}se=Z?null:U==="stroke"?"stroke":"fill";for(var xe=!1,mt=0;mt<ne.length;mt++)if(ne[mt].arc)for(var Ue=ne[mt].abs,xt=0;xt<Ue.length;xt++){var ut=Ue[xt];ut.type==="arc"?E.call(this,ut.x,ut.y,ut.radius,ut.startAngle,ut.endAngle,ut.counterclockwise,void 0,Z,!xe):L.call(this,ut.x,ut.y),xe=!0}else if(ne[mt].close===!0)this.pdf.internal.out("h"),xe=!1;else if(ne[mt].begin!==!0){var Ot=ne[mt].start.x,tt=ne[mt].start.y;z.call(this,ne[mt].deltas,Ot,tt),xe=!0}se&&O.call(this,se),Z&&$.call(this)}},A=function(U){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-K;case"top":return U+Z-K;case"hanging":return U+Z-2*K;case"middle":return U+Z/2-K;default:return U}},k=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(Z,K){this.colorStops.push([Z,K])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(U,Z,K,se,ne,ie,be,ue,oe){for(var pe=V.call(this,K,se,ne,ie),ye=0;ye<pe.length;ye++){var $e=pe[ye];ye===0&&(oe?T.call(this,$e.x1+U,$e.y1+Z):L.call(this,$e.x1+U,$e.y1+Z)),M.call(this,U,Z,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}ue?$.call(this):O.call(this,be)},O=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(U,Z){this.pdf.internal.out(s(U)+" "+n(Z)+" m")},I=function(U){var Z;switch(U.align){case"right":case"end":Z="right";break;case"center":Z="center";break;default:Z="left"}var K=this.pdf.getTextDimensions(U.text),se=A.call(this,U.y),ne=k.call(this,se)-K.h,ie=this.ctx.transform.applyToPoint(new o(U.x,se)),be=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var oe,pe,ye,$e=this.ctx.transform.applyToRectangle(new l(U.x,se,K.w,K.h)),Se=ue.applyToRectangle(new l(U.x,ne,K.w,K.h)),Y=g.call(this,Se),Le=[],xe=0;xe<Y.length;xe+=1)Le.indexOf(Y[xe])===-1&&Le.push(Y[xe]);if(N(Le),this.autoPaging)for(var mt=Le[0],Ue=Le[Le.length-1],xt=mt;xt<Ue+1;xt++){this.pdf.setPage(xt);var ut=xt===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],st=tt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Yt=At-this.margin[3],yr=xt===1?0:Ot+(xt-2)*st;if(this.ctx.clip_path.length!==0){var Zt=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(oe,this.posX+this.margin[3],-1*yr+ut),S.call(this,"fill",!0),this.path=Zt}var Vt=w([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-yr+ut+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*U.scale),ye=this.lineWidth,this.lineWidth=ye*U.scale);var tr=this.autoPaging!=="text";if(tr||Vt.y+Vt.h<=tt){if(tr||Vt.y>=ut&&Vt.x<=At){var $t=tr?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||At-Vt.x)[0],Dr=w([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-yr+ut+this.ctx.prevPageLastElemOffset)[0],Er=tr&&(xt>mt||xt<Ue)&&x.call(this);Er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,st,null).clip().discardPath()),this.pdf.text($t,Dr.x,Dr.y,{angle:U.angle,align:Z,renderingMode:U.renderingMode}),Er&&this.pdf.restoreGraphicsState()}}else Vt.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Vt.y);U.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=ye)}else U.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*U.scale),ye=this.lineWidth,this.lineWidth=ye*U.scale),this.pdf.text(U.text,ie.x+this.posX,ie.y+this.posY,{angle:U.angle,align:Z,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=ye)},L=function(U,Z,K,se){K=K||0,se=se||0,this.pdf.internal.out(s(U+K)+" "+n(Z+se)+" l")},z=function(U,Z,K){return this.pdf.lines(U,Z,K,null,null)},M=function(U,Z,K,se,ne,ie,be,ue){this.pdf.internal.out([e(a(K+U)),e(i(se+Z)),e(a(ne+U)),e(i(ie+Z)),e(a(be+U)),e(i(ue+Z)),"c"].join(" "))},V=function(U,Z,K,se){for(var ne=2*Math.PI,ie=Math.PI/2;Z>K;)Z-=ne;var be=Math.abs(K-Z);be<ne&&se&&(be=ne-be);for(var ue=[],oe=se?-1:1,pe=Z;be>1e-5;){var ye=pe+oe*Math.min(be,ie);ue.push(B.call(this,U,pe,ye)),be-=Math.abs(ye-pe),pe=ye}return ue},B=function(U,Z,K){var se=(K-Z)/2,ne=U*Math.cos(se),ie=U*Math.sin(se),be=ne,ue=-ie,oe=be*be+ue*ue,pe=oe+be*ne+ue*ie,ye=4/3*(Math.sqrt(2*oe*pe)-pe)/(be*ie-ue*ne),$e=be-ye*ue,Se=ue+ye*be,Y=$e,Le=-Se,xe=se+Z,mt=Math.cos(xe),Ue=Math.sin(xe);return{x1:U*Math.cos(Z),y1:U*Math.sin(Z),x2:$e*mt-Se*Ue,y2:$e*Ue+Se*mt,x3:Y*mt-Le*Ue,y3:Y*Ue+Le*mt,x4:U*Math.cos(K),y4:U*Math.sin(K)}},F=function(U){return 180*U/Math.PI},J=function(U,Z,K,se,ne,ie){var be=U+.5*(K-U),ue=Z+.5*(se-Z),oe=ne+.5*(K-ne),pe=ie+.5*(se-ie),ye=Math.min(U,ne,be,oe),$e=Math.max(U,ne,be,oe),Se=Math.min(Z,ie,ue,pe),Y=Math.max(Z,ie,ue,pe);return new l(ye,Se,$e-ye,Y-Se)},ee=function(U,Z,K,se,ne,ie,be,ue){var oe,pe,ye,$e,Se,Y,Le,xe,mt,Ue,xt,ut,Ot,tt,st=K-U,At=se-Z,Yt=ne-K,yr=ie-se,Zt=be-ne,Vt=ue-ie;for(pe=0;pe<41;pe++)mt=(Le=(ye=U+(oe=pe/40)*st)+oe*((Se=K+oe*Yt)-ye))+oe*(Se+oe*(ne+oe*Zt-Se)-Le),Ue=(xe=($e=Z+oe*At)+oe*((Y=se+oe*yr)-$e))+oe*(Y+oe*(ie+oe*Vt-Y)-xe),pe==0?(xt=mt,ut=Ue,Ot=mt,tt=Ue):(xt=Math.min(xt,mt),ut=Math.min(ut,Ue),Ot=Math.max(Ot,mt),tt=Math.max(tt,Ue));return new l(Math.round(xt),Math.round(ut),Math.round(Ot-xt),Math.round(tt-ut))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,Z,K=(U=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:Z}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(zr.API),(function(t){var e=function(o){var l,c,d,u,h,m,f,v,x,g;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(m=(h=((h=((h=((h=(h-(g=h%85))/85)-(x=h%85))/85)-(v=h%85))/85)-(f=h%85))/85)%85,c.push(m+33,f+33,v+33,x+33,g+33)):c.push(122);return(function(b,w){for(var N=w;N>0;N--)b.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},s=function(o){var l,c,d,u,h,m=String,f="length",v=255,x="charCodeAt",g="slice",b="replace";for(o[g](-2),o=o[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),d=[],u=0,h=(o+=l="uuuuu"[g](o[f]%5||5))[f];h>u;u+=5)c=52200625*(o[x](u)-33)+614125*(o[x](u+1)-33)+7225*(o[x](u+2)-33)+85*(o[x](u+3)-33)+(o[x](u+4)-33),d.push(v&c>>24,v&c>>16,v&c>>8,v&c);return(function(w,N){for(var C=N;C>0;C--)w.pop()})(d,l[f]),m.fromCharCode.apply(m,d)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=hO(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};t.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=s(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})(zr.API),(function(t){t.loadFile=function(e,s,n){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var h=new XMLHttpRequest,m=0,f=function(v){var x=v.length,g=[],b=String.fromCharCode;for(m=0;m<x;m+=1)g.push(b(255&v.charCodeAt(m)));return g.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(f(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return f(h.responseText)})(a,i,o)}catch{}return l})(e,s,n)},t.loadImageFile=t.loadFile})(zr.API),(function(t){function e(){return(As.html2canvas?Promise.resolve(As.html2canvas):V0(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function s(){return(As.DOMPurify?Promise.resolve(As.DOMPurify):V0(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=ea(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(l(h,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(s).then(function(d){return this.set({src:a("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var v=u[f],x=v.src.find(function(g){return g.format==="truetype"});x&&d.addFont(x.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||zr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,h).then(function(m){return d.updateProgress(1),m})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),m=d.call(h,l,c);return o.convert(m,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,zr.getPageSize=function(l,c,d){if(ea(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var h,m=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var v,x=0,g=0;if(f.hasOwnProperty(m))x=f[m][1]/h,g=f[m][0]/h;else try{x=d[1],g=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",g>x&&(v=g,g=x,x=v);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",x>g&&(v=g,g=x,x=v)}return{width:g,height:x,unit:c,k:h,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(HA):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}})(zr.API),zr.API.addJS=function(t){return rH=t,this.internal.events.subscribe("postPutResources",function(){vj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vj+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tH=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+rH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vj!==void 0&&tH!==void 0&&this.internal.out("/Names <</JavaScript "+vj+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var s=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=s.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];s.internal.newObjectDeferredBegin(c,!1)}s.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=s.internal.newObject();u.push(h);var m=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<u.length;i++)s.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");s.internal.write(" ] >>","endobj"),e=s.internal.newObject(),s.internal.write("<< /Dests "+f+" 0 R"),s.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(n){n.id=s.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},s.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},s.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=s.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},s.outline.line=function(n){this.ctx.val+=n+`\r
`},s.outline.makeRef=function(n){return n.id+" 0 R"},s.outline.makeString=function(n){return"("+s.internal.pdfEscape(n)+")"},s.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(zr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(s,n,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=o||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,c=(function(h){for(var m,f=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,x={width:0,height:0,numcomponents:1},g=4;g<v;g+=2){if(g+=f,e.indexOf(h.charCodeAt(g+1))!==-1){m=256*h.charCodeAt(g+5)+h.charCodeAt(g+6),x={width:256*h.charCodeAt(g+7)+h.charCodeAt(g+8),height:m,numcomponents:h.charCodeAt(g+9)};break}f=256*h.charCodeAt(g+2)+h.charCodeAt(g+3)}return x})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:s,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}})(zr.API),zr.API.processPNG=function(t,e,s,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,i=Ize(t,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,d=i.palette,u=i.depth;a=d&&c===1?(function(E){for(var O=E.width,$=E.height,T=E.data,I=E.palette,L=E.depth,z=!1,M=[],V=[],B=void 0,F=!1,J=0,ee=0;ee<I.length;ee++){var q=iq(I[ee],4),U=q[0],Z=q[1],K=q[2],se=q[3];M.push(U,Z,K),se!=null&&(se===0?(J++,V.length<1&&V.push(ee)):se<255&&(F=!0))}if(F||J>1){z=!0,V=void 0;var ne=O*$;B=new Uint8Array(ne);for(var ie=new DataView(T.buffer),be=0;be<ne;be++){var ue=YA(ie,be,L),oe=iq(I[ue],4)[3];B[be]=oe}}else J===0&&(V=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:z?8:void 0,colorBytes:T,alphaBytes:B,needSMask:z,palette:M,mask:V}})(i):c===2||c===4?(function(E){for(var O=E.data,$=E.width,T=E.height,I=E.channels,L=E.depth,z=I===2?"DeviceGray":"DeviceRGB",M=I-1,V=$*T,B=M,F=V*B,J=1*V,ee=Math.ceil(F*L/8),q=Math.ceil(J*L/8),U=new Uint8Array(ee),Z=new Uint8Array(q),K=new DataView(O.buffer),se=new DataView(U.buffer),ne=new DataView(Z.buffer),ie=!1,be=0;be<V;be++){for(var ue=be*I,oe=0;oe<B;oe++)uH(se,YA(K,ue+oe,L),be*B+oe,L);var pe=YA(K,ue+B,L);pe<(1<<L)-1&&(ie=!0),uH(ne,pe,1*be,L)}return{colorSpace:z,colorsPerPixel:M,sMaskBitsPerComponent:ie?L:void 0,colorBytes:U,alphaBytes:Z,needSMask:ie}})(i):(function(E){var O=E.data,$=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?(function(T){for(var I=T.length,L=new Uint8Array(2*I),z=new DataView(L.buffer,L.byteOffset,L.byteLength),M=0;M<I;M++)z.setUint16(2*M,T[M],!1);return L})(O):O,needSMask:!1}})(i);var h,m,f,v=a,x=v.colorSpace,g=v.colorsPerPixel,b=v.sMaskBitsPerComponent,w=v.colorBytes,N=v.alphaBytes,C=v.needSMask,S=v.palette,A=v.mask,k=null;return n!==zr.API.image_compression.NONE&&typeof hO=="function"?(k=(function(E){var O;switch(E){case zr.API.image_compression.FAST:O=11;break;case zr.API.image_compression.MEDIUM:O=13;break;case zr.API.image_compression.SLOW:O=14;break;default:O=12}return O})(n),h=this.decode.FLATE_DECODE,m="/Predictor ".concat(k," /Colors ").concat(g," /BitsPerComponent ").concat(u," /Columns ").concat(o),t=iH(w,Math.ceil(o*g*u/8),g,u,n),C&&(f=iH(N,Math.ceil(o*b/8),1,b,n))):(h=void 0,m=void 0,t=w,C&&(f=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:s,data:t,index:e,filter:h,decodeParameters:m,transparency:A,palette:S,sMask:f,predictor:k,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:b,colorSpace:x}}},(function(t){t.processGIF89A=function(e,s,n,a){var i=new eVe(e),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new KA(100).encode(d,100);return t.processJPEG.call(this,u,s,n,a)},t.processGIF87A=t.processGIF89A})(zr.API),au.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},au.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(s){ha.log("bit decode error:"+s)}},au.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),s=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}s!==0&&(this.pos+=4-s)}},au.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},au.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},au.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=t}},au.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),s=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&s)/s*255|0,d=(o>>11)/e*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=t}},au.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*s;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},au.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*s;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},au.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,s,n,a){var i=new au(e,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new KA(100).encode(c,100);return t.processJPEG.call(this,d,s,n,a)}})(zr.API),mH.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,s,n,a){var i=new mH(e),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new KA(100).encode(c,100);return t.processJPEG.call(this,d,s,n,a)}})(zr.API),zr.API.processRGBA=function(t,e,s){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=n[d],h=n[d+1],m=n[d+2],f=n[d+3];i[l++]=u,i[l++]=h,i[l++]=m,o[c++]=f}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},zr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},p0=zr.API,yj=p0.getCharWidthsArray=function(t,e){var s,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=e.doKerning!==!1,m=0,f=t.length,v=0,x=l[0]||c,g=[];for(s=0;s<f;s++)n=t.charCodeAt(s),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=h&&ea(d[n])==="object"&&!isNaN(parseInt(d[n][v],10))?d[n][v]/u:0,g.push((l[n]||x)/c+m)),v=n;return g},sH=p0.getStringUnitWidth=function(t,e){var s=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return p0.processArabic&&(t=p0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,s,a)/s:yj.apply(this,arguments).reduce(function(i,o){return i+o},0)},nH=function(t,e,s,n){for(var a=[],i=0,o=t.length,l=0;i!==o&&l+e[i]<s;)l+=e[i],i++;a.push(t.slice(0,i));var c=i;for(l=0;i!==o;)l+e[i]>n&&(a.push(t.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&a.push(t.slice(c,i)),a},aH=function(t,e,s){s||(s={});var n,a,i,o,l,c,d,u=[],h=[u],m=s.textIndent||0,f=0,v=0,x=t.split(" "),g=yj.apply(this,[" ",s])[0];if(c=s.lineIndent===-1?x[0].length+2:s.lineIndent||0){var b=Array(c).join(" "),w=[];x.map(function(C){(C=C.split(/\s*\n/)).length>1?w=w.concat(C.map(function(S,A){return(A&&S.length?`
`:"")+S})):w.push(C[0])}),x=w,c=sH.apply(this,[b,s])}for(i=0,o=x.length;i<o;i++){var N=0;if(n=x[i],c&&n[0]==`
`&&(n=n.substr(1),N=1),m+f+(v=(a=yj.apply(this,[n,s])).reduce(function(C,S){return C+S},0))>e||N){if(v>e){for(l=nH.apply(this,[n,a,e-(m+f),e]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(C,S){return C+S},0)}else u=[n];h.push(u),m=v+c,f=g}else u.push(n),m+=f+v,f=g}return d=c?function(C,S){return(S?b:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},p0.splitTextToSize=function(t,e,s){var n,a=(s=s||{}).fontSize||this.internal.getFontSize(),i=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return h.metadata[m]?{widths:h.metadata[m].widths||{0:1},kerning:h.metadata[m].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,s);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=s.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(aH.apply(this,[n[l],o,i]));return d},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",s="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[s[i]]=e[i],a[e[i]]=s[i];var o=function(m){return"0x"+parseInt(m,10).toString(16)},l=t.__fontmetrics__.compress=function(m){var f,v,x,g,b=["{"];for(var w in m){if(f=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=o(w).slice(2)).slice(0,-1)+a[v.slice(-1)]),typeof f=="number")f<0?(x=o(f).slice(3),g="-"):(x=o(f).slice(2),g=""),x=g+x.slice(0,-1)+a[x.slice(-1)];else{if(ea(f)!=="object")throw new Error("Don't know what to do with value type "+ea(f)+".");x=l(f)}b.push(v+x)}return b.push("}"),b.join("")},c=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,v,x,g,b={},w=1,N=b,C=[],S="",A="",k=m.length-1,E=1;E<k;E+=1)(g=m[E])=="'"?f?(x=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(C.push([N,x]),N={},x=void 0):g=="}"?((v=C.pop())[0][v[1]]=N,x=void 0,N=v[0]):g=="-"?w=-1:x===void 0?n.hasOwnProperty(g)?(S+=n[g],x=parseInt(S,16)*w,w=1,S=""):S+=g:n.hasOwnProperty(g)?(A+=n[g],N[x]=parseInt(A,16)*w,w=1,x=void 0,A=""):A+=g;return b},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var f=m.font,v=h.Unicode[f.postScriptName];v&&(f.metadata.Unicode={},f.metadata.Unicode.widths=v.widths,f.metadata.Unicode.kerning=v.kerning);var x=u.Unicode[f.postScriptName];x&&(f.metadata.Unicode.encoding=x,f.encoding=x.codePages[0])}])})(zr.API),(function(t){var e=function(s){for(var n=s.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=s.charCodeAt(i);return a};t.API.events.push(["addFont",function(s){var n=void 0,a=s.font,i=s.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Yj(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])})(zr),zr.API.addSvgAsImage=function(t,e,s,n,a,i,o,l){if(isNaN(e)||isNaN(s))throw ha.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw ha.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(As.canvg?Promise.resolve(As.canvg):V0(()=>import("./index.es-DbHZeQ0Y.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,s,n,a,o,l)})},zr.API.putTotalPages=function(t){var e,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),s=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,s);return this},zr.API.viewerPreferences=function(t,e){var s;t=t||{},e=e||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(v,x){var g,b=!1;for(g=0;g<v.length;g+=1)v[g]===x&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=l.length;for(h=0;h<f;h+=1)s[l[h]].value=s[l[h]].defaultValue,s[l[h]].explicitSet=!1}if(ea(t)==="object"){for(a in t)if(i=t[a],m(l,a)&&i!==void 0){if(s[a].type==="boolean"&&typeof i=="boolean")s[a].value=i;else if(s[a].type==="name"&&m(s[a].valueSet,i))s[a].value=i;else if(s[a].type==="integer"&&Number.isInteger(i))s[a].value=i;else if(s[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}s[a].value="["+c.join(" ")+"]"}else s[a].value=s[a].defaultValue;s[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,x=[];for(v in s)s[v].explicitSet===!0&&(s[v].type==="name"?x.push("/"+v+" /"+s[v].value):x.push("/"+v+" "+s[v].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",e)),this}})(zr.API),(function(t){var e=t.API,s=e.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(i).sort(function(f,v){return f-v})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",v=0;v<m.length;v++)f+=String.fromCharCode(m[v]);var x=d();u({data:f,addLength1:!0,objectId:x}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+j0(l.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var w=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+j0(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+j0(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",f=0;f<h.length;f++)m+=String.fromCharCode(h[f]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var x=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+j0(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+j0(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,f=h.activeFontKey,v=h.fonts,x=f,g="",b=0,w="",N=v[x].encoding;if(v[x].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(w=l,x=f,Array.isArray(l)&&(w=l[0]),b=0;b<w.length;b+=1)v[x].metadata.hasOwnProperty("cmap")&&(o=v[x].metadata.cmap.unicode.codeMap[w[b].charCodeAt(0)]),o||w[b].charCodeAt(0)<256&&v[x].metadata.hasOwnProperty("Unicode")?g+=w[b]:g+="";var C="";return parseInt(x.slice(1))<14||N==="WinAnsiEncoding"?C=m(g,x).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(C=s(g,v[x])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};e.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])})(zr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0},t.addFileToVFS=function(s,n){return e.call(this),this.internal.vFS[s]=n,this},t.getFileFromVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(zr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,o,l,c,d,u,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,N=0;this.__bidiEngine__={};var C=function(T){var I=T.charCodeAt(),L=I>>8,z=x[L];return z!==void 0?h[256*z+(255&I)]:L===252||L===253?"AL":b.test(L)?"L":L===8?"R":"N"},S=function(T){for(var I,L=0;L<T.length;L++){if((I=C(T.charAt(L)))==="L")return!1;if(I==="R")return!0}return!1},A=function(T,I,L,z){var M,V,B,F,J=I[z];switch(J){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(J="AN");break;case"AL":w=!0,J="R";break;case"WS":case"BN":J="N";break;case"CS":z<1||z+1>=I.length||(M=L[z-1])!=="EN"&&M!=="AN"||(V=I[z+1])!=="EN"&&V!=="AN"?J="N":w&&(V="AN"),J=V===M?V:"N";break;case"ES":J=(M=z>0?L[z-1]:"B")==="EN"&&z+1<I.length&&I[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&L[z-1]==="EN"){J="EN";break}if(w){J="N";break}for(B=z+1,F=I.length;B<F&&I[B]==="ET";)B++;J=B<F&&I[B]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(F=I.length,B=z+1;B<F&&I[B]==="NSM";)B++;if(B<F){var ee=T[z],q=ee>=1425&&ee<=2303||ee===64286;if(M=I[B],q&&(M==="R"||M==="AL")){J="R";break}}}J=z<1||(M=I[z-1])==="B"?"N":L[z-1];break;case"B":w=!1,a=!0,J=N;break;case"S":i=!0,J="N"}return J},k=function(T,I,L){var z=T.split("");return L&&E(z,L,{hiLevel:N}),z.reverse(),I&&I.reverse(),z.join("")},E=function(T,I,L){var z,M,V,B,F,J=-1,ee=T.length,q=0,U=[],Z=N?f:m,K=[];for(w=!1,a=!1,i=!1,M=0;M<ee;M++)K[M]=C(T[M]);for(V=0;V<ee;V++){if(F=q,U[V]=A(T,K,U,V),z=240&(q=Z[F][v[U[V]]]),q&=15,I[V]=B=Z[q][5],z>0)if(z===16){for(M=J;M<V;M++)I[M]=1;J=-1}else J=-1;if(Z[q][6])J===-1&&(J=V);else if(J>-1){for(M=J;M<V;M++)I[M]=B;J=-1}K[V]==="B"&&(I[V]=0),L.hiLevel|=B}i&&(function(se,ne,ie){for(var be=0;be<ie;be++)if(se[be]==="S"){ne[be]=N;for(var ue=be-1;ue>=0&&se[ue]==="WS";ue--)ne[ue]=N}})(K,I,ee)},O=function(T,I,L,z,M){if(!(M.hiLevel<T)){if(T===1&&N===1&&!a)return I.reverse(),void(L&&L.reverse());for(var V,B,F,J,ee=I.length,q=0;q<ee;){if(z[q]>=T){for(F=q+1;F<ee&&z[F]>=T;)F++;for(J=q,B=F-1;J<B;J++,B--)V=I[J],I[J]=I[B],I[B]=V,L&&(V=L[J],L[J]=L[B],L[B]=V);q=F}q++}}},$=function(T,I,L){var z=T.split(""),M={hiLevel:N};return L||(L=[]),E(z,L,M),(function(V,B,F){if(F.hiLevel!==0&&u)for(var J,ee=0;ee<V.length;ee++)B[ee]===1&&(J=g.indexOf(V[ee]))>=0&&(V[ee]=g[J+1])})(z,L,M),O(2,z,I,L,M),O(1,z,I,L,M),z.join("")};return this.__bidiEngine__.doBidiReorder=function(T,I,L){if((function(M,V){if(V)for(var B=0;B<M.length;B++)V[B]=B;l===void 0&&(l=S(M)),d===void 0&&(d=S(M))})(T,I),o||!c||d)if(o&&c&&l^d)N=l?1:0,T=k(T,I,L);else if(!o&&c&&d)N=l?1:0,T=$(T,I,L),T=k(T,I);else if(!o||l||c||d){if(o&&!c&&l^d)T=k(T,I),l?(N=0,T=$(T,I,L)):(N=1,T=$(T,I,L),T=k(T,I));else if(o&&l&&!c&&d)N=1,T=$(T,I,L),T=k(T,I);else if(!o&&!c&&l^d){var z=u;l?(N=1,T=$(T,I,L),N=0,u=!1,T=$(T,I,L),u=z):(N=0,T=$(T,I,L),T=k(T,I),N=1,u=!1,T=$(T,I,L),u=z,T=k(T,I))}}else N=0,T=$(T,I,L);else N=l?1:0,T=$(T,I,L);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([s.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([s.doBidiReorder(a[l])]);n.text=o}else n.text=s.doBidiReorder(a);s.setOptions({isInputVisual:!0})}])})(zr),zr.API.TTFFont=(function(){function t(e){var s;if(this.rawData=e,s=this.contents=new tp(e),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new pVe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new tVe(this.contents),this.head=new sVe(this),this.name=new lVe(this),this.cmap=new pae(this),this.toUnicode={},this.hhea=new nVe(this),this.maxp=new cVe(this),this.hmtx=new dVe(this),this.post=new iVe(this),this.os2=new aVe(this),this.loca=new fVe(this),this.glyf=new uVe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,s,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],d.push(Math.round(e*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(s=a>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var s;return((s=this.cmap.unicode)!=null?s.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*s},t.prototype.widthOfString=function(e,s,n){var a,i,o,l;for(o=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/s)||0;return o*(s/1e3)},t.prototype.lineHeight=function(e,s){var n;return s==null&&(s=!1),n=s?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var Fu,tp=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var s,n;for(n=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)n[s]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var s,n,a;for(a=[],s=0,n=e.length;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push(this.writeByte(e.charCodeAt(s)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,s,n,a,i,o,l,c;return e=this.readByte(),s=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^s)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*s+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var s,n;return s=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var s,n;for(s=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)s.push(this.readByte());return s},t.prototype.write=function(e){var s,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)s=e[n],i.push(this.writeByte(s));return i},t})(),tVe=(function(){var t;function e(s){var n,a,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(s){var n,a,i,o,l,c,d,u,h,m,f,v,x;for(x in f=Object.keys(s).length,c=Math.log(2),h=16*Math.floor(Math.log(f)/c),o=Math.floor(h/c),u=16*f-h,(a=new tp).writeInt(this.scalarType),a.writeShort(f),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*f,d=a.pos+i,l=null,v=[],s)for(m=s[x],a.writeString(x),a.writeInt(t(m)),a.writeInt(d),a.writeInt(m.length),v=v.concat(m),x==="head"&&(l=d),d+=m.length;d%4;)v.push(0),d++;return a.write(v),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(s){var n,a,i,o;for(s=xae.call(s);s.length%4;)s.push(0);for(i=new tp(s),a=0,n=0,o=s.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},e})(),rVe={}.hasOwnProperty,Lh=function(t,e){for(var s in e)rVe.call(e,s)&&(t[s]=e[s]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Fu=(function(){function t(e){var s;this.file=e,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var sVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var s;return(s=new tp).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(e),s.writeShort(this.glyphDataFormat),s.data},t})(),fH=(function(){function t(e,s){var n,a,i,o,l,c,d,u,h,m,f,v,x,g,b,w,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=s+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,i=(function(){var C,S;for(S=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)S.push(e.readUInt16());return S})(),e.pos+=2,x=(function(){var C,S;for(S=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)S.push(e.readUInt16());return S})(),d=(function(){var C,S;for(S=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)S.push(e.readUInt16());return S})(),u=(function(){var C,S;for(S=[],c=C=0;0<=m?C<m:C>m;c=0<=m?++C:--C)S.push(e.readUInt16());return S})(),a=(this.length-e.pos+this.offset)/2,l=(function(){var C,S;for(S=[],c=C=0;0<=a?C<a:C>a;c=0<=a?++C:--C)S.push(e.readUInt16());return S})(),c=b=0,N=i.length;b<N;c=++b)for(g=i[c],n=w=v=x[c];v<=g?w<=g:w>=g;n=v<=g?++w:--w)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-v)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}e.pos=h}return t.encode=function(e,s){var n,a,i,o,l,c,d,u,h,m,f,v,x,g,b,w,N,C,S,A,k,E,O,$,T,I,L,z,M,V,B,F,J,ee,q,U,Z,K,se,ne,ie,be,ue,oe,pe,ye;switch(z=new tp,o=Object.keys(e).sort(function($e,Se){return $e-Se}),s){case"macroman":for(x=0,g=(function(){var $e=[];for(v=0;v<256;++v)$e.push(0);return $e})(),w={0:0},i={},M=0,J=o.length;M<J;M++)w[ue=e[a=o[M]]]==null&&(w[ue]=++x),i[a]={old:e[a],new:w[e[a]]},g[a]=w[e[a]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(g),{charMap:i,subtable:z.data,maxGlyphID:x+1};case"unicode":for(I=[],h=[],N=0,w={},n={},b=d=null,V=0,ee=o.length;V<ee;V++)w[S=e[a=o[V]]]==null&&(w[S]=++N),n[a]={old:S,new:w[S]},l=w[S]-a,b!=null&&l===d||(b&&h.push(b),I.push(a),d=l),b=a;for(b&&h.push(b),h.push(65535),I.push(65535),$=2*(O=I.length),E=2*Math.pow(Math.log(O)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,k=2*O-E,c=[],A=[],f=[],v=B=0,q=I.length;B<q;v=++B){if(T=I[v],u=h[v],T===65535){c.push(0),A.push(0);break}if(T-(L=n[T].new)>=32768)for(c.push(0),A.push(2*(f.length+O-v)),a=F=T;T<=u?F<=u:F>=u;a=T<=u?++F:--F)f.push(n[a].new);else c.push(L-T),A.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*O+2*f.length),z.writeUInt16(0),z.writeUInt16($),z.writeUInt16(E),z.writeUInt16(m),z.writeUInt16(k),ie=0,U=h.length;ie<U;ie++)a=h[ie],z.writeUInt16(a);for(z.writeUInt16(0),be=0,Z=I.length;be<Z;be++)a=I[be],z.writeUInt16(a);for(oe=0,K=c.length;oe<K;oe++)l=c[oe],z.writeUInt16(l);for(pe=0,se=A.length;pe<se;pe++)C=A[pe],z.writeUInt16(C);for(ye=0,ne=f.length;ye<ne;ye++)x=f[ye],z.writeUInt16(x);return{charMap:n,subtable:z.data,maxGlyphID:N+1}}},t})(),pae=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="cmap",t.prototype.parse=function(e){var s,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)s=new fH(e,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(e,s){var n,a;return s==null&&(s="macroman"),n=fH.encode(e,s),(a=new tp).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t})(),nVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),aVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var s,n;for(n=[],s=0;s<10;++s)n.push(e.readByte());return n})(),this.charRange=(function(){var s,n;for(n=[],s=0;s<4;++s)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var s,n;for(n=[],s=0;s<2;s=++s)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),iVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="post",t.prototype.parse=function(e){var s,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)s=e.readByte(),a.push(this.names.push(e.readString(s)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(e.readUInt32());return c}.call(this)}},t})(),oVe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="name",t.prototype.parse=function(e){var s,n,a,i,o,l,c,d,u,h,m;for(e.pos=this.offset,e.readShort(),s=e.readShort(),l=e.readShort(),n=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},i=u=0,h=n.length;u<h;i=++u)a=n[i],e.pos=a.offset,d=e.readString(a.length),o=new oVe(d,a),c[m=a.nameID]==null&&(c[m]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),cVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),dVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="hmtx",t.prototype.parse=function(e){var s,n,a,i,o,l,c;for(e.pos=this.offset,this.metrics=[],s=0,l=this.file.hhea.numberOfMetrics;0<=l?s<l:s>l;s=0<=l?++s:--s)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],s=d=0;0<=a?d<a:d>a;s=0<=a?++d:--d)u.push(e.readInt16());return u})(),this.widths=function(){var d,u,h,m;for(m=[],d=0,u=(h=this.metrics).length;d<u;d++)i=h[d],m.push(i.advance);return m}.call(this),n=this.widths[this.widths.length-1],c=[],s=o=0;0<=a?o<a:o>a;s=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),xae=[].slice,uVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var s,n,a,i,o,l,c,d,u,h;return e in this.cache?this.cache[e]:(i=this.file.loca,s=this.file.contents,n=i.indexOf(e),(a=i.lengthOf(e))===0?this.cache[e]=null:(s.pos=this.offset+n,o=(l=new tp(s.read(a))).readShort(),d=l.readShort(),h=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[e]=o===-1?new mVe(l,d,h,c,u):new hVe(l,o,d,h,c,u),this.cache[e]))},t.prototype.encode=function(e,s,n){var a,i,o,l,c;for(o=[],i=[],l=0,c=s.length;l<c;l++)a=e[s[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},t})(),hVe=(function(){function t(e,s,n,a,i,o){this.raw=e,this.numberOfContours=s,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),mVe=(function(){function t(e,s,n,a,i){var o,l;for(this.raw=e,this.xMin=s,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,s,n;for(s=new tp(xae.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)s.pos=this.glyphOffsets[e];return s.data},t})(),fVe=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Lh(t,Fu),t.prototype.tag="loca",t.prototype.parse=function(e){var s,n;return e.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*e.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(e.readUInt32());return i}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,s){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<s.length&&s[i]==o){++i,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var d=new Array(4*n.length),u=0;u<n.length;++u)d[4*u+3]=255&n[u],d[4*u+2]=(65280&n[u])>>8,d[4*u+1]=(16711680&n[u])>>16,d[4*u]=(4278190080&n[u])>>24;return d},t})(),pVe=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,s,n,a,i;for(s in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[s],e[s]=a[n];return e},t.prototype.glyphsFor=function(e){var s,n,a,i,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[i=e[o]]=this.font.glyf.glyphFor(i);for(i in s=[],a)(n=a[i])!=null&&n.compound&&s.push.apply(s,n.glyphIDs);if(s.length>0)for(i in c=this.glyphsFor(s))n=c[i],a[i]=n;return a},t.prototype.encode=function(e,s){var n,a,i,o,l,c,d,u,h,m,f,v,x,g,b;for(a in n=pae.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},b=n.charMap)f[(c=b[a]).old]=c.new;for(v in m=n.maxGlyphID,o)v in f||(f[v]=m++);return u=(function(w){var N,C;for(N in C={},w)C[w[N]]=N;return C})(f),h=Object.keys(u).sort(function(w,N){return w-N}),x=(function(){var w,N,C;for(C=[],w=0,N=h.length;w<N;w++)l=h[w],C.push(u[l]);return C})(),i=this.font.glyf.encode(o,x,f),d=this.font.loca.encode(i.offsets,x),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t})();zr.API.PDFObject=(function(){var t;function e(){}return t=function(s,n){return(Array(n+1).join("0")+s).slice(-n)},e.convert=function(s){var n,a,i,o;if(Array.isArray(s))return"["+(function(){var l,c,d;for(d=[],l=0,c=s.length;l<c;l++)n=s[l],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+t(s.getUTCFullYear(),4)+t(s.getUTCMonth(),2)+t(s.getUTCDate(),2)+t(s.getUTCHours(),2)+t(s.getUTCMinutes(),2)+t(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(a in i=["<<"],s)o=s[a],i.push("/"+a+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+s},e})();function xVe(t){const e=gVe(t),s=j.forwardRef((n,a)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(yVe);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return r.jsx(e,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return r.jsx(e,{...o,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}function gVe(t){const e=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const o=wVe(a),l=bVe(i,a.props);return a.type!==j.Fragment&&(l.ref=n?Oh(n,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var vVe=Symbol("radix.slottable");function yVe(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vVe}function bVe(t,e){const s={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function wVe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var m3="Popover",[gae]=fl(m3,[Kv]),Uw=Kv(),[jVe,wp]=gae(m3),vae=t=>{const{__scopePopover:e,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=Uw(e),c=j.useRef(null),[d,u]=j.useState(!1),[h,m]=qc({prop:n,defaultProp:a??!1,onChange:i,caller:m3});return r.jsx(fI,{...l,children:r.jsx(jVe,{scope:e,contentId:Uc(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(f=>!f),[m]),hasCustomAnchor:d,onCustomAnchorAdd:j.useCallback(()=>u(!0),[]),onCustomAnchorRemove:j.useCallback(()=>u(!1),[]),modal:o,children:s})})};vae.displayName=m3;var yae="PopoverAnchor",NVe=j.forwardRef((t,e)=>{const{__scopePopover:s,...n}=t,a=wp(yae,s),i=Uw(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return j.useEffect(()=>(o(),()=>l()),[o,l]),r.jsx(i5,{...i,...n,ref:e})});NVe.displayName=yae;var bae="PopoverTrigger",wae=j.forwardRef((t,e)=>{const{__scopePopover:s,...n}=t,a=wp(bae,s),i=Uw(s),o=bs(e,a.triggerRef),l=r.jsx(Jr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":kae(a.open),...n,ref:o,onClick:ur(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(i5,{asChild:!0,...i,children:l})});wae.displayName=bae;var L8="PopoverPortal",[SVe,CVe]=gae(L8,{forceMount:void 0}),jae=t=>{const{__scopePopover:e,forceMount:s,children:n,container:a}=t,i=wp(L8,e);return r.jsx(SVe,{scope:e,forceMount:s,children:r.jsx(Uo,{present:s||i.open,children:r.jsx(vw,{asChild:!0,container:a,children:n})})})};jae.displayName=L8;var Lv="PopoverContent",Nae=j.forwardRef((t,e)=>{const s=CVe(Lv,t.__scopePopover),{forceMount:n=s.forceMount,...a}=t,i=wp(Lv,t.__scopePopover);return r.jsx(Uo,{present:n||i.open,children:i.modal?r.jsx(_Ve,{...a,ref:e}):r.jsx(AVe,{...a,ref:e})})});Nae.displayName=Lv;var kVe=xVe("PopoverContent.RemoveScroll"),_Ve=j.forwardRef((t,e)=>{const s=wp(Lv,t.__scopePopover),n=j.useRef(null),a=bs(e,n),i=j.useRef(!1);return j.useEffect(()=>{const o=n.current;if(o)return l5(o)},[]),r.jsx(bw,{as:kVe,allowPinchZoom:!0,children:r.jsx(Sae,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ur(t.onCloseAutoFocus,o=>{o.preventDefault(),i.current||s.triggerRef.current?.focus()}),onPointerDownOutside:ur(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ur(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),AVe=j.forwardRef((t,e)=>{const s=wp(Lv,t.__scopePopover),n=j.useRef(!1),a=j.useRef(!1);return r.jsx(Sae,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||s.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;s.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Sae=j.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,m=wp(Lv,s),f=Uw(s);return e5(),r.jsx(xw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(pw,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(pI,{"data-state":kae(m.open),role:"dialog",id:m.contentId,...f,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Cae="PopoverClose",EVe=j.forwardRef((t,e)=>{const{__scopePopover:s,...n}=t,a=wp(Cae,s);return r.jsx(Jr.button,{type:"button",...n,ref:e,onClick:ur(t.onClick,()=>a.onOpenChange(!1))})});EVe.displayName=Cae;var PVe="PopoverArrow",TVe=j.forwardRef((t,e)=>{const{__scopePopover:s,...n}=t,a=Uw(s);return r.jsx(xI,{...a,...n,ref:e})});TVe.displayName=PVe;function kae(t){return t?"open":"closed"}var OVe=vae,IVe=wae,$Ve=jae,DVe=Nae;function D4({...t}){return r.jsx(OVe,{"data-slot":"popover",...t})}function R4({...t}){return r.jsx(IVe,{"data-slot":"popover-trigger",...t})}function M4({className:t,align:e="center",sideOffset:s=4,...n}){return r.jsx($Ve,{children:r.jsx(DVe,{"data-slot":"popover-content",align:e,sideOffset:s,className:Ar("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}class RVe{static async findOrCreateCustomer(e,s,n,a){try{const{data:i,error:o}=await pt.from("customers").select("id").eq("email",n).maybeSingle();if(i)return i.id;const l=s.trim().split(/\s+/),c=l[0]||"",d=l.slice(1).join(" ")||"",{data:u,error:h}=await pt.from("customers").insert({first_name:c,last_name:d,email:n,phone:a,status:"active"}).select("id").single();if(h)throw h;if(!u)throw new Error("Failed to create customer");return u.id}catch(i){throw console.error("Error finding/creating customer:",i),i}}static async createAdminBooking(e){try{const{data:s,error:n}=await pt.from("venues").select("id").eq("id",e.venue_id).single();if(n||!s)throw new Error("Venue not found");const a=await this.findOrCreateCustomer("",e.customer_name,e.customer_email,e.customer_phone),{data:i,error:o}=await pt.rpc("check_game_availability",{p_game_id:e.game_id,p_booking_date:e.booking_date,p_start_time:e.start_time,p_end_time:e.end_time,p_exclude_booking_id:null});if(o)throw o;if(!i)throw new Error("Selected time slot is not available");const l=`BK-${Math.floor(1e4+Math.random()*9e4)}`,{data:c,error:d}=await pt.from("bookings").insert({venue_id:e.venue_id,confirmation_code:l,customer_id:a,game_id:e.game_id,booking_date:e.booking_date,booking_time:e.start_time,end_time:e.end_time,players:e.adults+e.children,status:"confirmed",total_amount:e.total_amount,deposit_amount:e.deposit_amount||0,payment_status:e.payment_status||"pending",payment_method:e.payment_method,notes:e.notes||null,customer_notes:e.customer_notes||null,source:"admin",metadata:{adults:e.adults,children:e.children}}).select().single();if(d)throw d;return c}catch(s){throw console.error("Error creating admin booking:",s),s}}static async checkSlotAvailability(e,s,n,a){try{const{data:i,error:o}=await pt.rpc("check_game_availability",{p_game_id:e,p_booking_date:s,p_start_time:n,p_end_time:a,p_exclude_booking_id:null});return o?(console.error("Error checking availability:",o),!1):i===!0}catch(i){return console.error("Exception checking availability:",i),!1}}}const MVe=t=>({id:t.confirmation_code||t.id,customer:t.customer_name||"Unknown",email:t.customer_email||"",phone:t.customer_phone||"",game:t.game_name||"Unknown Game",gameId:t.game_id,date:t.booking_date||"",time:t.booking_time||"",groupSize:t.players||0,adults:t.players||0,children:0,amount:Number(t.total_amount)||0,status:t.status||"pending",paymentMethod:t.payment_method||"Credit Card",notes:t.notes||"",assignedStaffId:t.metadata?.assigned_staff_id,checkInTime:t.metadata?.check_in_time,checkOutTime:t.metadata?.check_out_time,venueId:t.venue_id,venueName:t.venue_name||"Unknown Venue"}),LVe={"Mystery Manor":"#8b5cf6","Space Odyssey":"#3b82f6","Zombie Outbreak":"#ef4444","Treasure Hunt":"#f59e0b","Prison Break":"#10b981"},FVe=(t,e)=>{if(!t)return t;const[s,n]=t.split(":").map(Number);if(Number.isNaN(s)||Number.isNaN(n))return t;const a=new Date;a.setHours(s,n,0,0),a.setMinutes(a.getMinutes()+e);const i=a.getHours().toString().padStart(2,"0"),o=a.getMinutes().toString().padStart(2,"0");return`${i}:${o}`},XA=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number.isFinite(t)?t:0);function BVe(){const{theme:t}=Nr(),e=t==="dark",[s,n]=j.useState(void 0),{bookings:a,updateBooking:i,cancelBooking:o,refreshBookings:l}=pse(s),{games:c}=s3(),{venues:d}=n3(),{currentUser:u}=no(),h=j.useMemo(()=>(c||[]).map(Ce=>({id:Ce.id,name:Ce.name,venueId:Ce.venue_id,duration:Ce.duration??60,price:Number(Ce.price)||0,childPrice:Number(Ce.child_price??Ce.price)||Number(Ce.price)||0,color:LVe[Ce.name]||"#6b7280"})),[c]),m=e?"border-[#2a2a2a]":"border-gray-200",f=e?"bg-[#161616]":"bg-white",[v,x]=j.useState(()=>{const Ce=localStorage.getItem("bookingsDefaultView");return Ce?(localStorage.removeItem("bookingsDefaultView"),Ce):"month"}),[g,b]=j.useState(!1),[w,N]=j.useState(!1),[C,S]=j.useState(!1),[A,k]=j.useState(!1),[E,O]=j.useState(!1),[$,T]=j.useState(!1),[I,L]=j.useState(!1),[z,M]=j.useState(!1),[V,B]=j.useState(null),[F,J]=j.useState(new Date),[ee,q]=j.useState(new Date(new Date().getFullYear(),new Date().getMonth(),1)),[U,Z]=j.useState(!1),[K,se]=j.useState("csv"),[ne,ie]=j.useState("all"),[be,ue]=j.useState(!1);j.useEffect(()=>{const Ce=localStorage.getItem("bookingsDefaultView");Ce&&(x(Ce),localStorage.removeItem("bookingsDefaultView"))},[]);const oe=j.useMemo(()=>(a||[]).map(MVe),[a]),[pe,ye]=j.useState([]),[$e,Se]=j.useState("all"),[Y,Le]=j.useState(void 0),[xe,mt]=j.useState(void 0),[Ue,xt]=j.useState(!1),[ut,Ot]=j.useState(""),[tt,st]=j.useState("all"),[At,Yt]=j.useState("all-games"),yr=Ce=>{B(Ce),k(!0)},Zt=async()=>{try{if(!V)return;const Ce=(a||[]).find(Qe=>Qe.confirmation_code===V.id||Qe.id===V.id);Ce&&await i(Ce.id,{status:V.status,metadata:{...Ce.metadata,assigned_staff_id:V.assignedStaffId||Ce.metadata?.assigned_staff_id}}),await l(),re.success("Changes saved")}catch(Ce){console.error("Failed to save booking changes:",Ce),re.error("Failed to save changes")}},Vt=Ce=>{B(Ce),O(!0)},tr=Ce=>{J(Ce),M(!0)},$t=Ce=>{const Qe=Ce.toISOString().split("T")[0];return oe.filter(He=>He.date===Qe)},Dr=Ce=>new Date(Ce).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Er=()=>{ue(!0);try{const Ce=or;if(K==="csv"){const Qe=["Booking ID","Customer","Email","Phone","Game","Date","Time","Group Size","Adults","Children","Amount","Status","Payment Method","Assigned Staff","Check In","Check Out","Notes"],He=nt=>'"'+(nt==null?"":String(nt)).replace(/"/g,'""')+'"',vt=Ce.map(nt=>[He(nt.id),He(nt.customer),He(nt.email),He(nt.phone),He(nt.game),He(Dr(nt.date)),He(nt.time),He(nt.groupSize),He(nt.adults),He(nt.children),He(nt.amount),He(nt.status),He(nt.paymentMethod),He(nt.assignedStaffId?pe.find(It=>It.id===nt.assignedStaffId)?.name||nt.assignedStaffId:""),He(nt.checkInTime||""),He(nt.checkOutTime||""),He(nt.notes||"")].join(",")),le=[Qe.join(","),...vt].join(`
`),Ee=new Blob([le],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL(Ee),at=document.createElement("a");at.href=We,at.download=`bookings_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(at),at.click(),document.body.removeChild(at),URL.revokeObjectURL(We)}else{const Qe=new zr;let He=20;Qe.setFontSize(16),Qe.text("Bookings Export",14,He),He+=8,Qe.setFontSize(11),Qe.text(`Generated: ${new Date().toLocaleString()}`,14,He),He+=10,Ce.forEach(vt=>{const le=`ID ${vt.id}  ${vt.customer}  ${vt.game}  ${Dr(vt.date)} ${vt.time}  ${vt.groupSize} ppl  $${vt.amount}  ${vt.status}`;He>280&&(Qe.addPage(),He=20),Qe.text(le,14,He),He+=7}),Qe.save(`bookings_${new Date().toISOString().slice(0,10)}.pdf`)}re.success(`Bookings exported successfully as ${K.toUpperCase()}`)}catch(Ce){console.error(Ce),re.error("Failed to export bookings")}finally{ue(!1),Z(!1)}},hr=Ce=>{B(Ce),T(!0)},Ct=async(Ce,Qe)=>{if(V)try{const He=(a||[]).find(vt=>vt.confirmation_code===V.id||vt.id===V.id);He&&await i(He.id,{booking_date:Ce,booking_time:Qe}),T(!1),k(!1),B(null),re.success("Booking rescheduled")}catch(He){console.error("Failed to reschedule:",He),re.error("Failed to reschedule booking")}},is=Ce=>{B(Ce),L(!0)},cr=async Ce=>{if(V)try{const Qe=(a||[]).find(He=>He.confirmation_code===V.id||He.id===V.id);Qe&&await o(Qe.id,Ce,!1),L(!1),B(null),re.success("Booking cancelled")}catch(Qe){console.error("Failed to cancel:",Qe),re.error("Failed to cancel booking")}},Pt=Ce=>{re.success("Confirmation email sent to "+Ce.email)},kt=()=>$e==="all"?"All Time":$e==="today"?"Today":$e==="yesterday"?"Yesterday":$e==="last7days"?"Last 7 Days":$e==="last30days"?"Last 30 Days":$e==="thisWeek"?"This Week":$e==="lastWeek"?"Last Week":$e==="thisMonth"?"This Month":$e==="lastMonth"?"Last Month":$e==="thisQuarter"?"This Quarter":$e==="thisYear"?"This Year":$e==="custom"&&Y&&xe?`${Y.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${xe.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`:"Select Date Range",zt=Ce=>{if($e==="all")return!0;const Qe=new Date(Ce),He=new Date;if(He.setHours(0,0,0,0),$e==="today"){const vt=He.toISOString().split("T")[0];return Ce===vt}if($e==="yesterday"){const vt=new Date(He);return vt.setDate(vt.getDate()-1),Ce===vt.toISOString().split("T")[0]}if($e==="last7days"){const vt=new Date(He);return vt.setDate(vt.getDate()-7),Qe>=vt&&Qe<=He}if($e==="last30days"){const vt=new Date(He);return vt.setDate(vt.getDate()-30),Qe>=vt&&Qe<=He}if($e==="thisWeek"){const vt=new Date(He);vt.setDate(He.getDate()-He.getDay());const le=new Date(vt);return le.setDate(vt.getDate()+6),Qe>=vt&&Qe<=le}if($e==="lastWeek"){const vt=new Date(He);vt.setDate(He.getDate()-He.getDay()-7);const le=new Date(vt);return le.setDate(vt.getDate()+6),Qe>=vt&&Qe<=le}if($e==="thisMonth")return Qe.getMonth()===He.getMonth()&&Qe.getFullYear()===He.getFullYear();if($e==="lastMonth"){const vt=new Date(He.getFullYear(),He.getMonth()-1,1);return Qe.getMonth()===vt.getMonth()&&Qe.getFullYear()===vt.getFullYear()}if($e==="thisQuarter"){const vt=Math.floor(He.getMonth()/3);return Math.floor(Qe.getMonth()/3)===vt&&Qe.getFullYear()===He.getFullYear()}if($e==="thisYear")return Qe.getFullYear()===He.getFullYear();if($e==="custom"&&Y&&xe){const vt=new Date(Y);vt.setHours(0,0,0,0);const le=new Date(xe);return le.setHours(23,59,59,999),Qe>=vt&&Qe<=le}return!0},or=oe.filter(Ce=>{const Qe=ut===""||Ce.customer.toLowerCase().includes(ut.toLowerCase())||Ce.email.toLowerCase().includes(ut.toLowerCase())||Ce.id.toLowerCase().includes(ut.toLowerCase()),He=tt==="all"||Ce.status===tt,vt=At==="all-games"||Ce.game===At,le=zt(Ce.date);return Qe&&He&&vt&&le}),Re=async(Ce,Qe)=>{try{const He=(a||[]).find(vt=>vt.confirmation_code===Ce||vt.id===Ce);He&&await i(He.id,{metadata:{...He.metadata,assigned_staff_id:Qe}}),re.success("Staff assigned")}catch(He){console.error("Failed to assign staff:",He),re.error("Failed to assign staff")}},Je=async(Ce,Qe)=>{try{const He=(a||[]).find(vt=>vt.confirmation_code===Ce||vt.id===Ce);He&&await i(He.id,{status:Qe}),re.success("Status updated")}catch(He){console.error("Failed to update status:",He),re.error("Failed to update status")}},bt=async Ce=>{try{const Qe=new Date().toISOString(),He=(a||[]).find(vt=>vt.confirmation_code===Ce||vt.id===Ce);He&&await i(He.id,{status:"confirmed",metadata:{...He.metadata,check_in_time:Qe}}),re.success("Checked in")}catch(Qe){console.error("Failed to check in:",Qe),re.error("Failed to check in")}},gr=async Ce=>{try{const Qe=new Date().toISOString(),He=(a||[]).find(vt=>vt.confirmation_code===Ce||vt.id===Ce);He&&await i(He.id,{status:"completed",metadata:{...He.metadata,check_out_time:Qe}}),re.success("Checked out")}catch(Qe){console.error("Failed to check out:",Qe),re.error("Failed to check out")}},je=async Ce=>{if(!g)try{b(!0),await RVe.createAdminBooking({venue_id:Ce.venueId,game_id:Ce.gameId,customer_name:`${Ce.firstName} ${Ce.lastName}`.trim(),customer_email:Ce.email,customer_phone:Ce.phone,booking_date:Ce.date,start_time:Ce.time,end_time:Ce.endTime,adults:Ce.adults,children:Ce.children,total_amount:Ce.totalAmount,payment_method:Ce.paymentMethod,payment_status:Ce.paymentStatus,deposit_amount:Ce.depositAmount,notes:Ce.notes?.trim()?Ce.notes:void 0,customer_notes:Ce.customerNotes?.trim()?Ce.customerNotes:void 0}),re.success("Booking created successfully"),await l(),x("month")}catch(Qe){throw console.error("Failed to create booking:",Qe),re.error(Qe?.message||"Failed to create booking"),Qe}finally{b(!1)}};return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsx(Ei,{title:"Bookings",description:"Manage and track all your bookings",sticky:!0,action:r.jsxs("div",{className:"flex gap-2 w-full",children:[r.jsx(W,{variant:"outline",size:"icon",onClick:async()=>{N(!0);try{await l(),re.success("Bookings refreshed successfully")}catch{re.error("Failed to refresh bookings")}finally{N(!1)}},disabled:w,className:"h-11 w-11 flex-shrink-0",children:r.jsx(ju,{className:`w-4 h-4 ${w?"animate-spin":""}`})}),r.jsxs(W,{className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] flex-1 sm:flex-initial sm:w-auto h-11 flex items-center justify-center gap-2",onClick:()=>S(!0),children:[r.jsx(Ts,{className:"w-4 h-4"}),r.jsx("span",{children:"Add New Booking"})]})]})}),r.jsx(he,{className:`${f} border ${m} shadow-sm`,children:r.jsx(_e,{className:"p-3 sm:p-6",children:r.jsxs("div",{className:"flex flex-col gap-2.5 sm:gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search by customer name, email, or booking ID...",className:"pl-10 h-11",value:ut,onChange:Ce=>Ot(Ce.target.value)})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:flex gap-2 sm:gap-3",children:[r.jsxs(D4,{open:Ue,onOpenChange:xt,children:[r.jsx(R4,{asChild:!0,children:r.jsxs(W,{variant:"outline",className:"h-11 col-span-2 sm:col-span-1 sm:flex-initial sm:min-w-[200px] justify-start",children:[r.jsx(qs,{className:"w-4 h-4 mr-2 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:kt()})]})}),r.jsx(M4,{className:"w-auto p-0",align:"start",children:r.jsxs("div",{className:"flex flex-col sm:flex-row",children:[r.jsx("div",{className:"border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-[#2a2a2a] p-3",children:r.jsxs("div",{className:"space-y-1 min-w-[180px]",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] px-2 py-1",children:"Quick Select"}),r.jsx(W,{variant:$e==="all"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("all"),xt(!1)},children:"All Time"}),r.jsx(W,{variant:$e==="today"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("today"),xt(!1)},children:"Today"}),r.jsx(W,{variant:$e==="yesterday"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("yesterday"),xt(!1)},children:"Yesterday"}),r.jsx(W,{variant:$e==="last7days"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("last7days"),xt(!1)},children:"Last 7 Days"}),r.jsx(W,{variant:$e==="last30days"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("last30days"),xt(!1)},children:"Last 30 Days"}),r.jsx(Ze,{className:"my-2"}),r.jsx("p",{className:"text-xs text-gray-500 px-2 py-1",children:"By Period"}),r.jsx(W,{variant:$e==="thisWeek"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("thisWeek"),xt(!1)},children:"This Week"}),r.jsx(W,{variant:$e==="lastWeek"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("lastWeek"),xt(!1)},children:"Last Week"}),r.jsx(W,{variant:$e==="thisMonth"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("thisMonth"),xt(!1)},children:"This Month"}),r.jsx(W,{variant:$e==="lastMonth"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("lastMonth"),xt(!1)},children:"Last Month"}),r.jsx(W,{variant:$e==="thisQuarter"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("thisQuarter"),xt(!1)},children:"This Quarter"}),r.jsx(W,{variant:$e==="thisYear"?"secondary":"ghost",className:"w-full justify-start h-9 text-sm",onClick:()=>{Se("thisYear"),xt(!1)},children:"This Year"})]})}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm text-gray-900 mb-2 px-2",children:"Custom Range"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-600 px-2",children:"Start Date"}),r.jsx(Ah,{mode:"single",selected:Y,onSelect:Ce=>{Le(Ce),Ce&&xe&&Se("custom")},className:"rounded-md border-0"})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-600 px-2",children:"End Date"}),r.jsx(Ah,{mode:"single",selected:xe,onSelect:Ce=>{mt(Ce),Y&&Ce&&Se("custom")},disabled:Ce=>Y?Ce<Y:!1,className:"rounded-md border-0"})]}),Y&&xe&&r.jsx(W,{className:"w-full bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca]",onClick:()=>{Se("custom"),xt(!1)},children:"Apply Range"})]})]})]})})]}),r.jsxs(sr,{value:s||"all-venues",onValueChange:Ce=>{n(Ce==="all-venues"?void 0:Ce),x("month")},children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{placeholder:"All Venues"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all-venues",children:"All Venues"}),(d||[]).map(Ce=>r.jsx(Ae,{value:Ce.id,children:Ce.name},Ce.id))]})]}),r.jsxs(sr,{value:tt,onValueChange:st,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{placeholder:"Status"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Status"}),r.jsx(Ae,{value:"confirmed",children:"Confirmed"}),r.jsx(Ae,{value:"pending",children:"Pending"}),r.jsx(Ae,{value:"cancelled",children:"Cancelled"}),r.jsx(Ae,{value:"no-show",children:"No Show"}),r.jsx(Ae,{value:"completed",children:"Completed"})]})]}),r.jsxs(sr,{value:At,onValueChange:Yt,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{placeholder:"Game"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all-games",children:"All Games"}),r.jsx(Ae,{value:"Mystery Manor",children:"Mystery Manor"}),r.jsx(Ae,{value:"Space Odyssey",children:"Space Odyssey"}),r.jsx(Ae,{value:"Zombie Outbreak",children:"Zombie Outbreak"}),r.jsx(Ae,{value:"Treasure Hunt",children:"Treasure Hunt"}),r.jsx(Ae,{value:"Prison Break",children:"Prison Break"})]})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"outline",size:"icon",className:"sm:hidden h-11 w-11 flex-shrink-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsx(Eu,{permissions:["bookings.export"],children:r.jsxs(Dt,{onClick:()=>Z(!0),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]})}),r.jsxs(Dt,{onClick:()=>{Ot(""),st("all"),Yt("all-games"),Se("all"),n(void 0),re.success("Filters cleared")},children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]})]}),r.jsx(Eu,{permissions:["bookings.export"],children:r.jsxs(W,{variant:"outline",onClick:()=>Z(!0),className:"hidden sm:flex h-11",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]})})]}),(ut||tt!=="all"||At!=="all-games"||$e!=="all"||s)&&r.jsxs("div",{className:"flex items-center gap-2 text-xs flex-wrap",children:[r.jsx("span",{className:"text-gray-600 dark:text-[#737373]",children:"Active filters:"}),ut&&r.jsxs(De,{variant:"secondary",className:"gap-1 bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3]",children:["Search: ",ut,r.jsx("button",{onClick:()=>Ot(""),className:"ml-1 hover:text-red-600 dark:hover:text-red-500",children:""})]}),tt!=="all"&&r.jsxs(De,{variant:"secondary",className:"gap-1 bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3]",children:["Status: ",tt,r.jsx("button",{onClick:()=>st("all"),className:"ml-1 hover:text-red-600 dark:hover:text-red-500",children:""})]}),At!=="all-games"&&r.jsxs(De,{variant:"secondary",className:"gap-1 bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3]",children:["Game: ",At,r.jsx("button",{onClick:()=>Yt("all-games"),className:"ml-1 hover:text-red-600 dark:hover:text-red-500",children:""})]}),$e!=="all"&&r.jsxs(De,{variant:"secondary",className:"gap-1 bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3]",children:["Date: ",kt(),r.jsx("button",{onClick:()=>Se("all"),className:"ml-1 hover:text-red-600 dark:hover:text-red-500",children:""})]}),s&&r.jsxs(De,{variant:"secondary",className:"gap-1 bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3]",children:["Venue: ",d?.find(Ce=>Ce.id===s)?.name||"Selected",r.jsx("button",{onClick:()=>n(void 0),className:"ml-1 hover:text-red-600 dark:hover:text-red-500",children:""})]}),r.jsx("button",{onClick:()=>{Ot(""),st("all"),Yt("all-games"),Se("all"),n(void 0)},className:"text-[#4f46e5] dark:text-[#6366f1] hover:text-[#4338ca] dark:hover:text-[#818cf8] ml-auto",children:"Clear all"})]})]})})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[r.jsx(wn,{value:v,onValueChange:Ce=>x(Ce),className:"w-full sm:w-auto",children:r.jsxs(kn,{className:"w-full sm:w-auto flex overflow-hidden",children:[r.jsxs(Tt,{value:"month",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(Ed,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Month"})]}),r.jsxs(Tt,{value:"week",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(rI,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Week"})]}),r.jsxs(Tt,{value:"day",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(jr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Day"})]}),r.jsxs(Tt,{value:"schedule",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(DY,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Schedule"})]}),r.jsxs(Tt,{value:"table",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(J4,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:"Table"})]})]})}),r.jsxs(sr,{value:s||"all",onValueChange:Ce=>{n(Ce==="all"?void 0:Ce),x("month")},children:[r.jsx(ar,{className:"w-full sm:w-[200px]",children:r.jsx(nr,{placeholder:"All Venues"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Venues"}),(d||[]).map(Ce=>r.jsx(Ae,{value:Ce.id,children:Ce.name},Ce.id))]})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-[#737373]",children:[or.length," ",or.length!==oe.length&&`of ${oe.length}`," booking",or.length!==1?"s":""]})]}),v==="month"&&r.jsx(UVe,{bookings:or,onViewDetails:yr,onShowAttendees:tr,calendarMonth:ee,setCalendarMonth:q,gamesData:h}),v==="week"&&r.jsx(zVe,{bookings:or,onViewDetails:yr,selectedDate:F||new Date,setSelectedDate:J,gamesData:h}),v==="day"&&r.jsx(VVe,{bookings:or,onViewDetails:yr,selectedDate:F||new Date,setSelectedDate:J,gamesData:h}),v==="schedule"&&r.jsx(WVe,{bookings:or,onViewDetails:yr,selectedDate:F||new Date,setSelectedDate:J,gamesData:h}),v==="table"&&r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm",children:[r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsx(Xe,{children:"All Bookings"})}),r.jsxs(_e,{className:"p-0 sm:p-6 sm:pt-0",children:[r.jsx("div",{className:"block lg:hidden space-y-3 p-4",children:or.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(oa,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-[#404040] mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-[#737373]",children:"No bookings found"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-[#525252] mt-1",children:"Try adjusting your filters"})]}):or.map(Ce=>r.jsx(he,{className:"border border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-all",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white truncate",children:Ce.customer}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373]",children:Ce.id}),Ce.assignedStaffId&&r.jsxs("p",{className:"text-xs text-gray-600 dark:text-[#737373] mt-1",children:["Assigned: ",pe.find(Qe=>Qe.id===Ce.assignedStaffId)?.name||Ce.assignedStaffId]})]}),r.jsx(De,{variant:"secondary",className:`flex-shrink-0 text-xs border
                            ${Ce.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":""}
                            ${Ce.status==="pending"?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30":""}
                            ${Ce.status==="cancelled"?"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30":""}
                            ${Ce.status==="no-show"?"bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400 border-gray-200 dark:border-gray-500/30":""}
                            ${Ce.status==="completed"?"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-500/30":""}
                          `,children:Ce.status})]}),r.jsx(Ze,{className:"dark:bg-[#2a2a2a]"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs sm:text-sm",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-gray-500 dark:text-[#737373] text-xs",children:"Game"}),r.jsx("p",{className:"text-gray-900 dark:text-white truncate",children:Ce.game})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-gray-500 dark:text-[#737373] text-xs",children:"Date & Time"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-xs sm:text-sm",children:Dr(Ce.date)}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373]",children:Ce.time})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-gray-500 dark:text-[#737373] text-xs",children:"Group Size"}),r.jsxs("p",{className:"text-gray-900 dark:text-white",children:[Ce.groupSize," people"]})]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-gray-500 dark:text-[#737373] text-xs",children:"Amount"}),r.jsxs("p",{className:"text-gray-900 dark:text-white",children:["$",Ce.amount]})]})]}),r.jsx(Ze,{className:"dark:bg-[#2a2a2a]"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",className:"flex-1 h-9",onClick:()=>yr(Ce),children:[r.jsx(ys,{className:"w-4 h-4 mr-1.5"}),r.jsx("span",{className:"text-xs sm:text-sm",children:"View"})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"outline",size:"sm",className:"h-9 w-9 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>hr(Ce),children:[r.jsx(ju,{className:"w-4 h-4 mr-2"}),"Reschedule"]}),r.jsxs(Dt,{onClick:()=>Pt(Ce),children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Send Confirmation"]}),r.jsxs(Dt,{onClick:()=>Vt(Ce),children:[r.jsx(In,{className:"w-4 h-4 mr-2"}),"Process Refund"]}),r.jsx(Ze,{}),r.jsxs(Dt,{onClick:()=>bt(Ce.id),children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check In"]}),r.jsxs(Dt,{onClick:()=>gr(Ce.id),children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check Out"]}),r.jsx(Ze,{}),Ce.status!=="cancelled"&&r.jsxs(Dt,{className:"text-red-600 dark:text-red-500",onClick:()=>is(Ce),children:[r.jsx(hs,{className:"w-4 h-4 mr-2"}),"Cancel Booking"]})]})]})]})]})})},Ce.id))}),r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:or.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(oa,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-[#404040] mb-3"}),r.jsx("p",{className:"text-gray-500 dark:text-[#737373]",children:"No bookings found"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-[#525252] mt-1",children:"Try adjusting your filters"})]}):r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx(fs,{children:"Booking ID"}),r.jsx(fs,{children:"Customer"}),r.jsx(fs,{children:"Game"}),r.jsx(fs,{children:"Date & Time"}),r.jsx(fs,{children:"Group Size"}),r.jsx(fs,{children:"Assigned Staff"}),r.jsx(fs,{children:"Amount"}),r.jsx(fs,{children:"Status"}),r.jsx(fs,{className:"text-right",children:"Actions"})]})}),r.jsx(Ux,{children:or.map(Ce=>r.jsxs(ui,{className:"border-gray-200 dark:border-[#2a2a2a] hover:bg-gray-50 dark:hover:bg-[#1a1a1a]",children:[r.jsx(Jt,{className:"text-gray-900 dark:text-white",children:Ce.id}),r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:Ce.customer}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373]",children:Ce.email})]})}),r.jsx(Jt,{className:"text-gray-900 dark:text-white",children:Ce.game}),r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:Dr(Ce.date)}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373]",children:Ce.time})]})}),r.jsxs(Jt,{className:"text-gray-900 dark:text-white",children:[Ce.groupSize," people"]}),r.jsx(Jt,{className:"text-gray-900 dark:text-white",children:Ce.assignedStaffId?pe.find(Qe=>Qe.id===Ce.assignedStaffId)?.name||Ce.assignedStaffId:"-"}),r.jsxs(Jt,{className:"text-gray-900 dark:text-white",children:["$",Ce.amount]}),r.jsx(Jt,{children:r.jsx(De,{variant:"secondary",className:`border
                          ${Ce.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":""}
                          ${Ce.status==="pending"?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30":""}
                          ${Ce.status==="cancelled"?"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30":""}
                          ${Ce.status==="no-show"?"bg-gray-100 dark:bg-gray-500/20 text-gray-700 dark:text-gray-400 border-gray-200 dark:border-gray-500/30":""}
                          ${Ce.status==="completed"?"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-500/30":""}
                        `,children:Ce.status})}),r.jsx(Jt,{className:"text-right",children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>yr(Ce),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{onClick:()=>Pt(Ce),children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Send Confirmation"]}),r.jsxs(Dt,{onClick:()=>hr(Ce),children:[r.jsx(ju,{className:"w-4 h-4 mr-2"}),"Reschedule"]}),Ce.status==="confirmed"&&r.jsxs(Dt,{onClick:()=>Vt(Ce),children:[r.jsx(ju,{className:"w-4 h-4 mr-2"}),"Process Refund"]}),r.jsxs(Dt,{onClick:()=>bt(Ce.id),children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check In"]}),r.jsxs(Dt,{onClick:()=>gr(Ce.id),children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check Out"]}),r.jsxs(Dt,{className:"text-[#4f46e5]",onClick:()=>{B(Ce),k(!0)},children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Assign Staff"]}),r.jsxs(Dt,{className:"text-red-600 dark:text-red-500",onClick:()=>is(Ce),children:[r.jsx(hs,{className:"w-4 h-4 mr-2"}),"Cancel Booking"]})]})]})})]},Ce.id))})]})})]})]}),r.jsx(qVe,{open:C,onOpenChange:S,bookings:oe,gamesData:h,venues:d,onCreate:je,isSubmitting:g}),r.jsx(HVe,{open:A,onOpenChange:Ce=>{k(Ce),Ce||B(null)},booking:V,onRefund:Vt,onReschedule:hr,staffList:pe,onAssignStaff:Ce=>V&&Re(V.id,Ce),onUpdateStatus:Ce=>V&&Je(V.id,Ce),onCheckIn:()=>V&&bt(V.id),onCheckOut:()=>V&&gr(V.id),onSendConfirmation:()=>V&&Pt(V),onSave:Zt}),r.jsx(GVe,{open:E,onOpenChange:O,booking:V}),r.jsx(XVe,{open:$,onOpenChange:Ce=>{T(Ce),Ce||B(null)},booking:V,bookings:oe,onConfirm:Ct}),r.jsx(YVe,{open:z,onOpenChange:M,date:F,bookings:F?$t(F):[],gamesData:h}),r.jsx(QVe,{open:I,onOpenChange:Ce=>{L(Ce),Ce||B(null)},booking:V,onConfirm:cr}),r.jsx(mr,{open:U,onOpenChange:Z,children:r.jsxs(fr,{className:"max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none overflow-y-auto max-h-[90vh]",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Export Bookings"}),r.jsx(wr,{children:"Download your booking data in your preferred format"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-sm text-gray-900 dark:text-white mb-2",children:"Export Format"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-2",children:[r.jsxs("button",{onClick:()=>se("csv"),className:`p-4 border-2 rounded-lg text-left transition-all ${K==="csv"?"border-[#4f46e5] dark:border-[#6366f1] bg-blue-50 dark:bg-[#4f46e5]/10":"border-gray-200 dark:border-[#2a2a2a] hover:border-gray-300 dark:hover:border-[#404040]"}`,children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"CSV File"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-[#737373] mt-1",children:"Excel compatible spreadsheet"})]}),r.jsxs("button",{onClick:()=>se("pdf"),className:`p-4 border-2 rounded-lg text-left transition-all ${K==="pdf"?"border-[#4f46e5] dark:border-[#6366f1] bg-blue-50 dark:bg-[#4f46e5]/10":"border-gray-200 dark:border-[#2a2a2a] hover:border-gray-300 dark:hover:border-[#404040]"}`,children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:"PDF File"}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-[#737373] mt-1",children:"Printable document format"})]})]})]}),r.jsx(Ze,{className:"dark:bg-[#2a2a2a]"}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"date-range",className:"text-sm text-gray-900 dark:text-white mb-2",children:"Date Range"}),r.jsxs(sr,{value:ne,onValueChange:ie,children:[r.jsx(ar,{className:"mt-2",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Bookings"}),r.jsx(Ae,{value:"today",children:"Today"}),r.jsx(Ae,{value:"week",children:"This Week"}),r.jsx(Ae,{value:"month",children:"This Month"}),r.jsx(Ae,{value:"quarter",children:"This Quarter"}),r.jsx(Ae,{value:"year",children:"This Year"}),r.jsx(Ae,{value:"custom",children:"Custom Range"})]})]})]}),r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-[#4f46e5]/10 border border-blue-200 dark:border-[#4f46e5]/30 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sn,{className:"w-4 h-4 text-blue-600 dark:text-[#6366f1] mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-blue-900 dark:text-[#a5b4fc]",children:[ne==="all"?"All":ne==="today"?"Today's":ne==="quarter"?"This quarter's":ne==="year"?"This year's":"Selected"," bookings will be exported"]}),r.jsxs("p",{className:"text-xs text-blue-700 dark:text-[#818cf8] mt-1",children:["Estimated: ",or.length," records"]})]})]})})]}),r.jsxs(Us,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>Z(!1),disabled:be,className:"w-full sm:w-auto h-11",children:"Cancel"}),r.jsx(W,{className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] w-full sm:w-auto h-11",onClick:Er,disabled:be,children:be?r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export ",K.toUpperCase()]})})]})]})})]})}function UVe({bookings:t,onViewDetails:e,onShowAttendees:s,calendarMonth:n,setCalendarMonth:a,gamesData:i}){const o=x=>{const g=x.getFullYear(),b=x.getMonth(),w=new Date(g,b,1),C=new Date(g,b+1,0).getDate(),S=w.getDay();return{daysInMonth:C,startingDayOfWeek:S,year:g,month:b}},l=x=>{const{year:g,month:b}=o(n),w=`${g}-${String(b+1).padStart(2,"0")}-${String(x).padStart(2,"0")}`;return t.filter(N=>N.date===w)},{daysInMonth:c,startingDayOfWeek:d,year:u,month:h}=o(n),m=()=>{a(new Date(u,h-1,1))},f=()=>{a(new Date(u,h+1,1))},v=[];for(let x=0;x<d;x++)v.push(r.jsx("div",{className:"min-h-[80px] sm:min-h-[120px]"},`empty-${x}`));for(let x=1;x<=c;x++){const g=l(x),b=new Date().getDate()===x&&new Date().getMonth()===h&&new Date().getFullYear()===u;v.push(r.jsxs("div",{className:`min-h-[80px] sm:min-h-[120px] border border-gray-200 dark:border-[#2a2a2a] p-1 sm:p-2 bg-white dark:bg-[#161616] hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors ${b?"ring-1 sm:ring-2 ring-[#4f46e5] dark:ring-[#6366f1]":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:[r.jsx("span",{className:`text-xs sm:text-sm ${b?"bg-blue-600 dark:bg-[#4f46e5] text-white rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center text-xs":"text-gray-900 dark:text-white"}`,children:x}),g.length>0&&r.jsxs(W,{variant:"ghost",size:"sm",className:"h-5 sm:h-6 text-xs px-1 sm:px-2",onClick:()=>s(new Date(u,h,x)),children:[r.jsx(Xr,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 sm:mr-1"}),r.jsx("span",{className:"hidden sm:inline",children:g.reduce((w,N)=>w+N.groupSize,0)})]})]}),r.jsxs("div",{className:"space-y-0.5 sm:space-y-1",children:[g.slice(0,2).map(w=>{const N=i.find(C=>C.name===w.game)?.color||"#6b7280";return r.jsxs("div",{className:"text-xs p-1 sm:p-1.5 rounded cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:N+"20",borderLeft:`2px sm:3px solid ${N}`},onClick:()=>e(w),children:[r.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[r.jsx(jr,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 flex-shrink-0",style:{color:N}}),r.jsx("span",{className:"text-[10px] sm:text-xs truncate",style:{color:N},children:w.time})]}),r.jsx("p",{className:"text-gray-900 dark:text-white truncate mt-0.5 text-[10px] sm:text-xs hidden sm:block",children:w.game}),r.jsx("p",{className:"text-gray-600 dark:text-[#737373] text-[10px] truncate hidden sm:block",children:w.customer})]},w.id)}),g.length>2&&r.jsxs("button",{className:"text-[10px] sm:text-xs text-[#4f46e5] dark:text-[#6366f1] hover:text-[#4338ca] dark:hover:text-[#818cf8] w-full text-left pl-1 sm:pl-1.5",onClick:()=>s(new Date(u,h,x)),children:["+",g.length-2," more"]})]})]},x))}return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.1)] transition-all",children:[r.jsx(Ke,{className:"p-3 sm:p-6",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs(Xe,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(Ed,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#4f46e5] dark:text-[#6366f1] flex-shrink-0"}),r.jsx("span",{className:"truncate text-sm sm:text-base",children:new Date(u,h).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:m,className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(new Date),className:"h-8 sm:h-9 px-3 text-xs sm:text-sm",children:"Today"}),r.jsx(W,{variant:"outline",size:"sm",onClick:f,className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:r.jsx($n,{className:"w-4 h-4"})})]})]})}),r.jsxs(_e,{className:"p-2 sm:p-6",children:[r.jsxs("div",{className:"grid grid-cols-7 gap-0 overflow-x-auto",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(x=>r.jsxs("div",{className:"text-center text-xs sm:text-sm text-gray-600 dark:text-[#737373] p-1 sm:p-2 bg-gray-50 dark:bg-[#0a0a0a] border border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx("span",{className:"hidden sm:inline",children:x}),r.jsx("span",{className:"sm:hidden",children:x.charAt(0)})]},x)),v]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-2",children:"Games:"}),r.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:i.map(x=>r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded flex-shrink-0",style:{backgroundColor:x.color}}),r.jsx("span",{className:"text-xs text-gray-700 dark:text-[#a3a3a3] truncate",children:x.name})]},x.id))})]})]})]})}function zVe({bookings:t,onViewDetails:e,selectedDate:s,setSelectedDate:n,gamesData:a}){const o=(h=>{const m=[],f=new Date(h);f.setDate(h.getDate()-h.getDay());for(let v=0;v<7;v++){const x=new Date(f);x.setDate(f.getDate()+v),m.push(x)}return m})(s),l=Array.from({length:14},(h,m)=>`${String(10+m).padStart(2,"0")}:00`),c=(h,m)=>{const f=h.toISOString().split("T")[0];return t.filter(v=>v.date!==f?!1:v.time.substring(0,5)===m)},d=()=>{const h=new Date(s);h.setDate(s.getDate()-7),n(h)},u=()=>{const h=new Date(s);h.setDate(s.getDate()+7),n(h)};return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.1)] transition-all",children:[r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(rI,{className:"w-5 h-5 text-[#4f46e5] dark:text-[#6366f1]"}),"Week View"]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:d,className:"h-9",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>n(new Date),className:"flex-1 sm:flex-initial h-9",children:"This Week"}),r.jsx(W,{variant:"outline",size:"sm",onClick:u,className:"h-9",children:r.jsx($n,{className:"w-4 h-4"})})]})]})}),r.jsx(_e,{className:"p-2 sm:p-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"overflow-x-auto overflow-y-visible scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:r.jsxs("div",{className:"min-w-[800px]",children:[r.jsxs("div",{className:"grid grid-cols-8 gap-1 mb-2",children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-[#737373] p-2",children:"Time"}),o.map((h,m)=>{const f=h.toDateString()===new Date().toDateString();return r.jsxs("div",{className:`text-center p-2 rounded-t-lg ${f?"bg-blue-50 dark:bg-[#4f46e5]/10 border border-blue-200 dark:border-[#4f46e5]/30":"bg-gray-50 dark:bg-[#0a0a0a]"}`,children:[r.jsx("p",{className:"text-xs text-gray-600 dark:text-[#737373]",children:h.toLocaleDateString("en-US",{weekday:"short"})}),r.jsx("p",{className:`text-sm ${f?"text-[#4f46e5] dark:text-[#6366f1]":"text-gray-900 dark:text-white"}`,children:h.getDate()})]},m)})]}),r.jsx("div",{className:"space-y-1",children:l.map(h=>r.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-[#737373] p-2 flex items-center",children:h}),o.map((m,f)=>{const v=c(m,h);return r.jsx("div",{className:"border border-gray-200 dark:border-[#2a2a2a] p-1 min-h-[60px] bg-white dark:bg-[#161616] hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors",children:v.map(x=>{const g=a.find(b=>b.name===x.game)?.color||"#6b7280";return r.jsxs("div",{className:"text-xs p-1.5 rounded cursor-pointer hover:opacity-80 transition-opacity mb-1",style:{backgroundColor:g+"20",borderLeft:`3px solid ${g}`},onClick:()=>e(x),children:[r.jsx("p",{className:"text-gray-900 dark:text-white truncate",children:x.game}),r.jsx("p",{className:"text-gray-600 dark:text-[#737373] text-[10px] truncate",children:x.customer}),r.jsxs("p",{className:"text-gray-500 dark:text-[#525252] text-[10px]",children:[x.groupSize," people"]})]},x.id)})},f)})]},h))})]})}),r.jsx("div",{className:"sm:hidden text-center text-xs text-gray-500 dark:text-gray-400 mt-2 py-1",children:" Swipe to view all days "})]})})]})}function VVe({bookings:t,onViewDetails:e,selectedDate:s,setSelectedDate:n,gamesData:a}){const i=Array.from({length:14},(u,h)=>`${String(10+h).padStart(2,"0")}:00`),o=u=>{const h=s.toISOString().split("T")[0];return t.filter(m=>m.date!==h?!1:m.time.substring(0,5)===u)},l=()=>{const u=new Date(s);u.setDate(s.getDate()-1),n(u)},c=()=>{const u=new Date(s);u.setDate(s.getDate()+1),n(u)},d=s.toDateString()===new Date().toDateString();return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.1)] transition-all",children:[r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5 text-[#4f46e5] dark:text-[#6366f1]"}),r.jsx("span",{children:s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),d&&r.jsx(De,{className:"bg-blue-600 dark:bg-[#4f46e5]",children:"Today"})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:l,className:"h-9",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>n(new Date),className:"flex-1 sm:flex-initial h-9",children:"Today"}),r.jsx(W,{variant:"outline",size:"sm",onClick:c,className:"h-9",children:r.jsx($n,{className:"w-4 h-4"})})]})]})}),r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsx("div",{className:"space-y-2",children:i.map(u=>{const h=o(u);return r.jsxs("div",{className:"flex gap-3 border-b border-gray-100 dark:border-[#2a2a2a] pb-2",children:[r.jsx("div",{className:"w-20 flex-shrink-0 text-sm text-gray-600 dark:text-[#737373] pt-2",children:u}),r.jsx("div",{className:"flex-1 space-y-2",children:h.length===0?r.jsx("div",{className:"h-16 border border-dashed border-gray-200 dark:border-[#2a2a2a] rounded-lg flex items-center justify-center text-xs text-gray-400 dark:text-[#525252]",children:"No bookings"}):h.map(m=>{const f=a.find(v=>v.name===m.game)?.color||"#6b7280";return r.jsx(he,{className:"cursor-pointer hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-shadow border-l-4 dark:border-[#2a2a2a]",style:{borderLeftColor:f},onClick:()=>e(m),children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-gray-900 dark:text-white mb-1",children:m.game}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-[#737373]",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3"}),m.customer]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3"}),m.groupSize," people"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(In,{className:"w-3 h-3"}),"$",m.amount]})]})]}),r.jsx(De,{variant:"secondary",className:`border
                                  ${m.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":""}
                                  ${m.status==="pending"?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30":""}
                                  ${m.status==="cancelled"?"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30":""}
                                `,children:m.status})]})})},m.id)})})]},u)})})})]})}function WVe({bookings:t,onViewDetails:e,selectedDate:s,setSelectedDate:n,gamesData:a}){const i=Array.from({length:14},(u,h)=>`${String(10+h).padStart(2,"0")}:00`),o=(u,h)=>{const m=s.toISOString().split("T")[0];return t.filter(f=>f.date!==m||f.game!==u?!1:f.time.substring(0,5)===h)},l=()=>{const u=new Date(s);u.setDate(s.getDate()-1),n(u)},c=()=>{const u=new Date(s);u.setDate(s.getDate()+1),n(u)},d=s.toDateString()===new Date().toDateString();return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_20px_rgba(79,70,229,0.1)] transition-all",children:[r.jsxs(Ke,{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(DY,{className:"w-5 h-5 text-[#4f46e5] dark:text-[#6366f1]"}),r.jsx("span",{children:"Schedule by Room"}),d&&r.jsx(De,{className:"bg-blue-600 dark:bg-[#4f46e5]",children:"Today"})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:l,className:"h-9",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>n(new Date),className:"flex-1 sm:flex-initial h-9",children:"Today"}),r.jsx(W,{variant:"outline",size:"sm",onClick:c,className:"h-9",children:r.jsx($n,{className:"w-4 h-4"})})]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373] mt-2",children:s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),r.jsx(_e,{className:"p-2 sm:p-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"overflow-x-auto overflow-y-visible scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:r.jsxs("div",{className:"min-w-[900px]",children:[r.jsxs("div",{className:"grid gap-1 mb-2",style:{gridTemplateColumns:`100px repeat(${a.length}, 1fr)`},children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-[#737373] p-2",children:"Time"}),a.map(u=>r.jsxs("div",{className:"text-center p-2 rounded-t-lg",style:{backgroundColor:u.color+"20"},children:[r.jsx("div",{className:"w-3 h-3 rounded mx-auto mb-1",style:{backgroundColor:u.color}}),r.jsx("p",{className:"text-xs text-gray-900 dark:text-white",children:u.name})]},u.id))]}),r.jsx("div",{className:"space-y-1",children:i.map(u=>r.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`100px repeat(${a.length}, 1fr)`},children:[r.jsx("div",{className:"text-xs text-gray-600 dark:text-[#737373] p-2 flex items-center",children:u}),a.map(h=>{const m=o(h.name,u);return r.jsx("div",{className:"border border-gray-200 dark:border-[#2a2a2a] p-1 min-h-[60px] bg-white dark:bg-[#161616] hover:bg-gray-50 dark:hover:bg-[#1a1a1a] transition-colors",children:m.map(f=>r.jsxs("div",{className:"text-xs p-1.5 rounded cursor-pointer hover:opacity-80 transition-opacity mb-1",style:{backgroundColor:h.color+"20",borderLeft:`3px solid ${h.color}`},onClick:()=>e(f),children:[r.jsx("p",{className:"text-gray-900 dark:text-white truncate",children:f.customer}),r.jsxs("p",{className:"text-gray-600 dark:text-[#737373] text-[10px]",children:[f.groupSize," people"]}),r.jsx(De,{variant:"secondary",className:`text-[10px] px-1 py-0 h-4 mt-1 border
                                ${f.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":""}
                                ${f.status==="pending"?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30":""}
                              `,children:f.status})]},f.id))},h.id)})]},u))})]})}),r.jsx("div",{className:"sm:hidden text-center text-xs text-gray-500 dark:text-gray-400 mt-2 py-1",children:" Swipe to view all rooms "})]})})]})}function qVe({open:t,onOpenChange:e,onCreate:s,bookings:n,gamesData:a,venues:i,isSubmitting:o}){const[l,c]=j.useState(1),[d,u]=j.useState({firstName:"",lastName:"",email:"",phone:"",venueId:"",gameId:"",date:"",time:"",adults:2,children:0,notes:"",customerNotes:"",paymentMethod:"credit-card",paymentStatus:"pending",depositAmount:0,couponCode:"",discountPercentage:0}),h=k=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k),m=j.useMemo(()=>i.find(k=>k.id===d.venueId),[i,d.venueId]),f=j.useMemo(()=>a.find(k=>k.id===d.gameId),[a,d.gameId]),v=(k,E)=>!k||!E||!f||!d.venueId?!1:!n.some(O=>{const $=O.date===k,T=O.time===E,I=O.gameId?O.gameId===f.id:O.game===f.name,L=O.venueId?O.venueId===d.venueId:!0;return $&&T&&I&&L&&O.status!=="cancelled"}),x=(k,E)=>{if(!k||!E)return!1;const[O,$]=E.split(":").map(Number),T=new Date(k);return T.setHours(O||0,$||0,0,0),T.getTime()>=new Date().getTime()},g=()=>d.firstName.trim()?d.lastName.trim()?!d.email.trim()||!h(d.email.trim())?(re.error("Please enter a valid email address."),!1):!0:(re.error("Please enter the last name."),!1):(re.error("Please enter the first name."),!1),b=()=>d.venueId?d.gameId?d.date?d.time?(d.adults??0)<1?(re.error("Adults must be at least 1."),!1):(d.children??0)<0?(re.error("Children cannot be negative."),!1):x(d.date,d.time)?v(d.date,d.time)?!0:(re.error("This time slot is already booked. Choose another."),!1):(re.error("Selected date/time is in the past."),!1):(re.error("Please select a time."),!1):(re.error("Please select a date."),!1):(re.error("Please select a game."),!1):(re.error("Please select a venue."),!1),w=()=>{if(l===1){if(!g())return;c(2);return}if(l===2){if(!b())return;c(3);return}c(l+1)},N=async()=>{if(!(!g()||!b())&&s){try{const k={...d,totalAmount:S,endTime:A||d.time};await s(k),e(!1),c(1),u({firstName:"",lastName:"",email:"",phone:"",venueId:"",gameId:"",date:"",time:"",adults:2,children:0,notes:"",customerNotes:"",paymentMethod:"credit-card",paymentStatus:"pending",depositAmount:0,couponCode:"",discountPercentage:0})}catch{}return}},C=j.useMemo(()=>d.venueId?a.filter(k=>k.venueId===d.venueId):a,[a,d.venueId]),S=j.useMemo(()=>{const k=f?.price??30,E=f?.childPrice??Math.max((f?.price??30)*.7,0),O=d.adults*k+d.children*E,$=O*d.discountPercentage/100;return O-$},[d.adults,d.children,f,d.discountPercentage]),A=j.useMemo(()=>!f||!d.time?"":FVe(d.time,f.duration),[f,d.time]);return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Add New Booking"}),r.jsxs(wr,{children:["Create a new booking for a customer. Step ",l," of 3."]})]}),r.jsxs("div",{className:"space-y-6",children:[l===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm",children:"1"}),r.jsx("h3",{className:"text-sm sm:text-base text-gray-900",children:"Customer Information"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"firstName",className:"text-sm",children:"First Name *"}),r.jsx(de,{id:"firstName",value:d.firstName,onChange:k=>u({...d,firstName:k.target.value}),placeholder:"Enter first name",className:"mt-1 h-11"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"lastName",className:"text-sm",children:"Last Name *"}),r.jsx(de,{id:"lastName",value:d.lastName,onChange:k=>u({...d,lastName:k.target.value}),placeholder:"Enter last name",className:"mt-1 h-11"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"email",className:"text-sm",children:"Email Address *"}),r.jsx(de,{id:"email",type:"email",value:d.email,onChange:k=>u({...d,email:k.target.value}),placeholder:"customer@example.com",className:"mt-1 h-11"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"phone",className:"text-sm",children:"Phone Number"}),r.jsx(de,{id:"phone",type:"tel",value:d.phone,onChange:k=>u({...d,phone:k.target.value}),placeholder:"+1 (555) 000-0000",className:"mt-1 h-11"})]})]})]}),l===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm",children:"2"}),r.jsx("h3",{className:"text-sm sm:text-base text-gray-900",children:"Booking Details"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"venue",className:"text-sm",children:"Select Venue *"}),r.jsxs(sr,{value:d.venueId,onValueChange:k=>u(E=>({...E,venueId:k,gameId:"",time:""})),children:[r.jsx(ar,{className:"mt-1 h-11",children:r.jsx(nr,{placeholder:"Choose a venue"})}),r.jsx(ir,{children:Array.isArray(i)&&i.length>0?i.map(k=>r.jsx(Ae,{value:k.id,children:k.name},k.id)):r.jsx(Ae,{value:"no-venues",disabled:!0,children:"No venues available"})})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"game",className:"text-sm",children:"Select Game *"}),r.jsxs(sr,{value:d.gameId,onValueChange:k=>u(E=>({...E,gameId:k,time:""})),disabled:!d.venueId,children:[r.jsx(ar,{className:"mt-1 h-11",children:r.jsx(nr,{placeholder:d.venueId?"Choose a game":"Select a venue first"})}),r.jsx(ir,{children:C.length>0?C.map(k=>r.jsx(Ae,{value:k.id,children:k.name},k.id)):r.jsx(Ae,{value:"no-games",disabled:!0,children:d.venueId?"No games available for this venue":"Select a venue to load games"})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"date",className:"text-sm",children:"Date *"}),r.jsx(de,{id:"date",type:"date",value:d.date,onChange:k=>u({...d,date:k.target.value}),className:"mt-1 h-11"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"time",className:"text-sm",children:"Time *"}),r.jsxs(sr,{value:d.time,onValueChange:k=>u({...d,time:k}),disabled:!d.date||!d.gameId,children:[r.jsx(ar,{className:"mt-1 h-11",children:r.jsx(nr,{placeholder:d.gameId?"Select time":"Select a game first"})}),r.jsx(ir,{children:["10:00","12:00","14:00","16:00","18:00","20:00"].map(k=>{const E=d.date&&d.gameId?!v(d.date,k):!0,O=k==="10:00"?"10:00 AM":k==="12:00"?"12:00 PM":k==="14:00"?"2:00 PM":k==="16:00"?"4:00 PM":k==="18:00"?"6:00 PM":"8:00 PM";return r.jsxs(Ae,{value:k,disabled:E,children:[O,E&&d.date&&d.gameId?" (Unavailable)":""]},k)})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"adults",className:"text-sm",children:"Number of Adults *"}),r.jsx(de,{id:"adults",type:"number",min:"1",value:d.adults,onChange:k=>u({...d,adults:parseInt(k.target.value)||0}),className:"mt-1 h-11"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"children",className:"text-sm",children:"Number of Children"}),r.jsx(de,{id:"children",type:"number",min:"0",value:d.children,onChange:k=>u({...d,children:parseInt(k.target.value)||0}),className:"mt-1 h-11"})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"notes",className:"text-sm",children:"Internal Notes (Admin Only)"}),r.jsx(Ps,{id:"notes",value:d.notes,onChange:k=>u({...d,notes:k.target.value}),placeholder:"Internal notes for staff...",className:"mt-1",rows:2})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"customerNotes",className:"text-sm",children:"Customer Notes"}),r.jsx(Ps,{id:"customerNotes",value:d.customerNotes,onChange:k=>u({...d,customerNotes:k.target.value}),placeholder:"Special requests from customer...",className:"mt-1",rows:2})]})]}),l===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm",children:"3"}),r.jsx("h3",{className:"text-sm sm:text-base text-gray-900",children:"Payment & Confirmation"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm text-blue-900 mb-3",children:"Booking Summary"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Customer:"}),r.jsx("span",{className:"text-gray-900",children:d.firstName&&d.lastName?`${d.firstName} ${d.lastName}`:""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Venue:"}),r.jsx("span",{className:"text-gray-900",children:m?.name||""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:f?.name||""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time:"}),r.jsxs("span",{className:"text-gray-900",children:[d.date||"",d.time?` at ${d.time}`:""]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Estimated End:"}),r.jsx("span",{className:"text-gray-900",children:A||""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Group Size:"}),r.jsxs("span",{className:"text-gray-900",children:[d.adults," adults, ",d.children," children"]})]}),r.jsx(Ze,{className:"my-2"}),d.discountPercentage>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsx("span",{className:"text-gray-900",children:XA(d.adults*(f?.price??30)+d.children*(f?.childPrice??Math.max((f?.price??30)*.7,0)))})]}),r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsxs("span",{children:["Discount (",d.discountPercentage,"%):"]}),r.jsxs("span",{children:["-",XA((d.adults*(f?.price??30)+d.children*(f?.childPrice??Math.max((f?.price??30)*.7,0)))*d.discountPercentage/100)]})]})]}),r.jsxs("div",{className:"flex justify-between font-semibold",children:[r.jsx("span",{className:"text-gray-900",children:"Total Amount:"}),r.jsx("span",{className:"text-gray-900",children:XA(S)})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Payment Method"}),r.jsxs(sr,{value:d.paymentMethod,onValueChange:k=>u({...d,paymentMethod:k}),children:[r.jsx(ar,{className:"mt-1 h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"credit-card",children:"Credit Card"}),r.jsx(Ae,{value:"cash",children:"Cash"}),r.jsx(Ae,{value:"paypal",children:"PayPal"}),r.jsx(Ae,{value:"bank-transfer",children:"Bank Transfer"})]})]})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Payment Status"}),r.jsxs(sr,{value:d.paymentStatus,onValueChange:k=>u({...d,paymentStatus:k}),children:[r.jsx(ar,{className:"mt-1 h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"pending",children:"Pending"}),r.jsx(Ae,{value:"paid",children:"Paid"}),r.jsx(Ae,{value:"partially_paid",children:"Partially Paid"}),r.jsx(Ae,{value:"refunded",children:"Refunded"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"couponCode",className:"text-sm",children:"Coupon Code (Optional)"}),r.jsx(de,{id:"couponCode",type:"text",value:d.couponCode,onChange:k=>u({...d,couponCode:k.target.value.toUpperCase()}),placeholder:"SAVE20",className:"mt-1 h-11 uppercase"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter promotional code if available"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"discountPercentage",className:"text-sm",children:"Discount Percentage"}),r.jsx(de,{id:"discountPercentage",type:"number",min:"0",max:"100",step:"1",value:d.discountPercentage,onChange:k=>{const E=parseFloat(k.target.value)||0;u({...d,discountPercentage:Math.min(Math.max(E,0),100)})},placeholder:"0",className:"mt-1 h-11"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter discount percentage (0-100%)"})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"depositAmount",className:"text-sm",children:"Deposit Amount (Optional)"}),r.jsx(de,{id:"depositAmount",type:"number",min:"0",step:"0.01",value:d.depositAmount,onChange:k=>u({...d,depositAmount:parseFloat(k.target.value)||0}),placeholder:"0.00",className:"mt-1 h-11"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave as 0 if no deposit is required"})]})]})]}),r.jsxs(Us,{className:"flex flex-col-reverse sm:flex-row items-stretch sm:items-center justify-between gap-2",children:[l>1&&r.jsx(W,{variant:"outline",onClick:()=>c(l-1),className:"w-full sm:w-auto h-11",children:"Back"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto sm:ml-auto",children:[r.jsx(W,{variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto h-11 order-2 sm:order-1",disabled:o,children:"Cancel"}),l<3?r.jsx(W,{onClick:w,className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto h-11 order-1 sm:order-2",disabled:o,children:"Next"}):r.jsx(W,{onClick:N,disabled:o,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto h-11 order-1 sm:order-2",children:o?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(ia,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Confirm Booking"})]})]})]})})}function HVe({open:t,onOpenChange:e,booking:s,onRefund:n,onReschedule:a,staffList:i,onAssignStaff:o,onUpdateStatus:l,onCheckIn:c,onCheckOut:d,onSendConfirmation:u,onSave:h}){if(!s)return null;const m=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),[f,v]=j.useState(!1);return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsxs(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:[r.jsx(pr,{children:"Booking Details"}),r.jsxs(wr,{children:["Complete information for booking ",s.id]})]}),r.jsxs("div",{className:"space-y-6 overflow-y-auto overflow-x-hidden px-4 sm:px-6 flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(De,{variant:"secondary",className:`text-sm px-3 py-1 border
                ${s.status==="confirmed"?"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":""}
                ${s.status==="pending"?"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30":""}
                ${s.status==="cancelled"?"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30":""}
                ${s.status==="in-progress"?"bg-blue-100 dark:bg-blue-500/20 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-500/30":""}
                ${s.status==="completed"?"bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-500/30":""}
              `,children:s.status.toUpperCase()}),r.jsxs("span",{className:"text-sm text-gray-500 dark:text-[#737373]",children:["ID: ",s.id]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 min-w-0",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"Assigned Staff"}),r.jsxs(sr,{value:s.assignedStaffId||"",onValueChange:x=>o&&o(x),children:[r.jsx(ar,{className:"mt-1 h-11 w-full",children:r.jsx(nr,{placeholder:s.assignedStaffId?i?.find(x=>x.id===s.assignedStaffId)?.name||"Assigned":"Assign staff"})}),r.jsx(ir,{children:Array.isArray(i)&&i.length>0?i.map(x=>r.jsx(Ae,{value:x.id,children:x.name},x.id)):r.jsx(Ae,{value:"no-staff",disabled:!0,children:"No staff available"})})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"Status"}),r.jsxs(sr,{value:s.status,onValueChange:x=>l&&l(x),children:[r.jsx(ar,{className:"mt-1 h-11 w-full",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"confirmed",children:"Confirmed"}),r.jsx(Ae,{value:"pending",children:"Pending"}),r.jsx(Ae,{value:"cancelled",children:"Cancelled"}),r.jsx(Ae,{value:"no-show",children:"No Show"}),r.jsx(Ae,{value:"completed",children:"Completed"})]})]})]}),(s.checkInTime||s.checkOutTime)&&r.jsx("div",{className:"sm:col-span-2 bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:[s.checkInTime&&r.jsxs("span",{children:["Checked in: ",new Date(s.checkInTime).toLocaleString()]}),s.checkOutTime&&r.jsxs("span",{className:"ml-4",children:["Checked out: ",new Date(s.checkOutTime).toLocaleString()]})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm text-gray-600 dark:text-[#737373] mb-3",children:"Customer Information"}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4 text-gray-400 dark:text-[#525252]"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:s.customer})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4 text-gray-400 dark:text-[#525252]"}),r.jsx("span",{className:"text-gray-600 dark:text-[#737373]",children:s.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(la,{className:"w-4 h-4 text-gray-400 dark:text-[#525252]"}),r.jsx("span",{className:"text-gray-600 dark:text-[#737373]",children:s.phone})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm text-gray-600 dark:text-[#737373] mb-3",children:"Booking Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 min-w-0",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] mb-2",children:"Venue"}),r.jsx("p",{className:"text-base text-gray-900 dark:text-white font-medium",children:s.venueName||"N/A"})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] mb-2",children:"Game"}),r.jsx("p",{className:"text-base text-gray-900 dark:text-white font-medium",children:s.game})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] mb-2",children:"Date & Time"}),r.jsx("p",{className:"text-base text-gray-900 dark:text-white font-medium",children:m(s.date)}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373] mt-1",children:s.time})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] mb-2",children:"Group Size"}),r.jsxs("p",{className:"text-base text-gray-900 dark:text-white font-medium",children:[s.groupSize," people"]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-[#737373] mt-1",children:[s.adults," adults, ",s.children," children"]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-4 lg:col-span-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-[#737373] mb-2",children:"Payment"}),r.jsxs("p",{className:"text-base text-gray-900 dark:text-white font-medium",children:["$",s.amount]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373] mt-1",children:s.paymentMethod})]})]})]}),s.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm text-gray-600 dark:text-[#737373] mb-2",children:"Special Notes"}),r.jsx("div",{className:"bg-yellow-50 dark:bg-amber-500/10 border border-yellow-200 dark:border-amber-500/30 rounded-lg p-3",children:r.jsx("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-[#a3a3a3]",children:s.notes})})]})]}),r.jsxs(Us,{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(W,{onClick:async()=>{if(h)try{v(!0),await h()}finally{v(!1)}},className:"w-full sm:w-auto h-11",disabled:f,children:f?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"}),r.jsx(W,{variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto h-11",children:"Close"}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto h-11",onClick:()=>u&&u(),children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Send Confirmation"]}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto h-11",onClick:()=>a&&a(s),children:[r.jsx(Ed,{className:"w-4 h-4 mr-2"}),"Reschedule"]}),!s.checkInTime&&s.status!=="cancelled"&&r.jsxs(W,{onClick:()=>c&&c(),className:"bg-blue-600 hover:bg-blue-700 w-full sm:w-auto h-11",children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check In"]}),s.checkInTime&&!s.checkOutTime&&r.jsxs(W,{onClick:()=>d&&d(),className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto h-11",children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Check Out"]}),s.status==="confirmed"&&r.jsx(Eu,{permissions:["payments.refund"],children:r.jsxs(W,{variant:"outline",className:"text-orange-600 dark:text-orange-500 hover:text-orange-700 dark:hover:text-orange-400 w-full sm:w-auto h-11",onClick:()=>{e(!1),n(s)},children:[r.jsx(ju,{className:"w-4 h-4 mr-2"}),"Process Refund"]})})]})]})})}function GVe({open:t,onOpenChange:e,booking:s}){const[n,a]=j.useState(s?.amount||0),[i,o]=j.useState(""),l=()=>{re.success(`Refund of $${n} processed successfully!`),e(!1)};return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-md max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none overflow-y-auto max-h-[90vh]",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(ju,{className:"w-5 h-5 text-orange-600 dark:text-orange-500"}),"Process Refund"]}),r.jsxs(wr,{children:["Issue a refund for booking ",s.id]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-orange-50 dark:bg-orange-500/10 border border-orange-200 dark:border-orange-500/30 rounded-lg p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:"w-5 h-5 text-orange-600 dark:text-orange-500 mt-0.5 flex-shrink-0"}),r.jsx("div",{children:r.jsx("p",{className:"text-xs sm:text-sm text-orange-900 dark:text-orange-400",children:"This action will refund the customer and update the booking status."})})]})}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"refund-amount",className:"text-sm",children:"Refund Amount"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-[#737373]",children:"$"}),r.jsx(de,{id:"refund-amount",type:"number",min:"0",max:s.amount,step:"0.01",value:n,onChange:c=>a(parseFloat(c.target.value)),className:"pl-7 h-11"})]}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-[#737373] mt-1",children:["Original amount: $",s.amount]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"refund-reason",className:"text-sm",children:"Refund Reason"}),r.jsx(Ps,{id:"refund-reason",value:i,onChange:c=>o(c.target.value),placeholder:"Enter the reason for this refund...",className:"mt-1",rows:3})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1a1a1a] rounded-lg p-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Customer:"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-900 dark:text-white truncate ml-2",children:s.customer})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Payment Method:"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-900 dark:text-white",children:s.paymentMethod})]})]})]}),r.jsxs(Us,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto h-11",children:"Cancel"}),r.jsx(W,{onClick:l,className:"bg-orange-600 dark:bg-orange-600 hover:bg-orange-700 dark:hover:bg-orange-700 w-full sm:w-auto h-11",disabled:!n||n<=0,children:"Process Refund"})]})]})}):null}function YVe({open:t,onOpenChange:e,date:s,bookings:n,gamesData:a=[]}){if(!s)return null;const i=n.reduce((h,m)=>h+m.groupSize,0),o=n.reduce((h,m)=>h+m.amount,0),l=h=>{const m=h==null?"":String(h);return m.includes(",")||m.includes('"')||m.includes(`
`)?'"'+m.replace(/"/g,'""')+'"':m},c=h=>{const f=[["Booking ID","Customer","Email","Phone","Game","Date","Time","Group Size","Amount","Status"].join(",")];return h.forEach(v=>{f.push([l(v.id),l(v.customer),l(v.email),l(v.phone),l(v.game),l(v.date),l(v.time),l(v.groupSize),l(v.amount),l(v.status)].join(","))}),f.join(`
`)},d=(h,m)=>{const f=new Blob([h],{type:"text/csv;charset=utf-8;"}),v=URL.createObjectURL(f),x=document.createElement("a");x.href=v,x.download=m,x.click(),URL.revokeObjectURL(v)},u=()=>{const h=n||[];if(!h.length){re.info("No bookings to export for this day");return}const m=c(h),f=new Date,v=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}_${String(f.getHours()).padStart(2,"0")}${String(f.getMinutes()).padStart(2,"0")}`,x=`attendees_${s.toISOString().split("T")[0]}_${v}.csv`;d(m,x),re.success(`Exported ${h.length} records`)};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-3xl max-h-[80vh] max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none overflow-y-auto",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(Ed,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:s.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),r.jsx(wr,{className:"text-sm",children:"All bookings and attendees for this day"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[r.jsx(he,{className:"border-blue-200 bg-blue-50",children:r.jsx(_e,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-1 sm:gap-2",children:[r.jsx(qs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-[10px] sm:text-xs text-blue-600 truncate",children:"Bookings"}),r.jsx("p",{className:"text-lg sm:text-2xl text-blue-900",children:n.length})]})]})})}),r.jsx(he,{className:"border-green-200 bg-green-50",children:r.jsx(_e,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-1 sm:gap-2",children:[r.jsx(Xr,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-[10px] sm:text-xs text-green-600 truncate",children:"Attendees"}),r.jsx("p",{className:"text-lg sm:text-2xl text-green-900",children:i})]})]})})}),r.jsx(he,{className:"border-purple-200 bg-purple-50",children:r.jsx(_e,{className:"p-2 sm:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-1 sm:gap-2",children:[r.jsx(In,{className:"w-3 h-3 sm:w-4 sm:h-4 text-purple-600 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-[10px] sm:text-xs text-purple-600 truncate",children:"Revenue"}),r.jsxs("p",{className:"text-lg sm:text-2xl text-purple-900",children:["$",o]})]})]})})})]}),r.jsx(fa,{className:"h-[300px] sm:h-[400px]",children:r.jsx("div",{className:"space-y-3 pr-4",children:n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(qs,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),r.jsx("p",{children:"No bookings for this day"})]}):n.map(h=>{const m=a.find(f=>f.name===h.game)?.color||"#6b7280";return r.jsx(he,{className:"border-gray-200",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-1 h-12 rounded",style:{backgroundColor:m}}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900",children:h.game}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3"}),h.time]}),r.jsxs("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3"}),h.groupSize," people"]})]})]})]}),r.jsx(Ze,{className:"my-2"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Customer"}),r.jsx("p",{className:"text-gray-900",children:h.customer}),r.jsx("p",{className:"text-xs text-gray-600",children:h.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Group Composition"}),r.jsxs("p",{className:"text-gray-900",children:[h.adults," Adults, ",h.children," Children"]})]})]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Amount"}),r.jsxs("p",{className:"text-xl text-gray-900",children:["$",h.amount]}),r.jsx(De,{variant:"secondary",className:`mt-2
                                ${h.status==="confirmed"?"bg-green-100 text-green-700":""}
                                ${h.status==="pending"?"bg-yellow-100 text-yellow-700":""}
                              `,children:h.status})]})]})})},h.id)})})})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>e(!1),children:"Close"}),r.jsxs(W,{className:"bg-blue-600 hover:bg-blue-700",onClick:u,children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export List"]})]})]})})}function KVe(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function XVe({open:t,onOpenChange:e,booking:s,onConfirm:n,bookings:a=[]}){const[i,o]=j.useState(s?new Date(s.date):void 0),[l,c]=j.useState(s?.time||""),d=Array.from({length:14},(m,f)=>`${String(10+f).padStart(2,"0")}:00`);if(j.useEffect(()=>{s&&(o(new Date(s.date)),c(s.time))},[s]),!s)return null;const u=m=>m.toISOString().split("T")[0],h=m=>{if(!m)return[];const f=u(m);return d.map(v=>{const x=a.some(g=>g.date===f&&g.time===v&&g.status!=="cancelled"&&g.id!==s.id);return{time:v,available:!x}})};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-md max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none overflow-y-auto max-h-[90vh]",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(ju,{className:"w-5 h-5 text-blue-600 dark:text-[#4f46e5]"}),"Reschedule Booking"]}),r.jsxs(wr,{children:["Update the date and time for booking ",s.id]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"New Date"}),r.jsx("div",{className:"mt-2 border rounded-md p-2",children:r.jsx(Ah,{mode:"single",selected:i,onSelect:o,disabled:m=>m<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md [&_.rdp-day_selected]:bg-blue-600 [&_.rdp-day_selected]:text-white"})})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"New Time"}),r.jsxs("div",{className:"mt-2",children:[i?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3",children:h(i).map(m=>r.jsxs("button",{onClick:()=>m.available&&c(m.time),disabled:!m.available,className:`
                        px-3 py-2 rounded-lg border-2 text-center transition-all
                        ${l===m.time?"bg-blue-600 text-white border-blue-600 shadow-md":m.available?"border-gray-200 hover:border-gray-300 hover:shadow-sm":"border-gray-100 cursor-not-allowed opacity-50"}
                      `,children:[r.jsx("div",{className:"text-sm",children:m.time}),r.jsx("div",{className:`text-xs mt-0.5 ${m.available?"text-green-600":"text-red-500"}`,children:m.available?"Available":"Unavailable"})]},m.time))}):r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Select a date to view available time slots"}),r.jsx(de,{type:"time",value:l,onChange:m=>c(m.target.value),className:"mt-3 h-11"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pick a slot or enter a custom time."})]})]}),r.jsx("div",{className:"bg-blue-50 dark:bg-[#4f46e5]/10 border border-blue-200 dark:border-[#4f46e5]/30 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[r.jsx(Ed,{className:"w-4 h-4 text-blue-600 dark:text-[#6366f1]"}),r.jsxs("span",{className:"text-blue-900 dark:text-[#a5b4fc]",children:["Current: ",KVe(s.date)," ",s.time]})]})})]}),r.jsxs(Us,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto h-11",children:"Cancel"}),r.jsx(W,{onClick:()=>{i&&l&&n&&(n(u(i),l),e&&e(!1))},className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] w-full sm:w-auto h-11",disabled:!i||!l,children:"Confirm Reschedule"})]})]})})}function QVe({open:t,onOpenChange:e,booking:s,onConfirm:n}){const[a,i]=j.useState("");return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-md max-lg:w-full max-lg:h-full max-lg:max-h-full max-lg:rounded-none overflow-y-auto max-h-[90vh]",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-5 h-5 text-red-600 dark:text-red-500"}),"Cancel Booking"]}),r.jsxs(wr,{children:["This will mark booking ",s.id," as cancelled."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/30 rounded-lg p-3",children:r.jsx("p",{className:"text-xs sm:text-sm text-red-900 dark:text-red-400",children:"Customers may need to be notified and any payments handled separately."})}),r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"Cancellation Reason (optional)"}),r.jsx(Ps,{value:a,onChange:o=>i(o.target.value),className:"mt-2 h-24",placeholder:"e.g., Customer requested cancellation due to illness"})]})]}),r.jsxs(Us,{className:"flex flex-col-reverse sm:flex-row gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>e(!1),className:"w-full sm:w-auto h-11",children:"Keep Booking"}),r.jsx(W,{onClick:()=>n&&n(a),className:"bg-red-600 dark:bg-red-500 hover:bg-red-700 dark:hover:bg-red-600 w-full sm:w-auto h-11",children:"Confirm Cancel"})]})]})}):null}const _ae=({message:t="Loading BookingTMS..."})=>{const{theme:e}=Nr(),s=e==="dark";return r.jsxs("div",{className:`fixed inset-0 z-[5000] flex flex-col items-center justify-center px-6 transition-colors ${s?"bg-[#0a0a0a] text-white":"bg-white text-gray-900"}`,children:[r.jsx(uh.div,{className:"relative mb-10",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:r.jsx(yJ,{size:80,animated:!0})}),r.jsx("div",{className:`w-64 h-1 mb-8 rounded-full overflow-hidden ${s?"bg-white/10":"bg-gray-200"}`,children:r.jsx(uh.div,{className:`${s?"bg-white":"bg-gray-900"} h-full`,animate:{width:["0%","65%","100%"]},transition:{duration:1.8,repeat:1/0,ease:"easeInOut"}})}),r.jsx(uh.p,{className:`text-sm ${s?"text-white/70":"text-gray-600"} text-center`,initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:t})]})},ZVe=t=>{if(!t)return"Unknown";const e=t.toLowerCase();return e.includes("easy")?"Easy":e.includes("medium")?"Medium":e.includes("hard")?"Hard":e.includes("extreme")?"Extreme":t},JVe=t=>{switch(t){case"Easy":return"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30";case"Medium":return"bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-200 dark:border-amber-500/30";case"Hard":case"Extreme":return"bg-red-100 dark:bg-red-500/20 text-red-700 dark:text-red-400 border-red-200 dark:border-red-500/30";default:return"bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#737373] border-gray-200 dark:border-[#2a2a2a]"}};function eWe({onNavigate:t}={}){const{games:e,loading:s,refreshGames:n}=s3(),{venues:a,loading:i,refreshVenues:o}=n3(),[l,c]=j.useState(!1),d=async()=>{c(!0);try{await Promise.all([n(),o()]),re.success("Games refreshed successfully")}catch{re.error("Failed to refresh games")}finally{c(!1)}},u=j.useMemo(()=>{const m=e.length,f=e.filter(g=>g.status==="active").length,v=e.reduce((g,b)=>g+(b.max_players??0),0),x=e.reduce((g,b)=>g+Number(b.price??0),0);return{totalGames:m,activeGames:f,totalCapacity:v,averagePrice:m>0?Math.round(x/m):0}},[e]),h=m=>a.find(f=>f.id===m);return s||i?r.jsx(_ae,{message:"Loading games..."}):r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsx(Ei,{title:"Events / Rooms",description:"Games and experiences are now managed from within each venue so that embed keys stay in sync. Use this page to review everything that's live.",sticky:!0,action:r.jsxs(W,{variant:"outline",className:"h-11",onClick:d,disabled:l,children:[r.jsx(ju,{className:`w-4 h-4 sm:mr-2 ${l?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})}),r.jsx(he,{className:"border-dashed border-2",children:r.jsxs(_e,{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 p-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ws,{className:"w-5 h-5 text-blue-600 dark:text-[#6366f1] mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium",children:"Create and edit games from the Venues page."}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Open any venue, create games there, and they'll appear here automatically with the correct embed key."})]})]}),r.jsx(W,{variant:"outline",className:"sm:ml-auto",onClick:()=>t?.("venues"),children:"Go to Venues"})]})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs(_e,{className:"p-4 sm:p-6",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-1",children:"Total Games"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-lg",children:u.totalGames})]})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs(_e,{className:"p-4 sm:p-6",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-1",children:"Active Games"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-lg",children:u.activeGames})]})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs(_e,{className:"p-4 sm:p-6",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-1",children:"Total Capacity"}),r.jsxs("p",{className:"text-gray-900 dark:text-white text-sm",children:[u.totalCapacity," players"]})]})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs(_e,{className:"p-4 sm:p-6",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-1",children:"Avg. Price"}),r.jsxs("p",{className:"text-gray-900 dark:text-white text-sm",children:["$",u.averagePrice,"/person"]})]})})]}),s?r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6 text-sm text-gray-600 dark:text-gray-400",children:"Loading games..."})}):e.length===0?r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6 text-sm text-gray-600 dark:text-gray-400",children:"No games yet. Create games inside a venue and they will appear here automatically."})}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:e.map(m=>{const f=h(m.venue_id),v=ZVe(m.difficulty),x=m.min_players??0,g=m.max_players??0,b=m.duration?`${m.duration} min`:"No duration set",w=typeof m.price=="number"?`$${m.price}`:"No price set",N=m.status==="active"?"bg-blue-100 dark:bg-[#4f46e5]/20 text-blue-700 dark:text-[#6366f1] border-blue-200 dark:border-[#4f46e5]/30":"bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#737373] border-gray-200 dark:border-[#2a2a2a]";return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsxs(Ke,{className:"space-y-2",children:[r.jsx(Xe,{className:"text-base text-gray-900 dark:text-white truncate",children:m.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#a3a3a3] line-clamp-3",children:m.description||"No description provided."}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Venue: ",f?f.name:"Unassigned"]})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col gap-2 text-sm text-gray-600 dark:text-[#a3a3a3]",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),r.jsxs("span",{children:[x," - ",g," players"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),r.jsx("span",{children:b})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(In,{className:"w-4 h-4"}),r.jsx("span",{children:w})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx(De,{variant:"secondary",className:`border ${JVe(v)}`,children:v}),r.jsx(De,{variant:"secondary",className:`border ${N}`,children:m.status})]}),f?r.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>t?.("venues"),children:[r.jsx(tn,{className:"w-4 h-4"}),"Go to Venue"]}):r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No venue assigned yet."})]})]},m.id)})})]})}var f3="Checkbox",[tWe]=fl(f3),[rWe,F8]=tWe(f3);function sWe(t){const{__scopeCheckbox:e,checked:s,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[m,f]=qc({prop:s,defaultProp:a??!1,onChange:c,caller:f3}),[v,x]=j.useState(null),[g,b]=j.useState(null),w=j.useRef(!1),N=v?!!o||!!v.closest("form"):!0,C={checked:m,disabled:i,setChecked:f,control:v,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:qf(a)?!1:a,isFormControl:N,bubbleInput:g,setBubbleInput:b};return r.jsx(rWe,{scope:e,...C,children:nWe(h)?h(C):n})}var Aae="CheckboxTrigger",Eae=j.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:s,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:v}=F8(Aae,t),x=bs(a,u),g=j.useRef(c);return j.useEffect(()=>{const b=i?.form;if(b){const w=()=>h(g.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[i,h]),r.jsx(Jr.button,{type:"button",role:"checkbox","aria-checked":qf(c)?"mixed":c,"aria-required":d,"data-state":Dae(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:x,onKeyDown:ur(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:ur(s,b=>{h(w=>qf(w)?!0:!w),v&&f&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})})});Eae.displayName=Aae;var Pae=j.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return r.jsx(sWe,{__scopeCheckbox:s,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:m})=>r.jsxs(r.Fragment,{children:[r.jsx(Eae,{...h,ref:e,__scopeCheckbox:s}),m&&r.jsx($ae,{__scopeCheckbox:s})]})})});Pae.displayName=f3;var Tae="CheckboxIndicator",Oae=j.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:n,...a}=t,i=F8(Tae,s);return r.jsx(Uo,{present:n||qf(i.checked)||i.checked===!0,children:r.jsx(Jr.span,{"data-state":Dae(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});Oae.displayName=Tae;var Iae="CheckboxBubbleInput",$ae=j.forwardRef(({__scopeCheckbox:t,...e},s)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:m,setBubbleInput:f}=F8(Iae,t),v=bs(s,f),x=a3(i),g=a5(n);j.useEffect(()=>{const w=m;if(!w)return;const N=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(N,"checked").set,A=!a.current;if(x!==i&&S){const k=new Event("click",{bubbles:A});w.indeterminate=qf(i),S.call(w,qf(i)?!1:i),w.dispatchEvent(k)}},[m,x,i,a]);const b=j.useRef(qf(i)?!1:i);return r.jsx(Jr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:d,value:u,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$ae.displayName=Iae;function nWe(t){return typeof t=="function"}function qf(t){return t==="indeterminate"}function Dae(t){return qf(t)?"indeterminate":t?"checked":"unchecked"}function ku({className:t,...e}){return r.jsx(Pae,{"data-slot":"checkbox",className:Ar("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:r.jsx(Oae,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:r.jsx(Sr,{className:"size-3.5"})})})}function p3(){const[t,e]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),o=async()=>{try{n(!0),i(null);const{data:S,error:A}=await pt.from("customers").select("*").order("created_at",{ascending:!1});if(A)throw A;e(S||[])}catch(S){console.error("Error fetching customers:",S),i(S.message),re.error("Failed to load customers")}finally{n(!1)}},l=async S=>{try{const{data:{user:A}}=await pt.auth.getUser();if(!A)throw new Error("User not authenticated");const{data:k,error:E}=await pt.from("customers").insert([{...S,created_by:A.id}]).select().single();if(E)throw E;return re.success("Customer created successfully!"),await o(),k}catch(A){throw console.error("Error creating customer:",A),re.error(A.message||"Failed to create customer"),A}},c=async(S,A)=>{try{const{data:k,error:E}=await pt.from("customers").update(A).eq("id",S).select().single();if(E)throw E;return re.success("Customer updated successfully!"),await o(),k}catch(k){throw console.error("Error updating customer:",k),re.error(k.message||"Failed to update customer"),k}},d=async S=>{try{const{error:A}=await pt.from("customers").delete().eq("id",S);if(A)throw A;re.success("Customer deleted successfully!"),await o()}catch(A){throw console.error("Error deleting customer:",A),re.error(A.message||"Failed to delete customer"),A}},u=async S=>{try{const{data:A,error:k}=await pt.from("customers").select("*").eq("id",S).single();if(k)throw k;return A}catch(A){throw console.error("Error fetching customer:",A),re.error("Failed to load customer details"),A}},h=async S=>{try{const{data:A,error:k}=await pt.rpc("search_customers",{p_search_term:S});if(k)throw k;return A||[]}catch(A){return console.error("Error searching customers:",A),[]}},m=async S=>{try{const{data:A,error:k}=await pt.rpc("get_customer_history",{p_customer_id:S});if(k)throw k;return A||[]}catch(A){return console.error("Error fetching customer history:",A),[]}},f=async S=>{try{const{data:A,error:k}=await pt.rpc("get_customer_with_insights",{p_customer_id:S});if(k)throw k;return A||null}catch(A){return console.error("Error fetching customer insights:",A),re.error("Failed to load customer insights"),null}},v=async S=>{try{const{data:A,error:k}=await pt.rpc("get_customer_games",{p_customer_id:S});if(k)throw k;return A||[]}catch(A){return console.error("Error fetching customer games:",A),[]}},x=async S=>{try{const{data:A,error:k}=await pt.rpc("get_customer_venues",{p_customer_id:S});if(k)throw k;return A||[]}catch(A){return console.error("Error fetching customer venues:",A),[]}},g=async()=>{try{const{data:S,error:A}=await pt.rpc("get_game_segments");if(A)throw A;return S||[]}catch(S){return console.error("Error fetching game segments:",S),[]}},b=async S=>{try{const{data:A,error:k}=await pt.rpc("get_game_audience",{p_game_id:S});if(k)throw k;return A||[]}catch(A){return console.error("Error fetching game audience:",A),[]}},w=async()=>{try{const{data:S,error:A}=await pt.rpc("get_venue_segments");if(A)throw A;return S||[]}catch(S){return console.error("Error fetching venue segments:",S),[]}},N=async S=>{try{const{data:A,error:k}=await pt.rpc("get_venue_audience",{p_venue_id:S});if(k)throw k;return A||[]}catch(A){return console.error("Error fetching venue audience:",A),[]}},C=async()=>{try{const{data:S,error:A}=await pt.rpc("get_customer_metrics");if(A)throw A;return S&&S.length>0?S[0]:null}catch(S){return console.error("Error fetching customer metrics:",S),null}};return j.useEffect(()=>{o();const S=pt.channel("customers-changes").on("postgres_changes",{event:"*",schema:"public",table:"customers"},A=>{console.log("Customer changed:",A),o()}).subscribe();return()=>{S.unsubscribe()}},[]),{customers:t,loading:s,error:a,createCustomer:l,updateCustomer:c,deleteCustomer:d,getCustomerById:u,searchCustomers:h,getCustomerHistory:m,getCustomerInsights:f,getCustomerGames:v,getCustomerVenues:x,getGameSegments:g,getGameAudience:b,getVenueSegments:w,getVenueAudience:N,getCustomerMetrics:C,refreshCustomers:o}}function bj({title:t,value:e,change:s,trend:n,icon:a}){const{theme:i}=Nr(),o=i==="dark",l=o?"bg-[#161616]":"bg-white",c=o?"border-[#1e1e1e]":"border-gray-200",d=o?"text-white":"text-gray-900",u=o?"text-[#a3a3a3]":"text-gray-600";return r.jsx("div",{className:`${l} ${c} border rounded-lg p-6 shadow-sm`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${u}`,children:t}),r.jsx("p",{className:`text-3xl mt-2 ${d}`,children:e}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx("span",{className:`text-sm ${n==="up"?"text-green-600 dark:text-green-500":"text-red-600 dark:text-red-500"}`,children:s}),r.jsx("span",{className:`text-sm ${u}`,children:"vs last month"})]})]}),r.jsx("div",{className:`p-3 rounded-lg ${o?"bg-[#1e1e1e]":"bg-gray-100"}`,children:a})]})})}function aWe(){const{theme:t}=Nr(),e=t==="dark",{customers:s,getCustomerMetrics:n}=p3(),[a,i]=j.useState(!0),[o,l]=j.useState(null),c="#4f46e5";j.useEffect(()=>{d()},[s]);const d=async()=>{const N=await n();l(N),i(!1)},u=(N,C)=>{if(C===0)return{value:"+0%",trend:"up"};const S=(N-C)/C*100;return{value:`${S>=0?"+":""}${S.toFixed(1)}%`,trend:S>=0?"up":"down"}},h=N=>N.toLocaleString("en-US"),m=N=>`$${Math.round(N).toLocaleString("en-US")}`;if(a||!o)return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(N=>r.jsxs("div",{className:`${e?"bg-[#161616] border-[#1e1e1e]":"bg-white border-gray-200"} border rounded-lg p-6 shadow-sm animate-pulse`,children:[r.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]},N))});const f=u(o.total_customers,o.total_customers_previous),v=u(o.active_customers,o.active_customers_previous),x=u(o.avg_lifetime_value,o.avg_lifetime_value_previous),g=o.total_customers_for_growth>0?o.new_customers_current/o.total_customers_for_growth*100:0,b=o.total_customers_previous>0?(o.total_customers_for_growth-o.total_customers_previous)/o.total_customers_previous*100:0,w=u(g,b);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(bj,{title:"Total Customers",value:h(o.total_customers),change:f.value,trend:f.trend,icon:r.jsx(Xr,{className:"w-6 h-6",style:{color:c}})}),r.jsx(bj,{title:"Active Customers",value:h(o.active_customers),change:v.value,trend:v.trend,icon:r.jsx(UE,{className:"w-6 h-6",style:{color:c}})}),r.jsx(bj,{title:"Avg. Lifetime Value",value:m(o.avg_lifetime_value),change:x.value,trend:x.trend,icon:r.jsx(In,{className:"w-6 h-6",style:{color:c}})}),r.jsx(bj,{title:"Growth Rate",value:`${g.toFixed(1)}%`,change:w.value,trend:w.trend,icon:r.jsx(Wn,{className:"w-6 h-6",style:{color:c}})})]})}function iWe(t,e=[]){let s=[];function n(i,o){const l=j.createContext(o);l.displayName=i+"Context";const c=s.length;s=[...s,o];const d=h=>{const{scope:m,children:f,...v}=h,x=m?.[t]?.[c]||l,g=j.useMemo(()=>v,Object.values(v));return r.jsx(x.Provider,{value:g,children:f})};d.displayName=i+"Provider";function u(h,m){const f=m?.[t]?.[c]||l,v=j.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>j.createContext(o));return function(l){const c=l?.[t]||i;return j.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,oWe(a,...e)]}function oWe(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}var lWe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rae=lWe.reduce((t,e)=>{const s=Wv(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),B8="Progress",U8=100,[cWe]=iWe(B8),[dWe,uWe]=cWe(B8),Mae=j.forwardRef((t,e)=>{const{__scopeProgress:s,value:n=null,max:a,getValueLabel:i=hWe,...o}=t;(a||a===0)&&!pH(a)&&console.error(mWe(`${a}`,"Progress"));const l=pH(a)?a:U8;n!==null&&!xH(n,l)&&console.error(fWe(`${n}`,"Progress"));const c=xH(n,l)?n:null,d=L4(c)?i(c,l):void 0;return r.jsx(dWe,{scope:s,value:c,max:l,children:r.jsx(Rae.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":L4(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Bae(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});Mae.displayName=B8;var Lae="ProgressIndicator",Fae=j.forwardRef((t,e)=>{const{__scopeProgress:s,...n}=t,a=uWe(Lae,s);return r.jsx(Rae.div,{"data-state":Bae(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:e})});Fae.displayName=Lae;function hWe(t,e){return`${Math.round(t/e*100)}%`}function Bae(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function L4(t){return typeof t=="number"}function pH(t){return L4(t)&&!isNaN(t)&&t>0}function xH(t,e){return L4(t)&&!isNaN(t)&&t<=e&&t>=0}function mWe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${U8}\`.`}function fWe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${U8} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pWe=Mae,xWe=Fae;function vm({className:t,value:e,...s}){return r.jsx(pWe,{"data-slot":"progress",className:Ar("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...s,children:r.jsx(xWe,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function QA({name:t,count:e,percentage:s,color:n,icon:a,description:i,onClick:o}){const{theme:l}=Nr(),c=l==="dark",d=c?"bg-[#161616]":"bg-white",u=c?"border-[#1e1e1e]":"border-gray-200",h=c?"text-white":"text-gray-900",m=c?"text-[#a3a3a3]":"text-gray-600";return r.jsxs("div",{onClick:o,className:`${d} ${u} border rounded-lg p-6 transition-all ${o?"cursor-pointer hover:shadow-lg hover:scale-105":""}`,children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${n}20`},children:a}),r.jsxs("div",{children:[r.jsx("h3",{className:h,children:t}),r.jsx("p",{className:`text-sm ${m}`,children:i})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-2xl ${h}`,children:e}),r.jsxs(De,{className:`${n.replace("#","bg-")} text-white`,children:[s,"%"]})]}),r.jsx(vm,{value:s,className:"h-2"})]}),o&&e>0&&r.jsx("div",{className:`mt-3 text-xs ${m} text-center`,children:"Click to view customers"})]})}function gWe(){const{theme:t}=Nr(),e=t==="dark",{customers:s,loading:n,getGameSegments:a,getVenueSegments:i,refreshCustomers:o}=p3(),[l,c]=j.useState([]),[d,u]=j.useState([]),[h,m]=j.useState([]),[f,v]=j.useState("lifecycle"),[x,g]=j.useState(!1);j.useEffect(()=>{s.length>0&&(S(),b())},[s]);const b=async()=>{const $=await a();u($.map(I=>({name:I.game_name,count:I.customer_count,percentage:s.length>0?Math.round(I.customer_count/s.length*100):0,color:"#ec4899",icon:r.jsx(bm,{className:"w-5 h-5",style:{color:"#ec4899"}}),description:`${I.total_bookings} bookings  $${Number(I.total_revenue).toFixed(0)} revenue`,gameId:I.game_id,imageUrl:I.game_image_url})));const T=await i();m(T.map(I=>({name:I.venue_name,count:I.customer_count,percentage:s.length>0?Math.round(I.customer_count/s.length*100):0,color:"#14b8a6",icon:r.jsx(Na,{className:"w-5 h-5",style:{color:"#14b8a6"}}),description:`${I.total_bookings} bookings  $${Number(I.total_revenue).toFixed(0)} revenue`,venueId:I.venue_id})))},w=async()=>{g(!0),await o(),re.success("Segments refreshed successfully"),setTimeout(()=>g(!1),500)},N=($,T)=>{if(T===0){re.error("No customers in this segment");return}re.success(`Marketing action: ${$} for ${T} customers`)},C=($,T)=>{if(T===0){re.info(`No customers in ${$} segment yet`);return}const I=s.filter(M=>{switch($){case"New Customers":return M.metadata?.is_new===!0;case"Active Customers":return M.metadata?.lifecycle_stage==="active";case"At-Risk Customers":return M.metadata?.lifecycle_stage==="at-risk";case"Churned Customers":return M.metadata?.lifecycle_stage==="churned";case"VIP Customers":return M.metadata?.spending_tier==="vip";case"High Spenders":return M.metadata?.spending_tier==="high";case"Game Players":return M.total_bookings>0;case"Venue Visitors":return M.total_bookings>0;default:return!1}}),L=I.map(M=>`${M.first_name} ${M.last_name}`).slice(0,5).join(", "),z=I.length>5?` and ${I.length-5} more`:"";re.success(`${$}: ${L}${z}`,{duration:5e3})},S=()=>{const $=s.length,T=s.filter(ee=>ee.metadata?.is_new===!0).length,I=s.filter(ee=>ee.metadata?.lifecycle_stage==="active").length,L=s.filter(ee=>ee.metadata?.lifecycle_stage==="at-risk").length,z=s.filter(ee=>ee.metadata?.lifecycle_stage==="churned").length,M=s.filter(ee=>ee.metadata?.spending_tier==="vip").length,V=s.filter(ee=>ee.metadata?.spending_tier==="high").length;s.filter(ee=>ee.metadata?.frequency_tier==="frequent").length,s.filter(ee=>ee.metadata?.frequency_tier==="regular").length;const B=s.filter(ee=>ee.total_bookings>0).length,F=s.filter(ee=>ee.total_bookings>0).length,J=[{name:"New Customers",count:T,percentage:$>0?Math.round(T/$*100):0,color:"#10b981",icon:r.jsx(_a,{className:"w-5 h-5",style:{color:"#10b981"}}),description:"Recently joined, less than 30 days"},{name:"Active Customers",count:I,percentage:$>0?Math.round(I/$*100):0,color:"#3b82f6",icon:r.jsx(Xr,{className:"w-5 h-5",style:{color:"#3b82f6"}}),description:"Booked within last 30 days"},{name:"At-Risk Customers",count:L,percentage:$>0?Math.round(L/$*100):0,color:"#f59e0b",icon:r.jsx(jr,{className:"w-5 h-5",style:{color:"#f59e0b"}}),description:"No bookings in 30-90 days"},{name:"Churned Customers",count:z,percentage:$>0?Math.round(z/$*100):0,color:"#6b7280",icon:r.jsx(HY,{className:"w-5 h-5",style:{color:"#6b7280"}}),description:"No bookings in 90+ days"},{name:"VIP Customers",count:M,percentage:$>0?Math.round(M/$*100):0,color:"#9333ea",icon:r.jsx(lc,{className:"w-5 h-5",style:{color:"#9333ea"}}),description:"$1,000+ lifetime value"},{name:"High Spenders",count:V,percentage:$>0?Math.round(V/$*100):0,color:"#8b5cf6",icon:r.jsx(Wn,{className:"w-5 h-5",style:{color:"#8b5cf6"}}),description:"$500-$999 lifetime value"},{name:"Game Players",count:B,percentage:$>0?Math.round(B/$*100):0,color:"#ec4899",icon:r.jsx(bm,{className:"w-5 h-5",style:{color:"#ec4899"}}),description:"Customers who have played games"},{name:"Venue Visitors",count:F,percentage:$>0?Math.round(F/$*100):0,color:"#14b8a6",icon:r.jsx(Na,{className:"w-5 h-5",style:{color:"#14b8a6"}}),description:"Customers who have visited venues"}];c(J)},A=e?"bg-[#161616]":"bg-white",k=e?"border-[#1e1e1e]":"border-gray-200",E=e?"text-white":"text-gray-900",O=e?"text-[#a3a3a3]":"text-gray-600";return n?r.jsx("div",{className:`${A} ${k} border rounded-lg p-12 text-center`,children:r.jsx("p",{className:O,children:"Loading segments..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:`${A} ${k} border rounded-lg p-6`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:`text-lg ${E}`,children:"About Customer Segments"}),r.jsxs("button",{onClick:w,disabled:x,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg transition-colors ${e?"bg-[#1e1e1e] hover:bg-[#2a2a2a]":"bg-gray-100 hover:bg-gray-200"} ${x?"opacity-50 cursor-not-allowed":""}`,children:[r.jsx(Ln,{className:`w-4 h-4 ${x?"animate-spin":""}`}),r.jsx("span",{className:`text-sm ${E}`,children:"Refresh"})]})]}),r.jsx("p",{className:`${O}`,children:"Customer segments help you target marketing campaigns and understand customer behavior. Segments are automatically updated based on booking history, spending patterns, games played, and venues visited."}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsxs(De,{className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[s.length," Total Customers"]}),r.jsx(De,{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Real-time Data"}),r.jsxs(De,{className:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400",children:[d.length," Games"]}),r.jsxs(De,{className:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",children:[h.length," Venues"]})]})]}),r.jsx("div",{className:`${A} ${k} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>v("lifecycle"),className:`px-4 py-2 rounded-lg transition-colors ${f==="lifecycle"?"bg-blue-500 text-white":e?"bg-[#1e1e1e] text-[#a3a3a3] hover:bg-[#2a2a2a]":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Lifecycle & Spending (",l.length,")"]}),r.jsxs("button",{onClick:()=>v("games"),className:`px-4 py-2 rounded-lg transition-colors ${f==="games"?"bg-pink-500 text-white":e?"bg-[#1e1e1e] text-[#a3a3a3] hover:bg-[#2a2a2a]":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(bm,{className:"w-4 h-4 inline mr-1"}),"Game Audiences (",d.length,")"]}),r.jsxs("button",{onClick:()=>v("venues"),className:`px-4 py-2 rounded-lg transition-colors ${f==="venues"?"bg-teal-500 text-white":e?"bg-[#1e1e1e] text-[#a3a3a3] hover:bg-[#2a2a2a]":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(Na,{className:"w-4 h-4 inline mr-1"}),"Venue Audiences (",h.length,")"]})]})}),f==="lifecycle"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map($=>r.jsx(QA,{...$,onClick:()=>C($.name,$.count)},$.name))}),f==="games"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.length>0?d.map($=>r.jsx(QA,{...$,onClick:()=>re.info(`Game: ${$.name} - ${$.count} customers have played this game`)},$.gameId||$.name)):r.jsxs("div",{className:`${A} ${k} border rounded-lg p-8 col-span-full text-center`,children:[r.jsx(bm,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{className:E,children:"No game segments yet"}),r.jsx("p",{className:`text-sm ${O}`,children:"Game segments will appear once customers start booking games"})]})}),f==="venues"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.length>0?h.map($=>r.jsx(QA,{...$,onClick:()=>re.info(`Venue: ${$.name} - ${$.count} customers have visited this venue`)},$.venueId||$.name)):r.jsxs("div",{className:`${A} ${k} border rounded-lg p-8 col-span-full text-center`,children:[r.jsx(Na,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{className:E,children:"No venue segments yet"}),r.jsx("p",{className:`text-sm ${O}`,children:"Venue segments will appear once customers start visiting venues"})]})}),r.jsxs("div",{className:`${A} ${k} border rounded-lg p-6`,children:[r.jsx("h3",{className:`text-lg ${E} mb-4`,children:"Segment Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.find($=>$.name==="VIP Customers")&&r.jsxs("button",{onClick:()=>N("Email VIP Customers",l.find($=>$.name==="VIP Customers")?.count||0),className:"px-4 py-3 text-left rounded-lg border transition-colors hover:bg-opacity-80 hover:shadow-md",style:{backgroundColor:e?"#1e1e1e":"#f9fafb",borderColor:e?"#2a2a2a":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsx("p",{className:E,children:"Email VIP Customers"})]}),r.jsxs("p",{className:`text-sm ${O} mt-1`,children:["Send exclusive offers to ",l.find($=>$.name==="VIP Customers")?.count||0," VIPs"]})]}),l.find($=>$.name==="Churned Customers")&&r.jsxs("button",{onClick:()=>N("Re-engage Churned Customers",l.find($=>$.name==="Churned Customers")?.count||0),className:"px-4 py-3 text-left rounded-lg border transition-colors hover:bg-opacity-80 hover:shadow-md",style:{backgroundColor:e?"#1e1e1e":"#f9fafb",borderColor:e?"#2a2a2a":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-4 h-4"}),r.jsx("p",{className:E,children:"Re-engage Churned"})]}),r.jsxs("p",{className:`text-sm ${O} mt-1`,children:["Win back ",l.find($=>$.name==="Churned Customers")?.count||0," churned customers"]})]}),l.find($=>$.name==="New Customers")&&r.jsxs("button",{onClick:()=>N("Welcome New Customers",l.find($=>$.name==="New Customers")?.count||0),className:"px-4 py-3 text-left rounded-lg border transition-colors hover:bg-opacity-80 hover:shadow-md",style:{backgroundColor:e?"#1e1e1e":"#f9fafb",borderColor:e?"#2a2a2a":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"w-4 h-4"}),r.jsx("p",{className:E,children:"Welcome New Customers"})]}),r.jsxs("p",{className:`text-sm ${O} mt-1`,children:["Send onboarding to ",l.find($=>$.name==="New Customers")?.count||0," new customers"]})]}),l.find($=>$.name==="At-Risk Customers")&&r.jsxs("button",{onClick:()=>N("Prevent Churn",l.find($=>$.name==="At-Risk Customers")?.count||0),className:"px-4 py-3 text-left rounded-lg border transition-colors hover:bg-opacity-80 hover:shadow-md",style:{backgroundColor:e?"#1e1e1e":"#f9fafb",borderColor:e?"#2a2a2a":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsx("p",{className:E,children:"Prevent Churn"})]}),r.jsxs("p",{className:`text-sm ${O} mt-1`,children:["Re-engage ",l.find($=>$.name==="At-Risk Customers")?.count||0," at-risk customers"]})]})]})]})]})}function vWe({open:t,onClose:e,onSave:s,editCustomer:n}){const{theme:a}=Nr(),i=a==="dark",[o,l]=j.useState({firstName:n?.firstName||"",lastName:n?.lastName||"",email:n?.email||"",phone:n?.phone||"",segment:n?.segment||"Regular",communicationPreference:n?.communicationPreference||"Email",notes:n?.notes||""}),c=h=>{h.preventDefault(),s(o),e()},d=i?"bg-[#1e1e1e]":"bg-white",u=i?"text-white":"text-gray-900";return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${d} ${u} max-w-2xl`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:u,children:n?"Edit Customer":"Add New Customer"}),r.jsx(wr,{className:i?"text-[#737373]":"text-gray-600",children:n?"Update customer information and preferences.":"Add a new customer to your database with their contact details and preferences."})]}),r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"First Name *"}),r.jsx(de,{required:!0,value:o.firstName,onChange:h=>l({...o,firstName:h.target.value}),className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`,placeholder:"John"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Last Name *"}),r.jsx(de,{required:!0,value:o.lastName,onChange:h=>l({...o,lastName:h.target.value}),className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`,placeholder:"Doe"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Email Address *"}),r.jsx(de,{required:!0,type:"email",value:o.email,onChange:h=>l({...o,email:h.target.value}),className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`,placeholder:"john@example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Phone Number"}),r.jsx(de,{type:"tel",value:o.phone,onChange:h=>l({...o,phone:h.target.value}),className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`,placeholder:"(555) 123-4567"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Customer Segment"}),r.jsxs(sr,{value:o.segment,onValueChange:h=>l({...o,segment:h}),children:[r.jsx(ar,{className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300 text-gray-900"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsx(Ae,{value:"VIP",children:"VIP"}),r.jsx(Ae,{value:"Regular",children:"Regular"}),r.jsx(Ae,{value:"New",children:"New"}),r.jsx(Ae,{value:"Inactive",children:"Inactive"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Communication Preference"}),r.jsxs(sr,{value:o.communicationPreference,onValueChange:h=>l({...o,communicationPreference:h}),children:[r.jsx(ar,{className:`h-12 ${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300 text-gray-900"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsx(Ae,{value:"Email",children:"Email"}),r.jsx(Ae,{value:"SMS",children:"SMS"}),r.jsx(Ae,{value:"Both",children:"Both"}),r.jsx(Ae,{value:"None",children:"None"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Notes"}),r.jsx(Ps,{value:o.notes,onChange:h=>l({...o,notes:h.target.value}),className:`${i?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`,placeholder:"Additional notes about this customer...",rows:3})]}),r.jsxs(Us,{children:[r.jsx(W,{type:"button",variant:"outline",onClick:e,className:i?"border-[#1e1e1e] text-[#a3a3a3] hover:bg-[#1a1a1a] hover:text-white":"border-gray-300 text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx(W,{type:"submit",style:{backgroundColor:"#4f46e5"},className:"text-white hover:opacity-90",children:n?"Update Customer":"Add Customer"})]})]})]})})}function yWe({open:t,onClose:e,customer:s}){const{theme:n}=Nr(),a=n==="dark",{getCustomerInsights:i,getCustomerGames:o,getCustomerVenues:l,getCustomerHistory:c}=p3(),[d,u]=j.useState(null),[h,m]=j.useState([]),[f,v]=j.useState([]),[x,g]=j.useState([]),[b,w]=j.useState(!1);j.useEffect(()=>{t&&s?.id&&N()},[t,s?.id]);const N=async()=>{if(s?.id){w(!0);try{const[T,I,L,z]=await Promise.all([i(s.id),o(s.id),l(s.id),c(s.id)]);u(T),m(I),v(L),g(z)}catch(T){console.error("Error loading customer data:",T)}finally{w(!1)}}};if(!s)return null;const C=a?"bg-[#1e1e1e]":"bg-white",S=a?"bg-[#161616]":"bg-white",A=a?"border-[#1e1e1e]":"border-gray-200",k=a?"text-white":"text-gray-900",E=a?"text-[#a3a3a3]":"text-gray-600",O=T=>{switch(T?.toLowerCase()){case"vip":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"high":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400";case"frequent":case"regular":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"new":case"active":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"at-risk":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"churned":case"inactive":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}},$=T=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(T);return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${C} ${k} max-w-4xl max-h-[90vh] overflow-y-auto`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:k,children:"Customer Profile"}),r.jsx(wr,{className:a?"text-[#737373]":"text-gray-600",children:"View detailed customer information, booking history, and engagement metrics."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:`${S} ${A} border rounded-lg p-6`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:`text-2xl ${k}`,children:[s.firstName," ",s.lastName]}),r.jsxs("p",{className:`${E} mt-1`,children:["Customer ID: ",s.id]})]}),r.jsx(De,{className:O(s.segment),children:s.segment})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${a?"bg-[#1e1e1e]":"bg-gray-100"}`,children:r.jsx(Ds,{className:`w-4 h-4 ${E}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Email"}),r.jsx("p",{className:`text-sm ${k}`,children:s.email})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${a?"bg-[#1e1e1e]":"bg-gray-100"}`,children:r.jsx(la,{className:`w-4 h-4 ${E}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Phone"}),r.jsx("p",{className:`text-sm ${k}`,children:s.phone})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${a?"bg-[#1e1e1e]":"bg-gray-100"}`,children:r.jsx(qs,{className:`w-4 h-4 ${E}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Last Booking"}),r.jsx("p",{className:`text-sm ${k}`,children:s.lastBooking})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${a?"bg-[#1e1e1e]":"bg-gray-100"}`,children:r.jsx(jr,{className:`w-4 h-4 ${E}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Member Since"}),r.jsx("p",{className:`text-sm ${k}`,children:"Jan 2023"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Total Bookings"}),r.jsx("p",{className:`text-2xl mt-1 ${k}`,children:s.totalBookings})]}),r.jsx("div",{className:`p-3 rounded-lg ${a?"bg-[#1e1e1e]":"bg-blue-50"}`,children:r.jsx(qY,{className:"w-6 h-6 text-blue-600 dark:text-blue-500"})})]})}),r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Lifetime Value"}),r.jsxs("p",{className:`text-2xl mt-1 ${k}`,children:["$",s.totalSpent]})]}),r.jsx("div",{className:`p-3 rounded-lg ${a?"bg-[#1e1e1e]":"bg-green-50"}`,children:r.jsx(In,{className:"w-6 h-6 text-green-600 dark:text-green-500"})})]})}),r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${E}`,children:"Avg. Booking Value"}),r.jsx("p",{className:`text-2xl mt-1 ${k}`,children:"$142"})]}),r.jsx("div",{className:`p-3 rounded-lg ${a?"bg-[#1e1e1e]":"bg-purple-50"}`,children:r.jsx(Wn,{className:"w-6 h-6 text-purple-600 dark:text-purple-500"})})]})})]}),r.jsxs(wn,{defaultValue:"bookings",className:"w-full",children:[r.jsxs(kn,{className:`${a?"bg-[#161616]":"bg-gray-100"}`,children:[r.jsx(Tt,{value:"bookings",children:"Booking History"}),r.jsxs(Tt,{value:"games",children:["Games Played (",h.length,")"]}),r.jsxs(Tt,{value:"venues",children:["Venues Visited (",f.length,")"]}),r.jsx(Tt,{value:"notes",children:"Notes"})]}),r.jsx(Bt,{value:"bookings",className:"space-y-3 mt-4",children:b?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"Loading booking history..."})}):x.length===0?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"No bookings found"})}):x.map(T=>r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("p",{className:k,children:T.game_name}),r.jsx(De,{className:O(T.status),children:T.status})]}),r.jsxs("p",{className:`text-sm ${E} mt-1`,children:[T.venue_name,"  ",new Date(T.booking_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),r.jsx("p",{className:`text-lg ${k}`,children:$(T.total_amount)})]})},T.booking_id))}),r.jsx(Bt,{value:"games",className:"space-y-3 mt-4",children:b?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"Loading games..."})}):h.length===0?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"No games played yet"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(T=>r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-3 rounded-lg ${a?"bg-[#1e1e1e]":"bg-blue-50"}`,children:r.jsx(bm,{className:"w-6 h-6 text-blue-600 dark:text-blue-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`${k} font-medium`,children:T.game_name}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Times Played:"}),r.jsx("span",{className:k,children:T.booking_count})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Total Spent:"}),r.jsx("span",{className:k,children:$(T.total_spent)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Last Played:"}),r.jsx("span",{className:k,children:new Date(T.last_played).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]})]})},T.game_id))})}),r.jsx(Bt,{value:"venues",className:"space-y-3 mt-4",children:b?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"Loading venues..."})}):f.length===0?r.jsx("div",{className:`${S} ${A} border rounded-lg p-8 text-center`,children:r.jsx("p",{className:E,children:"No venues visited yet"})}):f.map(T=>r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-3 rounded-lg ${a?"bg-[#1e1e1e]":"bg-purple-50"}`,children:r.jsx(Na,{className:"w-6 h-6 text-purple-600 dark:text-purple-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`${k} font-medium`,children:T.venue_name}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Visits:"}),r.jsx("span",{className:k,children:T.visit_count})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Total Spent:"}),r.jsx("span",{className:k,children:$(T.total_spent)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:E,children:"Last Visit:"}),r.jsx("span",{className:k,children:new Date(T.last_visit).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})]})]})},T.venue_id))}),r.jsx(Bt,{value:"notes",className:"mt-4",children:r.jsx("div",{className:`${S} ${A} border rounded-lg p-4`,children:r.jsx("p",{className:E,children:s.notes||"No notes available for this customer."})})})]})]})]})})}function bWe(){const{theme:t}=Nr(),{hasPermission:e}=no(),s=t==="dark",{customers:n,loading:a,refreshCustomers:i,createCustomer:o,updateCustomer:l}=p3(),[c,d]=j.useState(!1),u=async()=>{d(!0),await i(),setTimeout(()=>d(!1),500)},h=e("customers.edit");e("customers.export");const[m,f]=j.useState(""),[v,x]=j.useState("all"),[g,b]=j.useState(!1),[w,N]=j.useState(!1),[C,S]=j.useState(null),[A,k]=j.useState(new Set),[E,O]=j.useState(!1),$=n.map(oe=>({id:oe.id,firstName:oe.first_name,lastName:oe.last_name,email:oe.email,phone:oe.phone,totalBookings:oe.total_bookings,totalSpent:oe.total_spent,lastBooking:oe.updated_at?new Date(oe.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never",segment:oe.metadata?.lifecycle_stage||"new",status:oe.status==="active"?"Active":"Inactive",communicationPreference:"Email",notes:oe.notes,favoriteGame:oe.metadata?.favorite_game_name||null,preferredVenue:oe.metadata?.preferred_venue_name||null})),[T,I]=j.useState(!1),[L,z]=j.useState("csv"),[M,V]=j.useState(!1),B=s?"bg-[#161616]":"bg-white",F=s?"border-[#1e1e1e]":"border-gray-200",J=s?"text-white":"text-gray-900",ee=s?"text-[#a3a3a3]":"text-gray-600",q=oe=>{switch(oe?.toLowerCase()){case"new":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"active":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"at-risk":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"churned":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";case"vip":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"high":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400";case"frequent":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"regular":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"occasional":return"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400";case"one-time":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";case"inactive":return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}},U=oe=>oe==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400",Z=$.filter(oe=>{const pe=oe.firstName.toLowerCase().includes(m.toLowerCase())||oe.lastName.toLowerCase().includes(m.toLowerCase())||oe.email.toLowerCase().includes(m.toLowerCase()),ye=v==="all"||oe.segment===v;return pe&&ye}),K=()=>{if(E)k(new Set),O(!1);else{const oe=new Set(Z.map(pe=>pe.id));k(oe),O(!0)}},se=oe=>{const pe=new Set(A);pe.has(oe)?(pe.delete(oe),O(!1)):(pe.add(oe),pe.size===Z.length&&O(!0)),k(pe)},ne=oe=>{S(oe),N(!0)},ie=oe=>{S(oe),b(!0)},be=async oe=>{try{C?await l(C.id,{first_name:oe.firstName,last_name:oe.lastName,email:oe.email,phone:oe.phone,notes:oe.notes,status:oe.status?.toLowerCase()||"active"}):await o({first_name:oe.firstName,last_name:oe.lastName,email:oe.email,phone:oe.phone,country:"United States",status:"active",metadata:{},notes:oe.notes||""}),S(null),await i()}catch(pe){console.error("Error saving customer:",pe)}},ue=async()=>{try{V(!0);const oe=m.trim().toLowerCase(),pe=$.filter(ye=>{const $e=oe===""||`${ye.firstName} ${ye.lastName}`.toLowerCase().includes(oe)||(ye.email||"").toLowerCase().includes(oe),Se=v==="all"||ye.segment===v||v==="Active"&&ye.status==="Active"||v==="Inactive"&&ye.status==="Inactive";return $e&&Se});if(!pe.length){alert("No customers to export based on current filters");return}if(L==="csv"){const ye=["Customer ID","First Name","Last Name","Email","Phone","Segment","Status","Total Bookings","Total Spent","Last Booking"],$e=Ue=>'"'+(Ue==null?"":String(Ue)).replace(/"/g,'""')+'"',Se=pe.map(Ue=>[$e(Ue.id),$e(Ue.firstName),$e(Ue.lastName),$e(Ue.email),$e(Ue.phone),$e(Ue.segment),$e(Ue.status),$e(Ue.totalBookings),$e(Ue.totalSpent),$e(Ue.lastBooking)].join(",")),Y=[ye.join(","),...Se].join(`
`),Le=new Blob([Y],{type:"text/csv;charset=utf-8;"}),xe=URL.createObjectURL(Le),mt=document.createElement("a");mt.href=xe,mt.download=`customers_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(xe)}else{const ye=new zr;let $e=14;ye.setFontSize(16),ye.text("Customers Export",14,$e),$e+=8,ye.setFontSize(10),ye.text(`Generated: ${new Date().toLocaleString()}`,14,$e),$e+=8;const Se=6,Y=14,Le=ye.internal.pageSize.getHeight();pe.forEach((xe,mt)=>{[`#${mt+1}  ${xe.firstName} ${xe.lastName} (${xe.id})`,`Email: ${xe.email}  Phone: ${xe.phone||"N/A"}`,`Segment: ${xe.segment}  Status: ${xe.status}`,`Bookings: ${xe.totalBookings}  Total Spent: $${(xe.totalSpent??0).toLocaleString()}`,`Last Booking: ${xe.lastBooking}`].forEach(xt=>{$e+Se>Le-10&&(ye.addPage(),$e=14),ye.text(xt,Y,$e),$e+=Se}),$e+Se>Le-10&&(ye.addPage(),$e=14),ye.text("".repeat(40),Y,$e),$e+=Se}),ye.save(`customers_${new Date().toISOString().slice(0,10)}.pdf`)}}catch(oe){console.error(oe),alert("Failed to export customers")}finally{V(!1),I(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(Ei,{title:"Customers / Guests",description:"Manage customer database, profiles, and segments",sticky:!0,action:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",className:"h-11",onClick:u,disabled:c,children:[r.jsx(ju,{className:`w-4 h-4 sm:mr-2 ${c?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),r.jsxs(W,{className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] h-11",onClick:()=>b(!0),children:[r.jsx(Nd,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Customer"})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(aWe,{}),r.jsxs(wn,{defaultValue:"database",className:"w-full",children:[r.jsxs(kn,{className:`${s?"bg-[#161616]":"bg-gray-100"}`,children:[r.jsx(Tt,{value:"database",children:"Customer Database"}),r.jsx(Tt,{value:"segments",children:"Segments & Marketing"})]}),r.jsx(Bt,{value:"database",className:"space-y-6 mt-6",children:r.jsxs("div",{className:`${B} ${F} border rounded-lg`,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:s?"#1e1e1e":"#e5e7eb"},children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${ee}`}),r.jsx(de,{placeholder:"Search customers by name or email...",value:m,onChange:oe=>f(oe.target.value),className:`pl-10 h-12 ${s?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsxs(W,{variant:"outline",className:`h-12 ${s?"border-[#1e1e1e] bg-[#0a0a0a] text-[#a3a3a3] hover:bg-[#1a1a1a] hover:text-white":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Filter"]})}),r.jsxs(On,{className:s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Dt,{onClick:()=>x("all"),children:"All Customers"}),r.jsx(Dt,{onClick:()=>x("VIP"),children:"VIP Only"}),r.jsx(Dt,{onClick:()=>x("Regular"),children:"Regular Only"}),r.jsx(Dt,{onClick:()=>x("New"),children:"New Only"}),r.jsx(Dt,{onClick:()=>x("Inactive"),children:"Inactive Only"})]})]}),r.jsx(Eu,{permissions:["customers.export"],children:r.jsxs(W,{variant:"outline",onClick:()=>I(!0),className:`h-12 ${s?"border-[#1e1e1e] bg-[#0a0a0a] text-[#a3a3a3] hover:bg-[#1a1a1a] hover:text-white":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]})}),r.jsx(Eu,{permissions:["customers.create"],children:r.jsxs(W,{onClick:()=>{S(null),b(!0)},style:{backgroundColor:"#4f46e5"},className:"h-12 text-white hover:opacity-90",children:[r.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Add Customer"]})})]})]})}),A.size>0&&r.jsx("div",{className:`${B} ${F} border rounded-lg p-4 mb-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("p",{className:J,children:[r.jsx("span",{className:"font-semibold",children:A.size})," customer",A.size!==1?"s":""," selected"]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{k(new Set),O(!1)},className:s?"text-[#a3a3a3] hover:text-white":"",children:"Clear selection"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{re.info(`Exporting ${A.size} customers...`)},className:s?"border-[#2a2a2a] text-[#a3a3a3]":"",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export Selected"]})})]})}),a?r.jsx("div",{className:`${B} ${F} border rounded-lg p-12 text-center`,children:r.jsx("p",{className:ee,children:"Loading customers..."})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{className:s?"border-[#1e1e1e] hover:bg-transparent":"hover:bg-transparent",children:[r.jsx(fs,{className:`${J} w-12`,children:r.jsx(ku,{checked:E,onCheckedChange:K,"aria-label":"Select all customers"})}),r.jsx(fs,{className:J,children:"Customer"}),r.jsx(fs,{className:J,children:"Contact"}),r.jsx(fs,{className:J,children:"Bookings"}),r.jsx(fs,{className:J,children:"Lifetime Value"}),r.jsx(fs,{className:J,children:"Last Booking"}),r.jsx(fs,{className:J,children:"Segment"}),r.jsx(fs,{className:J,children:"Status"}),r.jsx(fs,{className:J,children:"Actions"})]})}),r.jsx(Ux,{children:Z.map(oe=>r.jsxs(ui,{className:`${s?"border-[#1e1e1e] hover:bg-[#1a1a1a]":"hover:bg-gray-50"}`,children:[r.jsx(Jt,{children:r.jsx(ku,{checked:A.has(oe.id),onCheckedChange:()=>se(oe.id),"aria-label":`Select ${oe.firstName} ${oe.lastName}`})}),r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsxs("p",{className:J,children:[oe.firstName," ",oe.lastName]}),r.jsx("p",{className:`text-sm ${ee}`,children:oe.id})]})}),r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${J}`,children:oe.email}),r.jsx("p",{className:`text-sm ${ee}`,children:oe.phone})]})}),r.jsx(Jt,{className:J,children:oe.totalBookings}),r.jsxs(Jt,{className:J,children:["$",oe.totalSpent.toLocaleString()]}),r.jsx(Jt,{className:ee,children:oe.lastBooking}),r.jsx(Jt,{children:r.jsx(De,{className:q(oe.segment),children:oe.segment})}),r.jsx(Jt,{children:r.jsx(De,{className:U(oe.status),children:oe.status})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:s?"hover:bg-[#1a1a1a]":"hover:bg-gray-100",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{className:s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsxs(Dt,{onClick:()=>ne(oe),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Profile"]}),h&&r.jsxs(Dt,{onClick:()=>ie(oe),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]})]})})]},oe.id))})]})}),!a&&Z.length===0&&r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:ee,children:"No customers found matching your search."})})]})}),r.jsx(Bt,{value:"segments",className:"mt-6",children:r.jsx(gWe,{})})]})]}),r.jsx(mr,{open:T,onOpenChange:I,children:r.jsxs(fr,{className:s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(br,{children:[r.jsx(pr,{className:J,children:"Export Customers"}),r.jsx(wr,{className:ee,children:"Choose a format and export the currently filtered customers."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:ee,children:"Format"}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx(W,{variant:L==="csv"?"default":"outline",onClick:()=>z("csv"),className:s?L==="csv"?"":"border-[#2a2a2a] text-[#a3a3a3]":"",children:"CSV"}),r.jsx(W,{variant:L==="pdf"?"default":"outline",onClick:()=>z("pdf"),className:s?L==="pdf"?"":"border-[#2a2a2a] text-[#a3a3a3]":"",children:"PDF"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(W,{variant:"ghost",onClick:()=>I(!1),className:s?"text-[#a3a3a3] hover:text-white hover:bg-[#161616]":"",disabled:M,children:"Cancel"}),r.jsx(W,{onClick:ue,disabled:M,children:M?"Exporting":"Export"})]})]})]})}),r.jsx(vWe,{open:g,onClose:()=>{b(!1),S(null)},onSave:be,editCustomer:C}),r.jsx(yWe,{open:w,onClose:()=>{N(!1),S(null)},customer:C})]})}function gH({className:t}){return r.jsx("svg",{viewBox:"0 0 24 24",className:t,fill:"currentColor",children:r.jsx("path",{d:"M12.007,2.5c-4.687,0-8.5,3.813-8.5,8.5s3.813,8.5,8.5,8.5s8.5-3.813,8.5-8.5S16.694,2.5,12.007,2.5z M13.007,14.962 V9.038l4.962,2.962L13.007,14.962z"})})}function wWe(){const{theme:t}=Nr(),e=t==="dark",s=e?"bg-[#161616]":"bg-white",n=e?"border-[#2a2a2a]":"border-gray-200",a=e?"text-white":"text-gray-900",i=e?"text-[#a3a3a3]":"text-gray-600",o=e?"bg-[#1e1e1e]":"bg-gray-50",[l,c]=j.useState(!1),[d,u]=j.useState(!1),[h,m]=j.useState(!0),[f,v]=j.useState(!1),x=()=>{re.success("Campaign settings saved successfully!")},g=()=>{v(!0),setTimeout(()=>{c(!0),v(!1),re.success("Google Ads connected successfully!")},1500)},b=()=>{c(!1),re.success("Google Ads disconnected")},w=()=>{v(!0),setTimeout(()=>{u(!0),v(!1),re.success("Facebook Ads connected successfully!")},1500)},N=()=>{u(!1),re.success("Facebook Ads disconnected")};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:`mb-2 ${a}`,children:"Ad Campaigns"}),r.jsx("p",{className:i,children:"Track and manage your advertising campaigns and analytics"})]}),r.jsxs(wn,{defaultValue:"overview",className:"space-y-6",children:[r.jsxs(kn,{className:`${e?"bg-[#161616] border border-[#2a2a2a]":""} w-full justify-start overflow-x-auto flex-wrap h-auto`,children:[r.jsxs(Tt,{value:"overview",className:"gap-2",children:[r.jsx(Pu,{className:"w-4 h-4"}),"Overview"]}),r.jsxs(Tt,{value:"platforms",className:"gap-2",children:[r.jsx(zY,{className:"w-4 h-4"}),"Ad Platforms"]}),r.jsxs(Tt,{value:"analytics",className:"gap-2",children:[r.jsx(Eue,{className:"w-4 h-4"}),"Analytics"]})]}),r.jsxs(Bt,{value:"overview",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Total Spend"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$4,567"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+12.5%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(In,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Impressions"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"124.5K"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+8.2%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(ys,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Clicks"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"3,241"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(uN,{className:`w-4 h-4 ${e?"text-red-400":"text-red-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-red-400":"text-red-600"}`,children:"-3.1%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(WY,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Conversions"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"187"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+15.3%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-amber-500/20":"bg-yellow-100"}`,children:r.jsx($f,{className:`w-6 h-6 ${e?"text-amber-400":"text-yellow-600"}`})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:a,children:"Platform Performance"}),r.jsx("p",{className:`text-sm ${i}`,children:"Last 30 days"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${o}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(gH,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Google Ads"}),r.jsx("p",{className:`text-xs ${i}`,children:"$2,340 spend"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm ${a}`,children:"89 conversions"}),r.jsx("p",{className:`text-xs ${e?"text-emerald-400":"text-green-600"}`,children:"+18% ROI"})]})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${o}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ib,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Facebook Ads"}),r.jsx("p",{className:`text-xs ${i}`,children:"$1,567 spend"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm ${a}`,children:"62 conversions"}),r.jsx("p",{className:`text-xs ${e?"text-emerald-400":"text-green-600"}`,children:"+14% ROI"})]})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${o}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(ml,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Other Platforms"}),r.jsx("p",{className:`text-xs ${i}`,children:"$660 spend"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm ${a}`,children:"36 conversions"}),r.jsx("p",{className:`text-xs ${e?"text-emerald-400":"text-green-600"}`,children:"+12% ROI"})]})]})]})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:a,children:"Conversion Funnel"}),r.jsx("p",{className:`text-sm ${i}`,children:"Customer journey metrics"})]}),r.jsxs(_e,{className:"space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm ${i}`,children:"Visitors"}),r.jsx("span",{className:`text-sm ${a}`,children:"12,456"})]}),r.jsx("div",{className:`w-full rounded-full h-2 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx("div",{className:`h-2 rounded-full ${e?"bg-[#4f46e5]":"bg-blue-600"}`,style:{width:"100%"}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm ${i}`,children:"Add to Cart"}),r.jsx("span",{className:`text-sm ${a}`,children:"1,247"})]}),r.jsx("div",{className:`w-full rounded-full h-2 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx("div",{className:`h-2 rounded-full ${e?"bg-[#4f46e5]":"bg-blue-600"}`,style:{width:"75%"}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm ${i}`,children:"Checkout"}),r.jsx("span",{className:`text-sm ${a}`,children:"623"})]}),r.jsx("div",{className:`w-full rounded-full h-2 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx("div",{className:`h-2 rounded-full ${e?"bg-[#4f46e5]":"bg-blue-600"}`,style:{width:"50%"}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm ${i}`,children:"Purchase"}),r.jsx("span",{className:`text-sm ${a}`,children:"187"})]}),r.jsx("div",{className:`w-full rounded-full h-2 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx("div",{className:`h-2 rounded-full ${e?"bg-emerald-500":"bg-green-600"}`,style:{width:"25%"}})})]}),r.jsx(Ze,{className:"my-4"}),r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${e?"bg-emerald-500/10":"bg-green-50"}`,children:[r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-900"}`,children:"Conversion Rate"}),r.jsx("span",{className:`text-lg ${e?"text-emerald-400":"text-green-900"}`,children:"1.50%"})]})]})]})]})]}),r.jsxs(Bt,{value:"platforms",className:"space-y-6",children:[r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(gH,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Google Ads"}),r.jsx("p",{className:`text-sm ${i}`,children:"Manage Google advertising campaigns"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l&&r.jsxs(De,{variant:"secondary",className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Connected"]}),l?r.jsxs(W,{variant:"outline",size:"sm",className:e?"text-red-400 hover:text-red-300 hover:bg-red-500/10":"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:b,children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Disconnect"]}):r.jsx(W,{size:"sm",style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:g,disabled:f,children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Connecting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Connect Account"]})})]})]})}),r.jsxs(_e,{className:"space-y-4",children:[!l&&r.jsx("div",{className:`p-4 border rounded-lg mb-4 ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsx("p",{className:`text-sm ${e?"text-[#a3a3a3]":"text-gray-700"}`,children:"You can manually enter your Google Ads details below, or connect your account automatically using the button above."})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"googleAdsId",className:i,children:"Google Ads Customer ID"}),r.jsx(de,{id:"googleAdsId",placeholder:"123-456-7890",defaultValue:l?"123-456-7890":""})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"googleConversionId",className:i,children:"Conversion ID"}),r.jsx(de,{id:"googleConversionId",placeholder:"AW-XXXXXXXXX",defaultValue:l?"AW-987654321":""})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"googleConversionLabel",className:i,children:"Conversion Label"}),r.jsx(de,{id:"googleConversionLabel",placeholder:"Conversion label",defaultValue:l?"abc123def456":""})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",children:"Test Connection"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:x,children:"Save Changes"})]})]})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ib,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Facebook Ads / Meta Pixel"}),r.jsx("p",{className:`text-sm ${i}`,children:"Track Facebook and Instagram campaigns"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[d&&r.jsxs(De,{variant:"secondary",className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Connected"]}),d?r.jsxs(W,{variant:"outline",size:"sm",className:e?"text-red-400 hover:text-red-300 hover:bg-red-500/10":"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:N,children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Disconnect"]}):r.jsx(W,{size:"sm",style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:w,disabled:f,children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Connecting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Connect Account"]})})]})]})}),r.jsxs(_e,{className:"space-y-4",children:[!d&&r.jsx("div",{className:`p-4 border rounded-lg mb-4 ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsx("p",{className:`text-sm ${e?"text-[#a3a3a3]":"text-gray-700"}`,children:"You can manually enter your Facebook Ads details below, or connect your account automatically using the button above."})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"facebookPixelId",className:i,children:"Facebook Pixel ID"}),r.jsx(de,{id:"facebookPixelId",placeholder:"123456789012345",defaultValue:d?"123456789012345":""})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"facebookAccessToken",className:i,children:"Access Token"}),r.jsx(de,{id:"facebookAccessToken",type:"password",placeholder:"Access token",defaultValue:d?"":""})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",children:"Test Connection"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:x,children:"Save Changes"})]})]})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(ml,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`})}),r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Other Advertising Platforms"}),r.jsx("p",{className:`text-sm ${i}`,children:"Additional marketing platforms"})]})]})}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-4 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:`text-sm ${a}`,children:"TikTok Ads"}),r.jsx(De,{variant:"secondary",className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Not Connected"})]}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full",children:"Connect"})]}),r.jsxs("div",{className:`p-4 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:`text-sm ${a}`,children:"LinkedIn Ads"}),r.jsx(De,{variant:"secondary",className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Not Connected"})]}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full",children:"Connect"})]}),r.jsxs("div",{className:`p-4 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:`text-sm ${a}`,children:"Twitter Ads"}),r.jsx(De,{variant:"secondary",className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Not Connected"})]}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full",children:"Connect"})]}),r.jsxs("div",{className:`p-4 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:`text-sm ${a}`,children:"Snapchat Ads"}),r.jsx(De,{variant:"secondary",className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Not Connected"})]}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full",children:"Connect"})]})]})})]})]}),r.jsx(Bt,{value:"analytics",className:"space-y-6",children:r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(Pu,{className:`w-5 h-5 ${e?"text-orange-400":"text-orange-600"}`})}),r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Google Analytics 4"}),r.jsx("p",{className:`text-sm ${i}`,children:"Track website traffic and user behavior"})]})]}),r.jsxs(De,{variant:"secondary",className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Connected"]})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"gaPropertyId",className:i,children:"GA4 Measurement ID"}),r.jsx(de,{id:"gaPropertyId",placeholder:"G-XXXXXXXXXX",defaultValue:"G-ABC123XYZ"}),r.jsx("p",{className:`text-xs ${e?"text-[#737373]":"text-gray-600"}`,children:"Found in Admin  Data Streams"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"gaStreamId",className:i,children:"Data Stream ID"}),r.jsx(de,{id:"gaStreamId",placeholder:"1234567890",defaultValue:"1234567890"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",children:"Test Connection"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:x,children:"Save Changes"})]})]})]})})]})]})}var x3="Switch",[jWe]=fl(x3),[NWe,SWe]=jWe(x3),Uae=j.forwardRef((t,e)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=t,[m,f]=j.useState(null),v=bs(e,N=>f(N)),x=j.useRef(!1),g=m?u||!!m.closest("form"):!0,[b,w]=qc({prop:a,defaultProp:i??!1,onChange:d,caller:x3});return r.jsxs(NWe,{scope:s,checked:b,disabled:l,children:[r.jsx(Jr.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":qae(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ur(t.onClick,N=>{w(C=>!C),g&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),g&&r.jsx(Wae,{control:m,bubbles:!x.current,name:n,value:c,checked:b,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});Uae.displayName=x3;var zae="SwitchThumb",Vae=j.forwardRef((t,e)=>{const{__scopeSwitch:s,...n}=t,a=SWe(zae,s);return r.jsx(Jr.span,{"data-state":qae(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:e})});Vae.displayName=zae;var CWe="SwitchBubbleInput",Wae=j.forwardRef(({__scopeSwitch:t,control:e,checked:s,bubbles:n=!0,...a},i)=>{const o=j.useRef(null),l=bs(o,i),c=a3(s),d=a5(e);return j.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==s&&f){const v=new Event("click",{bubbles:n});f.call(u,s),u.dispatchEvent(v)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wae.displayName=CWe;function qae(t){return t?"checked":"unchecked"}var kWe=Uae,_We=Vae;function Rt({className:t,...e}){return r.jsx(kWe,{"data-slot":"switch",className:Ar("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:r.jsx(_We,{"data-slot":"switch-thumb",className:Ar("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function AWe({template:t,onSave:e,onCancel:s}){const{theme:n}=Nr(),a=n==="dark",i=a?"text-white":"text-gray-900",o=a?"text-[#a3a3a3]":"text-gray-600",l=a?"border-[#2a2a2a]":"border-gray-200",c=a?"bg-[#161616]":"bg-white",[d,u]=j.useState(t),[h,m]=j.useState(!1),[f,v]=j.useState(null),[x,g]=j.useState("edit");j.useEffect(()=>{const S=JSON.stringify(d)!==JSON.stringify(t);m(S)},[d,t]);const b=()=>{e(d)},w=()=>{u(t),re.info("Changes reverted")},N=S=>{navigator.clipboard.writeText(`{{${S}}}`),v(S),re.success("Variable copied to clipboard"),setTimeout(()=>v(null),2e3)},C=()=>{let S=d.body;const A={customerName:"John Doe",escaperoomName:"The Mystery Chamber",bookingDate:"Saturday, November 9, 2025",bookingTime:"3:00 PM",duration:"60",playerCount:"6",bookingId:"BK-2025-1234",businessName:"Escape Masters",businessAddress:"123 Main Street, San Francisco, CA 94105",totalAmount:"180.00",paymentMethod:"Credit Card",supportEmail:"support@escapemasters.com",supportPhone:"+1 (555) 123-4567",ageRequirement:"12+",directionsLink:"https://maps.google.com",referralCode:"JOHN20",referralLink:"https://escapemasters.com/ref/john20",referralCount:"3",creditsEarned:"60",availableBalance:"60",roomCount:"12",maxPlayers:"8",popularRoom1:"The Heist",difficulty1:"Hard",popularRoom2:"Lost Temple",difficulty2:"Medium",popularRoom3:"Space Station",difficulty3:"Easy",businessHours:"Mon-Thu: 10am-10pm, Fri-Sun: 10am-12am",socialLinks:"@escapemasters",surveyLink:"https://escapemasters.com/survey/1234",escapeStatus:"Yes! You escaped with 3:47 remaining",completionTime:"56:13",teamName:"The Code Breakers",googleReviewLink:"https://google.com/review",facebookReviewLink:"https://facebook.com/review",tripadvisorReviewLink:"https://tripadvisor.com/review",cancellationDate:"November 6, 2025",refundAmount:"180.00",refundProcessingTime:"3-5 business days",refundMethod:"Original payment method",expectedRefundDate:"November 14, 2025",cancellationPolicy:"Full refund for cancellations 48+ hours in advance.",newRoomsLink:"https://escapemasters.com/new-rooms",daysSinceLastVisit:"90",offerValidDays:"14",newFeature1:" New VR integration in select rooms",newFeature2:" Mobile app for easier booking",newFeature3:" Leaderboard system launched",newRoom1:"Cyber Heist 2099",newRoom1Description:"Futuristic sci-fi adventure",newRoom2:"Haunted Mansion",newRoom2Description:"Spooky Victorian mystery",newRoom3:"Pirate's Curse",newRoom3Description:"Nautical treasure hunt",totalRoomsCompleted:"4",escapeRate:"75",fastestEscape:"47",roomsNotTried:"8"};return Object.keys(A).forEach(k=>{const E=new RegExp(`{{${k}}}`,"g");S=S.replace(E,A[k])}),S};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(he,{className:`${c} border ${l}`,children:r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs(Xe,{className:`text-xl ${i} mb-1`,children:["Edit Template: ",t.name]}),r.jsx("p",{className:`text-sm ${o}`,children:t.description})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(W,{variant:"outline",onClick:s,className:a?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:"Cancel"}),r.jsxs(W,{variant:"outline",onClick:w,disabled:!h,className:a?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:[r.jsx(N0,{className:"w-4 h-4 mr-2"}),"Reset"]}),r.jsxs(W,{onClick:b,disabled:!h,className:a?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})})}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsxs(wn,{value:x,onValueChange:S=>g(S),children:[r.jsxs(kn,{className:`w-full ${a?"bg-[#1e1e1e] border border-[#2a2a2a]":"bg-gray-100"}`,children:[r.jsxs(Tt,{value:"edit",className:"flex-1",children:[r.jsx(ic,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Tt,{value:"preview",className:"flex-1",children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"Preview"]})]}),r.jsx(Bt,{value:"edit",className:"space-y-6 mt-6",children:r.jsx(he,{className:`${c} border ${l}`,children:r.jsxs(_e,{className:"p-4 sm:p-6 space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a?"text-white":"text-gray-700",children:"Template Name"}),r.jsx(de,{value:d.name,onChange:S=>u({...d,name:S.target.value}),className:`h-11 ${a?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a?"text-white":"text-gray-700",children:"Description"}),r.jsx(de,{value:d.description,onChange:S=>u({...d,description:S.target.value}),className:`h-11 ${a?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a?"text-white":"text-gray-700",children:"Subject Line"}),r.jsx(de,{value:d.subject,onChange:S=>u({...d,subject:S.target.value}),placeholder:"Use {{variables}} for dynamic content",className:`h-11 ${a?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:a?"text-white":"text-gray-700",children:["Preheader Text",r.jsx("span",{className:`text-xs ${o} ml-2`,children:"(Shown in email preview)"})]}),r.jsx(de,{value:d.preheader,onChange:S=>u({...d,preheader:S.target.value}),placeholder:"Brief preview text",className:`h-11 ${a?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a?"text-white":"text-gray-700",children:"Email Body"}),r.jsx(Ps,{value:d.body,onChange:S=>u({...d,body:S.target.value}),placeholder:"Write your email content here. Use {{variables}} for dynamic content.",rows:20,className:`resize-none font-mono text-sm ${a?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`}),r.jsx("p",{className:`text-xs ${o}`,children:"Tip: Use emojis and formatting to make your emails more engaging!"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200 dark:border-[#2a2a2a]",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${d.isActive?"bg-green-500":"bg-gray-400"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${i}`,children:"Template Status"}),r.jsx("p",{className:`text-xs ${o}`,children:d.isActive?"Active - Will be sent to customers":"Inactive - Will not be sent"})]})]}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>u({...d,isActive:!d.isActive}),children:d.isActive?"Deactivate":"Activate"})]})]})})}),r.jsx(Bt,{value:"preview",className:"mt-6",children:r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(De,{className:"bg-blue-100 dark:bg-blue-950/50 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-900",children:"Preview Mode"}),r.jsx(De,{variant:"outline",className:a?"border-[#2a2a2a] text-gray-400":"border-gray-200 text-gray-600",children:"Sample Data"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o} mb-1`,children:"Subject"}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:d.subject.replace(/{{(\w+)}}/g,(S,A)=>({escaperoomName:"The Mystery Chamber",bookingDate:"Saturday, November 9, 2025",bookingTime:"3:00 PM"})[A]||S)})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o} mb-1`,children:"Preheader"}),r.jsx("p",{className:`text-sm ${i}`,children:d.preheader})]})]})}),r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsx("div",{className:`p-6 rounded-lg ${a?"bg-[#1e1e1e]":"bg-gray-50"} whitespace-pre-wrap text-sm ${i}`,children:C()})})]})})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{className:"p-4",children:r.jsxs(Xe,{className:`text-sm ${i} flex items-center gap-2`,children:[r.jsx(_a,{className:"w-4 h-4"}),"Available Variables"]})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:d.variables.map((S,A)=>r.jsxs("div",{className:`flex items-center justify-between gap-2 p-2 rounded ${a?"hover:bg-[#1e1e1e]":"hover:bg-gray-100"} group transition-colors`,children:[r.jsx("code",{className:`text-xs ${a?"text-indigo-400":"text-indigo-600"} flex-1 truncate`,children:`{{${S}}}`}),r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>N(S),className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 px-2",children:f===S?r.jsx(Sr,{className:"w-3 h-3 text-green-500"}):r.jsx(on,{className:"w-3 h-3"})})]},A))})})]}),r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{className:"p-4",children:r.jsxs(Xe,{className:`text-sm ${i} flex items-center gap-2`,children:[r.jsx(hs,{className:"w-4 h-4"}),"Email Best Practices"]})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsxs("ul",{className:`space-y-3 text-xs ${o}`,children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Keep subject lines under 50 characters"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsxs("span",{children:["Use personalization variables like ","{{customerName}}"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Include clear call-to-action buttons"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Test with sample data before activating"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Use emojis sparingly for visual appeal"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Keep most important info above the fold"})]})]})})]}),r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:`text-sm ${i}`,children:"Template Stats"})}),r.jsxs(_e,{className:"p-4 pt-0 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:o,children:"Subject Length"}),r.jsxs("span",{className:i,children:[d.subject.length," chars"]})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:o,children:"Body Length"}),r.jsxs("span",{className:i,children:[d.body.length," chars"]})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:o,children:"Variables Used"}),r.jsx("span",{className:i,children:d.variables.length})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:o,children:"Category"}),r.jsx(De,{className:`text-xs ${d.category==="transactional"?"bg-blue-100 dark:bg-blue-950/50 text-blue-700 dark:text-blue-300":d.category==="marketing"?"bg-purple-100 dark:bg-purple-950/50 text-purple-700 dark:text-purple-300":"bg-green-100 dark:bg-green-950/50 text-green-700 dark:text-green-300"}`,children:d.category})]})]})]})]})]})]})}const vH=()=>[{id:"booking-confirmation",name:"Booking Confirmation",category:"transactional",subject:" Confirmed! Your {{escaperoomName}} Adventure",preheader:"Your adventure is confirmed!",body:`Hi {{customerName}},

 Your booking is CONFIRMED!

 DETAILS
 Room: {{escaperoomName}}
 Date: {{bookingDate}}
 Time: {{bookingTime}}
 Players: {{playerCount}}
 ID: #{{bookingId}}`,variables:["customerName","escaperoomName","bookingDate","bookingTime","playerCount","bookingId"],icon:en,description:"Sent after successful booking",isActive:!0,lastModified:new Date().toISOString()},{id:"booking-reminder",name:"Booking Reminder (24hr)",category:"transactional",subject:" Tomorrow! Your {{escaperoomName}} Adventure",preheader:"Your adventure is tomorrow!",body:`Hi {{customerName}},

 REMINDER: Your adventure is TOMORROW!

 Date: {{bookingDate}}
 Time: {{bookingTime}}
 Location: {{businessAddress}}`,variables:["customerName","escaperoomName","bookingDate","bookingTime","businessAddress"],icon:jr,description:"24-hour booking reminder",isActive:!0,lastModified:new Date().toISOString()},{id:"digital-waiver",name:"Digital Waiver Request",category:"transactional",subject:" Complete Your Waiver - {{escaperoomName}}",preheader:"Quick waiver before your visit",body:`Hi {{customerName}},

 Please complete your digital waiver:
{{waiverLink}}

 Takes 2 minutes
 Required before arrival`,variables:["customerName","escaperoomName","waiverLink"],icon:ni,description:"Waiver completion request",isActive:!0,lastModified:new Date().toISOString()},{id:"referral-program",name:"Referral Rewards Program",category:"engagement",subject:" Give $20, Get $20 - Share the Fun!",preheader:"Earn rewards by sharing",body:`Hi {{customerName}},

 Share your referral code: {{referralCode}}

 They get $20 off
 You earn $20 credit

Share now: {{referralLink}}`,variables:["customerName","referralCode","referralLink"],icon:Ni,description:"Referral program invitation",isActive:!0,lastModified:new Date().toISOString()},{id:"welcome-email",name:"Welcome Email",category:"engagement",subject:" Welcome to {{businessName}}!",preheader:"Start your adventure today",body:`Hi {{customerName}},

 Welcome to {{businessName}}!

 Explore our rooms
 Get 10% off first booking
Code: WELCOME10`,variables:["customerName","businessName"],icon:Nd,description:"New customer welcome",isActive:!0,lastModified:new Date().toISOString()},{id:"review-request",name:"Review Request",category:"engagement",subject:" How Was Your {{escaperoomName}} Experience?",preheader:"Share your feedback",body:`Hi {{customerName}},

 Please review your experience:

 Google: {{googleReviewLink}}
 Facebook: {{facebookReviewLink}}

 Get 20% off next booking (code: REVIEW20)`,variables:["customerName","escaperoomName","googleReviewLink","facebookReviewLink"],icon:Es,description:"Post-visit review request",isActive:!0,lastModified:new Date().toISOString()},{id:"post-visit-survey",name:"Post-Visit Survey",category:"engagement",subject:" Quick Survey + 15% OFF Your Next Visit",preheader:"2 minutes = 15% discount",body:`Hi {{customerName}},

 Take our 2-minute survey:
{{surveyLink}}

 Get 15% OFF (code: SURVEY15)
 Enter prize draw`,variables:["customerName","surveyLink"],icon:ni,description:"Feedback survey with incentive",isActive:!0,lastModified:new Date().toISOString()},{id:"cancellation-confirmation",name:"Cancellation Confirmation",category:"transactional",subject:"Booking Cancelled - We Hope to See You Soon",preheader:"Your cancellation has been processed",body:`Hi {{customerName}},

 CANCELLED
Booking ID: #{{bookingId}}

 Refund: \${{refundAmount}}
Expected: {{expectedRefundDate}}

 Rebook with COMEBACK10 for 10% off`,variables:["customerName","bookingId","refundAmount","expectedRefundDate"],icon:ln,description:"Cancellation confirmation",isActive:!0,lastModified:new Date().toISOString()},{id:"win-back-campaign",name:"Win-Back Campaign",category:"marketing",subject:"We Miss You! Come Back for 25% Off ",preheader:"Special offer just for you",body:`Hi {{customerName}},

 We miss you! It's been {{daysSinceLastVisit}} days.

 Come back for 25% OFF
Code: WELCOME25
Valid: {{offerValidDays}} days

Book now: {{bookingLink}}`,variables:["customerName","daysSinceLastVisit","offerValidDays","bookingLink"],icon:Wn,description:"Re-engage inactive customers",isActive:!0,lastModified:new Date().toISOString()}];function EWe(){const{theme:t}=Nr(),e=t==="dark",s=e?"bg-[#161616]":"bg-white",n=e?"border-[#2a2a2a]":"border-gray-200",a=e?"text-white":"text-gray-900",i=e?"text-[#a3a3a3]":"text-gray-600",o=e?"bg-[#1e1e1e]":"bg-gray-50",l=e?"bg-[#2a2a2a]":"bg-gray-100",[c,d]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState(!1),[g,b]=j.useState(!1),[w,N]=j.useState([]),[C,S]=j.useState(null),[A,k]=j.useState(!1),[E,O]=j.useState({}),[$,T]=j.useState(!1),[I,L]=j.useState(null),[z,M]=j.useState("promotions");j.useEffect(()=>{const ue=localStorage.getItem("emailTemplates");if(ue)try{N(JSON.parse(ue))}catch(pe){console.error("Error loading templates:",pe),N(vH())}else N(vH());const oe=localStorage.getItem("workflowStates");if(oe)try{O(JSON.parse(oe))}catch(pe){console.error("Error loading workflows:",pe)}},[]);const V=ue=>{navigator.clipboard.writeText(ue),re.success("Code copied to clipboard!")},B=()=>{re.success("Settings saved successfully!")},F=ue=>{const oe=w.map(pe=>pe.id===ue.id?{...pe,isActive:!0}:pe);localStorage.setItem("emailTemplates",JSON.stringify(oe)),N(oe),re.success(`"${ue.name}" is now active and ready to use!`)},J=ue=>{S(ue),k(!0)},ee=ue=>{L(ue),T(!0)},q=ue=>{const oe=w.map(pe=>pe.id===ue.id?{...ue,lastModified:new Date().toISOString()}:pe);localStorage.setItem("emailTemplates",JSON.stringify(oe)),N(oe),T(!1),L(null),re.success(`"${ue.name}" has been updated successfully!`)},U=()=>{T(!1),L(null)},Z=(ue,oe)=>{const pe={...E,[ue]:oe};O(pe),localStorage.setItem("workflowStates",JSON.stringify(pe));const ye=w.find($e=>$e.id===ue);ye&&re.success(oe?`"${ye.name}" workflow activated!`:`"${ye.name}" workflow deactivated`)},K=()=>{window.location.href="/email-templates",re.info("Opening Email Templates page to create new template...")},se=()=>{b(!0)},ie=(()=>{switch(z){case"promotions":return{icon:mu,title:"Promotions",description:"Manage discount codes and special offers",color:"blue"};case"gift-cards":return{icon:Ni,title:"Gift Cards",description:"Create and track gift card sales",color:"pink"};case"reviews":return{icon:Es,title:"Review Management",description:"Monitor and respond to customer feedback",color:"yellow"};case"email":return{icon:Ds,title:"Email Campaigns",description:"Send targeted marketing emails",color:"purple"};case"affiliate":return{icon:Nd,title:"Affiliate Program",description:"Manage affiliate partners and commissions",color:"green"};default:return{icon:mu,title:"Promotions",description:"Manage discount codes and special offers",color:"blue"}}})(),be=ie.icon;return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:`mb-2 ${a}`,children:"Marketing"}),r.jsx("p",{className:i,children:"Manage promotions, gift cards, reviews, emails, and affiliates"})]}),r.jsxs(wn,{value:z,onValueChange:M,className:"space-y-4 sm:space-y-6",children:[r.jsx("div",{className:"sm:hidden",children:r.jsxs(sr,{value:z,onValueChange:M,children:[r.jsx(ar,{className:`w-full h-12 font-medium ${e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:r.jsx(nr,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[z==="promotions"&&r.jsxs(r.Fragment,{children:[r.jsx(mu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsx("span",{children:"Promotions"})]}),z==="gift-cards"&&r.jsxs(r.Fragment,{children:[r.jsx(Ni,{className:"w-4 h-4 text-pink-600 dark:text-pink-400"}),r.jsx("span",{children:"Gift Cards"})]}),z==="reviews"&&r.jsxs(r.Fragment,{children:[r.jsx(Es,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),r.jsx("span",{children:"Review Management"})]}),z==="email"&&r.jsxs(r.Fragment,{children:[r.jsx(Ds,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),r.jsx("span",{children:"Email Campaigns"})]}),z==="affiliate"&&r.jsxs(r.Fragment,{children:[r.jsx(Nd,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{children:"Affiliate Program"})]})]})})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"promotions",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mu,{className:"w-4 h-4"}),r.jsx("span",{children:"Promotions"})]})}),r.jsx(Ae,{value:"gift-cards",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-4 h-4"}),r.jsx("span",{children:"Gift Cards"})]})}),r.jsx(Ae,{value:"reviews",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Es,{className:"w-4 h-4"}),r.jsx("span",{children:"Review Management"})]})}),r.jsx(Ae,{value:"email",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsx("span",{children:"Email Campaigns"})]})}),r.jsx(Ae,{value:"affiliate",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nd,{className:"w-4 h-4"}),r.jsx("span",{children:"Affiliate Program"})]})})]})]})}),r.jsxs(kn,{className:`hidden sm:flex w-full justify-start overflow-x-auto h-auto ${e?"bg-[#161616] border border-[#2a2a2a]":""}`,children:[r.jsxs(Tt,{value:"promotions",className:"gap-2",children:[r.jsx(mu,{className:"w-4 h-4"}),"Promotions"]}),r.jsxs(Tt,{value:"gift-cards",className:"gap-2",children:[r.jsx(Ni,{className:"w-4 h-4"}),"Gift Cards"]}),r.jsxs(Tt,{value:"reviews",className:"gap-2",children:[r.jsx(Es,{className:"w-4 h-4"}),"Review Management"]}),r.jsxs(Tt,{value:"email",className:"gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Campaigns"]}),r.jsxs(Tt,{value:"affiliate",className:"gap-2",children:[r.jsx(Nd,{className:"w-4 h-4"}),"Affiliate Program"]})]}),r.jsx("div",{className:`sm:hidden ${s} border ${n} rounded-lg p-4 shadow-sm`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${ie.color==="blue"?"bg-blue-100 dark:bg-blue-500/20":ie.color==="pink"?"bg-pink-100 dark:bg-pink-500/20":ie.color==="yellow"?"bg-yellow-100 dark:bg-yellow-500/20":ie.color==="purple"?"bg-purple-100 dark:bg-purple-500/20":"bg-green-100 dark:bg-green-500/20"}`,children:r.jsx(be,{className:`w-5 h-5 ${ie.color==="blue"?"text-blue-600 dark:text-blue-400":ie.color==="pink"?"text-pink-600 dark:text-pink-400":ie.color==="yellow"?"text-yellow-600 dark:text-yellow-400":ie.color==="purple"?"text-purple-600 dark:text-purple-400":"text-green-600 dark:text-green-400"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:`text-base font-semibold ${a}`,children:ie.title}),r.jsx("p",{className:`text-xs ${i}`,children:ie.description})]})]})}),r.jsxs(Bt,{value:"promotions",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Active Promos"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"12"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+3 this month"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(mu,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Total Redemptions"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"1,234"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+18%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(mu,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Revenue Impact"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$8,450"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+25%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(In,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Avg Discount"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"15%"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"Across all promos"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(Pu,{className:`w-6 h-6 ${e?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Coupon Codes & Promotions"}),r.jsx("p",{className:`text-sm mt-1 ${i}`,children:"Create and manage discount codes"})]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:()=>d(!0),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Promotion"]})]})}),r.jsx(_e,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search promotions...",className:"pl-10"})]}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),r.jsx("div",{className:`border rounded-lg overflow-x-auto ${n}`,children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{children:[r.jsx(fs,{children:"Code"}),r.jsx(fs,{children:"Type"}),r.jsx(fs,{children:"Discount"}),r.jsx(fs,{children:"Usage"}),r.jsx(fs,{children:"Valid Until"}),r.jsx(fs,{children:"Status"}),r.jsx(fs,{className:"w-[50px]"})]})}),r.jsxs(Ux,{children:[r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"SUMMER25"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("SUMMER25"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{children:r.jsx(De,{variant:"secondary",className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-700",children:"Percentage"})}),r.jsx(Jt,{className:a,children:"25% off"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:a,children:"45"}),r.jsx("span",{className:i,children:" / 100"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Dec 31, 2025"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{children:[r.jsx(uM,{className:"w-4 h-4 mr-2"}),"Pause"]}),r.jsxs(Dt,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"FIRSTTIME10"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("FIRSTTIME10"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{children:r.jsx(De,{variant:"secondary",className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Fixed Amount"})}),r.jsx(Jt,{className:a,children:"$10 off"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:a,children:"12"}),r.jsx("span",{className:i,children:" / 50"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Jan 15, 2026"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{children:[r.jsx(uM,{className:"w-4 h-4 mr-2"}),"Pause"]}),r.jsxs(Dt,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"BLACKFRIDAY"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("BLACKFRIDAY"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{children:r.jsx(De,{variant:"secondary",className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-700",children:"Percentage"})}),r.jsx(Jt,{className:a,children:"50% off"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:a,children:"200"}),r.jsx("span",{className:i,children:" / 200"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Nov 30, 2025"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Paused"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),"Activate"]}),r.jsxs(Dt,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]})]})]})})]})})]})]}),r.jsxs(Bt,{value:"gift-cards",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Total Sold"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"487"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+12%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-pink-500/20":"bg-pink-100"}`,children:r.jsx(Ni,{className:`w-6 h-6 ${e?"text-pink-400":"text-pink-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Active Balance"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$12,340"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"Outstanding"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(In,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Redeemed"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$8,920"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"This month"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Lt,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Redemption Rate"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"68%"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+5%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(Pu,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Gift Cards"}),r.jsx("p",{className:`text-sm mt-1 ${i}`,children:"Create and manage gift cards"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>re.success("Bulk import dialog would open here"),children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Bulk Generate"]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"} w-full sm:w-auto`,onClick:()=>h(!0),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Gift Card"]})]})]})}),r.jsx(_e,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search gift cards...",className:"pl-10"})]}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),r.jsx("div",{className:`border rounded-lg overflow-x-auto ${n}`,children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{children:[r.jsx(fs,{children:"Code"}),r.jsx(fs,{children:"Amount"}),r.jsx(fs,{children:"Balance"}),r.jsx(fs,{children:"Recipient"}),r.jsx(fs,{children:"Status"}),r.jsx(fs,{children:"Expiry"}),r.jsx(fs,{className:"w-[50px]"})]})}),r.jsxs(Ux,{children:[r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"GC-ABC123XYZ"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("GC-ABC123XYZ"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{className:a,children:"$100.00"}),r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:a,children:"$75.00"}),r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-orange-500/20 text-orange-400":"bg-orange-100 text-orange-700"}`,children:"75%"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"john.doe@example.com"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Dec 31, 2025"}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Resend Email"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"GC-DEF456UVW"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("GC-DEF456UVW"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{className:a,children:"$50.00"}),r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:a,children:"$50.00"}),r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700"}`,children:"100%"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"sarah.smith@example.com"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Mar 15, 2026"}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Resend Email"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:`text-sm px-2 py-1 rounded ${l} ${a}`,children:"GC-GHI789RST"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>V("GC-GHI789RST"),className:"h-6 w-6 p-0",children:r.jsx(on,{className:"w-3 h-3"})})]})}),r.jsx(Jt,{className:a,children:"$25.00"}),r.jsx(Jt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`line-through ${e?"text-[#737373]":"text-gray-400"}`,children:"$25.00"}),r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700"}`,children:"0%"})]})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"mike.jones@example.com"}),r.jsx(Jt,{children:r.jsx(De,{className:e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:"Redeemed"})}),r.jsx(Jt,{className:`text-sm ${i}`,children:"Jun 30, 2025"}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Resend Email"]})]})]})})]})]})]})})]})})]})]}),r.jsxs(Bt,{value:"reviews",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Average Rating"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:`text-2xl ${a}`,children:"4.8"}),r.jsx("div",{className:"flex",children:[1,2,3,4,5].map(ue=>r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},ue))})]}),r.jsx("p",{className:`text-sm mt-2 ${i}`,children:"1,234 reviews"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:r.jsx(Es,{className:`w-6 h-6 ${e?"text-yellow-400":"text-yellow-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"New Reviews"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"47"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+22% this month"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ni,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Response Rate"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"92%"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"Within 24 hours"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(en,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Positive Reviews"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"89%"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(LS,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"4-5 stars"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(LS,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Customer Reviews"}),r.jsx("p",{className:`text-sm mt-1 ${i}`,children:"Monitor and respond to customer feedback"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"} w-full sm:w-auto`,onClick:()=>re.success("Review request sent!"),children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Request Reviews"]})]})]})}),r.jsx(_e,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`flex flex-wrap gap-2 border-b pb-3 ${n}`,children:[r.jsx(W,{variant:"ghost",size:"sm",className:`rounded-none border-b-2 ${e?"text-[#6366f1] border-[#4f46e5]":"text-blue-600 border-blue-600"}`,children:"All (1,234)"}),r.jsx(W,{variant:"ghost",size:"sm",children:"Pending Response (12)"}),r.jsx(W,{variant:"ghost",size:"sm",children:"5 Stars (876)"}),r.jsx(W,{variant:"ghost",size:"sm",children:"1-3 Stars (45)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 border rounded-lg hover:shadow-md transition-shadow ${n}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx("span",{className:`text-sm ${e?"text-[#6366f1]":"text-blue-600"}`,children:"JD"})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"John Doe"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("div",{className:"flex",children:[1,2,3,4,5].map(ue=>r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},ue))}),r.jsx("span",{className:`text-xs ${i}`,children:"2 days ago"})]})]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-700"}`,children:"Google"}),r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700"}`,children:"Verified"})]})]}),r.jsx("p",{className:`text-sm mb-3 ${e?"text-[#d4d4d4]":"text-gray-700"}`,children:"Amazing experience! The Mystery Manor room was so immersive and challenging. Our game master was fantastic and very helpful. Highly recommend!"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs(W,{size:"sm",variant:"outline",children:[r.jsx(ni,{className:"w-3 h-3 mr-2"}),"Reply"]}),r.jsxs(W,{size:"sm",variant:"ghost",children:[r.jsx(LS,{className:"w-3 h-3 mr-2"}),"Mark Helpful"]}),r.jsxs(W,{size:"sm",variant:"ghost",children:[r.jsx(tn,{className:"w-3 h-3 mr-2"}),"View on Google"]})]})]}),r.jsxs("div",{className:`p-4 border rounded-lg hover:shadow-md transition-shadow ${n}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx("span",{className:`text-sm ${e?"text-purple-400":"text-purple-600"}`,children:"SS"})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Sarah Smith"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("div",{className:"flex",children:[[1,2,3,4].map(ue=>r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},ue)),r.jsx(Es,{className:`w-3 h-3 ${e?"text-[#525252]":"text-gray-300"}`})]}),r.jsx("span",{className:`text-xs ${i}`,children:"1 week ago"})]})]})]}),r.jsx("div",{className:"flex gap-1",children:r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-purple-500/20 text-purple-400":"bg-purple-100 text-purple-700"}`,children:"Facebook"})})]}),r.jsx("p",{className:`text-sm mb-3 ${e?"text-[#d4d4d4]":"text-gray-700"}`,children:"Great escape room! Had a lot of fun with friends. The only downside was we had to wait 15 minutes past our booking time to start."}),r.jsx("div",{className:`p-3 mb-3 rounded border-l-4 ${e?"bg-[#4f46e5]/10 border-[#4f46e5]":"bg-blue-50 border-blue-600"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ni,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs mb-1 ${i}`,children:"Your Response:"}),r.jsx("p",{className:`text-sm ${a}`,children:"Thank you for the feedback, Sarah! We apologize for the delay. We've addressed this with our team to ensure better timing. Hope to see you again!"}),r.jsx("p",{className:`text-xs mt-1 ${e?"text-[#737373]":"text-gray-500"}`,children:"Responded 5 days ago"})]})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(W,{size:"sm",variant:"outline",disabled:!0,children:[r.jsx(en,{className:"w-3 h-3 mr-2"}),"Responded"]}),r.jsxs(W,{size:"sm",variant:"ghost",children:[r.jsx(tn,{className:"w-3 h-3 mr-2"}),"View on Facebook"]})]})]}),r.jsxs("div",{className:`p-4 border rounded-lg hover:shadow-md transition-shadow ${e?"border-red-500/30 bg-red-500/10":"border-red-200 bg-red-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-red-500/20":"bg-red-100"}`,children:r.jsx("span",{className:`text-sm ${e?"text-red-400":"text-red-600"}`,children:"MJ"})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Mike Johnson"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsxs("div",{className:"flex",children:[[1,2].map(ue=>r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"},ue)),[1,2,3].map(ue=>r.jsx(Es,{className:`w-3 h-3 ${e?"text-[#525252]":"text-gray-300"}`},ue))]}),r.jsx("span",{className:`text-xs ${i}`,children:"3 days ago"})]})]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-700"}`,children:"Yelp"}),r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-red-500/20 text-red-400":"bg-red-100 text-red-700"}`,children:"Needs Response"})]})]}),r.jsx("p",{className:`text-sm mb-3 ${e?"text-[#d4d4d4]":"text-gray-700"}`,children:"Disappointed with our experience. Some of the puzzles were broken and the room wasn't very clean. Expected better for the price."}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsxs(W,{size:"sm",style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ni,{className:"w-3 h-3 mr-2"}),"Respond Now"]}),r.jsxs(W,{size:"sm",variant:"ghost",children:[r.jsx(tn,{className:"w-3 h-3 mr-2"}),"View on Yelp"]})]})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:a,children:"Connected Review Platforms"})}),r.jsxs(_e,{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Es,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Google Reviews"}),r.jsx("p",{className:`text-xs ${i}`,children:"876 reviews"})]})]}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Connected"})]}),r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ib,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Facebook Reviews"}),r.jsx("p",{className:`text-xs ${i}`,children:"234 reviews"})]})]}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Connected"})]}),r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-red-500/20":"bg-red-100"}`,children:r.jsx(Es,{className:`w-5 h-5 ${e?"text-red-400":"text-red-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Yelp"}),r.jsx("p",{className:`text-xs ${i}`,children:"124 reviews"})]})]}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Connected"})]}),r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Es,{className:`w-5 h-5 ${e?"text-emerald-400":"text-green-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"TripAdvisor"}),r.jsx("p",{className:`text-xs ${i}`,children:"Not connected"})]})]}),r.jsx(W,{size:"sm",variant:"outline",children:"Connect"})]})]})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:a,children:"Rating Distribution"})}),r.jsx(_e,{className:"space-y-3",children:[5,4,3,2,1].map(ue=>{const oe=ue===5?72:ue===4?17:ue===3?8:ue===2?2:1;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1 w-16",children:[r.jsx("span",{className:`text-sm ${a}`,children:ue}),r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:`w-full rounded-full h-2 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${oe}%`}})})}),r.jsxs("span",{className:`text-sm w-12 text-right ${i}`,children:[oe,"%"]})]},ue)})})]})]})]}),r.jsxs(Bt,{value:"email",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Total Sent"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"45.2K"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"This month"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Ds,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Open Rate"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"34.5%"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+4.2%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(ys,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Click Rate"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"12.8%"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+2.1%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(WY,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Conversions"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"234"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+15%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx($f,{className:`w-6 h-6 ${e?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Email Campaigns"}),r.jsx("p",{className:`text-sm mt-1 ${i}`,children:"Create and send email marketing campaigns"})]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"} w-full sm:w-auto`,onClick:()=>f(!0),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Campaign"]})]})}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:`p-4 border rounded-lg hover:shadow-md transition-shadow ${n}`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h4",{className:`text-sm ${a}`,children:"Summer Special - 25% Off Weekend Bookings"}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Sent"})]}),r.jsx("p",{className:`text-xs mb-2 ${i}`,children:"Sent to 12,450 subscribers on Nov 15, 2025"}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Delivered"}),r.jsx("p",{className:`text-sm ${a}`,children:"12,234"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Opened"}),r.jsx("p",{className:`text-sm ${a}`,children:"4,123 (33.7%)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Clicked"}),r.jsx("p",{className:`text-sm ${a}`,children:"1,567 (12.8%)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Conversions"}),r.jsx("p",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"89 bookings"})]})]})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Report"]}),r.jsxs(Dt,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsxs(Dt,{children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})}),r.jsx("div",{className:`p-4 border rounded-lg ${e?"border-[#4f46e5]/30 bg-[#4f46e5]/10":"border-blue-200 bg-blue-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h4",{className:`text-sm ${a}`,children:"Black Friday Mega Sale - 50% Off All Rooms"}),r.jsx(De,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-700",children:"Scheduled"})]}),r.jsx("p",{className:`text-xs mb-2 ${i}`,children:"Scheduled for Nov 24, 2025 at 9:00 AM"}),r.jsx("p",{className:`text-xs ${i}`,children:"Target audience: 15,234 subscribers"})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Send Test"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]})}),r.jsx("div",{className:`p-4 border rounded-lg hover:shadow-md transition-shadow ${n}`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h4",{className:`text-sm ${a}`,children:"Weekly Newsletter - New Mystery Manor Update"}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Sent"})]}),r.jsx("p",{className:`text-xs mb-2 ${i}`,children:"Sent to 13,120 subscribers on Nov 8, 2025"}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Delivered"}),r.jsx("p",{className:`text-sm ${a}`,children:"12,987"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Opened"}),r.jsx("p",{className:`text-sm ${a}`,children:"4,567 (35.2%)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Clicked"}),r.jsx("p",{className:`text-sm ${a}`,children:"1,789 (13.8%)"})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${i}`,children:"Conversions"}),r.jsx("p",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"67 bookings"})]})]})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Report"]}),r.jsxs(Dt,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsxs(Dt,{children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:a,children:"Email Templates"}),r.jsxs("p",{className:`text-sm ${i}`,children:["Pre-built email templates (",w.length," available)"]})]}),r.jsx(_e,{className:"space-y-3 max-h-[600px] overflow-y-auto",children:w.map(ue=>{const oe=ue.icon;return r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${n} ${e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50"} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg ${e?"bg-indigo-900/30":"bg-indigo-100"} flex items-center justify-center flex-shrink-0`,children:r.jsx(oe,{className:`w-4 h-4 ${e?"text-indigo-400":"text-indigo-600"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`text-sm ${a} truncate`,children:ue.name}),ue.isActive&&r.jsx(De,{className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-300 dark:border-green-800",children:"Active"})]}),r.jsx("p",{className:`text-xs ${i} truncate`,children:ue.description})]})]}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>J(ue),className:"h-8 px-2",children:r.jsx(ys,{className:"w-4 h-4"})}),r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>ee(ue),className:"h-8 px-2",children:r.jsx(th,{className:"w-4 h-4"})}),r.jsx(W,{size:"sm",onClick:()=>F(ue),disabled:ue.isActive,className:`h-8 ${e?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-indigo-600 hover:bg-indigo-700 text-white"} ${ue.isActive?"opacity-50 cursor-not-allowed":""}`,children:ue.isActive?"In Use":"Use"})]})]},ue.id)})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Automated Workflows"}),r.jsxs("p",{className:`text-sm ${i} mt-1`,children:["Enable/disable email automation (",w.length," templates available)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{size:"sm",variant:"outline",onClick:K,className:e?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),"New Template"]}),r.jsxs(W,{size:"sm",onClick:se,className:e?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),"New Workflow"]})]})]})}),r.jsx(_e,{className:"space-y-3 max-h-[500px] overflow-y-auto",children:w.length===0?r.jsxs("div",{className:`text-center py-8 ${i}`,children:[r.jsx(Ds,{className:"w-12 h-12 mx-auto mb-3 opacity-40"}),r.jsx("p",{children:"No email templates available"}),r.jsx(W,{size:"sm",variant:"outline",onClick:K,className:"mt-3",children:"Create Your First Template"})]}):w.map(ue=>{const oe=ue.icon,pe=E[ue.id]??!1;return r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg transition-all ${n} ${e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50"} ${pe?e?"bg-emerald-900/10 border-emerald-800/40":"bg-green-50 border-green-200":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 ${pe?e?"bg-emerald-500/20":"bg-green-100":e?"bg-[#2a2a2a]":"bg-gray-100"}`,children:r.jsx(oe,{className:`w-4 h-4 ${pe?e?"text-emerald-400":"text-green-600":e?"text-[#a3a3a3]":"text-gray-600"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:`text-sm truncate ${a}`,children:ue.name}),pe&&r.jsx(De,{className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-300 dark:border-green-800",children:"Active"}),r.jsx(De,{variant:"outline",className:`text-xs ${ue.category==="transactional"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-300 dark:border-blue-800":ue.category==="marketing"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-300 dark:border-purple-800":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-300 dark:border-orange-800"}`,children:ue.category})]}),r.jsx("p",{className:`text-xs ${i} truncate mt-0.5`,children:ue.description})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-3",children:[r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>J(ue),className:`h-8 px-2 ${e?"hover:bg-[#1e1e1e] text-white":"hover:bg-gray-100"}`,title:"Preview template",children:r.jsx(ys,{className:"w-4 h-4"})}),r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>ee(ue),className:`h-8 px-2 ${e?"hover:bg-[#1e1e1e] text-white":"hover:bg-gray-100"}`,title:"Edit template",children:r.jsx(th,{className:"w-4 h-4"})}),r.jsx(Rt,{checked:pe,onCheckedChange:ye=>Z(ue.id,ye),className:pe?"data-[state=checked]:bg-green-600":""})]})]},ue.id)})})]})]})]}),r.jsxs(Bt,{value:"affiliate",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Active Affiliates"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"34"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+8 this month"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Nd,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Total Referrals"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"234"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+18%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Xr,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Revenue Generated"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$15,670"}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${e?"text-emerald-400":"text-green-600"}`,children:"+22%"})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(In,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${s} border ${n} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm mb-1 ${i}`,children:"Commissions Paid"}),r.jsx("h3",{className:`text-2xl ${a}`,children:"$2,350"}),r.jsx("div",{className:"flex items-center gap-1 mt-2",children:r.jsx("span",{className:`text-sm ${i}`,children:"15% avg commission"})})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${e?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(rn,{className:`w-6 h-6 ${e?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:a,children:"Affiliate Program Settings"}),r.jsx("p",{className:`text-sm ${i}`,children:"Configure your affiliate program"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"commission-rate",children:"Default Commission Rate"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{id:"commission-rate",type:"number",defaultValue:"15",className:"flex-1"}),r.jsx("span",{className:`flex items-center px-3 border rounded-md ${n} ${o} ${i}`,children:"%"})]}),r.jsx("p",{className:`text-xs ${i}`,children:"Percentage of booking value paid to affiliates"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"cookie-duration",children:"Cookie Duration"}),r.jsxs(sr,{defaultValue:"30",children:[r.jsx(ar,{id:"cookie-duration",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"7",children:"7 days"}),r.jsx(Ae,{value:"14",children:"14 days"}),r.jsx(Ae,{value:"30",children:"30 days"}),r.jsx(Ae,{value:"60",children:"60 days"}),r.jsx(Ae,{value:"90",children:"90 days"})]})]}),r.jsx("p",{className:`text-xs ${i}`,children:"How long to track referrals"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"min-payout",children:"Minimum Payout"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:`flex items-center px-3 border rounded-md ${n} ${o} ${i}`,children:"$"}),r.jsx(de,{id:"min-payout",type:"number",defaultValue:"50",className:"flex-1"})]}),r.jsx("p",{className:`text-xs ${i}`,children:"Minimum earnings before payout"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"payout-schedule",children:"Payout Schedule"}),r.jsxs(sr,{defaultValue:"monthly",children:[r.jsx(ar,{id:"payout-schedule",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"weekly",children:"Weekly"}),r.jsx(Ae,{value:"biweekly",children:"Bi-weekly"}),r.jsx(Ae,{value:"monthly",children:"Monthly"})]})]}),r.jsx("p",{className:`text-xs ${i}`,children:"How often to process payouts"})]})]}),r.jsx("div",{className:`flex items-center justify-between p-4 border rounded-lg ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{checked:!0}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Auto-approve Affiliates"}),r.jsx("p",{className:`text-xs ${i}`,children:"Automatically approve new affiliate applications"})]})]})}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"w-full sm:w-auto",children:"Reset to Defaults"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"} w-full sm:w-auto`,onClick:B,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})]}),r.jsxs(he,{className:`${s} border ${n} shadow-sm`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:a,children:"Affiliate Partners"}),r.jsx("p",{className:`text-sm mt-1 ${i}`,children:"Manage your affiliate relationships"})]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"} w-full sm:w-auto`,onClick:()=>x(!0),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Affiliate"]})]})}),r.jsx(_e,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search affiliates...",className:"pl-10"})]}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),"Filter"]})]}),r.jsx("div",{className:`border rounded-lg overflow-x-auto ${n}`,children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{children:[r.jsx(fs,{children:"Affiliate"}),r.jsx(fs,{children:"Referrals"}),r.jsx(fs,{children:"Revenue"}),r.jsx(fs,{children:"Commission"}),r.jsx(fs,{children:"Status"}),r.jsx(fs,{className:"w-[50px]"})]})}),r.jsxs(Ux,{children:[r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Sarah's Blog"}),r.jsx("p",{className:"text-xs text-gray-600",children:"sarah@escapeblog.com"})]})}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-900",children:"89"}),r.jsx("span",{className:"text-gray-600",children:" bookings"})]})}),r.jsx(Jt,{className:"text-sm text-gray-900",children:"$6,720"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-green-600",children:"$1,008"}),r.jsx("span",{className:"text-gray-600",children:" (15%)"})]})}),r.jsx(Jt,{children:r.jsx(De,{className:"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit Commission"]}),r.jsxs(Dt,{children:[r.jsx(In,{className:"w-4 h-4 mr-2"}),"Process Payout"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Adventure Seekers"}),r.jsx("p",{className:"text-xs text-gray-600",children:"team@adventureseekers.com"})]})}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-900",children:"67"}),r.jsx("span",{className:"text-gray-600",children:" bookings"})]})}),r.jsx(Jt,{className:"text-sm text-gray-900",children:"$5,140"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-green-600",children:"$771"}),r.jsx("span",{className:"text-gray-600",children:" (15%)"})]})}),r.jsx(Jt,{children:r.jsx(De,{className:"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit Commission"]}),r.jsxs(Dt,{children:[r.jsx(In,{className:"w-4 h-4 mr-2"}),"Process Payout"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]})]})]})})]}),r.jsxs(ui,{children:[r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Local Events Guide"}),r.jsx("p",{className:"text-xs text-gray-600",children:"info@localevents.com"})]})}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-gray-900",children:"45"}),r.jsx("span",{className:"text-gray-600",children:" bookings"})]})}),r.jsx(Jt,{className:"text-sm text-gray-900",children:"$3,450"}),r.jsx(Jt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-green-600",children:"$517"}),r.jsx("span",{className:"text-gray-600",children:" (15%)"})]})}),r.jsx(Jt,{children:r.jsx(De,{className:"bg-green-100 text-green-700",children:"Active"})}),r.jsx(Jt,{children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit Commission"]}),r.jsxs(Dt,{children:[r.jsx(In,{className:"w-4 h-4 mr-2"}),"Process Payout"]}),r.jsxs(Dt,{className:"text-red-600",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]})]})]})})]})]})]})})]})})]})]})]}),r.jsx(mr,{open:c,onOpenChange:d,children:r.jsxs(fr,{className:"max-w-2xl",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Create New Promotion"}),r.jsx(wr,{children:"Set up a new discount code or promotional campaign"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"promo-code",children:"Promotion Code"}),r.jsx(de,{id:"promo-code",placeholder:"e.g., SUMMER25"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"promo-type",children:"Discount Type"}),r.jsxs(sr,{defaultValue:"percentage",children:[r.jsx(ar,{id:"promo-type",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"percentage",children:"Percentage"}),r.jsx(Ae,{value:"fixed",children:"Fixed Amount"}),r.jsx(Ae,{value:"free-shipping",children:"Free Shipping"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"discount-value",children:"Discount Value"}),r.jsx(de,{id:"discount-value",type:"number",placeholder:"25"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"usage-limit",children:"Usage Limit"}),r.jsx(de,{id:"usage-limit",type:"number",placeholder:"100"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"valid-from",children:"Valid From"}),r.jsx(de,{id:"valid-from",type:"date"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"valid-until",children:"Valid Until"}),r.jsx(de,{id:"valid-until",type:"date"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"description",children:"Description (Optional)"}),r.jsx(Ps,{id:"description",placeholder:"Summer sale - 25% off all weekend bookings"})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),r.jsx(W,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{d(!1),re.success("Promotion created successfully!")},children:"Create Promotion"})]})]})}),r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:"max-w-2xl",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Create Gift Card"}),r.jsx(wr,{children:"Generate a new gift card for your customers"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"gc-amount",children:"Gift Card Amount"}),r.jsxs(sr,{defaultValue:"50",children:[r.jsx(ar,{id:"gc-amount",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"25",children:"$25"}),r.jsx(Ae,{value:"50",children:"$50"}),r.jsx(Ae,{value:"100",children:"$100"}),r.jsx(Ae,{value:"150",children:"$150"}),r.jsx(Ae,{value:"custom",children:"Custom Amount"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"gc-expiry",children:"Expiry Date"}),r.jsx(de,{id:"gc-expiry",type:"date"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"recipient-email",children:"Recipient Email"}),r.jsx(de,{id:"recipient-email",type:"email",placeholder:"customer@example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"recipient-name",children:"Recipient Name (Optional)"}),r.jsx(de,{id:"recipient-name",placeholder:"John Doe"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"gc-message",children:"Personal Message (Optional)"}),r.jsx(Ps,{id:"gc-message",placeholder:"Happy Birthday! Enjoy an escape room adventure on us!"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{id:"send-immediately"}),r.jsx(X,{htmlFor:"send-immediately",className:"cursor-pointer",children:"Send gift card email immediately"})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),r.jsx(W,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{h(!1),re.success("Gift card created successfully!")},children:"Create Gift Card"})]})]})}),r.jsx(mr,{open:m,onOpenChange:f,children:r.jsxs(fr,{className:"max-w-3xl",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Create Email Campaign"}),r.jsx(wr,{children:"Design and schedule a new email marketing campaign"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"campaign-name",children:"Campaign Name"}),r.jsx(de,{id:"campaign-name",placeholder:"e.g., Holiday Special 2025"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"subject-line",children:"Email Subject Line"}),r.jsx(de,{id:"subject-line",placeholder:"Don't miss out!  Special holiday offer inside"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"from-name",children:"From Name"}),r.jsx(de,{id:"from-name",defaultValue:"BookingTMS"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email-template",children:"Email Template"}),r.jsxs(sr,{defaultValue:"promotional",children:[r.jsx(ar,{id:"email-template",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"promotional",children:"Promotional"}),r.jsx(Ae,{value:"newsletter",children:"Newsletter"}),r.jsx(Ae,{value:"announcement",children:"Announcement"}),r.jsx(Ae,{value:"custom",children:"Custom Design"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"target-audience",children:"Target Audience"}),r.jsxs(sr,{defaultValue:"all",children:[r.jsx(ar,{id:"target-audience",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Subscribers"}),r.jsx(Ae,{value:"active",children:"Active Customers"}),r.jsx(Ae,{value:"inactive",children:"Inactive Customers"}),r.jsx(Ae,{value:"new",children:"New Subscribers"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"schedule-type",children:"Send Time"}),r.jsxs(sr,{defaultValue:"immediately",children:[r.jsx(ar,{id:"schedule-type",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"immediately",children:"Send Immediately"}),r.jsx(Ae,{value:"schedule",children:"Schedule for Later"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"schedule-date",children:"Schedule Date & Time"}),r.jsx(de,{id:"schedule-date",type:"datetime-local"})]})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>f(!1),children:"Save as Draft"}),r.jsx(W,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{f(!1),re.success("Email campaign created successfully!")},children:"Create Campaign"})]})]})}),r.jsx(mr,{open:v,onOpenChange:x,children:r.jsxs(fr,{className:"max-w-2xl",children:[r.jsxs(br,{children:[r.jsx(pr,{children:"Add New Affiliate"}),r.jsx(wr,{children:"Register a new affiliate partner"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"affiliate-name",children:"Affiliate Name"}),r.jsx(de,{id:"affiliate-name",placeholder:"Business or Person Name"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"affiliate-email",children:"Email Address"}),r.jsx(de,{id:"affiliate-email",type:"email",placeholder:"partner@example.com"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"commission-rate-custom",children:"Commission Rate (%)"}),r.jsx(de,{id:"commission-rate-custom",type:"number",defaultValue:"15"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"affiliate-code",children:"Custom Referral Code"}),r.jsx(de,{id:"affiliate-code",placeholder:"Auto-generated if empty"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"affiliate-website",children:"Website (Optional)"}),r.jsx(de,{id:"affiliate-website",type:"url",placeholder:"https://example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"affiliate-notes",children:"Notes (Optional)"}),r.jsx(Ps,{id:"affiliate-notes",placeholder:"Additional information about this affiliate..."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{id:"auto-approve-affiliate",defaultChecked:!0}),r.jsx(X,{htmlFor:"auto-approve-affiliate",className:"cursor-pointer",children:"Activate immediately"})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),r.jsx(W,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{x(!1),re.success("Affiliate added successfully!")},children:"Add Affiliate"})]})]})}),r.jsx(mr,{open:A,onOpenChange:k,children:r.jsxs(fr,{className:`max-w-3xl max-h-[90vh] ${s} border ${n}`,children:[r.jsx(br,{className:`border-b pb-4 ${n}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-3",children:C&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`w-10 h-10 rounded-lg ${e?"bg-indigo-900/30":"bg-indigo-100"} flex items-center justify-center`,children:(()=>{const ue=C.icon;return r.jsx(ue,{className:`w-5 h-5 ${e?"text-indigo-400":"text-indigo-600"}`})})()}),r.jsxs("div",{children:[r.jsx(pr,{className:a,children:C.name}),r.jsx(wr,{className:i,children:C.description})]})]})}),r.jsx(De,{className:`${C?.isActive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-300 dark:border-green-800":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:C?.isActive?"Active":"Inactive"})]})}),r.jsx(fa,{className:"max-h-[60vh]",children:r.jsxs("div",{className:"space-y-6 p-6",children:[r.jsxs("div",{children:[r.jsx(X,{className:`text-xs ${i} uppercase tracking-wide mb-2 block`,children:"Category"}),r.jsx(De,{className:`${C?.category==="transactional"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-300 dark:border-blue-800":C?.category==="marketing"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-300 dark:border-purple-800":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border-green-300 dark:border-green-800"}`,children:C?.category})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm ${i} mb-2 block`,children:"Subject Line"}),r.jsx("div",{className:`p-4 rounded-lg ${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${n}`,children:r.jsx("p",{className:`text-sm ${a}`,children:C?.subject})})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm ${i} mb-2 block`,children:"Preheader Text"}),r.jsx("div",{className:`p-4 rounded-lg ${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${n}`,children:r.jsx("p",{className:`text-sm ${a}`,children:C?.preheader})})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm ${i} mb-2 block`,children:"Email Body"}),r.jsx("div",{className:`p-4 rounded-lg ${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${n}`,children:r.jsx("pre",{className:`text-sm ${a} whitespace-pre-wrap font-sans`,children:C?.body})})]}),r.jsxs("div",{children:[r.jsxs(X,{className:`text-sm ${i} mb-2 block`,children:["Dynamic Variables (",C?.variables.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:C?.variables.map((ue,oe)=>r.jsx(De,{variant:"outline",className:`text-xs ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-gray-400":"bg-white border-gray-200 text-gray-600"}`,children:`{{${ue}}}`},oe))})]}),r.jsx("div",{children:r.jsxs(X,{className:`text-xs ${i} block`,children:["Last modified: ",C&&new Date(C.lastModified).toLocaleString()]})})]})}),r.jsxs(Us,{className:`border-t pt-4 ${n}`,children:[r.jsx(W,{variant:"outline",onClick:()=>k(!1),className:e?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:"Close"}),r.jsxs(W,{variant:"outline",onClick:()=>{C&&(ee(C),k(!1))},className:e?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:[r.jsx(th,{className:"w-4 h-4 mr-2"}),"Edit Template"]}),C&&!C.isActive&&r.jsx(W,{onClick:()=>{F(C),k(!1)},className:e?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Use Template"})]})]})}),r.jsx(mr,{open:g,onOpenChange:b,children:r.jsxs(fr,{className:`max-w-2xl ${s} border ${n}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:a,children:"Create New Automated Workflow"}),r.jsx(wr,{className:i,children:"Set up automated email sequences based on triggers and conditions"})]}),r.jsxs("div",{className:"space-y-5 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Workflow Name"}),r.jsx(de,{placeholder:"e.g., Post-Booking Follow-up Series",className:`h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-gray-500":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Trigger Event"}),r.jsxs(sr,{defaultValue:"booking-confirmed",children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"booking-confirmed",children:"Booking Confirmed"}),r.jsx(Ae,{value:"booking-cancelled",children:"Booking Cancelled"}),r.jsx(Ae,{value:"customer-signup",children:"New Customer Signup"}),r.jsx(Ae,{value:"visit-completed",children:"Visit Completed"}),r.jsx(Ae,{value:"abandoned-cart",children:"Cart Abandoned"}),r.jsx(Ae,{value:"payment-received",children:"Payment Received"}),r.jsx(Ae,{value:"review-requested",children:"Review Requested"}),r.jsx(Ae,{value:"custom-date",children:"Custom Date/Time"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Email Template"}),r.jsxs(sr,{children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"Select an email template"})}),r.jsx(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:w.map(ue=>r.jsxs(Ae,{value:ue.id,children:[ue.name," (",ue.category,")"]},ue.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Send Delay"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(de,{type:"number",placeholder:"0",defaultValue:"0",min:"0",className:`h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-gray-500":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`}),r.jsxs(sr,{defaultValue:"minutes",children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"minutes",children:"Minutes"}),r.jsx(Ae,{value:"hours",children:"Hours"}),r.jsx(Ae,{value:"days",children:"Days"}),r.jsx(Ae,{value:"weeks",children:"Weeks"})]})]})]}),r.jsx("p",{className:`text-xs ${i}`,children:"Email will be sent after this delay from the trigger event"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-sm ${e?"text-gray-300":"text-gray-700"}`,children:"Conditions (Optional)"}),r.jsx(Ps,{placeholder:"e.g., Only send if booking value > $100",rows:3,className:`${e?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-gray-500":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${n} ${e?"bg-[#1e1e1e]":"bg-gray-50"}`,children:[r.jsxs("div",{children:[r.jsx(X,{className:`text-sm ${a}`,children:"Activate Immediately"}),r.jsx("p",{className:`text-xs ${i} mt-1`,children:"Start sending emails as soon as workflow is created"})]}),r.jsx(Rt,{defaultChecked:!0})]}),r.jsx("div",{className:`p-4 rounded-lg border ${n} ${e?"bg-[#1e1e1e]":"bg-blue-50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg ${e?"bg-indigo-900/30":"bg-indigo-100"} flex items-center justify-center flex-shrink-0`,children:r.jsx(wd,{className:`w-4 h-4 ${e?"text-indigo-400":"text-indigo-600"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${a}`,children:"Workflow Preview"}),r.jsxs("p",{className:`text-xs ${i} mt-1`,children:["When ",r.jsx("strong",{children:"booking is confirmed"}),", send ",r.jsx("strong",{children:"selected template"})," after ",r.jsx("strong",{children:"0 minutes"})]})]})]})})]}),r.jsxs(Us,{className:`border-t pt-4 ${n}`,children:[r.jsx(W,{variant:"outline",onClick:()=>b(!1),className:e?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":"",children:"Cancel"}),r.jsxs(W,{onClick:()=>{b(!1),re.success("Workflow created successfully! Enable it in the list to activate.")},className:e?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(en,{className:"w-4 h-4 mr-2"}),"Create Workflow"]})]})]})}),r.jsx(mr,{open:$,onOpenChange:T,children:r.jsxs(fr,{className:`max-w-7xl max-h-[90vh] overflow-y-auto p-0 ${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:[r.jsxs(br,{className:"sr-only",children:[r.jsx(pr,{children:"Edit Email Template"}),r.jsx(wr,{children:"Customize the email template content, subject, and settings"})]}),I&&r.jsx(AWe,{template:I,onSave:q,onCancel:U})]})})]})}const PWe=[{id:"1",name:"Mystery Mansion",description:"Solve the haunted mansion mystery",difficulty:"Medium",duration:"60 min",minPlayers:2,maxPlayers:8,price:29},{id:"2",name:"Prison Break",description:"Escape before time runs out",difficulty:"Hard",duration:"75 min",minPlayers:4,maxPlayers:10,price:35},{id:"3",name:"Lost Temple",description:"Discover ancient treasures",difficulty:"Easy",duration:"45 min",minPlayers:2,maxPlayers:6,price:25},{id:"4",name:"Zombie Outbreak",description:"Survive the apocalypse",difficulty:"Hard",duration:"60 min",minPlayers:4,maxPlayers:8,price:32}],TWe=["10:00 AM","11:30 AM","1:00 PM","2:30 PM","4:00 PM","5:30 PM","7:00 PM","8:30 PM"],OWe=[{text:"Show me available rooms",icon:""},{text:"Book for tonight",icon:""},{text:"What are the prices?",icon:""},{text:"Help me choose",icon:""}];function yH({chatColor:t,chatPosition:e,chatGreeting:s,isOpen:n,onToggle:a,apiKey:i,provider:o="openai",model:l,onOpenHistory:c,onOpenSettings:d}){const{theme:u}=Nr(),h=u==="dark",m=h?"text-white":"text-gray-900",f=h?"text-[#a3a3a3]":"text-gray-600",v=h?"bg-[#161616]":"bg-white",x=h?"border-[#2a2a2a]":"border-gray-200",[g,b]=j.useState(null),[w,N]=j.useState([{id:"1",type:"bot",text:s,timestamp:new Date},{id:"2",type:"bot",text:"I can help you book an escape room experience! Let me show you our available games:",component:"game-selector",timestamp:new Date}]),[C,S]=j.useState(""),[A,k]=j.useState(null),[E,O]=j.useState(void 0),[$,T]=j.useState(null),[I,L]=j.useState(2),[z,M]=j.useState(!1),[V,B]=j.useState(!0),F=j.useRef(null),J=()=>{F.current?.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{J()},[w]),j.useEffect(()=>{try{const ye=localStorage.getItem("assistantConfig");ye&&b(JSON.parse(ye))}catch{}const pe=ye=>{if(ye.key==="assistantConfig")try{b(ye.newValue?JSON.parse(ye.newValue):null)}catch{}};return window.addEventListener("storage",pe),()=>window.removeEventListener("storage",pe)},[]),j.useEffect(()=>{g&&(w.length===2&&N(pe=>{const ye=[...pe];return ye[0]={...ye[0],text:g.personality?.greeting||s},ye}),g.behavior?.autoSuggest===!1&&B(!1))},[g]),j.useEffect(()=>{if(w.length>2){const pe=JSON.parse(localStorage.getItem("chatConversations")||"[]"),$e=[{id:Date.now().toString(),title:w[2]?.text?.substring(0,50)||"New Conversation",messages:w,timestamp:new Date},...pe].slice(0,20);localStorage.setItem("chatConversations",JSON.stringify($e))}},[w]);const ee=(pe,ye,$e)=>{M(!0),setTimeout(()=>{N(Se=>[...Se,{id:Date.now().toString(),type:"bot",text:pe,component:ye,data:$e,timestamp:new Date}]),M(!1)},1e3)},q=pe=>{N(ye=>[...ye,{id:Date.now().toString(),type:"user",text:pe,timestamp:new Date}]),B(!1)},U=pe=>{S(pe),ue(pe)},Z=pe=>{k(pe),q(`I'd like to book ${pe.name}`),ee(`Great choice! ${pe.name} is a ${pe.difficulty.toLowerCase()} level room that takes ${pe.duration}. Let's pick a date:`,"date-picker")},K=pe=>{pe&&(O(pe),q(`I'd like to book for ${Rn(pe,"MMMM dd, yyyy")}`),ee(`Perfect! Here are the available time slots for ${Rn(pe,"MMMM dd")}:`,"time-slots"))},se=pe=>{T(pe),q(`${pe} works for me`),ee(`Excellent! How many people will be joining you? (${A?.minPlayers}-${A?.maxPlayers} players)`,"participant-count")},ne=pe=>{L(pe),q(`${pe} people`),ee("Perfect! Here's your booking summary:","checkout-summary")},ie=()=>{q("Proceed to checkout"),ee(" Awesome! Redirecting you to checkout to complete your booking..."),setTimeout(()=>{ee('Your booking details have been saved. You can continue this conversation anytime, or start a new booking by typing "book another room".')},2e3)},be=async pe=>{if(!i||!i.trim())return"I'd love to help you book an escape room! Let me show you our available games:";try{const $e=(()=>{const Ue=g?.personality?.tone||"friendly",xt=g?.personality?.style||"balanced",ut=g?.knowledge?.businessHours,Ot=g?.knowledge?.specialInstructions,tt=g?.knowledge?.customFAQs||[],st=g?.behavior?.showPrices!==!1,At=g?.behavior?.escalateToHuman?"Yes":"No",Yt=g?.behavior?.collectFeedback?"Yes":"No",yr=`Available games:
1. Mystery Mansion - Medium difficulty, 60 min, 2-8 players${st?", $29/person":""}
2. Prison Break - Hard difficulty, 75 min, 4-10 players${st?", $35/person":""}
3. Lost Temple - Easy difficulty, 45 min, 2-6 players${st?", $25/person":""}
4. Zombie Outbreak - Hard difficulty, 60 min, 4-8 players${st?", $32/person":""}`,Zt="Available time slots: 10:00 AM, 11:30 AM, 1:00 PM, 2:30 PM, 4:00 PM, 5:30 PM, 7:00 PM, 8:30 PM",Vt=tt.length?`Additional FAQs:
${tt.map(Er=>`Q: ${Er.question}
A: ${Er.answer}`).join(`
`)}`:"",tr=st?"Include pricing details when relevant.":"Avoid quoting exact prices; if asked, say pricing is shown during checkout.",$t=At==="Yes"?"If the user seems stuck or requests a human, offer to escalate to a human agent.":"",Dr=Yt==="Yes"?"At the end of the booking or conversation, politely ask for feedback or a quick rating.":"";return["You are a helpful booking assistant for BookingTMS escape rooms.","Your goal is to help customers book escape room experiences.",`Respond with a ${Ue} tone and ${xt} style.`,ut?`Business hours: ${ut}`:void 0,Ot?`Special instructions: ${Ot}`:void 0,yr,Zt,"Guide the customer through: 1) selecting a game, 2) picking a date, 3) choosing a time slot, 4) number of participants, 5) completing checkout.",tr,$t||void 0,Dr||void 0,Vt||void 0,"Keep responses user-friendly. When appropriate, suggest showing available games or booking options."].filter(Er=>!!Er).join(`

`)})(),{projectId:Se,publicAnonKey:Y}=await V0(async()=>{const{projectId:Ue,publicAnonKey:xt}=await Promise.resolve().then(()=>twe);return{projectId:Ue,publicAnonKey:xt}},void 0),Le=l||"gpt-4o-mini",xe=await fetch(`https://${Se}.supabase.co/functions/v1/make-server-84a71643/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({apiKey:i,messages:[{role:"system",content:$e},{role:"user",content:pe}],model:Le,temperature:.7,maxTokens:200,provider:o})});if(!xe.ok){const Ue=await xe.json().catch(()=>({}));throw console.error("OpenAI API error:",xe.status,Ue),new Error(`API error: ${xe.status}`)}return(await xe.json()).choices[0]?.message?.content||"I can help you book an escape room! Would you like to see our available games?"}catch(ye){return console.error(`${o.toUpperCase()} API error:`,ye),"I'd love to help you book an escape room! Let me show you our available games:"}},ue=async pe=>{const ye=pe||C;if(!ye.trim())return;const $e=ye;q($e),S(""),M(!0);const Se=await be($e);M(!1);const Y=Se.toLowerCase(),Le=$e.toLowerCase();Le.includes("book")||Le.includes("room")||Le.includes("game")||Y.includes("games")||Y.includes("available")||Le.includes("price")||Le.includes("cost")||Le.includes("time")||Le.includes("when")?ee(Se,"game-selector"):N(xe=>[...xe,{id:Date.now().toString(),type:"bot",text:Se,timestamp:new Date}])},oe=pe=>{switch(pe.component){case"game-selector":return r.jsx("div",{className:"space-y-2 mt-3",children:PWe.map(Le=>r.jsx("button",{onClick:()=>Z(Le),className:`w-full p-3 rounded-lg border text-left transition-all ${h?"bg-[#1e1e1e] border-[#2a2a2a] hover:border-[#4f46e5]":"bg-white border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:`text-sm ${m}`,children:Le.name}),r.jsx(De,{variant:"secondary",className:`text-xs ${Le.difficulty==="Easy"?h?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700":Le.difficulty==="Medium"?h?"bg-yellow-500/20 text-yellow-400":"bg-yellow-100 text-yellow-700":h?"bg-red-500/20 text-red-400":"bg-red-100 text-red-700"}`,children:Le.difficulty})]}),r.jsx("p",{className:`text-xs ${f} mb-2`,children:Le.description}),r.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[r.jsxs("span",{className:`flex items-center gap-1 ${f}`,children:[r.jsx(jr,{className:"w-3 h-3"}),Le.duration]}),r.jsxs("span",{className:`flex items-center gap-1 ${f}`,children:[r.jsx(Xr,{className:"w-3 h-3"}),Le.minPlayers,"-",Le.maxPlayers]}),g?.behavior?.showPrices!==!1&&r.jsxs("span",{className:`font-semibold ${h?"text-[#6366f1]":"text-blue-600"}`,children:["$",Le.price,"/person"]})]})]}),r.jsx($n,{className:`w-5 h-5 flex-shrink-0 ${f}`})]})},Le.id))});case"date-picker":return r.jsx("div",{className:`mt-3 p-4 rounded-lg border ${h?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:r.jsx(Ah,{mode:"single",selected:E,onSelect:K,disabled:Le=>Le<new Date||Le<new Date(new Date().setHours(0,0,0,0)),className:`${h?"[&_.rdp-day_button]:text-white [&_.rdp-day_button:hover]:bg-[#4f46e5]":""}`})});case"time-slots":return r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3",children:TWe.map(Le=>r.jsxs("button",{onClick:()=>se(Le),className:`p-3 rounded-lg border text-center transition-all ${h?"bg-[#1e1e1e] border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/20":"bg-white border-gray-200 hover:border-blue-400 hover:bg-blue-50"}`,children:[r.jsx(jr,{className:`w-4 h-4 mx-auto mb-1 ${f}`}),r.jsx("span",{className:`text-sm ${m}`,children:Le})]},Le))});case"participant-count":const ye=A?.minPlayers||2,$e=A?.maxPlayers||8,Se=Array.from({length:$e-ye+1},(Le,xe)=>ye+xe);return r.jsx("div",{className:"grid grid-cols-4 gap-2 mt-3",children:Se.map(Le=>r.jsxs("button",{onClick:()=>ne(Le),className:`p-3 rounded-lg border text-center transition-all ${h?"bg-[#1e1e1e] border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/20":"bg-white border-gray-200 hover:border-blue-400 hover:bg-blue-50"}`,children:[r.jsx(Xr,{className:`w-4 h-4 mx-auto mb-1 ${f}`}),r.jsx("span",{className:`text-sm ${m}`,children:Le})]},Le))});case"checkout-summary":const Y=(A?.price||0)*I;return r.jsx("div",{className:`mt-3 p-4 rounded-lg border ${h?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${h?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(qs,{className:`w-5 h-5 ${h?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`text-sm mb-1 ${m}`,children:A?.name}),r.jsxs("div",{className:`text-xs space-y-1 ${f}`,children:[r.jsxs("p",{children:[" ",E?Rn(E,"EEEE, MMMM dd, yyyy"):"Date not selected"]}),r.jsxs("p",{children:[" ",$||"Time not selected"]}),r.jsxs("p",{children:[" ",I," ",I===1?"person":"people"]})]})]})]}),r.jsx("div",{className:`border-t pt-3 ${x}`,children:g?.behavior?.showPrices!==!1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:f,children:"Price per person:"}),r.jsxs("span",{className:m,children:["$",A?.price]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:f,children:"Participants:"}),r.jsxs("span",{className:m,children:["",I]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:m,children:"Total:"}),r.jsxs("span",{className:`text-lg ${m}`,children:["$",Y]})]})]})}),r.jsxs(W,{onClick:ie,className:"w-full h-11",style:{backgroundColor:t},children:[r.jsx(ri,{className:"w-4 h-4 mr-2"}),"Proceed to Checkout"]})]})});default:return null}};return n?r.jsxs("div",{className:`w-[380px] rounded-2xl shadow-2xl overflow-hidden border ${h?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:[r.jsxs("div",{className:"p-4 text-white flex items-center justify-between",style:{backgroundColor:t},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center relative",children:[r.jsx(M1,{className:"w-5 h-5 text-white"}),r.jsx("span",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-white"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm",children:"Booking Assistant"}),r.jsx(_a,{className:"w-3 h-3"})]}),r.jsx("p",{className:"text-xs opacity-90",children:"AI-Powered  Online"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[c&&r.jsx("button",{onClick:c,className:"hover:bg-white/20 p-1.5 rounded transition-colors",title:"Chat History",children:r.jsx(LY,{className:"w-4 h-4"})}),d&&r.jsx("button",{onClick:d,className:"hover:bg-white/20 p-1.5 rounded transition-colors",title:"Settings",children:r.jsx(ul,{className:"w-4 h-4"})}),r.jsx("button",{onClick:a,className:"hover:bg-white/20 p-1.5 rounded transition-colors",children:r.jsx(ame,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:`h-[480px] p-4 space-y-4 overflow-y-auto ${h?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[w.map(pe=>r.jsx("div",{children:pe.type==="bot"?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:t},children:r.jsx(M1,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{className:"flex-1 max-w-[85%]",children:[pe.text&&r.jsx("div",{className:`rounded-2xl rounded-tl-sm p-3 shadow-sm ${v} border ${x}`,children:r.jsx("p",{className:`text-sm ${m}`,children:pe.text})}),pe.component&&oe(pe)]})]}):r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("div",{className:"rounded-2xl rounded-tr-sm p-3 shadow-sm max-w-[75%]",style:{backgroundColor:t},children:r.jsx("p",{className:"text-sm text-white",children:pe.text})}),r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${h?"bg-[#2a2a2a]":"bg-gray-200"}`,children:r.jsx(ma,{className:`w-4 h-4 ${f}`})})]})},pe.id)),z&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:t},children:r.jsx(M1,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:`rounded-2xl rounded-tl-sm p-3 shadow-sm ${v} border ${x}`,children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),V&&w.length===2&&r.jsxs("div",{className:"space-y-2 pt-2",children:[r.jsxs("div",{className:`flex items-center gap-2 px-1 ${f}`,children:[r.jsx(Hhe,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Quick suggestions:"})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:OWe.map((pe,ye)=>r.jsxs("button",{onClick:()=>U(pe.text),className:`p-2 rounded-lg border text-left text-xs transition-all ${h?"bg-[#1e1e1e] border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/10":"bg-white border-gray-200 hover:border-blue-400 hover:bg-blue-50"}`,children:[r.jsx("span",{className:"mr-1",children:pe.icon}),r.jsx("span",{className:m,children:pe.text})]},ye))})]}),r.jsx("div",{ref:F})]}),r.jsxs("div",{className:`p-3 border-t ${h?"border-[#2a2a2a] bg-[#161616]":"border-gray-200 bg-white"}`,children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Type your message...",className:`flex-1 text-sm h-10 ${h?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,value:C,onChange:pe=>S(pe.target.value),onKeyPress:pe=>pe.key==="Enter"&&ue()}),r.jsx(W,{size:"icon",style:{backgroundColor:t},onClick:()=>ue(),className:"h-10 w-10 flex-shrink-0",disabled:!C.trim(),children:r.jsx(wd,{className:"w-4 h-4 text-white"})})]}),r.jsx("p",{className:`text-xs mt-2 text-center ${f}`,children:"Powered by BookingTMS AI"})]})]}):r.jsxs("button",{onClick:a,className:"w-14 h-14 rounded-full shadow-2xl flex items-center justify-center relative hover:scale-105 transition-transform",style:{backgroundColor:t},children:[r.jsx(ni,{className:"w-6 h-6 text-white"}),r.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs text-white",children:"1"})]})}function IWe({isOpen:t,onClose:e}){const{theme:s}=Nr(),n=s==="dark",a=n?"text-white":"text-gray-900",i=n?"text-[#a3a3a3]":"text-gray-600",o=n?"bg-[#161616]":"bg-white",l=n?"border-[#2a2a2a]":"border-gray-200",[c,d]=j.useState([]),[u,h]=j.useState(null),[m,f]=j.useState(""),[v,x]=j.useState("all");j.useEffect(()=>{t&&g()},[t]);const g=()=>{const S=localStorage.getItem("chatConversations");if(S){const k=JSON.parse(S).map(E=>({...E,timestamp:new Date(E.timestamp),messages:E.messages.map(O=>({...O,timestamp:O.timestamp?new Date(O.timestamp):void 0}))}));d(k)}},b=S=>{const A=c.filter(k=>k.id!==S);d(A),localStorage.setItem("chatConversations",JSON.stringify(A)),u?.id===S&&h(null)},w=()=>{confirm("Are you sure you want to delete all chat history?")&&(d([]),h(null),localStorage.removeItem("chatConversations"))},N=S=>{const A=S.messages.map($=>`[${$.type.toUpperCase()}]: ${$.text||"(Interactive component)"}`).join(`

`),k=new Blob([A],{type:"text/plain"}),E=URL.createObjectURL(k),O=document.createElement("a");O.href=E,O.download=`chat-${Rn(S.timestamp,"yyyy-MM-dd-HHmm")}.txt`,O.click(),URL.revokeObjectURL(E)},C=c.filter(S=>{if(m){const A=m.toLowerCase(),k=S.title.toLowerCase().includes(A),E=S.messages.some(O=>O.text?.toLowerCase().includes(A));if(!k&&!E)return!1}if(v!=="all"){const A=new Date,k=new Date(S.timestamp),E=Math.floor((A.getTime()-k.getTime())/(1e3*60*60*24));if(v==="today"&&E>0||v==="week"&&E>7||v==="month"&&E>30)return!1}return!0}).sort((S,A)=>new Date(A.timestamp).getTime()-new Date(S.timestamp).getTime());return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`max-w-4xl h-[600px] ${o} ${a} border ${l}`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:`flex items-center gap-2 ${a}`,children:[r.jsx(LY,{className:"w-5 h-5"}),"Chat History"]}),r.jsx(wr,{className:i,children:"View and manage your past conversations"})]}),r.jsxs("div",{className:"flex gap-4 h-[480px]",children:[r.jsxs("div",{className:`w-1/3 border-r ${l} flex flex-col`,children:[r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${i}`}),r.jsx(de,{placeholder:"Search conversations...",value:m,onChange:S=>f(S.target.value),className:`pl-9 h-10 ${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`})]}),r.jsx("div",{className:"flex gap-1",children:["all","today","week","month"].map(S=>r.jsx(W,{variant:v===S?"default":"outline",size:"sm",onClick:()=>x(S),className:`text-xs ${v===S&&n?"bg-[#4f46e5]":v===S?"bg-blue-600":""}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),r.jsx(fa,{className:"flex-1",children:r.jsx("div",{className:"space-y-2 pr-4",children:C.length===0?r.jsxs("div",{className:`text-center py-8 ${i}`,children:[r.jsx(ni,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No conversations found"})]}):C.map(S=>r.jsxs("button",{onClick:()=>h(S),className:`w-full p-3 rounded-lg border text-left transition-all ${u?.id===S.id?n?"bg-[#4f46e5]/20 border-[#4f46e5]":"bg-blue-50 border-blue-400":n?"bg-[#1e1e1e] border-[#2a2a2a] hover:border-[#4f46e5]":"bg-white border-gray-200 hover:border-blue-400"}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h4",{className:`text-sm truncate ${a}`,children:S.title}),r.jsx(De,{variant:"secondary",className:"text-xs shrink-0",children:S.messages.length})]}),r.jsx("p",{className:`text-xs ${i}`,children:Rn(new Date(S.timestamp),"MMM dd, yyyy HH:mm")})]},S.id))})}),c.length>0&&r.jsx("div",{className:"pt-3 border-t mt-3",children:r.jsxs(W,{variant:"outline",size:"sm",onClick:w,className:"w-full text-red-600 hover:text-red-700 hover:bg-red-50",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Clear All History"]})})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:u?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`pb-3 mb-3 border-b ${l} flex items-center justify-between`,children:[r.jsxs("div",{children:[r.jsx("h3",{className:`text-sm ${a}`,children:u.title}),r.jsx("p",{className:`text-xs ${i}`,children:Rn(new Date(u.timestamp),"MMMM dd, yyyy  HH:mm")})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>N(u),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>b(u.id),className:"text-red-600 hover:text-red-700",children:r.jsx(ks,{className:"w-4 h-4"})})]})]}),r.jsx(fa,{className:"flex-1",children:r.jsx("div",{className:"space-y-3 pr-4",children:u.messages.map(S=>r.jsx("div",{className:`flex ${S.type==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${S.type==="bot"?n?"bg-[#1e1e1e] border border-[#2a2a2a]":"bg-white border border-gray-200":n?"bg-[#4f46e5] text-white":"bg-blue-600 text-white"}`,children:[r.jsx("p",{className:"text-sm",children:S.text||"(Interactive component)"}),S.timestamp&&r.jsx("p",{className:`text-xs mt-1 ${S.type==="bot"?i:"text-white/70"}`,children:Rn(new Date(S.timestamp),"HH:mm")})]})},S.id))})})]}):r.jsx("div",{className:`flex-1 flex items-center justify-center ${i}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx(ni,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Select a conversation to view details"})]})})})]})]})})}const bH={personality:{tone:"friendly",style:"balanced",greeting:"Hi! I'm here to help you book an amazing escape room experience. What can I do for you today?",signOff:"Thanks for chatting! I'm here anytime you need help."},knowledge:{customFAQs:[{id:"1",question:"What should I bring?",answer:"Just bring yourself and your team! We provide everything you need. Comfortable clothing is recommended."},{id:"2",question:"Can we take photos?",answer:"Yes! Photos are encouraged. We have a photo area at the end where you can capture your victory moment."}],businessHours:"Monday-Friday: 10am-10pm, Saturday-Sunday: 9am-11pm",specialInstructions:"Always mention our satisfaction guarantee and offer alternative dates if fully booked."},behavior:{autoSuggest:!0,showPrices:!0,collectFeedback:!0,escalateToHuman:!0}};function $We({isOpen:t,onClose:e}){const{theme:s}=Nr(),n=s==="dark",a=n?"text-white":"text-gray-900",i=n?"text-[#a3a3a3]":"text-gray-600",o=n?"bg-[#161616]":"bg-white",l=n?"bg-[#1e1e1e]":"bg-gray-50",c=n?"border-[#2a2a2a]":"border-gray-200",[d,u]=j.useState(bH),[h,m]=j.useState(!1);j.useEffect(()=>{t&&f()},[t]);const f=()=>{const A=localStorage.getItem("assistantConfig");A&&u(JSON.parse(A)),m(!1)},v=()=>{localStorage.setItem("assistantConfig",JSON.stringify(d)),re.success("Assistant configuration saved!"),m(!1)},x=()=>{confirm("Reset all settings to defaults?")&&(u(bH),m(!0))},g=(A,k)=>{u({...d,personality:{...d.personality,[A]:k}}),m(!0)},b=(A,k)=>{u({...d,knowledge:{...d.knowledge,[A]:k}}),m(!0)},w=(A,k)=>{u({...d,behavior:{...d.behavior,[A]:k}}),m(!0)},N=()=>{const A={id:Date.now().toString(),question:"",answer:""};u({...d,knowledge:{...d.knowledge,customFAQs:[...d.knowledge.customFAQs,A]}}),m(!0)},C=(A,k,E)=>{u({...d,knowledge:{...d.knowledge,customFAQs:d.knowledge.customFAQs.map(O=>O.id===A?{...O,[k]:E}:O)}}),m(!0)},S=A=>{u({...d,knowledge:{...d.knowledge,customFAQs:d.knowledge.customFAQs.filter(k=>k.id!==A)}}),m(!0)};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`max-w-3xl max-h-[90vh] overflow-hidden flex flex-col ${o} ${a} border ${c}`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:`flex items-center gap-2 ${a}`,children:[r.jsx(ul,{className:"w-5 h-5"}),"Configure & Train Assistant"]}),r.jsx(wr,{className:i,children:"Customize your AI assistant's personality, knowledge, and behavior"})]}),r.jsxs(wn,{defaultValue:"personality",className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs(kn,{className:`w-full ${n?"bg-[#0a0a0a]":"bg-gray-100"}`,children:[r.jsxs(Tt,{value:"personality",className:"flex-1",children:[r.jsx(ni,{className:"w-4 h-4 mr-2"}),"Personality"]}),r.jsxs(Tt,{value:"knowledge",className:"flex-1",children:[r.jsx(LE,{className:"w-4 h-4 mr-2"}),"Knowledge Base"]}),r.jsxs(Tt,{value:"behavior",className:"flex-1",children:[r.jsx(Du,{className:"w-4 h-4 mr-2"}),"Behavior"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto mt-4",children:[r.jsx(Bt,{value:"personality",className:"space-y-4 mt-0",children:r.jsxs(he,{className:`${l} border ${c}`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:`text-sm ${a}`,children:"Tone & Style"}),r.jsx(Ft,{className:i,children:"Define how your assistant communicates"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Tone"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:["professional","friendly","casual"].map(A=>r.jsx(W,{variant:d.personality.tone===A?"default":"outline",onClick:()=>g("tone",A),className:`${d.personality.tone===A&&n?"bg-[#4f46e5]":d.personality.tone===A?"bg-blue-600":""}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Response Style"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:["concise","balanced","detailed"].map(A=>r.jsx(W,{variant:d.personality.style===A?"default":"outline",onClick:()=>g("style",A),className:`${d.personality.style===A&&n?"bg-[#4f46e5]":d.personality.style===A?"bg-blue-600":""}`,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Custom Greeting"}),r.jsx(Ps,{value:d.personality.greeting,onChange:A=>g("greeting",A.target.value),placeholder:"Enter custom greeting...",className:`${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Sign-off Message"}),r.jsx(Ps,{value:d.personality.signOff,onChange:A=>g("signOff",A.target.value),placeholder:"Enter sign-off message...",className:`${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,rows:2})]})]})]})}),r.jsxs(Bt,{value:"knowledge",className:"space-y-4 mt-0",children:[r.jsxs(he,{className:`${l} border ${c}`,children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:`text-sm flex items-center justify-between ${a}`,children:["Custom FAQs",r.jsxs(W,{size:"sm",onClick:N,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add FAQ"]})]}),r.jsx(Ft,{className:i,children:"Train your assistant with custom Q&A pairs"})]}),r.jsxs(_e,{className:"space-y-3",children:[d.knowledge.customFAQs.map(A=>r.jsxs("div",{className:`p-3 rounded-lg border ${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[r.jsx(de,{placeholder:"Question",value:A.question,onChange:k=>C(A.id,"question",k.target.value),className:`flex-1 ${n?"bg-[#161616]":"bg-gray-50"}`}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>S(A.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsx(Ps,{placeholder:"Answer",value:A.answer,onChange:k=>C(A.id,"answer",k.target.value),className:`${n?"bg-[#161616]":"bg-gray-50"}`,rows:2})]},A.id)),d.knowledge.customFAQs.length===0&&r.jsxs("div",{className:`text-center py-8 ${i}`,children:[r.jsx(LE,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No FAQs added yet"})]})]})]}),r.jsxs(he,{className:`${l} border ${c}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:`text-sm ${a}`,children:"Business Information"})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Business Hours"}),r.jsx(de,{value:d.knowledge.businessHours,onChange:A=>b("businessHours",A.target.value),placeholder:"e.g., Mon-Fri: 10am-10pm",className:`${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Special Instructions"}),r.jsx(Ps,{value:d.knowledge.specialInstructions,onChange:A=>b("specialInstructions",A.target.value),placeholder:"Additional guidelines for the assistant...",className:`${n?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,rows:4})]})]})]})]}),r.jsxs(Bt,{value:"behavior",className:"space-y-4 mt-0",children:[r.jsxs(he,{className:`${l} border ${c}`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:`text-sm ${a}`,children:"Assistant Features"}),r.jsx(Ft,{className:i,children:"Control what your assistant can do"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Auto-suggest Responses"}),r.jsx("p",{className:`text-xs ${i}`,children:"Show quick suggestion chips"})]}),r.jsx(Rt,{checked:d.behavior.autoSuggest,onCheckedChange:A=>w("autoSuggest",A)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Show Prices"}),r.jsx("p",{className:`text-xs ${i}`,children:"Display pricing information"})]}),r.jsx(Rt,{checked:d.behavior.showPrices,onCheckedChange:A=>w("showPrices",A)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Collect Feedback"}),r.jsx("p",{className:`text-xs ${i}`,children:"Ask for feedback after conversations"})]}),r.jsx(Rt,{checked:d.behavior.collectFeedback,onCheckedChange:A=>w("collectFeedback",A)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Escalate to Human"}),r.jsx("p",{className:`text-xs ${i}`,children:"Offer live support option"})]}),r.jsx(Rt,{checked:d.behavior.escalateToHuman,onCheckedChange:A=>w("escalateToHuman",A)})]})]})]}),r.jsx("div",{className:`p-4 rounded-lg border ${n?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(L1,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${n?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${n?"text-[#e0e7ff]":"text-blue-900"}`,children:"Training in Progress"}),r.jsx("p",{className:`text-xs mt-1 ${n?"text-[#c7d2fe]":"text-blue-700"}`,children:"Your assistant learns from every conversation and improves over time based on your configurations."})]})]})})]})]})]}),r.jsxs("div",{className:`flex items-center justify-between pt-4 border-t ${c}`,children:[r.jsxs(W,{variant:"outline",onClick:x,children:[r.jsx(N0,{className:"w-4 h-4 mr-2"}),"Reset to Defaults"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{variant:"outline",onClick:e,children:"Cancel"}),r.jsxs(W,{onClick:v,disabled:!h,className:n?"bg-[#4f46e5]":"bg-blue-600",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})}const ZA=[{id:"booking",name:"Booking Assistant",description:"Automates booking inquiries and helps customers schedule their escape room experiences",icon:qs,color:"text-blue-600",bgColor:"bg-blue-100",status:"Active",conversations:342,successRate:94,avgResponseTime:"1.2s"},{id:"support",name:"Customer Support",description:"Handles customer questions, provides information, and resolves common issues 24/7",icon:ni,color:"text-green-600",bgColor:"bg-green-100",status:"Active",conversations:856,successRate:91,avgResponseTime:"0.8s"},{id:"calling",name:"Calling Agent",description:"Makes and receives phone calls for booking confirmations, reminders, and follow-ups",icon:la,color:"text-purple-600",bgColor:"bg-purple-100",status:"Inactive",conversations:0,successRate:0,avgResponseTime:"--"}];function DWe(){const{theme:t}=Nr(),{isRole:e}=no(),s=t==="dark",n=e("beta-owner"),a=s?"text-white":"text-gray-900",i=s?"text-[#a3a3a3]":"text-gray-600",o=s?"border-[#2a2a2a]":"border-gray-200",l=s?"bg-[#161616]":"bg-white",c=s?"bg-[#1e1e1e]":"bg-gray-50",d=s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[u,h]=j.useState(null),[m,f]=j.useState({booking:{enabled:!0,apiKey:localStorage.getItem("zai_api_key")||"",model:"glm-4.6",temperature:.7,maxTokens:500,systemPrompt:"You are a helpful booking assistant for BookingTMS escape rooms. Help customers book escape room experiences by showing them available games, dates, and times. Be friendly and guide them through the booking process step by step.",knowledgeBase:["Business hours: Mon-Sun 10AM-10PM","Location: 123 Main Street","Prices start at $25/person"]},support:{enabled:!0,apiKey:"sk-",model:"gpt-4",temperature:.5,maxTokens:500,systemPrompt:"You are a customer support specialist for BookingTMS escape rooms...",knowledgeBase:["Cancellation policy: 24 hours notice required","Age requirement: 10+ years old","Group size: 2-8 players"]},calling:{enabled:!1,apiKey:"",voiceId:"alloy",language:"en-US",systemPrompt:"You are making a booking confirmation call for BookingTMS...",knowledgeBase:[]}}),[v,x]=j.useState(!1),[g,b]=j.useState(!1),[w,N]=j.useState(""),[C,S]=j.useState(!1),[A,k]=j.useState(!0),[E,O]=j.useState("#4f46e5"),[$,T]=j.useState("right"),[I,L]=j.useState("Hi! How can I help you today?"),[z,M]=j.useState(!1),[V,B]=j.useState(localStorage.getItem("zai_api_key")||""),[F,J]=j.useState(localStorage.getItem("openai_api_key")||""),[ee,q]=j.useState(localStorage.getItem("llm_provider")||"openai"),[U,Z]=j.useState(localStorage.getItem("llm_model")||"gpt-4o-mini"),[K,se]=j.useState(!1),[ne,ie]=j.useState(!1),[be,ue]=j.useState(!1),[oe,pe]=j.useState(!1),ye=ZA.find(st=>st.id===u),$e=u?m[u]:null,Se=st=>{f({...m,[st]:{...m[st],enabled:!m[st].enabled}}),re.success(`${ZA.find(At=>At.id===st)?.name} ${m[st].enabled?"deactivated":"activated"}`)},Y=()=>{re.success("Configuration saved successfully"),x(!1)},Le=()=>{!u||!w.trim()||(f({...m,[u]:{...m[u],knowledgeBase:[...m[u].knowledgeBase,w.trim()]}}),N(""),re.success("Knowledge added to agent"))},xe=st=>{if(!u)return;const At=[...m[u].knowledgeBase];At.splice(st,1),f({...m,[u]:{...m[u],knowledgeBase:At}}),re.success("Knowledge removed")},mt=st=>{h(st),x(!0)},Ue=st=>{h(st),b(!0)},xt=st=>{switch(st){case"Active":return r.jsxs(De,{className:s?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Active"]});case"Inactive":return r.jsxs(De,{className:s?"bg-[#2a2a2a] text-[#a3a3a3] border-0":"bg-gray-100 text-gray-700 border-0",children:[r.jsx(ln,{className:"w-3 h-3 mr-1"}),"Inactive"]});case"Training":return r.jsxs(De,{className:s?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:[r.jsx(L1,{className:"w-3 h-3 mr-1"}),"Training"]});default:return null}},ut=()=>{const st=`<!-- BookingTMS AI Chat Widget -->
<script>
  (function(w,d,s,o,f,js,fjs){
    w['BookingTMS']=o;w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};
    js=d.createElement(s),fjs=d.getElementsByTagName(s)[0];
    js.id=o;js.src=f;js.async=1;fjs.parentNode.insertBefore(js,fjs);
  }(window,document,'script','btms','https://cdn.bookingtms.com/widget.js'));
  btms('init', {
    apiKey: 'YOUR_API_KEY_HERE',
    color: '${E}',
    position: '${$}',
    greeting: '${I}'
  });
<\/script>`;navigator.clipboard.writeText(st),re.success("Embed code copied to clipboard")},Ot=()=>{re.success("Chat widget added to your website successfully")},tt=()=>{if(!F.trim()){re.error("Please enter a valid OpenAI API key");return}localStorage.setItem("openai_api_key",F),localStorage.setItem("llm_provider","openai"),localStorage.setItem("llm_model",U),f({...m,booking:{...m.booking,apiKey:F}}),se(!1),re.success(`OpenAI API key and model (${U}) saved successfully`)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"AI Agents",description:"Manage your AI-powered automation agents",sticky:!0,action:r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Custom Agent"]})}),!n&&r.jsxs(he,{className:`${l} border-2 ${s?"border-[#4f46e5]/30 shadow-[0_0_30px_rgba(79,70,229,0.15)]":"border-blue-200 shadow-lg"}`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",style:{background:s?"linear-gradient(135deg, #4f46e5 0%, #6366f1 100%)":"linear-gradient(135deg, #2563eb 0%, #3b82f6 100%)"},children:r.jsx(_a,{className:"w-7 h-7 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Xe,{className:a,children:"Customer Assistant"}),r.jsxs(De,{className:s?"bg-[#4f46e5]/20 text-[#6366f1] border-0":"bg-blue-600 text-white border-0",children:[r.jsx(_a,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),r.jsx(Ft,{className:i,children:"AI-powered chat widget for your website  Handles bookings, questions & support"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{checked:A,onCheckedChange:k}),r.jsx("span",{className:`text-sm ${i}`,children:A?"Active":"Inactive"})]})]})}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:`text-sm mb-3 flex items-center gap-2 ${a}`,children:[r.jsx(ul,{className:"w-4 h-4"}),"Widget Customization"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"chatColor",className:`flex items-center gap-2 ${a}`,children:[r.jsx(Vf,{className:"w-4 h-4"}),"Primary Color"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{id:"chatColor",type:"color",value:E,onChange:st=>O(st.target.value),className:"w-20 h-11 cursor-pointer"}),r.jsx(de,{value:E,onChange:st=>O(st.target.value),className:"flex-1 h-11",placeholder:"#4f46e5"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Widget Position"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(W,{variant:$==="right"?"default":"outline",style:{backgroundColor:$==="right"&&s?"#4f46e5":void 0},className:$==="right"&&!s?"bg-blue-600":"",onClick:()=>T("right"),children:"Bottom Right"}),r.jsx(W,{variant:$==="left"?"default":"outline",style:{backgroundColor:$==="left"&&s?"#4f46e5":void 0},className:$==="left"&&!s?"bg-blue-600":"",onClick:()=>T("left"),children:"Bottom Left"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"greeting",className:a,children:"Greeting Message"}),r.jsx(de,{id:"greeting",value:I,onChange:st=>L(st.target.value),placeholder:"Hi! How can I help you today?",className:"h-11"})]})]})]}),r.jsx(Ze,{className:o}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-sm mb-3 flex items-center gap-2 ${a}`,children:[r.jsx(L1,{className:"w-4 h-4"}),"AI Configuration"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx($d,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${a}`,children:"AI Provider Configuration"}),r.jsx("p",{className:`text-xs mt-1 ${i}`,children:F?" OpenAI configured":" Configure OpenAI"}),r.jsxs("p",{className:`text-xs mt-1 ${s?"text-[#6366f1]":"text-blue-600"}`,children:["Provider: OpenAI  Model: ",U]})]})]}),r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>se(!0),children:[r.jsx($d,{className:"w-4 h-4 mr-2"}),F?"Update Configuration":"Configure OpenAI"]})]}),r.jsx("div",{className:`p-3 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("p",{className:`text-xs ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:[" ",r.jsx("strong",{children:"Get Started:"})," Create your API key at ",r.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"OpenAI Platform"})]})})]})]}),r.jsx(Ze,{className:o}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-sm mb-3 flex items-center gap-2 ${a}`,children:[r.jsx(ml,{className:"w-4 h-4"}),"Installation"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx(hs,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"Automatic Installation"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:"Add the chat widget to all pages of your BookingTMS website with one click"})]})]}),r.jsxs(W,{className:"w-full h-11",style:{backgroundColor:s?"#4f46e5":void 0},onClick:Ot,children:[r.jsx(Du,{className:"w-4 h-4 mr-2"}),"Add to My Website"]})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${o} ${c}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx(dM,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${a}`,children:"Manual Installation"}),r.jsx("p",{className:`text-xs mt-1 ${i}`,children:"Get embed code to add the widget to any website"})]})]}),r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>S(!0),children:[r.jsx(dM,{className:"w-4 h-4 mr-2"}),"Get Embed Code"]})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[r.jsx(tn,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${a}`,children:"Test Widget"}),r.jsx("p",{className:`text-xs mt-1 ${i}`,children:"Test the chat widget in a full-page embed preview"})]})]}),r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>ie(!0),children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Test in Embed"]})]})]})]}),r.jsx(Ze,{className:`lg:hidden ${o}`}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-sm mb-3 ${a}`,children:"Included Features"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:`flex items-center gap-2 text-sm ${i}`,children:[r.jsx(Lt,{className:`w-4 h-4 flex-shrink-0 ${s?"text-emerald-400":"text-green-600"}`}),"Booking Assistance"]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${i}`,children:[r.jsx(Lt,{className:`w-4 h-4 flex-shrink-0 ${s?"text-emerald-400":"text-green-600"}`}),"24/7 Support"]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${i}`,children:[r.jsx(Lt,{className:`w-4 h-4 flex-shrink-0 ${s?"text-emerald-400":"text-green-600"}`}),"FAQ Answers"]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${i}`,children:[r.jsx(Lt,{className:`w-4 h-4 flex-shrink-0 ${s?"text-emerald-400":"text-green-600"}`}),"Lead Capture"]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:`text-sm flex items-center gap-2 ${a}`,children:[r.jsx(cl,{className:"w-4 h-4"}),"Live Preview"]}),r.jsxs(De,{variant:"secondary",className:s?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:[r.jsx(cl,{className:"w-3 h-3 mr-1"}),"Live"]})]}),r.jsxs("div",{className:`rounded-xl p-6 border-2 relative h-[600px] overflow-hidden ${s?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,children:[r.jsx("div",{className:`absolute inset-0 ${s?"bg-gradient-to-br from-[#0a0a0a] to-[#161616]":"bg-gradient-to-br from-gray-50 to-gray-100"}`,children:r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:`h-8 w-48 rounded mb-4 ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:`h-4 w-full rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-4 w-3/4 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-4 w-5/6 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[r.jsx("div",{className:`h-24 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-24 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`})]})]})}),r.jsx("div",{className:`absolute bottom-6 ${$==="right"?"right-6":"left-6"} transition-all duration-300`,style:{zIndex:10},children:r.jsx(yH,{chatColor:E,chatPosition:$,chatGreeting:I,isOpen:z,onToggle:()=>M(!z),apiKey:F,provider:"openai",model:U,onOpenHistory:()=>ue(!0),onOpenSettings:()=>pe(!0)})})]}),r.jsxs("div",{className:`text-xs text-center space-y-1 ${i}`,children:[r.jsxs("p",{className:"flex items-center justify-center gap-2",children:[r.jsx(_a,{className:"w-3 h-3"}),r.jsx("span",{children:"Interactive AI-Powered Booking Experience"})]}),r.jsx("p",{children:'Click the chat bubble and try: "Book a room" or "Show me available games"'})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${l} border ${o} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${i}`,children:"Total Conversations"}),r.jsx("p",{className:`text-2xl mt-1 ${a}`,children:"1,198"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-emerald-400":"text-green-600"}`,children:" 23% from last month"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ni,{className:`w-6 h-6 ${s?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${l} border ${o} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${i}`,children:"Success Rate"}),r.jsx("p",{className:`text-2xl mt-1 ${a}`,children:"92%"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-emerald-400":"text-green-600"}`,children:" 5% improvement"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Wn,{className:`w-6 h-6 ${s?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${l} border ${o} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${i}`,children:"Avg Response Time"}),r.jsx("p",{className:`text-2xl mt-1 ${a}`,children:"1.0s"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-emerald-400":"text-green-600"}`,children:" 0.3s faster"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(jr,{className:`w-6 h-6 ${s?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${l} border ${o} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${i}`,children:"Active Agents"}),r.jsx("p",{className:`text-2xl mt-1 ${a}`,children:"2/3"}),r.jsx("p",{className:`text-xs mt-1 ${i}`,children:"1 agent inactive"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${s?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(M1,{className:`w-6 h-6 ${s?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Ze,{className:`flex-1 ${o}`}),r.jsx("h2",{className:`text-lg ${a}`,children:"Specialized AI Agents"}),r.jsx(Ze,{className:`flex-1 ${o}`})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ZA.map(st=>{const At=m[st.id],Yt=st.icon;return r.jsxs(he,{className:`${l} border ${o} shadow-sm hover:shadow-md transition-shadow`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 ${s?st.id==="booking"?"bg-[#4f46e5]/20":st.id==="support"?"bg-emerald-500/20":"bg-purple-500/20":st.bgColor}`,children:r.jsx(Yt,{className:`w-7 h-7 ${s?st.id==="booking"?"text-[#6366f1]":st.id==="support"?"text-emerald-400":"text-purple-400":st.color}`})}),xt(st.status)]}),r.jsx(Xe,{className:a,children:st.name}),r.jsx(Ft,{className:`${i} line-clamp-2`,children:st.description})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:`grid grid-cols-3 gap-3 p-4 rounded-lg ${c}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`text-lg ${a}`,children:st.conversations}),r.jsx("p",{className:`text-xs ${i}`,children:"Conversations"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:`text-lg ${a}`,children:[st.successRate,"%"]}),r.jsx("p",{className:`text-xs ${i}`,children:"Success Rate"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`text-lg ${a}`,children:st.avgResponseTime}),r.jsx("p",{className:`text-xs ${i}`,children:"Avg Response"})]})]}),!n&&r.jsx("div",{className:`flex items-center justify-between p-3 border rounded-lg ${o}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{checked:At.enabled,onCheckedChange:()=>Se(st.id)}),r.jsx("span",{className:`text-sm ${a}`,children:At.enabled?"Agent Active":"Agent Inactive"})]})}),n&&r.jsxs("div",{className:`p-4 border rounded-lg ${o} ${c}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm font-medium ${a}`,children:"Status"}),r.jsx(De,{variant:At.enabled?"default":"secondary",className:At.enabled?"bg-green-100 text-green-700 dark:bg-green-500/20 dark:text-green-400":"",children:At.enabled?"Active":"Inactive"})]}),r.jsx("p",{className:`text-xs ${i} mt-2`,children:"Contact support to modify agent settings"})]}),r.jsx(Ze,{className:o}),!n&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>mt(st.id),children:[r.jsx(ul,{className:"w-4 h-4 mr-2"}),"Configure"]}),r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>Ue(st.id),children:[r.jsx(L1,{className:"w-4 h-4 mr-2"}),"Train"]})]}),r.jsxs(W,{className:"w-full h-11",style:{backgroundColor:s?"#4f46e5":void 0},children:[r.jsx(cl,{className:"w-4 h-4 mr-2"}),"View Analytics"]})]}),n&&r.jsxs(W,{variant:"outline",className:"w-full h-11",onClick:()=>re.info("Analytics available in Pro plan"),children:[r.jsx(cl,{className:"w-4 h-4 mr-2"}),"View Analytics"]})]})]},st.id)})}),r.jsx(mr,{open:v,onOpenChange:x,children:r.jsxs(fr,{className:`max-w-3xl max-h-[90vh] overflow-y-auto ${s?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:a,children:["Configure ",ye?.name]}),r.jsx(wr,{className:i,children:"Set up API credentials and customize agent behavior"})]}),u&&$e&&r.jsxs(wn,{defaultValue:"api",className:"w-full",children:[r.jsxs(kn,{className:"grid w-full grid-cols-3",children:[r.jsx(Tt,{value:"api",children:"API Setup"}),r.jsx(Tt,{value:"behavior",children:"Behavior"}),r.jsx(Tt,{value:"integration",children:"Integration"})]}),r.jsxs(Bt,{value:"api",className:"space-y-4 mt-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:`w-5 h-5 mt-0.5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"API Key Required"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:"You'll need an API key from OpenAI, Anthropic, or another AI provider to use this agent."})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"provider",className:a,children:"AI Provider"}),r.jsxs(sr,{defaultValue:"openai",children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"openai",children:"OpenAI (GPT-4, GPT-3.5)"}),r.jsx(Ae,{value:"anthropic",children:"Anthropic (Claude)"}),r.jsx(Ae,{value:"google",children:"Google (Gemini)"}),r.jsx(Ae,{value:"custom",children:"Custom Endpoint"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"apiKey",className:a,children:"API Key"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{id:"apiKey",type:"password",placeholder:"sk-...",defaultValue:$e.apiKey}),r.jsx(W,{variant:"outline",size:"icon",children:r.jsx(on,{className:"w-4 h-4"})})]}),r.jsx("p",{className:`text-xs ${i}`,children:"Your API key is encrypted and stored securely"})]}),u!=="calling"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"model",className:a,children:"Model"}),r.jsxs(sr,{defaultValue:$e.model,children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"gpt-4",children:"GPT-4 (Most Capable)"}),r.jsx(Ae,{value:"gpt-4-turbo",children:"GPT-4 Turbo (Fast)"}),r.jsx(Ae,{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Cost-effective)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"temperature",className:a,children:"Temperature"}),r.jsx(de,{id:"temperature",type:"number",step:"0.1",min:"0",max:"2",defaultValue:$e.temperature}),r.jsx("p",{className:`text-xs ${i}`,children:"Controls creativity (0-2)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"maxTokens",className:a,children:"Max Tokens"}),r.jsx(de,{id:"maxTokens",type:"number",defaultValue:$e.maxTokens}),r.jsx("p",{className:`text-xs ${i}`,children:"Maximum response length"})]})]})]}),u==="calling"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"voiceId",className:a,children:"Voice"}),r.jsxs(sr,{defaultValue:$e.voiceId,children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"alloy",children:"Alloy (Professional, Neutral)"}),r.jsx(Ae,{value:"echo",children:"Echo (Warm, Friendly)"}),r.jsx(Ae,{value:"fable",children:"Fable (Clear, Expressive)"}),r.jsx(Ae,{value:"onyx",children:"Onyx (Deep, Authoritative)"}),r.jsx(Ae,{value:"nova",children:"Nova (Energetic, Bright)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"language",className:a,children:"Language"}),r.jsxs(sr,{defaultValue:$e.language,children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"en-US",children:"English (US)"}),r.jsx(Ae,{value:"en-GB",children:"English (UK)"}),r.jsx(Ae,{value:"es-ES",children:"Spanish"}),r.jsx(Ae,{value:"fr-FR",children:"French"}),r.jsx(Ae,{value:"de-DE",children:"German"})]})]})]})]})]})]}),r.jsxs(Bt,{value:"behavior",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"systemPrompt",className:a,children:"System Prompt"}),r.jsx(Ps,{id:"systemPrompt",rows:6,defaultValue:$e.systemPrompt,placeholder:"Define how the AI agent should behave..."}),r.jsx("p",{className:`text-xs ${i}`,children:"This instruction guides the AI's behavior and personality"})]}),r.jsx(Ze,{className:o}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{className:a,children:"Knowledge Base"}),r.jsxs(De,{variant:"secondary",className:i,children:[$e.knowledgeBase.length," items"]})]}),r.jsx("div",{className:`p-4 rounded-lg space-y-2 ${c}`,children:$e.knowledgeBase.map((st,At)=>r.jsxs("div",{className:`flex items-start justify-between p-3 rounded border group ${o} ${d}`,children:[r.jsx("p",{className:`text-sm flex-1 ${a}`,children:st}),r.jsx(W,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>xe(At),children:r.jsx(ln,{className:"w-4 h-4"})})]},At))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{placeholder:"Add new knowledge item...",value:w,onChange:st=>N(st.target.value),onKeyPress:st=>st.key==="Enter"&&Le()}),r.jsxs(W,{onClick:Le,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add"]})]})]})]}),r.jsxs(Bt,{value:"integration",className:"space-y-4 mt-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(zs,{className:`w-5 h-5 mt-0.5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"Integration Options"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:"Connect this agent to your booking system, CRM, or other tools"})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:`p-4 rounded-lg border ${o}`,children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(qs,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Booking System"}),r.jsx("p",{className:`text-xs ${i}`,children:"Create and manage bookings"})]})]}),r.jsx(Rt,{defaultChecked:!0})]})}),r.jsx("div",{className:`p-4 rounded-lg border ${o}`,children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Xr,{className:`w-5 h-5 ${s?"text-emerald-400":"text-green-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"CRM Integration"}),r.jsx("p",{className:`text-xs ${i}`,children:"Sync customer data"})]})]}),r.jsx(Rt,{})]})}),r.jsx("div",{className:`p-4 rounded-lg border ${o}`,children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(RWe,{className:`w-5 h-5 ${s?"text-purple-400":"text-purple-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Email Notifications"}),r.jsx("p",{className:`text-xs ${i}`,children:"Send automated emails"})]})]}),r.jsx(Rt,{defaultChecked:!0})]})})]})]})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},onClick:Y,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})]})]})}),r.jsx(mr,{open:g,onOpenChange:b,children:r.jsxs(fr,{className:`max-w-2xl ${s?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:a,children:["Train ",ye?.name]}),r.jsx(wr,{className:i,children:"Upload documents and data to improve agent knowledge"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center ${s?"border-[#2a2a2a] bg-[#0a0a0a]":"border-gray-300 bg-gray-50"}`,children:[r.jsx(ll,{className:`w-12 h-12 mx-auto mb-3 ${i}`}),r.jsx("p",{className:`text-sm mb-2 ${a}`,children:"Upload Training Documents"}),r.jsx("p",{className:`text-xs mb-4 ${i}`,children:"PDF, DOCX, TXT files up to 10MB"}),r.jsxs(W,{variant:"outline",children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Browse Files"]})]}),r.jsx(Ze,{className:o}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:a,children:"Recent Training Sessions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:`p-3 rounded-lg border ${o} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jn,{className:`w-4 h-4 ${i}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"FAQ Document.pdf"}),r.jsx("p",{className:`text-xs ${i}`,children:"Uploaded 2 days ago"})]})]}),r.jsx(De,{className:s?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Trained"})]})}),r.jsx("div",{className:`p-3 rounded-lg border ${o} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jn,{className:`w-4 h-4 ${i}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${a}`,children:"Booking Policies.docx"}),r.jsx("p",{className:`text-xs ${i}`,children:"Uploaded 1 week ago"})]})]}),r.jsx(De,{className:s?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700",children:"Trained"})]})})]})]})]}),r.jsx(Us,{children:r.jsx(W,{variant:"outline",onClick:()=>b(!1),children:"Close"})})]})}),r.jsx(mr,{open:C,onOpenChange:S,children:r.jsxs(fr,{className:`max-w-2xl ${s?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:a,children:"Embed Code"}),r.jsx(wr,{className:i,children:"Copy and paste this code into your website's HTML"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-900 border-gray-700"}`,children:r.jsx("code",{className:"text-xs text-gray-100 block overflow-x-auto",children:`<!-- BookingTMS AI Chat Widget -->
<script>
  (function(w,d,s,o,f,js,fjs){
    w['BookingTMS']=o;w[o]=w[o]||function(){(w[o].q=w[o].q||[]).push(arguments)};
    js=d.createElement(s),fjs=d.getElementsByTagName(s)[0];
    js.id=o;js.src=f;js.async=1;fjs.parentNode.insertBefore(js,fjs);
  }(window,document,'script','btms','https://cdn.bookingtms.com/widget.js'));
  btms('init', {
    apiKey: 'YOUR_API_KEY_HERE',
    color: '${E}',
    position: '${$}',
    greeting: '${I}'
  });
<\/script>`})}),r.jsx("div",{className:`p-3 rounded-lg border ${s?"bg-yellow-500/10 border-yellow-500/30":"bg-yellow-50 border-yellow-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:`w-4 h-4 mt-0.5 ${s?"text-yellow-400":"text-yellow-600"}`}),r.jsx("p",{className:`text-xs ${s?"text-yellow-300":"text-yellow-800"}`,children:"Replace YOUR_API_KEY_HERE with your actual API key from Settings  API Keys"})]})})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>S(!1),children:"Close"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},onClick:ut,children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Copy Code"]})]})]})}),r.jsx(mr,{open:K,onOpenChange:se,children:r.jsxs(fr,{className:`${l} border ${o} max-w-lg`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:a,children:"AI API Configuration"}),r.jsx(wr,{className:i,children:"Configure your OpenAI API key to enable intelligent responses for the booking assistant."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-gray-700 ${s?"text-white":""}`,children:"AI Provider"}),r.jsx("div",{className:`h-11 px-3 rounded-lg border flex items-center ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:r.jsx("p",{className:a,children:"OpenAI"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`text-gray-700 ${s?"text-white":""}`,children:"Model"}),r.jsxs(sr,{value:U,onValueChange:Z,children:[r.jsx(ar,{className:`h-11 ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:s?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"gpt-4o",children:"GPT-4o (Most capable, multimodal)"}),r.jsx(Ae,{value:"gpt-4o-mini",children:"GPT-4o Mini (Affordable & intelligent)"}),r.jsx(Ae,{value:"gpt-4-turbo",children:"GPT-4 Turbo (Previous generation)"}),r.jsx(Ae,{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo (Fast & cost-effective)"}),r.jsx(Ae,{value:"o1-preview",children:"O1 Preview (Advanced reasoning)"}),r.jsx(Ae,{value:"o1-mini",children:"O1 Mini (Faster reasoning)"})]})]}),r.jsx("p",{className:`text-xs ${i}`,children:"Choose the AI model that best fits your needs and budget"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"apiKey",className:`text-gray-700 ${s?"text-white":""}`,children:"OpenAI API Key"}),r.jsx(de,{id:"apiKey",type:"password",value:F,onChange:st=>J(st.target.value),placeholder:"sk-...",className:`h-11 ${s?"bg-[#0a0a0a] border-[#2a2a2a] placeholder:text-gray-500":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx(hs,{className:`w-5 h-5 flex-shrink-0 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"Getting Started"}),r.jsxs("p",{className:`text-xs mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:["1. Visit ",r.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline",children:"OpenAI Platform"}),r.jsx("br",{}),"2. Generate an API key",r.jsx("br",{}),"3. Paste it above and click Save"]})]})]})}),r.jsx("div",{className:`p-3 rounded-lg border ${s?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:r.jsxs("p",{className:`text-xs ${i}`,children:[r.jsx("strong",{children:"Provider:"})," OpenAI",r.jsx("br",{}),r.jsx("strong",{children:"Model:"})," ",U,r.jsx("br",{}),r.jsx("strong",{children:"Endpoint:"})," https://api.openai.com/v1/chat/completions"]})})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"":"bg-blue-600 hover:bg-blue-700",onClick:tt,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save API Key"]})]})]})}),r.jsx(mr,{open:ne,onOpenChange:ie,children:r.jsxs(fr,{className:`${l} border ${o} max-w-6xl h-[90vh]`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:a,children:"Test Booking Assistant"}),r.jsx(wr,{className:i,children:"Full-page preview of the AI booking assistant widget. Test the complete booking flow."})]}),r.jsxs("div",{className:`flex-1 rounded-lg border ${s?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"} overflow-hidden relative h-[calc(90vh-160px)]`,children:[r.jsx("div",{className:"absolute inset-0 p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:`h-12 w-64 rounded-lg mb-6 ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`h-6 w-full rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-6 w-5/6 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-6 w-4/6 rounded ${s?"bg-[#2a2a2a]":"bg-gray-300"}`})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8",children:[r.jsx("div",{className:`h-32 rounded-lg ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-32 rounded-lg ${s?"bg-[#2a2a2a]":"bg-gray-300"}`}),r.jsx("div",{className:`h-32 rounded-lg ${s?"bg-[#2a2a2a]":"bg-gray-300"}`})]})]})}),r.jsx("div",{className:`absolute bottom-6 ${$==="right"?"right-6":"left-6"}`,style:{zIndex:50},children:r.jsx(yH,{chatColor:E,chatPosition:$,chatGreeting:I,isOpen:!0,onToggle:()=>{},apiKey:F,provider:"openai",model:U})})]}),r.jsx(Us,{children:r.jsx(W,{variant:"outline",onClick:()=>ie(!1),children:"Close Preview"})})]})}),r.jsx(IWe,{isOpen:be,onClose:()=>ue(!1)}),r.jsx($We,{isOpen:oe,onClose:()=>pe(!1)})]})}function RWe(t){return r.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),r.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}function MWe(){const[t,e]=j.useState([]),[s,n]=j.useState(!0),[a,i]=j.useState(null),o=async()=>{try{n(!0),i(null);const{data:m,error:f}=await pt.rpc("get_staff_with_email");if(f)throw f;e(m||[])}catch(m){console.error("Error fetching staff:",m),i(m.message),re.error("Failed to load staff members")}finally{n(!1)}},l=async(m,f)=>{try{const{data:{user:v}}=await pt.auth.getUser();if(!v)throw new Error("User not authenticated");const{data:x,error:g}=await pt.rpc("create_staff_member",{p_email:m.email,p_password:f,p_first_name:m.first_name,p_last_name:m.last_name,p_phone:m.phone,p_role:m.role,p_company:m.company||null,p_metadata:{department:m.department,permissions:m.permissions||[]}});if(g)throw g;return re.success("Staff member created successfully!"),await o(),x}catch(v){throw console.error("Error creating staff:",v),re.error(v.message||"Failed to create staff member"),v}},c=async(m,f)=>{try{const{metadata:v,email:x,...g}=f,b={...g};if(v){const{data:C}=await pt.from("user_profiles").select("metadata").eq("id",m).single();b.metadata={...C?.metadata||{},...v}}const{data:w,error:N}=await pt.from("user_profiles").update(b).eq("id",m).select().single();if(N)throw N;return re.success("Staff member updated successfully!"),await o(),w}catch(v){throw console.error("Error updating staff:",v),re.error(v.message||"Failed to update staff member"),v}},d=async m=>{try{const{error:f}=await pt.from("user_profiles").update({status:"inactive"}).eq("id",m);if(f)throw f;re.success("Staff member deactivated successfully!"),await o()}catch(f){throw console.error("Error deleting staff:",f),re.error(f.message||"Failed to delete staff member"),f}},u=async(m,f)=>{try{const v=f==="active"?"inactive":"active",{error:x}=await pt.from("user_profiles").update({status:v}).eq("id",m);if(x)throw x;re.success(`Staff member ${v==="active"?"activated":"deactivated"}`),await o()}catch(v){throw console.error("Error toggling staff status:",v),re.error(v.message||"Failed to update staff status"),v}},h=async m=>{try{const{data:f}=await pt.from("user_profiles").select("metadata").eq("id",m).single(),v={...f?.metadata||{},lastLogin:new Date().toISOString()};await pt.from("user_profiles").update({metadata:v}).eq("id",m)}catch(f){console.error("Error updating last login:",f)}};return j.useEffect(()=>{o()},[]),j.useEffect(()=>{const m=pt.channel("user_profiles_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_profiles"},f=>{console.log("Staff change detected:",f),o()}).subscribe();return()=>{pt.removeChannel(m)}},[]),{staff:t,loading:s,error:a,fetchStaff:o,createStaff:l,updateStaff:c,deleteStaff:d,toggleStaffStatus:u,updateLastLogin:h,refreshStaff:o}}var LWe=Symbol("radix.slottable");function FWe(t){const e=({children:s})=>r.jsx(r.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=LWe,e}var Hae="AlertDialog",[BWe]=fl(Hae,[Wse]),zm=Wse(),Gae=t=>{const{__scopeAlertDialog:e,...s}=t,n=zm(e);return r.jsx(ine,{...n,...s,modal:!0})};Gae.displayName=Hae;var UWe="AlertDialogTrigger",zWe=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,a=zm(s);return r.jsx(W9e,{...a,...n,ref:e})});zWe.displayName=UWe;var VWe="AlertDialogPortal",Yae=t=>{const{__scopeAlertDialog:e,...s}=t,n=zm(e);return r.jsx(one,{...n,...s})};Yae.displayName=VWe;var WWe="AlertDialogOverlay",Kae=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,a=zm(s);return r.jsx(P8,{...a,...n,ref:e})});Kae.displayName=WWe;var rv="AlertDialogContent",[qWe,HWe]=BWe(rv),GWe=FWe("AlertDialogContent"),Xae=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,children:n,...a}=t,i=zm(s),o=j.useRef(null),l=bs(e,o),c=j.useRef(null);return r.jsx(B9e,{contentName:rv,titleName:Qae,docsSlug:"alert-dialog",children:r.jsx(qWe,{scope:s,cancelRef:c,children:r.jsxs(lne,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ur(a.onOpenAutoFocus,d=>{d.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(GWe,{children:n}),r.jsx(KWe,{contentRef:o})]})})})});Xae.displayName=rv;var Qae="AlertDialogTitle",Zae=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,a=zm(s);return r.jsx(cne,{...a,...n,ref:e})});Zae.displayName=Qae;var Jae="AlertDialogDescription",eie=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,a=zm(s);return r.jsx(dne,{...a,...n,ref:e})});eie.displayName=Jae;var YWe="AlertDialogAction",tie=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,a=zm(s);return r.jsx(T8,{...a,...n,ref:e})});tie.displayName=YWe;var rie="AlertDialogCancel",sie=j.forwardRef((t,e)=>{const{__scopeAlertDialog:s,...n}=t,{cancelRef:a}=HWe(rie,s),i=zm(s),o=bs(e,a);return r.jsx(T8,{...i,...n,ref:o})});sie.displayName=rie;var KWe=({contentRef:t})=>{const e=`\`${rv}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${rv}\` by passing a \`${Jae}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rv}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},XWe=Gae,QWe=Yae,nie=Kae,ZWe=Xae,JWe=tie,eqe=sie,tqe=Zae,rqe=eie;function rp({...t}){return r.jsx(XWe,{"data-slot":"alert-dialog",...t})}function sqe({...t}){return r.jsx(QWe,{"data-slot":"alert-dialog-portal",...t})}const aie=j.forwardRef(({className:t,...e},s)=>r.jsx(nie,{ref:s,"data-slot":"alert-dialog-overlay",className:Ar("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));aie.displayName=nie.displayName;function sp({className:t,...e}){return r.jsxs(sqe,{children:[r.jsx(aie,{}),r.jsx(ZWe,{"data-slot":"alert-dialog-content",className:Ar("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function np({className:t,...e}){return r.jsx("div",{"data-slot":"alert-dialog-header",className:Ar("flex flex-col gap-2 text-center sm:text-left",t),...e})}function ap({className:t,...e}){return r.jsx("div",{"data-slot":"alert-dialog-footer",className:Ar("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function ip({className:t,...e}){return r.jsx(tqe,{"data-slot":"alert-dialog-title",className:Ar("text-lg font-semibold",t),...e})}function op({className:t,...e}){return r.jsx(rqe,{"data-slot":"alert-dialog-description",className:Ar("text-muted-foreground text-sm",t),...e})}function Ng({className:t,...e}){return r.jsx(JWe,{className:Ar(lb(),t),...e})}function lp({className:t,...e}){return r.jsx(eqe,{className:Ar(lb({variant:"outline"}),t),...e})}const nqe=t=>({id:t.id,name:`${t.first_name} ${t.last_name}`.trim(),email:t.email,phone:t.phone||"",role:t.role.charAt(0).toUpperCase()+t.role.slice(1),joinDate:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),status:t.status==="active"?"Active":"Inactive",avatar:t.metadata?.avatar,department:t.metadata?.department,permissions:t.metadata?.permissions,lastLogin:t.metadata?.lastLogin,hoursWorked:t.metadata?.hoursWorked});function aqe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#1e1e1e]":"bg-gray-50",l=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",c=e?"hover:shadow-[0_0_15px_rgba(79,70,229,0.1)]":"hover:shadow-md",{staff:d,loading:u,createStaff:h,updateStaff:m,deleteStaff:f,toggleStaffStatus:v}=MWe(),x=d.map(nqe),[g,b]=j.useState(""),[w,N]=j.useState("all"),[C,S]=j.useState("all"),[A,k]=j.useState(!1),[E,O]=j.useState(!1),[$,T]=j.useState(!1),[I,L]=j.useState(!1),[z,M]=j.useState(null),[V,B]=j.useState({name:"",email:"",phone:"",role:"Staff",department:"",status:"Active"}),[F,J]=j.useState(""),ee={total:x.length,active:x.filter(Y=>Y.status==="Active").length,managers:x.filter(Y=>Y.role==="Manager").length,staff:x.filter(Y=>Y.role==="Staff").length},q=x.filter(Y=>{const Le=Y.name.toLowerCase().includes(g.toLowerCase())||Y.email.toLowerCase().includes(g.toLowerCase()),xe=w==="all"||Y.role===w,mt=C==="all"||Y.status===C;return Le&&xe&&mt}),U=async()=>{if(!V.name||!V.email||!V.phone||!F){re.error("Please fill in all required fields including password");return}if(F.length<6){re.error("Password must be at least 6 characters");return}try{const Y=V.name.split(" "),Le=Y[0]||"",xe=Y.slice(1).join(" ")||"";await h({first_name:Le,last_name:xe,email:V.email,phone:V.phone,role:V.role?.toLowerCase(),department:V.department},F),k(!1),B({name:"",email:"",phone:"",role:"Staff",department:"",status:"Active",avatar:void 0}),J("")}catch(Y){console.error("Error adding staff:",Y)}},Z=async()=>{if(z)try{const Y=V.name?.split(" ")||[],Le=Y[0]||"",xe=Y.slice(1).join(" ")||"";await m(z.id,{first_name:Le,last_name:xe,phone:V.phone||"",role:V.role?.toLowerCase(),status:V.status?.toLowerCase()||"active",metadata:{department:V.department,avatar:V.avatar,permissions:V.permissions,hoursWorked:V.hoursWorked}}),O(!1),M(null),B({name:"",email:"",phone:"",role:"Staff",department:"",status:"Active",avatar:void 0})}catch(Y){console.error("Error updating staff:",Y)}},K=async()=>{if(z)try{await f(z.id),L(!1),M(null)}catch(Y){console.error("Error deleting staff:",Y)}},se=async Y=>{try{const Le=x.find(xe=>xe.id===Y);if(!Le)return;await v(Y,Le.status.toLowerCase())}catch(Le){console.error("Error toggling staff status:",Le)}},ne=Y=>{M(Y),B({name:Y.name,email:Y.email,phone:Y.phone,role:Y.role,department:Y.department,status:Y.status,avatar:Y.avatar}),O(!0)},ie=Y=>{M(Y),T(!0)},be=Y=>{M(Y),L(!0)},ue=Y=>Y.split(" ").map(Le=>Le[0]).join("").toUpperCase(),oe=Y=>{switch(Y){case"Admin":return e?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-red-100 text-red-700 border border-red-200";case"Manager":return e?"bg-[#4f46e5]/20 text-[#6366f1] border border-[#4f46e5]/30":"bg-blue-100 text-blue-700 border border-blue-200";case"Staff":return e?"bg-[#2a2a2a] text-[#a3a3a3] border border-[#2a2a2a]":"bg-gray-100 text-gray-700 border border-gray-200";default:return e?"bg-[#2a2a2a] text-[#a3a3a3] border border-[#2a2a2a]":"bg-gray-100 text-gray-700 border border-gray-200"}},pe=Y=>{switch(Y){case"Admin":return r.jsx(lc,{className:"w-3 h-3 mr-1"});case"Manager":return r.jsx(zs,{className:"w-3 h-3 mr-1"});case"Staff":return r.jsx(ma,{className:"w-3 h-3 mr-1"});default:return null}},ye=()=>{N("all"),S("all"),b("")},$e=w!=="all"||C!=="all"||g!=="",Se=Y=>{if(!Y)return;const Le=new FileReader;Le.onload=()=>{const xe=Le.result;B(mt=>({...mt,avatar:xe}))},Le.readAsDataURL(Y)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Staff Management",description:"Manage your team members and their roles",sticky:!0,action:r.jsx(Eu,{permissions:["staff.create"],children:r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:()=>k(!0),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Staff Member"]})})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Staff"}),r.jsx("p",{className:`text-2xl mt-1 ${s}`,children:ee.total})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Xr,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Active"}),r.jsx("p",{className:`text-2xl mt-1 ${s}`,children:ee.active})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(UE,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Managers"}),r.jsx("p",{className:`text-2xl mt-1 ${s}`,children:ee.managers})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(zs,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Staff Members"}),r.jsx("p",{className:`text-2xl mt-1 ${s}`,children:ee.staff})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(ma,{className:`w-6 h-6 ${e?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsx(he,{className:`${i} border ${a} shadow-sm`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search by name or email...",value:g,onChange:Y=>b(Y.target.value),className:"pl-10 h-11"})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsxs(sr,{value:w,onValueChange:N,children:[r.jsxs(ar,{className:"w-[140px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"Role"})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Roles"}),r.jsx(Ae,{value:"Admin",children:"Admin"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Staff",children:"Staff"})]})]}),r.jsxs(sr,{value:C,onValueChange:S,children:[r.jsxs(ar,{className:"w-[140px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"Status"})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Status"}),r.jsx(Ae,{value:"Active",children:"Active"}),r.jsx(Ae,{value:"Inactive",children:"Inactive"})]})]}),$e&&r.jsxs(W,{variant:"outline",onClick:ye,className:"h-11",children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Clear"]}),r.jsxs(W,{variant:"outline",className:"h-11",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})})}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsx(Xe,{className:s,children:"Team Members"})}),r.jsx(_e,{className:"p-0 sm:p-6 sm:pt-0",children:u?r.jsxs("div",{className:`text-center py-12 ${n}`,children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),"Loading staff members..."]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"sm:hidden space-y-3 p-4",children:q.length===0?r.jsx("div",{className:`text-center py-8 ${n}`,children:"No staff members found"}):q.map(Y=>r.jsx(he,{className:`${i} border ${a} ${c} transition-all`,children:r.jsxs(_e,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsxs(oh,{className:"w-10 h-10 flex-shrink-0",children:[r.jsx(lh,{src:Y.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-600",children:ue(Y.name)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm truncate ${s}`,children:Y.name}),r.jsxs(De,{className:`${oe(Y.role)} text-xs mt-1`,children:[pe(Y.role),Y.role]})]})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>ie(Y),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{onClick:()=>ne(Y),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx(Su,{}),r.jsxs(Dt,{onClick:()=>be(Y),className:e?"text-red-400 focus:text-red-400":"text-red-600 focus:text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(Ds,{className:"w-3 h-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:Y.email})]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(la,{className:"w-3 h-3 flex-shrink-0"}),r.jsx("span",{children:Y.phone})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:n,children:Y.department}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{checked:Y.status==="Active",onCheckedChange:()=>se(Y.id)}),r.jsx("span",{className:s,children:Y.status})]})]})]})]})},Y.id))}),r.jsx("div",{className:"hidden sm:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:`border-b ${a}`,children:[r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Member"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Contact"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Role"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Department"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Join Date"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Status"}),r.jsx("th",{className:`text-left py-3 px-4 text-sm ${n}`,children:"Actions"})]})}),r.jsx("tbody",{children:q.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:`text-center py-8 ${n}`,children:"No staff members found"})}):q.map(Y=>r.jsxs("tr",{className:`border-b ${a} ${l} transition-colors`,children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(oh,{children:[r.jsx(lh,{src:Y.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-600",children:ue(Y.name)})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:Y.name}),r.jsx("p",{className:`text-xs ${n}`,children:Y.email})]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:`flex items-center gap-2 text-xs ${n}`,children:[r.jsx(Ds,{className:"w-3 h-3"}),r.jsx("span",{children:Y.email})]}),r.jsxs("div",{className:`flex items-center gap-2 text-xs ${n}`,children:[r.jsx(la,{className:"w-3 h-3"}),r.jsx("span",{children:Y.phone})]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs(De,{className:oe(Y.role),children:[pe(Y.role),Y.role]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(Nue,{className:"w-3 h-3"}),r.jsx("span",{children:Y.department})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(qs,{className:"w-3 h-3"}),r.jsx("span",{children:Y.joinDate})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rt,{checked:Y.status==="Active",onCheckedChange:()=>se(Y.id)}),r.jsx("span",{className:`text-sm ${s}`,children:Y.status})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>ie(Y),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{onClick:()=>ne(Y),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx(Su,{}),r.jsx(Dt,{onClick:()=>se(Y.id),children:Y.status==="Active"?r.jsxs(r.Fragment,{children:[r.jsx(HY,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(UE,{className:"w-4 h-4 mr-2"}),"Activate"]})}),r.jsx(Su,{}),r.jsxs(Dt,{onClick:()=>be(Y),className:e?"text-red-400 focus:text-red-400":"text-red-600 focus:text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},Y.id))})]})})]})})]}),r.jsx(mr,{open:A,onOpenChange:k,children:r.jsxs(fr,{className:`max-w-2xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Add New Staff Member"}),r.jsx(wr,{className:n,children:"Fill in the details to add a new team member to your staff."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Profile Photo"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(oh,{className:"w-12 h-12",children:[r.jsx(lh,{src:V.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-600",children:V.name?ue(V.name):"NA"})]}),r.jsx(de,{type:"file",accept:"image/*",onChange:Y=>Se(Y.target.files?.[0]),className:"max-w-xs"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"name",className:s,children:"Full Name *"}),r.jsx(de,{id:"name",placeholder:"John Doe",value:V.name,onChange:Y=>B({...V,name:Y.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",className:s,children:"Email Address *"}),r.jsx(de,{id:"email",type:"email",placeholder:"john.doe@bookingtms.com",value:V.email,onChange:Y=>B({...V,email:Y.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",className:s,children:"Phone Number *"}),r.jsx(de,{id:"phone",placeholder:"+1 (555) 123-4567",value:V.phone,onChange:Y=>B({...V,phone:Y.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"role",className:s,children:"Role *"}),r.jsxs(sr,{value:V.role,onValueChange:Y=>B({...V,role:Y}),children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"Admin",children:"Admin"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Staff",children:"Staff"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"password",className:s,children:"Password *"}),r.jsx(de,{id:"password",type:"password",placeholder:"Minimum 6 characters",value:F,onChange:Y=>J(Y.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"department",className:s,children:"Department"}),r.jsxs(sr,{value:V.department,onValueChange:Y=>B({...V,department:Y}),children:[r.jsx(ar,{children:r.jsx(nr,{placeholder:"Select department"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"Operations",children:"Operations"}),r.jsx(Ae,{value:"Customer Service",children:"Customer Service"}),r.jsx(Ae,{value:"Game Master",children:"Game Master"}),r.jsx(Ae,{value:"Maintenance",children:"Maintenance"}),r.jsx(Ae,{value:"Sales & Marketing",children:"Sales & Marketing"}),r.jsx(Ae,{value:"IT",children:"IT"})]})]})]})]})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:U,children:"Add Staff Member"})]})]})}),r.jsx(mr,{open:E,onOpenChange:O,children:r.jsxs(fr,{className:`max-w-2xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Edit Staff Member"}),r.jsxs(wr,{className:n,children:["Update the details for ",z?.name,"."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Profile Photo"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(oh,{className:"w-12 h-12",children:[r.jsx(lh,{src:V.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-600",children:V.name?ue(V.name):"NA"})]}),r.jsx(de,{type:"file",accept:"image/*",onChange:Y=>Se(Y.target.files?.[0]),className:"max-w-xs"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-name",className:s,children:"Full Name *"}),r.jsx(de,{id:"edit-name",placeholder:"John Doe",value:V.name,onChange:Y=>B({...V,name:Y.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-email",className:s,children:"Email Address *"}),r.jsx(de,{id:"edit-email",type:"email",placeholder:"john.doe@bookingtms.com",value:V.email,onChange:Y=>B({...V,email:Y.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-phone",className:s,children:"Phone Number *"}),r.jsx(de,{id:"edit-phone",placeholder:"+1 (555) 123-4567",value:V.phone,onChange:Y=>B({...V,phone:Y.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-role",className:s,children:"Role *"}),r.jsxs(sr,{value:V.role,onValueChange:Y=>B({...V,role:Y}),children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"Admin",children:"Admin"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Staff",children:"Staff"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-department",className:s,children:"Department"}),r.jsxs(sr,{value:V.department,onValueChange:Y=>B({...V,department:Y}),children:[r.jsx(ar,{children:r.jsx(nr,{placeholder:"Select department"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"Operations",children:"Operations"}),r.jsx(Ae,{value:"Customer Service",children:"Customer Service"}),r.jsx(Ae,{value:"Game Master",children:"Game Master"}),r.jsx(Ae,{value:"Maintenance",children:"Maintenance"}),r.jsx(Ae,{value:"Sales & Marketing",children:"Sales & Marketing"}),r.jsx(Ae,{value:"IT",children:"IT"})]})]})]})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:Z,children:"Save Changes"})]})]})}),r.jsx(mr,{open:$,onOpenChange:T,children:r.jsxs(fr,{className:`max-w-2xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Staff Details"}),r.jsxs(wr,{className:n,children:["View detailed information about ",z?.name]})]}),z&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(oh,{className:"w-16 h-16",children:[r.jsx(lh,{src:z.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-100 text-blue-600",children:ue(z.name)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:s,children:z.name}),r.jsxs(De,{className:oe(z.role),children:[pe(z.role),z.role]})]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Email"}),r.jsx("p",{className:`text-sm ${s}`,children:z.email})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Phone"}),r.jsx("p",{className:`text-sm ${s}`,children:z.phone})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Department"}),r.jsx("p",{className:`text-sm ${s}`,children:z.department})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Join Date"}),r.jsx("p",{className:`text-sm ${s}`,children:z.joinDate})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Status"}),r.jsx(De,{className:z.status==="Active"?e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700":e?"bg-[#2a2a2a] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:z.status})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Last Login"}),r.jsx("p",{className:`text-sm ${s}`,children:z.lastLogin})]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Performance"}),r.jsx("div",{className:`grid grid-cols-1 gap-3 p-4 rounded-lg ${o}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-4 h-4 ${n}`}),r.jsx("span",{className:`text-sm ${s}`,children:"Hours Worked"})]}),r.jsxs("span",{className:s,children:[z.hoursWorked," hrs"]})]})})]})]}),r.jsxs(Us,{children:[r.jsxs(W,{variant:"outline",onClick:()=>{T(!1),ne(z)},children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsx(W,{variant:"outline",onClick:()=>T(!1),children:"Close"})]})]})}),r.jsx(rp,{open:I,onOpenChange:L,children:r.jsxs(sp,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(np,{children:[r.jsx(ip,{className:s,children:"Delete Staff Member"}),r.jsxs(op,{className:n,children:["Are you sure you want to delete ",z?.name,"? This action cannot be undone."]})]}),r.jsxs(ap,{children:[r.jsx(lp,{children:"Cancel"}),r.jsx(Ng,{style:{backgroundColor:e?"#ef4444":void 0},className:e?"hover:bg-red-500":"bg-red-600 hover:bg-red-700",onClick:K,children:"Delete"})]})]})})]})}const wH=["#4f46e5","#7c3aed","#10b981","#f59e0b","#ef4444","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"];function iqe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",l=e?"#2a2a2a":"#e5e7eb",c=e?"#737373":"#6b7280",d=e?"#1e1e1e":"white",u=e?"#2a2a2a":"#e5e7eb",[h,m]=j.useState(!1),[f,v]=j.useState("csv"),[x,g]=j.useState(!1),[b,w]=j.useState(["revenue","games","occupancy","summary"]),[N,C]=j.useState("last-30"),[S,A]=j.useState(!0),[k,E]=j.useState({stats:{totalRevenue:0,totalBookings:0,avgBookingValue:0,avgOccupancy:0,revenueTrend:0,bookingsTrend:0,occupancyTrend:0},revenueData:[],gamePopularityData:[],occupancyData:[]});j.useEffect(()=>{$()},[N]);const O=B=>{const F=new Date;let J=new Date;switch(B){case"last-7":J.setDate(F.getDate()-7);break;case"last-30":J.setDate(F.getDate()-30);break;case"last-90":J.setDate(F.getDate()-90);break;case"year":J=new Date(F.getFullYear(),0,1);break;case"all":J=new Date(2020,0,1);break}return{startDate:J,endDate:F}},$=async()=>{try{A(!0);const{startDate:B,endDate:F}=O(N),[J,ee,q,U]=await Promise.all([T(B,F),I(B,F),L(B,F),z(B,F)]);E({stats:J,revenueData:ee,gamePopularityData:q,occupancyData:U})}catch(B){console.error("Error loading report data:",B),re.error("Failed to load report data")}finally{A(!1)}},T=async(B,F)=>{const{data:J,error:ee}=await Wr.from("bookings").select("id, total_amount, status, created_at").gte("created_at",B.toISOString()).lte("created_at",F.toISOString());if(ee)throw ee;const q=J?.filter(Se=>Se.status!=="cancelled")||[],U=q.reduce((Se,Y)=>Se+parseFloat(Y.total_amount||"0"),0),Z=q.length,K=Z>0?U/Z:0,se=F.getTime()-B.getTime(),ne=new Date(B.getTime()-se),ie=new Date(B),{data:be}=await Wr.from("bookings").select("id, total_amount, status").gte("created_at",ne.toISOString()).lte("created_at",ie.toISOString()),ue=be?.filter(Se=>Se.status!=="cancelled")||[],oe=ue.reduce((Se,Y)=>Se+parseFloat(Y.total_amount||"0"),0),pe=ue.length,ye=oe>0?(U-oe)/oe*100:0,$e=pe>0?(Z-pe)/pe*100:0;return{totalRevenue:U,totalBookings:Z,avgBookingValue:K,avgOccupancy:73.6,revenueTrend:ye,bookingsTrend:$e,occupancyTrend:-2.1}},I=async(B,F)=>{const{data:J,error:ee}=await Wr.from("bookings").select("booking_date, total_amount, status").gte("booking_date",B.toISOString().split("T")[0]).lte("booking_date",F.toISOString().split("T")[0]);if(ee)throw ee;const q=new Map;return J?.filter(U=>U.status!=="cancelled").forEach(U=>{const K=new Date(U.booking_date).toLocaleDateString("en-US",{month:"short"});q.has(K)||q.set(K,{revenue:0,bookings:0});const se=q.get(K);se.revenue+=parseFloat(U.total_amount||"0"),se.bookings+=1}),Array.from(q.entries()).map(([U,Z])=>({month:U,revenue:Math.round(Z.revenue),bookings:Z.bookings}))},L=async(B,F)=>{const{data:J,error:ee}=await Wr.from("bookings").select(`
        game_id,
        status,
        games (name)
      `).gte("created_at",B.toISOString()).lte("created_at",F.toISOString());if(ee)throw ee;const q=new Map;return J?.filter(U=>U.status!=="cancelled").forEach(U=>{const Z=U.games?.name||"Unknown";q.set(Z,(q.get(Z)||0)+1)}),Array.from(q.entries()).map(([U,Z],K)=>({name:U,bookings:Z,fill:wH[K%wH.length]})).sort((U,Z)=>Z.bookings-U.bookings).slice(0,6)},z=async(B,F)=>{const{data:J,error:ee}=await Wr.from("bookings").select("booking_date, status").gte("booking_date",B.toISOString().split("T")[0]).lte("booking_date",F.toISOString().split("T")[0]);if(ee)throw ee;const q=new Map,U=new Map;return J?.filter(K=>K.status!=="cancelled").forEach(K=>{const ne=new Date(K.booking_date).toLocaleDateString("en-US",{weekday:"short"});q.set(ne,(q.get(ne)||0)+1),U.set(ne,(U.get(ne)||0)+1)}),["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(K=>({day:K,rate:Math.round((q.get(K)||0)*10)}))},M=()=>{g(!0);try{const B=N==="last-7"?"Last 7 days":N==="last-30"?"Last 30 days":N==="last-90"?"Last 90 days":N==="year"?"This year":"All time",F=(()=>{const{stats:J,revenueData:ee,gamePopularityData:q,occupancyData:U}=k,Z=q.length>0?q.reduce((se,ne)=>ne.bookings>se.bookings?ne:se,q[0]):{name:"N/A",bookings:0},K=U.length>0?Math.round(U.reduce((se,ne)=>se+ne.rate,0)/U.length):0;return{totalRevenue:J.totalRevenue,totalBookings:J.totalBookings,avgValue:J.avgBookingValue,topGame:Z.name,avgOccupancy:K}})();if(f==="csv"){const J=[];b.includes("summary")&&(J.push("Section: Summary Statistics"),J.push("Metric,Value"),J.push(`Total Revenue,$${F.totalRevenue}`),J.push(`Total Bookings,${F.totalBookings}`),J.push(`Average Booking Value,$${F.avgValue.toFixed(2)}`),J.push(`Top Game,${F.topGame}`),J.push(`Average Occupancy,${F.avgOccupancy}%`)),b.includes("revenue")&&(J.push("","Section: Revenue & Bookings Trend"),J.push("Month,Revenue,Bookings"),k.revenueData.forEach(K=>J.push(`${K.month},${K.revenue},${K.bookings}`))),b.includes("games")&&(J.push("","Section: Game Popularity"),J.push("Game,Bookings"),k.gamePopularityData.forEach(K=>J.push(`${K.name},${K.bookings}`))),b.includes("occupancy")&&(J.push("","Section: Weekly Occupancy"),J.push("Day,Rate (%)"),k.occupancyData.forEach(K=>J.push(`${K.day},${K.rate}`)));const ee=J.join(`
`),q=new Blob([ee],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL(q),Z=document.createElement("a");Z.href=U,Z.download=`reports_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(U)}else{const J=new zr;let ee=20;J.setFontSize(16),J.text("Reports Export",14,ee),ee+=8,J.setFontSize(11),J.text(`Range: ${B}`,14,ee),ee+=10;const q=Z=>{J.setFontSize(13),ee>275&&(J.addPage(),ee=20),J.text(Z,14,ee),ee+=6,J.setFontSize(11)},U=Z=>{ee>285&&(J.addPage(),ee=20),J.text(Z,14,ee),ee+=6};b.includes("summary")&&(q("Summary Statistics"),U(`Total Revenue: $${F.totalRevenue}`),U(`Total Bookings: ${F.totalBookings}`),U(`Average Booking Value: $${F.avgValue.toFixed(2)}`),U(`Top Game: ${F.topGame}`),U(`Average Occupancy: ${F.avgOccupancy}%`),ee+=4),b.includes("revenue")&&(q("Revenue & Bookings Trend"),k.revenueData.forEach(Z=>U(`${Z.month}: $${Z.revenue} revenue, ${Z.bookings} bookings`)),ee+=4),b.includes("games")&&(q("Game Popularity"),k.gamePopularityData.forEach(Z=>U(`${Z.name}: ${Z.bookings} bookings`)),ee+=4),b.includes("occupancy")&&(q("Weekly Occupancy"),k.occupancyData.forEach(Z=>U(`${Z.day}: ${Z.rate}%`))),J.save(`reports_${new Date().toISOString().slice(0,10)}.pdf`)}re.success(`Report exported successfully as ${f.toUpperCase()}`)}catch(B){console.error(B),re.error("Failed to export reports")}finally{g(!1),m(!1)}},V=B=>{w(F=>F.includes(B)?F.filter(J=>J!==B):[...F,B])};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Reports & Analytics",description:"Track performance and business insights",sticky:!0,action:r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[r.jsxs(sr,{value:N,onValueChange:C,children:[r.jsxs(ar,{className:"flex-1 sm:w-40 h-11",children:[r.jsx(qs,{className:"w-4 h-4 mr-2 sm:hidden"}),r.jsx(nr,{})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"last-7",children:"Last 7 days"}),r.jsx(Ae,{value:"last-30",children:"Last 30 days"}),r.jsx(Ae,{value:"last-90",children:"Last 90 days"}),r.jsx(Ae,{value:"year",children:"This year"}),r.jsx(Ae,{value:"all",children:"All time"})]})]}),r.jsx(Eu,{permissions:["reports.export"],children:r.jsx(W,{variant:"outline",onClick:()=>m(!0),className:"h-11 w-11 flex-shrink-0 p-0",size:"icon",children:r.jsx(Sn,{className:"w-4 h-4"})})})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm hover:shadow-md transition-all`,children:r.jsxs(_e,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Revenue"}),r.jsxs("p",{className:`text-2xl mt-2 ${s}`,children:["$",k.stats.totalRevenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(In,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]}),r.jsxs("div",{className:`flex items-center gap-1 text-sm ${k.stats.revenueTrend>=0?e?"text-emerald-400":"text-green-600":e?"text-red-400":"text-red-600"}`,children:[k.stats.revenueTrend>=0?r.jsx(Wn,{className:"w-4 h-4 flex-shrink-0"}):r.jsx(uN,{className:"w-4 h-4 flex-shrink-0"}),r.jsxs("span",{children:[k.stats.revenueTrend>=0?"+":"",k.stats.revenueTrend.toFixed(1),"% from last period"]})]})]})}),r.jsx(he,{className:`${i} border ${a} shadow-sm hover:shadow-md transition-all`,children:r.jsxs(_e,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Bookings"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:k.stats.totalBookings.toLocaleString()})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Xr,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]}),r.jsxs("div",{className:`flex items-center gap-1 text-sm ${k.stats.bookingsTrend>=0?e?"text-emerald-400":"text-green-600":e?"text-red-400":"text-red-600"}`,children:[k.stats.bookingsTrend>=0?r.jsx(Wn,{className:"w-4 h-4 flex-shrink-0"}):r.jsx(uN,{className:"w-4 h-4 flex-shrink-0"}),r.jsxs("span",{children:[k.stats.bookingsTrend>=0?"+":"",k.stats.bookingsTrend.toFixed(1),"% from last period"]})]})]})}),r.jsx(he,{className:`${i} border ${a} shadow-sm hover:shadow-md transition-all`,children:r.jsxs(_e,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Avg. Booking Value"}),r.jsxs("p",{className:`text-2xl mt-2 ${s}`,children:["$",k.stats.avgBookingValue.toFixed(2)]})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(mu,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]}),r.jsxs("div",{className:`flex items-center gap-1 text-sm ${e?"text-[#a3a3a3]":"text-gray-600"}`,children:[r.jsx(cl,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{children:"Per booking average"})]})]})})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pu,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:s,children:"Revenue & Bookings Trend"})]}),r.jsx(Ft,{className:`${n} mt-1`,children:"Monthly performance overview"})]}),r.jsx(De,{variant:"secondary",className:e?"bg-[#1e1e1e] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:N==="last-7"?"Last 7 days":N==="last-30"?"Last 30 days":N==="last-90"?"Last 90 days":N==="year"?"This year":"All time"})]})}),r.jsx(_e,{className:"p-6 pt-0",children:S?r.jsx("div",{className:"flex items-center justify-center h-[300px]",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):k.revenueData.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[300px] text-center",children:[r.jsx(Pu,{className:`w-12 h-12 mb-3 ${n}`}),r.jsx("p",{className:n,children:"No revenue data available for this period"})]}):r.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:r.jsx("div",{className:"min-w-[500px]",children:r.jsx(G1,{width:"100%",height:300,children:r.jsxs(Wre,{data:k.revenueData,children:[r.jsx(rw,{strokeDasharray:"3 3",stroke:l}),r.jsx(Mm,{dataKey:"month",stroke:c,fontSize:12,tick:{fill:c}}),r.jsx(Ch,{yAxisId:"left",stroke:c,fontSize:12,width:60,tick:{fill:c}}),r.jsx(Ch,{yAxisId:"right",orientation:"right",stroke:c,fontSize:12,width:40,tick:{fill:c}}),r.jsx(ec,{contentStyle:{backgroundColor:d,border:`1px solid ${u}`,borderRadius:"8px",fontSize:"12px",color:e?"white":"black"}}),r.jsx(Dx,{wrapperStyle:{fontSize:"12px",color:c}}),r.jsx(Rm,{yAxisId:"left",dataKey:"revenue",fill:e?"#4f46e5":"#2563eb",name:"Revenue ($)",radius:[4,4,0,0]}),r.jsx(Rm,{yAxisId:"right",dataKey:"bookings",fill:"#7c3aed",name:"Bookings",radius:[4,4,0,0]})]})})})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cM,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:s,children:"Game Popularity"})]}),r.jsx(Ft,{className:`${n} mt-1`,children:"Bookings by game"})]}),r.jsxs(_e,{className:"p-6 pt-0",children:[S?r.jsx("div",{className:"flex items-center justify-center h-[260px]",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):k.gamePopularityData.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[260px] text-center",children:[r.jsx(cM,{className:`w-12 h-12 mb-3 ${n}`}),r.jsx("p",{className:n,children:"No game data available"})]}):r.jsx(G1,{width:"100%",height:260,children:r.jsxs(ZMe,{children:[r.jsx(Um,{data:k.gamePopularityData,cx:"50%",cy:"50%",labelLine:!1,label:!1,outerRadius:100,dataKey:"bookings",children:k.gamePopularityData.map((B,F)=>r.jsx(O5,{fill:B.fill},`cell-${F}`))}),r.jsx(ec,{contentStyle:{backgroundColor:d,border:`1px solid ${u}`,borderRadius:"8px",fontSize:"12px",color:e?"white":"black"}})]})}),!S&&k.gamePopularityData.length>0&&r.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:k.gamePopularityData.map(B=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:B.fill}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:`text-sm truncate block ${n}`,children:B.name}),r.jsxs("span",{className:`text-xs ${n}`,children:[B.bookings," bookings"]})]})]},B.name))})]})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cl,{className:`w-5 h-5 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx(Xe,{className:s,children:"Weekly Occupancy Rate"})]}),r.jsx(Ft,{className:`${n} mt-1`,children:"Average capacity utilization"})]}),r.jsx(_e,{className:"p-6 pt-0",children:S?r.jsx("div",{className:"flex items-center justify-center h-[260px]",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):k.occupancyData.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-[260px] text-center",children:[r.jsx(cl,{className:`w-12 h-12 mb-3 ${n}`}),r.jsx("p",{className:n,children:"No occupancy data available"})]}):r.jsx(G1,{width:"100%",height:260,children:r.jsxs(QMe,{data:k.occupancyData,children:[r.jsx(rw,{strokeDasharray:"3 3",stroke:l}),r.jsx(Mm,{dataKey:"day",stroke:c,fontSize:12,tick:{fill:c}}),r.jsx(Ch,{stroke:c,fontSize:12,unit:"%",width:45,tick:{fill:c}}),r.jsx(ec,{contentStyle:{backgroundColor:d,border:`1px solid ${u}`,borderRadius:"8px",fontSize:"12px",color:e?"white":"black"}}),r.jsx(Rw,{type:"monotone",dataKey:"rate",stroke:e?"#10b981":"#16a34a",strokeWidth:3,dot:{fill:e?"#10b981":"#16a34a",r:4},activeDot:{r:6},name:"Occupancy Rate (%)"})]})})})]})]}),r.jsx(mr,{open:h,onOpenChange:m,children:r.jsxs(fr,{className:`max-h-[90vh] overflow-y-auto sm:max-w-[500px] ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Export Reports"}),r.jsx(wr,{className:n,children:"Download your analytics data in your preferred format"})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${s}`,children:"Export Format"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[r.jsxs("button",{onClick:()=>v("csv"),className:`p-4 border-2 rounded-lg text-left transition-all ${f==="csv"?e?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":e?`border-[#2a2a2a] ${o}`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Jn,{className:`w-4 h-4 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("p",{className:`text-sm ${s}`,children:"CSV File"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"Excel compatible"})]}),r.jsxs("button",{onClick:()=>v("pdf"),className:`p-4 border-2 rounded-lg text-left transition-all ${f==="pdf"?e?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":e?`border-[#2a2a2a] ${o}`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Jn,{className:`w-4 h-4 flex-shrink-0 ${e?"text-red-400":"text-red-600"}`}),r.jsx("p",{className:`text-sm ${s}`,children:"PDF File"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"Printable format"})]})]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 block ${s}`,children:"Select Reports to Include"}),r.jsxs("div",{className:"space-y-3 mt-2",children:[r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${a} ${o}`,children:[r.jsx(ku,{id:"revenue",checked:b.includes("revenue"),onCheckedChange:()=>V("revenue"),className:"mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(X,{htmlFor:"revenue",className:`text-sm cursor-pointer block ${s}`,children:"Revenue & Bookings Trend"}),r.jsx("p",{className:`text-xs mt-0.5 ${n}`,children:"Monthly performance overview with charts"})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${a} ${o}`,children:[r.jsx(ku,{id:"games",checked:b.includes("games"),onCheckedChange:()=>V("games"),className:"mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(X,{htmlFor:"games",className:`text-sm cursor-pointer block ${s}`,children:"Game Popularity Analysis"}),r.jsx("p",{className:`text-xs mt-0.5 ${n}`,children:"Booking distribution by game"})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${a} ${o}`,children:[r.jsx(ku,{id:"occupancy",checked:b.includes("occupancy"),onCheckedChange:()=>V("occupancy"),className:"mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(X,{htmlFor:"occupancy",className:`text-sm cursor-pointer block ${s}`,children:"Weekly Occupancy Rate"}),r.jsx("p",{className:`text-xs mt-0.5 ${n}`,children:"Capacity utilization by day"})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${a} ${o}`,children:[r.jsx(ku,{id:"summary",checked:b.includes("summary"),onCheckedChange:()=>V("summary"),className:"mt-0.5"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(X,{htmlFor:"summary",className:`text-sm cursor-pointer block ${s}`,children:"Summary Statistics"}),r.jsx("p",{className:`text-xs mt-0.5 ${n}`,children:"Total revenue, bookings, and occupancy"})]})]})]})]}),r.jsx("div",{className:`p-3 rounded-lg border ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("p",{className:`text-xs ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:[b.length," report",b.length!==1?"s":""," selected for export"]}),r.jsx("p",{className:`text-xs mt-1 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"File will include charts, graphs, and detailed analytics"})]})]})})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>m(!1),disabled:x,className:"w-full sm:w-auto h-11",children:"Cancel"}),r.jsx(Eu,{permissions:["reports.export"],children:r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:M,disabled:x||b.length===0,children:x?r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export ",f.toUpperCase()]})})})]})]})})]})}const oqe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function fn(t){const[e,s]=j.useState(!1),n=()=>{s(!0)},{src:a,alt:i,style:o,className:l,...c}=t;return e?r.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:o,children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:r.jsx("img",{src:oqe,alt:"Error loading image",...c,"data-original-url":a})})}):r.jsx("img",{src:a,alt:i,className:l,style:o,...c,onError:n})}const wj="/assets/701ad43cc3caf6f9abad86d954bb51aae6accad1-F6BPXkRJ.png",jH="booking_tms_media_items",JA=[{id:1,url:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=600&h=400&fit=crop",title:"Mystery Manor - Main Room",game:"Mystery Manor",uploadDate:"Oct 20, 2025",size:"2.4 MB"},{id:2,url:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=600&h=400&fit=crop",title:"Space Odyssey - Control Room",game:"Space Odyssey",uploadDate:"Oct 18, 2025",size:"3.1 MB"},{id:3,url:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=600&h=400&fit=crop",title:"Zombie Outbreak - Laboratory",game:"Zombie Outbreak",uploadDate:"Oct 15, 2025",size:"2.8 MB"},{id:4,url:"https://images.unsplash.com/photo-1511800453077-8c0afa94175f?w=600&h=400&fit=crop",title:"Treasure Hunt - Cave Entrance",game:"Treasure Hunt",uploadDate:"Oct 12, 2025",size:"2.2 MB"},{id:5,url:"https://images.unsplash.com/photo-1568515387631-8b650bbcdb90?w=600&h=400&fit=crop",title:"Prison Break - Cell Block",game:"Prison Break",uploadDate:"Oct 10, 2025",size:"2.9 MB"},{id:6,url:"https://images.unsplash.com/photo-1518133683791-0b9de5a55f34?w=600&h=400&fit=crop",title:"Wizards Quest - Magical Library",game:"Wizards Quest",uploadDate:"Oct 8, 2025",size:"3.3 MB"},{id:7,url:"https://images.unsplash.com/photo-1542332213-9b5a5a3fad35?w=600&h=400&fit=crop",title:"Mystery Manor - Secret Passage",game:"Mystery Manor",uploadDate:"Oct 5, 2025",size:"2.6 MB"},{id:8,url:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=600&h=400&fit=crop",title:"Space Odyssey - Navigation Deck",game:"Space Odyssey",uploadDate:"Oct 3, 2025",size:"3.0 MB"},{id:9,url:"https://images.unsplash.com/photo-1489514354504-1653aa90e34e?w=600&h=400&fit=crop",title:"Zombie Outbreak - Safe Room",game:"Zombie Outbreak",uploadDate:"Oct 1, 2025",size:"2.5 MB"}];function lqe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#1e1e1e]":"bg-gray-50",l=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",c=e?"hover:shadow-[0_0_15px_rgba(79,70,229,0.1)]":"hover:shadow-lg",[d,u]=j.useState(null),[h,m]=j.useState([]),[f,v]=j.useState(!1),[x,g]=j.useState(!1),[b,w]=j.useState(!1),[N,C]=j.useState([]),[S,A]=j.useState(!1),[k,E]=j.useState(!1),[O,$]=j.useState(0),[T,I]=j.useState([]),L=j.useRef(null),[z,M]=j.useState("image"),[V,B]=j.useState(""),[F,J]=j.useState("all"),[ee,q]=j.useState("grid");j.useEffect(()=>{try{const Y=localStorage.getItem(jH);if(Y){const Le=JSON.parse(Y);Array.isArray(Le)?m(Le.map(xe=>({id:Number(xe.id),url:String(xe.url),title:String(xe.title),game:String(xe.game??"Uncategorized"),uploadDate:String(xe.uploadDate),size:String(xe.size),type:xe.type==="video"?"video":"image"}))):m(JA.map(xe=>({...xe,type:"image"})))}else m(JA.map(Le=>({...Le,type:"image"})))}catch{m(JA.map(Y=>({...Y,type:"image"})))}},[]),j.useEffect(()=>{try{localStorage.setItem(jH,JSON.stringify(h))}catch{}},[h]);const U=[{id:"folder1",name:"Escape Room Photos",fileCount:45,type:"folder"},{id:"folder2",name:"Game Marketing",fileCount:23,type:"folder"},{id:"folder3",name:"Customer Events",fileCount:67,type:"folder"}],Z=[{id:"file1",name:"mystery-room-entrance.jpg",size:"3.2 MB",modified:"2 days ago",thumbnail:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=200&h=200&fit=crop",type:"file"},{id:"file2",name:"space-control-panel.jpg",size:"2.8 MB",modified:"5 days ago",thumbnail:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=200&h=200&fit=crop",type:"file"},{id:"file3",name:"zombie-lab-scene.jpg",size:"4.1 MB",modified:"1 week ago",thumbnail:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=200&h=200&fit=crop",type:"file"},{id:"file4",name:"treasure-cave.jpg",size:"3.5 MB",modified:"1 week ago",thumbnail:"https://images.unsplash.com/photo-1511800453077-8c0afa94175f?w=200&h=200&fit=crop",type:"file"},{id:"file5",name:"prison-cell-block.jpg",size:"2.9 MB",modified:"2 weeks ago",thumbnail:"https://images.unsplash.com/photo-1568515387631-8b650bbcdb90?w=200&h=200&fit=crop",type:"file"},{id:"file6",name:"wizard-library.jpg",size:"3.7 MB",modified:"2 weeks ago",thumbnail:"https://images.unsplash.com/photo-1518133683791-0b9de5a55f34?w=200&h=200&fit=crop",type:"file"}],K=h.filter(Y=>{const Le=Y.title.toLowerCase().includes(V.toLowerCase())||Y.game.toLowerCase().includes(V.toLowerCase()),xe=F==="all"||Y.game===F;return Le&&xe}),se=Y=>{const Le=h.find(xe=>Number(xe.id)===Number(Y));if(m(xe=>xe.filter(mt=>Number(mt.id)!==Number(Y))),Le&&typeof Le.url=="string"&&Le.url.startsWith("blob:"))try{URL.revokeObjectURL(Le.url)}catch{}re.success("Media deleted")},ne=async Y=>{const Le=Y.title.includes(".")?Y.title:Y.type==="video"?`${Y.title.replace(/\s+/g,"_")}.mp4`:`${Y.title.replace(/\s+/g,"_")}.jpg`;try{let xe=Y.url,mt=null;if(!xe.startsWith("blob:")){const ut=await(await fetch(xe)).blob();xe=URL.createObjectURL(ut),mt=xe}const Ue=document.createElement("a");Ue.href=xe,Ue.download=Le,document.body.appendChild(Ue),Ue.click(),Ue.remove(),mt&&setTimeout(()=>URL.revokeObjectURL(mt),1e3),re.success("Download started")}catch{window.open(Y.url,"_blank"),re.info("Opened in new tab")}},ie=()=>{setTimeout(()=>{v(!0),g(!1),re.success("Google Drive connected successfully")},1500)},be=()=>{v(!1),re.success("Google Drive disconnected")},ue=Y=>{C(Le=>Le.includes(Y)?Le.filter(xe=>xe!==Y):[...Le,Y])},oe=()=>{if(N.length===0){re.error("Please select at least one file to import");return}re.success(`Importing ${N.length} file${N.length>1?"s":""} from Google Drive`),w(!1),C([])},pe=()=>{A(!0)},ye=()=>{L.current?.click()},$e=Y=>{const xe=Array.from(Y.target?.files||[]).filter(mt=>z==="image"?mt.type?.startsWith("image/"):mt.type?.startsWith("video/"));I(xe)},Se=()=>{if(T.length===0){re.error("Please select files to upload");return}E(!0),$(0);const Y=setInterval(()=>{$(Le=>{if(Le>=100){clearInterval(Y);const mt=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ue=h.length?Math.max(...h.map(ut=>Number(ut.id))):0,xt=T.map((ut,Ot)=>({id:Ue+Ot+1,url:URL.createObjectURL(ut),title:ut.name,game:"Uncategorized",uploadDate:mt,size:`${(ut.size/(1024*1024)).toFixed(1)} MB`,type:ut.type?.startsWith("video/")?"video":"image"}));return m(ut=>[...xt,...ut]),setTimeout(()=>{E(!1),A(!1),$(0),I([]),re.success("Photos and videos uploaded successfully")},500),100}return Le+10})},200)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Media Library",description:"Manage photos and media for your games",sticky:!0,action:r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[f?r.jsxs(W,{variant:"outline",className:`h-11 flex-1 sm:flex-initial ${e?"border-emerald-500/30 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400":"border-green-200 bg-green-50 hover:bg-green-100"}`,onClick:()=>w(!0),children:[r.jsx("img",{src:wj,alt:"Google Drive",className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Import from Drive"})]}):r.jsxs(W,{variant:"outline",onClick:()=>g(!0),className:"h-11 flex-1 sm:flex-initial",children:[r.jsx(Yue,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Connect Google Drive"})]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:pe,children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Upload Media"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Photos"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:h.length})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Bc,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Uploaded This Month"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:"24"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Wn,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Storage Used"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:"124.5 MB"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(MY,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})})]}),f&&r.jsx(he,{className:`border shadow-sm ${e?"bg-emerald-500/10 border-emerald-500/30":"bg-green-50 border-green-200"}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:wj,alt:"Google Drive",className:"w-8 h-8 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:`text-sm ${e?"text-emerald-300":"text-green-900"}`,children:"Google Drive Connected"}),r.jsx(Lt,{className:`w-4 h-4 ${e?"text-emerald-400":"text-green-600"}`})]}),r.jsx("p",{className:`text-xs ${e?"text-emerald-400/70":"text-green-700"}`,children:"Access your photos directly from Google Drive"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>w(!0),children:[r.jsx(RS,{className:"w-4 h-4 mr-2"}),"Browse Drive"]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:be,className:e?"text-red-400 hover:text-red-300 hover:bg-red-500/10":"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Disconnect"})]})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search photos by title or game...",value:V,onChange:Y=>B(Y.target.value),className:"pl-10 h-11"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(sr,{value:F,onValueChange:J,children:[r.jsxs(ar,{className:"w-[160px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"All Games"})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Games"}),r.jsx(Ae,{value:"Mystery Manor",children:"Mystery Manor"}),r.jsx(Ae,{value:"Space Odyssey",children:"Space Odyssey"}),r.jsx(Ae,{value:"Zombie Outbreak",children:"Zombie Outbreak"}),r.jsx(Ae,{value:"Treasure Hunt",children:"Treasure Hunt"}),r.jsx(Ae,{value:"Prison Break",children:"Prison Break"}),r.jsx(Ae,{value:"Wizards Quest",children:"Wizards Quest"}),r.jsx(Ae,{value:"Uncategorized",children:"Uncategorized"})]})]}),r.jsxs("div",{className:"flex gap-1 border rounded-lg p-1",children:[r.jsx(W,{variant:ee==="grid"?"default":"ghost",size:"icon",onClick:()=>q("grid"),className:"h-8 w-8",style:{backgroundColor:ee==="grid"&&e?"#4f46e5":void 0},children:r.jsx(rI,{className:"w-4 h-4"})}),r.jsx(W,{variant:ee==="list"?"default":"ghost",size:"icon",onClick:()=>q("list"),className:"h-8 w-8",style:{backgroundColor:ee==="list"&&e?"#4f46e5":void 0},children:r.jsx(J4,{className:"w-4 h-4"})})]})]})]})})}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:s,children:"Photo Gallery"}),r.jsxs(De,{variant:"secondary",className:e?"bg-[#1e1e1e] text-[#a3a3a3]":"bg-gray-100 text-gray-700",children:[K.length," photos"]})]})}),r.jsx(_e,{className:"p-6 pt-0",children:K.length===0?r.jsxs("div",{className:`text-center py-12 ${n}`,children:[r.jsx(Bc,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No photos found"})]}):ee==="grid"?r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(Y=>r.jsxs("div",{className:`group relative rounded-lg overflow-hidden border ${a} ${i} ${c} transition-all cursor-pointer`,children:[r.jsxs("div",{className:`aspect-video relative overflow-hidden ${o}`,children:[Y.type==="video"?r.jsx("video",{src:Y.url,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",muted:!0,playsInline:!0,preload:"metadata"}):r.jsx(fn,{src:Y.url,alt:Y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center",children:r.jsx(W,{variant:"secondary",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white",onClick:()=>u(Y),children:r.jsx(ys,{className:"w-4 h-4"})})})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`text-sm truncate ${s}`,children:Y.title}),r.jsx(De,{variant:"secondary",className:`mt-1 text-xs ${e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-50 text-blue-700"}`,children:Y.game})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>u(Y),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Full Size"]}),r.jsxs(Dt,{onClick:()=>ne(Y),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download"]}),r.jsxs(Dt,{onClick:()=>se(Y.id),className:e?"text-red-400":"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),r.jsxs("div",{className:`flex items-center justify-between text-xs ${n}`,children:[r.jsx("span",{children:Y.uploadDate}),r.jsx("span",{children:Y.size})]})]})]},Y.id))}):r.jsx("div",{className:"space-y-2",children:K.map(Y=>r.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${a} ${l} transition-all cursor-pointer`,children:[r.jsx("div",{className:`w-20 h-20 rounded overflow-hidden flex-shrink-0 ${o}`,children:Y.type==="video"?r.jsx("video",{src:Y.url,className:"w-full h-full object-cover",muted:!0,playsInline:!0,preload:"metadata"}):r.jsx(fn,{src:Y.url,alt:Y.title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`text-sm ${s}`,children:Y.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx(De,{variant:"secondary",className:`text-xs ${e?"bg-[#4f46e5]/20 text-[#6366f1]":"bg-blue-50 text-blue-700"}`,children:Y.game}),r.jsx("span",{className:`text-xs ${n}`,children:Y.uploadDate}),r.jsx("span",{className:`text-xs ${n}`,children:Y.size})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(W,{variant:"ghost",size:"icon",onClick:()=>u(Y),children:r.jsx(ys,{className:"w-4 h-4"})}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>ne(Y),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download"]}),r.jsxs(Dt,{onClick:()=>se(Y.id),className:e?"text-red-400":"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]},Y.id))})})]}),r.jsx(mr,{open:!!d,onOpenChange:()=>u(null),children:r.jsxs(fr,{className:`max-w-4xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:d?.title}),r.jsxs(wr,{className:n,children:[d?.game,"  ",d?.uploadDate,"  ",d?.size]})]}),d&&r.jsx("div",{className:"mt-4",children:r.jsx(fn,{src:d.url,alt:d.title,className:"w-full h-auto rounded-lg"})}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>u(null),children:"Close"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:()=>d&&ne(d),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})}),r.jsx(mr,{open:x,onOpenChange:g,children:r.jsxs(fr,{className:`max-w-md ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Connect Google Drive"}),r.jsx(wr,{className:n,children:"Connect your Google Drive to easily import and manage photos"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"flex items-center justify-center py-6",children:r.jsx("img",{src:wj,alt:"Google Drive",className:"w-20 h-20"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${e?"bg-[#4f46e5]/10":"bg-blue-50"}`,children:[r.jsx(Lt,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Access Your Photos"}),r.jsx("p",{className:`text-xs mt-0.5 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"Browse and import photos directly from your Google Drive"})]})]}),r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${e?"bg-[#4f46e5]/10":"bg-blue-50"}`,children:[r.jsx(Lt,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Automatic Sync"}),r.jsx("p",{className:`text-xs mt-0.5 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"Keep your media library in sync with your Drive folders"})]})]}),r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${e?"bg-[#4f46e5]/10":"bg-blue-50"}`,children:[r.jsx(Lt,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Save Storage Space"}),r.jsx("p",{className:`text-xs mt-0.5 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"Reference files from Drive without using local storage"})]})]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{className:`p-3 rounded-lg text-xs ${o} ${n}`,children:[r.jsx("p",{className:"mb-2",children:"By connecting Google Drive, you authorize BookingTMS to:"}),r.jsxs("ul",{className:"space-y-1 ml-4 list-disc",children:[r.jsx("li",{children:"View and manage files in your Google Drive"}),r.jsx("li",{children:"Upload files to your Google Drive"}),r.jsx("li",{children:"Access file metadata and permissions"})]})]})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:ie,children:[r.jsx("img",{src:wj,alt:"",className:"w-4 h-4 mr-2"}),"Connect Google Drive"]})]})]})}),r.jsx(mr,{open:b,onOpenChange:w,children:r.jsxs(fr,{className:`max-w-3xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Import from Google Drive"}),r.jsx(wr,{className:n,children:"Select photos from your Google Drive to import into your media library"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:`text-sm mb-3 flex items-center gap-2 ${s}`,children:[r.jsx(RS,{className:"w-4 h-4"}),"Folders"]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:U.map(Y=>r.jsxs("button",{className:`p-3 border rounded-lg transition-all text-left ${e?"border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/10":"border-gray-200 hover:border-blue-600 hover:bg-blue-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(RS,{className:`w-5 h-5 ${n}`}),r.jsx("p",{className:`text-sm truncate ${s}`,children:Y.name})]}),r.jsxs("p",{className:`text-xs ${n}`,children:[Y.fileCount," files"]})]},Y.id))})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-sm mb-3 flex items-center gap-2 ${s}`,children:[r.jsx(xhe,{className:"w-4 h-4"}),"Recent Files"]}),r.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Z.map(Y=>r.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all ${N.includes(Y.id)?e?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":e?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:bg-gray-50"}`,onClick:()=>ue(Y.id),children:[r.jsx(ku,{checked:N.includes(Y.id),onCheckedChange:()=>ue(Y.id)}),r.jsx("div",{className:`w-16 h-16 rounded overflow-hidden flex-shrink-0 ${o}`,children:r.jsx(fn,{src:Y.thumbnail,alt:Y.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm truncate ${s}`,children:Y.name}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("span",{className:`text-xs ${n}`,children:Y.size}),r.jsxs("span",{className:`text-xs ${n}`,children:["Modified ",Y.modified]})]})]}),r.jsx($n,{className:`w-4 h-4 flex-shrink-0 ${n}`})]},Y.id))})]}),N.length>0&&r.jsx("div",{className:`p-3 rounded-lg border ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:[N.length," file",N.length>1?"s":""," selected"]})})]}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>{w(!1),C([])},children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:oe,disabled:N.length===0,children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Import ",N.length>0?`(${N.length})`:""]})]})]})}),r.jsx(mr,{open:S,onOpenChange:A,children:r.jsxs(fr,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Upload Photos & Videos"}),r.jsx(wr,{className:n,children:"Upload media files from your device to your library"})]}),r.jsx("div",{className:"space-y-4",children:k?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(ll,{className:`w-12 h-12 mx-auto mb-3 ${e?"text-[#6366f1]":"text-blue-600"} animate-pulse`}),r.jsx("p",{className:`text-sm ${s}`,children:"Uploading files..."}),r.jsxs("p",{className:`text-xs mt-1 ${n}`,children:[O,"% complete"]})]}),r.jsx(vm,{value:O,className:"w-full"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${e?"border-[#2a2a2a] hover:border-[#4f46e5] bg-[#0a0a0a]":"border-gray-300 hover:border-blue-500 bg-gray-50"}`,onClick:ye,children:[r.jsx(ll,{className:`w-12 h-12 mx-auto mb-3 ${n}`}),r.jsx("p",{className:`text-sm mb-1 ${s}`,children:"Drag and drop files here or click to browse"}),r.jsx("p",{className:`text-xs ${n}`,children:"Supports: JPG, PNG, GIF, MP4, MOV (Max 50MB per file)"}),r.jsxs(W,{className:"mt-4",style:{backgroundColor:e?"#4f46e5":void 0},onClick:ye,children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Choose Files"]}),r.jsx("input",{ref:L,type:"file",multiple:!0,accept:z==="image"?"image/*":"video/*",className:"hidden",onChange:$e})]}),T.length>0&&r.jsxs("div",{className:`p-3 rounded-lg border ${e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("p",{className:`text-sm ${s}`,children:[T.length," file(s) selected"]}),r.jsx("ul",{className:"text-xs mt-2 space-y-1",children:T.map(Y=>r.jsxs("li",{className:n,children:[Y.name,"  ",(Y.size/(1024*1024)).toFixed(1)," MB"]},`${Y.name}-${Y.size}`))}),r.jsx("div",{className:"flex gap-2 mt-2",children:r.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>I([]),children:[r.jsx(Is,{className:"w-4 h-4 mr-1"})," Clear"]})})]}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-2 ${s}`,children:"File Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[r.jsxs("button",{className:`p-3 border-2 rounded-lg text-left ${z==="image"?e?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":e?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>M("image"),"aria-pressed":z==="image",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Bc,{className:`w-4 h-4 ${z==="image"?e?"text-[#6366f1]":"text-blue-600":n}`}),r.jsx("p",{className:`text-sm ${s}`,children:"Photos"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"JPG, PNG, GIF"})]}),r.jsxs("button",{className:`p-3 border-2 rounded-lg text-left ${z==="video"?e?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":e?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>M("video"),"aria-pressed":z==="video",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Jn,{className:`w-4 h-4 ${z==="video"?e?"text-[#6366f1]":"text-blue-600":n}`}),r.jsx("p",{className:`text-sm ${s}`,children:"Videos"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"MP4, MOV, AVI"})]})]})]}),f&&r.jsx("div",{className:`p-3 rounded-lg border ${e?"bg-emerald-500/10 border-emerald-500/30":"bg-green-50 border-green-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:`w-4 h-4 mt-0.5 ${e?"text-emerald-400":"text-green-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${e?"text-emerald-300":"text-green-900"}`,children:"Google Drive Connected"}),r.jsx("p",{className:`text-xs mt-1 ${e?"text-emerald-400/70":"text-green-700"}`,children:"Files will be automatically backed up to your Google Drive"})]})]})})]})}),r.jsxs(Us,{className:"gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>A(!1),disabled:k,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"":"bg-blue-600 hover:bg-blue-700",onClick:Se,disabled:k,children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Upload Files"]})]})]})})]})}const cqe=[{value:"liability",label:"Liability Waiver",icon:""},{value:"minor",label:"Minor Consent",icon:""},{value:"photo",label:"Photo/Video Release",icon:""},{value:"medical",label:"Medical Disclosure",icon:""},{value:"health",label:"Health Screening",icon:""},{value:"custom",label:"Custom",icon:""}],dqe=["Full Name","Date of Birth","Email","Phone","Address","Emergency Contact","Parent/Guardian Name","Parent Email","Parent Phone","Medical Conditions","Allergies","Medications","Signature","Date"];function uqe({template:t,isOpen:e,onClose:s,onSave:n}){const{theme:a}=Nr(),i=a==="dark",o=i?"text-white":"text-gray-900",l=i?"text-[#a3a3a3]":"text-gray-600",c=i?"border-[#2a2a2a]":"border-gray-200",d=i?"bg-[#1e1e1e]":"bg-gray-50",[u,h]=j.useState({id:t?.id||`TPL-${String(Date.now()).slice(-3)}`,name:t?.name||"",description:t?.description||"",type:t?.type||"liability",content:t?.content||"",status:t?.status||"draft",requiredFields:t?.requiredFields||["Full Name","Email","Signature"],assignedGames:t?.assignedGames||[],createdDate:t?.createdDate||new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),lastModified:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),usageCount:t?.usageCount||0,qrCodeEnabled:t?.qrCodeEnabled!==void 0?t.qrCodeEnabled:!0,qrCodeSettings:t?.qrCodeSettings||{includeInEmail:!0,includeBookingLink:!0,customMessage:"Scan this QR code to complete your waiver"}}),[m,f]=j.useState("basic"),v=g=>{u.requiredFields.includes(g)?h({...u,requiredFields:u.requiredFields.filter(b=>b!==g)}):h({...u,requiredFields:[...u.requiredFields,g]})},x=()=>{if(!u.name||!u.description){re.error("Please fill in all required fields");return}n(u),s()};return r.jsx(mr,{open:e,onOpenChange:s,children:r.jsxs(fr,{className:`max-w-4xl max-h-[90vh] overflow-y-auto ${i?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:o,children:t?"Edit Waiver Template":"Create New Waiver Template"}),r.jsx(wr,{className:l,children:t?"Update template details and content":"Create a new waiver template for your customers"})]}),r.jsxs(wn,{value:m,onValueChange:f,children:[r.jsxs(kn,{className:"w-full",children:[r.jsxs(Tt,{value:"basic",className:"flex-1",children:[r.jsx(ul,{className:"w-4 h-4 mr-2"}),"Basic Info"]}),r.jsxs(Tt,{value:"content",className:"flex-1",children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Content"]}),r.jsxs(Tt,{value:"fields",className:"flex-1",children:[r.jsx(lfe,{className:"w-4 h-4 mr-2"}),"Fields"]})]}),r.jsx(Bt,{value:"basic",className:"space-y-4 mt-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"name",className:o,children:"Template Name *"}),r.jsx(de,{id:"name",value:u.name,onChange:g=>h({...u,name:g.target.value}),placeholder:"e.g., Standard Liability Waiver",className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"description",className:o,children:"Description *"}),r.jsx(Ps,{id:"description",value:u.description,onChange:g=>h({...u,description:g.target.value}),placeholder:"Brief description of this waiver template",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"type",className:o,children:"Template Type"}),r.jsxs(sr,{value:u.type,onValueChange:g=>h({...u,type:g}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsx(ir,{className:i?"bg-[#161616] border-[#2a2a2a]":"",children:cqe.map(g=>r.jsx(Ae,{value:g.value,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{children:g.icon}),g.label]})},g.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"status",className:o,children:"Status"}),r.jsxs(sr,{value:u.status,onValueChange:g=>h({...u,status:g}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{className:i?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"active",children:"Active"}),r.jsx(Ae,{value:"inactive",children:"Inactive"}),r.jsx(Ae,{value:"draft",children:"Draft"})]})]})]})]}),r.jsx(Ze,{className:c}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(z0,{className:`w-5 h-5 ${i?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(X,{className:`text-base ${o}`,children:"QR Code Settings"})]}),r.jsx("div",{className:`p-4 rounded-lg border ${i?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${i?"text-[#e0e7ff]":"text-blue-900"}`,children:"QR Code for Waiver Forms"}),r.jsx("p",{className:`text-xs mt-1 ${i?"text-[#c7d2fe]":"text-blue-700"}`,children:"When enabled, customers will receive a QR code in their booking confirmation email that links directly to this waiver form."})]})]})}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${c} ${d}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${u.qrCodeEnabled?i?"bg-emerald-500/20":"bg-green-100":i?"bg-[#2a2a2a]":"bg-gray-100"}`,children:r.jsx(z0,{className:`w-5 h-5 ${u.qrCodeEnabled?i?"text-emerald-400":"text-green-600":i?"text-[#737373]":"text-gray-400"}`})}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"qr-enabled",className:`text-sm ${o} cursor-pointer`,children:"Enable QR Code"}),r.jsx("p",{className:`text-xs ${l}`,children:"Include QR code in booking confirmation emails"})]})]}),r.jsx(Rt,{id:"qr-enabled",checked:u.qrCodeEnabled,onCheckedChange:g=>h({...u,qrCodeEnabled:g})})]}),u.qrCodeEnabled&&r.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-blue-500",children:[r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${c} ${d}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:`w-4 h-4 ${l}`}),r.jsx(X,{htmlFor:"include-email",className:`text-sm ${o} cursor-pointer`,children:"Include in Email"})]}),r.jsx(Rt,{id:"include-email",checked:u.qrCodeSettings.includeInEmail,onCheckedChange:g=>h({...u,qrCodeSettings:{...u.qrCodeSettings,includeInEmail:g}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"qr-message",className:o,children:"Custom Message"}),r.jsx(de,{id:"qr-message",value:u.qrCodeSettings.customMessage,onChange:g=>h({...u,qrCodeSettings:{...u.qrCodeSettings,customMessage:g.target.value}}),placeholder:"Scan this QR code to complete your waiver",className:"h-11"}),r.jsx("p",{className:`text-xs ${l}`,children:"This message will appear above the QR code in the email"})]})]})]})]})}),r.jsxs(Bt,{value:"content",className:"space-y-4 mt-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${i?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${i?"text-[#e0e7ff]":"text-blue-900"}`,children:"Waiver Content"}),r.jsxs("p",{className:`text-xs mt-1 ${i?"text-[#c7d2fe]":"text-blue-700"}`,children:["Write the full text of your waiver. You can use ","{","FIELD_NAME","}"," placeholders for dynamic fields."]})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"content",className:o,children:"Waiver Text"}),r.jsx(Ps,{id:"content",value:u.content,onChange:g=>h({...u,content:g.target.value}),placeholder:"Enter the full waiver text here...",rows:15,className:"font-mono text-sm"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(De,{variant:"secondary",className:"cursor-pointer",children:["{","FULL_NAME","}"]}),r.jsxs(De,{variant:"secondary",className:"cursor-pointer",children:["{","EMAIL","}"]}),r.jsxs(De,{variant:"secondary",className:"cursor-pointer",children:["{","DATE","}"]}),r.jsxs(De,{variant:"secondary",className:"cursor-pointer",children:["{","SIGNATURE","}"]})]})]}),r.jsxs(Bt,{value:"fields",className:"space-y-4 mt-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${i?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${i?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${i?"text-[#e0e7ff]":"text-blue-900"}`,children:"Required Fields"}),r.jsx("p",{className:`text-xs mt-1 ${i?"text-[#c7d2fe]":"text-blue-700"}`,children:"Select which fields customers must fill out when signing this waiver"})]})]})}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:dqe.map(g=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${c} ${d}`,children:[r.jsx(X,{htmlFor:`field-${g}`,className:`text-sm ${o} cursor-pointer`,children:g}),r.jsx(Rt,{id:`field-${g}`,checked:u.requiredFields.includes(g),onCheckedChange:()=>v(g)})]},g))}),r.jsx(Ze,{className:c}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:o,children:["Selected Fields (",u.requiredFields.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.requiredFields.map(g=>r.jsxs(De,{className:i?"bg-[#4f46e5]/20 text-[#6366f1] border-0":"bg-blue-100 text-blue-700 border-0",children:[g,r.jsx(Is,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>v(g)})]},g))})]})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:s,className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:i?"#4f46e5":void 0},className:`h-11 ${i?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:x,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),t?"Update Template":"Create Template"]})]})]})})}function hqe({template:t,waiver:e,isOpen:s,onClose:n}){const{theme:a}=Nr(),i=a==="dark",o=i?"text-white":"text-gray-900",l=i?"text-[#a3a3a3]":"text-gray-600",c=i?"border-[#2a2a2a]":"border-gray-200",d=i?"bg-[#161616]":"bg-white",u=i?"bg-[#1e1e1e]":"bg-gray-50",h=()=>{try{if(!e){re.info("No waiver record to download");return}const x=new zr,g=15;let b=20;x.setFont("helvetica","normal"),x.setFontSize(16),x.text("Waiver Record",g,b),b+=10,x.setFontSize(11),[`Waiver ID: ${e.id}`,`Template: ${e.templateName}`,`Customer: ${e.customer}`,`Email: ${e.email}`,`Game: ${e.game}`,`Status: ${e.status}`,`Signed Date: ${e.signedDate}`].forEach(S=>{x.text(S,g,b),b+=8}),b+=4,x.setFontSize(12),x.text("Waiver Content",g,b),b+=6,x.setFontSize(11);const N=t?.content||e?.content||"(No content provided)";x.splitTextToSize(N,180).forEach(S=>{b>280&&(x.addPage(),b=20),x.text(S,g,b),b+=7}),x.save(`${e.id}.pdf`),re.success("Downloaded waiver PDF")}catch(x){console.error("Failed to download waiver",x),re.error("Failed to download waiver")}},m=()=>{re.success("Sending waiver via email...")},f=e||t,v=!!e;return r.jsx(mr,{open:s,onOpenChange:n,children:r.jsxs(fr,{className:`max-w-4xl max-h-[90vh] overflow-y-auto ${i?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(wr,{className:"sr-only",children:v?"View and manage signed waiver record with participant information and digital signature.":"Preview waiver template content, terms, and required fields."}),r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx(pr,{className:o,children:v?"Waiver Record":"Template Preview"}),f&&r.jsx("p",{className:`text-sm mt-1 ${l}`,children:v?f.templateName:f.name})]}),v&&r.jsxs(De,{className:e.status==="signed"?i?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0":i?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),e.status]})]})]}),r.jsxs("div",{className:"space-y-6",children:[v&&e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`p-4 rounded-lg border ${c} ${u}`,children:[r.jsx("h3",{className:`text-sm mb-3 ${o}`,children:"Customer Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(ma,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Customer"}),r.jsx("p",{className:o,children:e.customer})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Email"}),r.jsx("p",{className:o,children:e.email})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(Na,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Game"}),r.jsx("p",{className:o,children:e.game})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Signed Date"}),r.jsx("p",{className:o,children:e.signedDate})]})]})]})]}),r.jsx(Ze,{className:c})]}),!v&&t&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`p-4 rounded-lg border ${c} ${u}`,children:[r.jsx("h3",{className:`text-sm mb-3 ${o}`,children:"Template Details"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Type"}),r.jsx("p",{className:`text-sm ${o}`,children:t.type})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Status"}),r.jsx(De,{className:t.status==="active"?i?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0":i?"bg-[#2a2a2a] text-[#a3a3a3] border-0":"bg-gray-100 text-gray-700 border-0",children:t.status})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Created"}),r.jsx("p",{className:`text-sm ${o}`,children:t.createdDate})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${l}`,children:"Last Modified"}),r.jsx("p",{className:`text-sm ${o}`,children:t.lastModified})]})]})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${c} ${u}`,children:[r.jsxs("h3",{className:`text-sm mb-3 ${o}`,children:["Required Fields (",t.requiredFields?.length||0,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.requiredFields?.map(x=>r.jsx(De,{variant:"secondary",className:i?"bg-[#2a2a2a] text-[#a3a3a3] border-0":"",children:x},x))})]}),r.jsx(Ze,{className:c})]}),r.jsxs("div",{className:`p-6 rounded-lg border ${c} ${d}`,children:[r.jsx("h3",{className:`text-sm mb-4 ${o}`,children:"Waiver Content"}),r.jsx("div",{className:`prose max-w-none ${i?"prose-invert":""}`,children:f?.content?r.jsx("div",{className:`whitespace-pre-wrap text-sm ${o}`,children:f.content}):r.jsxs("div",{className:`p-8 text-center ${u} rounded-lg`,children:[r.jsx(Jn,{className:`w-12 h-12 mx-auto mb-2 ${l}`}),r.jsx("p",{className:l,children:"No content available"}),r.jsx("p",{className:`text-xs mt-1 ${l}`,children:v?"This waiver has no content":"Edit this template to add content"})]})})]}),v&&e?.status==="signed"&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:c}),r.jsxs("div",{className:`p-4 rounded-lg border ${c} ${u}`,children:[r.jsx("h3",{className:`text-sm mb-3 ${o}`,children:"Signature"}),r.jsx("div",{className:`p-4 rounded border ${c} ${d}`,children:r.jsxs("p",{className:`italic ${l}`,children:["Signed electronically by ",e.customer," on ",e.signedDate]})})]})]})]}),r.jsx(Us,{children:r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[v&&r.jsxs(r.Fragment,{children:[r.jsxs(W,{variant:"outline",onClick:m,className:"h-11",children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Send Email"]}),r.jsxs(W,{variant:"outline",onClick:h,className:"h-11",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]}),r.jsx(W,{variant:v?"default":"outline",onClick:n,style:{backgroundColor:i&&!v?void 0:i?"#4f46e5":void 0},className:`h-11 ${i&&!v?"":i?"text-white hover:bg-[#4338ca]":v?"bg-blue-600 hover:bg-blue-700":""}`,children:"Close"})]})})]})})}const eE=[{id:"ATT-001",name:"Sarah Johnson",email:"sarah.j@email.com",phone:"+1 (555) 123-4567",waiverStatus:"signed",waiverDate:"Oct 29, 2025",isMinor:!1},{id:"ATT-002",name:"Mike Chen",email:"mike.c@email.com",phone:"+1 (555) 234-5678",waiverStatus:"signed",waiverDate:"Oct 29, 2025",isMinor:!1},{id:"ATT-003",name:"Emily Davis",email:"emily.d@email.com",phone:"+1 (555) 345-6789",waiverStatus:"pending",waiverDate:"-",isMinor:!1},{id:"ATT-004",name:"Tommy Davis",email:"parent@email.com",phone:"+1 (555) 345-6789",waiverStatus:"signed",waiverDate:"Oct 29, 2025",isMinor:!0},{id:"ATT-005",name:"Alex Thompson",email:"alex.t@email.com",phone:"+1 (555) 456-7890",waiverStatus:"pending",waiverDate:"-",isMinor:!1}];function mqe({booking:t,isOpen:e,onClose:s}){const{theme:n}=Nr(),a=n==="dark",i=a?"text-white":"text-gray-900",o=a?"text-[#a3a3a3]":"text-gray-600",l=a?"border-[#2a2a2a]":"border-gray-200",c=a?"bg-[#1e1e1e]":"bg-gray-50",d=a?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[u,h]=j.useState(""),[m,f]=j.useState("all"),[v,x]=j.useState([]),[g,b]=j.useState(!0);j.useEffect(()=>{e&&w()},[e,t]);const w=async()=>{try{b(!0);const{data:$,error:T}=await Wr.from("waivers").select("*").order("created_at",{ascending:!1});if(T){console.error("Error fetching attendees:",T),x(eE);return}if($&&$.length>0){const I=$.map(L=>({id:L.waiver_code||L.id,name:L.participant_name||"Unknown",email:L.participant_email||"",phone:L.participant_phone||"",waiverStatus:L.status==="signed"?"signed":"pending",waiverDate:L.signed_at?new Date(L.signed_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",isMinor:L.is_minor||!1,waiverId:L.id,checkInStatus:L.check_in_status||"pending"}));x(I)}else x(eE)}catch($){console.error("Failed to fetch attendees:",$),x(eE)}finally{b(!1)}},N=v.filter($=>{const T=$.name.toLowerCase().includes(u.toLowerCase())||$.email.toLowerCase().includes(u.toLowerCase()),I=m==="all"||$.waiverStatus===m;return T&&I}),C={total:v.length,signed:v.filter($=>$.waiverStatus==="signed").length,pending:v.filter($=>$.waiverStatus==="pending").length,minors:v.filter($=>$.isMinor).length},S=async()=>{const $=v.filter(T=>T.waiverStatus==="pending");if($.length===0){re.info("No pending waivers to send reminders for");return}try{const T=$.map(async I=>{if(I.waiverId){const{data:L}=await Wr.from("waivers").select("reminder_sent_count").eq("id",I.waiverId).single(),z=L?.reminder_sent_count||0,{error:M}=await Wr.from("waivers").update({reminder_sent_count:z+1,last_reminder_sent_at:new Date().toISOString()}).eq("id",I.waiverId);M&&console.error("Error updating reminder:",M)}});await Promise.all(T),re.success(`Reminders queued for ${$.length} attendee(s) - Email system pending`),await w()}catch(T){console.error("Error sending reminders:",T),re.error("Failed to send reminders")}},A=$=>{if($==null)return"";const T=String($),I=/[",\n]/.test(T),L=T.replace(/"/g,'""');return I?`"${L}"`:L},k=$=>{const T=["Attendee ID","Name","Email","Phone","Waiver Status","Signed Date","Type",t?.id?"Booking ID":void 0].filter(Boolean),I=$.map(L=>[A(L.id),A(L.name),A(L.email),A(L.phone),A(L.waiverStatus),A(L.waiverDate),A(L.isMinor?"Minor":"Adult"),t?.id?A(t.id):void 0].filter(z=>z!==void 0).join(","));return[T.join(","),...I].join(`
`)},E=($,T)=>{const I=new Blob([$],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(I),z=document.createElement("a");z.href=L,z.download=T,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(L)},O=()=>{const $=N;if($.length===0){re.info("No attendees to export for current filters.");return}const T=k($),I=new Date,L=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}-${String(I.getDate()).padStart(2,"0")}_${String(I.getHours()).padStart(2,"0")}${String(I.getMinutes()).padStart(2,"0")}`,M=`${t?.id?`attendees_${t.id}`:"attendees_all"}_${L}.csv`;E(T,M),re.success(`Exported ${$.length} attendee${$.length>1?"s":""} to ${M}`)};return r.jsx(mr,{open:e,onOpenChange:s,children:r.jsxs(fr,{className:`max-w-5xl max-h-[90vh] overflow-hidden flex flex-col ${a?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:i,children:"Attendee List"}),r.jsx(wr,{className:o,children:t?`Viewing attendees for booking ${t.id}`:"All upcoming bookings attendees"})]}),r.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1",children:[r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsx("div",{className:`p-3 rounded-lg border ${l} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o}`,children:"Total"}),r.jsx("p",{className:`text-xl mt-1 ${i}`,children:C.total})]}),r.jsx(Xr,{className:`w-5 h-5 ${a?"text-[#6366f1]":"text-blue-600"}`})]})}),r.jsx("div",{className:`p-3 rounded-lg border ${l} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o}`,children:"Signed"}),r.jsx("p",{className:`text-xl mt-1 ${i}`,children:C.signed})]}),r.jsx(Lt,{className:`w-5 h-5 ${a?"text-emerald-400":"text-green-600"}`})]})}),r.jsx("div",{className:`p-3 rounded-lg border ${l} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o}`,children:"Pending"}),r.jsx("p",{className:`text-xl mt-1 ${i}`,children:C.pending})]}),r.jsx(jr,{className:`w-5 h-5 ${a?"text-yellow-400":"text-yellow-600"}`})]})}),r.jsx("div",{className:`p-3 rounded-lg border ${l} ${c}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${o}`,children:"Minors"}),r.jsx("p",{className:`text-xl mt-1 ${i}`,children:C.minors})]}),r.jsx(Nd,{className:`w-5 h-5 ${a?"text-purple-400":"text-purple-600"}`})]})})]}),r.jsx(Ze,{className:l}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${a?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search attendees...",value:u,onChange:$=>h($.target.value),className:"pl-10 h-11"})]}),r.jsxs(sr,{value:m,onValueChange:f,children:[r.jsxs(ar,{className:"w-[180px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"Filter status"})]}),r.jsxs(ir,{className:a?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"all",children:"All Status"}),r.jsx(Ae,{value:"signed",children:"Signed"}),r.jsx(Ae,{value:"pending",children:"Pending"})]})]})]}),r.jsx("div",{className:`rounded-lg border ${l} overflow-hidden`,children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{className:l,children:[r.jsx(fs,{className:o,children:"Name"}),r.jsx(fs,{className:o,children:"Contact"}),r.jsx(fs,{className:o,children:"Waiver Status"}),r.jsx(fs,{className:o,children:"Signed Date"}),r.jsx(fs,{className:o,children:"Type"})]})}),r.jsx(Ux,{children:N.length===0?r.jsx(ui,{children:r.jsx(Jt,{colSpan:5,className:`text-center py-8 ${o}`,children:"No attendees found"})}):N.map($=>r.jsxs(ui,{className:`${l} ${d} transition-colors`,children:[r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${i}`,children:$.name}),r.jsx("p",{className:`text-xs ${o}`,children:$.id})]})}),r.jsx(Jt,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:`flex items-center gap-1 text-xs ${o}`,children:[r.jsx(Ds,{className:"w-3 h-3"}),$.email]}),r.jsxs("div",{className:`flex items-center gap-1 text-xs ${o}`,children:[r.jsx(la,{className:"w-3 h-3"}),$.phone]})]})}),r.jsx(Jt,{children:r.jsxs(De,{className:$.waiverStatus==="signed"?a?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0":a?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:[$.waiverStatus==="signed"?r.jsx(Lt,{className:"w-3 h-3 mr-1"}):r.jsx(jr,{className:"w-3 h-3 mr-1"}),$.waiverStatus]})}),r.jsx(Jt,{className:o,children:$.waiverDate}),r.jsx(Jt,{children:$.isMinor&&r.jsx(De,{className:a?"bg-purple-500/20 text-purple-400 border-0":"bg-purple-100 text-purple-700 border-0",children:"Minor"})})]},$.id))})]})})]}),r.jsx(Us,{children:r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[r.jsxs(W,{variant:"outline",onClick:S,className:"h-11",disabled:C.pending===0,children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Send Reminders (",C.pending,")"]}),r.jsxs(W,{variant:"outline",onClick:O,className:"h-11",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export List"]}),r.jsx(W,{onClick:s,style:{backgroundColor:a?"#4f46e5":void 0},className:`h-11 ${a?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,children:"Close"})]})})]})})}var x0={},tE,NH;function iie(){return NH||(NH=1,tE={L:1,M:0,Q:3,H:2}),tE}var rE,SH;function oie(){return SH||(SH=1,rE={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),rE}var sE,CH;function fqe(){if(CH)return sE;CH=1;var t=oie();function e(s){this.mode=t.MODE_8BIT_BYTE,this.data=s}return e.prototype={getLength:function(s){return this.data.length},write:function(s){for(var n=0;n<this.data.length;n++)s.put(this.data.charCodeAt(n),8)}},sE=e,sE}var nE,kH;function pqe(){if(kH)return nE;kH=1;var t=iie();function e(s,n){this.totalCount=s,this.dataCount=n}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(s,n){var a=e.getRsBlockTable(s,n);if(a==null)throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+n);for(var i=a.length/3,o=new Array,l=0;l<i;l++)for(var c=a[l*3+0],d=a[l*3+1],u=a[l*3+2],h=0;h<c;h++)o.push(new e(d,u));return o},e.getRsBlockTable=function(s,n){switch(n){case t.L:return e.RS_BLOCK_TABLE[(s-1)*4+0];case t.M:return e.RS_BLOCK_TABLE[(s-1)*4+1];case t.Q:return e.RS_BLOCK_TABLE[(s-1)*4+2];case t.H:return e.RS_BLOCK_TABLE[(s-1)*4+3];default:return}},nE=e,nE}var aE,_H;function xqe(){if(_H)return aE;_H=1;function t(){this.buffer=new Array,this.length=0}return t.prototype={get:function(e){var s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)==1},put:function(e,s){for(var n=0;n<s;n++)this.putBit((e>>>s-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}},aE=t,aE}var iE,AH;function lie(){if(AH)return iE;AH=1;for(var t={glog:function(s){if(s<1)throw new Error("glog("+s+")");return t.LOG_TABLE[s]},gexp:function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return t.EXP_TABLE[s]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)t.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)t.EXP_TABLE[e]=t.EXP_TABLE[e-4]^t.EXP_TABLE[e-5]^t.EXP_TABLE[e-6]^t.EXP_TABLE[e-8];for(var e=0;e<255;e++)t.LOG_TABLE[t.EXP_TABLE[e]]=e;return iE=t,iE}var oE,EH;function cie(){if(EH)return oE;EH=1;var t=lie();function e(s,n){if(s.length==null)throw new Error(s.length+"/"+n);for(var a=0;a<s.length&&s[a]==0;)a++;this.num=new Array(s.length-a+n);for(var i=0;i<s.length-a;i++)this.num[i]=s[i+a]}return e.prototype={get:function(s){return this.num[s]},getLength:function(){return this.num.length},multiply:function(s){for(var n=new Array(this.getLength()+s.getLength()-1),a=0;a<this.getLength();a++)for(var i=0;i<s.getLength();i++)n[a+i]^=t.gexp(t.glog(this.get(a))+t.glog(s.get(i)));return new e(n,0)},mod:function(s){if(this.getLength()-s.getLength()<0)return this;for(var n=t.glog(this.get(0))-t.glog(s.get(0)),a=new Array(this.getLength()),i=0;i<this.getLength();i++)a[i]=this.get(i);for(var i=0;i<s.getLength();i++)a[i]^=t.gexp(t.glog(s.get(i))+n);return new e(a,0).mod(s)}},oE=e,oE}var lE,PH;function gqe(){if(PH)return lE;PH=1;var t=oie(),e=cie(),s=lie(),n={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(i){for(var o=i<<10;a.getBCHDigit(o)-a.getBCHDigit(a.G15)>=0;)o^=a.G15<<a.getBCHDigit(o)-a.getBCHDigit(a.G15);return(i<<10|o)^a.G15_MASK},getBCHTypeNumber:function(i){for(var o=i<<12;a.getBCHDigit(o)-a.getBCHDigit(a.G18)>=0;)o^=a.G18<<a.getBCHDigit(o)-a.getBCHDigit(a.G18);return i<<12|o},getBCHDigit:function(i){for(var o=0;i!=0;)o++,i>>>=1;return o},getPatternPosition:function(i){return a.PATTERN_POSITION_TABLE[i-1]},getMask:function(i,o,l){switch(i){case n.PATTERN000:return(o+l)%2==0;case n.PATTERN001:return o%2==0;case n.PATTERN010:return l%3==0;case n.PATTERN011:return(o+l)%3==0;case n.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2==0;case n.PATTERN101:return o*l%2+o*l%3==0;case n.PATTERN110:return(o*l%2+o*l%3)%2==0;case n.PATTERN111:return(o*l%3+(o+l)%2)%2==0;default:throw new Error("bad maskPattern:"+i)}},getErrorCorrectPolynomial:function(i){for(var o=new e([1],0),l=0;l<i;l++)o=o.multiply(new e([1,s.gexp(l)],0));return o},getLengthInBits:function(i,o){if(1<=o&&o<10)switch(i){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw new Error("mode:"+i)}else if(o<27)switch(i){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw new Error("mode:"+i)}else if(o<41)switch(i){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw new Error("mode:"+i)}else throw new Error("type:"+o)},getLostPoint:function(i){for(var o=i.getModuleCount(),l=0,c=0;c<o;c++)for(var d=0;d<o;d++){for(var u=0,h=i.isDark(c,d),m=-1;m<=1;m++)if(!(c+m<0||o<=c+m))for(var f=-1;f<=1;f++)d+f<0||o<=d+f||m==0&&f==0||h==i.isDark(c+m,d+f)&&u++;u>5&&(l+=3+u-5)}for(var c=0;c<o-1;c++)for(var d=0;d<o-1;d++){var v=0;i.isDark(c,d)&&v++,i.isDark(c+1,d)&&v++,i.isDark(c,d+1)&&v++,i.isDark(c+1,d+1)&&v++,(v==0||v==4)&&(l+=3)}for(var c=0;c<o;c++)for(var d=0;d<o-6;d++)i.isDark(c,d)&&!i.isDark(c,d+1)&&i.isDark(c,d+2)&&i.isDark(c,d+3)&&i.isDark(c,d+4)&&!i.isDark(c,d+5)&&i.isDark(c,d+6)&&(l+=40);for(var d=0;d<o;d++)for(var c=0;c<o-6;c++)i.isDark(c,d)&&!i.isDark(c+1,d)&&i.isDark(c+2,d)&&i.isDark(c+3,d)&&i.isDark(c+4,d)&&!i.isDark(c+5,d)&&i.isDark(c+6,d)&&(l+=40);for(var x=0,d=0;d<o;d++)for(var c=0;c<o;c++)i.isDark(c,d)&&x++;var g=Math.abs(100*x/o/o-50)/5;return l+=g*10,l}};return lE=a,lE}var cE,TH;function vqe(){if(TH)return cE;TH=1;var t=fqe(),e=pqe(),s=xqe(),n=gqe(),a=cie();function i(l,c){this.typeNumber=l,this.errorCorrectLevel=c,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=i.prototype;return o.addData=function(l){var c=new t(l);this.dataList.push(c),this.dataCache=null},o.isDark=function(l,c){if(l<0||this.moduleCount<=l||c<0||this.moduleCount<=c)throw new Error(l+","+c);return this.modules[l][c]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var l=1;for(l=1;l<40;l++){for(var c=e.getRSBlocks(l,this.errorCorrectLevel),d=new s,u=0,h=0;h<c.length;h++)u+=c[h].dataCount;for(var h=0;h<this.dataList.length;h++){var m=this.dataList[h];d.put(m.mode,4),d.put(m.getLength(),n.getLengthInBits(m.mode,l)),m.write(d)}if(d.getLengthInBits()<=u*8)break}this.typeNumber=l}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(l,c){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var u=0;u<this.moduleCount;u++)this.modules[d][u]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(l,c),this.typeNumber>=7&&this.setupTypeNumber(l),this.dataCache==null&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},o.setupPositionProbePattern=function(l,c){for(var d=-1;d<=7;d++)if(!(l+d<=-1||this.moduleCount<=l+d))for(var u=-1;u<=7;u++)c+u<=-1||this.moduleCount<=c+u||(0<=d&&d<=6&&(u==0||u==6)||0<=u&&u<=6&&(d==0||d==6)||2<=d&&d<=4&&2<=u&&u<=4?this.modules[l+d][c+u]=!0:this.modules[l+d][c+u]=!1)},o.getBestMaskPattern=function(){for(var l=0,c=0,d=0;d<8;d++){this.makeImpl(!0,d);var u=n.getLostPoint(this);(d==0||l>u)&&(l=u,c=d)}return c},o.createMovieClip=function(l,c,d){var u=l.createEmptyMovieClip(c,d),h=1;this.make();for(var m=0;m<this.modules.length;m++)for(var f=m*h,v=0;v<this.modules[m].length;v++){var x=v*h,g=this.modules[m][v];g&&(u.beginFill(0,100),u.moveTo(x,f),u.lineTo(x+h,f),u.lineTo(x+h,f+h),u.lineTo(x,f+h),u.endFill())}return u},o.setupTimingPattern=function(){for(var l=8;l<this.moduleCount-8;l++)this.modules[l][6]==null&&(this.modules[l][6]=l%2==0);for(var c=8;c<this.moduleCount-8;c++)this.modules[6][c]==null&&(this.modules[6][c]=c%2==0)},o.setupPositionAdjustPattern=function(){for(var l=n.getPatternPosition(this.typeNumber),c=0;c<l.length;c++)for(var d=0;d<l.length;d++){var u=l[c],h=l[d];if(this.modules[u][h]==null)for(var m=-2;m<=2;m++)for(var f=-2;f<=2;f++)m==-2||m==2||f==-2||f==2||m==0&&f==0?this.modules[u+m][h+f]=!0:this.modules[u+m][h+f]=!1}},o.setupTypeNumber=function(l){for(var c=n.getBCHTypeNumber(this.typeNumber),d=0;d<18;d++){var u=!l&&(c>>d&1)==1;this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=u}for(var d=0;d<18;d++){var u=!l&&(c>>d&1)==1;this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=u}},o.setupTypeInfo=function(l,c){for(var d=this.errorCorrectLevel<<3|c,u=n.getBCHTypeInfo(d),h=0;h<15;h++){var m=!l&&(u>>h&1)==1;h<6?this.modules[h][8]=m:h<8?this.modules[h+1][8]=m:this.modules[this.moduleCount-15+h][8]=m}for(var h=0;h<15;h++){var m=!l&&(u>>h&1)==1;h<8?this.modules[8][this.moduleCount-h-1]=m:h<9?this.modules[8][15-h-1+1]=m:this.modules[8][15-h-1]=m}this.modules[this.moduleCount-8][8]=!l},o.mapData=function(l,c){for(var d=-1,u=this.moduleCount-1,h=7,m=0,f=this.moduleCount-1;f>0;f-=2)for(f==6&&f--;;){for(var v=0;v<2;v++)if(this.modules[u][f-v]==null){var x=!1;m<l.length&&(x=(l[m]>>>h&1)==1);var g=n.getMask(c,u,f-v);g&&(x=!x),this.modules[u][f-v]=x,h--,h==-1&&(m++,h=7)}if(u+=d,u<0||this.moduleCount<=u){u-=d,d=-d;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(l,c,d){for(var u=e.getRSBlocks(l,c),h=new s,m=0;m<d.length;m++){var f=d[m];h.put(f.mode,4),h.put(f.getLength(),n.getLengthInBits(f.mode,l)),f.write(h)}for(var v=0,m=0;m<u.length;m++)v+=u[m].dataCount;if(h.getLengthInBits()>v*8)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+v*8+")");for(h.getLengthInBits()+4<=v*8&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=v*8||(h.put(i.PAD0,8),h.getLengthInBits()>=v*8));)h.put(i.PAD1,8);return i.createBytes(h,u)},i.createBytes=function(l,c){for(var d=0,u=0,h=0,m=new Array(c.length),f=new Array(c.length),v=0;v<c.length;v++){var x=c[v].dataCount,g=c[v].totalCount-x;u=Math.max(u,x),h=Math.max(h,g),m[v]=new Array(x);for(var b=0;b<m[v].length;b++)m[v][b]=255&l.buffer[b+d];d+=x;var w=n.getErrorCorrectPolynomial(g),N=new a(m[v],w.getLength()-1),C=N.mod(w);f[v]=new Array(w.getLength()-1);for(var b=0;b<f[v].length;b++){var S=b+C.getLength()-f[v].length;f[v][b]=S>=0?C.get(S):0}}for(var A=0,b=0;b<c.length;b++)A+=c[b].totalCount;for(var k=new Array(A),E=0,b=0;b<u;b++)for(var v=0;v<c.length;v++)b<m[v].length&&(k[E++]=m[v][b]);for(var b=0;b<h;b++)for(var v=0;v<c.length;v++)b<f[v].length&&(k[E++]=f[v][b]);return k},cE=i,cE}var jj={},OH;function yqe(){if(OH)return jj;OH=1,Object.defineProperty(jj,"__esModule",{value:!0});var t=Object.assign||function(d){for(var u=1;u<arguments.length;u++){var h=arguments[u];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(d[m]=h[m])}return d},e=h8(),s=i(e),n=Uv(),a=i(n);function i(d){return d&&d.__esModule?d:{default:d}}function o(d,u){var h={};for(var m in d)u.indexOf(m)>=0||Object.prototype.hasOwnProperty.call(d,m)&&(h[m]=d[m]);return h}var l={bgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,bgD:s.default.string.isRequired,fgColor:s.default.oneOfType([s.default.object,s.default.string]).isRequired,fgD:s.default.string.isRequired,size:s.default.number.isRequired,title:s.default.string,viewBoxSize:s.default.number.isRequired,xmlns:s.default.string},c=(0,n.forwardRef)(function(d,u){var h=d.bgColor,m=d.bgD,f=d.fgD,v=d.fgColor,x=d.size,g=d.title,b=d.viewBoxSize,w=d.xmlns,N=w===void 0?"http://www.w3.org/2000/svg":w,C=o(d,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",t({},C,{height:x,ref:u,viewBox:"0 0 "+b+" "+b,width:x,xmlns:N}),g?a.default.createElement("title",null,g):null,a.default.createElement("path",{d:m,fill:h}),a.default.createElement("path",{d:f,fill:v}))});return c.displayName="QRCodeSvg",c.propTypes=l,jj.default=c,jj}var IH;function bqe(){if(IH)return x0;IH=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.QRCode=void 0;var t=Object.assign||function(x){for(var g=1;g<arguments.length;g++){var b=arguments[g];for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(x[w]=b[w])}return x},e=h8(),s=h(e),n=iie(),a=h(n),i=vqe(),o=h(i),l=Uv(),c=h(l),d=yqe(),u=h(d);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,g){var b={};for(var w in x)g.indexOf(w)>=0||Object.prototype.hasOwnProperty.call(x,w)&&(b[w]=x[w]);return b}var f={bgColor:s.default.oneOfType([s.default.object,s.default.string]),fgColor:s.default.oneOfType([s.default.object,s.default.string]),level:s.default.string,size:s.default.number,value:s.default.string.isRequired},v=(0,l.forwardRef)(function(x,g){var b=x.bgColor,w=b===void 0?"#FFFFFF":b,N=x.fgColor,C=N===void 0?"#000000":N,S=x.level,A=S===void 0?"L":S,k=x.size,E=k===void 0?256:k,O=x.value,$=m(x,["bgColor","fgColor","level","size","value"]),T=new o.default(-1,a.default[A]);T.addData(O),T.make();var I=T.modules;return c.default.createElement(u.default,t({},$,{bgColor:w,bgD:I.map(function(L,z){return L.map(function(M,V){return M?"":"M "+V+" "+z+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:C,fgD:I.map(function(L,z){return L.map(function(M,V){return M?"M "+V+" "+z+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:g,size:E,viewBoxSize:I.length}))});return x0.QRCode=v,v.displayName="QRCode",v.propTypes=f,x0.default=v,x0}var wqe=bqe();const jqe=cn(wqe);function Nqe(t,e){var s=Object.setPrototypeOf;s?s(t,e):t.__proto__=e}function Sqe(t,e){e===void 0&&(e=t.constructor);var s=Error.captureStackTrace;s&&s(t,e)}var Cqe=(function(){var t=function(s,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},t(s,n)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),kqe=(function(t){Cqe(e,t);function e(s,n){var a=this.constructor,i=t.call(this,s,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),Nqe(i,a.prototype),Sqe(i),i}return e})(Error),_qe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),uc=(function(t){_qe(e,t);function e(s){s===void 0&&(s=void 0);var n=t.call(this,s)||this;return n.message=s,n}return e.prototype.getKind=function(){var s=this.constructor;return s.kind},e.kind="Exception",e})(kqe),Aqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),ji=(function(t){Aqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(uc),Eqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),cs=(function(t){Eqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(uc),die=(function(){function t(e){if(this.binarizer=e,e===null)throw new cs("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,s){return this.binarizer.getBlackRow(e,s)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,s,n,a){var i=this.binarizer.getLuminanceSource().crop(e,s,n,a);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),Pqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Li=(function(t){Pqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(uc),Tqe=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Ca=(function(){function t(){}return t.arraycopy=function(e,s,n,a,i){for(;i--;)n[a++]=e[s++]},t.currentTimeMillis=function(){return Date.now()},t})(),Oqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),z8=(function(t){Oqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(uc),Iqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),$H=(function(t){Iqe(e,t);function e(s,n){s===void 0&&(s=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=s,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e})(z8),$qe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},to=(function(){function t(){}return t.fill=function(e,s){for(var n=0,a=e.length;n<a;n++)e[n]=s},t.fillWithin=function(e,s,n,a){t.rangeCheck(e.length,s,n);for(var i=s;i<n;i++)e[i]=a},t.rangeCheck=function(e,s,n){if(s>n)throw new cs("fromIndex("+s+") > toIndex("+n+")");if(s<0)throw new $H(s);if(n>e)throw new $H(n)},t.asList=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return e},t.create=function(e,s,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:s}).fill(n)})},t.createInt32Array=function(e,s,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:s}).fill(n)})},t.equals=function(e,s){if(!e||!s||!e.length||!s.length||e.length!==s.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==s[n])return!1;return!0},t.hashCode=function(e){var s,n;if(e===null)return 0;var a=1;try{for(var i=$qe(e),o=i.next();!o.done;o=i.next()){var l=o.value;a=31*a+l}}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a},t.fillUint8Array=function(e,s){for(var n=0;n!==e.length;n++)e[n]=s},t.copyOf=function(e,s){return e.slice(0,s)},t.copyOfUint8Array=function(e,s){if(e.length<=s){var n=new Uint8Array(s);return n.set(e),n}return e.slice(0,s)},t.copyOfRange=function(e,s,n){var a=n-s,i=new Int32Array(a);return Ca.arraycopy(e,s,i,0,a),i},t.binarySearch=function(e,s,n){n===void 0&&(n=t.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,l=n(s,e[o]);if(l>0)a=o+1;else if(l<0)i=o-1;else return o}return-a-1},t.numberComparator=function(e,s){return e-s},t})(),Js=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var s;if(e===0)return 32;var n=31;return s=e<<16,s!==0&&(n-=16,e=s),s=e<<8,s!==0&&(n-=8,e=s),s=e<<4,s!==0&&(n-=4,e=s),s=e<<2,s!==0&&(n-=2,e=s),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var s=1;return e>>>16||(s+=16,e<<=16),e>>>24||(s+=8,e<<=8),e>>>28||(s+=4,e<<=4),e>>>30||(s+=2,e<<=2),s-=e>>>31,s},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,s){return Math.trunc(e/s)},t.parseInt=function(e,s){return s===void 0&&(s=void 0),parseInt(e,s)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),ko=(function(){function t(e,s){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,s==null?this.bits=t.makeArray(e):this.bits=s)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var s=t.makeArray(e);Ca.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var s=this.size;if(e>=s)return s;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return s;i=n[a]}var l=a*32+Js.numberOfTrailingZeros(i);return l>s?s:l},t.prototype.getNextUnset=function(e){var s=this.size;if(e>=s)return s;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return s;i=~n[a]}var l=a*32+Js.numberOfTrailingZeros(i);return l>s?s:l},t.prototype.setBulk=function(e,s){this.bits[Math.floor(e/32)]=s},t.prototype.setRange=function(e,s){if(s<e||e<0||s>this.size)throw new cs;if(s!==e){s--;for(var n=Math.floor(e/32),a=Math.floor(s/32),i=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:s&31,d=(2<<c)-(1<<l);i[o]|=d}}},t.prototype.clear=function(){for(var e=this.bits.length,s=this.bits,n=0;n<e;n++)s[n]=0},t.prototype.isRange=function(e,s,n){if(s<e||e<0||s>this.size)throw new cs;if(s===e)return!0;s--;for(var a=Math.floor(e/32),i=Math.floor(s/32),o=this.bits,l=a;l<=i;l++){var c=l>a?0:e&31,d=l<i?31:s&31,u=(2<<d)-(1<<c)&4294967295;if((o[l]&u)!==(n?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,s){if(s<0||s>32)throw new cs("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(var n=s;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var s=e.size;this.ensureCapacity(this.size+s);for(var n=0;n<s;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new cs("Sizes don't match");for(var s=this.bits,n=0,a=s.length;n<a;n++)s[n]^=e.bits[n]},t.prototype.toBytes=function(e,s,n,a){for(var i=0;i<a;i++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;s[n+i]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),n=s+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[s-i]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,i=1;i<n;i++){var d=e[i];c|=d<<32-l,e[i-1]=c,c=d>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.size===s.size&&to.equals(this.bits,s.bits)},t.prototype.hashCode=function(){return 31*this.size+to.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",s=0,n=this.size;s<n;s++)(s&7)===0&&(e+=" "),e+=this.get(s)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],s=0,n=this.size;s<n;s++)e.push(this.get(s));return e},t})(),bO;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(bO||(bO={}));const ka=bO;var Dqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),lr=(function(t){Dqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(uc),Rqe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kn;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Kn||(Kn={}));var Ji=(function(){function t(e,s,n){for(var a,i,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,d=0,u=c.length;d!==u;d++){var h=c[d];t.VALUES_TO_ECI.set(h,this)}try{for(var m=Rqe(o),f=m.next();!f.done;f=m.next()){var v=f.value;t.NAME_TO_ECI.set(v,this)}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new lr("incorect value");var s=t.VALUES_TO_ECI.get(e);if(s===void 0)throw new lr("incorect value");return s},t.getCharacterSetECIByName=function(e){var s=t.NAME_TO_ECI.get(e);if(s===void 0)throw new lr("incorect value");return s},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.getName()===s.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Kn.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Kn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Kn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Kn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Kn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Kn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Kn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Kn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Kn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Kn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Kn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Kn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Kn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Kn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Kn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Kn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Kn.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Kn.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Kn.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Kn.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Kn.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Kn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Kn.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Kn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Kn.Big5,28,"Big5"),t.GB18030=new t(Kn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Kn.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),Mqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Jj=(function(t){Mqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(uc),Id=(function(){function t(){}return t.decode=function(e,s){var n=this.encodingName(s);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,s){var n=this.encodingName(s);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ji?e:Ji.getCharacterSetECIByName(e)},t.decodeFallback=function(e,s){var n=this.encodingCharacterSet(s);if(t.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var l=e[i].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Ji.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Jj("Encoding "+this.encodingName(s)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ji.UTF8)||e.equals(Ji.ISO8859_1)||e.equals(Ji.ASCII)},t.encodeFallback=function(e){for(var s=btoa(unescape(encodeURIComponent(e))),n=s.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},t})(),mn=(function(){function t(){}return t.castAsNonUtf8Char=function(e,s){s===void 0&&(s=null);var n=s?s.getName():this.ISO88591;return Id.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,s){if(s!=null&&s.get(ka.CHARACTER_SET)!==void 0)return s.get(ka.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,l=0,c=0,d=0,u=0,h=0,m=0,f=0,v=0,x=0,g=0,b=0,w=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,N=0;N<n&&(a||i||o);N++){var C=e[N]&255;o&&(l>0?(C&128)===0?o=!1:l--:(C&128)!==0&&((C&64)===0?o=!1:(l++,(C&32)===0?c++:(l++,(C&16)===0?d++:(l++,(C&8)===0?u++:o=!1))))),a&&(C>127&&C<160?a=!1:C>159&&(C<192||C===215||C===247)&&b++),i&&(h>0?C<64||C===127||C>252?i=!1:h--:C===128||C===160||C>239?i=!1:C>160&&C<224?(m++,v=0,f++,f>x&&(x=f)):C>127?(h++,f=0,v++,v>g&&(g=v)):(f=0,v=0))}return o&&l>0&&(o=!1),i&&h>0&&(i=!1),o&&(w||c+d+u>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||x>=3||g>=3)?t.SHIFT_JIS:a&&i?x===2&&m===2||b*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:i?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];var a=-1;function i(l,c,d,u,h,m){if(l==="%%")return"%";if(s[++a]!==void 0){l=u?parseInt(u.substr(1)):void 0;var f=h?parseInt(h.substr(1)):void 0,v;switch(m){case"s":v=s[a];break;case"c":v=s[a][0];break;case"f":v=parseFloat(s[a]).toFixed(l);break;case"p":v=parseFloat(s[a]).toPrecision(l);break;case"e":v=parseFloat(s[a]).toExponential(l);break;case"x":v=parseInt(s[a]).toString(f||16);break;case"d":v=parseFloat(parseInt(s[a],f||10).toPrecision(l)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(f);for(var x=parseInt(d),g=d&&d[0]+""=="0"?"0":" ";v.length<x;)v=c!==void 0?v+g:g+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.getBytes=function(e,s){return Id.encode(e,s)},t.getCharCode=function(e,s){return s===void 0&&(s=0),e.charCodeAt(s)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ji.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ji.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ji.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Ks=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=mn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,s,n){for(var a=s;s<s+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,s){this.value=this.value.substr(0,e)+s+this.value.substr(e+1)},t.prototype.substring=function(e,s){return this.value.substring(e,s)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,s){this.value=this.value.substring(0,e)+s+this.value.substring(e)},t})(),Eh=(function(){function t(e,s,n,a){if(this.width=e,this.height=s,this.rowSize=n,this.bits=a,s==null&&(s=e),this.height=s,e<1||s<1)throw new cs("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var s=e.length,n=e[0].length,a=new t(n,s),i=0;i<s;i++)for(var o=e[i],l=0;l<n;l++)o[l]&&a.set(l,i);return a},t.parseFromString=function(e,s,n){if(e===null)throw new cs("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,l=-1,c=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new cs("row lengths do not match");o=i,c++}d++}else if(e.substring(d,d+s.length)===s)d+=s.length,a[i]=!0,i++;else if(e.substring(d,d+n.length)===n)d+=n.length,a[i]=!1,i++;else throw new cs("illegal character encountered: "+e.substring(d));if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new cs("row lengths do not match");c++}for(var u=new t(l,c),h=0;h<i;h++)a[h]&&u.set(Math.floor(h%l),Math.floor(h/l));return u},t.prototype.get=function(e,s){var n=s*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,s){var n=s*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,s){var n=s*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,s){var n=s*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new cs("input matrix dimensions do not match");for(var s=new ko(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var l=i*n,c=e.getRow(i,s).getBitArray(),d=0;d<n;d++)a[l+d]^=c[d]},t.prototype.clear=function(){for(var e=this.bits,s=e.length,n=0;n<s;n++)e[n]=0},t.prototype.setRegion=function(e,s,n,a){if(s<0||e<0)throw new cs("Left and top must be nonnegative");if(a<1||n<1)throw new cs("Height and width must be at least 1");var i=e+n,o=s+a;if(o>this.height||i>this.width)throw new cs("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,d=s;d<o;d++)for(var u=d*l,h=e;h<i;h++)c[u+Math.floor(h/32)]|=1<<(h&31)&4294967295},t.prototype.getRow=function(e,s){s==null||s.getSize()<this.width?s=new ko(this.width):s.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)s.setBulk(o*32,a[i+o]);return s},t.prototype.setRow=function(e,s){Ca.arraycopy(s.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),s=this.getHeight(),n=new ko(e),a=new ko(e),i=0,o=Math.floor((s+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(s-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(s-1-i,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,s=this.height,n=this.rowSize,a=this.bits,i=e,o=s,l=-1,c=-1,d=0;d<s;d++)for(var u=0;u<n;u++){var h=a[d*n+u];if(h!==0){if(d<o&&(o=d),d>c&&(c=d),u*32<i){for(var m=0;(h<<31-m&4294967295)===0;)m++;u*32+m<i&&(i=u*32+m)}if(u*32+31>l){for(var m=31;!(h>>>m);)m--;u*32+m>l&&(l=u*32+m)}}}return l<i||c<o?null:Int32Array.from([i,o,l-i+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,s=this.bits,n=0;n<s.length&&s[n]===0;)n++;if(n===s.length)return null;for(var a=n/e,i=n%e*32,o=s[n],l=0;(o<<31-l&4294967295)===0;)l++;return i+=l,Int32Array.from([i,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,s=this.bits,n=s.length-1;n>=0&&s[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=s[n],l=31;!(o>>>l);)l--;return i+=l,Int32Array.from([i,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&to.equals(this.bits,s.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+to.hashCode(this.bits),e},t.prototype.toString=function(e,s,n){return e===void 0&&(e="X "),s===void 0&&(s="  "),n===void 0&&(n=`
`),this.buildToString(e,s,n)},t.prototype.buildToString=function(e,s,n){for(var a=new Ks,i=0,o=this.height;i<o;i++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,i)?e:s);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),Lqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),jt=(function(t){Lqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(uc),Fqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Bqe=(function(t){Fqe(e,t);function e(s){var n=t.call(this,s)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(s,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new ko(i):n.clear(),this.initArrays(i);for(var o=a.getRow(s,this.luminances),l=this.buckets,c=0;c<i;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(l);if(i<3)for(var c=0;c<i;c++)(o[c]&255)<d&&n.set(c);else for(var u=o[0]&255,h=o[1]&255,c=1;c<i-1;c++){var m=o[c+1]&255;(h*4-u-m)/2<d&&n.set(c),u=h,h=m}return n},e.prototype.getBlackMatrix=function(){var s=this.getLuminanceSource(),n=s.getWidth(),a=s.getHeight(),i=new Eh(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),d=s.getRow(c,this.luminances),u=Math.floor(n*4/5),h=Math.floor(n/5);h<u;h++){var m=d[h]&255;o[m>>e.LUMINANCE_SHIFT]++}for(var f=e.estimateBlackPoint(o),v=s.getMatrix(),l=0;l<a;l++)for(var x=l*n,h=0;h<n;h++){var m=v[x+h]&255;m<f&&i.set(h,l)}return i},e.prototype.createBinarizer=function(s){return new e(s)},e.prototype.initArrays=function(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(s){for(var n=s.length,a=0,i=0,o=0,l=0;l<n;l++)s[l]>o&&(i=l,o=s[l]),s[l]>a&&(a=s[l]);for(var c=0,d=0,l=0;l<n;l++){var u=l-i,h=s[l]*u*u;h>d&&(c=l,d=h)}if(i>c){var m=i;i=c,c=m}if(c-i<=n/16)throw new jt;for(var f=c-1,v=-1,l=c-1;l>i;l--){var x=l-i,h=x*x*(c-l)*(a-s[l]);h>v&&(f=l,v=h)}return f<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(Tqe),Uqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),uie=(function(t){Uqe(e,t);function e(s){var n=t.call(this,s)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var s=this.getLuminanceSource(),n=s.getWidth(),a=s.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=s.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var l=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&l++;var c=e.calculateBlackPoints(i,o,l,n,a),d=new Eh(n,a);e.calculateThresholdForBlock(i,o,l,n,a,c,d),this.matrix=d}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(s){return new e(s)},e.calculateThresholdForBlock=function(s,n,a,i,o,l,c){for(var d=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,h=0;h<a;h++){var m=h<<e.BLOCK_SIZE_POWER;m>d&&(m=d);for(var f=e.cap(h,2,a-3),v=0;v<n;v++){var x=v<<e.BLOCK_SIZE_POWER;x>u&&(x=u);for(var g=e.cap(v,2,n-3),b=0,w=-2;w<=2;w++){var N=l[f+w];b+=N[g-2]+N[g-1]+N[g]+N[g+1]+N[g+2]}var C=b/25;e.thresholdBlock(s,x,m,C,i,c)}}},e.cap=function(s,n,a){return s<n?n:s>a?a:s},e.thresholdBlock=function(s,n,a,i,o,l){for(var c=0,d=a*o+n;c<e.BLOCK_SIZE;c++,d+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(s[d+u]&255)<=i&&l.set(n+u,a+c)},e.calculateBlackPoints=function(s,n,a,i,o){for(var l=o-e.BLOCK_SIZE,c=i-e.BLOCK_SIZE,d=new Array(a),u=0;u<a;u++){d[u]=new Int32Array(n);var h=u<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var m=0;m<n;m++){var f=m<<e.BLOCK_SIZE_POWER;f>c&&(f=c);for(var v=0,x=255,g=0,b=0,w=h*i+f;b<e.BLOCK_SIZE;b++,w+=i){for(var N=0;N<e.BLOCK_SIZE;N++){var C=s[w+N]&255;v+=C,C<x&&(x=C),C>g&&(g=C)}if(g-x>e.MIN_DYNAMIC_RANGE)for(b++,w+=i;b<e.BLOCK_SIZE;b++,w+=i)for(var N=0;N<e.BLOCK_SIZE;N++)v+=s[w+N]&255}var S=v>>e.BLOCK_SIZE_POWER*2;if(g-x<=e.MIN_DYNAMIC_RANGE&&(S=x/2,u>0&&m>0)){var A=(d[u-1][m]+2*d[u][m-1]+d[u-1][m-1])/4;x<A&&(S=A)}d[u][m]=S}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(Bqe),zw=(function(){function t(e,s){this.width=e,this.height=s}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,s,n,a){throw new Jj("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Jj("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Jj("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),s=new Ks,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",s.append(l)}s.append(`
`)}return s.toString()},t})(),zqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),g3=(function(t){zqe(e,t);function e(s){var n=t.call(this,s.getWidth(),s.getHeight())||this;return n.delegate=s,n}return e.prototype.getRow=function(s,n){for(var a=this.delegate.getRow(s,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var s=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(s[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(s,n,a,i){return new e(this.delegate.crop(s,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(zw),Vqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Wqe=(function(t){Vqe(e,t);function e(s,n){n===void 0&&(n=!1);var a=t.call(this,s.width,s.height)||this;return a.canvas=s,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(s,n),a}return e.makeBufferFromCanvasImageData=function(s,n){n===void 0&&(n=!1);var a=s.getContext("2d").getImageData(0,0,s.width,s.height);return e.toGrayscaleBuffer(a.data,s.width,s.height,n)},e.toGrayscaleBuffer=function(s,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var l=0,c=0,d=s.length;l<d;l+=4,c++){var u=void 0,h=s[l+3];if(h===0)u=255;else{var m=s[l],f=s[l+1],v=s[l+2];u=306*m+601*f+117*v+512>>10}o[c]=u}else for(var l=0,c=0,x=s.length;l<x;l+=4,c++){var u=void 0,h=s[l+3];if(h===0)u=255;else{var m=s[l],f=s[l+1],v=s[l+2];u=306*m+601*f+117*v+512>>10}o[c]=255-u}return o},e.prototype.getRow=function(s,n){if(s<0||s>=this.getHeight())throw new cs("Requested row is outside the image: "+s);var a=this.getWidth(),i=s*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(s,n,a,i){return t.prototype.crop.call(this,s,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement},e.prototype.rotate=function(s){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=s*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*l),d=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*l);return n.width=c,n.height=d,a.translate(c/2,d/2),a.rotate(i),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new g3(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(zw),qqe=(function(){function t(e,s,n){this.deviceId=e,this.label=s,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Sl=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})},Cl=function(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,a=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=e.call(t,s)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Hqe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uy=(function(){function t(e,s,n){s===void 0&&(s=500),this.reader=e,this.timeBetweenScansMillis=s,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Sl(this,void 0,void 0,function(){var e,s,n,a,i,o,l,c,d,u,h,m;return Cl(this,function(f){switch(f.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),s=[];try{for(n=Hqe(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(l=i.deviceId||i.id,c=i.label||"Video device "+(s.length+1),d=i.groupId,u={deviceId:l,label:c,kind:o,groupId:d},s.push(u))}catch(v){h={error:v}}finally{try{a&&!a.done&&(m=n.return)&&m.call(n)}finally{if(h)throw h.error}}return[2,s]}})})},t.prototype.getVideoInputDevices=function(){return Sl(this,void 0,void 0,function(){var e;return Cl(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=s.sent(),[2,e.map(function(n){return new qqe(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Sl(this,void 0,void 0,function(){var s;return Cl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return s=n.sent(),s?[2,s.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,s){return Sl(this,void 0,void 0,function(){return Cl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,s)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,s){return Sl(this,void 0,void 0,function(){var n,a;return Cl(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,s)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,s){return Sl(this,void 0,void 0,function(){var n;return Cl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,s)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,s){return Sl(this,void 0,void 0,function(){var n,a;return Cl(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,s)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,s,n){return Sl(this,void 0,void 0,function(){return Cl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,s,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,s,n){return Sl(this,void 0,void 0,function(){var a,i;return Cl(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,s,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,s,n){return Sl(this,void 0,void 0,function(){var a;return Cl(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,s,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,s,n){return Sl(this,void 0,void 0,function(){var a;return Cl(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,s)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,s){return Sl(this,void 0,void 0,function(){var n;return Cl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(s),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var s=this;return new Promise(function(n,a){return s.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,s){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",s),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Sl(this,void 0,void 0,function(){return Cl(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,s){var n=document.getElementById(e);if(!n)throw new ji("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==s.toLowerCase())throw new ji("element with id '"+e+"' must be an "+s+" element");return n},t.prototype.decodeFromImage=function(e,s){if(!e&&!s)throw new ji("either imageElement with a src set or an url must be provided");return s&&!e?this.decodeFromImageUrl(s):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,s){if(!e&&!s)throw new ji("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,s,n){if(e===void 0&&s===void 0)throw new ji("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrlContinuously(s,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ji("An image element must be provided.");this.reset();var s=this.prepareImageElement(e);this.imageElement=s;var n;return this.isImageLoaded(s)?n=this.decodeOnce(s,!1,!0):n=this._decodeOnLoadImage(s),n},t.prototype.decodeFromVideoElement=function(e){var s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(s)},t.prototype.decodeFromVideoElementContinuously=function(e,s){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,s)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ji("A video element must be provided.");this.reset();var s=this.prepareVideoElement(e);return this.videoElement=s,s},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ji("An URL must be provided.");this.reset();var s=this.prepareImageElement();this.imageElement=s;var n=this._decodeOnLoadImage(s);return s.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ji("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),n=this.decodeFromVideoElement(s);return s.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,s){if(!e)throw new ji("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,s);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var s=this;return new Promise(function(n,a){s.imageLoadedListener=function(){return s.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",s.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Sl(this,void 0,void 0,function(){return Cl(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return s.sent(),[4,this.decodeOnce(e)];case 2:return[2,s.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,s){return Sl(this,void 0,void 0,function(){return Cl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,s),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var s;return typeof e>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(s=e),s},t.prototype.prepareVideoElement=function(e){var s;return!e&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(s=e),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s},t.prototype.decodeOnce=function(e,s,n){var a=this;s===void 0&&(s=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,l){if(a._stopAsyncDecode){l(new jt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(m){var d=s&&m instanceof jt,u=m instanceof Li||m instanceof lr,h=u&&n;if(d||h)return setTimeout(i,a._timeBetweenDecodingAttempts,o,l);l(m)}};return new Promise(function(o,l){return i(o,l)})},t.prototype.decodeContinuously=function(e,s){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);s(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){s(null,c);var o=c instanceof Li||c instanceof lr,l=c instanceof jt;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var s=this.createBinaryBitmap(e);return this.decodeBitmap(s)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var s=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),s=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Wqe(n,s),i=new uie(a);return new die(i)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var s=this.getCaptureCanvas(e),n=void 0;try{n=s.getContext("2d",{willReadFrequently:!0})}catch{n=s.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var s=this.createCaptureCanvas(e);this.captureCanvas=s}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,s,n){s===void 0&&(s={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)},t.prototype.drawImageOnCanvas=function(e,s,n){s===void 0&&(s={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),s.style.width=n+"px",s.style.height=a+"px",s.width=n,s.height=a,s},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,s){try{e.srcObject=s}catch{e.src=URL.createObjectURL(s)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),pl=(function(){function t(e,s,n,a,i,o){n===void 0&&(n=s==null?0:8*s.length),o===void 0&&(o=Ca.currentTimeMillis()),this.text=e,this.rawBytes=s,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=s,n==null?this.numBits=s==null?0:8*s.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=Ca.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,s)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var s=this.resultPoints;if(s===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(s.length+e.length);Ca.arraycopy(s,0,n,0,s.length),Ca.arraycopy(e,0,n,s.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),wO;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(wO||(wO={}));const ls=wO;var jO;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(jO||(jO={}));const Bo=jO;var v3=(function(){function t(e,s,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=s,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),P1=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new cs;return this.logTable[e]},t.addOrSubtract=function(e,s){return e^s},t})(),Hf=(function(){function t(e,s){if(s.length===0)throw new cs;this.field=e;var n=s.length;if(n>1&&s[0]===0){for(var a=1;a<n&&s[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Ca.arraycopy(s,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var s=this.coefficients,n;if(e===1){n=0;for(var a=0,i=s.length;a!==i;a++){var o=s[a];n=P1.addOrSubtract(n,o)}return n}n=s[0];for(var l=s.length,c=this.field,a=1;a<l;a++)n=P1.addOrSubtract(c.multiply(e,n),s[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new cs("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var s=this.coefficients,n=e.coefficients;if(s.length>n.length){var a=s;s=n,n=a}var i=new Int32Array(n.length),o=n.length-s.length;Ca.arraycopy(n,0,i,0,o);for(var l=o;l<n.length;l++)i[l]=P1.addOrSubtract(s[l-o],n[l]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new cs("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var s=this.coefficients,n=s.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),l=this.field,c=0;c<n;c++)for(var d=s[c],u=0;u<i;u++)o[c+u]=P1.addOrSubtract(o[c+u],l.multiply(d,a[u]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var s=this.coefficients.length,n=this.field,a=new Int32Array(s),i=this.coefficients,o=0;o<s;o++)a[o]=n.multiply(i[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,s){if(e<0)throw new cs;if(s===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,l=0;l<a;l++)i[l]=o.multiply(n[l],s);return new t(o,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new cs("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new cs("Divide by 0");for(var s=this.field,n=s.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=s.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=s.multiply(a.getCoefficient(a.getDegree()),o),d=e.multiplyByMonomial(l,c),u=s.buildMonomial(l,c);n=n.addOrSubtract(u),a=a.addOrSubtract(d)}return[n,a]},t.prototype.toString=function(){for(var e="",s=this.getDegree();s>=0;s--){var n=this.getCoefficient(s);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),s===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}s!==0&&(s===1?e+="x":(e+="x^",e+=s))}}return e},t})(),Gqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),hie=(function(t){Gqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(uc),Yqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),sc=(function(t){Yqe(e,t);function e(s,n,a){var i=t.call(this)||this;i.primitive=s,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=s,l&=n-1);i.expTable=o;for(var d=new Int32Array(n),c=0;c<n-1;c++)d[o[c]]=c;return i.logTable=d,i.zero=new Hf(i,Int32Array.from([0])),i.one=new Hf(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(s,n){if(s<0)throw new cs;if(n===0)return this.zero;var a=new Int32Array(s+1);return a[0]=n,new Hf(this,a)},e.prototype.inverse=function(s){if(s===0)throw new hie;return this.expTable[this.size-this.logTable[s]-1]},e.prototype.multiply=function(s,n){return s===0||n===0?0:this.expTable[(this.logTable[s]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Js.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(s){return s===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(P1),Kqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Nj=(function(t){Kqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(uc),Xqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Vw=(function(t){Xqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(uc),y3=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,s){for(var n=this.field,a=new Hf(n,e),i=new Int32Array(s),o=!0,l=0;l<s;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));i[i.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var d=new Hf(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(s,1),d,s),h=u[0],m=u[1],f=this.findErrorLocations(h),v=this.findErrorMagnitudes(m,f),l=0;l<f.length;l++){var x=e.length-1-n.log(f[l]);if(x<0)throw new Nj("Bad error location");e[x]=sc.addOrSubtract(e[x],v[l])}},t.prototype.runEuclideanAlgorithm=function(e,s,n){if(e.getDegree()<s.getDegree()){var a=e;e=s,s=a}for(var i=this.field,o=e,l=s,c=i.getZero(),d=i.getOne();l.getDegree()>=(n/2|0);){var u=o,h=c;if(o=l,c=d,o.isZero())throw new Nj("r_{i-1} was zero");l=u;for(var m=i.getZero(),f=o.getCoefficient(o.getDegree()),v=i.inverse(f);l.getDegree()>=o.getDegree()&&!l.isZero();){var x=l.getDegree()-o.getDegree(),g=i.multiply(l.getCoefficient(l.getDegree()),v);m=m.addOrSubtract(i.buildMonomial(x,g)),l=l.addOrSubtract(o.multiplyByMonomial(x,g))}if(d=m.multiply(c).addOrSubtract(h),l.getDegree()>=o.getDegree())throw new Vw("Division algorithm failed to reduce polynomial?")}var b=d.getCoefficient(0);if(b===0)throw new Nj("sigmaTilde(0) was zero");var w=i.inverse(b),N=d.multiplyScalar(w),C=l.multiplyScalar(w);return[N,C]},t.prototype.findErrorLocations=function(e){var s=e.getDegree();if(s===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(s),a=0,i=this.field,o=1;o<i.getSize()&&a<s;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==s)throw new Nj("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,s){for(var n=s.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var l=i.inverse(s[o]),c=1,d=0;d<n;d++)if(o!==d){var u=i.multiply(s[d],l),h=(u&1)===0?u|1:u&-2;c=i.multiply(c,h)}a[o]=i.multiply(e.evaluateAt(l),i.inverse(c)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],l))}return a},t})(),Ro;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Ro||(Ro={}));var DH=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var s=e.getBits(),n=this.extractBits(s),a=this.correctBits(n),i=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new v3(i,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var s=e.length,n=Ro.UPPER,a=Ro.UPPER,i="",o=0;o<s;)if(a===Ro.BINARY){if(s-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(s-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(s-o<8){o=s;break}var d=t.readCode(e,o,8);i+=mn.castAsNonUtf8Char(d),o+=8}a=n}else{var u=a===Ro.DIGIT?4:5;if(s-o<u)break;var d=t.readCode(e,o,u);o+=u;var h=t.getCharacter(a,d);h.startsWith("CTRL_")?(n=a,a=t.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=a)):(i+=h,a=n)}return i},t.getTable=function(e){switch(e){case"L":return Ro.LOWER;case"P":return Ro.PUNCT;case"M":return Ro.MIXED;case"D":return Ro.DIGIT;case"B":return Ro.BINARY;case"U":default:return Ro.UPPER}},t.getCharacter=function(e,s){switch(e){case Ro.UPPER:return t.UPPER_TABLE[s];case Ro.LOWER:return t.LOWER_TABLE[s];case Ro.MIXED:return t.MIXED_TABLE[s];case Ro.PUNCT:return t.PUNCT_TABLE[s];case Ro.DIGIT:return t.DIGIT_TABLE[s];default:throw new Vw("Bad table")}},t.prototype.correctBits=function(e){var s,n;this.ddata.getNbLayers()<=2?(n=6,s=sc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,s=sc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,s=sc.AZTEC_DATA_10):(n=12,s=sc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new lr;for(var o=e.length%n,l=new Int32Array(i),c=0;c<i;c++,o+=n)l[c]=t.readCode(e,o,n);try{var d=new y3(s);d.decode(l,i-a)}catch(g){throw new lr(g)}for(var u=(1<<n)-1,h=0,c=0;c<a;c++){var m=l[c];if(m===0||m===u)throw new lr;(m===1||m===u-1)&&h++}for(var f=new Array(a*n-h),v=0,c=0;c<a;c++){var m=l[c];if(m===1||m===u-1)f.fill(m>1,v,v+n-1),v+=n-1;else for(var x=n-1;x>=0;--x)f[v++]=(m&1<<x)!==0}return f},t.prototype.extractBits=function(e){var s=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(s?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,s));if(s)for(var l=0;l<i.length;l++)i[l]=l;else for(var c=a+1+2*Js.truncDivision(Js.truncDivision(a,2)-1,15),d=a/2,u=Js.truncDivision(c,2),l=0;l<d;l++){var h=l+Js.truncDivision(l,15);i[d-l-1]=u-h-1,i[d+l]=u+h+1}for(var l=0,m=0;l<n;l++){for(var f=(n-l)*4+(s?9:12),v=l*2,x=a-1-v,g=0;g<f;g++)for(var b=g*2,w=0;w<2;w++)o[m+b+w]=e.get(i[v+w],i[v+g]),o[m+2*f+b+w]=e.get(i[v+g],i[x-w]),o[m+4*f+b+w]=e.get(i[x-w],i[x-g]),o[m+6*f+b+w]=e.get(i[x-g],i[v+w]);m+=f*8}return o},t.readCode=function(e,s,n){for(var a=0,i=s;i<s+n;i++)a<<=1,e[i]&&(a|=1);return a},t.readByte=function(e,s){var n=e.length-s;return n>=8?t.readCode(e,s,8):t.readCode(e,s,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var s=new Uint8Array((e.length+7)/8),n=0;n<s.length;n++)s[n]=t.readByte(e,8*n);return s},t.prototype.totalBitsInLayer=function(e,s){return((s?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),Nn=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,s,n,a){var i=e-n,o=s-a;return Math.sqrt(i*i+o*o)},t.sum=function(e){for(var s=0,n=0,a=e.length;n!==a;n++){var i=e[n];s+=i}return s},t})(),NO=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Hr=(function(){function t(e,s){this.x=e,this.y=s}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var s=e;return this.x===s.x&&this.y===s.y}return!1},t.prototype.hashCode=function(){return 31*NO.floatToIntBits(this.x)+NO.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var s=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,l;if(n>=s&&n>=a?(o=e[0],i=e[1],l=e[2]):a>=n&&a>=s?(o=e[1],i=e[0],l=e[2]):(o=e[2],i=e[0],l=e[1]),this.crossProductZ(i,o,l)<0){var c=i;i=l,l=c}e[0]=i,e[1]=o,e[2]=l},t.distance=function(e,s){return Nn.distance(e.x,e.y,s.x,s.y)},t.crossProductZ=function(e,s,n){var a=s.x,i=s.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},t})(),V8=(function(){function t(e,s){this.bits=e,this.points=s}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),Qqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Zqe=(function(t){Qqe(e,t);function e(s,n,a,i,o){var l=t.call(this,s,n)||this;return l.compact=a,l.nbDatablocks=i,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(V8),SO=(function(){function t(e,s,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),s==null&&(s=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=s/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new jt}return t.prototype.detect=function(){for(var e=this.leftInit,s=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,l=!1,c=!1,d=!1,u=!1,h=!1,m=this.width,f=this.height;o;){o=!1;for(var v=!0;(v||!c)&&s<m;)v=this.containsBlackPoint(n,a,s,!1),v?(s++,o=!0,c=!0):c||s++;if(s>=m){i=!0;break}for(var x=!0;(x||!d)&&a<f;)x=this.containsBlackPoint(e,s,a,!0),x?(a++,o=!0,d=!0):d||a++;if(a>=f){i=!0;break}for(var g=!0;(g||!u)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,u=!0):u||e--;if(e<0){i=!0;break}for(var b=!0;(b||!h)&&n>=0;)b=this.containsBlackPoint(e,s,n,!0),b?(n--,o=!0,h=!0):h||n--;if(n<0){i=!0;break}o&&(l=!0)}if(!i&&l){for(var w=s-e,N=null,C=1;N===null&&C<w;C++)N=this.getBlackPointOnSegment(e,a-C,e+C,a);if(N==null)throw new jt;for(var S=null,C=1;S===null&&C<w;C++)S=this.getBlackPointOnSegment(e,n+C,e+C,n);if(S==null)throw new jt;for(var A=null,C=1;A===null&&C<w;C++)A=this.getBlackPointOnSegment(s,n+C,s-C,n);if(A==null)throw new jt;for(var k=null,C=1;k===null&&C<w;C++)k=this.getBlackPointOnSegment(s,a-C,s-C,a);if(k==null)throw new jt;return this.centerEdges(k,N,A,S)}else throw new jt},t.prototype.getBlackPointOnSegment=function(e,s,n,a){for(var i=Nn.round(Nn.distance(e,s,n,a)),o=(n-e)/i,l=(a-s)/i,c=this.image,d=0;d<i;d++){var u=Nn.round(e+d*o),h=Nn.round(s+d*l);if(c.get(u,h))return new Hr(u,h)}return null},t.prototype.centerEdges=function(e,s,n,a){var i=e.getX(),o=e.getY(),l=s.getX(),c=s.getY(),d=n.getX(),u=n.getY(),h=a.getX(),m=a.getY(),f=t.CORR;return i<this.width/2?[new Hr(h-f,m+f),new Hr(l+f,c+f),new Hr(d-f,u-f),new Hr(i+f,o-f)]:[new Hr(h+f,m+f),new Hr(l+f,c-f),new Hr(d-f,u+f),new Hr(i-f,o-f)]},t.prototype.containsBlackPoint=function(e,s,n,a){var i=this.image;if(a){for(var o=e;o<=s;o++)if(i.get(o,n))return!0}else for(var l=e;l<=s;l++)if(i.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),RH=(function(){function t(){}return t.checkAndNudgePoints=function(e,s){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<s.length&&i;o+=2){var l=Math.floor(s[o]),c=Math.floor(s[o+1]);if(l<-1||l>n||c<-1||c>a)throw new jt;i=!1,l===-1?(s[o]=0,i=!0):l===n&&(s[o]=n-1,i=!0),c===-1?(s[o+1]=0,i=!0):c===a&&(s[o+1]=a-1,i=!0)}i=!0;for(var o=s.length-2;o>=0&&i;o-=2){var l=Math.floor(s[o]),c=Math.floor(s[o+1]);if(l<-1||l>n||c<-1||c>a)throw new jt;i=!1,l===-1?(s[o]=0,i=!0):l===n&&(s[o]=n-1,i=!0),c===-1?(s[o+1]=0,i=!0):c===a&&(s[o+1]=a-1,i=!0)}},t})(),mie=(function(){function t(e,s,n,a,i,o,l,c,d){this.a11=e,this.a21=s,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=l,this.a23=c,this.a33=d}return t.quadrilateralToQuadrilateral=function(e,s,n,a,i,o,l,c,d,u,h,m,f,v,x,g){var b=t.quadrilateralToSquare(e,s,n,a,i,o,l,c),w=t.squareToQuadrilateral(d,u,h,m,f,v,x,g);return w.times(b)},t.prototype.transformPoints=function(e){for(var s=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,l=this.a22,c=this.a23,d=this.a31,u=this.a32,h=this.a33,m=0;m<s;m+=2){var f=e[m],v=e[m+1],x=i*f+c*v+h;e[m]=(n*f+o*v+d)/x,e[m+1]=(a*f+l*v+u)/x}},t.prototype.transformPointsWithValues=function(e,s){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,l=this.a22,c=this.a23,d=this.a31,u=this.a32,h=this.a33,m=e.length,f=0;f<m;f++){var v=e[f],x=s[f],g=i*v+c*x+h;e[f]=(n*v+o*x+d)/g,s[f]=(a*v+l*x+u)/g}},t.squareToQuadrilateral=function(e,s,n,a,i,o,l,c){var d=e-n+i-l,u=s-a+o-c;if(d===0&&u===0)return new t(n-e,i-n,e,a-s,o-a,s,0,0,1);var h=n-i,m=l-i,f=a-o,v=c-o,x=h*v-m*f,g=(d*v-m*u)/x,b=(h*u-d*f)/x;return new t(n-e+g*n,l-e+b*l,e,a-s+g*a,c-s+b*c,s,g,b,1)},t.quadrilateralToSquare=function(e,s,n,a,i,o,l,c){return t.squareToQuadrilateral(e,s,n,a,i,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),Jqe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),eHe=(function(t){Jqe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(s,n,a,i,o,l,c,d,u,h,m,f,v,x,g,b,w,N,C){var S=mie.quadrilateralToQuadrilateral(i,o,l,c,d,u,h,m,f,v,x,g,b,w,N,C);return this.sampleGridWithTransform(s,n,a,S)},e.prototype.sampleGridWithTransform=function(s,n,a,i){if(n<=0||a<=0)throw new jt;for(var o=new Eh(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var d=l.length,u=c+.5,h=0;h<d;h+=2)l[h]=h/2+.5,l[h+1]=u;i.transformPoints(l),RH.checkAndNudgePoints(s,l);try{for(var h=0;h<d;h+=2)s.get(Math.floor(l[h]),Math.floor(l[h+1]))&&o.set(h/2,c)}catch{throw new jt}}return o},e})(RH),W8=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new eHe,t})(),Xl=(function(){function t(e,s){this.x=e,this.y=s}return t.prototype.toResultPoint=function(){return new Hr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),tHe=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var s=this.getMatrixCenter(),n=this.getBullsEyeCorners(s);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Zqe(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new jt;var s=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],s),this.sampleLine(e[1],e[2],s),this.sampleLine(e[2],e[3],s),this.sampleLine(e[3],e[0],s)]);this.shift=this.getRotation(n,s);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,s){var n=0;e.forEach(function(i,o,l){var c=(i>>s-2<<1)+(i&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Js.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new jt},t.prototype.getCorrectedParameterData=function(e,s){var n,a;s?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new y3(sc.AZTEC_PARAM);c.decode(o,i)}catch{throw new jt}for(var d=0,l=0;l<a;l++)d=(d<<4)+o[l];return d},t.prototype.getBullsEyeCorners=function(e){var s=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(s,o,1,-1),c=this.getFirstDifferent(n,o,1,1),d=this.getFirstDifferent(a,o,-1,1),u=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(u,l)*this.nbCenterLayers/(this.distancePoint(i,s)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(l,c,d,u))break}s=l,n=c,a=d,i=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new jt;this.compact=this.nbCenterLayers===5;var m=new Hr(s.getX()+.5,s.getY()-.5),f=new Hr(n.getX()+.5,n.getY()+.5),v=new Hr(a.getX()-.5,a.getY()+.5),x=new Hr(i.getX()-.5,i.getY()-.5);return this.expandSquare([m,f,v,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,s,n,a;try{var i=new SO(this.image).detect();e=i[0],s=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Xl(o+7,l-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xl(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Xl(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Xl(o-7,l-7),!1,-1,-1).toResultPoint()}var c=Nn.round((e.getX()+a.getX()+s.getX()+n.getX())/4),d=Nn.round((e.getY()+a.getY()+s.getY()+n.getY())/4);try{var i=new SO(this.image,15,c,d).detect();e=i[0],s=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new Xl(c+7,d-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xl(c+7,d+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Xl(c-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Xl(c-7,d-7),!1,-1,-1).toResultPoint()}return c=Nn.round((e.getX()+a.getX()+s.getX()+n.getX())/4),d=Nn.round((e.getY()+a.getY()+s.getY()+n.getY())/4),new Xl(c,d)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,s,n,a,i){var o=W8.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,d=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,d,c,d,d,c,d,s.getX(),s.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,s,n){for(var a=0,i=this.distanceResultPoint(e,s),o=i/n,l=e.getX(),c=e.getY(),d=o*(s.getX()-e.getX())/i,u=o*(s.getY()-e.getY())/i,h=0;h<n;h++)this.image.get(Nn.round(l+h*d),Nn.round(c+h*u))&&(a|=1<<n-h-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,s,n,a){var i=3;e=new Xl(e.getX()-i,e.getY()+i),s=new Xl(s.getX()-i,s.getY()-i),n=new Xl(n.getX()+i,n.getY()-i),a=new Xl(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,s);return l!==o||(l=this.getColor(s,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,s){for(var n=this.distancePoint(e,s),a=(s.getX()-e.getX())/n,i=(s.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),d=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),h=0;h<u;h++)l+=a,c+=i,this.image.get(Nn.round(l),Nn.round(c))!==d&&o++;var m=o/n;return m>.1&&m<.9?0:m<=.1===d?1:-1},t.prototype.getFirstDifferent=function(e,s,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===s;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===s;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===s;)o+=a;return o-=a,new Xl(i,o)},t.prototype.expandSquare=function(e,s,n){var a=n/(2*s),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,d=new Hr(l+a*i,c+a*o),u=new Hr(l-a*i,c-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var h=new Hr(l+a*i,c+a*o),m=new Hr(l-a*i,c-a*o),f=[d,h,u,m];return f},t.prototype.isValid=function(e,s){return e>=0&&e<this.image.getWidth()&&s>0&&s<this.image.getHeight()},t.prototype.isValidPoint=function(e){var s=Nn.round(e.getX()),n=Nn.round(e.getY());return this.isValid(s,n)},t.prototype.distancePoint=function(e,s){return Nn.distance(e.getX(),e.getY(),s.getX(),s.getY())},t.prototype.distanceResultPoint=function(e,s){return Nn.distance(e.getX(),e.getY(),s.getX(),s.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Js.truncDivision(this.nbLayers-4,8)+1)+15},t})(),F4=(function(){function t(){}return t.prototype.decode=function(e,s){s===void 0&&(s=null);var n=null,a=new tHe(e.getBlackMatrix()),i=null,o=null;try{var l=a.detectMirror(!1);i=l.getPoints(),this.reportFoundResultPoints(s,i),o=new DH().decode(l)}catch(h){n=h}if(o==null)try{var l=a.detectMirror(!0);i=l.getPoints(),this.reportFoundResultPoints(s,i),o=new DH().decode(l)}catch(h){throw n??h}var c=new pl(o.getText(),o.getRawBytes(),o.getNumBits(),i,ls.AZTEC,Ca.currentTimeMillis()),d=o.getByteSegments();d!=null&&c.putMetadata(Bo.BYTE_SEGMENTS,d);var u=o.getECLevel();return u!=null&&c.putMetadata(Bo.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reportFoundResultPoints=function(e,s){if(e!=null){var n=e.get(ka.NEED_RESULT_POINT_CALLBACK);n!=null&&s.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t})(),rHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){rHe(e,t);function e(s){return s===void 0&&(s=500),t.call(this,new F4,s)||this}return e})(uy);var so=(function(){function t(){}return t.prototype.decode=function(e,s){try{return this.doDecode(e,s)}catch{var n=s&&s.get(ka.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,s),o=i.getResultMetadata(),l=270;o!==null&&o.get(Bo.ORIENTATION)===!0&&(l=l+o.get(Bo.ORIENTATION)%360),i.putMetadata(Bo.ORIENTATION,l);var c=i.getResultPoints();if(c!==null)for(var d=a.getHeight(),u=0;u<c.length;u++)c[u]=new Hr(d-c[u].getY()-1,c[u].getX());return i}else throw new jt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,s){var n=e.getWidth(),a=e.getHeight(),i=new ko(n),o=s&&s.get(ka.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var d=Math.trunc(a/2),u=0;u<c;u++){var h=Math.trunc((u+1)/2),m=(u&1)===0,f=d+l*(m?h:-h);if(f<0||f>=a)break;try{i=e.getBlackRow(f,i)}catch{continue}for(var v=function(w){if(w===1&&(i.reverse(),s&&s.get(ka.NEED_RESULT_POINT_CALLBACK)===!0)){var N=new Map;s.forEach(function(A,k){return N.set(k,A)}),N.delete(ka.NEED_RESULT_POINT_CALLBACK),s=N}try{var C=x.decodeRow(f,i,s);if(w===1){C.putMetadata(Bo.ORIENTATION,180);var S=C.getResultPoints();S!==null&&(S[0]=new Hr(n-S[0].getX()-1,S[0].getY()),S[1]=new Hr(n-S[1].getX()-1,S[1].getY()))}return{value:C}}catch{}},x=this,g=0;g<2;g++){var b=v(g);if(typeof b=="object")return b.value}}throw new jt},t.recordPattern=function(e,s,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(s>=o)throw new jt;for(var l=!e.get(s),c=0,d=s;d<o;){if(e.get(d)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}d++}if(!(c===a||c===a-1&&d===o))throw new jt},t.recordPatternInReverse=function(e,s,n){for(var a=n.length,i=e.get(s);s>0&&a>=0;)e.get(--s)!==i&&(a--,i=!i);if(a>=0)throw new jt;t.recordPattern(e,s+1,n)},t.patternMatchVariance=function(e,s,n){for(var a=e.length,i=0,o=0,l=0;l<a;l++)i+=e[l],o+=s[l];if(i<o)return Number.POSITIVE_INFINITY;var c=i/o;n*=c;for(var d=0,u=0;u<a;u++){var h=e[u],m=s[u]*c,f=h>m?h-m:m-h;if(f>n)return Number.POSITIVE_INFINITY;d+=f}return d/i},t})(),sHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),MH=(function(t){sHe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(s){for(var n=s.getSize(),a=s.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,d=6,u=a;u<n;u++)if(s.get(u)!==c)o[i]++;else{if(i===d-1){for(var h=e.MAX_AVG_VARIANCE,m=-1,f=e.CODE_START_A;f<=e.CODE_START_C;f++){var v=so.patternMatchVariance(o,e.CODE_PATTERNS[f],e.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,m=f)}if(m>=0&&s.isRange(Math.max(0,l-(u-l)/2),l,!1))return Int32Array.from([l,u,m]);l+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,c=!c}throw new jt},e.decodeCode=function(s,n,a){so.recordPattern(s,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],d=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);d<i&&(i=d,o=l)}if(o>=0)return o;throw new jt},e.prototype.decodeRow=function(s,n,a){var i=a&&a.get(ka.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,d=new Uint8Array(20);d[c++]=l;var u;switch(l){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new lr}for(var h=!1,m=!1,f="",v=o[0],x=o[1],g=Int32Array.from([0,0,0,0,0,0]),b=0,w=0,N=l,C=0,S=!0,A=!1,k=!1;!h;){var E=m;switch(m=!1,b=w,w=e.decodeCode(n,g,x),d[c++]=w,w!==e.CODE_STOP&&(S=!0),w!==e.CODE_STOP&&(C++,N+=C*w),v=x,x+=g.reduce(function(B,F){return B+F},0),w){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new lr}switch(u){case e.CODE_CODE_A:if(w<64)k===A?f+=String.fromCharCode(32+w):f+=String.fromCharCode(32+w+128),k=!1;else if(w<96)k===A?f+=String.fromCharCode(w-64):f+=String.fromCharCode(w+64),k=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!A&&k?(A=!0,k=!1):A&&k?(A=!1,k=!1):k=!0;break;case e.CODE_SHIFT:m=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(w<96)k===A?f+=String.fromCharCode(32+w):f+=String.fromCharCode(32+w+128),k=!1;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(f.length===0?f+="]C1":f+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!A&&k?(A=!0,k=!1):A&&k?(A=!1,k=!1):k=!0;break;case e.CODE_SHIFT:m=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(w<100)w<10&&(f+="0"),f+=w;else switch(w!==e.CODE_STOP&&(S=!1),w){case e.CODE_FNC_1:i&&(f.length===0?f+="]C1":f+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}E&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var O=x-v;if(x=n.getNextUnset(x),!n.isRange(x,Math.min(n.getSize(),x+(x-v)/2),!1))throw new jt;if(N-=C*b,N%103!==b)throw new Li;var $=f.length;if($===0)throw new jt;$>0&&S&&(u===e.CODE_CODE_C?f=f.substring(0,$-2):f=f.substring(0,$-1));for(var T=(o[1]+o[0])/2,I=v+O/2,L=d.length,z=new Uint8Array(L),M=0;M<L;M++)z[M]=d[M];var V=[new Hr(T,s),new Hr(I,s)];return new pl(f,z,0,V,ls.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(so),nHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),dE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LH=(function(t){nHe(e,t);function e(s,n){s===void 0&&(s=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=s,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(s,n,a){var i,o,l,c,d=this.counters;d.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,d),h=n.getNextSet(u[1]),m=n.getSize(),f,v;do{e.recordPattern(n,h,d);var x=e.toNarrowWidePattern(d);if(x<0)throw new jt;f=e.patternToChar(x),this.decodeRowResult+=f,v=h;try{for(var g=(i=void 0,dE(d)),b=g.next();!b.done;b=g.next()){var w=b.value;h+=w}}catch(L){i={error:L}}finally{try{b&&!b.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}h=n.getNextSet(h)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var C=dE(d),S=C.next();!S.done;S=C.next()){var w=S.value;N+=w}}catch(L){l={error:L}}finally{try{S&&!S.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}var A=h-v-N;if(h!==m&&A*2<N)throw new jt;if(this.usingCheckDigit){for(var k=this.decodeRowResult.length-1,E=0,O=0;O<k;O++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(O));if(this.decodeRowResult.charAt(k)!==e.ALPHABET_STRING.charAt(E%43))throw new Li;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new jt;var $;this.extendedMode?$=e.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;var T=(u[1]+u[0])/2,I=v+N/2;return new pl($,null,0,[new Hr(T,s),new Hr(I,s)],ls.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(s,n){for(var a=s.getSize(),i=s.getNextSet(0),o=0,l=i,c=!1,d=n.length,u=i;u<a;u++)if(s.get(u)!==c)n[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&s.isRange(Math.max(0,l-Math.floor((u-l)/2)),l,!1))return[l,u];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new jt},e.toNarrowWidePattern=function(s){var n,a,i=s.length,o=0,l;do{var c=2147483647;try{for(var d=(n=void 0,dE(s)),u=d.next();!u.done;u=d.next()){var h=u.value;h<c&&h>o&&(c=h)}}catch(x){n={error:x}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o=c,l=0;for(var m=0,f=0,v=0;v<i;v++){var h=s[v];h>o&&(f|=1<<i-1-v,l++,m+=h)}if(l===3){for(var v=0;v<i&&l>0;v++){var h=s[v];if(h>o&&(l--,h*2>=m))return-1}return f}}while(l>3);return-1},e.patternToChar=function(s){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===s)return e.ALPHABET_STRING.charAt(n);if(s===e.ASTERISK_ENCODING)return"*";throw new jt},e.decodeExtended=function(s){for(var n=s.length,a="",i=0;i<n;i++){var o=s.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=s.charAt(i+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new lr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new lr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new lr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new lr;break}a+=c,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(so),aHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),uE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FH=(function(t){aHe(e,t);function e(){var s=t.call(this)||this;return s.decodeRowResult="",s.counters=new Int32Array(6),s}return e.prototype.decodeRow=function(s,n,a){var i,o,l,c,d=this.findAsteriskPattern(n),u=n.getNextSet(d[1]),h=n.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var f,v;do{e.recordPattern(n,u,m);var x=this.toPattern(m);if(x<0)throw new jt;f=this.patternToChar(x),this.decodeRowResult+=f,v=u;try{for(var g=(i=void 0,uE(m)),b=g.next();!b.done;b=g.next()){var w=b.value;u+=w}}catch(O){i={error:O}}finally{try{b&&!b.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}u=n.getNextSet(u)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var N=0;try{for(var C=uE(m),S=C.next();!S.done;S=C.next()){var w=S.value;N+=w}}catch(O){l={error:O}}finally{try{S&&!S.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}if(u===h||!n.get(u))throw new jt;if(this.decodeRowResult.length<2)throw new jt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var A=this.decodeExtended(this.decodeRowResult),k=(d[1]+d[0])/2,E=v+N/2;return new pl(A,null,0,[new Hr(k,s),new Hr(E,s)],ls.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(s){var n=s.getSize(),a=s.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,l=!1,c=i.length,d=0,u=a;u<n;u++)if(s.get(u)!==l)i[d]++;else{if(d===c-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=i[0]+i[1],i.copyWithin(0,2,2+d-1),i[d-1]=0,i[d]=0,d--}else d++;i[d]=1,l=!l}throw new jt},e.prototype.toPattern=function(s){var n,a,i=0;try{for(var o=uE(s),l=o.next();!l.done;l=o.next()){var c=l.value;i+=c}}catch(v){n={error:v}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var d=0,u=s.length,h=0;h<u;h++){var m=Math.round(s[h]*9/i);if(m<1||m>4)return-1;if((h&1)===0)for(var f=0;f<m;f++)d=d<<1|1;else d<<=m}return d},e.prototype.patternToChar=function(s){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===s)return e.ALPHABET_STRING.charAt(n);throw new jt},e.prototype.decodeExtended=function(s){for(var n=s.length,a="",i=0;i<n;i++){var o=s.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new lr;var l=s.charAt(i+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new lr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new lr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new lr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new lr;break}a+=c,i++}else a+=o}return a},e.prototype.checkChecksums=function(s){var n=s.length;this.checkOneChecksum(s,n-2,20),this.checkOneChecksum(s,n-1,15)},e.prototype.checkOneChecksum=function(s,n,a){for(var i=1,o=0,l=n-1;l>=0;l--)o+=i*e.ALPHABET_STRING.indexOf(s.charAt(l)),++i>a&&(i=1);if(s.charAt(n)!==e.ALPHABET_STRING[o%47])throw new Li},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(so),iHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),oHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BH=(function(t){iHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.narrowLineWidth=-1,s}return e.prototype.decodeRow=function(s,n,a){var i,o,l=this.decodeStart(n),c=this.decodeEnd(n),d=new Ks;e.decodeMiddle(n,l[1],c[0],d);var u=d.toString(),h=null;a!=null&&(h=a.get(ka.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var m=u.length,f=!1,v=0;try{for(var x=oHe(h),g=x.next();!g.done;g=x.next()){var b=g.value;if(m===b){f=!0;break}b>v&&(v=b)}}catch(C){i={error:C}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}if(!f&&m>v&&(f=!0),!f)throw new lr;var w=[new Hr(l[1],s),new Hr(c[0],s)],N=new pl(u,null,0,w,ls.ITF,new Date().getTime());return N},e.decodeMiddle=function(s,n,a,i){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){so.recordPattern(s,n,o);for(var d=0;d<5;d++){var u=2*d;l[d]=o[u],c[d]=o[u+1]}var h=e.decodeDigit(l);i.append(h.toString()),h=this.decodeDigit(c),i.append(h.toString()),o.forEach(function(m){n+=m})}},e.prototype.decodeStart=function(s){var n=e.skipWhiteSpace(s),a=e.findGuardPattern(s,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(s,a[0]),a},e.prototype.validateQuietZone=function(s,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!s.get(i);i--)a--;if(a!==0)throw new jt},e.skipWhiteSpace=function(s){var n=s.getSize(),a=s.getNextSet(0);if(a===n)throw new jt;return a},e.prototype.decodeEnd=function(s){s.reverse();try{var n=e.skipWhiteSpace(s),a=void 0;try{a=e.findGuardPattern(s,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof jt&&(a=e.findGuardPattern(s,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,a[0]);var i=a[0];return a[0]=s.getSize()-a[1],a[1]=s.getSize()-i,a}finally{s.reverse()}},e.findGuardPattern=function(s,n,a){var i=a.length,o=new Int32Array(i),l=s.getSize(),c=!1,d=0,u=n;o.fill(0);for(var h=n;h<l;h++)if(s.get(h)!==c)o[d]++;else{if(d===i-1){if(so.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,h];u+=o[0]+o[1],Ca.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,c=!c}throw new jt},e.decodeDigit=function(s){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var l=e.PATTERNS[o],c=so.patternMatchVariance(s,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new jt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(so),lHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Fv=(function(t){lHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.decodeRowStringBuffer="",s}return e.findStartGuardPattern=function(s){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(s,i,!1,this.START_END_PATTERN,o);var l=a[0];i=a[1];var c=l-(i-l);c>=0&&(n=s.isRange(c,l,!1))}return a},e.checkChecksum=function(s){return e.checkStandardUPCEANChecksum(s)},e.checkStandardUPCEANChecksum=function(s){var n=s.length;if(n===0)return!1;var a=parseInt(s.charAt(n-1),10);return e.getStandardUPCEANChecksum(s.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(s){for(var n=s.length,a=0,i=n-1;i>=0;i-=2){var o=s.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new lr;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=s.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new lr;a+=o}return(1e3-a)%10},e.decodeEnd=function(s,n){return e.findGuardPattern(s,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(s,n,a,i){return this.findGuardPattern(s,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(s,n,a,i,o){var l=s.getSize();n=a?s.getNextUnset(n):s.getNextSet(n);for(var c=0,d=n,u=i.length,h=a,m=n;m<l;m++)if(s.get(m)!==h)o[c]++;else{if(c===u-1){if(so.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,m]);d+=o[0]+o[1];for(var f=o.slice(2,o.length),v=0;v<c-1;v++)o[v]=f[v];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,h=!h}throw new jt},e.decodeDigit=function(s,n,a,i){this.recordPattern(s,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=i.length,d=0;d<c;d++){var u=i[d],h=so.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,l=d)}if(l>=0)return l;throw new jt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(so),cHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dHe=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,s,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(s,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new Hr((n[0]+n[1])/2,e),new Hr(i,e)],d=new pl(o,null,0,c,ls.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d},t.prototype.decodeMiddle=function(e,s,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=s[1],d=0,u=0;u<5&&c<l;u++){var h=Fv.decodeDigit(e,o,c,Fv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var m=(a=void 0,cHe(o)),f=m.next();!f.done;f=m.next()){var v=f.value;c+=v}}catch(g){a={error:g}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}h>=10&&(d|=1<<4-u),u!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new jt;var x=this.determineCheckDigit(d);if(t.extensionChecksum(n.toString())!==x)throw new jt;return c},t.extensionChecksum=function(e){for(var s=e.length,n=0,a=s-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=s-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var s=0;s<10;s++)if(e===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new jt},t.parseExtensionString=function(e){if(e.length!==5)return null;var s=t.parseExtension5String(e);return s==null?null:new Map([[Bo.SUGGESTED_PRICE,s]])},t.parseExtension5String=function(e){var s;switch(e.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return s+a+"."+o},t})(),uHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hHe=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,s,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(s,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new Hr((n[0]+n[1])/2,e),new Hr(i,e)],d=new pl(o,null,0,c,ls.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&d.putAllMetadata(l),d},t.prototype.decodeMiddle=function(e,s,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=s[1],d=0,u=0;u<2&&c<l;u++){var h=Fv.decodeDigit(e,o,c,Fv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var m=(a=void 0,uHe(o)),f=m.next();!f.done;f=m.next()){var v=f.value;c+=v}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}h>=10&&(d|=1<<1-u),u!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new jt;if(parseInt(n.toString())%4!==d)throw new jt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Bo.ISSUE_NUMBER,parseInt(e)]])},t})(),mHe=(function(){function t(){}return t.decodeRow=function(e,s,n){var a=Fv.findGuardPattern(s,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new dHe;return i.decodeRow(e,s,a)}catch{var o=new hHe;return o.decodeRow(e,s,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),fHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Qi=(function(t){fHe(e,t);function e(){var s=t.call(this)||this;s.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return s}return e.prototype.decodeRow=function(s,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(ka.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new Hr((i[0]+i[1])/2,s);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,i,this.decodeRowStringBuffer),d=c.rowOffset,u=c.resultString;if(o!=null){var h=new Hr(d,s);o.foundPossibleResultPoint(h)}var m=e.decodeEnd(n,d);if(o!=null){var f=new Hr((m[0]+m[1])/2,s);o.foundPossibleResultPoint(f)}var v=m[1],x=v+(v-m[0]);if(x>=n.getSize()||!n.isRange(v,x,!1))throw new jt;var g=u.toString();if(g.length<8)throw new lr;if(!e.checkChecksum(g))throw new Li;var b=(i[1]+i[0])/2,w=(m[1]+m[0])/2,N=this.getBarcodeFormat(),C=[new Hr(b,s),new Hr(w,s)],S=new pl(g,null,0,C,N,new Date().getTime()),A=0;try{var k=mHe.decodeRow(s,n,m[1]);S.putMetadata(Bo.UPC_EAN_EXTENSION,k.getText()),S.putAllMetadata(k.getResultMetadata()),S.addResultPoints(k.getResultPoints()),A=k.getText().length}catch{}var E=a==null?null:a.get(ka.ALLOWED_EAN_EXTENSIONS);if(E!=null){var O=!1;for(var $ in E)if(A.toString()===$){O=!0;break}if(!O)throw new jt}return N===ls.EAN_13||ls.UPC_A,S},e.checkChecksum=function(s){return e.checkStandardUPCEANChecksum(s)},e.checkStandardUPCEANChecksum=function(s){var n=s.length;if(n===0)return!1;var a=parseInt(s.charAt(n-1),10);return e.getStandardUPCEANChecksum(s.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(s){for(var n=s.length,a=0,i=n-1;i>=0;i-=2){var o=s.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new lr;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=s.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new lr;a+=o}return(1e3-a)%10},e.decodeEnd=function(s,n){return e.findGuardPattern(s,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Fv),pHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),UH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=(function(t){pHe(e,t);function e(){var s=t.call(this)||this;return s.decodeMiddleCounters=Int32Array.from([0,0,0,0]),s}return e.prototype.decodeMiddle=function(s,n,a){var i,o,l,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var u=s.getSize(),h=n[1],m=0,f=0;f<6&&h<u;f++){var v=Qi.decodeDigit(s,d,h,Qi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);try{for(var x=(i=void 0,UH(d)),g=x.next();!g.done;g=x.next()){var b=g.value;h+=b}}catch(S){i={error:S}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}v>=10&&(m|=1<<5-f)}a=e.determineFirstDigit(a,m);var w=Qi.findGuardPattern(s,h,!0,Qi.MIDDLE_PATTERN,new Int32Array(Qi.MIDDLE_PATTERN.length).fill(0));h=w[1];for(var f=0;f<6&&h<u;f++){var v=Qi.decodeDigit(s,d,h,Qi.L_PATTERNS);a+=String.fromCharCode(48+v);try{for(var N=(l=void 0,UH(d)),C=N.next();!C.done;C=N.next()){var b=C.value;h+=b}}catch(k){l={error:k}}finally{try{C&&!C.done&&(c=N.return)&&c.call(N)}finally{if(l)throw l.error}}}return{rowOffset:h,resultString:a}},e.prototype.getBarcodeFormat=function(){return ls.EAN_13},e.determineFirstDigit=function(s,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return s=String.fromCharCode(48+a)+s,s;throw new jt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Qi),xHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),zH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VH=(function(t){xHe(e,t);function e(){var s=t.call(this)||this;return s.decodeMiddleCounters=Int32Array.from([0,0,0,0]),s}return e.prototype.decodeMiddle=function(s,n,a){var i,o,l,c,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var u=s.getSize(),h=n[1],m=0;m<4&&h<u;m++){var f=Qi.decodeDigit(s,d,h,Qi.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var v=(i=void 0,zH(d)),x=v.next();!x.done;x=v.next()){var g=x.value;h+=g}}catch(C){i={error:C}}finally{try{x&&!x.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}var b=Qi.findGuardPattern(s,h,!0,Qi.MIDDLE_PATTERN,new Int32Array(Qi.MIDDLE_PATTERN.length).fill(0));h=b[1];for(var m=0;m<4&&h<u;m++){var f=Qi.decodeDigit(s,d,h,Qi.L_PATTERNS);a+=String.fromCharCode(48+f);try{for(var w=(l=void 0,zH(d)),N=w.next();!N.done;N=w.next()){var g=N.value;h+=g}}catch(A){l={error:A}}finally{try{N&&!N.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}}return{rowOffset:h,resultString:a}},e.prototype.getBarcodeFormat=function(){return ls.EAN_8},e})(Qi),gHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),WH=(function(t){gHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.ean13Reader=new CO,s}return e.prototype.getBarcodeFormat=function(){return ls.UPC_A},e.prototype.decode=function(s,n){return this.maybeReturnResult(this.ean13Reader.decode(s))},e.prototype.decodeRow=function(s,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,n,a))},e.prototype.decodeMiddle=function(s,n,a){return this.ean13Reader.decodeMiddle(s,n,a)},e.prototype.maybeReturnResult=function(s){var n=s.getText();if(n.charAt(0)==="0"){var a=new pl(n.substring(1),null,null,s.getResultPoints(),ls.UPC_A);return s.getResultMetadata()!=null&&a.putAllMetadata(s.getResultMetadata()),a}else throw new jt},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Qi),vHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),yHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qH=(function(t){vHe(e,t);function e(){var s=t.call(this)||this;return s.decodeMiddleCounters=new Int32Array(4),s}return e.prototype.decodeMiddle=function(s,n,a){var i,o,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=s.getSize(),d=n[1],u=0,h=0;h<6&&d<c;h++){var m=e.decodeDigit(s,l,d,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var f=(i=void 0,yHe(l)),v=f.next();!v.done;v=f.next()){var x=v.value;d+=x}}catch(g){i={error:g}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}m>=10&&(u|=1<<5-h)}return e.determineNumSysAndCheckDigit(new Ks(a),u),d},e.prototype.decodeEnd=function(s,n){return e.findGuardPatternWithoutCounters(s,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(s){return Qi.checkChecksum(e.convertUPCEtoUPCA(s))},e.determineNumSysAndCheckDigit=function(s,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){s.insert(0,"0"+a),s.append("0"+i);return}throw jt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ls.UPC_E},e.convertUPCEtoUPCA=function(s){var n=s.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new Ks;a.append(s.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return s.length>=8&&a.append(s.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Qi),bHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),HH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hE=(function(t){bHe(e,t);function e(s){var n=t.call(this)||this,a=s==null?null:s.get(ka.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(ls.EAN_13)>-1&&i.push(new CO),a.indexOf(ls.UPC_A)>-1&&i.push(new WH),a.indexOf(ls.EAN_8)>-1&&i.push(new VH),a.indexOf(ls.UPC_E)>-1&&i.push(new qH)),i.length===0&&(i.push(new CO),i.push(new WH),i.push(new VH),i.push(new qH)),n.readers=i,n}return e.prototype.decodeRow=function(s,n,a){var i,o;try{for(var l=HH(this.readers),c=l.next();!c.done;c=l.next()){var d=c.value;try{var u=d.decodeRow(s,n,a),h=u.getBarcodeFormat()===ls.EAN_13&&u.getText().charAt(0)==="0",m=a==null?null:a.get(ka.POSSIBLE_FORMATS),f=m==null||m.includes(ls.UPC_A);if(h&&f){var v=u.getRawBytes(),x=new pl(u.getText().substring(1),v,v?v.length:null,u.getResultPoints(),ls.UPC_A);return x.putAllMetadata(u.getResultMetadata()),x}return u}catch{}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}throw new jt},e.prototype.reset=function(){var s,n;try{for(var a=HH(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}},e})(so),wHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),jHe=(function(t){wHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},s}return e.prototype.decodeRow=function(s,n,a){var i=this.getValidRowData(n);if(!i)throw new jt;var o=this.codaBarDecodeRow(i.row);if(!o)throw new jt;return new pl(o,null,0,[new Hr(i.left,s),new Hr(i.right,s)],ls.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(s){var n=s.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],l=n[0],c=1,d=1;d<n.length;d++)n[d]===l?c++:(l=n[d],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(s){for(var n=[],a=Math.ceil(s.reduce(function(c,d){return(c+d)/2},0));s.length>0;){var i=s.splice(0,8).splice(0,7),o=i.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(s){var n=/^[A-D].{1,}[A-D]$/;return n.test(s)},e})(so),NHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),SHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ux=(function(t){NHe(e,t);function e(){var s=t.call(this)||this;return s.decodeFinderCounters=new Int32Array(4),s.dataCharacterCounters=new Int32Array(8),s.oddRoundingErrors=new Array(4),s.evenRoundingErrors=new Array(4),s.oddCounts=new Array(s.dataCharacterCounters.length/2),s.evenCounts=new Array(s.dataCharacterCounters.length/2),s}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(s,n){for(var a=0;a<n.length;a++)if(so.patternMatchVariance(s,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new jt},e.count=function(s){return Nn.sum(new Int32Array(s))},e.increment=function(s,n){for(var a=0,i=n[0],o=1;o<s.length;o++)n[o]>i&&(i=n[o],a=o);s[a]++},e.decrement=function(s,n){for(var a=0,i=n[0],o=1;o<s.length;o++)n[o]<i&&(i=n[o],a=o);s[a]--},e.isFinderPattern=function(s){var n,a,i=s[0]+s[1],o=i+s[2]+s[3],l=i/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var u=SHe(s),h=u.next();!h.done;h=u.next()){var m=h.value;m>d&&(d=m),m<c&&(c=m)}}catch(f){n={error:f}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return d<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(so),B4=(function(){function t(e,s){this.value=e,this.checksumPortion=s}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.value===s.value&&this.checksumPortion===s.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),fie=(function(){function t(e,s,n,a,i){this.value=e,this.startEnd=s,this.value=e,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Hr(n,i)),this.resultPoints.push(new Hr(a,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.value===s.value},t.prototype.hashCode=function(){return this.value},t})(),CHe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D0=(function(){function t(){}return t.getRSSvalue=function(e,s,n){var a,i,o=0;try{for(var l=CHe(e),c=l.next();!c.done;c=l.next()){var d=c.value;o+=d}}catch(w){a={error:w}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}for(var u=0,h=0,m=e.length,f=0;f<m-1;f++){var v=void 0;for(v=1,h|=1<<f;v<e[f];v++,h&=~(1<<f)){var x=t.combins(o-v-1,m-f-2);if(n&&h===0&&o-v-(m-f-1)>=m-f-1&&(x-=t.combins(o-v-(m-f),m-f-2)),m-f-1>1){for(var g=0,b=o-v-(m-f-2);b>s;b--)g+=t.combins(o-v-b-1,m-f-3);x-=g*(m-1-f)}else o-v>s&&x--;u+=x}o-=v}return u},t.combins=function(e,s){var n,a;e-s>s?(a=s,n=e-s):(a=e-s,n=s);for(var i=1,o=1,l=e;l>n;l--)i*=l,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},t})(),kHe=(function(){function t(){}return t.buildBitArray=function(e){var s=e.length*2-1;e[e.length-1].getRightChar()==null&&(s-=1);for(var n=12*s,a=new ko(n),i=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&a.set(i),i++;for(var c=1;c<e.length;++c){for(var d=e[c],u=d.getLeftChar().getValue(),h=11;h>=0;--h)(u&1<<h)!==0&&a.set(i),i++;if(d.getRightChar()!==null)for(var m=d.getRightChar().getValue(),h=11;h>=0;--h)(m&1<<h)!==0&&a.set(i),i++}return a},t})(),rx=(function(){function t(e,s){s?this.decodedInformation=null:(this.finished=e,this.decodedInformation=s)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),q8=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),_He=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),iu=(function(t){_He(e,t);function e(s,n){var a=t.call(this,s)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(q8),AHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),sx=(function(t){AHe(e,t);function e(s,n,a){var i=t.call(this,s)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(q8),EHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),g0=(function(t){EHe(e,t);function e(s,n,a){var i=t.call(this,s)||this;if(n<0||n>10||a<0||a>10)throw new lr;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(q8),Sj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PHe=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var s,n,a,i,o,l,c,d;if(!e)return null;if(e.length<2)throw new jt;var u=e.substring(0,2);try{for(var h=Sj(t.TWO_DIGIT_DATA_LENGTH),m=h.next();!m.done;m=h.next()){var f=m.value;if(f[0]===u)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,f[2],e):t.processFixedAI(2,f[1],e)}}catch(A){s={error:A}}finally{try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(s)throw s.error}}if(e.length<3)throw new jt;var v=e.substring(0,3);try{for(var x=Sj(t.THREE_DIGIT_DATA_LENGTH),g=x.next();!g.done;g=x.next()){var f=g.value;if(f[0]===v)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,f[2],e):t.processFixedAI(3,f[1],e)}}catch(A){a={error:A}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}try{for(var b=Sj(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),w=b.next();!w.done;w=b.next()){var f=w.value;if(f[0]===v)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(A){o={error:A}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}if(e.length<4)throw new jt;var N=e.substring(0,4);try{for(var C=Sj(t.FOUR_DIGIT_DATA_LENGTH),S=C.next();!S.done;S=C.next()){var f=S.value;if(f[0]===N)return f[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,f[2],e):t.processFixedAI(4,f[1],e)}}catch(A){c={error:A}}finally{try{S&&!S.done&&(d=C.return)&&d.call(C)}finally{if(c)throw c.error}}throw new jt},t.processFixedAI=function(e,s,n){if(n.length<e)throw new jt;var a=n.substring(0,e);if(n.length<e+s)throw new jt;var i=n.substring(e,e+s),o=n.substring(e+s),l="("+a+")"+i,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,s,n){var a=n.substring(0,e),i;n.length<e+s?i=n.length:i=e+s;var o=n.substring(e,i),l=n.substring(i),c="("+a+")"+o,d=t.parseFieldsInGeneralPurpose(l);return d==null?c:c+d},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),eN=(function(){function t(e){this.buffer=new Ks,this.information=e}return t.prototype.decodeAllCodes=function(e,s){var n=s,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=PHe.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var s=e;s<e+3;++s)if(this.information.get(s))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var s=this.extractNumericValueFromBitArray(e,4);return s===0?new g0(this.information.getSize(),g0.FNC1,g0.FNC1):new g0(this.information.getSize(),s-1,g0.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new g0(e+7,a,i)},t.prototype.extractNumericValueFromBitArray=function(e,s){return t.extractNumericValueFromBitArray(this.information,e,s)},t.extractNumericValueFromBitArray=function(e,s,n){for(var a=0,i=0;i<n;++i)e.get(s+i)&&(a|=1<<n-i-1);return a},t.prototype.decodeGeneralPurposeField=function(e,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new sx(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new sx(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,s;do{var n=this.current.getPosition();this.current.isAlpha()?(s=this.parseAlphaBlock(),e=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),e=s.isFinished()):(s=this.parseNumericBlock(),e=s.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return s.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var s=void 0;return e.isSecondDigitFNC1()?s=new sx(this.current.getPosition(),this.buffer.toString()):s=new sx(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new rx(!0,s)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var s=new sx(this.current.getPosition(),this.buffer.toString());return new rx(!0,s)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new rx(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var s=new sx(this.current.getPosition(),this.buffer.toString());return new rx(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new rx(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var s=new sx(this.current.getPosition(),this.buffer.toString());return new rx(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new rx(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new iu(e+5,iu.FNC1);if(s>=5&&s<15)return new iu(e+5,"0"+(s-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new iu(e+7,""+(n+1));if(n>=90&&n<116)return new iu(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new lr}return new iu(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new iu(e+5,iu.FNC1);if(s>=5&&s<15)return new iu(e+5,"0"+(s-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new iu(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Vw("Decoding invalid alphanumeric value: "+n)}return new iu(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var s=0;s<5&&s+e<this.information.getSize();++s)if(s===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+s))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var s=e;s<e+3;++s)if(this.information.get(s))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var s=0;s<4&&s+e<this.information.getSize();++s)if(this.information.get(e+s))return!1;return!0},t})(),pie=(function(){function t(e){this.information=e,this.generalDecoder=new eN(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),THe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),vu=(function(t){THe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.encodeCompressedGtin=function(s,n){s.append("(01)");var a=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(s,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&s.append("0"),o/10===0&&s.append("0"),s.append(o)}e.appendCheckDigit(s,a)},e.appendCheckDigit=function(s,n){for(var a=0,i=0;i<13;i++){var o=s.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),s.append(a)},e.GTIN_SIZE=40,e})(pie),OHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),IHe=(function(t){OHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.parseInformation=function(){var s=new Ks;s.append("(01)");var n=s.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return s.append(a),this.encodeCompressedGtinWithoutAI(s,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(s,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(vu),$He=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),DHe=(function(t){$He(e,t);function e(s){return t.call(this,s)||this}return e.prototype.parseInformation=function(){var s=new Ks;return this.getGeneralDecoder().decodeAllCodes(s,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(pie),RHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),tN=(function(t){RHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.encodeCompressedWeight=function(s,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(s,i);for(var o=this.checkWeight(i),l=1e5,c=0;c<5;++c)o/l===0&&s.append("0"),l/=10;s.append(o)},e})(vu),MHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),xie=(function(t){MHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+tN.GTIN_SIZE+e.WEIGHT_SIZE)throw new jt;var s=new Ks;return this.encodeCompressedGtin(s,e.HEADER_SIZE),this.encodeCompressedWeight(s,e.HEADER_SIZE+tN.GTIN_SIZE,e.WEIGHT_SIZE),s.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(tN),LHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),FHe=(function(t){LHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.addWeightCode=function(s,n){s.append("(3103)")},e.prototype.checkWeight=function(s){return s},e})(xie),BHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),UHe=(function(t){BHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.addWeightCode=function(s,n){n<1e4?s.append("(3202)"):s.append("(3203)")},e.prototype.checkWeight=function(s){return s<1e4?s:s-1e4},e})(xie),zHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),VHe=(function(t){zHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vu.GTIN_SIZE)throw new jt;var s=new Ks;this.encodeCompressedGtin(s,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vu.GTIN_SIZE,e.LAST_DIGIT_SIZE);s.append("(392"),s.append(n),s.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vu.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return s.append(a.getNewString()),s.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(vu),WHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),qHe=(function(t){WHe(e,t);function e(s){return t.call(this,s)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vu.GTIN_SIZE)throw new jt;var s=new Ks;this.encodeCompressedGtin(s,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vu.GTIN_SIZE,e.LAST_DIGIT_SIZE);s.append("(393"),s.append(n),s.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vu.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&s.append("0"),a/10===0&&s.append("0"),s.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vu.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return s.append(i.getNewString()),s.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(vu),HHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Sf=(function(t){HHe(e,t);function e(s,n,a){var i=t.call(this,s)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new jt;var s=new Ks;return this.encodeCompressedGtin(s,e.HEADER_SIZE),this.encodeCompressedWeight(s,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(s,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),s.toString()},e.prototype.encodeCompressedDate=function(s,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){s.append("("),s.append(this.dateCode),s.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&s.append("0"),s.append(l),o/10===0&&s.append("0"),s.append(o),i/10===0&&s.append("0"),s.append(i)}},e.prototype.addWeightCode=function(s,n){s.append("("),s.append(this.firstAIdigits),s.append(n/1e5),s.append(")")},e.prototype.checkWeight=function(s){return s%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(tN);function GHe(t){try{if(t.get(1))return new IHe(t);if(!t.get(2))return new DHe(t);var e=eN.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new FHe(t);case 5:return new UHe(t)}var s=eN.extractNumericValueFromBitArray(t,1,5);switch(s){case 12:return new VHe(t);case 13:return new qHe(t)}var n=eN.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Sf(t,"310","11");case 57:return new Sf(t,"320","11");case 58:return new Sf(t,"310","13");case 59:return new Sf(t,"320","13");case 60:return new Sf(t,"310","15");case 61:return new Sf(t,"320","15");case 62:return new Sf(t,"310","17");case 63:return new Sf(t,"320","17")}}catch(a){throw console.log(a),new Vw("unknown decoder: "+t)}}var GH=(function(){function t(e,s,n,a){this.leftchar=e,this.rightchar=s,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,s){return e instanceof t?t.equalsOrNull(e.leftchar,s.leftchar)&&t.equalsOrNull(e.rightchar,s.rightchar)&&t.equalsOrNull(e.finderpattern,s.finderpattern):!1},t.equalsOrNull=function(e,s){return e===null?s===null:t.equals(e,s)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),YHe=(function(){function t(e,s,n){this.pairs=e,this.rowNumber=s,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,s){return e instanceof t?this.checkEqualitity(e,s)&&e.wasReversed===s.wasReversed:!1},t.prototype.checkEqualitity=function(e,s){if(!(!e||!s)){var n;return e.forEach(function(a,i){s.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),KHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Cf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XHe=(function(t){KHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.pairs=new Array(e.MAX_PAIRS),s.rows=new Array,s.startEnd=[2],s}return e.prototype.decodeRow=function(s,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(s,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(s,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(s,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,s))}catch(l){if(l instanceof jt){if(!this.pairs.length)throw new jt;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(s,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new jt},e.prototype.checkRowsBoolean=function(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return s&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(s,n){for(var a,i,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,Cf(s)),d=c.next();!d.done;d=c.next()){var u=d.value;this.pairs.push(u.getPairs())}}catch(m){a={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(s);h.push(l);try{return this.checkRows(h,o+1)}catch(m){console.log(m)}}}throw new jt},e.isValidSequence=function(s){var n,a;try{for(var i=Cf(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var l=o.value;if(!(s.length>l.length)){for(var c=!0,d=0;d<s.length;d++)if(s[d].getFinderPattern().getValue()!==l[d]){c=!1;break}if(c)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(s,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>s){o=l.isEquivalent(this.pairs);break}i=l.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new YHe(this.pairs,s,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(s,n){var a,i,o,l,c,d;try{for(var u=Cf(n),h=u.next();!h.done;h=u.next()){var m=h.value;if(m.getPairs().length!==s.length){var f=!0;try{for(var v=(o=void 0,Cf(m.getPairs())),x=v.next();!x.done;x=v.next()){var g=x.value,b=!1;try{for(var w=(c=void 0,Cf(s)),N=w.next();!N.done;N=w.next()){var C=N.value;if(GH.equals(g,C)){b=!0;break}}}catch(S){c={error:S}}finally{try{N&&!N.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}b||(f=!1)}}catch(S){o={error:S}}finally{try{x&&!x.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}}}}catch(S){a={error:S}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}},e.isPartialRow=function(s,n){var a,i,o,l,c,d;try{for(var u=Cf(n),h=u.next();!h.done;h=u.next()){var m=h.value,f=!0;try{for(var v=(o=void 0,Cf(s)),x=v.next();!x.done;x=v.next()){var g=x.value,b=!1;try{for(var w=(c=void 0,Cf(m.getPairs())),N=w.next();!N.done;N=w.next()){var C=N.value;if(g.equals(C)){b=!0;break}}}catch(S){c={error:S}}finally{try{N&&!N.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}if(!b){f=!1;break}}}catch(S){o={error:S}}finally{try{x&&!x.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}if(f)return!0}}catch(S){a={error:S}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(s){var n=kHe.buildBitArray(s),a=GHe(n),i=a.parseInformation(),o=s[0].getFinderPattern().getResultPoints(),l=s[s.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new pl(i,null,null,c,ls.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var s=this.pairs.get(0),n=s.getLeftChar(),a=s.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);i+=c.getLeftChar().getChecksumPortion(),o++;var d=c.getRightChar();d!=null&&(i+=d.getChecksumPortion(),o++)}i%=211;var u=211*(o-4)+i;return u===n.getValue()},e.getNextSecondBar=function(s,n){var a;return s.get(n)?(a=s.getNextUnset(n),a=s.getNextSet(a)):(a=s.getNextSet(n),a=s.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(s,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,l=!0,c=-1;do this.findNextPair(s,n,c),o=this.parseFoundFinderPattern(s,a,i),o===null?c=e.getNextSecondBar(s,this.startEnd[0]):l=!1;while(l);var d=this.decodeDataCharacter(s,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new jt;var u;try{u=this.decodeDataCharacter(s,o,i,!1)}catch(h){u=null,console.log(h)}return new GH(d,u,o,!0)},e.prototype.isEmptyPair=function(s){return s.length===0},e.prototype.findNextPair=function(s,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=s.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var d=n.length%2!==0;this.startFromEven&&(d=!d);for(var u=!1;l<o&&(u=!s.get(l),!!u);)l++;for(var h=0,m=l,f=l;f<o;f++)if(s.get(f)!==u)i[h]++;else{if(h===3){if(d&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=m,this.startEnd[1]=f;return}d&&e.reverseCounters(i),m+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,u=!u}throw new jt},e.reverseCounters=function(s){for(var n=s.length,a=0;a<n/2;++a){var i=s[a];s[a]=s[n-a-1],s[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(s,n,a){var i,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!s.get(c);)c--;c++,i=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=s.getNextUnset(this.startEnd[1]+1),i=l-this.startEnd[1];var d=this.getDecodeFinderCounters();Ca.arraycopy(d,0,d,1,d.length-1),d[0]=i;var u;try{u=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new fie(u,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(s,n,a,i){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(i)e.recordPatternInReverse(s,n.getStartEnd()[0],o);else{e.recordPattern(s,n.getStartEnd()[1],o);for(var c=0,d=o.length-1;c<d;c++,d--){var u=o[c];o[c]=o[d],o[d]=u}}var h=17,m=Nn.sum(new Int32Array(o))/h,f=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(m-f)/f>.3)throw new jt;for(var v=this.getOddCounts(),x=this.getEvenCounts(),g=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var w=1*o[c]/m,N=w+.5;if(N<1){if(w<.3)throw new jt;N=1}else if(N>8){if(w>8.7)throw new jt;N=8}var C=c/2;(c&1)===0?(v[C]=N,g[C]=w-N):(x[C]=N,b[C]=w-N)}this.adjustOddEvenCounts(h);for(var S=4*n.getValue()+(a?0:2)+(i?0:1)-1,A=0,k=0,c=v.length-1;c>=0;c--){if(e.isNotA1left(n,a,i)){var E=e.WEIGHTS[S][2*c];k+=v[c]*E}A+=v[c]}for(var O=0,c=x.length-1;c>=0;c--)if(e.isNotA1left(n,a,i)){var E=e.WEIGHTS[S][2*c+1];O+=x[c]*E}var $=k+O;if((A&1)!==0||A>13||A<4)throw new jt;var T=(13-A)/2,I=e.SYMBOL_WIDEST[T],L=9-I,z=D0.getRSSvalue(v,I,!0),M=D0.getRSSvalue(x,L,!1),V=e.EVEN_TOTAL_SUBSET[T],B=e.GSUM[T],F=z*V+M+B;return new B4(F,$)},e.isNotA1left=function(s,n,a){return!(s.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(s){var n=Nn.sum(new Int32Array(this.getOddCounts())),a=Nn.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var d=n+a-s,u=(n&1)===1,h=(a&1)===0;if(d===1)if(u){if(h)throw new jt;o=!0}else{if(!h)throw new jt;c=!0}else if(d===-1)if(u){if(h)throw new jt;i=!0}else{if(!h)throw new jt;l=!0}else if(d===0){if(u){if(!h)throw new jt;n<a?(i=!0,c=!0):(o=!0,l=!0)}else if(h)throw new jt}else throw new jt;if(i){if(o)throw new jt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new jt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(ux),QHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),ZHe=(function(t){QHe(e,t);function e(s,n,a){var i=t.call(this,s,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(B4),JHe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),mE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YH=(function(t){JHe(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.possibleLeftPairs=[],s.possibleRightPairs=[],s}return e.prototype.decodeRow=function(s,n,a){var i,o,l,c,d=this.decodePair(n,!1,s,a);e.addOrTally(this.possibleLeftPairs,d),n.reverse();var u=this.decodePair(n,!0,s,a);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var h=mE(this.possibleLeftPairs),m=h.next();!m.done;m=h.next()){var f=m.value;if(f.getCount()>1)try{for(var v=(l=void 0,mE(this.possibleRightPairs)),x=v.next();!x.done;x=v.next()){var g=x.value;if(g.getCount()>1&&e.checkChecksum(f,g))return e.constructResult(f,g)}}catch(b){l={error:b}}finally{try{x&&!x.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}}}catch(b){i={error:b}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}throw new jt},e.addOrTally=function(s,n){var a,i;if(n!=null){var o=!1;try{for(var l=mE(s),c=l.next();!c.done;c=l.next()){var d=c.value;if(d.getValue()===n.getValue()){d.incrementCount(),o=!0;break}}}catch(u){a={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}o||s.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(s,n){for(var a=4537077*s.getValue()+n.getValue(),i=new String(a).toString(),o=new Ks,l=13-i.length;l>0;l--)o.append("0");o.append(i);for(var c=0,l=0;l<13;l++){var d=o.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*d:d}c=10-c%10,c===10&&(c=0),o.append(c.toString());var u=s.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new pl(o.toString(),null,0,[u[0],u[1],h[0],h[1]],ls.RSS_14,new Date().getTime())},e.checkChecksum=function(s,n){var a=(s.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*s.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(s,n,a,i){try{var o=this.findFinderPattern(s,n),l=this.parseFoundFinderPattern(s,a,n,o),c=i==null?null:i.get(ka.NEED_RESULT_POINT_CALLBACK);if(c!=null){var d=(o[0]+o[1])/2;n&&(d=s.getSize()-1-d),c.foundPossibleResultPoint(new Hr(d,a))}var u=this.decodeDataCharacter(s,l,!0),h=this.decodeDataCharacter(s,l,!1);return new ZHe(1597*u.getValue()+h.getValue(),u.getChecksumPortion()+4*h.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(s,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)so.recordPatternInReverse(s,n.getStartEnd()[0],i);else{so.recordPattern(s,n.getStartEnd()[1]+1,i);for(var l=0,c=i.length-1;l<c;l++,c--){var d=i[l];i[l]=i[c],i[c]=d}}for(var u=a?16:15,h=Nn.sum(new Int32Array(i))/u,m=this.getOddCounts(),f=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<i.length;l++){var g=i[l]/h,b=Math.floor(g+.5);b<1?b=1:b>8&&(b=8);var w=Math.floor(l/2);(l&1)===0?(m[w]=b,v[w]=g-b):(f[w]=b,x[w]=g-b)}this.adjustOddEvenCounts(a,u);for(var N=0,C=0,l=m.length-1;l>=0;l--)C*=9,C+=m[l],N+=m[l];for(var S=0,A=0,l=f.length-1;l>=0;l--)S*=9,S+=f[l],A+=f[l];var k=C+3*S;if(a){if((N&1)!==0||N>12||N<4)throw new jt;var E=(12-N)/2,O=e.OUTSIDE_ODD_WIDEST[E],$=9-O,T=D0.getRSSvalue(m,O,!1),I=D0.getRSSvalue(f,$,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],z=e.OUTSIDE_GSUM[E];return new B4(T*L+I+z,k)}else{if((A&1)!==0||A>10||A<4)throw new jt;var E=(10-A)/2,O=e.INSIDE_ODD_WIDEST[E],$=9-O,T=D0.getRSSvalue(m,O,!0),I=D0.getRSSvalue(f,$,!1),M=e.INSIDE_ODD_TOTAL_SUBSET[E],z=e.INSIDE_GSUM[E];return new B4(I*M+T+z,k)}},e.prototype.findFinderPattern=function(s,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=s.getSize(),o=!1,l=0;l<i&&(o=!s.get(l),n!==o);)l++;for(var c=0,d=l,u=l;u<i;u++)if(s.get(u)!==o)a[c]++;else{if(c===3){if(ux.isFinderPattern(a))return[d,u];d+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new jt},e.prototype.parseFoundFinderPattern=function(s,n,a,i){for(var o=s.get(i[0]),l=i[0]-1;l>=0&&o!==s.get(l);)l--;l++;var c=i[0]-l,d=this.getDecodeFinderCounters(),u=new Int32Array(d.length);Ca.arraycopy(d,0,u,1,d.length-1),u[0]=c;var h=this.parseFinderValue(u,e.FINDER_PATTERNS),m=l,f=i[1];return a&&(m=s.getSize()-1-m,f=s.getSize()-1-f),new fie(h,[l,i[1]],m,f,n)},e.prototype.adjustOddEvenCounts=function(s,n){var a=Nn.sum(new Int32Array(this.getOddCounts())),i=Nn.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,d=!1;s?(a>12?l=!0:a<4&&(o=!0),i>12?d=!0:i<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),i>10?d=!0:i<4&&(c=!0));var u=a+i-n,h=(a&1)===(s?1:0),m=(i&1)===1;if(u===1)if(h){if(m)throw new jt;l=!0}else{if(!m)throw new jt;d=!0}else if(u===-1)if(h){if(m)throw new jt;o=!0}else{if(!m)throw new jt;c=!0}else if(u===0){if(h){if(!m)throw new jt;a<i?(o=!0,d=!0):(l=!0,c=!0)}else if(m)throw new jt}else throw new jt;if(o){if(l)throw new jt;ux.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ux.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(d)throw new jt;ux.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&ux.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(ux),eGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),R0=(function(t){eGe(e,t);function e(s){var n=t.call(this)||this;n.readers=[];var a=s?s.get(ka.POSSIBLE_FORMATS):null,i=s&&s.get(ka.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=s&&s.get(ka.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(ls.EAN_13)||a.includes(ls.UPC_A)||a.includes(ls.EAN_8)||a.includes(ls.UPC_E))&&n.readers.push(new hE(s)),a.includes(ls.CODE_39)&&n.readers.push(new LH(i,o)),a.includes(ls.CODE_93)&&n.readers.push(new FH),a.includes(ls.CODE_128)&&n.readers.push(new MH),a.includes(ls.ITF)&&n.readers.push(new BH),a.includes(ls.CODABAR)&&n.readers.push(new jHe),a.includes(ls.RSS_14)&&n.readers.push(new YH),a.includes(ls.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new XHe))),n.readers.length===0&&(n.readers.push(new hE(s)),n.readers.push(new LH),n.readers.push(new FH),n.readers.push(new hE(s)),n.readers.push(new MH),n.readers.push(new BH),n.readers.push(new YH)),n}return e.prototype.decodeRow=function(s,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(s,n,a)}catch{}throw new jt},e.prototype.reset=function(){this.readers.forEach(function(s){return s.reset()})},e})(so),tGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){tGe(e,t);function e(s,n){return s===void 0&&(s=500),t.call(this,new R0(n),s,n)||this}return e})(uy);var KH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vn=(function(){function t(e,s,n){this.ecCodewords=e,this.ecBlocks=[s],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),An=(function(){function t(e,s){this.count=e,this.dataCodewords=s}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),rGe=(function(){function t(e,s,n,a,i,o){var l,c;this.versionNumber=e,this.symbolSizeRows=s,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var d=0,u=o.getECCodewords(),h=o.getECBlocks();try{for(var m=KH(h),f=m.next();!f.done;f=m.next()){var v=f.value;d+=v.getCount()*(v.getDataCodewords()+u)}}catch(x){l={error:x}}finally{try{f&&!f.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}this.totalCodewords=d}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,s){var n,a;if((e&1)!==0||(s&1)!==0)throw new lr;try{for(var i=KH(t.VERSIONS),o=i.next();!o.done;o=i.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===s)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new lr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Vn(5,new An(1,3))),new t(2,12,12,10,10,new Vn(7,new An(1,5))),new t(3,14,14,12,12,new Vn(10,new An(1,8))),new t(4,16,16,14,14,new Vn(12,new An(1,12))),new t(5,18,18,16,16,new Vn(14,new An(1,18))),new t(6,20,20,18,18,new Vn(18,new An(1,22))),new t(7,22,22,20,20,new Vn(20,new An(1,30))),new t(8,24,24,22,22,new Vn(24,new An(1,36))),new t(9,26,26,24,24,new Vn(28,new An(1,44))),new t(10,32,32,14,14,new Vn(36,new An(1,62))),new t(11,36,36,16,16,new Vn(42,new An(1,86))),new t(12,40,40,18,18,new Vn(48,new An(1,114))),new t(13,44,44,20,20,new Vn(56,new An(1,144))),new t(14,48,48,22,22,new Vn(68,new An(1,174))),new t(15,52,52,24,24,new Vn(42,new An(2,102))),new t(16,64,64,14,14,new Vn(56,new An(2,140))),new t(17,72,72,16,16,new Vn(36,new An(4,92))),new t(18,80,80,18,18,new Vn(48,new An(4,114))),new t(19,88,88,20,20,new Vn(56,new An(4,144))),new t(20,96,96,22,22,new Vn(68,new An(4,174))),new t(21,104,104,24,24,new Vn(56,new An(6,136))),new t(22,120,120,18,18,new Vn(68,new An(6,175))),new t(23,132,132,20,20,new Vn(62,new An(8,163))),new t(24,144,144,22,22,new Vn(62,new An(8,156),new An(2,155))),new t(25,8,18,6,16,new Vn(7,new An(1,5))),new t(26,8,32,6,14,new Vn(11,new An(1,10))),new t(27,12,26,10,24,new Vn(14,new An(1,16))),new t(28,12,36,10,16,new Vn(18,new An(1,22))),new t(29,16,36,14,16,new Vn(24,new An(1,32))),new t(30,16,48,14,22,new Vn(28,new An(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),sGe=(function(){function t(e){var s=e.getHeight();if(s<8||s>144||(s&1)!==0)throw new lr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Eh(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var s=e.getHeight(),n=e.getWidth();return rGe.getVersionForDimensions(s,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),s=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,d=!1,u=!1;do if(n===i&&a===0&&!l)e[s++]=this.readCorner1(i,o)&255,n-=2,a+=2,l=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!c)e[s++]=this.readCorner2(i,o)&255,n-=2,a+=2,c=!0;else if(n===i+4&&a===2&&(o&7)===0&&!d)e[s++]=this.readCorner3(i,o)&255,n-=2,a+=2,d=!0;else if(n===i-2&&a===0&&(o&7)===4&&!u)e[s++]=this.readCorner4(i,o)&255,n-=2,a+=2,u=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[s++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[s++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(s!==this.version.getTotalCodewords())throw new lr;return e},t.prototype.readModule=function(e,s,n,a){return e<0&&(e+=n,s+=4-(n+4&7)),s<0&&(s+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(s,e),this.mappingBitMatrix.get(s,e)},t.prototype.readUtah=function(e,s,n,a){var i=0;return this.readModule(e-2,s-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,s-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,s-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,s-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,s,n,a)&&(i|=1),i<<=1,this.readModule(e,s-2,n,a)&&(i|=1),i<<=1,this.readModule(e,s-1,n,a)&&(i|=1),i<<=1,this.readModule(e,s,n,a)&&(i|=1),i},t.prototype.readCorner1=function(e,s){var n=0;return this.readModule(e-1,0,e,s)&&(n|=1),n<<=1,this.readModule(e-1,1,e,s)&&(n|=1),n<<=1,this.readModule(e-1,2,e,s)&&(n|=1),n<<=1,this.readModule(0,s-2,e,s)&&(n|=1),n<<=1,this.readModule(0,s-1,e,s)&&(n|=1),n<<=1,this.readModule(1,s-1,e,s)&&(n|=1),n<<=1,this.readModule(2,s-1,e,s)&&(n|=1),n<<=1,this.readModule(3,s-1,e,s)&&(n|=1),n},t.prototype.readCorner2=function(e,s){var n=0;return this.readModule(e-3,0,e,s)&&(n|=1),n<<=1,this.readModule(e-2,0,e,s)&&(n|=1),n<<=1,this.readModule(e-1,0,e,s)&&(n|=1),n<<=1,this.readModule(0,s-4,e,s)&&(n|=1),n<<=1,this.readModule(0,s-3,e,s)&&(n|=1),n<<=1,this.readModule(0,s-2,e,s)&&(n|=1),n<<=1,this.readModule(0,s-1,e,s)&&(n|=1),n<<=1,this.readModule(1,s-1,e,s)&&(n|=1),n},t.prototype.readCorner3=function(e,s){var n=0;return this.readModule(e-1,0,e,s)&&(n|=1),n<<=1,this.readModule(e-1,s-1,e,s)&&(n|=1),n<<=1,this.readModule(0,s-3,e,s)&&(n|=1),n<<=1,this.readModule(0,s-2,e,s)&&(n|=1),n<<=1,this.readModule(0,s-1,e,s)&&(n|=1),n<<=1,this.readModule(1,s-3,e,s)&&(n|=1),n<<=1,this.readModule(1,s-2,e,s)&&(n|=1),n<<=1,this.readModule(1,s-1,e,s)&&(n|=1),n},t.prototype.readCorner4=function(e,s){var n=0;return this.readModule(e-3,0,e,s)&&(n|=1),n<<=1,this.readModule(e-2,0,e,s)&&(n|=1),n<<=1,this.readModule(e-1,0,e,s)&&(n|=1),n<<=1,this.readModule(0,s-2,e,s)&&(n|=1),n<<=1,this.readModule(0,s-1,e,s)&&(n|=1),n<<=1,this.readModule(1,s-1,e,s)&&(n|=1),n<<=1,this.readModule(2,s-1,e,s)&&(n|=1),n<<=1,this.readModule(3,s-1,e,s)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var s=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==s)throw new cs("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=s/a|0,l=n/i|0,c=o*a,d=l*i,u=new Eh(d,c),h=0;h<o;++h)for(var m=h*a,f=0;f<l;++f)for(var v=f*i,x=0;x<a;++x)for(var g=h*(a+2)+1+x,b=m+x,w=0;w<i;++w){var N=f*(i+2)+1+w;if(e.get(N,g)){var C=v+w;u.set(C,b)}}return u},t})(),XH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nGe=(function(){function t(e,s){this.numDataCodewords=e,this.codewords=s}return t.getDataBlocks=function(e,s){var n,a,i,o,l=s.getECBlocks(),c=0,d=l.getECBlocks();try{for(var u=XH(d),h=u.next();!h.done;h=u.next()){var m=h.value;c+=m.getCount()}}catch(z){n={error:z}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var f=new Array(c),v=0;try{for(var x=XH(d),g=x.next();!g.done;g=x.next())for(var m=g.value,b=0;b<m.getCount();b++){var w=m.getDataCodewords(),N=l.getECCodewords()+w;f[v++]=new t(w,new Uint8Array(N))}}catch(z){i={error:z}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}for(var C=f[0].codewords.length,S=C-l.getECCodewords(),A=S-1,k=0,b=0;b<A;b++)for(var E=0;E<v;E++)f[E].codewords[b]=e[k++];for(var O=s.getVersionNumber()===24,$=O?8:v,E=0;E<$;E++)f[E].codewords[S-1]=e[k++];for(var T=f[0].codewords.length,b=S;b<T;b++)for(var E=0;E<v;E++){var I=O?(E+8)%v:E,L=O&&I>7?b-1:b;f[I].codewords[L]=e[k++]}if(k!==e.length)throw new cs;return f},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),gie=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new cs(""+e);var s=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,d=255>>8-l<<c;s=(i[a]&d)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)s=s<<8|i[a]&255,a++,e-=8;if(e>0){var c=8-e,d=255>>c<<c;s=s<<e|(i[a]&d)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,s},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),Ki;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ki||(Ki={}));var aGe=(function(){function t(){}return t.decode=function(e){var s=new gie(e),n=new Ks,a=new Ks,i=new Array,o=Ki.ASCII_ENCODE;do if(o===Ki.ASCII_ENCODE)o=this.decodeAsciiSegment(s,n,a);else{switch(o){case Ki.C40_ENCODE:this.decodeC40Segment(s,n);break;case Ki.TEXT_ENCODE:this.decodeTextSegment(s,n);break;case Ki.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,n);break;case Ki.EDIFACT_ENCODE:this.decodeEdifactSegment(s,n);break;case Ki.BASE256_ENCODE:this.decodeBase256Segment(s,n,i);break;default:throw new lr}o=Ki.ASCII_ENCODE}while(o!==Ki.PAD_ENCODE&&s.available()>0);return a.length()>0&&n.append(a.toString()),new v3(e,n.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,s,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new lr;if(i<=128)return a&&(i+=128),s.append(String.fromCharCode(i-1)),Ki.ASCII_ENCODE;if(i===129)return Ki.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&s.append("0"),s.append(""+o)}else switch(i){case 230:return Ki.C40_ENCODE;case 231:return Ki.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:s.append("[)>05"),n.insert(0,"");break;case 237:s.append("[)>06"),n.insert(0,"");break;case 238:return Ki.ANSIX12_ENCODE;case 239:return Ki.TEXT_ENCODE;case 240:return Ki.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new lr;break}}while(e.available()>0);return Ki.ASCII_ENCODE},t.decodeC40Segment=function(e,s){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(i){case 0:if(c<3)i=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[c];n?(s.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):s.append(d)}else throw new lr;break;case 1:n?(s.append(String.fromCharCode(c+128)),n=!1):s.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[c];n?(s.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):s.append(d)}else switch(c){case 27:s.append("");break;case 30:n=!0;break;default:throw new lr}i=0;break;case 3:n?(s.append(String.fromCharCode(c+224)),n=!1):s.append(String.fromCharCode(c+96)),i=0;break;default:throw new lr}}}while(e.available()>0)},t.decodeTextSegment=function(e,s){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(i){case 0:if(c<3)i=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[c];n?(s.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):s.append(d)}else throw new lr;break;case 1:n?(s.append(String.fromCharCode(c+128)),n=!1):s.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[c];n?(s.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):s.append(d)}else switch(c){case 27:s.append("");break;case 30:n=!0;break;default:throw new lr}i=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[c];n?(s.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):s.append(d),i=0}else throw new lr;break;default:throw new lr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,s){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(o<14)s.append(String.fromCharCode(o+44));else if(o<40)s.append(String.fromCharCode(o+51));else throw new lr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,s,n){var a=(e<<8)+s-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},t.decodeEdifactSegment=function(e,s){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(a&32)===0&&(a|=64),s.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,s,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new lr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new lr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{s.append(Id.decode(l,mn.ISO88591))}catch(d){throw new Vw("Platform does not support required encoding: "+d.message)}},t.unrandomize255State=function(e,s){var n=149*s%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),iGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oGe=(function(){function t(){this.rsDecoder=new y3(sc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var s,n,a=new sGe(e),i=a.getVersion(),o=a.readCodewords(),l=nGe.getDataBlocks(o,i),c=0;try{for(var d=iGe(l),u=d.next();!u.done;u=d.next()){var h=u.value;c+=h.getNumDataCodewords()}}catch(N){s={error:N}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(s)throw s.error}}for(var m=new Uint8Array(c),f=l.length,v=0;v<f;v++){var x=l[v],g=x.getCodewords(),b=x.getNumDataCodewords();this.correctErrors(g,b);for(var w=0;w<b;w++)m[w*f+v]=g[w]}return aGe.decode(m)},t.prototype.correctErrors=function(e,s){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-s)}catch{throw new Li}for(var a=0;a<s;a++)e[a]=n[a]},t})(),lGe=(function(){function t(e){this.image=e,this.rectangleDetector=new SO(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),s=this.detectSolid1(e);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new jt;s=this.shiftToModuleCenter(s);var n=s[0],a=s[1],i=s[2],o=s[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(i,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var d=t.sampleGrid(this.image,n,a,i,o,l,c);return new V8(d,[n,a,i,o])},t.shiftPoint=function(e,s,n){var a=(s.getX()-e.getX())/(n+1),i=(s.getY()-e.getY())/(n+1);return new Hr(e.getX()+a,e.getY()+i)},t.moveAway=function(e,s,n){var a=e.getX(),i=e.getY();return a<s?a-=1:a+=1,i<n?i-=1:i+=1,new Hr(a,i)},t.prototype.detectSolid1=function(e){var s=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(s,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,i),d=this.transitionsBetween(i,s),u=o,h=[i,s,n,a];return u>l&&(u=l,h[0]=s,h[1]=n,h[2]=a,h[3]=i),u>c&&(u=c,h[0]=n,h[1]=a,h[2]=i,h[3]=s),u>d&&(h[0]=a,h[1]=i,h[2]=s,h[3]=n),h},t.prototype.detectSolid2=function(e){var s=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(s,i),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),d=this.transitionsBetween(l,s),u=this.transitionsBetween(c,i);return d<u?(e[0]=s,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=s),e},t.prototype.correctTopRight=function(e){var s=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(s,i),l=this.transitionsBetween(n,i),c=t.shiftPoint(s,n,(l+1)*4),d=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,i),l=this.transitionsBetween(d,i);var u=new Hr(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),h=new Hr(i.getX()+(s.getX()-n.getX())/(l+1),i.getY()+(s.getY()-n.getY())/(l+1));if(!this.isValid(u))return this.isValid(h)?h:null;if(!this.isValid(h))return u;var m=this.transitionsBetween(c,u)+this.transitionsBetween(d,u),f=this.transitionsBetween(c,h)+this.transitionsBetween(d,h);return m>f?u:h},t.prototype.shiftToModuleCenter=function(e){var s=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(s,i)+1,l=this.transitionsBetween(a,i)+1,c=t.shiftPoint(s,n,l*4),d=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,i)+1,l=this.transitionsBetween(d,i)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var u=(s.getX()+n.getX()+a.getX()+i.getX())/4,h=(s.getY()+n.getY()+a.getY()+i.getY())/4;s=t.moveAway(s,u,h),n=t.moveAway(n,u,h),a=t.moveAway(a,u,h),i=t.moveAway(i,u,h);var m,f;return c=t.shiftPoint(s,n,l*4),c=t.shiftPoint(c,i,o*4),m=t.shiftPoint(n,s,l*4),m=t.shiftPoint(m,a,o*4),d=t.shiftPoint(a,i,l*4),d=t.shiftPoint(d,n,o*4),f=t.shiftPoint(i,a,l*4),f=t.shiftPoint(f,s,o*4),[c,m,d,f]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,s,n,a,i,o,l){var c=W8.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,s.getX(),s.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,s){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(s.getX()),o=Math.trunc(s.getY()),l=Math.abs(o-a)>Math.abs(i-n);if(l){var c=n;n=a,a=c,c=i,i=o,o=c}for(var d=Math.abs(i-n),u=Math.abs(o-a),h=-d/2,m=a<o?1:-1,f=n<i?1:-1,v=0,x=this.image.get(l?a:n,l?n:a),g=n,b=a;g!==i;g+=f){var w=this.image.get(l?b:g,l?g:b);if(w!==x&&(v++,x=w),h+=u,h>0){if(b===o)break;b+=m,h-=d}}return v},t})(),U4=(function(){function t(){this.decoder=new oGe}return t.prototype.decode=function(e,s){s===void 0&&(s=null);var n,a;if(s!=null&&s.has(ka.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=t.NO_POINTS}else{var o=new lGe(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new pl(n.getText(),l,8*l.length,a,ls.DATA_MATRIX,Ca.currentTimeMillis()),d=n.getByteSegments();d!=null&&c.putMetadata(Bo.BYTE_SEGMENTS,d);var u=n.getECLevel();return u!=null&&c.putMetadata(Bo.ERROR_CORRECTION_LEVEL,u),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var s=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(s==null||n==null)throw new jt;var a=this.moduleSize(s,e),i=s[1],o=n[1],l=s[0],c=n[0],d=(c-l+1)/a,u=(o-i+1)/a;if(d<=0||u<=0)throw new jt;var h=a/2;i+=h,l+=h;for(var m=new Eh(d,u),f=0;f<u;f++)for(var v=i+f*a,x=0;x<d;x++)e.get(l+x*a,v)&&m.set(x,f);return m},t.moduleSize=function(e,s){for(var n=s.getWidth(),a=e[0],i=e[1];a<n&&s.get(a,i);)a++;if(a===n)throw new jt;var o=a-e[0];if(o===0)throw new jt;return o},t.NO_POINTS=[],t})(),cGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){cGe(e,t);function e(s){return s===void 0&&(s=500),t.call(this,new U4,s)||this}return e})(uy);var M0;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(M0||(M0={}));var dGe=(function(){function t(e,s,n){this.value=e,this.stringValue=s,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ji(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.value===s.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new cs;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(M0.L,"L",1),t.M=new t(M0.M,"M",0),t.Q=new t(M0.Q,"Q",3),t.H=new t(M0.H,"H",2),t})(),uGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vie=(function(){function t(e){this.errorCorrectionLevel=dGe.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,s){return Js.bitCount(e^s)},t.decodeFormatInformation=function(e,s){var n=t.doDecodeFormatInformation(e,s);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,s^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,s){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=uGe(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var d=c.value,u=d[0];if(u===e||u===s)return new t(d[1]);var h=t.numBitsDiffering(e,u);h<i&&(o=d[1],i=h),e!==s&&(h=t.numBitsDiffering(s,u),h<i&&(o=d[1],i=h))}}catch(m){n={error:m}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return i<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),hGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ct=(function(){function t(e){for(var s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=s}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,s,n=0,a=this.ecBlocks;try{for(var i=hGe(a),o=i.next();!o.done;o=i.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),Te=(function(){function t(e,s){this.count=e,this.dataCodewords=s}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),mGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vx=(function(){function t(e,s){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=s,this.ecBlocks=i;var l=0,c=i[0].getECCodewordsPerBlock(),d=i[0].getECBlocks();try{for(var u=mGe(d),h=u.next();!h.done;h=u.next()){var m=h.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(f){n={error:f}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new lr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new lr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new cs;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var s=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var i=t.VERSION_DECODE_INFO[a];if(i===e)return t.getVersionForNumber(a+7);var o=vie.numBitsDiffering(e,i);o<s&&(n=a+7,s=o)}return s<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),s=new Eh(e);s.setRegion(0,0,9,9),s.setRegion(e-8,0,8,9),s.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||s.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return s.setRegion(6,9,1,e-17),s.setRegion(9,6,e-17,1),this.versionNumber>6&&(s.setRegion(e-11,0,3,6),s.setRegion(0,e-11,6,3)),s},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ct(7,new Te(1,19)),new ct(10,new Te(1,16)),new ct(13,new Te(1,13)),new ct(17,new Te(1,9))),new t(2,Int32Array.from([6,18]),new ct(10,new Te(1,34)),new ct(16,new Te(1,28)),new ct(22,new Te(1,22)),new ct(28,new Te(1,16))),new t(3,Int32Array.from([6,22]),new ct(15,new Te(1,55)),new ct(26,new Te(1,44)),new ct(18,new Te(2,17)),new ct(22,new Te(2,13))),new t(4,Int32Array.from([6,26]),new ct(20,new Te(1,80)),new ct(18,new Te(2,32)),new ct(26,new Te(2,24)),new ct(16,new Te(4,9))),new t(5,Int32Array.from([6,30]),new ct(26,new Te(1,108)),new ct(24,new Te(2,43)),new ct(18,new Te(2,15),new Te(2,16)),new ct(22,new Te(2,11),new Te(2,12))),new t(6,Int32Array.from([6,34]),new ct(18,new Te(2,68)),new ct(16,new Te(4,27)),new ct(24,new Te(4,19)),new ct(28,new Te(4,15))),new t(7,Int32Array.from([6,22,38]),new ct(20,new Te(2,78)),new ct(18,new Te(4,31)),new ct(18,new Te(2,14),new Te(4,15)),new ct(26,new Te(4,13),new Te(1,14))),new t(8,Int32Array.from([6,24,42]),new ct(24,new Te(2,97)),new ct(22,new Te(2,38),new Te(2,39)),new ct(22,new Te(4,18),new Te(2,19)),new ct(26,new Te(4,14),new Te(2,15))),new t(9,Int32Array.from([6,26,46]),new ct(30,new Te(2,116)),new ct(22,new Te(3,36),new Te(2,37)),new ct(20,new Te(4,16),new Te(4,17)),new ct(24,new Te(4,12),new Te(4,13))),new t(10,Int32Array.from([6,28,50]),new ct(18,new Te(2,68),new Te(2,69)),new ct(26,new Te(4,43),new Te(1,44)),new ct(24,new Te(6,19),new Te(2,20)),new ct(28,new Te(6,15),new Te(2,16))),new t(11,Int32Array.from([6,30,54]),new ct(20,new Te(4,81)),new ct(30,new Te(1,50),new Te(4,51)),new ct(28,new Te(4,22),new Te(4,23)),new ct(24,new Te(3,12),new Te(8,13))),new t(12,Int32Array.from([6,32,58]),new ct(24,new Te(2,92),new Te(2,93)),new ct(22,new Te(6,36),new Te(2,37)),new ct(26,new Te(4,20),new Te(6,21)),new ct(28,new Te(7,14),new Te(4,15))),new t(13,Int32Array.from([6,34,62]),new ct(26,new Te(4,107)),new ct(22,new Te(8,37),new Te(1,38)),new ct(24,new Te(8,20),new Te(4,21)),new ct(22,new Te(12,11),new Te(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ct(30,new Te(3,115),new Te(1,116)),new ct(24,new Te(4,40),new Te(5,41)),new ct(20,new Te(11,16),new Te(5,17)),new ct(24,new Te(11,12),new Te(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ct(22,new Te(5,87),new Te(1,88)),new ct(24,new Te(5,41),new Te(5,42)),new ct(30,new Te(5,24),new Te(7,25)),new ct(24,new Te(11,12),new Te(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ct(24,new Te(5,98),new Te(1,99)),new ct(28,new Te(7,45),new Te(3,46)),new ct(24,new Te(15,19),new Te(2,20)),new ct(30,new Te(3,15),new Te(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ct(28,new Te(1,107),new Te(5,108)),new ct(28,new Te(10,46),new Te(1,47)),new ct(28,new Te(1,22),new Te(15,23)),new ct(28,new Te(2,14),new Te(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ct(30,new Te(5,120),new Te(1,121)),new ct(26,new Te(9,43),new Te(4,44)),new ct(28,new Te(17,22),new Te(1,23)),new ct(28,new Te(2,14),new Te(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ct(28,new Te(3,113),new Te(4,114)),new ct(26,new Te(3,44),new Te(11,45)),new ct(26,new Te(17,21),new Te(4,22)),new ct(26,new Te(9,13),new Te(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ct(28,new Te(3,107),new Te(5,108)),new ct(26,new Te(3,41),new Te(13,42)),new ct(30,new Te(15,24),new Te(5,25)),new ct(28,new Te(15,15),new Te(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ct(28,new Te(4,116),new Te(4,117)),new ct(26,new Te(17,42)),new ct(28,new Te(17,22),new Te(6,23)),new ct(30,new Te(19,16),new Te(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ct(28,new Te(2,111),new Te(7,112)),new ct(28,new Te(17,46)),new ct(30,new Te(7,24),new Te(16,25)),new ct(24,new Te(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ct(30,new Te(4,121),new Te(5,122)),new ct(28,new Te(4,47),new Te(14,48)),new ct(30,new Te(11,24),new Te(14,25)),new ct(30,new Te(16,15),new Te(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ct(30,new Te(6,117),new Te(4,118)),new ct(28,new Te(6,45),new Te(14,46)),new ct(30,new Te(11,24),new Te(16,25)),new ct(30,new Te(30,16),new Te(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ct(26,new Te(8,106),new Te(4,107)),new ct(28,new Te(8,47),new Te(13,48)),new ct(30,new Te(7,24),new Te(22,25)),new ct(30,new Te(22,15),new Te(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ct(28,new Te(10,114),new Te(2,115)),new ct(28,new Te(19,46),new Te(4,47)),new ct(28,new Te(28,22),new Te(6,23)),new ct(30,new Te(33,16),new Te(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ct(30,new Te(8,122),new Te(4,123)),new ct(28,new Te(22,45),new Te(3,46)),new ct(30,new Te(8,23),new Te(26,24)),new ct(30,new Te(12,15),new Te(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ct(30,new Te(3,117),new Te(10,118)),new ct(28,new Te(3,45),new Te(23,46)),new ct(30,new Te(4,24),new Te(31,25)),new ct(30,new Te(11,15),new Te(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ct(30,new Te(7,116),new Te(7,117)),new ct(28,new Te(21,45),new Te(7,46)),new ct(30,new Te(1,23),new Te(37,24)),new ct(30,new Te(19,15),new Te(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ct(30,new Te(5,115),new Te(10,116)),new ct(28,new Te(19,47),new Te(10,48)),new ct(30,new Te(15,24),new Te(25,25)),new ct(30,new Te(23,15),new Te(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ct(30,new Te(13,115),new Te(3,116)),new ct(28,new Te(2,46),new Te(29,47)),new ct(30,new Te(42,24),new Te(1,25)),new ct(30,new Te(23,15),new Te(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ct(30,new Te(17,115)),new ct(28,new Te(10,46),new Te(23,47)),new ct(30,new Te(10,24),new Te(35,25)),new ct(30,new Te(19,15),new Te(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ct(30,new Te(17,115),new Te(1,116)),new ct(28,new Te(14,46),new Te(21,47)),new ct(30,new Te(29,24),new Te(19,25)),new ct(30,new Te(11,15),new Te(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ct(30,new Te(13,115),new Te(6,116)),new ct(28,new Te(14,46),new Te(23,47)),new ct(30,new Te(44,24),new Te(7,25)),new ct(30,new Te(59,16),new Te(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ct(30,new Te(12,121),new Te(7,122)),new ct(28,new Te(12,47),new Te(26,48)),new ct(30,new Te(39,24),new Te(14,25)),new ct(30,new Te(22,15),new Te(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ct(30,new Te(6,121),new Te(14,122)),new ct(28,new Te(6,47),new Te(34,48)),new ct(30,new Te(46,24),new Te(10,25)),new ct(30,new Te(2,15),new Te(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ct(30,new Te(17,122),new Te(4,123)),new ct(28,new Te(29,46),new Te(14,47)),new ct(30,new Te(49,24),new Te(10,25)),new ct(30,new Te(24,15),new Te(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ct(30,new Te(4,122),new Te(18,123)),new ct(28,new Te(13,46),new Te(32,47)),new ct(30,new Te(48,24),new Te(14,25)),new ct(30,new Te(42,15),new Te(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ct(30,new Te(20,117),new Te(4,118)),new ct(28,new Te(40,47),new Te(7,48)),new ct(30,new Te(43,24),new Te(22,25)),new ct(30,new Te(10,15),new Te(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ct(30,new Te(19,118),new Te(6,119)),new ct(28,new Te(18,47),new Te(31,48)),new ct(30,new Te(34,24),new Te(34,25)),new ct(30,new Te(20,15),new Te(61,16)))],t})(),vo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(vo||(vo={}));var QH=(function(){function t(e,s){this.value=e,this.isMasked=s}return t.prototype.unmaskBitMatrix=function(e,s){for(var n=0;n<s;n++)for(var a=0;a<s;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[vo.DATA_MASK_000,new t(vo.DATA_MASK_000,function(e,s){return(e+s&1)===0})],[vo.DATA_MASK_001,new t(vo.DATA_MASK_001,function(e,s){return(e&1)===0})],[vo.DATA_MASK_010,new t(vo.DATA_MASK_010,function(e,s){return s%3===0})],[vo.DATA_MASK_011,new t(vo.DATA_MASK_011,function(e,s){return(e+s)%3===0})],[vo.DATA_MASK_100,new t(vo.DATA_MASK_100,function(e,s){return(Math.floor(e/2)+Math.floor(s/3)&1)===0})],[vo.DATA_MASK_101,new t(vo.DATA_MASK_101,function(e,s){return e*s%6===0})],[vo.DATA_MASK_110,new t(vo.DATA_MASK_110,function(e,s){return e*s%6<3})],[vo.DATA_MASK_111,new t(vo.DATA_MASK_111,function(e,s){return(e+s+e*s%3&1)===0})]]),t})(),fGe=(function(){function t(e){var s=e.getHeight();if(s<21||(s&3)!==1)throw new lr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,s=0;s<6;s++)e=this.copyBit(s,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var s=a-8;s<a;s++)i=this.copyBit(s,8,i);if(this.parsedFormatInfo=vie.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new lr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),s=Math.floor((e-17)/4);if(s<=6)return Vx.getVersionForNumber(s);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var l=Vx.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(l=Vx.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new lr},t.prototype.copyBit=function(e,s,n){var a=this.isMirror?this.bitMatrix.get(s,e):this.bitMatrix.get(e,s);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),s=this.readVersion(),n=QH.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=s.buildFunctionPattern(),o=!0,l=new Uint8Array(s.getTotalCodewords()),c=0,d=0,u=0,h=a-1;h>0;h-=2){h===6&&h--;for(var m=0;m<a;m++)for(var f=o?a-1-m:m,v=0;v<2;v++)i.get(h-v,f)||(u++,d<<=1,this.bitMatrix.get(h-v,f)&&(d|=1),u===8&&(l[c++]=d,u=0,d=0));o=!o}if(c!==s.getTotalCodewords())throw new lr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=QH.values.get(this.parsedFormatInfo.getDataMask()),s=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,s)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,s=0,n=e.getWidth();s<n;s++)for(var a=s+1,i=e.getHeight();a<i;a++)e.get(s,a)!==e.get(a,s)&&(e.flip(a,s),e.flip(s,a))},t})(),ZH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pGe=(function(){function t(e,s){this.numDataCodewords=e,this.codewords=s}return t.getDataBlocks=function(e,s,n){var a,i,o,l;if(e.length!==s.getTotalCodewords())throw new cs;var c=s.getECBlocksForLevel(n),d=0,u=c.getECBlocks();try{for(var h=ZH(u),m=h.next();!m.done;m=h.next()){var f=m.value;d+=f.getCount()}}catch(L){a={error:L}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}var v=new Array(d),x=0;try{for(var g=ZH(u),b=g.next();!b.done;b=g.next())for(var f=b.value,w=0;w<f.getCount();w++){var N=f.getDataCodewords(),C=c.getECCodewordsPerBlock()+N;v[x++]=new t(N,new Uint8Array(C))}}catch(L){o={error:L}}finally{try{b&&!b.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}for(var S=v[0].codewords.length,A=v.length-1;A>=0;){var k=v[A].codewords.length;if(k===S)break;A--}A++;for(var E=S-c.getECCodewordsPerBlock(),O=0,w=0;w<E;w++)for(var $=0;$<x;$++)v[$].codewords[w]=e[O++];for(var $=A;$<x;$++)v[$].codewords[E]=e[O++];for(var T=v[0].codewords.length,w=E;w<T;w++)for(var $=0;$<x;$++){var I=$<A?w:w+1;v[$].codewords[I]=e[O++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),vd;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(vd||(vd={}));var Ta=(function(){function t(e,s,n,a){this.value=e,this.stringValue=s,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var s=t.FOR_BITS.get(e);if(s===void 0)throw new cs;return s},t.prototype.getCharacterCountBits=function(e){var s=e.getVersionNumber(),n;return s<=9?n=0:s<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;return this.value===s.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(vd.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(vd.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(vd.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(vd.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(vd.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(vd.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(vd.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(vd.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(vd.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(vd.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),xGe=(function(){function t(){}return t.decode=function(e,s,n,a){var i=new gie(e),o=new Ks,l=new Array,c=-1,d=-1;try{var u=null,h=!1,m=void 0;do{if(i.available()<4)m=Ta.TERMINATOR;else{var f=i.readBits(4);m=Ta.forBits(f)}switch(m){case Ta.TERMINATOR:break;case Ta.FNC1_FIRST_POSITION:case Ta.FNC1_SECOND_POSITION:h=!0;break;case Ta.STRUCTURED_APPEND:if(i.available()<16)throw new lr;c=i.readBits(8),d=i.readBits(8);break;case Ta.ECI:var v=t.parseECIValue(i);if(u=Ji.getCharacterSetECIByValue(v),u===null)throw new lr;break;case Ta.HANZI:var x=i.readBits(4),g=i.readBits(m.getCharacterCountBits(s));x===t.GB2312_SUBSET&&t.decodeHanziSegment(i,o,g);break;default:var b=i.readBits(m.getCharacterCountBits(s));switch(m){case Ta.NUMERIC:t.decodeNumericSegment(i,o,b);break;case Ta.ALPHANUMERIC:t.decodeAlphanumericSegment(i,o,b,h);break;case Ta.BYTE:t.decodeByteSegment(i,o,b,u,l,a);break;case Ta.KANJI:t.decodeKanjiSegment(i,o,b);break;default:throw new lr}break}}while(m!==Ta.TERMINATOR)}catch{throw new lr}return new v3(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,d)},t.decodeHanziSegment=function(e,s,n){if(n*13>e.available())throw new lr;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[i]=l>>8&255,a[i+1]=l&255,i+=2,n--}try{s.append(Id.decode(a,mn.GB2312))}catch(c){throw new lr(c)}},t.decodeKanjiSegment=function(e,s,n){if(n*13>e.available())throw new lr;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[i]=l>>8,a[i+1]=l,i+=2,n--}try{s.append(Id.decode(a,mn.SHIFT_JIS))}catch(c){throw new lr(c)}},t.decodeByteSegment=function(e,s,n,a,i,o){if(8*n>e.available())throw new lr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var d;a===null?d=mn.guessEncoding(l,o):d=a.getName();try{s.append(Id.decode(l,d))}catch(u){throw new lr(u)}i.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new lr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,s,n,a){for(var i=s.length();n>1;){if(e.available()<11)throw new lr;var o=e.readBits(11);s.append(t.toAlphaNumericChar(Math.floor(o/45))),s.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new lr;s.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=i;l<s.length();l++)s.charAt(l)==="%"&&(l<s.length()-1&&s.charAt(l+1)==="%"?s.deleteCharAt(l+1):s.setCharAt(l,""))},t.decodeNumericSegment=function(e,s,n){for(;n>=3;){if(e.available()<10)throw new lr;var a=e.readBits(10);if(a>=1e3)throw new lr;s.append(t.toAlphaNumericChar(Math.floor(a/100))),s.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),s.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new lr;var i=e.readBits(7);if(i>=100)throw new lr;s.append(t.toAlphaNumericChar(Math.floor(i/10))),s.append(t.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new lr;var o=e.readBits(4);if(o>=10)throw new lr;s.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var s=e.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){var n=e.readBits(8);return(s&63)<<8&4294967295|n}if((s&224)===192){var a=e.readBits(16);return(s&31)<<16&4294967295|a}throw new lr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),yie=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var s=e[0];e[0]=e[2],e[2]=s}},t})(),JH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gGe=(function(){function t(){this.rsDecoder=new y3(sc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,s){return this.decodeBitMatrix(Eh.parseFromBooleanArray(e),s)},t.prototype.decodeBitMatrix=function(e,s){var n=new fGe(e),a=null;try{return this.decodeBitMatrixParser(n,s)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,s);return i.setOther(new yie(!0)),i}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,s){var n,a,i,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),u=pGe.getDataBlocks(d,l,c),h=0;try{for(var m=JH(u),f=m.next();!f.done;f=m.next()){var v=f.value;h+=v.getNumDataCodewords()}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=m.return)&&a.call(m)}finally{if(n)throw n.error}}var x=new Uint8Array(h),g=0;try{for(var b=JH(u),w=b.next();!w.done;w=b.next()){var v=w.value,N=v.getCodewords(),C=v.getNumDataCodewords();this.correctErrors(N,C);for(var S=0;S<C;S++)x[g++]=N[S]}}catch(A){i={error:A}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}return xGe.decode(x,l,c,s)},t.prototype.correctErrors=function(e,s){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-s)}catch{throw new Li}for(var a=0;a<s;a++)e[a]=n[a]},t})(),vGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),yGe=(function(t){vGe(e,t);function e(s,n,a){var i=t.call(this,s,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(s,n,a){if(Math.abs(n-this.getY())<=s&&Math.abs(a-this.getX())<=s){var i=Math.abs(s-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(s,n,a){var i=(this.getX()+n)/2,o=(this.getY()+s)/2,l=(this.estimatedModuleSize+a)/2;return new e(i,o,l)},e})(Hr),bGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wGe=(function(){function t(e,s,n,a,i,o,l){this.image=e,this.startX=s,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,s=this.height,n=this.width,a=e+n,i=this.startY+s/2,o=new Int32Array(3),l=this.image,c=0;c<s;c++){var d=i+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<a&&!l.get(u,d);)u++;for(var h=0;u<a;){if(l.get(u,d))if(h===1)o[1]++;else if(h===2){if(this.foundPatternCross(o)){var m=this.handlePossibleCenter(o,d,u);if(m!==null)return m}o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;u++}if(this.foundPatternCross(o)){var m=this.handlePossibleCenter(o,d,a);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new jt},t.centerFromEnd=function(e,s){return s-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var s=this.moduleSize,n=s/2,a=0;a<3;a++)if(Math.abs(s-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,s,n,a){var i=this.image,o=i.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&i.get(s,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!i.get(s,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(s,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!i.get(s,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var d=l[0]+l[1]+l[2];return 5*Math.abs(d-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,s,n){var a,i,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(s,l,2*e[1],o);if(!isNaN(c)){var d=(e[0]+e[1]+e[2])/3;try{for(var u=bGe(this.possibleCenters),h=u.next();!h.done;h=u.next()){var m=h.value;if(m.aboutEquals(d,c,l))return m.combineEstimate(c,l,d)}}catch(v){a={error:v}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}var f=new yGe(l,c,d);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null},t})(),jGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),NGe=(function(t){jGe(e,t);function e(s,n,a,i){var o=t.call(this,s,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(s,n,a){if(Math.abs(n-this.getY())<=s&&Math.abs(a-this.getX())<=s){var i=Math.abs(s-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(s,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,l=(this.count*this.getY()+s)/i,c=(this.count*this.estimatedModuleSize+a)/i;return new e(o,l,c,i)},e})(Hr),SGe=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),l1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CGe=(function(){function t(e,s){this.image=e,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var s=e!=null&&e.get(ka.TRY_HARDER)!==void 0,n=e!=null&&e.get(ka.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),l=Math.floor(3*i/(4*t.MAX_MODULES));(l<t.MIN_SKIP||s)&&(l=t.MIN_SKIP);for(var c=!1,d=new Int32Array(5),u=l-1;u<i&&!c;u+=l){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var h=0,m=0;m<o;m++)if(a.get(m,u))(h&1)===1&&h++,d[h]++;else if((h&1)===0)if(h===4)if(t.foundPatternCross(d)){var f=this.handlePossibleCenter(d,u,m,n);if(f===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>d[2]&&(u+=v-d[2]-l,m=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,h=3;continue}h=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,h=3;else d[++h]++;else d[h]++;if(t.foundPatternCross(d)){var f=this.handlePossibleCenter(d,u,o,n);f===!0&&(l=d[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var x=this.selectBestPatterns();return Hr.orderBestPatterns(x),new SGe(x)},t.centerFromEnd=function(e,s){return s-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var s=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;s+=a}if(s<7)return!1;var i=s/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,s,n,a){for(var i=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&s>=o&&l.get(s-o,e-o);)i[2]++,o++;if(e<o||s<o)return!1;for(;e>=o&&s>=o&&!l.get(s-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||s<o||i[1]>n)return!1;for(;e>=o&&s>=o&&l.get(s-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var c=l.getHeight(),d=l.getWidth();for(o=1;e+o<c&&s+o<d&&l.get(s+o,e+o);)i[2]++,o++;if(e+o>=c||s+o>=d)return!1;for(;e+o<c&&s+o<d&&!l.get(s+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=c||s+o>=d||i[3]>=n)return!1;for(;e+o<c&&s+o<d&&l.get(s+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-a)<2*a&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,s,n,a){for(var i=this.image,o=i.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(s,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(s,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&i.get(s,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(s,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(s,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&i.get(s,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,s,n,a){for(var i=this.image,o=i.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(c,s);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(c,s)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&i.get(c,s)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(c,s);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(c,s)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&i.get(c,s)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var d=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(d-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,s,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(s,Math.floor(o),e[2],i);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],i)))){for(var c=i/7,d=!1,u=this.possibleCenters,h=0,m=u.length;h<m;h++){var f=u[h];if(f.aboutEquals(c,l,o)){u[h]=f.combineEstimate(l,o,c),d=!0;break}}if(!d){var v=new NGe(o,l,c);u.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,s,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=l1(this.possibleCenters),o=i.next();!o.done;o=i.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,s,n,a,i=0,o=0,l=this.possibleCenters.length;try{for(var c=l1(this.possibleCenters),d=c.next();!d.done;d=c.next()){var u=d.value;u.getCount()>=t.CENTER_QUORUM&&(i++,o+=u.getEstimatedModuleSize())}}catch(x){e={error:x}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(e)throw e.error}}if(i<3)return!1;var h=o/l,m=0;try{for(var f=l1(this.possibleCenters),v=f.next();!v.done;v=f.next()){var u=v.value;m+=Math.abs(u.getEstimatedModuleSize()-h)}}catch(x){n={error:x}}finally{try{v&&!v.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}return m<=.05*o},t.prototype.selectBestPatterns=function(){var e,s,n,a,i=this.possibleCenters.length;if(i<3)throw new jt;var o=this.possibleCenters,l;if(i>3){var c=0,d=0;try{for(var u=l1(this.possibleCenters),h=u.next();!h.done;h=u.next()){var m=h.value,f=m.getEstimatedModuleSize();c+=f,d+=f*f}}catch(S){e={error:S}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(e)throw e.error}}l=c/i;var v=Math.sqrt(d/i-l*l);o.sort(function(S,A){var k=Math.abs(A.getEstimatedModuleSize()-l),E=Math.abs(S.getEstimatedModuleSize()-l);return k<E?-1:k>E?1:0});for(var x=Math.max(.2*l,v),g=0;g<o.length&&o.length>3;g++){var b=o[g];Math.abs(b.getEstimatedModuleSize()-l)>x&&(o.splice(g,1),g--)}}if(o.length>3){var c=0;try{for(var w=l1(o),N=w.next();!N.done;N=w.next()){var C=N.value;c+=C.getEstimatedModuleSize()}}catch(A){n={error:A}}finally{try{N&&!N.done&&(a=w.return)&&a.call(w)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(A,k){if(k.getCount()===A.getCount()){var E=Math.abs(k.getEstimatedModuleSize()-l),O=Math.abs(A.getEstimatedModuleSize()-l);return E<O?1:E>O?-1:0}else return k.getCount()-A.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),kGe=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ka.NEED_RESULT_POINT_CALLBACK);var s=new CGe(this.image,this.resultPointCallback),n=s.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var s=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(s,n,a);if(i<1)throw new jt("No pattern found in proccess finder.");var o=t.computeDimension(s,n,a,i),l=Vx.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,d=null;if(l.getAlignmentPatternCenters().length>0)for(var u=n.getX()-s.getX()+a.getX(),h=n.getY()-s.getY()+a.getY(),m=1-3/c,f=Math.floor(s.getX()+m*(u-s.getX())),v=Math.floor(s.getY()+m*(h-s.getY())),x=4;x<=16;x<<=1)try{d=this.findAlignmentInRegion(i,f,v,x);break}catch(N){if(!(N instanceof jt))throw N}var g=t.createTransform(s,n,a,d,o),b=t.sampleGrid(this.image,g,o),w;return d===null?w=[a,s,n]:w=[a,s,n,d],new V8(b,w)},t.createTransform=function(e,s,n,a,i){var o=i-3.5,l,c,d,u;return a!==null?(l=a.getX(),c=a.getY(),d=o-3,u=d):(l=s.getX()-e.getX()+n.getX(),c=s.getY()-e.getY()+n.getY(),d=o,u=o),mie.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,u,3.5,o,e.getX(),e.getY(),s.getX(),s.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,s,n){var a=W8.getInstance();return a.sampleGridWithTransform(e,n,n,s)},t.computeDimension=function(e,s,n,a){var i=Nn.round(Hr.distance(e,s)/a),o=Nn.round(Hr.distance(e,n)/a),l=Math.floor((i+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new jt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,s,n){return(this.calculateModuleSizeOneWay(e,s)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,s){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(s.getX()),Math.floor(s.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,s,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,s,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(s-(a-s)*o);return o=1,c<0?(o=s/(s-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-s)/(c-s),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,s,l,c),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,s,n,a){var i=Math.abs(a-s)>Math.abs(n-e);if(i){var o=e;e=s,s=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-s),d=-l/2,u=e<n?1:-1,h=s<a?1:-1,m=0,f=n+u,v=e,x=s;v!==f;v+=u){var g=i?x:v,b=i?v:x;if(m===1===this.image.get(g,b)){if(m===2)return Nn.distance(v,x,e,s);m++}if(d+=c,d>0){if(x===a)break;x+=h,d-=l}}return m===2?Nn.distance(n+u,a,e,s):NaN},t.prototype.findAlignmentInRegion=function(e,s,n,a){var i=Math.floor(a*e),o=Math.max(0,s-i),l=Math.min(this.image.getWidth()-1,s+i);if(l-o<e*3)throw new jt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-i),d=Math.min(this.image.getHeight()-1,n+i);if(d-c<e*3)throw new jt("Alignment bottom exceeds estimated module size.");var u=new wGe(this.image,o,c,l-o,d-c,e,this.resultPointCallback);return u.find()},t})(),z4=(function(){function t(){this.decoder=new gGe}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,s){var n,a;if(s!=null&&s.get(ka.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,s),a=t.NO_POINTS}else{var o=new kGe(e.getBlackMatrix()).detect(s);n=this.decoder.decodeBitMatrix(o.getBits(),s),a=o.getPoints()}n.getOther()instanceof yie&&n.getOther().applyMirroredCorrection(a);var l=new pl(n.getText(),n.getRawBytes(),void 0,a,ls.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Bo.BYTE_SEGMENTS,c);var d=n.getECLevel();return d!==null&&l.putMetadata(Bo.ERROR_CORRECTION_LEVEL,d),n.hasStructuredAppend()&&(l.putMetadata(Bo.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Bo.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var s=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(s===null||n===null)throw new jt;var a=this.moduleSize(s,e),i=s[1],o=n[1],l=s[0],c=n[0];if(l>=c||i>=o)throw new jt;if(o-i!==c-l&&(c=l+(o-i),c>=e.getWidth()))throw new jt;var d=Math.round((c-l+1)/a),u=Math.round((o-i+1)/a);if(d<=0||u<=0)throw new jt;if(u!==d)throw new jt;var h=Math.floor(a/2);i+=h,l+=h;var m=l+Math.floor((d-1)*a)-c;if(m>0){if(m>h)throw new jt;l-=m}var f=i+Math.floor((u-1)*a)-o;if(f>0){if(f>h)throw new jt;i-=f}for(var v=new Eh(d,u),x=0;x<u;x++)for(var g=i+Math.floor(x*a),b=0;b<d;b++)e.get(l+Math.floor(b*a),g)&&v.set(b,x);return v},t.moduleSize=function(e,s){for(var n=s.getHeight(),a=s.getWidth(),i=e[0],o=e[1],l=!0,c=0;i<a&&o<n;){if(l!==s.get(i,o)){if(++c===5)break;l=!l}i++,o++}if(i===a||o===n)throw new jt;return(i-e[0])/7},t.NO_POINTS=new Array,t})(),_Ge=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bn=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Nn.sum(e)},t.toIntArray=function(e){var s,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=_Ge(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[i++]=c}}catch(d){s={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return a},t.getCodeword=function(e){var s=to.binarySearch(t.SYMBOL_TABLE,e&262143);return s<0?-1:(t.CODEWORD_TABLE[s]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),AGe=(function(){function t(e,s){this.bits=e,this.points=s}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),EGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PGe=(function(){function t(){}return t.detectMultiple=function(e,s,n){var a=e.getBlackMatrix(),i=t.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=t.detect(n,a)),new AGe(a,i)},t.detect=function(e,s){for(var n,a,i=new Array,o=0,l=0,c=!1;o<s.getHeight();){var d=t.findVertices(s,o,l);if(d[0]==null&&d[3]==null){if(!c)break;c=!1,l=0;try{for(var u=(n=void 0,EGe(i)),h=u.next();!h.done;h=u.next()){var m=h.value;m[1]!=null&&(o=Math.trunc(Math.max(o,m[1].getY()))),m[3]!=null&&(o=Math.max(o,Math.trunc(m[3].getY())))}}catch(f){n={error:f}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,i.push(d),!e)break;d[2]!=null?(l=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(l=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return i},t.findVertices=function(e,s,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,i,s,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),s=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,i,s,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,s,n){for(var a=0;a<n.length;a++)e[n[a]]=s[a]},t.findRowsWithPattern=function(e,s,n,a,i,o){for(var l=new Array(4),c=!1,d=new Int32Array(o.length);a<s;a+=t.ROW_STEP){var u=t.findGuardPattern(e,i,a,n,!1,o,d);if(u!=null){for(;a>0;){var h=t.findGuardPattern(e,i,--a,n,!1,o,d);if(h!=null)u=h;else{a++;break}}l[0]=new Hr(u[0],a),l[1]=new Hr(u[1],a),c=!0;break}}var m=a+1;if(c){for(var f=0,h=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);m<s;m++){var u=t.findGuardPattern(e,h[0],m,n,!1,o,d);if(u!=null&&Math.abs(h[0]-u[0])<t.MAX_PATTERN_DRIFT&&Math.abs(h[1]-u[1])<t.MAX_PATTERN_DRIFT)h=u,f=0;else{if(f>t.SKIPPED_ROW_COUNT_MAX)break;f++}}m-=f+1,l[2]=new Hr(h[0],m),l[3]=new Hr(h[1],m)}return m-a<t.BARCODE_MIN_HEIGHT&&to.fill(l,null),l},t.findGuardPattern=function(e,s,n,a,i,o,l){to.fillWithin(l,0,l.length,0);for(var c=s,d=0;e.get(c,n)&&c>0&&d++<t.MAX_PIXEL_DRIFT;)c--;for(var u=c,h=0,m=o.length,f=i;u<a;u++){var v=e.get(u,n);if(v!==f)l[h]++;else{if(h===m-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,u]);c+=l[0]+l[1],Ca.arraycopy(l,2,l,0,h-1),l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,f=!f}}return h===m-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,u-1]):null},t.patternMatchVariance=function(e,s,n){for(var a=e.length,i=0,o=0,l=0;l<a;l++)i+=e[l],o+=s[l];if(i<o)return 1/0;var c=i/o;n*=c;for(var d=0,u=0;u<a;u++){var h=e[u],m=s[u]*c,f=h>m?h-m:m-h;if(f>n)return 1/0;d+=f}return d/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),TGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Px=(function(){function t(e,s){if(s.length===0)throw new cs;this.field=e;var n=s.length;if(n>1&&s[0]===0){for(var a=1;a<n&&s[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Ca.arraycopy(s,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var s,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=TGe(this.coefficients),o=i.next();!o.done;o=i.next()){var l=o.value;a=this.field.add(a,l)}}catch(h){s={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a}for(var c=this.coefficients[0],d=this.coefficients.length,u=1;u<d;u++)c=this.field.add(this.field.multiply(e,c),this.coefficients[u]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new cs("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var s=this.coefficients,n=e.coefficients;if(s.length>n.length){var a=s;s=n,n=a}var i=new Int32Array(n.length),o=n.length-s.length;Ca.arraycopy(n,0,i,0,o);for(var l=o;l<n.length;l++)i[l]=this.field.add(s[l-o],n[l]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new cs("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new cs("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var s=this.coefficients,n=s.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),l=0;l<n;l++)for(var c=s[l],d=0;d<i;d++)o[l+d]=this.field.add(o[l+d],this.field.multiply(c,a[d]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,s=new Int32Array(e),n=0;n<e;n++)s[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,s)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var s=this.coefficients.length,n=new Int32Array(s),a=0;a<s;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,s){if(e<0)throw new cs;if(s===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],s);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Ks,s=this.getDegree();s>=0;s--){var n=this.getCoefficient(s);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(s===0||n!==1)&&e.append(n),s!==0&&(s===1?e.append("x"):(e.append("x^"),e.append(s))))}return e.toString()},t})(),OGe=(function(){function t(){}return t.prototype.add=function(e,s){return(e+s)%this.modulus},t.prototype.subtract=function(e,s){return(this.modulus+e-s)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new cs;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new hie;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,s){return e===0||s===0?0:this.expTable[(this.logTable[e]+this.logTable[s])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),IGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),$Ge=(function(t){IGe(e,t);function e(s,n){var a=t.call(this)||this;a.modulus=s,a.expTable=new Int32Array(s),a.logTable=new Int32Array(s);for(var i=1,o=0;o<s;o++)a.expTable[o]=i,i=i*n%s;for(var o=0;o<s-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new Px(a,new Int32Array([0])),a.one=new Px(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(s,n){if(s<0)throw new cs;if(n===0)return this.zero;var a=new Int32Array(s+1);return a[0]=n,new Px(this,a)},e.PDF417_GF=new e(bn.NUMBER_OF_CODEWORDS,3),e})(OGe),DGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RGe=(function(){function t(){this.field=$Ge.PDF417_GF}return t.prototype.decode=function(e,s,n){for(var a,i,o=new Px(this.field,e),l=new Int32Array(s),c=!1,d=s;d>0;d--){var u=o.evaluateAt(this.field.exp(d));l[s-d]=u,u!==0&&(c=!0)}if(!c)return 0;var h=this.field.getOne();if(n!=null)try{for(var m=DGe(n),f=m.next();!f.done;f=m.next()){var v=f.value,x=this.field.exp(e.length-1-v),g=new Px(this.field,new Int32Array([this.field.subtract(0,x),1]));h=h.multiply(g)}}catch(E){a={error:E}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}for(var b=new Px(this.field,l),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),b,s),N=w[0],C=w[1],S=this.findErrorLocations(N),A=this.findErrorMagnitudes(C,N,S),d=0;d<S.length;d++){var k=e.length-1-this.field.log(S[d]);if(k<0)throw Li.getChecksumInstance();e[k]=this.field.subtract(e[k],A[d])}return S.length},t.prototype.runEuclideanAlgorithm=function(e,s,n){if(e.getDegree()<s.getDegree()){var a=e;e=s,s=a}for(var i=e,o=s,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var d=i,u=l;if(i=o,l=c,i.isZero())throw Li.getChecksumInstance();o=d;for(var h=this.field.getZero(),m=i.getCoefficient(i.getDegree()),f=this.field.inverse(m);o.getDegree()>=i.getDegree()&&!o.isZero();){var v=o.getDegree()-i.getDegree(),x=this.field.multiply(o.getCoefficient(o.getDegree()),f);h=h.add(this.field.buildMonomial(v,x)),o=o.subtract(i.multiplyByMonomial(v,x))}c=h.multiply(l).subtract(u).negative()}var g=c.getCoefficient(0);if(g===0)throw Li.getChecksumInstance();var b=this.field.inverse(g),w=c.multiply(b),N=o.multiply(b);return[w,N]},t.prototype.findErrorLocations=function(e){for(var s=e.getDegree(),n=new Int32Array(s),a=0,i=1;i<this.field.getSize()&&a<s;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==s)throw Li.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,s,n){for(var a=s.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,s.getCoefficient(o));for(var l=new Px(this.field,i),c=n.length,d=new Int32Array(c),o=0;o<c;o++){var u=this.field.inverse(n[o]),h=this.field.subtract(0,e.evaluateAt(u)),m=this.field.inverse(l.evaluateAt(u));d[o]=this.field.multiply(h,m)}return d},t})(),kO=(function(){function t(e,s,n,a,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,s,n,a,i)}return t.prototype.constructor_1=function(e,s,n,a,i){var o=s==null||n==null,l=a==null||i==null;if(o&&l)throw new jt;o?(s=new Hr(0,a.getY()),n=new Hr(0,i.getY())):l&&(a=new Hr(e.getWidth()-1,s.getY()),i=new Hr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=s,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(s.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(s.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,s){return e==null?s:s==null?e:new t(e.image,e.topLeft,e.bottomLeft,s.topRight,s.bottomRight)},t.prototype.addMissingRows=function(e,s,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,d=Math.trunc(c.getY()-e);d<0&&(d=0);var u=new Hr(c.getX(),d);n?a=u:o=u}if(s>0){var h=n?this.bottomLeft:this.bottomRight,m=Math.trunc(h.getY()+s);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var f=new Hr(h.getX(),m);n?i=f:l=f}return new t(this.image,a,i,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),MGe=(function(){function t(e,s,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=s,this.rowCountLowerPart=n,this.rowCount=s+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),H8=(function(){function t(){this.buffer=""}return t.form=function(e,s){var n=-1;function a(o,l,c,d,u,h){if(o==="%%")return"%";if(s[++n]!==void 0){o=d?parseInt(d.substr(1)):void 0;var m=u?parseInt(u.substr(1)):void 0,f;switch(h){case"s":f=s[n];break;case"c":f=s[n][0];break;case"f":f=parseFloat(s[n]).toFixed(o);break;case"p":f=parseFloat(s[n]).toPrecision(o);break;case"e":f=parseFloat(s[n]).toExponential(o);break;case"x":f=parseInt(s[n]).toString(m||16);break;case"d":f=parseFloat(parseInt(s[n],m||10).toPrecision(o)).toFixed(0);break}f=typeof f=="object"?JSON.stringify(f):(+f).toString(m);for(var v=parseInt(c),x=c&&c[0]+""=="0"?"0":" ";f.length<v;)f=l!==void 0?f+x:x+f;return f}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},t.prototype.format=function(e){for(var s=[],n=1;n<arguments.length;n++)s[n-1]=arguments[n];this.buffer+=t.form(e,s)},t.prototype.toString=function(){return this.buffer},t})(),LGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bie=(function(){function t(e){this.boundingBox=new kO(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var s=this.getCodeword(e);if(s!=null)return s;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(s=this.codewords[a],s!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(s=this.codewords[a],s!=null)))return s}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,s){this.codewords[this.imageRowToCodewordIndex(e)]=s},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,s,n=new H8,a=0;try{for(var i=LGe(this.codewords),o=i.next();!o.done;o=i.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),FGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BGe=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return i},T1=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var s=this.values.get(e);s==null&&(s=0),s++,this.values.set(e,s)},t.prototype.getValue=function(){var e,s,n=-1,a=new Array,i=function(h,m){var f={getKey:function(){return h},getValue:function(){return m}};f.getValue()>n?(n=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===n&&a.push(f.getKey())};try{for(var o=FGe(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=BGe(l.value,2),d=c[0],u=c[1];i(d,u)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(e)throw e.error}}return bn.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),UGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),fE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eG=(function(t){UGe(e,t);function e(s,n){var a=t.call(this,s)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var s,n;try{for(var a=fE(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(s){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,s);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,u=1,h=0,m=l;m<c;m++)if(n[m]!=null){var f=n[m],v=f.getRowNumber()-d;if(v===0)h++;else if(v===1)u=Math.max(u,h),h=1,d=f.getRowNumber();else if(v<0||f.getRowNumber()>=s.getRowCount()||v>m)n[m]=null;else{var x=void 0;u>2?x=(u-2)*v:x=v;for(var g=x>=m,b=1;b<=x&&!g;b++)g=n[m-b]!=null;g?n[m]=null:(d=f.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var s,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=fE(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var d=c.getRowNumber();if(d>=i.length)continue;i[d]++}}}catch(u){s={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(s){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),d=-1,u=o;u<l;u++)if(c[u]!=null){var h=c[u];h.setRowNumberAsRowIndicatorColumn();var m=h.getRowNumber()-d;m===0||(m===1?d=h.getRowNumber():h.getRowNumber()>=s.getRowCount()?c[u]=null:d=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var s,n,a=this.getCodewords(),i=new T1,o=new T1,l=new T1,c=new T1;try{for(var d=fE(a),u=d.next();!u.done;u=d.next()){var h=u.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var m=h.getValue()%30,f=h.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:o.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:i.setValue(m+1);break}}}}catch(x){s={error:x}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(s)throw s.error}}if(i.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<bn.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>bn.MAX_ROWS_IN_BARCODE)return null;var v=new MGe(i.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,v),v},e.prototype.removeIncorrectCodewords=function(s,n){for(var a=0;a<s.length;a++){var i=s[a];if(s[a]!=null){var o=i.getValue()%30,l=i.getRowNumber();if(l>n.getRowCount()){s[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(s[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(s[a]=null);break;case 2:o+1!==n.getColumnCount()&&(s[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(bie),zGe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VGe=(function(){function t(e,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=bn.MAX_CODEWORDS_IN_BARCODE,s;do s=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<s);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var s=1;s<this.barcodeColumnCount+1;s++)for(var n=this.detectionResultColumns[s].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(s,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&s[n]!=null&&e[n].getRowNumber()===s[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<s.length;n++)if(s[n]!=null)for(var a=s[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=t.adjustRowNumberIfValid(a,i,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,s=this.detectionResultColumns[0].getCodewords(),n=0;n<s.length;n++)if(s[n]!=null)for(var a=s[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=t.adjustRowNumberIfValid(a,i,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,s,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),s=0):++s),s},t.prototype.adjustRowNumbers=function(e,s,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[s],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=l[s],d[3]=c[s],s>0&&(d[0]=n[s-1],d[4]=l[s-1],d[5]=c[s-1]),s>1&&(d[8]=n[s-2],d[10]=l[s-2],d[11]=c[s-2]),s<n.length-1&&(d[1]=n[s+1],d[6]=l[s+1],d[7]=c[s+1]),s<n.length-2&&(d[9]=n[s+2],d[12]=l[s+2],d[13]=c[s+2]);try{for(var u=zGe(d),h=u.next();!h.done;h=u.next()){var m=h.value;if(t.adjustRowNumber(o,m))return}}catch(f){a={error:f}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===e.getBucket()?(e.setRowNumber(s.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,s){this.detectionResultColumns[e]=s},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var s=new H8,n=0;n<e.getCodewords().length;n++){s.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){s.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){s.format("    |   ");continue}s.format(" %3d|%3d",i.getRowNumber(),i.getValue())}s.format("%n")}return s.toString()},t})(),WGe=(function(){function t(e,s,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(s),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),qGe=(function(){function t(){}return t.initialize=function(){for(var e=0;e<bn.SYMBOL_TABLE.length;e++)for(var s=bn.SYMBOL_TABLE[e],n=s&1,a=0;a<bn.BARS_IN_MODULE;a++){for(var i=0;(s&1)===n;)i+=1,s>>=1;n=s&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(bn.BARS_IN_MODULE)),t.RATIOS_TABLE[e][bn.BARS_IN_MODULE-a-1]=Math.fround(i/bn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var s=t.getDecodedCodewordValue(t.sampleBitCounts(e));return s!==-1?s:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var s=Nn.sum(e),n=new Int32Array(bn.BARS_IN_MODULE),a=0,i=0,o=0;o<bn.MODULES_IN_CODEWORD;o++){var l=s/(2*bn.MODULES_IN_CODEWORD)+o*s/bn.MODULES_IN_CODEWORD;i+e[a]<=l&&(i+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var s=t.getBitValue(e);return bn.getCodeword(s)===-1?-1:s},t.getBitValue=function(e){for(var s=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)s=s<<1|(n%2===0?1:0);return Math.trunc(s)},t.getClosestDecodedValue=function(e){var s=Nn.sum(e),n=new Array(bn.BARS_IN_MODULE);if(s>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/s);var i=NO.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,d=t.RATIOS_TABLE[l],u=0;u<bn.BARS_IN_MODULE;u++){var h=Math.fround(d[u]-n[u]);if(c+=Math.fround(h*h),c>=i)break}c<i&&(i=c,o=bn.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(bn.SYMBOL_TABLE.length).map(function(e){return new Array(bn.BARS_IN_MODULE)}),t})(),HGe=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),tG=(function(){function t(){}return t.parseLong=function(e,s){return s===void 0&&(s=void 0),parseInt(e,s)},t})(),GGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),YGe=(function(t){GGe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(uc),KGe=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,s,n){if(e==null)throw new YGe;if(s<0||s>e.length||n<0||s+n>e.length||s+n<0)throw new z8;if(n===0)return;for(var a=0;a<n;a++)this.write(e[s+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),XGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),QGe=(function(t){XGe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(uc),ZGe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),JGe=(function(t){ZGe(e,t);function e(s){s===void 0&&(s=32);var n=t.call(this)||this;if(n.count=0,s<0)throw new cs("Negative initial size: "+s);return n.buf=new Uint8Array(s),n}return e.prototype.ensureCapacity=function(s){s-this.buf.length>0&&this.grow(s)},e.prototype.grow=function(s){var n=this.buf.length,a=n<<1;if(a-s<0&&(a=s),a<0){if(s<0)throw new QGe;a=Js.MAX_VALUE}this.buf=to.copyOfUint8Array(this.buf,a)},e.prototype.write=function(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1},e.prototype.writeBytesOffset=function(s,n,a){if(n<0||n>s.length||a<0||n+a-s.length>0)throw new z8;this.ensureCapacity(this.count+a),Ca.arraycopy(s,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(s){s.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return to.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(s){return new String(this.buf).toString()},e.prototype.toString_number=function(s){return new String(this.buf).toString()},e.prototype.close=function(){},e})(KGe),na;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(na||(na={}));function wie(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Cj;function If(t){if(typeof Cj>"u"&&(Cj=wie()),Cj===null)throw new Error("BigInt is not supported!");return Cj(t)}function eYe(){var t=[];t[0]=If(1);var e=If(900);t[1]=e;for(var s=2;s<16;s++)t[s]=t[s-1]*e;return t}var tYe=(function(){function t(){}return t.decode=function(e,s){var n=new Ks(""),a=Ji.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],l=new HGe;i<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(o,e,a,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:Ji.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new lr;default:i--,i=t.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw lr.getFormatInstance()}if(n.length()===0)throw lr.getFormatInstance();var c=new v3(null,n.toString(),null,s);return c.setOther(l),c},t.decodeMacroBlock=function(e,s,n){if(s+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw lr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,s++)a[i]=e[s];n.setSegmentIndex(Js.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ks;s=t.textCompaction(e,s,o),n.setFileId(o.toString());var l=-1;for(e[s]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=s+1);s<e[0];)switch(e[s]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,e[s]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ks;s=t.textCompaction(e,s+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new Ks;s=t.textCompaction(e,s+1,d),n.setSender(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new Ks;s=t.textCompaction(e,s+1,u),n.setAddressee(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new Ks;s=t.numericCompaction(e,s+1,h),n.setSegmentCount(Js.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new Ks;s=t.numericCompaction(e,s+1,m),n.setTimestamp(tG.parseLong(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var f=new Ks;s=t.numericCompaction(e,s+1,f),n.setChecksum(Js.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Ks;s=t.numericCompaction(e,s+1,v),n.setFileSize(tG.parseLong(v.toString()));break;default:throw lr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:s++,n.setLastSegment(!0);break;default:throw lr.getFormatInstance()}if(l!==-1){var x=s-l;n.isLastSegment()&&x--,n.setOptionalData(to.copyOfRange(e,l,l+x))}return s},t.textCompaction=function(e,s,n){for(var a=new Int32Array((e[0]-s)*2),i=new Int32Array((e[0]-s)*2),o=0,l=!1;s<e[0]&&!l;){var c=e[s++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:s--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[s++],i[o]=c,o++;break}}return t.decodeTextCompaction(a,i,o,n),s},t.decodeTextCompaction=function(e,s,n,a){for(var i=na.ALPHA,o=na.ALPHA,l=0;l<n;){var c=e[l],d="";switch(i){case na.ALPHA:if(c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.LL:i=na.LOWER;break;case t.ML:i=na.MIXED;break;case t.PS:o=i,i=na.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(s[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break;case na.LOWER:if(c<26)d=String.fromCharCode(97+c);else switch(c){case 26:d=" ";break;case t.AS:o=i,i=na.ALPHA_SHIFT;break;case t.ML:i=na.MIXED;break;case t.PS:o=i,i=na.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(s[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break;case na.MIXED:if(c<t.PL)d=t.MIXED_CHARS[c];else switch(c){case t.PL:i=na.PUNCT;break;case 26:d=" ";break;case t.LL:i=na.LOWER;break;case t.AL:i=na.ALPHA;break;case t.PS:o=i,i=na.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(s[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break;case na.PUNCT:if(c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=na.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(s[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break;case na.ALPHA_SHIFT:if(i=o,c<26)d=String.fromCharCode(65+c);else switch(c){case 26:d=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break;case na.PUNCT_SHIFT:if(i=o,c<t.PAL)d=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=na.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(s[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=na.ALPHA;break}break}d!==""&&a.append(d),l++}},t.byteCompaction=function(e,s,n,a,i){var o=new JGe,l=0,c=0,d=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),h=s[a++];a<s[0]&&!d;)switch(u[l++]=h,c=900*c+h,h=s[a++],h){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,d=!0;break;default:if(l%5===0&&l>0){for(var m=0;m<6;++m)o.write(Number(If(c)>>If(8*(5-m))));c=0,l=0}break}a===s[0]&&h<t.TEXT_COMPACTION_MODE_LATCH&&(u[l++]=h);for(var f=0;f<l;f++)o.write(u[f]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<s[0]&&!d;){var v=s[a++];if(v<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,d=!0;break}if(l%5===0&&l>0){for(var m=0;m<6;++m)o.write(Number(If(c)>>If(8*(5-m))));c=0,l=0}}break}return i.append(Id.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,s,n){for(var a=0,i=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);s<e[0]&&!i;){var l=e[s++];if(s===e[0]&&(i=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:s--,i=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return s},t.decodeBase900toBase10=function(e,s){for(var n=If(0),a=0;a<s;a++)n+=t.EXP900[s-a-1]*If(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new lr;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=wie()?eYe():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),c1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rYe=(function(){function t(){}return t.decode=function(e,s,n,a,i,o,l){for(var c=new kO(e,s,n,a,i),d=null,u=null,h,m=!0;;m=!1){if(s!=null&&(d=t.getRowIndicatorColumn(e,c,s,!0,o,l)),a!=null&&(u=t.getRowIndicatorColumn(e,c,a,!1,o,l)),h=t.merge(d,u),h==null)throw jt.getNotFoundInstance();var f=h.getBoundingBox();if(m&&f!=null&&(f.getMinY()<c.getMinY()||f.getMaxY()>c.getMaxY()))c=f;else break}h.setBoundingBox(c);var v=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,d),h.setDetectionResultColumn(v,u);for(var x=d!=null,g=1;g<=v;g++){var b=x?g:v-g;if(h.getDetectionResultColumn(b)===void 0){var w=void 0;b===0||b===v?w=new eG(c,b===0):w=new bie(c),h.setDetectionResultColumn(b,w);for(var N=-1,C=N,S=c.getMinY();S<=c.getMaxY();S++){if(N=t.getStartColumn(h,b,S,x),N<0||N>c.getMaxX()){if(C===-1)continue;N=C}var A=t.detectCodeword(e,c.getMinX(),c.getMaxX(),x,N,S,o,l);A!=null&&(w.setCodeword(S,A),C=N,o=Math.min(o,A.getWidth()),l=Math.max(l,A.getWidth()))}}}return t.createDecoderResult(h)},t.merge=function(e,s){if(e==null&&s==null)return null;var n=t.getBarcodeMetadata(e,s);if(n==null)return null;var a=kO.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(s));return new VGe(n,a)},t.adjustBoundingBox=function(e){var s,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=t.getMax(a),o=0;try{for(var l=c1(a),c=l.next();!c.done;c=l.next()){var d=c.value;if(o+=i-d,d>0)break}}catch(f){s={error:f}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(s)throw s.error}}for(var u=e.getCodewords(),h=0;o>0&&u[h]==null;h++)o--;for(var m=0,h=a.length-1;h>=0&&(m+=i-a[h],!(a[h]>0));h--);for(var h=u.length-1;m>0&&u[h]==null;h--)m--;return e.getBoundingBox().addMissingRows(o,m,e.isLeft())},t.getMax=function(e){var s,n,a=-1;try{for(var i=c1(e),o=i.next();!o.done;o=i.next()){var l=o.value;a=Math.max(a,l)}}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a},t.getBarcodeMetadata=function(e,s){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();var a;return s==null||(a=s.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,s,n,a,i,o){for(var l=new eG(s,a),c=0;c<2;c++)for(var d=c===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=s.getMaxY()&&h>=s.getMinY();h+=d){var m=t.detectCodeword(e,0,e.getWidth(),a,u,h,i,o);m!=null&&(l.setCodeword(h,m),a?u=m.getStartX():u=m.getEndX())}return l},t.adjustCodewordCount=function(e,s){var n=s[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>bn.MAX_CODEWORDS_IN_BARCODE)throw jt.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var s=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,s);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var d=s[l][c+1].getValue(),u=l*e.getBarcodeColumnCount()+c;d.length===0?n.push(u):d.length===1?a[u]=d[0]:(o.push(u),i.push(d))}for(var h=new Array(i.length),m=0;m<h.length;m++)h[m]=i[m];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,bn.toIntArray(n),bn.toIntArray(o),h)},t.createDecoderResultFromAmbiguousValues=function(e,s,n,a,i){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)s[a[c]]=i[c][o[c]];try{return t.decodeCodewords(s,e,n)}catch(u){var d=u instanceof Li;if(!d)throw u}if(o.length===0)throw Li.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<i[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Li.getChecksumInstance()}throw Li.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var s,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new T1;var d=0;try{for(var u=c1(e.getDetectionResultColumns()),h=u.next();!h.done;h=u.next()){var m=h.value;if(m!=null)try{for(var f=(a=void 0,c1(m.getCodewords())),v=f.next();!v.done;v=f.next()){var x=v.value;if(x!=null){var g=x.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][d].setValue(x.getValue())}}}}catch(b){a={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}d++}}catch(b){s={error:b}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(s)throw s.error}}return o},t.isValidBarcodeColumn=function(e,s){return s>=0&&s<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,s,n,a){var i,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,s-l)&&(c=e.getDetectionResultColumn(s-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(s).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,s-l)&&(c=e.getDetectionResultColumn(s-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var d=0;t.isValidBarcodeColumn(e,s-l);){s-=l;try{for(var u=(i=void 0,c1(e.getDetectionResultColumn(s).getCodewords())),h=u.next();!h.done;h=u.next()){var m=h.value;if(m!=null)return(a?m.getEndX():m.getStartX())+l*d*(m.getEndX()-m.getStartX())}}catch(f){i={error:f}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}d++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,s,n,a,i,o,l,c){i=t.adjustCodewordStartColumn(e,s,n,a,i,o);var d=t.getModuleBitCount(e,s,n,a,i,o);if(d==null)return null;var u,h=Nn.sum(d);if(a)u=i+h;else{for(var m=0;m<d.length/2;m++){var f=d[m];d[m]=d[d.length-1-m],d[d.length-1-m]=f}u=i,i=u-h}if(!t.checkCodewordSkew(h,l,c))return null;var v=qGe.getDecodedValue(d),x=bn.getCodeword(v);return x===-1?null:new WGe(i,u,t.getCodewordBucketNumber(v),x)},t.getModuleBitCount=function(e,s,n,a,i,o){for(var l=i,c=new Int32Array(8),d=0,u=a?1:-1,h=a;(a?l<n:l>=s)&&d<c.length;)e.get(l,o)===h?(c[d]++,l+=u):(d++,h=!h);return d===c.length||l===(a?n:s)&&d===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,s,n,a,i,o){for(var l=i,c=a?-1:1,d=0;d<2;d++){for(;(a?l>=s:l<n)&&a===e.get(l,o);){if(Math.abs(i-l)>t.CODEWORD_SKEW_SIZE)return i;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,s,n){return s-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,s,n){if(e.length===0)throw lr.getFormatInstance();var a=1<<s+1,i=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=tYe.decode(e,""+s);return o.setErrorsCorrected(i),o.setErasures(n.length),o},t.correctErrors=function(e,s,n){if(s!=null&&s.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Li.getChecksumInstance();return t.errorCorrection.decode(e,n,s)},t.verifyCodewordCount=function(e,s){if(e.length<4)throw lr.getFormatInstance();var n=e[0];if(n>e.length)throw lr.getFormatInstance();if(n===0)if(s<e.length)e[0]=e.length-s;else throw lr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var s=new Int32Array(8),n=0,a=s.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)s[a]++,e>>=1;return s},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var s=new H8,n=0;n<e.length;n++){s.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}s.format("%n")}return s.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new RGe,t})(),sYe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V4=(function(){function t(){}return t.prototype.decode=function(e,s){s===void 0&&(s=null);var n=t.decode(e,s,!1);if(n==null||n.length===0||n[0]==null)throw jt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,s){s===void 0&&(s=null);try{return t.decode(e,s,!0)}catch(n){throw n instanceof lr||n instanceof Li?jt.getNotFoundInstance():n}},t.decode=function(e,s,n){var a,i,o=new Array,l=PGe.detectMultiple(e,s,n);try{for(var c=sYe(l.getPoints()),d=c.next();!d.done;d=c.next()){var u=d.value,h=rYe.decode(l.getBits(),u[4],u[5],u[6],u[7],t.getMinCodewordWidth(u),t.getMaxCodewordWidth(u)),m=new pl(h.getText(),h.getRawBytes(),void 0,u,ls.PDF_417);m.putMetadata(Bo.ERROR_CORRECTION_LEVEL,h.getECLevel());var f=h.getOther();f!=null&&m.putMetadata(Bo.PDF417_EXTRA_METADATA,f),o.push(m)}}catch(v){a={error:v}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return o.map(function(v){return v})},t.getMaxWidth=function(e,s){return e==null||s==null?0:Math.trunc(Math.abs(e.getX()-s.getX()))},t.getMinWidth=function(e,s){return e==null||s==null?Js.MAX_VALUE:Math.trunc(Math.abs(e.getX()-s.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*bn.MODULES_IN_CODEWORD/bn.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*bn.MODULES_IN_CODEWORD/bn.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*bn.MODULES_IN_CODEWORD/bn.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*bn.MODULES_IN_CODEWORD/bn.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),nYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),rG=(function(t){nYe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(uc),sG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jie=(function(){function t(){}return t.prototype.decode=function(e,s){return this.setHints(s),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var s=e!=null&&e.get(ka.TRY_HARDER)!==void 0,n=e==null?null:e.get(ka.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===ls.UPC_A||o===ls.UPC_E||o===ls.EAN_13||o===ls.EAN_8||o===ls.CODABAR||o===ls.CODE_39||o===ls.CODE_93||o===ls.CODE_128||o===ls.ITF||o===ls.RSS_14||o===ls.RSS_EXPANDED});i&&!s&&a.push(new R0(e)),n.includes(ls.QR_CODE)&&a.push(new z4),n.includes(ls.DATA_MATRIX)&&a.push(new U4),n.includes(ls.AZTEC)&&a.push(new F4),n.includes(ls.PDF_417)&&a.push(new V4),i&&s&&a.push(new R0(e))}a.length===0&&(s||a.push(new R0(e)),a.push(new z4),a.push(new U4),a.push(new F4),a.push(new V4),s&&a.push(new R0(e))),this.readers=a},t.prototype.reset=function(){var e,s;if(this.readers!==null)try{for(var n=sG(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var s,n;if(this.readers===null)throw new rG("No readers where selected, nothing can be read.");try{for(var a=sG(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof rG)continue}}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}throw new jt("No MultiFormat Readers were able to detect the code.")},t})(),aYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){aYe(e,t);function e(s,n){s===void 0&&(s=null),n===void 0&&(n=500);var a=this,i=new jie;return i.setHints(s),a=t.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(s){return this.reader.decodeWithState(s)},e})(uy);var iYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){iYe(e,t);function e(s){return s===void 0&&(s=500),t.call(this,new V4,s)||this}return e})(uy);var oYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){oYe(e,t);function e(s){return s===void 0&&(s=500),t.call(this,new z4,s)||this}return e})(uy);var _O;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(_O||(_O={}));const kj=_O;var Nie=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Hf(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var s=this.cachedGenerators;if(e>=s.length)for(var n=s[s.length-1],a=this.field,i=s.length;i<=e;i++){var o=n.multiply(new Hf(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));s.push(o),n=o}return s[e]},t.prototype.encode=function(e,s){if(s===0)throw new cs("No error correction bytes");var n=e.length-s;if(n<=0)throw new cs("No data bytes provided");var a=this.buildGenerator(s),i=new Int32Array(n);Ca.arraycopy(e,0,i,0,n);var o=new Hf(this.field,i);o=o.multiplyByMonomial(s,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),d=s-c.length,u=0;u<d;u++)e[n+u]=0;Ca.arraycopy(c,0,e,n+d,c.length)},t})(),O1=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var s=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var l=n[o],c=0;c<a-1;c++){var d=l[c];d===l[c+1]&&d===n[o+1][c]&&d===n[o+1][c+1]&&s++}return t.N2*s},t.applyMaskPenaltyRule3=function(e){for(var s=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&s++,o+6<i&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&s++}return s*t.N3},t.isWhiteHorizontal=function(e,s,n){s=Math.max(s,0),n=Math.min(n,e.length);for(var a=s;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,s,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][s]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var s=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&s++;var d=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(s*2-d)*10/d);return u*t.N4},t.getDataMaskBit=function(e,s,n){var a,i;switch(e){case 0:a=n+s&1;break;case 1:a=n&1;break;case 2:a=s%3;break;case 3:a=(n+s)%3;break;case 4:a=Math.floor(n/2)+Math.floor(s/3)&1;break;case 5:i=n*s,a=(i&1)+i%3;break;case 6:i=n*s,a=(i&1)+i%3&1;break;case 7:i=n*s,a=i%3+(n+s&1)&1;break;default:throw new cs("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,s){for(var n=0,a=s?e.getHeight():e.getWidth(),i=s?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,d=-1,u=0;u<i;u++){var h=s?o[l][u]:o[u][l];h===d?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,d=h)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),lYe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cYe=(function(){function t(e,s){this.width=e,this.height=s;for(var n=new Array(s),a=0;a!==s;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,s){return this.bytes[s][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,s,n){this.bytes[s][e]=n},t.prototype.setBoolean=function(e,s,n){this.bytes[s][e]=n?1:0},t.prototype.clear=function(e){var s,n;try{for(var a=lYe(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;to.fill(o,e)}}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var s=e;if(this.width!==s.width||this.height!==s.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=s.bytes[n],l=0,c=this.width;l<c;++l)if(i[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Ks,s=0,n=this.height;s<n;++s){for(var a=this.bytes[s],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),AO=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ks;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),dYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Pa=(function(t){dYe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(uc),nG=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,s,n,a,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(s,a,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,a,i)},t.embedBasicPatterns=function(e,s){t.embedPositionDetectionPatternsAndSeparators(s),t.embedDarkDotAtLeftBottomCorner(s),t.maybeEmbedPositionAdjustmentPatterns(e,s),t.embedTimingPatterns(s)},t.embedTypeInfo=function(e,s,n){var a=new ko;t.makeTypeInfoBits(e,s,a);for(var i=0,o=a.getSize();i<o;++i){var l=a.get(a.getSize()-1-i),c=t.TYPE_INFO_COORDINATES[i],d=c[0],u=c[1];if(n.setBoolean(d,u,l),i<8){var h=n.getWidth()-i-1,m=8;n.setBoolean(h,m,l)}else{var h=8,m=n.getHeight()-7+(i-8);n.setBoolean(h,m,l)}}},t.maybeEmbedVersionInfo=function(e,s){if(!(e.getVersionNumber()<7)){var n=new ko;t.makeVersionInfoBits(e,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var l=n.get(a);a--,s.setBoolean(i,s.getHeight()-11+o,l),s.setBoolean(s.getHeight()-11+o,i,l)}}},t.embedDataBits=function(e,s,n){for(var a=0,i=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var d=o-c;if(t.isEmpty(n.get(d,l))){var u=void 0;a<e.getSize()?(u=e.get(a),++a):u=!1,s!==255&&O1.getDataMaskBit(s,d,l)&&(u=!u),n.setBoolean(d,l,u)}}l+=i}i=-i,l+=i,o-=2}if(a!==e.getSize())throw new Pa("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Js.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,s){if(s===0)throw new cs("0 polynomial");var n=t.findMSBSet(s);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=s<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,s,n){if(!AO.isValidMaskPattern(s))throw new Pa("Invalid mask pattern");var a=e.getBits()<<3|s;n.appendBits(a,5);var i=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(i,10);var o=new ko;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Pa("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,s){s.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(s.appendBits(n,12),s.getSize()!==18)throw new Pa("should not happen but we got: "+s.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var s=8;s<e.getWidth()-8;++s){var n=(s+1)%2;t.isEmpty(e.get(s,6))&&e.setNumber(s,6,n),t.isEmpty(e.get(6,s))&&e.setNumber(6,s,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Pa;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,s,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,s)))throw new Pa;n.setNumber(e+a,s,0)}},t.embedVerticalSeparationPattern=function(e,s,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,s+a)))throw new Pa;n.setNumber(e,s+a,0)}},t.embedPositionAdjustmentPattern=function(e,s,n){for(var a=0;a<5;++a)for(var i=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,s+a,i[o])},t.embedPositionDetectionPattern=function(e,s,n){for(var a=0;a<7;++a)for(var i=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,s+a,i[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var s=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-s,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-s,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,s){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var l=a[i];if(l>=0)for(var c=0;c!==o;c++){var d=a[c];d>=0&&t.isEmpty(s.get(d,l))&&t.embedPositionAdjustmentPattern(d-2,l-2,s)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),uYe=(function(){function t(e,s){this.dataBytes=e,this.errorCorrectionBytes=s}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),aG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return O1.applyMaskPenaltyRule1(e)+O1.applyMaskPenaltyRule2(e)+O1.applyMaskPenaltyRule3(e)+O1.applyMaskPenaltyRule4(e)},t.encode=function(e,s,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(kj.CHARACTER_SET)!==void 0;i&&(a=n.get(kj.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new ko;if(o===Ta.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Ji.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var d=new ko;this.appendBytes(e,o,d,a);var u;if(n!==null&&n.get(kj.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(kj.QR_VERSION).toString(),10);u=Vx.getVersionForNumber(h);var m=this.calculateBitsNeeded(o,l,d,u);if(!this.willFit(m,u,s))throw new Pa("Data too big for requested version")}else u=this.recommendVersion(s,o,l,d);var f=new ko;f.appendBitArray(l);var v=o===Ta.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(v,u,o,f),f.appendBitArray(d);var x=u.getECBlocksForLevel(s),g=u.getTotalCodewords()-x.getTotalECCodewords();this.terminateBits(g,f);var b=this.interleaveWithECBytes(f,u.getTotalCodewords(),g,x.getNumBlocks()),w=new AO;w.setECLevel(s),w.setMode(o),w.setVersion(u);var N=u.getDimensionForVersion(),C=new cYe(N,N),S=this.chooseMaskPattern(b,s,u,C);return w.setMaskPattern(S),nG.buildMatrix(b,s,u,S,C),w.setMatrix(C),w},t.recommendVersion=function(e,s,n,a){var i=this.calculateBitsNeeded(s,n,a,Vx.getVersionForNumber(1)),o=this.chooseVersion(i,e),l=this.calculateBitsNeeded(s,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,s,n,a){return s.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,s){if(s===void 0&&(s=null),Ji.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(e))return Ta.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var l=e.charAt(i);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Ta.BYTE}return a?Ta.ALPHANUMERIC:n?Ta.NUMERIC:Ta.BYTE},t.isOnlyDoubleByteKanji=function(e){var s;try{s=Id.encode(e,Ji.SJIS)}catch{return!1}var n=s.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=s[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,s,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<AO.NUM_MASK_PATTERNS;l++){nG.buildMatrix(e,s,n,l,a);var c=this.calculateMaskPenalty(a);c<i&&(i=c,o=l)}return o},t.chooseVersion=function(e,s){for(var n=1;n<=40;n++){var a=Vx.getVersionForNumber(n);if(t.willFit(e,a,s))return a}throw new Pa("Data too big")},t.willFit=function(e,s,n){var a=s.getTotalCodewords(),i=s.getECBlocksForLevel(n),o=i.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,s){var n=e*8;if(s.getSize()>n)throw new Pa("data bits cannot fit in the QR Code"+s.getSize()+" > "+n);for(var a=0;a<4&&s.getSize()<n;++a)s.appendBit(!1);var i=s.getSize()&7;if(i>0)for(var a=i;a<8;a++)s.appendBit(!1);for(var o=e-s.getSizeInBytes(),a=0;a<o;++a)s.appendBits((a&1)===0?236:17,8);if(s.getSize()!==n)throw new Pa("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,s,n,a,i,o){if(a>=n)throw new Pa("Block ID too large");var l=e%n,c=n-l,d=Math.floor(e/n),u=d+1,h=Math.floor(s/n),m=h+1,f=d-h,v=u-m;if(f!==v)throw new Pa("EC bytes mismatch");if(n!==c+l)throw new Pa("RS blocks mismatch");if(e!==(h+f)*c+(m+v)*l)throw new Pa("Total bytes mismatch");a<c?(i[0]=h,o[0]=f):(i[0]=m,o[0]=v)},t.interleaveWithECBytes=function(e,s,n,a){var i,o,l,c;if(e.getSizeInBytes()!==n)throw new Pa("Number of bits and data bytes does not match");for(var d=0,u=0,h=0,m=new Array,f=0;f<a;++f){var v=new Int32Array(1),x=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(s,n,a,f,v,x);var g=v[0],b=new Uint8Array(g);e.toBytes(8*d,b,0,g);var w=t.generateECBytes(b,x[0]);m.push(new uYe(b,w)),u=Math.max(u,g),h=Math.max(h,w.length),d+=v[0]}if(n!==d)throw new Pa("Data bytes does not match offset");for(var N=new ko,f=0;f<u;++f)try{for(var C=(i=void 0,aG(m)),S=C.next();!S.done;S=C.next()){var A=S.value,b=A.getDataBytes();f<b.length&&N.appendBits(b[f],8)}}catch($){i={error:$}}finally{try{S&&!S.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}for(var f=0;f<h;++f)try{for(var k=(l=void 0,aG(m)),E=k.next();!E.done;E=k.next()){var A=E.value,w=A.getErrorCorrectionBytes();f<w.length&&N.appendBits(w[f],8)}}catch($){l={error:$}}finally{try{E&&!E.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}if(s!==N.getSizeInBytes())throw new Pa("Interleaving error: "+s+" and "+N.getSizeInBytes()+" differ.");return N},t.generateECBytes=function(e,s){for(var n=e.length,a=new Int32Array(n+s),i=0;i<n;i++)a[i]=e[i]&255;new Nie(sc.QR_CODE_FIELD_256).encode(a,s);for(var o=new Uint8Array(s),i=0;i<s;i++)o[i]=a[n+i];return o},t.appendModeInfo=function(e,s){s.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,s,n,a){var i=n.getCharacterCountBits(s);if(e>=1<<i)throw new Pa(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},t.appendBytes=function(e,s,n,a){switch(s){case Ta.NUMERIC:t.appendNumericBytes(e,n);break;case Ta.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Ta.BYTE:t.append8BitBytes(e,n,a);break;case Ta.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Pa("Invalid mode: "+s)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var s=t.getDigit(e);return s>=0&&s<=9},t.appendNumericBytes=function(e,s){for(var n=e.length,a=0;a<n;){var i=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));s.appendBits(i*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));s.appendBits(i*10+o,7),a+=2}else s.appendBits(i,4),a++}},t.appendAlphanumericBytes=function(e,s){for(var n=e.length,a=0;a<n;){var i=t.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new Pa;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new Pa;s.appendBits(i*45+o,11),a+=2}else s.appendBits(i,6),a++}},t.append8BitBytes=function(e,s,n){var a;try{a=Id.encode(e,n)}catch(c){throw new Pa(c)}for(var i=0,o=a.length;i!==o;i++){var l=a[i];s.appendBits(l,8)}},t.appendKanjiBytes=function(e,s){var n;try{n=Id.encode(e,Ji.SJIS)}catch(h){throw new Pa(h)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,l=n[i+1]&255,c=o<<8&4294967295|l,d=-1;if(c>=33088&&c<=40956?d=c-33088:c>=57408&&c<=60351&&(d=c-49472),d===-1)throw new Pa("Invalid byte sequence");var u=(d>>8)*192+(d&255);s.appendBits(u,13)}},t.appendECI=function(e,s){s.appendBits(Ta.ECI.getBits(),4),s.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ji.UTF8.getName(),t})();var hYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){hYe(e,t);function e(s,n,a,i,o,l,c,d){var u=t.call(this,l,c)||this;if(u.yuvData=s,u.dataWidth=n,u.dataHeight=a,u.left=i,u.top=o,i+l>n||o+c>a)throw new cs("Crop rectangle does not fit within image data.");return d&&u.reverseHorizontal(l,c),u}return e.prototype.getRow=function(s,n){if(s<0||s>=this.getHeight())throw new cs("Requested row is outside the image: "+s);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(s+this.top)*this.dataWidth+this.left;return Ca.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var s=this.getWidth(),n=this.getHeight();if(s===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=s*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return Ca.arraycopy(this.yuvData,o,i,0,a),i;for(var l=0;l<n;l++){var c=l*s;Ca.arraycopy(this.yuvData,o,i,c,s),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(s,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var s=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(s*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*s,d=0;d<s;d++){var u=i[o+d*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+d]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(s,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var l=o+s/2,c=o,d=o+s-1;c<l;c++,d--){var u=a[c];a[c]=a[d],a[d]=u}},e.prototype.invert=function(){return new g3(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(zw);var mYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){mYe(e,t);function e(s,n,a,i,o,l,c){var d=t.call(this,n,a)||this;if(d.dataWidth=i,d.dataHeight=o,d.left=l,d.top=c,s.BYTES_PER_ELEMENT===4){for(var u=n*a,h=new Uint8ClampedArray(u),m=0;m<u;m++){var f=s[m],v=f>>16&255,x=f>>7&510,g=f&255;h[m]=(v+x+g)/4&255}d.luminances=h}else d.luminances=s;if(i===void 0&&(d.dataWidth=n),o===void 0&&(d.dataHeight=a),l===void 0&&(d.left=0),c===void 0&&(d.top=0),d.left+n>d.dataWidth||d.top+a>d.dataHeight)throw new cs("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(s,n){if(s<0||s>=this.getHeight())throw new cs("Requested row is outside the image: "+s);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(s+this.top)*this.dataWidth+this.left;return Ca.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var s=this.getWidth(),n=this.getHeight();if(s===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=s*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return Ca.arraycopy(this.luminances,o,i,0,a),i;for(var l=0;l<n;l++){var c=l*s;Ca.arraycopy(this.luminances,o,i,c,s),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(s,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+s,this.top+n)},e.prototype.invert=function(){return new g3(this)},e})(zw);var fYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),pYe=(function(t){fYe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(s){return this.getCharacterSetECIByName(s)},e})(Ji),xYe=(function(){function t(){}return t.ISO_8859_1=Ji.ISO8859_1,t})(),EO,gYe=301,vYe=function(t,e){for(var s=1,n=0;n<255;n++)e[n]=s,t[s]=n,s*=2,s>=256&&(s^=gYe);return{LOG:t,ALOG:e}};EO=vYe([],[]),EO.LOG;EO.ALOG;var iG;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(iG||(iG={}));var oG=129,Sie=230,yYe=231,bYe=235,wYe=236,jYe=237,NYe=238,SYe=239,CYe=240,pE=254,kYe=254,lG="[)>05",cG="[)>06",dG="",Xn=0,Mo=1,_l=2,Xi=3,yo=4,nl=5,_Ye=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Xn},t.prototype.encode=function(e){var s=yu.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(s>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=yu.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case nl:e.writeCodeword(yYe),e.signalEncoderChange(nl);return;case Mo:e.writeCodeword(Sie),e.signalEncoderChange(Mo);return;case Xi:e.writeCodeword(NYe),e.signalEncoderChange(Xi);break;case _l:e.writeCodeword(SYe),e.signalEncoderChange(_l);break;case yo:e.writeCodeword(CYe),e.signalEncoderChange(yo);break;default:throw new Error("Illegal mode: "+a)}else yu.isExtendedASCII(n)?(e.writeCodeword(bYe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,s){if(yu.isDigit(e)&&yu.isDigit(s)){var n=(e-48)*10+(s-48);return n+130}throw new Error("not digits: "+e+s)},t})(),AYe=(function(){function t(){}return t.prototype.getEncodingMode=function(){return nl},t.prototype.encode=function(e){var s=new Ks;for(s.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();s.append(n),e.pos++;var a=yu.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Xn);break}}var i=s.length()-1,o=1,l=e.getCodewordCount()+i+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(i<=249)s.setCharAt(0,mn.getCharAt(i));else if(i<=1555)s.setCharAt(0,mn.getCharAt(Math.floor(i/250)+249)),s.insert(1,mn.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var d=0,n=s.length();d<n;d++)e.writeCodeword(this.randomize255State(s.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,s){var n=149*s%255+1,a=e+n;return a<=255?a:a-256},t})(),G8=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Mo},t.prototype.encodeMaximal=function(e){for(var s=new Ks,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,s),s.length()%3===0&&(a=e.pos,i=s.length())}if(i!==s.length()){var l=Math.floor(s.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var d=e.getSymbolInfo().getDataCapacity()-c,u=Math.floor(s.length()%3);(u===2&&d!==2||u===1&&(n>3||d!==1))&&(e.pos=a)}s.length()>0&&e.writeCodeword(Sie),this.handleEOD(e,s)},t.prototype.encode=function(e){for(var s=new Ks;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,s),i=Math.floor(s.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Ks;for(s.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,s,c,a));s.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,s,c,a);break}var d=s.length();if(d%3===0){var u=yu.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(Xn);break}}}this.handleEOD(e,s)},t.prototype.backtrackOneCharacter=function(e,s,n,a){var i=s.length(),o=s.toString().substring(0,i-a);s.setLengthToZero(),s.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,s){e.writeCodewords(this.encodeToCodewords(s.toString()));var n=s.toString().substring(3);s.setLengthToZero(),s.append(n)},t.prototype.handleEOD=function(e,s){var n=Math.floor(s.length()/3*2),a=s.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(s.append("\0");s.length()>=3;)this.writeNextTriplet(e,s);e.hasMoreCharacters()&&e.writeCodeword(pE)}else if(o===1&&a===1){for(;s.length()>=3;)this.writeNextTriplet(e,s);e.hasMoreCharacters()&&e.writeCodeword(pE),e.pos--}else if(a===0){for(;s.length()>=3;)this.writeNextTriplet(e,s);(o>0||e.hasMoreCharacters())&&e.writeCodeword(pE)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Xn)},t.prototype.encodeChar=function(e,s){if(e===32)return s.append(3),1;if(e>=48&&e<=57)return s.append(e-48+4),1;if(e>=65&&e<=90)return s.append(e-65+14),1;if(e<32)return s.append(0),s.append(e),2;if(e<=47)return s.append(1),s.append(e-33),2;if(e<=64)return s.append(1),s.append(e-58+15),2;if(e<=95)return s.append(1),s.append(e-91+22),2;if(e<=127)return s.append(2),s.append(e-96),2;s.append("1");var n=2;return n+=this.encodeChar(e-128,s),n},t.prototype.encodeToCodewords=function(e){var s=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=s/256,a=s%256,i=new Ks;return i.append(n),i.append(a),i.toString()},t})(),EYe=(function(){function t(){}return t.prototype.getEncodingMode=function(){return yo},t.prototype.encode=function(e){for(var s=new Ks;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,s),e.pos++;var a=s.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(s.toString()));var i=s.toString().substring(4);s.setLengthToZero(),s.append(i);var o=yu.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Xn);break}}}s.append(mn.getCharAt(31)),this.handleEOD(e,s)},t.prototype.handleEOD=function(e,s){try{var n=s.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(s.toString()),c=!e.hasMoreCharacters(),d=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}d?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Xn)}},t.prototype.encodeChar=function(e,s){e>=32&&e<=63?s.append(e):e>=64&&e<=94?s.append(mn.getCharAt(e-64)):yu.illegalCharacter(mn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var s=e.length;if(s===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=s>=2?e.charAt(1).charCodeAt(0):0,i=s>=3?e.charAt(2).charCodeAt(0):0,o=s>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(i<<6)+o,c=l>>16&255,d=l>>8&255,u=l&255,h=new Ks;return h.append(c),s>=2&&h.append(d),s>=3&&h.append(u),h.toString()},t})(),PYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),TYe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},En=(function(){function t(e,s,n,a,i,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=s,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,s,n,a,i){var o,l;s===void 0&&(s=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var c=TYe(IYe),d=c.next();!d.done;d=c.next()){var u=d.value;if(!(s===1&&u.rectangular)&&!(s===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(u.getSymbolWidth()>a.getWidth()||u.getSymbolHeight()>a.getHeight()))&&e<=u.dataCapacity)return u}}catch(h){o={error:h}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),OYe=(function(t){PYe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(s){return s<=8?156:155},e})(En),IYe=[new En(!1,3,5,8,8,1),new En(!1,5,7,10,10,1),new En(!0,5,7,16,6,1),new En(!1,8,10,12,12,1),new En(!0,10,11,14,6,2),new En(!1,12,12,14,14,1),new En(!0,16,14,24,10,1),new En(!1,18,14,16,16,1),new En(!1,22,18,18,18,1),new En(!0,22,18,16,10,2),new En(!1,30,20,20,20,1),new En(!0,32,24,16,14,2),new En(!1,36,24,22,22,1),new En(!1,44,28,24,24,1),new En(!0,49,28,22,14,2),new En(!1,62,36,14,14,4),new En(!1,86,42,16,16,4),new En(!1,114,48,18,18,4),new En(!1,144,56,20,20,4),new En(!1,174,68,22,22,4),new En(!1,204,84,24,24,4,102,42),new En(!1,280,112,14,14,16,140,56),new En(!1,368,144,16,16,16,92,36),new En(!1,456,192,18,18,16,114,48),new En(!1,576,224,20,20,16,144,56),new En(!1,696,272,22,22,16,174,68),new En(!1,816,336,24,24,16,136,56),new En(!1,1050,408,18,18,36,175,68),new En(!1,1304,496,20,20,36,163,62),new OYe],$Ye=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var s=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Ks,a=0,i=s.length;a<i;a++){var o=String.fromCharCode(s[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Ks,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,s){this.minSize=e,this.maxSize=s},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=En.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),DYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),RYe=(function(t){DYe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Xi},e.prototype.encode=function(s){for(var n=new Ks;s.hasMoreCharacters();){var a=s.getCurrentChar();s.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(s,n);var o=yu.lookAheadTest(s.getMessage(),s.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){s.signalEncoderChange(Xn);break}}}this.handleEOD(s,n)},e.prototype.encodeChar=function(s,n){switch(s){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:s>=48&&s<=57?n.append(s-48+4):s>=65&&s<=90?n.append(s-65+14):yu.illegalCharacter(mn.getCharAt(s));break}return 1},e.prototype.handleEOD=function(s,n){s.updateSymbolInfo();var a=s.getSymbolInfo().getDataCapacity()-s.getCodewordCount(),i=n.length();s.pos-=i,(s.getRemainingCharacters()>1||a>1||s.getRemainingCharacters()!==a)&&s.writeCodeword(kYe),s.getNewEncoding()<0&&s.signalEncoderChange(Xn)},e})(G8),MYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),LYe=(function(t){MYe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return _l},e.prototype.encodeChar=function(s,n){if(s===32)return n.append(3),1;if(s>=48&&s<=57)return n.append(s-48+4),1;if(s>=97&&s<=122)return n.append(s-97+14),1;if(s<32)return n.append(0),n.append(s),2;if(s<=47)return n.append(1),n.append(s-33),2;if(s<=64)return n.append(1),n.append(s-58+15),2;if(s>=91&&s<=95)return n.append(1),n.append(s-91+22),2;if(s===96)return n.append(2),n.append(0),2;if(s<=90)return n.append(2),n.append(s-65+1),2;if(s<=127)return n.append(2),n.append(s-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(s-128,n),a},e})(G8),yu=(function(){function t(){}return t.randomize253State=function(e){var s=149*e%253+1,n=oG+s;return n<=254?n:n-254},t.encodeHighLevel=function(e,s,n,a,i){s===void 0&&(s=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new G8,l=[new _Ye,o,new LYe,new RYe,new EYe,new AYe],c=new $Ye(e);c.setSymbolShape(s),c.setSizeConstraints(n,a),e.startsWith(lG)&&e.endsWith(dG)?(c.writeCodeword(wYe),c.setSkipAtEnd(2),c.pos+=lG.length):e.startsWith(cG)&&e.endsWith(dG)&&(c.writeCodeword(jYe),c.setSkipAtEnd(2),c.pos+=cG.length);var d=Xn;for(i&&(o.encodeMaximal(c),d=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[d].encode(c),c.getNewEncoding()>=0&&(d=c.getNewEncoding(),c.resetEncoderSignal());var u=c.getCodewordCount();c.updateSymbolInfo();var h=c.getSymbolInfo().getDataCapacity();u<h&&d!==Xn&&d!==nl&&d!==yo&&c.writeCodeword("");var m=c.getCodewords();for(m.length()<h&&m.append(oG);m.length()<h;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,s,n){var a=this.lookAheadTestIntern(e,s,n);if(n===Xi&&a===Xi){for(var i=Math.min(s+3,e.length),o=s;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Xn}else if(n===yo&&a===yo){for(var i=Math.min(s+4,e.length),o=s;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Xn}return a},t.lookAheadTestIntern=function(e,s,n){if(s>=e.length)return n;var a;n===Xn?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),l=[];;){if(s+i===e.length){to.fill(o,0),to.fill(l,0);var c=this.findMinimums(a,l,Js.MAX_VALUE,o),d=this.getMinimumCount(o);if(l[Xn]===c)return Xn;if(d===1){if(o[nl]>0)return nl;if(o[yo]>0)return yo;if(o[_l]>0)return _l;if(o[Xi]>0)return Xi}return Mo}var u=e.charCodeAt(s+i);if(i++,this.isDigit(u)?a[Xn]+=.5:this.isExtendedASCII(u)?(a[Xn]=Math.ceil(a[Xn]),a[Xn]+=2):(a[Xn]=Math.ceil(a[Xn]),a[Xn]++),this.isNativeC40(u)?a[Mo]+=2/3:this.isExtendedASCII(u)?a[Mo]+=8/3:a[Mo]+=4/3,this.isNativeText(u)?a[_l]+=2/3:this.isExtendedASCII(u)?a[_l]+=8/3:a[_l]+=4/3,this.isNativeX12(u)?a[Xi]+=2/3:this.isExtendedASCII(u)?a[Xi]+=13/3:a[Xi]+=10/3,this.isNativeEDIFACT(u)?a[yo]+=3/4:this.isExtendedASCII(u)?a[yo]+=17/4:a[yo]+=13/4,this.isSpecialB256(u)?a[nl]+=4:a[nl]++,i>=4){if(to.fill(o,0),to.fill(l,0),this.findMinimums(a,l,Js.MAX_VALUE,o),l[Xn]<this.min(l[nl],l[Mo],l[_l],l[Xi],l[yo]))return Xn;if(l[nl]<l[Xn]||l[nl]+1<this.min(l[Mo],l[_l],l[Xi],l[yo]))return nl;if(l[yo]+1<this.min(l[nl],l[Mo],l[_l],l[Xi],l[Xn]))return yo;if(l[_l]+1<this.min(l[nl],l[Mo],l[yo],l[Xi],l[Xn]))return _l;if(l[Xi]+1<this.min(l[nl],l[Mo],l[yo],l[_l],l[Xn]))return Xi;if(l[Mo]+1<this.min(l[Xn],l[nl],l[yo],l[_l])){if(l[Mo]<l[Xi])return Mo;if(l[Mo]===l[Xi]){for(var h=s+i+1;h<e.length;){var m=e.charCodeAt(h);if(this.isX12TermSep(m))return Xi;if(!this.isNativeX12(m))break;h++}return Mo}}}}},t.min=function(e,s,n,a,i){var o=Math.min(e,Math.min(s,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},t.findMinimums=function(e,s,n,a){for(var i=0;i<6;i++){var o=s[i]=Math.ceil(e[i]);n>o&&(n=o,to.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},t.getMinimumCount=function(e){for(var s=0,n=0;n<6;n++)s+=e[n];return s||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,s){s===void 0&&(s=0);for(var n=e.length,a=s;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-s},t.illegalCharacter=function(e){var s=Js.toHexString(e.charCodeAt(0));throw s="0000".substring(0,4-s.length)+s,new Error("Illegal character: "+e+" (0x"+s+")")},t})(),xE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uG=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Id.encode(e,this.charset)!=null}catch{return!1}},t})(),FYe=(function(){function t(e,s,n){var a,i,o,l,c,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(O){return new uG(pYe.forName(O))}),this.encoders=[];var u=[];u.push(new uG(xYe.ISO_8859_1));for(var h=s!=null&&s.name.startsWith("UTF"),m=0;m<e.length;m++){var f=!1;try{for(var v=(a=void 0,xE(u)),x=v.next();!x.done;x=v.next()){var g=x.value,b=e.charAt(m),w=b.charCodeAt(0);if(w===n||g.canEncode(b)){f=!0;break}}}catch(O){a={error:O}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}if(!f)try{for(var N=(o=void 0,xE(this.ENCODERS)),C=N.next();!C.done;C=N.next()){var g=C.value;if(g.canEncode(e.charAt(m))){u.push(g),f=!0;break}}}catch(O){o={error:O}}finally{try{C&&!C.done&&(l=N.return)&&l.call(N)}finally{if(o)throw o.error}}f||(h=!0)}if(u.length===1&&!h)this.encoders=[u[0]];else{this.encoders=[];var S=0;try{for(var A=xE(u),k=A.next();!k.done;k=A.next()){var g=k.value;this.encoders[S++]=g}}catch(O){c={error:O}}finally{try{k&&!k.done&&(d=A.return)&&d.call(A)}finally{if(c)throw c.error}}}var E=-1;if(s!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&s.name===this.encoders[m].name){E=m;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,s){if(!(s<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,s){if(!(s<this.length()))throw new Error("index must be less than length");return Id.encode(mn.getCharAt(e),this.encoders[s].name)},t})(),BYe=3,UYe=(function(){function t(e,s,n){this.fnc1=n;var a=new FYe(e,s,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,s){if(e+s-1>=this.bytes.length)return!1;for(var n=0;n<s;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,s){if(e<0||e>s||s>this.length())throw new Error(""+e);for(var n=new Ks,a=e;a<s;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,s,n){(e[s][n.encoderIndex]==null||e[s][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[s][n.encoderIndex]=n)},t.prototype.addEdges=function(e,s,n,a,i,o){var l=e.charAt(a).charCodeAt(0),c=0,d=s.length();s.getPriorityEncoderIndex()>=0&&(l===o||s.canEncode(l,s.getPriorityEncoderIndex()))&&(c=s.getPriorityEncoderIndex(),d=c+1);for(var u=c;u<d;u++)(l===o||s.canEncode(l,u))&&this.addEdge(n,a+1,new hG(l,s,u,i,o))},t.prototype.encodeMinimally=function(e,s,n){var a=e.length,i=new hG[a+1][s.length()];this.addEdges(e,s,i,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<s.length();l++)i[o][l]!=null&&o<a&&this.addEdges(e,s,i,o,i[o][l],n);for(var l=0;l<s.length();l++)i[o-1][l]=null}for(var c=-1,d=Js.MAX_VALUE,l=0;l<s.length();l++)if(i[a][l]!=null){var u=i[a][l];u.cachedTotalSize<d&&(d=u.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],m=i[a][c];m!=null;){if(m.isFNC1())h.unshift(1e3);else for(var f=s.encode(m.c,m.encoderIndex),o=f.length-1;o>=0;o--)h.unshift(f[o]&255);var v=m.previous===null?0:m.previous.encoderIndex;v!==m.encoderIndex&&h.unshift(256+s.getECIValue(m.encoderIndex)),m=m.previous}for(var x=[],o=0;o<x.length;o++)x[o]=h[o];return x},t})(),hG=(function(){function t(e,s,n,a,i){this.c=e,this.encoderSet=s,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:s.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=BYe),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),zYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();var mG;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(mG||(mG={}));(function(t){zYe(e,t);function e(s,n,a,i,o){var l=t.call(this,s,n,a)||this;return l.shape=i,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(UYe);var VYe=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),fG=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,s){return e.sort(s)[0]},t})(),WYe=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),qYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Y8=(function(t){qYe(e,t);function e(s,n,a){var i=t.call(this,s)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(s,n){s.appendBits(this.value,this.bitCount)},e.prototype.add=function(s,n){return new e(this,s,n)},e.prototype.addBinaryShift=function(s,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,s,n)},e.prototype.toString=function(){var s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+Js.toBinaryString(s|1<<this.bitCount).substring(1)+">"},e})(WYe),HYe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,s)};return function(e,s){t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),GYe=(function(t){HYe(e,t);function e(s,n,a){var i=t.call(this,s,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(s,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):a===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(s,n){return new e(this,s,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Y8);function YYe(t,e,s){return new GYe(t,e,s)}function d1(t,e,s){return new Y8(t,e,s)}var KYe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gf=0,W4=1,Ad=2,Cie=3,xh=4,XYe=new Y8(null,0,0),gE=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],QYe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ZYe(t){var e,s;try{for(var n=QYe(t),a=n.next();!a.done;a=n.next()){var i=a.value;to.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(s=n.return)&&s.call(n)}finally{if(e)throw e.error}}return t[Gf][xh]=0,t[W4][xh]=0,t[W4][Gf]=28,t[Cie][xh]=0,t[Ad][xh]=0,t[Ad][Gf]=15,t}var kie=ZYe(to.createInt32Array(6,6)),JYe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eKe=(function(){function t(e,s,n,a){this.token=e,this.mode=s,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,s){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=gE[this.mode][e];a=d1(a,i&65535,i>>16),n+=i>>16}var o=e===Ad?4:5;return a=d1(a,s,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,s){var n=this.token,a=this.mode===Ad?4:5;return n=d1(n,kie[this.mode][e],a),n=d1(n,s,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var s=this.token,n=this.mode,a=this.bitCount;if(this.mode===xh||this.mode===Ad){var i=gE[n][Gf];s=d1(s,i&65535,i>>16),a+=i>>16,n=Gf}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(s,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var s=this.token;return s=YYe(s,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(s,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var s=this.bitCount+(gE[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?s+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(s+=10),s<=e.bitCount},t.prototype.toBitArray=function(e){for(var s,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new ko;try{for(var l=JYe(a),c=l.next();!c.done;c=l.next()){var d=c.value;d.appendTo(o,e)}}catch(u){s={error:u}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(s)throw s.error}}return o},t.prototype.toString=function(){return mn.format("%s bits=%d bytes=%d",KYe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(XYe,Gf,0,0),t})();function tKe(t){var e=mn.getCharCode(" "),s=mn.getCharCode("."),n=mn.getCharCode(",");t[Gf][e]=1;for(var a=mn.getCharCode("Z"),i=mn.getCharCode("A"),o=i;o<=a;o++)t[Gf][o]=o-i+2;t[W4][e]=1;for(var l=mn.getCharCode("z"),c=mn.getCharCode("a"),o=c;o<=l;o++)t[W4][o]=o-c+2;t[Ad][e]=1;for(var d=mn.getCharCode("9"),u=mn.getCharCode("0"),o=u;o<=d;o++)t[Ad][o]=o-u+2;t[Ad][n]=12,t[Ad][s]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<h.length;m++)t[Cie][mn.getCharCode(h[m])]=m;for(var f=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<f.length;m++)mn.getCharCode(f[m])>0&&(t[xh][mn.getCharCode(f[m])]=m);return t}var vE=tKe(to.createInt32Array(5,256)),_j=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rKe=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=mn.getCharCode(" "),s=mn.getCharCode(`
`),n=fG.singletonList(eKe.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case mn.getCharCode("\r"):i=o===s?2:0;break;case mn.getCharCode("."):i=o===e?3:0;break;case mn.getCharCode(","):i=o===e?4:0;break;case mn.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var l=fG.min(n,function(c,d){return c.getBitCount()-d.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,s){var n,a,i=[];try{for(var o=_j(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,s,i)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(e,s,n){for(var a=this.text[s]&255,i=vE[e.getMode()][a]>0,o=null,l=0;l<=xh;l++){var c=vE[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(s)),!i||l===e.getMode()||l===Ad){var d=o.latchAndAppend(l,c);n.push(d)}if(!i&&kie[e.getMode()][l]>=0){var u=o.shiftAndAppend(l,c);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||vE[e.getMode()][a]===0){var h=e.addBinaryShiftChar(s);n.push(h)}},t.updateStateListForPair=function(e,s,n){var a,i,o=[];try{for(var l=_j(e),c=l.next();!c.done;c=l.next()){var d=c.value;this.updateStateForPair(d,s,n,o)}}catch(u){a={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,s,n,a){var i=e.endBinaryShift(s);if(a.push(i.latchAndAppend(xh,n)),e.getMode()!==xh&&a.push(i.shiftAndAppend(xh,n)),n===3||n===4){var o=i.latchAndAppend(Ad,16-n).latchAndAppend(Ad,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(s).addBinaryShiftChar(s+1);a.push(l)}},t.simplifyStates=function(e){var s,n,a,i,o=[];try{for(var l=_j(e),c=l.next();!c.done;c=l.next()){var d=c.value,u=!0,h=function(g){if(g.isBetterThanOrEqualTo(d))return u=!1,"break";d.isBetterThanOrEqualTo(g)&&(o=o.filter(function(b){return b!==g}))};try{for(var m=(a=void 0,_j(o)),f=m.next();!f.done;f=m.next()){var v=f.value,x=h(v);if(x==="break")break}}catch(g){a={error:g}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}u&&o.push(d)}}catch(g){s={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(s)throw s.error}}return o},t})(),sKe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,s,n){var a=new rKe(e).encode(),i=Js.truncDivision(a.getSize()*s,100)+11,o=a.getSize()+i,l,c,d,u,h;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new cs(mn.format("Illegal value %s for layers",n));d=t.totalBitsInLayer(c,l),u=t.WORD_SIZE[c];var m=d-d%u;if(h=t.stuffBits(a,u),h.getSize()+i>m)throw new cs("Data to large for user specified layer");if(l&&h.getSize()>u*64)throw new cs("Data to large for user specified layer")}else{u=0,h=null;for(var f=0;;f++){if(f>t.MAX_NB_BITS)throw new cs("Data too large for an Aztec code");if(l=f<=3,c=l?f+1:f,d=t.totalBitsInLayer(c,l),!(o>d)){(h==null||u!==t.WORD_SIZE[c])&&(u=t.WORD_SIZE[c],h=t.stuffBits(a,u));var m=d-d%u;if(!(l&&h.getSize()>u*64)&&h.getSize()+i<=m)break}}}var v=t.generateCheckWords(h,d,u),x=h.getSize()/u,g=t.generateModeMessage(l,c,x),b=(l?11:14)+c*4,w=new Int32Array(b),N;if(l){N=b;for(var f=0;f<w.length;f++)w[f]=f}else{N=b+1+2*Js.truncDivision(Js.truncDivision(b,2)-1,15);for(var C=Js.truncDivision(b,2),S=Js.truncDivision(N,2),f=0;f<C;f++){var A=f+Js.truncDivision(f,15);w[C-f-1]=S-A-1,w[C+f]=S+A+1}}for(var k=new Eh(N),f=0,E=0;f<c;f++){for(var O=(c-f)*4+(l?9:12),$=0;$<O;$++)for(var T=$*2,I=0;I<2;I++)v.get(E+T+I)&&k.set(w[f*2+I],w[f*2+$]),v.get(E+O*2+T+I)&&k.set(w[f*2+$],w[b-1-f*2-I]),v.get(E+O*4+T+I)&&k.set(w[b-1-f*2-I],w[b-1-f*2-$]),v.get(E+O*6+T+I)&&k.set(w[b-1-f*2-$],w[f*2+I]);E+=O*8}if(t.drawModeMessage(k,l,N,g),l)t.drawBullsEye(k,Js.truncDivision(N,2),5);else{t.drawBullsEye(k,Js.truncDivision(N,2),7);for(var f=0,$=0;f<Js.truncDivision(b,2)-1;f+=15,$+=16)for(var I=Js.truncDivision(N,2)&1;I<N;I+=2)k.set(Js.truncDivision(N,2)-$,I),k.set(Js.truncDivision(N,2)+$,I),k.set(I,Js.truncDivision(N,2)-$),k.set(I,Js.truncDivision(N,2)+$)}var L=new VYe;return L.setCompact(l),L.setSize(N),L.setLayers(c),L.setCodeWords(x),L.setMatrix(k),L},t.drawBullsEye=function(e,s,n){for(var a=0;a<n;a+=2)for(var i=s-a;i<=s+a;i++)e.set(i,s-a),e.set(i,s+a),e.set(s-a,i),e.set(s+a,i);e.set(s-n,s-n),e.set(s-n+1,s-n),e.set(s-n,s-n+1),e.set(s+n,s-n),e.set(s+n,s-n+1),e.set(s+n,s+n-1)},t.generateModeMessage=function(e,s,n){var a=new ko;return e?(a.appendBits(s-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(s-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,s,n,a){var i=Js.truncDivision(n,2);if(s)for(var o=0;o<7;o++){var l=i-3+o;a.get(o)&&e.set(l,i-5),a.get(o+7)&&e.set(i+5,l),a.get(20-o)&&e.set(l,i+5),a.get(27-o)&&e.set(i-5,l)}else for(var o=0;o<10;o++){var l=i-5+o+Js.truncDivision(o,5);a.get(o)&&e.set(l,i-7),a.get(o+10)&&e.set(i+7,l),a.get(29-o)&&e.set(l,i+7),a.get(39-o)&&e.set(i-7,l)}},t.generateCheckWords=function(e,s,n){var a,i,o=e.getSize()/n,l=new Nie(t.getGF(n)),c=Js.truncDivision(s,n),d=t.bitsToWords(e,n,c);l.encode(d,c-o);var u=s%n,h=new ko;h.appendBits(0,u);try{for(var m=sKe(Array.from(d)),f=m.next();!f.done;f=m.next()){var v=f.value;h.appendBits(v,n)}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}return h},t.bitsToWords=function(e,s,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/s;i<o;i++){for(var l=0,c=0;c<s;c++)l|=e.get(i*s+c)?1<<s-c-1:0;a[i]=l}return a},t.getGF=function(e){switch(e){case 4:return sc.AZTEC_PARAM;case 6:return sc.AZTEC_DATA_6;case 8:return sc.AZTEC_DATA_8;case 10:return sc.AZTEC_DATA_10;case 12:return sc.AZTEC_DATA_12;default:throw new cs("Unsupported word size "+e)}},t.stuffBits=function(e,s){for(var n=new ko,a=e.getSize(),i=(1<<s)-2,o=0;o<a;o+=s){for(var l=0,c=0;c<s;c++)(o+c>=a||e.get(o+c))&&(l|=1<<s-1-c);(l&i)===i?(n.appendBits(l&i,s),o--):(l&i)===0?(n.appendBits(l|1,s),o--):n.appendBits(l,s)}return n},t.totalBitsInLayer=function(e,s){return((s?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var nKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),aKe=(function(t){nKe(e,t);function e(s){var n=t.call(this,s.width,s.height)||this;return n.canvas=s,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(s),n}return e.makeBufferFromCanvasImageData=function(s){var n;try{n=s.getContext("2d",{willReadFrequently:!0})}catch{n=s.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,s.width,s.height);return e.toGrayscaleBuffer(a.data,s.width,s.height)},e.toGrayscaleBuffer=function(s,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,l=0,c=s.length;o<c;o+=4,l++){var d=void 0,u=s[o+3];if(u===0)d=255;else{var h=s[o],m=s[o+1],f=s[o+2];d=306*h+601*m+117*f+512>>10}i[l]=d}return i},e.prototype.getRow=function(s,n){if(s<0||s>=this.getHeight())throw new cs("Requested row is outside the image: "+s);var a=this.getWidth(),i=s*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(s,n,a,i){return t.prototype.crop.call(this,s,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new g3(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement},e.prototype.rotate=function(s){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=s*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var d=n.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(l/2,c/2),d.rotate(a),d.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(zw);function _ie(){return typeof navigator<"u"}function iKe(){return _ie()&&!!navigator.mediaDevices}function oKe(){return!!(iKe()&&navigator.mediaDevices.enumerateDevices)}var L0=function(){return L0=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++){e=arguments[s];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},L0.apply(this,arguments)},Za=function(t,e,s,n){function a(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})},Ja=function(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,a=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=e.call(t,s)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},yE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lKe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},hy=(function(){function t(e,s,n){s===void 0&&(s=new Map),n===void 0&&(n={}),this.reader=e,this.hints=s,this.options=L0(L0({},lKe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(ka.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,s){try{e.srcObject=s}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,s){return Za(this,void 0,void 0,function(){return Ja(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:s?"flash":"off",torch:!!s}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var s,n,a=e.getVideoTracks();try{for(var i=yE(a),o=i.next();!o.done;o=i.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){s={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var s=e.getCapabilities();return"torch"in s}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,s){var n=document.getElementById(e);if(!n)throw new ji("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==s.toLowerCase())throw new ji("element with id '".concat(e,"' must be an ").concat(s," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var s=document.createElement("video");return s.width=200,s.height=200,s}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var s=document.createElement("img");return s.width=200,s.height=200,s}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var s=t.createVideoElement(e);return s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var s=new aKe(e),n=new uie(s);return new die(n)},t.drawImageOnCanvas=function(e,s){e.drawImage(s,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new ji("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var s=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,i=n.height;return s.style.width=a+"px",s.style.height=i+"px",s.width=a,s.height=i,s},t.tryPlayVideo=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return s=n.sent(),console.warn("It was not possible to play the video.",s),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var s=t.createCaptureCanvas(e),n=s.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),s},t.createBinaryBitmapFromMediaElem=function(e){var s=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(s)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Za(this,void 0,void 0,function(){var e,s,n,a,i,o,l,c,d,u,h,m;return Ja(this,function(f){switch(f.label){case 0:if(!_ie())throw new Error("Can't enumerate devices, navigator is not present.");if(!oKe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=f.sent(),s=[];try{for(n=yE(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(l=i.deviceId||i.id,c=i.label||"Video device ".concat(s.length+1),d=i.groupId,u={deviceId:l,label:c,kind:o,groupId:d},s.push(u))}catch(v){h={error:v}}finally{try{a&&!a.done&&(m=n.return)&&m.call(n)}finally{if(h)throw h.error}}return[2,s]}})})},t.findDeviceById=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return s=n.sent(),s?[2,s.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(s){return s.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,s){return Za(this,void 0,void 0,function(){var n;return Ja(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},s),c=function(){t.tryPlayVideo(e).then(function(d){clearTimeout(l),e.removeEventListener("canplay",c),i(d)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,s,n){return n===void 0&&(n=5e3),Za(this,void 0,void 0,function(){var a;return Ja(this,function(i){switch(i.label){case 0:return a=t.prepareVideoElement(s),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(s,n){var a=1e4,i=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),s()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new ji("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(s){return s.stop()}),e=void 0},t.prototype.decode=function(e){var s=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(s)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var s=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(s)},t.prototype.decodeFromImageElement=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:if(!e)throw new ji("An image element must be provided.");return s=t.prepareImageElement(e),[4,this._decodeOnLoadImage(s)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:if(!e)throw new ji("An URL must be provided.");s=t.prepareImageElement(),s.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(s)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(s),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,s,n){return Za(this,void 0,void 0,function(){var a,i;return Ja(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,s,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),t.disposeMediaStream(a),i;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,s,n){return Za(this,void 0,void 0,function(){var a,i,o,l,c,d,u,h,m,f=this;return Ja(this,function(v){switch(v.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,s,a)];case 1:return i=v.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(i)},l=this.scan(i,n,o),c=e.getVideoTracks(),d=L0(L0({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(x,g){return Za(this,void 0,void 0,function(){var b,w,N,C,S,A,k;return Ja(this,function(E){switch(E.label){case 0:b=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),w=yE(b),N=w.next(),E.label=2;case 2:return N.done?[3,5]:(C=N.value,[4,C.applyConstraints(x)]);case 3:E.sent(),E.label=4;case 4:return N=w.next(),[3,2];case 5:return[3,8];case 6:return S=E.sent(),A={error:S},[3,8];case 7:try{N&&!N.done&&(k=w.return)&&k.call(w)}finally{if(A)throw A.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(x){return c.find(x).getConstraints()},streamVideoSettingsGet:function(x){return c.find(x).getSettings()},streamVideoCapabilitiesGet:function(x){return c.find(x).getCapabilities()}}),u=t.mediaStreamIsTorchCompatible(e),u&&(h=c?.find(function(x){return t.mediaStreamIsTorchCompatibleTrack(x)}),m=function(x){return Za(f,void 0,void 0,function(){return Ja(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(h,x)];case 1:return g.sent(),[2]}})})},d.switchTorch=m,d.stop=function(){return Za(f,void 0,void 0,function(){return Ja(this,function(x){switch(x.label){case 0:return l.stop(),[4,m(!1)];case 1:return x.sent(),[2]}})})}),[2,d]}})})},t.prototype.decodeFromVideoDevice=function(e,s,n){return Za(this,void 0,void 0,function(){var a,i;return Ja(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,s,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,s){return Za(this,void 0,void 0,function(){var n,a;return Ja(this,function(i){switch(i.label){case 0:if(t.checkCallbackFnOrThrow(s),!e)throw new ji("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,s)]}})})},t.prototype.decodeFromVideoUrl=function(e,s){return Za(this,void 0,void 0,function(){var n,a,i,o;return Ja(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(s),!e)throw new ji("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return l.sent(),o=this.scan(n,s,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,s){return Za(this,void 0,void 0,function(){var n;return Ja(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,s)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,s){return Za(this,void 0,void 0,function(){var n,a,i;return Ja(this,function(o){switch(o.label){case 0:return n=!!s,[4,t.attachStreamToVideo(e,s)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,s){return Za(this,void 0,void 0,function(){var n,a;return Ja(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,s)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Za(this,void 0,void 0,function(){var s,n;return Ja(this,function(a){switch(a.label){case 0:if(!e)throw new ji("A video element must be provided.");return s=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(s,n)];case 1:return a.sent(),[4,this.scanOneResult(s)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Za(this,void 0,void 0,function(){var s,n;return Ja(this,function(a){switch(a.label){case 0:if(!e)throw new ji("An URL must be provided.");s=t.prepareVideoElement(),s.src=e,n=this.decodeOnceFromVideoElement(s),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(s),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,s,n,a){var i=this;return s===void 0&&(s=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){i.scan(e,function(c,d,u){if(c){o(c),u.stop();return}if(d){if(d instanceof jt&&s||d instanceof Li&&n||d instanceof lr&&a)return;u.stop(),l(d)}})})},t.prototype.scan=function(e,s,n){var a=this;t.checkCallbackFnOrThrow(s);var i=t.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,i=void 0},c=!1,d,u=function(){c=!0,clearTimeout(d),l(),n&&n()},h={stop:u},m=function(){if(!c)try{t.drawImageOnCanvas(o,e);var f=a.decodeFromCanvas(i);s(f,void 0,h),d=setTimeout(m,a.options.delayBetweenScanSuccess)}catch(b){s(void 0,b,h);var v=b instanceof Li,x=b instanceof lr,g=b instanceof jt;if(v||x||g){d=setTimeout(m,a.options.delayBetweenScanAttempts);return}l(),n&&n(b)}};return m(),h},t.prototype._decodeOnLoadImage=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:return s=t.isImageLoaded(e),s?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Za(this,void 0,void 0,function(){var s;return Ja(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return s=n.sent(),t.streamTracker.push(s),[2,s]}})})},t.streamTracker=[],t})(),cKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){cKe(e,t);function e(s,n){return t.call(this,new F4,s,n)||this}return e})(hy);var dKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){dKe(e,t);function e(s,n){return t.call(this,new R0(s),s,n)||this}return e})(hy);var uKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){uKe(e,t);function e(s,n){return t.call(this,new U4,s,n)||this}return e})(hy);var hKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),pG=(function(t){hKe(e,t);function e(s,n){var a=this,i=new jie;return i.setHints(s),a=t.call(this,i,s,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(s){this.hints.set(ka.POSSIBLE_FORMATS,s),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(s){return this.reader.decodeWithState(s)},e.prototype.setHints=function(s){this.hints=s,this.reader.setHints(this.hints)},e})(hy),mKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){mKe(e,t);function e(s,n){return t.call(this,new V4,s,n)||this}return e})(hy);var fKe=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})();(function(t){fKe(e,t);function e(s,n){return t.call(this,new z4,s,n)||this}return e})(hy);function pKe({isOpen:t,onClose:e}){const{theme:s}=Nr(),n=s==="dark",a=n?"text-white":"text-gray-900",i=n?"text-[#a3a3a3]":"text-gray-600",o=n?"border-[#2a2a2a]":"border-gray-200",l=n?"bg-[#1e1e1e]":"bg-gray-50",[c,d]=j.useState("camera"),[u,h]=j.useState(""),[m,f]=j.useState(null),[v,x]=j.useState(!1),g="admin_waivers",b=j.useRef(null),w=j.useRef(null),N=j.useRef(null),C=Z=>{const K=Z.match(/WV-\d+/);if(K){const se=K[0];try{const ne=localStorage.getItem(g),be=(ne?JSON.parse(ne):[]).find(ue=>ue.id===se);be?(f({...be,status:"verified",date:new Date().toLocaleDateString()}),re.success("Waiver verified successfully!")):re.error("Waiver not found")}catch(ne){console.error("Failed to verify waiver code",ne),re.error("Verification error")}}else/^https?:\/\//.test(Z)?(window.open(Z,"_blank"),re.success("Opened link from QR")):re.info(`Scanned: ${Z}`);x(!1);try{N.current?.stop(),w.current?.reset()}catch{}},S=async()=>{try{x(!0),w.current||(w.current=new pG);const Z=await w.current.decodeFromVideoDevice(void 0,b.current,(K,se)=>{K&&C(K.getText())});N.current=Z}catch(Z){console.error("Failed to start camera scanning",Z),re.error("Camera access failed"),x(!1)}},A=()=>{try{N.current?.stop(),w.current?.reset()}catch{}x(!1)},k=j.useRef(null),E=()=>k.current?.click(),O=async Z=>{const K=Z.target.files?.[0];if(!K)return;const se=URL.createObjectURL(K);x(!0);try{w.current||(w.current=new pG);const ne=await w.current.decodeFromImageUrl(se);C(ne.getText())}catch(ne){console.error("No QR found in image",ne),re.error("No QR code found in image"),x(!1)}finally{URL.revokeObjectURL(se),k.current&&(k.current.value="")}},$="admin_waiver_templates",[T,I]=j.useState([]),[L,z]=j.useState("");j.useEffect(()=>{if(t)try{const Z=localStorage.getItem($),K=Z?JSON.parse(Z):[];I(K),z(K[0]?.id||"")}catch(Z){console.error("Failed to load templates for QR mode",Z),I([]),z("")}},[t]);const M=Z=>Z?`${window.location.origin}/waiver-form/${Z}`:"",V=T.find(Z=>Z.id===L),B=M(V?.id),F=async()=>{if(B)try{await navigator.clipboard.writeText(B),re.success("Copied waiver form link")}catch(Z){console.error("Failed to copy link",Z),re.error("Failed to copy link")}},J=()=>{B&&(window.open(B,"_blank"),re.success("Opening waiver form..."))},ee=()=>{v?A():S()},q=()=>{if(!u){re.error("Please enter a waiver code");return}x(!0);try{const Z=localStorage.getItem(g),se=(Z?JSON.parse(Z):[]).find(ne=>ne.id===u);se?(f({...se,status:"verified",date:new Date().toLocaleDateString()}),re.success("Waiver verified successfully!")):re.error("Waiver not found")}catch(Z){console.error("Verification error",Z),re.error("Verification error")}x(!1),h("")},U=()=>{f(null),h(""),d("camera")};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`max-w-2xl ${n?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:a,children:"Scan Waiver"}),r.jsx(wr,{className:i,children:"Scan QR code or enter waiver code to verify check-in"})]}),r.jsx("div",{className:"space-y-6",children:m?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:`p-6 rounded-lg border ${n?"bg-emerald-500/10 border-emerald-500/30":"bg-green-50 border-green-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${n?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Lt,{className:`w-6 h-6 ${n?"text-emerald-400":"text-green-600"}`})}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-lg ${n?"text-emerald-300":"text-green-900"}`,children:"Waiver Verified"}),r.jsx("p",{className:`text-sm ${n?"text-emerald-400/70":"text-green-700"}`,children:"Customer checked in successfully"})]})]}),r.jsx(Ze,{className:n?"bg-emerald-500/20":"bg-green-200"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(ma,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Customer"})]}),r.jsx("p",{className:`text-sm ${n?"text-emerald-200":"text-green-900"}`,children:m.customer})]}),r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(z0,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Waiver ID"})]}),r.jsx("p",{className:`text-sm font-mono ${n?"text-emerald-200":"text-green-900"}`,children:m.id})]}),r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Email"})]}),r.jsx("p",{className:`text-sm ${n?"text-emerald-200":"text-green-900"}`,children:m.email})]}),r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(la,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Phone"})]}),r.jsx("p",{className:`text-sm ${n?"text-emerald-200":"text-green-900"}`,children:m.phone})]}),r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Booking"})]}),r.jsx("p",{className:`text-sm ${n?"text-emerald-200":"text-green-900"}`,children:m.booking})]}),r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-1 ${i}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsx("p",{className:"text-xs",children:"Game"})]}),r.jsx("p",{className:`text-sm ${n?"text-emerald-200":"text-green-900"}`,children:m.game})]})]})]}),r.jsxs(W,{variant:"outline",onClick:U,className:"w-full h-11",children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Scan Another Waiver"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsxs("button",{onClick:()=>d("qr"),className:`p-4 rounded-lg border-2 transition-all ${c==="qr"?n?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":n?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(z0,{className:`w-6 h-6 mx-auto mb-2 ${c==="qr"?n?"text-[#6366f1]":"text-blue-600":i}`}),r.jsx("p",{className:`text-sm ${a}`,children:"Show QR"})]}),r.jsxs("button",{onClick:()=>d("camera"),className:`p-4 rounded-lg border-2 transition-all ${c==="camera"?n?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":n?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Gx,{className:`w-6 h-6 mx-auto mb-2 ${c==="camera"?n?"text-[#6366f1]":"text-blue-600":i}`}),r.jsx("p",{className:`text-sm ${a}`,children:"Camera"})]}),r.jsxs("button",{onClick:()=>d("upload"),className:`p-4 rounded-lg border-2 transition-all ${c==="upload"?n?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":n?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(ll,{className:`w-6 h-6 mx-auto mb-2 ${c==="upload"?n?"text-[#6366f1]":"text-blue-600":i}`}),r.jsx("p",{className:`text-sm ${a}`,children:"Upload"})]}),r.jsxs("button",{onClick:()=>d("manual"),className:`p-4 rounded-lg border-2 transition-all ${c==="manual"?n?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":n?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(z0,{className:`w-6 h-6 mx-auto mb-2 ${c==="manual"?n?"text-[#6366f1]":"text-blue-600":i}`}),r.jsx("p",{className:`text-sm ${a}`,children:"Manual"})]})]}),r.jsx(Ze,{className:o}),c==="qr"&&r.jsx("div",{className:"space-y-4",children:T.length===0?r.jsx("div",{className:`p-4 rounded-lg border ${o} ${l}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:`w-4 h-4 ${n?"text-yellow-300":"text-yellow-600"}`}),r.jsx("p",{className:`text-sm ${i}`,children:"No templates found. Create a waiver template to show a QR code."})]})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:a,children:"Waiver Template"}),r.jsxs(sr,{value:L,onValueChange:z,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{placeholder:"Select a template"})}),r.jsx(ir,{children:T.map(Z=>r.jsx(Ae,{value:Z.id,children:Z.name},Z.id))})]})]}),r.jsx("div",{className:`rounded-lg border ${o} ${l} p-6 flex flex-col items-center justify-center gap-4`,children:B?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`p-4 rounded-lg ${n?"bg-[#0f0f0f]":"bg-white"} border ${o}`,children:r.jsx(jqe,{value:B,size:180,bgColor:n?"#0f0f0f":"#ffffff",fgColor:n?"#ffffff":"#000000"})}),r.jsxs("p",{className:`text-sm ${i}`,children:["Scan to sign: ",r.jsx("span",{className:a,children:V?.name})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",className:"h-11",onClick:F,children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Copy Link"]}),r.jsxs(W,{className:`h-11 ${n?"text-white hover:bg-[#4338ca]":""}`,style:{backgroundColor:n?"#4f46e5":void 0},onClick:J,children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Open Form"]})]})]}):r.jsx("p",{className:`text-sm ${i}`,children:"Select a template to generate QR code."})})]})}),c==="camera"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`aspect-video rounded-lg border-2 border-dashed ${o} ${l} flex items-center justify-center overflow-hidden`,children:v?r.jsx("video",{ref:b,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):r.jsxs("div",{className:"text-center",children:[r.jsx(Gx,{className:`w-16 h-16 mx-auto mb-4 ${i}`}),r.jsx("p",{className:a,children:"Camera Preview"}),r.jsx("p",{className:`text-sm ${i}`,children:"Click scan to activate camera"})]})}),r.jsxs(W,{style:{backgroundColor:n?"#4f46e5":void 0},className:`w-full h-11 ${n?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:ee,disabled:v,children:[r.jsx(Ime,{className:"w-4 h-4 mr-2"}),v?"Stop Scanning":"Start Scanning"]})]}),c==="upload"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`aspect-video rounded-lg border-2 border-dashed ${o} ${l} flex items-center justify-center cursor-pointer hover:border-current transition-colors`,onClick:E,children:r.jsxs("div",{className:"text-center",children:[r.jsx(ll,{className:`w-16 h-16 mx-auto mb-4 ${i}`}),r.jsx("p",{className:a,children:"Drop QR code image here"}),r.jsx("p",{className:`text-sm ${i}`,children:"or click to browse"})]})}),r.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:O})]}),c==="manual"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"waiver-code",className:a,children:"Waiver Code"}),r.jsx(de,{id:"waiver-code",value:u,onChange:Z=>h(Z.target.value.toUpperCase()),placeholder:"WV-1001",className:"h-11 font-mono",onKeyPress:Z=>Z.key==="Enter"&&q()})]}),r.jsxs(W,{style:{backgroundColor:n?"#4f46e5":void 0},className:`w-full h-11 ${n?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:q,disabled:v||!u,children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),v?"Verifying...":"Verify Waiver"]})]})]})}),r.jsx(Us,{children:r.jsx(W,{variant:m?"default":"outline",onClick:m?U:e,style:{backgroundColor:n&&m?"#4f46e5":void 0},className:`h-11 ${n&&m?"text-white hover:bg-[#4338ca]":m?"bg-blue-600 hover:bg-blue-700":""}`,children:m?"Done":"Cancel"})})]})})}const xKe=[{id:"WV-1001",customer:"Sarah Johnson",email:"sarah.j@email.com",booking:"BK-1001",game:"Mystery Manor",signedDate:"Oct 29, 2025",status:"signed",templateName:"Standard Liability Waiver"},{id:"WV-1002",customer:"Mike Chen",email:"mike.c@email.com",booking:"BK-1002",game:"Space Odyssey",signedDate:"Oct 29, 2025",status:"signed",templateName:"Standard Liability Waiver"},{id:"WV-1003",customer:"Emily Davis",email:"emily.d@email.com",booking:"BK-1003",game:"Zombie Outbreak",signedDate:"Oct 28, 2025",status:"signed",templateName:"Standard Liability Waiver"},{id:"WV-1004",customer:"Alex Thompson",email:"alex.t@email.com",booking:"BK-1004",game:"Treasure Hunt",signedDate:"Oct 28, 2025",status:"signed",templateName:"Minor Participant Waiver"},{id:"WV-1005",customer:"David Kim",email:"david.k@email.com",booking:"BK-1006",game:"Prison Break",signedDate:"-",status:"pending",templateName:"Standard Liability Waiver"},{id:"WV-1006",customer:"Jessica Brown",email:"jessica.b@email.com",booking:"BK-1007",game:"Wizards Quest",signedDate:"Oct 27, 2025",status:"signed",templateName:"Photo Release Waiver"}],gKe=[{id:"EMAIL-001",name:"Waiver Request Email",description:"Sent to customers after booking to request waiver signature",subject:"Sign Your Waiver - {GAME_NAME} on {BOOKING_DATE}",body:`Hi {CUSTOMER_NAME},

Thank you for booking with us! You have an upcoming experience:

 Game: {GAME_NAME}
 Date: {BOOKING_DATE} at {BOOKING_TIME}
 Booking ID: {BOOKING_NUMBER}

Before your visit, please sign your waiver:

{QR_CODE}

 Or click here: {WAIVER_LINK}

This will only take 2 minutes and helps us ensure a smooth check-in process.

See you soon!
{BUSINESS_NAME}

---
Questions? Reply to this email or call us at {BUSINESS_PHONE}`,type:"waiver_request",status:"active",variables:["{CUSTOMER_NAME}","{GAME_NAME}","{BOOKING_DATE}","{BOOKING_TIME}","{BOOKING_NUMBER}","{QR_CODE}","{WAIVER_LINK}","{BUSINESS_NAME}","{BUSINESS_PHONE}"],lastModified:"Nov 9, 2025"},{id:"EMAIL-002",name:"Waiver Confirmation Email",description:"Sent after customer signs the waiver successfully",subject:"Waiver Signed  - Ready for Your Visit",body:`Hi {CUSTOMER_NAME},

Great news! Your waiver has been signed successfully.

 Waiver Code: {WAIVER_CODE}

{QR_CODE}

Show this QR code when you arrive for quick check-in.

 Booking Details:
 Game: {GAME_NAME}
 Date: {BOOKING_DATE} at {BOOKING_TIME}
 Location: {VENUE_ADDRESS}
 Booking ID: {BOOKING_NUMBER}

 Pro tip: Save this email or take a screenshot of the QR code for easy access.

We're excited to see you!
{BUSINESS_NAME}

---
Need to make changes? Contact us at {BUSINESS_EMAIL}`,type:"waiver_confirmation",status:"active",variables:["{CUSTOMER_NAME}","{WAIVER_CODE}","{QR_CODE}","{GAME_NAME}","{BOOKING_DATE}","{BOOKING_TIME}","{VENUE_ADDRESS}","{BOOKING_NUMBER}","{BUSINESS_NAME}","{BUSINESS_EMAIL}"],lastModified:"Nov 9, 2025"},{id:"EMAIL-003",name:"Waiver Reminder Email",description:"Sent as a reminder if waiver is not signed before the booking",subject:" Reminder: Sign Your Waiver - Visit Tomorrow",body:`Hi {CUSTOMER_NAME},

This is a friendly reminder that your waiver is still pending.

 Your visit is coming up:
 Game: {GAME_NAME}
 Date: {BOOKING_DATE} at {BOOKING_TIME}
 Booking ID: {BOOKING_NUMBER}

Please sign your waiver now to avoid delays at check-in:

{QR_CODE}

 Quick sign: {WAIVER_LINK}

It only takes 2 minutes!

If you've already signed, please disregard this message.

See you soon!
{BUSINESS_NAME}

---
Questions? Contact us at {BUSINESS_PHONE} or {BUSINESS_EMAIL}`,type:"waiver_reminder",status:"active",variables:["{CUSTOMER_NAME}","{GAME_NAME}","{BOOKING_DATE}","{BOOKING_TIME}","{BOOKING_NUMBER}","{QR_CODE}","{WAIVER_LINK}","{BUSINESS_NAME}","{BUSINESS_PHONE}","{BUSINESS_EMAIL}"],lastModified:"Nov 9, 2025"}],u1=[{id:"TPL-001",name:"Standard Liability Waiver",description:"General release and indemnity agreement for all participants",type:"Liability",content:["I, {FULL_NAME}, born on {DATE_OF_BIRTH}, agree to participate in the activity.","I acknowledge the risks involved and release the organizer from liability.","Contact: {EMAIL} | {PHONE}. Emergency Contact: {EMERGENCY_CONTACT}.","Signed on {DATE}."].join(`
`),status:"active",requiredFields:["Full Name","Date of Birth","Email","Phone","Emergency Contact"],assignedGames:["All Games"],createdDate:"Oct 1, 2025",lastModified:"Oct 15, 2025",usageCount:234},{id:"TPL-002",name:"Minor Participant Waiver",description:"Waiver for participants under 18 years old - requires parent/guardian signature",type:"Minor Consent",content:["Minor: {MINOR_NAME}, DOB {DATE_OF_BIRTH}.","Parent/Guardian: {PARENT_GUARDIAN_NAME}. Email: {PARENT_EMAIL}. Phone: {PARENT_PHONE}.","I consent to my minor participating and accept the terms.","Signed on {DATE}."].join(`
`),status:"active",requiredFields:["Minor Name","Date of Birth","Parent/Guardian Name","Parent Email","Parent Phone"],assignedGames:["All Games"],createdDate:"Oct 1, 2025",lastModified:"Oct 10, 2025",usageCount:87},{id:"TPL-003",name:"Photo Release Waiver",description:"Permission to use photos and videos for marketing purposes",type:"Photo/Video Release",content:["I, {FULL_NAME}, grant permission to use photos/videos for marketing.","Contact: {EMAIL}. Signature: {SIGNATURE}. Date: {DATE}."].join(`
`),status:"active",requiredFields:["Full Name","Email","Signature"],assignedGames:["All Games"],createdDate:"Oct 5, 2025",lastModified:"Oct 20, 2025",usageCount:156},{id:"TPL-004",name:"Medical Disclosure Form",description:"Health conditions and medical information disclosure",type:"Medical",content:["Medical Conditions: {MEDICAL_CONDITIONS}.","Allergies: {ALLERGIES}. Medications: {MEDICATIONS}.","Emergency Contact: {EMERGENCY_CONTACT}. Date: {DATE}."].join(`
`),status:"active",requiredFields:["Full Name","Medical Conditions","Allergies","Medications","Emergency Contact"],assignedGames:["Zombie Outbreak","Prison Break"],createdDate:"Oct 8, 2025",lastModified:"Oct 18, 2025",usageCount:45},{id:"TPL-005",name:"COVID-19 Health Screening",description:"Health screening questionnaire for COVID-19 symptoms",type:"Health Screening",content:["Name: {FULL_NAME}. Temperature: {TEMPERATURE_CHECK}.","Symptoms: {SYMPTOM_CHECKLIST}. Date: {DATE}."].join(`
`),status:"inactive",requiredFields:["Full Name","Temperature Check","Symptom Checklist"],assignedGames:[],createdDate:"Sep 20, 2025",lastModified:"Sep 25, 2025",usageCount:312}];function vKe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",l=e?"hover:shadow-[0_0_15px_rgba(79,70,229,0.1)]":"hover:shadow-md",[c,d]=j.useState("records"),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState(null),[g,b]=j.useState(null),[w,N]=j.useState(!1),[C,S]=j.useState([]),[A,k]=j.useState(xKe),[E,O]=j.useState(!1),[$,T]=j.useState(!1),[I,L]=j.useState(null),[z,M]=j.useState(""),[V,B]=j.useState("all"),[F,J]=j.useState([]),[ee,q]=j.useState(!1),[U,Z]=j.useState(!0),[K,se]=j.useState(!0),[ne,ie]=j.useState(gKe),[be,ue]=j.useState(null),[oe,pe]=j.useState(!1),ye=Re=>({id:Re.id,name:Re.name,description:Re.description||"",type:Re.type,content:Re.content,status:Re.status,requiredFields:Array.isArray(Re.required_fields)?Re.required_fields:[],assignedGames:Array.isArray(Re.assigned_games)?Re.assigned_games:[],createdDate:new Date(Re.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),lastModified:new Date(Re.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),usageCount:Re.usage_count||0}),$e=Re=>({name:Re.name,description:Re.description,type:Re.type.toLowerCase(),content:Re.content,status:Re.status,required_fields:Re.requiredFields,assigned_games:Re.assignedGames,usage_count:Re.usageCount||0}),Se=async()=>{try{Z(!0);const{data:Re,error:Je}=await Wr.from("waiver_templates").select("*").order("created_at",{ascending:!1});if(Je){console.error("Supabase error:",Je),S(u1),re.info("Using local templates (database connection issue)");return}Re&&Re.length>0?S(Re.map(ye)):(console.log("Database empty, seeding templates..."),await Y())}catch(Re){console.error("Failed to load templates:",Re),S(u1),re.info("Using local templates")}finally{Z(!1)}},Y=async()=>{try{const Re=u1.map($e),{error:Je}=await Wr.from("waiver_templates").insert(Re);if(Je){console.error("Seed error:",Je),S(u1),re.info("Using local templates (5 templates loaded)");return}console.log("Templates seeded successfully"),re.success("Waiver templates loaded successfully"),await Se()}catch(Re){console.error("Failed to seed templates:",Re),S(u1),re.info("Using local templates (5 templates loaded)")}};j.useEffect(()=>{Se(),se(!1)},[]);const Le=A.filter(Re=>{const Je=Re.customer.toLowerCase().includes(z.toLowerCase())||Re.email.toLowerCase().includes(z.toLowerCase())||Re.id.toLowerCase().includes(z.toLowerCase()),bt=V==="all"||Re.status===V;return Je&&bt}),xe=()=>{ee?(J([]),q(!1)):(J(Le.map(Re=>Re.id)),q(!0))},mt=Re=>{if(F.includes(Re)){const Je=F.filter(bt=>bt!==Re);J(Je),q(!1)}else{const Je=[...F,Re];J(Je),Je.length===Le.length&&q(!0)}},Ue=()=>{if(F.length===0){re.error("Please select waivers to download");return}const Re=A.filter(Je=>F.includes(Je.id));Re.forEach((Je,bt)=>{setTimeout(()=>{Pt(Je)},bt*300)}),re.success(`Downloading ${Re.length} waiver(s)...`)},xt=()=>{if(F.length===0){re.error("Please select waivers to delete");return}confirm(`Are you sure you want to delete ${F.length} waiver(s)?`)&&(k(Re=>Re.filter(Je=>!F.includes(Je.id))),J([]),q(!1),re.success(`Deleted ${F.length} waiver(s)`))},ut=()=>{if(F.length===0){re.error("Please select waivers to send reminders");return}const Re=A.filter(Je=>F.includes(Je.id)&&Je.status==="pending");if(Re.length===0){re.error("No pending waivers selected");return}re.success(`Reminders queued for ${Re.length} customer(s) - Email system pending`)},Ot=()=>{x(null),N(!0),h(!0)},tt=Re=>{x(Re),N(!0),h(!0)},st=Re=>{x(Re),f(!0)},At=async Re=>{try{const Je={...$e(Re),name:`${Re.name} (Copy)`,status:"draft",usage_count:0},{error:bt}=await Wr.from("waiver_templates").insert([Je]);if(bt)throw bt;await Se(),re.success("Template duplicated successfully!")}catch(Je){console.error("Failed to duplicate template:",Je),re.error(N1(Je))}},Yt=async Re=>{try{const{error:Je}=await Wr.from("waiver_templates").delete().eq("id",Re);if(Je)throw Je;await Se(),re.success("Template deleted successfully!")}catch(Je){console.error("Failed to delete template:",Je),re.error(N1(Je))}},yr=async Re=>{try{const Je=C.find(je=>je.id===Re);if(!Je)return;const bt=Je.status==="active"?"inactive":"active",{error:gr}=await Wr.from("waiver_templates").update({status:bt}).eq("id",Re);if(gr)throw gr;await Se(),re.success("Template status updated!")}catch(Je){console.error("Failed to update template status:",Je),re.error(N1(Je))}},Zt=Re=>{b(Re),f(!0)},Vt=Re=>{L(Re),O(!0)},tr=()=>{T(!0)},$t=async Re=>{try{const{error:Je}=await Wr.from("waiver_templates").update({usage_count:(Re.usageCount||0)+1}).eq("id",Re.id);Je&&console.error("Failed to update usage count:",Je),window.open(`/waiver-form/${Re.id}`,"_blank"),re.success("Opening waiver form..."),await Se()}catch(Je){console.error("Error opening waiver form:",Je),window.open(`/waiver-form/${Re.id}`,"_blank")}},Dr=Re=>`${window.location.origin}/waiver-form/${Re.id}`,Er=async Re=>{try{const Je=Dr(Re);await navigator.clipboard.writeText(Je),re.success("Copied waiver form link to clipboard");const{error:bt}=await Wr.from("waiver_templates").update({usage_count:(Re.usageCount||0)+1}).eq("id",Re.id);bt||await Se()}catch(Je){console.error("Failed to copy link",Je),re.error("Failed to copy link")}},hr=async Re=>{try{const bt=`<iframe src="${Dr(Re)}" width="100%" height="800" style="border:0"></iframe>`;await navigator.clipboard.writeText(bt),re.success("Copied embed code");const{error:gr}=await Wr.from("waiver_templates").update({usage_count:(Re.usageCount||0)+1}).eq("id",Re.id);gr||await Se()}catch(Je){console.error("Failed to copy embed code",Je),re.error("Failed to copy embed code")}},Ct=async Re=>{try{const Je=Dr(Re),bt=`Waiver Form Link for ${Re.name}

${Je}

Embed:
<iframe src="${Je}" width="100%" height="800" style="border:0"></iframe>
`,gr=new Blob([bt],{type:"text/plain;charset=utf-8"}),je=document.createElement("a");je.href=URL.createObjectURL(gr),je.download=`${Re.id}-waiver-link.txt`,je.click(),URL.revokeObjectURL(je.href),re.success("Downloaded waiver form link");const{error:Ce}=await Wr.from("waiver_templates").update({usage_count:(Re.usageCount||0)+1}).eq("id",Re.id);Ce||await Se()}catch(Je){console.error("Failed to download link file",Je),re.error("Failed to download link file")}},is=()=>{const Re=A.filter(Je=>Je.status==="pending");if(Re.length===0){re.info("No pending waivers to remind");return}re.success(`Sent reminders to ${Re.length} pending ${Re.length===1?"waiver":"waivers"}`)},cr=(Re,Je="all")=>{try{const bt=Je==="filtered"?Le:A;if(bt.length===0){re.info("No waivers to export");return}if(Re==="csv"){const gr=["Waiver ID","Customer","Email","Booking ID","Game","Signed Date","Status","Template"],je=bt.map(Ee=>[Ee.id,Ee.customer,Ee.email,Ee.booking,Ee.game,Ee.signedDate,Ee.status,Ee.templateName]),Ce=Ee=>{const at=String(Ee??"").replace(/"/g,'""');return/[",\n]/.test(at)?`"${at}"`:at},Qe=[gr.map(Ce).join(","),...je.map(Ee=>Ee.map(Ce).join(","))].join(`
`),He=new Blob([Qe],{type:"text/csv;charset=utf-8"}),vt=URL.createObjectURL(He),le=document.createElement("a");le.href=vt,le.download=Je==="filtered"?"waivers_filtered.csv":"waivers_all.csv",le.click(),URL.revokeObjectURL(vt),re.success(`Exported ${Je==="filtered"?"filtered":"all"} waivers to CSV`);return}if(Re==="pdf"){const gr=new zr,je=15,Ce=20;bt.forEach((Qe,He)=>{He>0&&gr.addPage();let vt=Ce;gr.setFont("helvetica","normal"),gr.setFontSize(16),gr.text("Waiver Record",je,vt),vt+=10,gr.setFontSize(11),[`Waiver ID: ${Qe.id}`,`Template: ${Qe.templateName}`,`Customer: ${Qe.customer}`,`Email: ${Qe.email}`,`Booking: ${Qe.booking}`,`Game: ${Qe.game}`,`Status: ${Qe.status}`,`Signed Date: ${Qe.signedDate}`].forEach(nt=>{gr.text(nt,je,vt),vt+=8}),vt+=4,gr.setFontSize(12),gr.text("Waiver Content",je,vt),vt+=6,gr.setFontSize(11);const We=C.find(nt=>nt.name===Qe.templateName)?.content||"(No content available)";gr.splitTextToSize(We,180).forEach(nt=>{vt>280&&(gr.addPage(),vt=Ce),gr.text(nt,je,vt),vt+=7})}),gr.save(Je==="filtered"?"waivers_filtered.pdf":"waivers_all.pdf"),re.success(`Exported ${Je==="filtered"?"filtered":"all"} waivers to PDF`);return}}catch(bt){console.error("Failed to export waivers",bt),re.error("Failed to export waivers")}},Pt=Re=>{try{const Je=new zr,bt=15;let gr=20;Je.setFont("helvetica","normal"),Je.setFontSize(16),Je.text("Waiver Record",bt,gr),gr+=10,Je.setFontSize(11),[`Waiver ID: ${Re.id}`,`Template: ${Re.templateName}`,`Customer: ${Re.customer}`,`Email: ${Re.email}`,`Booking: ${Re.booking}`,`Game: ${Re.game}`,`Status: ${Re.status}`,`Signed Date: ${Re.signedDate}`].forEach(Ce=>{Je.text(Ce,bt,gr),gr+=8}),Je.save(`${Re.id}.pdf`),re.success("Downloaded waiver PDF")}catch(Je){console.error("Failed to download waiver",Je),re.error("Failed to download waiver")}},kt=Re=>{re.success(`Reminder sent to ${Re.email}`)},zt=Re=>{k(Je=>Je.filter(bt=>bt.id!==Re)),re.success("Waiver deleted")},or={total:A.length,signed:A.filter(Re=>Re.status==="signed").length,pending:A.filter(Re=>Re.status==="pending").length,thisMonth:124};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Waivers",description:"Manage liability waivers and customer agreements",sticky:!0,action:r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[r.jsxs(W,{variant:"outline",onClick:tr,className:"h-11 flex-1 sm:flex-initial",children:[r.jsx(z0,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Scan Waiver"})]}),r.jsxs(W,{variant:"outline",onClick:()=>Vt(),className:"h-11 flex-1 sm:flex-initial",children:[r.jsx(J4,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Attendee List"})]}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:Ot,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Create Template"})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Waivers"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:or.total})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Jn,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Signed"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:or.signed})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(fhe,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Pending"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:or.pending})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:r.jsx(jr,{className:`w-6 h-6 ${e?"text-yellow-400":"text-yellow-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"This Month"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:or.thisMonth})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(qs,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})})]}),r.jsxs(wn,{value:c,onValueChange:Re=>d(Re),children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(kn,{className:"w-full sm:w-auto",children:[r.jsxs(Tt,{value:"records",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(Jn,{className:"w-4 h-4"}),"Waiver Records"]}),r.jsxs(Tt,{value:"templates",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(yhe,{className:"w-4 h-4"}),"Templates (",C.length,")"]}),r.jsxs(Tt,{value:"emails",className:"gap-2 flex-1 sm:flex-initial",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Templates (",ne.length,")"]})]})}),r.jsxs(Bt,{value:"records",className:"mt-6",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm mb-4`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search by customer, email, or waiver ID...",value:z,onChange:Re=>M(Re.target.value),className:"pl-10 h-11"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(sr,{value:V,onValueChange:B,children:[r.jsxs(ar,{className:"w-[160px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"Status"})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Status"}),r.jsx(Ae,{value:"signed",children:"Signed"}),r.jsx(Ae,{value:"pending",children:"Pending"})]})]}),(z||V!=="all")&&r.jsxs(W,{variant:"outline",onClick:()=>{M(""),B("all")},className:"h-11",children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Clear"]})]})]})})}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:s,children:"Waiver Records"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",className:"h-9",onClick:is,children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Send Reminders"]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsxs(W,{variant:"outline",size:"sm",className:"h-9",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export All"]})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>cr("csv","all"),children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Export CSV (All)"]}),r.jsxs(Dt,{onClick:()=>cr("pdf","all"),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export PDF (All)"]}),r.jsx(Su,{}),r.jsxs(Dt,{onClick:()=>cr("csv","filtered"),children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Export CSV (Filtered)"]}),r.jsxs(Dt,{onClick:()=>cr("pdf","filtered"),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export PDF (Filtered)"]})]})]})]})]}),F.length>0&&r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${e?"bg-[#4f46e5]/10 border border-[#4f46e5]/30":"bg-blue-50 border border-blue-200"}`,children:[r.jsxs("span",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:[F.length," waiver(s) selected"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",className:"h-9",onClick:Ue,children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download Selected"]}),r.jsxs(W,{variant:"outline",size:"sm",className:"h-9",onClick:ut,children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Send Reminders"]}),r.jsxs(W,{variant:"outline",size:"sm",className:`h-9 ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,onClick:xt,children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete Selected"]}),r.jsxs(W,{variant:"ghost",size:"sm",className:"h-9",onClick:()=>{J([]),q(!1)},children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Clear"]})]})]})]})}),r.jsx(_e,{className:"p-0 sm:p-6 sm:pt-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Fx,{children:[r.jsx(Bx,{children:r.jsxs(ui,{className:a,children:[r.jsx(fs,{className:"w-12",children:r.jsx("input",{type:"checkbox",checked:ee,onChange:xe,className:"w-4 h-4 rounded border-gray-300 cursor-pointer"})}),r.jsx(fs,{className:n,children:"Waiver ID"}),r.jsx(fs,{className:n,children:"Customer"}),r.jsx(fs,{className:n,children:"Booking ID"}),r.jsx(fs,{className:n,children:"Game"}),r.jsx(fs,{className:n,children:"Signed Date"}),r.jsx(fs,{className:n,children:"Status"}),r.jsx(fs,{className:`text-right ${n}`,children:"Actions"})]})}),r.jsx(Ux,{children:Le.length===0?r.jsx(ui,{children:r.jsx(Jt,{colSpan:8,className:`text-center py-8 ${n}`,children:"No waivers found"})}):Le.map(Re=>r.jsxs(ui,{className:`${a} ${o} transition-colors`,children:[r.jsx(Jt,{children:r.jsx("input",{type:"checkbox",checked:F.includes(Re.id),onChange:()=>mt(Re.id),className:"w-4 h-4 rounded border-gray-300 cursor-pointer"})}),r.jsx(Jt,{className:s,children:Re.id}),r.jsx(Jt,{children:r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:Re.customer}),r.jsx("p",{className:`text-xs ${n}`,children:Re.email})]})}),r.jsx(Jt,{className:s,children:Re.booking}),r.jsx(Jt,{className:s,children:Re.game}),r.jsx(Jt,{className:n,children:Re.signedDate}),r.jsx(Jt,{children:r.jsx(De,{variant:"secondary",className:Re.status==="signed"?e?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0":e?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:Re.status})}),r.jsx(Jt,{className:"text-right",children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>Zt(Re),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Waiver"]}),r.jsxs(Dt,{onClick:()=>Pt(Re),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),Re.status==="pending"&&r.jsxs(Dt,{onClick:()=>kt(Re),children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Send Reminder"]}),r.jsx(Su,{}),r.jsxs(Dt,{className:e?"text-red-400":"text-red-600",onClick:()=>zt(Re.id),children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},Re.id))})]})})})]})]}),r.jsx(Bt,{value:"templates",className:"mt-6",children:U?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:n,children:"Loading templates..."})]})}):C.length===0?r.jsx(he,{className:`${i} border ${a}`,children:r.jsxs(_e,{className:"p-12 text-center",children:[r.jsx(Jn,{className:`w-12 h-12 mx-auto mb-4 ${n}`}),r.jsx("h3",{className:`text-lg font-medium mb-2 ${s}`,children:"No templates yet"}),r.jsx("p",{className:`mb-4 ${n}`,children:"Create your first waiver template to get started"}),r.jsxs(W,{onClick:Ot,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(Re=>r.jsxs(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:[r.jsx(Ke,{className:"p-6 pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Jn,{className:`w-4 h-4 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("h3",{className:`truncate ${s}`,children:Re.name})]}),r.jsx("p",{className:`text-xs line-clamp-2 ${n}`,children:Re.description})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>tt(Re),children:[r.jsx(b1,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{onClick:()=>At(Re),children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),r.jsx(Dt,{onClick:()=>yr(Re.id),children:Re.status==="active"?r.jsxs(r.Fragment,{children:[r.jsx(mM,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(hM,{className:"w-4 h-4 mr-2"}),"Activate"]})}),r.jsx(Su,{}),r.jsxs(Dt,{className:e?"text-red-400":"text-red-600",onClick:()=>Yt(Re.id),children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),r.jsxs(_e,{className:"space-y-3 p-6 pt-0",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx(De,{variant:"secondary",className:Re.status==="active"?e?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0":Re.status==="inactive"?e?"bg-[#2a2a2a] text-[#a3a3a3] border-0":"bg-gray-100 text-gray-700 border-0":e?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:Re.status}),r.jsx("span",{className:n,children:Re.type})]}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(Xr,{className:"w-3 h-3"}),r.jsxs("span",{children:[Re.usageCount," times used"]})]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(ml,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:Re.assignedGames.join(", ")})]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(jr,{className:"w-3 h-3"}),r.jsxs("span",{children:["Updated ",Re.lastModified]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>st(Re),children:[r.jsx(ys,{className:"w-4 h-4 mr-1"}),"Preview"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>tt(Re),children:[r.jsx(b1,{className:"w-4 h-4 mr-1"}),"Edit"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>$t(Re),children:[r.jsx(tn,{className:"w-4 h-4 mr-1"}),"Open Form"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>Vt(),children:[r.jsx(Xr,{className:"w-4 h-4 mr-1"}),"Attendees"]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsxs(W,{variant:"outline",size:"sm",className:"h-9",children:[r.jsx(tn,{className:"w-4 h-4 mr-1"}),"Share Link"]})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>Er(Re),children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Copy Public Link"]}),r.jsxs(Dt,{onClick:()=>hr(Re),children:[r.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Copy Embed Code"]}),r.jsxs(Dt,{onClick:()=>Ct(Re),children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download Link (.txt)"]})]})]})]})]})]},Re.id))})}),r.jsx(Bt,{value:"emails",className:"mt-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ne.map(Re=>r.jsxs(he,{className:`${i} border ${a} shadow-sm ${l} transition-all`,children:[r.jsx(Ke,{className:"p-6 pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ds,{className:`w-4 h-4 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("h3",{className:`truncate ${s}`,children:Re.name})]}),r.jsx("p",{className:`text-xs line-clamp-2 ${n}`,children:Re.description})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",children:[r.jsxs(Dt,{onClick:()=>{ue(Re),pe(!0)},children:[r.jsx(b1,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{onClick:()=>{ue(Re),f(!0)},children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"Preview"]}),r.jsx(Dt,{onClick:()=>{const Je=Re.status==="active"?"inactive":"active";ie(bt=>bt.map(gr=>gr.id===Re.id?{...gr,status:Je}:gr)),re.success("Email template status updated!")},children:Re.status==="active"?r.jsxs(r.Fragment,{children:[r.jsx(mM,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(hM,{className:"w-4 h-4 mr-2"}),"Activate"]})})]})]})]})}),r.jsxs(_e,{className:"space-y-3 p-6 pt-0",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx(De,{variant:"secondary",className:Re.status==="active"?e?"bg-emerald-500/20 text-emerald-400":"bg-green-100 text-green-700":e?"bg-[#2a2a2a] text-[#737373]":"bg-gray-100 text-gray-600",children:Re.status==="active"?"Active":"Inactive"}),r.jsx("span",{className:n,children:Re.type==="waiver_request"?" Request":Re.type==="waiver_confirmation"?" Confirmation":" Reminder"})]}),r.jsxs("div",{className:`text-xs ${n} space-y-1`,children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ds,{className:"w-3 h-3"}),r.jsx("span",{className:"font-medium",children:"Subject:"})]}),r.jsx("p",{className:"line-clamp-2 pl-4",children:Re.subject})]}),r.jsxs("div",{className:`text-xs ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsx(ic,{className:"w-3 h-3"}),r.jsxs("span",{children:["Variables: ",Re.variables.length]})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[Re.variables.slice(0,3).map((Je,bt)=>r.jsx(De,{variant:"outline",className:"text-xs px-1 py-0",children:Je},bt)),Re.variables.length>3&&r.jsxs(De,{variant:"outline",className:"text-xs px-1 py-0",children:["+",Re.variables.length-3]})]})]}),r.jsxs("div",{className:`text-xs ${n} flex items-center gap-1`,children:[r.jsx(jr,{className:"w-3 h-3"}),r.jsxs("span",{children:["Updated ",Re.lastModified]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{ue(Re),f(!0)},className:"flex-1",children:[r.jsx(ys,{className:"w-4 h-4 mr-1"}),"Preview"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{ue(Re),pe(!0)},className:"flex-1",children:[r.jsx(b1,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})]},Re.id))})})]}),u&&r.jsx(uqe,{template:v,isOpen:u,onClose:()=>{h(!1),x(null)},onSave:async Re=>{try{const Je=$e(Re);if(w&&v){const{error:bt}=await Wr.from("waiver_templates").update(Je).eq("id",Re.id);if(bt)throw bt;re.success("Template updated successfully!")}else{const{error:bt}=await Wr.from("waiver_templates").insert([Je]);if(bt)throw bt;re.success("Template created successfully!")}await Se(),h(!1),x(null)}catch(Je){console.error("Failed to save template:",Je),re.error(N1(Je))}}}),m&&r.jsx(hqe,{template:v,waiver:g,isOpen:m,onClose:()=>{f(!1),x(null),b(null)}}),E&&r.jsx(mqe,{booking:I,isOpen:E,onClose:()=>{O(!1),L(null)}}),$&&r.jsx(pKe,{isOpen:$,onClose:()=>T(!1)})]})}function yKe({config:t,onConfigChange:e,onPreview:s}){const[n,a]=j.useState("general"),i=(w,N)=>{e({...t,[w]:N})},o=()=>{const w={id:`cat-${Date.now()}`,name:"New Category",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080"};e({...t,categories:[...t.categories||[],w]})},l=(w,N)=>{e({...t,categories:t.categories.map(C=>C.id===w?{...C,...N}:C)})},c=w=>{e({...t,categories:t.categories.filter(N=>N.id!==w)})},d=()=>{const w={id:`game-${Date.now()}`,name:"New Game",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:3,categoryId:t.categories?.[0]?.id||"",description:"A thrilling escape room experience"};e({...t,games:[...t.games||[],w]})},u=(w,N)=>{e({...t,games:t.games.map(C=>C.id===w?{...C,...N}:C)})},h=w=>{e({...t,games:t.games.filter(N=>N.id!==w)})},m=()=>{const w={id:`ticket-${Date.now()}`,name:"New Ticket Type",description:"Description",price:30};e({...t,ticketTypes:[...t.ticketTypes||[],w]})},f=(w,N)=>{e({...t,ticketTypes:t.ticketTypes.map(C=>C.id===w?{...C,...N}:C)})},v=w=>{e({...t,ticketTypes:t.ticketTypes.filter(N=>N.id!==w)})},x=()=>{const w={id:`q-${Date.now()}`,question:"New Question",type:"select",options:["Option 1","Option 2"],required:!1};e({...t,additionalQuestions:[...t.additionalQuestions||[],w]})},g=(w,N)=>{e({...t,additionalQuestions:t.additionalQuestions.map(C=>C.id===w?{...C,...N}:C)})},b=w=>{e({...t,additionalQuestions:t.additionalQuestions.filter(N=>N.id!==w)})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl text-gray-900",children:"FareBook Widget Settings"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your booking widget appearance and options"})]}),r.jsxs(W,{onClick:s,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(ys,{className:"w-4 h-4"}),"Preview Widget"]})]}),r.jsxs(wn,{value:n,onValueChange:a,children:[r.jsxs(kn,{className:"grid w-full grid-cols-5",children:[r.jsx(Tt,{value:"general",children:"General"}),r.jsx(Tt,{value:"categories",children:"Categories"}),r.jsx(Tt,{value:"games",children:"Games"}),r.jsx(Tt,{value:"tickets",children:"Ticket Types"}),r.jsx(Tt,{value:"advanced",children:"Advanced"})]}),r.jsxs(Bt,{value:"general",className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Display Options"}),r.jsx(Ft,{children:"Control what elements appear in your widget"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Secured Badge"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display security badge in header"})]}),r.jsx(Rt,{checked:t.showSecuredBadge,onCheckedChange:w=>i("showSecuredBadge",w)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Health & Safety"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display health and safety badge"})]}),r.jsx(Rt,{checked:t.showHealthSafety,onCheckedChange:w=>i("showHealthSafety",w)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Enable Veteran Discount"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Show veteran ticket pricing option"})]}),r.jsx(Rt,{checked:t.enableVeteranDiscount,onCheckedChange:w=>i("enableVeteranDiscount",w)})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Cancellation Policy"}),r.jsx(Ft,{children:"Set your cancellation and refund policy"})]}),r.jsx(_e,{children:r.jsx(Ps,{value:t.cancellationPolicy||"",onChange:w=>i("cancellationPolicy",w.target.value),placeholder:"Enter your cancellation policy...",rows:4})})]})]}),r.jsx(Bt,{value:"categories",className:"space-y-6",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Categories"}),r.jsx(Ft,{children:"Manage your escape room categories"})]}),r.jsxs(W,{onClick:o,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Category"]})]})}),r.jsx(_e,{children:r.jsx(fa,{className:"h-[500px] pr-4",children:r.jsx("div",{className:"space-y-4",children:t.categories?.map((w,N)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Category ",N+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>c(w.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Category Name"}),r.jsx(de,{value:w.name,onChange:C=>l(w.id,{name:C.target.value}),placeholder:"e.g., Traditional Escape Rooms",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Image URL"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(de,{value:w.image,onChange:C=>l(w.id,{image:C.target.value}),placeholder:"https://..."}),r.jsx(W,{variant:"outline",size:"icon",children:r.jsx(ll,{className:"w-4 h-4"})})]}),w.image&&r.jsx("div",{className:"mt-2 w-full h-32 rounded overflow-hidden",children:r.jsx("img",{src:w.image,alt:w.name,className:"w-full h-full object-cover"})})]})]})})},w.id))})})})]})}),r.jsx(Bt,{value:"games",className:"space-y-6",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Events / Rooms"}),r.jsx(Ft,{children:"Configure your escape room games"})]}),r.jsxs(W,{onClick:d,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Game"]})]})}),r.jsx(_e,{children:r.jsx(fa,{className:"h-[500px] pr-4",children:r.jsx("div",{className:"space-y-4",children:t.games?.map((w,N)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Game ",N+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>h(w.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Game Name"}),r.jsx(de,{value:w.name,onChange:C=>u(w.id,{name:C.target.value}),placeholder:"e.g., Zombie Apocalypse",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Category"}),r.jsxs(sr,{value:w.categoryId,onValueChange:C=>u(w.id,{categoryId:C}),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{})}),r.jsx(ir,{children:t.categories?.map(C=>r.jsx(Ae,{value:C.id,children:C.name},C.id))})]})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Price Range"}),r.jsx(de,{value:w.priceRange,onChange:C=>u(w.id,{priceRange:C.target.value}),placeholder:"$25 - $30",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Age Range"}),r.jsx(de,{value:w.ageRange,onChange:C=>u(w.id,{ageRange:C.target.value}),placeholder:"All ages",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Duration"}),r.jsx(de,{value:w.duration,onChange:C=>u(w.id,{duration:C.target.value}),placeholder:"1 Hour",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Difficulty (0-5 stars)"}),r.jsx(de,{type:"number",min:"0",max:"5",value:w.difficulty,onChange:C=>u(w.id,{difficulty:parseInt(C.target.value)}),className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Description"}),r.jsx(Ps,{value:w.description||"",onChange:C=>u(w.id,{description:C.target.value}),placeholder:"Brief description of the game...",className:"mt-1",rows:2})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Image URL"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(de,{value:w.image,onChange:C=>u(w.id,{image:C.target.value}),placeholder:"https://..."}),r.jsx(W,{variant:"outline",size:"icon",children:r.jsx(ll,{className:"w-4 h-4"})})]}),w.image&&r.jsx("div",{className:"mt-2 w-full h-32 rounded overflow-hidden",children:r.jsx("img",{src:w.image,alt:w.name,className:"w-full h-full object-cover"})})]})]})]})})},w.id))})})})]})}),r.jsx(Bt,{value:"tickets",className:"space-y-6",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Ticket Types"}),r.jsx(Ft,{children:"Configure pricing and ticket options"})]}),r.jsxs(W,{onClick:m,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Ticket Type"]})]})}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-4",children:t.ticketTypes?.map((w,N)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Ticket Type ",N+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>v(w.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Type Name"}),r.jsx(de,{value:w.name,onChange:C=>f(w.id,{name:C.target.value}),placeholder:"e.g., Players",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Price ($)"}),r.jsx(de,{type:"number",value:w.price,onChange:C=>f(w.id,{price:parseFloat(C.target.value)}),placeholder:"30",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Description"}),r.jsx(de,{value:w.description,onChange:C=>f(w.id,{description:C.target.value}),placeholder:"e.g., Ages 6 & Up",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Minimum Age (optional)"}),r.jsx(de,{type:"number",value:w.minAge||"",onChange:C=>f(w.id,{minAge:C.target.value?parseInt(C.target.value):void 0}),placeholder:"e.g., 6",className:"mt-1"})]})]})]})})},w.id))})})]})}),r.jsx(Bt,{value:"advanced",className:"space-y-6",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Additional Questions"}),r.jsx(Ft,{children:"Custom questions to ask during booking"})]}),r.jsxs(W,{onClick:x,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Question"]})]})}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-4",children:t.additionalQuestions?.map((w,N)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Question ",N+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>b(w.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Question Text"}),r.jsx(de,{value:w.question,onChange:C=>g(w.id,{question:C.target.value}),placeholder:"e.g., How did you hear about us?",className:"mt-1"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Question Type"}),r.jsxs(sr,{value:w.type,onValueChange:C=>g(w.id,{type:C}),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"select",children:"Dropdown"}),r.jsx(Ae,{value:"text",children:"Text Input"}),r.jsx(Ae,{value:"checkbox",children:"Checkbox"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Rt,{checked:w.required,onCheckedChange:C=>g(w.id,{required:C})}),r.jsx(X,{children:"Required"})]})})]}),w.type==="select"&&r.jsxs("div",{children:[r.jsx(X,{children:"Options (comma-separated)"}),r.jsx(de,{value:w.options?.join(", ")||"",onChange:C=>g(w.id,{options:C.target.value.split(",").map(S=>S.trim())}),placeholder:"Option 1, Option 2, Option 3",className:"mt-1"})]})]})})},w.id))})})]})})]})]})}const bKe=nI("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function jo({className:t,variant:e,...s}){return r.jsx("div",{"data-slot":"alert",role:"alert",className:Ar(bKe({variant:e}),t),...s})}function No({className:t,...e}){return r.jsx("div",{"data-slot":"alert-description",className:Ar("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function wKe({isOpen:t,onClose:e,gameData:s,onUpdate:n}){const[a,i]=j.useState("view"),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(s.stripeProductId||""),[m,f]=j.useState(s.stripePriceId||""),[v,x]=j.useState(s.stripeCheckoutUrl||""),g=!!(s.stripeProductId||s.stripeCheckoutUrl),b=async()=>{d(!0);try{console.log(" Disconnecting Stripe configuration...");const{error:C}=await Wr.from("games").update({stripe_product_id:null,stripe_price_id:null,stripe_checkout_url:null,stripe_sync_status:"not_synced",stripe_last_sync:null}).eq("id",s.id);if(C){console.error("Error disconnecting Stripe:",C),re.error("Failed to disconnect Stripe configuration");return}n({stripeProductId:null,stripePriceId:null,stripeCheckoutUrl:null,stripeSyncStatus:"not_synced",stripeLastSync:null}),re.success("Stripe configuration disconnected successfully"),l(!1),e()}catch(C){console.error("Error disconnecting:",C),re.error("Failed to disconnect Stripe configuration")}finally{d(!1)}},w=async()=>{const C=u.trim(),S=v.trim();if(!C&&!S){re.error("Please enter either a Stripe Product ID or a Checkout URL");return}d(!0);try{console.log(" Linking Stripe product...");let A={};C&&(A=await Oc.linkExistingProduct(C),console.log(" Product linked:",A));const{error:k}=await Wr.from("games").update({stripe_product_id:C||null,stripe_price_id:m.trim()||A.priceId||null,stripe_checkout_url:S||null,stripe_sync_status:"synced",stripe_last_sync:new Date().toISOString()}).eq("id",s.id);if(k){console.error("Error updating game:",k),re.error("Failed to update Stripe configuration");return}n({stripeProductId:C||null,stripePriceId:m.trim()||A.priceId||null,stripeCheckoutUrl:S||null,stripeSyncStatus:"synced",stripeLastSync:new Date().toISOString()}),re.success("Stripe configuration updated successfully"),i("view")}catch(A){console.error("Error linking product:",A),re.error(A.message||"Failed to link Stripe product")}finally{d(!1)}},N=()=>{h(s.stripeProductId||""),f(s.stripePriceId||""),x(s.stripeCheckoutUrl||""),i("view")};return r.jsxs(r.Fragment,{children:[r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"max-w-2xl",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(rn,{className:"h-5 w-5"}),"Stripe Payment Configuration"]}),r.jsxs(wr,{children:["Manage Stripe payment settings for ",s.name]})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[r.jsx("div",{className:"flex items-center gap-3",children:g?r.jsxs(r.Fragment,{children:[r.jsx(en,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Stripe Connected"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Checkout is enabled for this game"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(hs,{className:"h-5 w-5 text-amber-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Not Connected"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"No Stripe configuration found"})]})]})}),g&&a==="view"&&r.jsx(De,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),r.jsx(Ze,{}),a==="view"&&g&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4",children:[s.stripeProductId&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm font-medium",children:"Stripe Product ID"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(de,{value:s.stripeProductId,readOnly:!0,className:"font-mono text-sm bg-muted"}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>{navigator.clipboard.writeText(s.stripeProductId),re.success("Product ID copied to clipboard")},children:r.jsx(tn,{className:"h-4 w-4"})})]})]}),s.stripePriceId&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm font-medium",children:"Stripe Price ID"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(de,{value:s.stripePriceId,readOnly:!0,className:"font-mono text-sm bg-muted"}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>{navigator.clipboard.writeText(s.stripePriceId),re.success("Price ID copied to clipboard")},children:r.jsx(tn,{className:"h-4 w-4"})})]})]}),s.stripeCheckoutUrl&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm font-medium",children:"Checkout URL"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(de,{value:s.stripeCheckoutUrl,readOnly:!0,className:"font-mono text-sm bg-muted"}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>window.open(s.stripeCheckoutUrl,"_blank"),children:r.jsx(tn,{className:"h-4 w-4"})})]})]})]}),r.jsxs(jo,{children:[r.jsx(Ws,{className:"h-4 w-4"}),r.jsx(No,{children:"This Stripe configuration is active and being used for checkout. You can reconfigure or disconnect it below."})]})]}),a==="edit"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs(jo,{children:[r.jsx(hs,{className:"h-4 w-4"}),r.jsx(No,{children:"Enter your Stripe Product ID, Price ID, or Checkout URL. At least one field is required."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"productId",children:["Stripe Product ID ",r.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),r.jsx(de,{id:"productId",placeholder:"prod_xxxxxxxxxxxxx",value:u,onChange:C=>h(C.target.value),className:"font-mono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Find this in your Stripe dashboard"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"priceId",children:["Stripe Price ID ",r.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),r.jsx(de,{id:"priceId",placeholder:"price_xxxxxxxxxxxxx",value:m,onChange:C=>f(C.target.value),className:"font-mono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to fetch all prices automatically"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"checkoutUrl",children:["Stripe Checkout URL ",r.jsx("span",{className:"text-muted-foreground",children:"(Optional)"})]}),r.jsx(de,{id:"checkoutUrl",placeholder:"https://buy.stripe.com/...",value:v,onChange:C=>x(C.target.value),className:"font-mono"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Direct checkout link for users"})]})]})]}),!g&&a==="view"&&r.jsxs(jo,{children:[r.jsx(hs,{className:"h-4 w-4"}),r.jsx(No,{children:'No Stripe configuration found. Click "Configure" to link a Stripe product.'})]})]}),r.jsxs(Us,{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex gap-2",children:g&&a==="view"&&r.jsxs(W,{variant:"destructive",onClick:()=>l(!0),disabled:c,children:[r.jsx(fM,{className:"h-4 w-4 mr-2"}),"Disconnect"]})}),r.jsx("div",{className:"flex gap-2",children:a==="view"?r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outline",onClick:e,children:"Close"}),r.jsxs(W,{onClick:()=>i("edit"),children:[r.jsx(oc,{className:"h-4 w-4 mr-2"}),g?"Reconfigure":"Configure"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outline",onClick:N,disabled:c,children:"Cancel"}),r.jsx(W,{onClick:w,disabled:c,children:c?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lj,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})})]})})]})]})}),r.jsx(rp,{open:o,onOpenChange:l,children:r.jsxs(sp,{children:[r.jsxs(np,{children:[r.jsx(ip,{children:"Disconnect Stripe Configuration?"}),r.jsxs(op,{className:"space-y-2",children:[r.jsxs("p",{children:["This will remove all Stripe payment settings for ",r.jsx("strong",{children:s.name}),"."]}),r.jsx("p",{className:"text-amber-600 font-medium",children:" Checkout will be disabled until you reconfigure Stripe."}),r.jsx("p",{children:"Are you sure you want to continue?"})]})]}),r.jsxs(ap,{children:[r.jsx(lp,{disabled:c,children:"Cancel"}),r.jsx(Ng,{onClick:b,disabled:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:c?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"h-4 w-4 mr-2 animate-spin"}),"Disconnecting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(fM,{className:"h-4 w-4 mr-2"}),"Yes, Disconnect"]})})]})]})})]})}function jKe({gameData:t,onUpdate:e,onNext:s,onPrevious:n}){const[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(t.stripeProductId||""),[u,h]=j.useState(t.stripePriceId||""),[m,f]=j.useState(""),[v,x]=j.useState(t.stripeCheckoutUrl||""),[g,b]=j.useState(t.stripeSyncStatus||"not_synced"),[w,N]=j.useState(""),[C,S]=j.useState(!1),[A,k]=j.useState(!1),[E,O]=j.useState(""),[$,T]=j.useState(""),[I,L]=j.useState(""),[z,M]=j.useState(!1),[V,B]=j.useState(!0),[F,J]=j.useState(!1);j.useEffect(()=>{console.log(" Step6PaymentSettings - gameData received:",{stripeProductId:t.stripeProductId,stripePriceId:t.stripePriceId,stripePrices:t.stripePrices,stripeCheckoutUrl:t.stripeCheckoutUrl,stripeSyncStatus:t.stripeSyncStatus,stripeLastSync:t.stripeLastSync}),t.stripeProductId&&d(t.stripeProductId),t.stripePriceId&&h(t.stripePriceId),t.stripeCheckoutUrl&&x(t.stripeCheckoutUrl),t.stripeSyncStatus&&b(t.stripeSyncStatus)},[t.stripeProductId,t.stripePriceId,t.stripeCheckoutUrl,t.stripeSyncStatus]);const ee=async()=>{M(!0);try{if(console.log(" Checking Stripe connection from database and widget settings..."),t.id){const{data:oe,error:pe}=await Wr.from("games").select("*").eq("id",t.id).single();if(pe){console.error("Error fetching game:",pe),re.error("Failed to check connection status");return}if(oe){const ye=oe.stripe_product_id,$e=oe.stripe_price_id,Se=oe.venue_id;console.log(" Fresh game data from database:",{stripe_product_id:ye,stripe_price_id:$e,stripe_sync_status:oe.stripe_sync_status,venue_id:Se});const Y=!!ye;let Le=!1,xe=null;if(Se&&ye)try{const{data:mt,error:Ue}=await Wr.from("venues").select("widget_config").eq("id",Se).single();if(!Ue&&mt?.widget_config){const Ot=(mt.widget_config.games||[]).find(tt=>tt.stripe_product_id===ye||tt.stripeProductId===ye||tt.id===t.id);if(Ot){const tt=Ot.stripe_product_id||Ot.stripeProductId;tt===ye&&(Le=!0,xe=Ot.stripe_checkout_url||Ot.stripeCheckoutUrl,console.log(" Product ID found in widget settings!",{productId:tt,priceId:Ot.stripe_price_id||Ot.stripePriceId,checkoutUrl:xe}))}}}catch(mt){console.warn("Could not check widget settings:",mt)}Y?(console.log(" Stripe product found in database"),B(!0),b("synced"),N(""),Le?re.success(" Stripe Connected - Found in database and widget settings!",{description:"Your payment configuration is active across all systems",duration:5e3}):re.success(" Stripe Connected - Product found in database",{description:"Configure widget settings to enable checkout on your booking page",duration:5e3})):(console.log(" No Stripe product configured"),B(!1),b("not_synced"),re.info("No Stripe product configured yet",{description:"Create or link a Stripe product to enable payments"})),d(ye||""),h($e||""),x(xe||oe.stripe_checkout_url||""),oe.stripe_sync_status&&b(oe.stripe_sync_status),e({stripeProductId:ye,stripePriceId:$e,stripePrices:oe.stripe_prices,stripeCheckoutUrl:xe||oe.stripe_checkout_url,stripeSyncStatus:oe.stripe_sync_status||(Y?"synced":"not_synced"),stripeLastSync:new Date().toISOString(),foundInWidget:Le})}}}catch(oe){console.error("Error checking connection:",oe),re.error("Failed to check connection status")}finally{M(!1)}},q=!!c&&V,U=t.adultPrice&&t.adultPrice>0,Z=!!(c&&u&&(g==="synced"||g==="pending"));console.log(" Step6PaymentSettings - Configuration Status:",{isConfigured:q,hasPrice:U,isCheckoutConnected:Z,productId:c,priceId:u,syncStatus:g,gameDataProductId:t.stripeProductId,gameDataPriceId:t.stripePriceId,rawGameData:{stripeProductId:t.stripeProductId,stripePriceId:t.stripePriceId,stripeSyncStatus:t.stripeSyncStatus}});const K=async()=>{if(!U){re.error("Please set a price in Capacity & Pricing step first");return}console.log(" Starting Stripe product creation with Backend API..."),console.log(" Game Data:",{name:t.name,adultPrice:t.adultPrice,childPrice:t.childPrice}),i(!0),b("pending"),N("");try{re.loading("Creating Stripe product with pricing options...",{id:"stripe-create"});const oe=t.customCapacityFields?.filter($e=>$e.price>0).map($e=>({id:$e.id,name:$e.name,min:$e.min||0,max:$e.max||10,price:$e.price}))||[];console.log(" Pricing details:",{adult:t.adultPrice,child:t.childPrice,custom:oe});const pe=await Oc.createProductAndPrice({name:t.name||"Untitled Game",description:t.description||"",price:t.adultPrice,currency:"usd",childPrice:t.childPrice>0?t.childPrice:void 0,customCapacityFields:oe.length>0?oe:void 0,metadata:{game_id:t.id||"",duration:t.duration?.toString()||"60",category:t.category||"",difficulty:t.difficulty?.toString()||"3",venue_id:t.venueId||"",image_url:t.imageUrl||""}});console.log(" Product created:",pe);const ye={...t,stripeProductId:pe.productId,stripePriceId:pe.priceId,stripeSyncStatus:"synced",stripeLastSync:new Date().toISOString()};e(ye),b("synced"),re.success("Stripe product created successfully!",{id:"stripe-create"})}catch(oe){console.error(" STRIPE PRODUCT CREATION ERROR:",{message:oe.message,stack:oe.stack,error:oe}),b("error");const pe=oe.message||"Failed to create Stripe product";N(pe),re.error(`Error: ${pe}`,{id:"stripe-create"})}finally{i(!1)}},se=async()=>{const oe=c.trim(),pe=v.trim();if(!oe&&!pe){re.error("Please enter either a Stripe Product ID or a Checkout URL");return}if(!oe&&pe){console.log(" Saving checkout URL without Stripe product...");const ye={...t,stripeCheckoutUrl:pe,stripeSyncStatus:"synced",stripeLastSync:new Date().toISOString()};e(ye),b("synced"),re.success("Checkout URL configured successfully!");return}if(oe&&!Oc.isValidProductId(oe)){re.error('Invalid Product ID format. Should start with "prod_"');return}console.log(" Linking Stripe product with Backend API..."),console.log(" Product ID:",oe),l(!0),b("pending"),N("");try{re.loading("Linking Stripe product and fetching prices...",{id:"stripe-link"});const ye=await Oc.linkExistingProduct({productId:oe,priceId:u.trim()||void 0});console.log(" Product linked:",ye),console.log(" Found prices:",ye.prices);const $e={...t,stripeProductId:ye.productId,stripePrices:ye.prices,stripePriceId:ye.priceId||ye.prices[0]?.priceId,stripeCheckoutUrl:v.trim()||void 0,stripeSyncStatus:"synced",stripeLastSync:new Date().toISOString()};console.log(" Product linked successfully"),console.log(" Checkout automatically enabled"),console.log(` ${ye.prices.length} price(s) available`),e($e),b("synced"),re.success(`Stripe product linked with ${ye.prices.length} price(s)!`,{id:"stripe-link"})}catch(ye){console.error(" Error linking Stripe product:",ye),b("error");let $e=ye.message||"Failed to link Stripe product";ye.message?.includes("fetch")||ye.message?.includes("connect")?$e="Cannot connect to backend API. Please ensure the backend server is running and accessible.":ye.message?.includes("404")?$e="Product not found. Please verify the Product ID exists in your Stripe dashboard.":ye.message?.includes("401")||ye.message?.includes("403")?$e="Authentication failed. Please check your Stripe API keys are configured correctly.":ye.message?.includes("timeout")&&($e="Request timed out. Please check your internet connection and try again."),N($e),re.error($e,{id:"stripe-link",duration:6e3})}finally{l(!1)}},ne=()=>{S(!0)},ie=async()=>{const oe=E.trim();if(oe&&!Oc.isValidProductId(oe)){re.error('Invalid Product ID format. Should start with "prod_"');return}l(!0),b("pending"),N("");try{if(re.loading("Updating Stripe configuration...",{id:"stripe-edit"}),oe&&oe!==t.stripeProductId){const pe=await Oc.linkExistingProduct({productId:oe,priceId:$.trim()||void 0}),ye={...t,stripeProductId:pe.productId,stripePrices:pe.prices,stripePriceId:pe.priceId||pe.prices[0]?.priceId,stripeCheckoutUrl:I.trim()||void 0,stripeSyncStatus:"synced",stripeLastSync:new Date().toISOString()};e(ye),b("synced"),re.success("Configuration updated successfully!",{id:"stripe-edit"})}else{const pe={...t,stripePriceId:$.trim()||t.stripePriceId,stripeCheckoutUrl:I.trim()||void 0,stripeLastSync:new Date().toISOString()};e(pe),re.success("Configuration updated successfully!",{id:"stripe-edit"})}k(!1)}catch(pe){console.error("Error updating configuration:",pe);let ye=pe.message||"Failed to update configuration";pe.message?.includes("fetch")||pe.message?.includes("connect")?ye="Cannot connect to backend API. Please ensure the backend server is running.":pe.message?.includes("404")&&(ye="Product not found. Please verify the Product ID exists in Stripe."),re.error(ye,{id:"stripe-edit",duration:6e3})}finally{l(!1)}},be=()=>{const oe={...t,stripeProductId:void 0,stripePriceId:void 0,stripePrices:void 0,stripeCheckoutUrl:void 0,stripeSyncStatus:"not_synced",stripeLastSync:void 0};e(oe),b("not_synced"),d(""),h(""),x(""),S(!1),re.success("Stripe payment configuration removed successfully")},ue=()=>{switch(g){case"synced":return r.jsxs(De,{className:"bg-green-500",children:[r.jsx(Sr,{className:"w-3 h-3 mr-1"})," Synced"]});case"pending":return r.jsxs(De,{className:"bg-yellow-500",children:[r.jsx(ia,{className:"w-3 h-3 mr-1 animate-spin"})," Syncing..."]});case"error":return r.jsxs(De,{variant:"destructive",children:[r.jsx(hs,{className:"w-3 h-3 mr-1"})," Error"]});default:return r.jsx(De,{variant:"outline",children:"Not Configured"})}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(rn,{className:"w-5 h-5"}),"Payment Settings",q?r.jsxs(De,{className:"bg-green-500",children:[r.jsx(Sr,{className:"w-3 h-3 mr-1"}),Z?"Connected & Active":"Connected"]}):r.jsx(De,{variant:"outline",className:"text-xs",children:"Optional"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:ee,disabled:z,className:"gap-2",children:[r.jsx(Pme,{className:`w-4 h-4 ${z?"animate-spin":""}`}),z?"Checking...":"Check Connection"]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:q?"Stripe integration active - Update prices or view product details below":"Create a new Stripe product or reconnect an existing one for online bookings"}),!q&&U&&r.jsxs(jo,{className:"mt-2 bg-purple-50 border-purple-200",children:[r.jsx(Ws,{className:"h-4 w-4 text-purple-600"}),r.jsxs(No,{className:"text-xs text-purple-800",children:[r.jsx("strong",{children:"Reconnecting a product?"}),' Use the "Link Existing" tab to reconnect a Stripe product that was previously created or got disconnected.']})]})]}),!U&&r.jsxs(jo,{className:"bg-blue-50 border-blue-200",children:[r.jsx(Ws,{className:"h-4 w-4 text-blue-600"}),r.jsx(No,{className:"text-blue-800",children:"Set a price in Step 2 (Capacity & Pricing) to configure payment settings. You can skip this step and set it up later."})]}),U&&!q&&r.jsxs(jo,{className:"bg-green-50 border-green-200",children:[r.jsx(Sr,{className:"h-4 w-4 text-green-600"}),r.jsx(No,{className:"text-green-800",children:"Price is set! You can now create or link a Stripe product, or skip for now and configure later."})]}),q&&r.jsx(he,{className:"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:r.jsx(Sr,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"text-green-900 font-semibold",children:"Stripe Connected"}),t.foundInWidget&&r.jsx(De,{className:"bg-emerald-600 text-white text-xs",children:" Active in Widget"})]}),r.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{children:"Product created in Stripe"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsxs("span",{children:["Price configured (",t.adultPrice?`$${t.adultPrice.toFixed(2)}`:"N/A",")"]})]}),t.foundInWidget&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-semibold",children:"Found in widget settings - Checkout enabled"})]}),Z?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{className:"font-semibold",children:"Checkout enabled - Customers can book online"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-4 h-4 text-orange-600"}),r.jsx("span",{className:"text-orange-700 font-semibold",children:"Checkout disabled - Enable below to accept bookings"})]})]})]})]})})}),r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:"text-base",children:"Payment Status"}),r.jsx(Ft,{children:"Current Stripe integration status"})]}),ue()]})}),r.jsxs(_e,{className:"space-y-4",children:[q?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-500",children:"Product ID"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded text-sm font-mono",children:c}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(c),re.success("Copied to clipboard")},children:r.jsx(Lj,{className:"w-4 h-4"})})]})]}),u&&r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-500",children:"Price ID"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded text-sm font-mono",children:u}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(u),re.success("Copied to clipboard")},children:r.jsx(Lj,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-500",children:"Price"}),r.jsxs("p",{className:"text-lg font-semibold mt-1",children:["$",t.adultPrice?.toFixed(2)]})]}),t.stripeLastSync&&r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-500",children:"Last Synced"}),r.jsx("p",{className:"text-sm mt-1",children:new Date(t.stripeLastSync).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs text-gray-500",children:"Checkout Status"}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:Z?r.jsxs(De,{className:"bg-green-500",children:[r.jsx(Sr,{className:"w-3 h-3 mr-1"}),"Ready for Checkout"]}):r.jsxs(De,{variant:"outline",className:"text-yellow-600",children:[r.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Sync Required"]})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Z?"Customers can book and pay for this game":"Complete sync to enable checkout"})]})]}),r.jsx(Ze,{}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(W,{variant:"default",size:"sm",onClick:()=>J(!0),children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"Configure"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:ee,disabled:z,children:[z?r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Check Connection"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>window.open(`https://dashboard.stripe.com/products/${c}`,"_blank"),children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"View in Stripe"]}),r.jsxs(W,{variant:"destructive",size:"sm",onClick:ne,className:"ml-auto",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Remove Configuration"]})]})})]}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(In,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No payment configuration yet"})]}),w&&r.jsxs(jo,{variant:"destructive",children:[r.jsx(hs,{className:"h-4 w-4"}),r.jsx(No,{children:w})]})]})]}),!q&&U&&r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:"text-base",children:"Configure Payment"}),r.jsx(Ft,{children:"Create a new Stripe product or link an existing one"})]}),r.jsx(_e,{children:r.jsxs(wn,{defaultValue:"create",children:[r.jsxs(kn,{className:"grid w-full grid-cols-2",children:[r.jsx(Tt,{value:"create",children:"Create New"}),r.jsx(Tt,{value:"link",children:"Link Existing"})]}),r.jsxs(Bt,{value:"create",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Product Name:"}),r.jsx("span",{className:"font-medium",children:t.name||"Untitled Game"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Price:"}),r.jsxs("span",{className:"font-medium",children:["$",t.adultPrice?.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Currency:"}),r.jsx("span",{className:"font-medium",children:"USD"})]}),t.childPrice>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Child Price:"}),r.jsxs("span",{className:"font-medium",children:["$",t.childPrice?.toFixed(2)]})]})]}),r.jsx(jo,{children:r.jsx(No,{className:"text-xs",children:"This will create a new product and price in your Stripe account. The product will be automatically linked to this game."})}),r.jsx(W,{onClick:K,disabled:a||!U,className:"w-full",children:a?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"Create Stripe Product & Enable Checkout"]})}),r.jsx(jo,{className:"bg-blue-50 border-blue-200",children:r.jsx(No,{className:"text-xs text-blue-800",children:" Checkout will be automatically enabled after product creation"})})]}),r.jsx(Bt,{value:"link",className:"space-y-4 mt-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"productId",children:"Stripe Product ID (Optional if using Checkout URL)"}),r.jsx(de,{id:"productId",placeholder:"prod_xxxxxxxxxxxxx",value:c,onChange:oe=>d(oe.target.value),disabled:o}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Find this in your Stripe dashboard"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"priceId",children:"Stripe Price ID (Optional)"}),r.jsx(de,{id:"priceId",placeholder:"price_xxxxxxxxxxxxx",value:u,onChange:oe=>h(oe.target.value),disabled:o}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to fetch all prices automatically"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"lookupKey",children:"Lookup Key (Optional)"}),r.jsx(de,{id:"lookupKey",placeholder:"adult_escape_room",value:m,onChange:oe=>f(oe.target.value),disabled:o}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use lookup keys to manage pricing changes without code deployment"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"checkoutUrl",children:"Stripe Checkout URL (Optional)"}),r.jsx(de,{id:"checkoutUrl",placeholder:"https://buy.stripe.com/...",value:v,onChange:oe=>x(oe.target.value),disabled:o}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Add a direct Stripe checkout link. Users will be redirected to this URL when clicking "Proceed to Checkout"'})]}),r.jsx(jo,{className:"bg-blue-50 border-blue-200",children:r.jsx(No,{className:"text-xs text-blue-800",children:" Checkout will be automatically enabled after linking the product"})}),r.jsx(W,{onClick:se,disabled:o||!c.trim()&&!v.trim(),className:"w-full",children:o?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lj,{className:"w-4 h-4 mr-2"}),v.trim()&&!c.trim()?"Save Checkout URL & Enable":"Link Product & Fetch Prices"]})}),t.stripePrices&&t.stripePrices.length>0&&r.jsxs(he,{className:"border-green-200 bg-green-50",children:[r.jsx(Ke,{children:r.jsxs(Xe,{className:"text-sm text-green-900",children:[" Available Prices (",t.stripePrices.length,")"]})}),r.jsx(_e,{className:"space-y-2",children:t.stripePrices.map((oe,pe)=>r.jsxs("div",{className:"p-3 bg-white rounded border border-green-200",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:["$",((oe.unitAmount||0)/100).toFixed(2)," ",oe.currency?.toUpperCase()||"USD"]}),oe.lookupKey&&r.jsx("div",{className:"text-xs mt-1",children:r.jsxs(De,{variant:"outline",className:"text-xs",children:[" ",oe.lookupKey]})}),oe.metadata?.pricing_type&&r.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Type: ",oe.metadata.pricing_type]})]}),r.jsx(W,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{navigator.clipboard.writeText(oe.priceId),re.success("Price ID copied!")},children:"Copy ID"})]}),r.jsx("code",{className:"text-xs text-gray-500 block",children:oe.priceId})]},oe.priceId||pe))})]}),t.stripeCheckoutUrl&&r.jsxs(he,{className:"border-purple-200 bg-purple-50",children:[r.jsx(Ke,{children:r.jsx(Xe,{className:"text-sm text-purple-900",children:" Stripe Checkout URL"})}),r.jsxs(_e,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"text-xs bg-white px-3 py-2 rounded border flex-1 truncate",children:t.stripeCheckoutUrl}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.stripeCheckoutUrl),re.success("Checkout URL copied!")},children:"Copy"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>window.open(t.stripeCheckoutUrl,"_blank"),children:r.jsx(tn,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-purple-700 mt-2",children:'Users will be redirected to this URL when clicking "Proceed to Checkout"'})]})]})]})})]})})]}),r.jsxs("div",{className:"flex justify-between pt-6",children:[r.jsxs(W,{variant:"outline",onClick:n,children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Previous"]}),r.jsxs(W,{onClick:s,children:[q?"Next":"Skip for Now",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]}),r.jsx(rp,{open:A,onOpenChange:k,children:r.jsxs(sp,{className:"bg-white dark:bg-[#1e1e1e] border-gray-200 dark:border-[#2a2a2a] max-w-[calc(100%-2rem)] sm:max-w-2xl",children:[r.jsxs(np,{children:[r.jsxs(ip,{className:"text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(oc,{className:"w-5 h-5 text-blue-600"}),"Edit Stripe Configuration"]}),r.jsx(op,{className:"text-gray-600 dark:text-gray-400 text-left",children:"Update your Stripe product, price, or checkout URL settings"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-product-id",className:"text-sm font-medium text-gray-900 dark:text-white",children:"Stripe Product ID"}),r.jsx(de,{id:"edit-product-id",placeholder:"prod_xxxxxxxxxxxx",value:E,onChange:oe=>O(oe.target.value),className:"font-mono text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Find this in your Stripe dashboard"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"edit-price-id",className:"text-sm font-medium text-gray-900 dark:text-white",children:["Stripe Price ID ",r.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),r.jsx(de,{id:"edit-price-id",placeholder:"price_xxxxxxxxxxxx",value:$,onChange:oe=>T(oe.target.value),className:"font-mono text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Leave empty to fetch all prices automatically"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{htmlFor:"edit-checkout-url",className:"text-sm font-medium text-gray-900 dark:text-white",children:["Stripe Checkout URL ",r.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),r.jsx(de,{id:"edit-checkout-url",placeholder:"https://buy.stripe.com/...",value:I,onChange:oe=>L(oe.target.value),className:"text-sm"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Add a direct Stripe checkout link for custom redirect"})]})]}),r.jsxs(ap,{className:"flex-col gap-2 sm:flex-row",children:[r.jsx(lp,{className:"w-full sm:w-auto bg-white dark:bg-[#161616] text-gray-900 dark:text-gray-300 border-gray-300 dark:border-[#2a2a2a] hover:bg-gray-50 dark:hover:bg-[#222]",disabled:o,children:"Cancel"}),r.jsx(W,{onClick:ie,disabled:o,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:o?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})}),r.jsx(wKe,{isOpen:F,onClose:()=>J(!1),gameData:t,onUpdate:e}),r.jsx(rp,{open:C,onOpenChange:S,children:r.jsxs(sp,{className:"bg-white dark:bg-[#1e1e1e] border-gray-200 dark:border-[#2a2a2a] max-w-[calc(100%-2rem)] sm:max-w-lg",children:[r.jsxs(np,{children:[r.jsxs(ip,{className:"text-gray-900 dark:text-white flex items-center gap-2",children:[r.jsx(ks,{className:"w-5 h-5 text-red-600"}),"Remove Stripe Configuration?"]}),r.jsxs(op,{className:"text-gray-600 dark:text-gray-400 text-left space-y-2",children:[r.jsx("p",{children:"This will remove all Stripe payment configuration from this game, including:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[r.jsx("li",{children:"Product ID and Price ID"}),r.jsx("li",{children:"All configured prices"}),r.jsx("li",{children:"Custom checkout URL (if any)"}),r.jsx("li",{children:"Sync status and history"})]}),r.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300 mt-3",children:"Note: This will NOT delete the product or prices in your Stripe account."}),r.jsx("p",{className:"text-sm",children:"Customers will no longer be able to book and pay for this game through Stripe until you reconfigure payment settings."})]})]}),r.jsxs(ap,{className:"flex-col gap-2 sm:flex-row",children:[r.jsx(lp,{className:"w-full sm:w-auto bg-white dark:bg-[#161616] text-gray-900 dark:text-gray-300 border-gray-300 dark:border-[#2a2a2a] hover:bg-gray-50 dark:hover:bg-[#222]",children:"Cancel"}),r.jsxs(Ng,{onClick:be,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Remove Configuration"]})]})]})})]})}const nx=[{id:1,name:"Basic Info",icon:Ws},{id:2,name:"Capacity & Pricing",icon:Xr},{id:3,name:"Game Details",icon:_a},{id:4,name:"Media Upload",icon:Bc},{id:5,name:"Schedule",icon:qs},{id:6,name:"Payment Settings",icon:rn},{id:7,name:"Widget & Embed",icon:Ed},{id:8,name:"Review & Publish",icon:Sr}],NKe=["Horror","Mystery","Adventure","Sci-Fi","Fantasy","Historical","Family-Friendly","Challenge"],SKe=["English","Spanish","French","German","Mandarin","Japanese"],bE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],CKe=[{id:"faq-1",question:"What should I bring?",answer:"Just bring yourself and your team! All materials are provided."},{id:"faq-2",question:"Can I bring food and drinks?",answer:"Outside food and drinks are not permitted, but we have a caf on-site."},{id:"faq-3",question:"Is photography allowed?",answer:"Yes! Feel free to take photos before and after your game."}],kKe=[{id:"policy-1",title:"Standard Cancellation",description:"Free cancellation up to 24 hours before the scheduled time. Cancellations within 24 hours are non-refundable."},{id:"policy-2",title:"Flexible Cancellation",description:"Free cancellation up to 2 hours before the scheduled time with a small fee."},{id:"policy-3",title:"No Refund Policy",description:"All bookings are final and non-refundable. Rescheduling allowed up to 48 hours in advance."}],_Ke=[{id:"waiver-1",name:"Standard Liability Waiver",description:"General liability waiver for all activities"},{id:"waiver-2",name:"Minor Participant Waiver",description:"Waiver for participants under 18 years old"},{id:"waiver-3",name:"Photo Release Waiver",description:"Permission to use photos and videos for marketing"},{id:"waiver-4",name:"COVID-19 Health Waiver",description:"Health screening and COVID-19 related acknowledgments"}],AKe=t=>t?t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"):"game";function EKe({onComplete:t,onCancel:e,initialData:s,mode:n="create",theme:a,embedContext:i}){const[o,l]=j.useState(1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState({stage:"",message:"",progress:0}),[v,x]=j.useState(null),[g,b]=j.useState({name:"",description:"",category:"",tagline:"",eventType:"public",gameType:"physical",minAdults:2,maxAdults:8,minChildren:0,maxChildren:4,adultPrice:30,childPrice:20,duration:60,difficulty:3,minAge:12,language:["English"],successRate:75,activityDetails:"",additionalInformation:"",faqs:[],cancellationPolicies:[],accessibility:{strollerAccessible:!1,wheelchairAccessible:!1},location:"",coverImage:"",galleryImages:[],videos:[],selectedWidget:"calendar-single-event",operatingDays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:"10:00",endTime:"22:00",slotInterval:60,advanceBooking:30,customHoursEnabled:!1,customHours:{Monday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Tuesday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Wednesday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Thursday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Friday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Saturday:{enabled:!0,startTime:"10:00",endTime:"22:00"},Sunday:{enabled:!0,startTime:"10:00",endTime:"22:00"}},customCapacityFields:[],groupDiscount:!1,groupTiers:[],dynamicPricing:!1,peakPricing:{enabled:!1,weekdayPeakPrice:0,weekendPeakPrice:0,peakStartTime:"",peakEndTime:""},customDates:[],blockedDates:[],requiresWaiver:!0,selectedWaiver:null,cancellationWindow:24,specialInstructions:"",slug:"",...s||{}}),w=o/nx.length*100,N=(O,$)=>{b(T=>({...T,[O]:$}))},C=()=>{if(o===1&&(!g.name||!g.description||!g.category||!g.gameType||!g.eventType)){re.error("Please fill in all required fields");return}if(o===2){if(g.maxAdults<g.minAdults){re.error("Maximum adults must be greater than minimum");return}if(g.adultPrice<=0||g.childPrice<0){re.error("Please enter valid pricing");return}}if(o===4&&!g.coverImage){re.error("Please add at least a cover image");return}if(o===5){if(g.operatingDays.length===0){re.error("Please select at least one operating day");return}if(g.startTime>=g.endTime){re.error("End time must be after start time");return}if(g.customHoursEnabled){const T=g.operatingDays.filter(I=>{const L=g.customHours[I];return L&&L.enabled&&L.startTime>=L.endTime});if(T.length>0){re.error(`Invalid hours for: ${T.join(", ")}. End time must be after start time.`);return}}if(g.slotInterval<g.duration){re.error(`Time slot interval (${g.slotInterval} min) cannot be shorter than game duration (${g.duration} min). This may cause booking overlaps.`);return}if(g.advanceBooking<1||g.advanceBooking>365){re.error("Advance booking must be between 1 and 365 days");return}if(g.customDates.filter(T=>T.startTime>=T.endTime).length>0){re.error("Some custom dates have invalid time ranges. End time must be after start time.");return}if(g.blockedDates.filter(T=>typeof T=="object"&&T.startTime&&T.endTime&&T.startTime>=T.endTime).length>0){re.error("Some blocked dates have invalid time ranges. End time must be after start time.");return}}o<nx.length&&l(o+1)},S=()=>{o>1&&l(o-1)},A=()=>{const O=[];return(!g.name||g.name.trim()==="")&&O.push("Game name is required"),(!g.description||g.description.trim()==="")&&O.push("Description is required"),(!g.adultPrice||g.adultPrice<=0)&&O.push("Adult price must be greater than 0"),(!g.duration||g.duration<=0)&&O.push("Duration must be greater than 0"),(!g.minAdults||g.minAdults<=0)&&O.push("Minimum adults must be at least 1"),(!g.maxAdults||g.maxAdults<g.minAdults)&&O.push("Maximum adults must be greater than or equal to minimum"),g.operatingDays.length===0&&O.push("At least one operating day must be selected"),{errors:O,isValid:O.length===0}},k=async()=>{const O=A();if(!O.isValid){re.error("Please fix validation errors before publishing"),O.errors.forEach($=>re.error($));return}d(!0);try{f({stage:"preparing",message:"Preparing game data...",progress:20}),await new Promise(I=>setTimeout(I,300)),f({stage:"stripe",message:"Creating Stripe product and pricing...",progress:40});const $=await t(g);f({stage:"database",message:"Saving to database...",progress:70}),await new Promise(I=>setTimeout(I,300)),f({stage:"verifying",message:"Verifying game creation...",progress:90});const T=$?.id||$?.data?.id||null;x(T),await new Promise(I=>setTimeout(I,300)),f({stage:"complete",message:"Game created successfully!",progress:100}),h(!0),re.success(n==="edit"?"Game updated successfully!":"Game published successfully!")}catch($){console.error("Error publishing game:",$),re.error($.message||"Failed to publish game"),d(!1),f({stage:"error",message:$.message||"Failed to create game",progress:0})}},E=()=>{switch(o){case 1:return r.jsx(PKe,{gameData:g,updateGameData:N});case 2:return r.jsx(TKe,{gameData:g,updateGameData:N});case 3:return r.jsx(IKe,{gameData:g,updateGameData:N});case 4:return r.jsx(MKe,{gameData:g,updateGameData:N});case 5:return r.jsx(LKe,{gameData:g,updateGameData:N});case 6:return r.jsx(jKe,{gameData:g,onUpdate:O=>b(O),onNext:()=>l(7),onPrevious:()=>l(5)});case 7:return r.jsx(FKe,{gameData:g,updateGameData:N,theme:a,embedContext:i});case 8:return r.jsx(BKe,{gameData:g});default:return null}};return c&&!u?r.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#161616] p-6",children:r.jsx(he,{className:"max-w-2xl w-full border-blue-200 bg-gradient-to-br from-blue-50 to-indigo-50",children:r.jsxs(_e,{className:"p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),r.jsx("h2",{className:"text-2xl text-gray-900 mb-3",children:n==="edit"?"Updating Game...":"Creating Your Game..."}),r.jsx("p",{className:"text-lg text-gray-700 mb-8",children:m.message}),r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:"bg-blue-600 h-full rounded-full transition-all duration-500 ease-out",style:{width:`${m.progress}%`}})}),r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[m.progress,"% Complete"]})]}),r.jsxs("div",{className:"space-y-3 text-left max-w-md mx-auto",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${m.stage==="preparing"?"bg-blue-100":m.progress>20?"bg-green-100":"bg-gray-100"}`,children:[m.progress>20?r.jsx(Sr,{className:"w-5 h-5 text-green-600"}):r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Preparing game data"})]}),r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${m.stage==="stripe"?"bg-blue-100":m.progress>40?"bg-green-100":"bg-gray-100"}`,children:[m.progress>40?r.jsx(Sr,{className:"w-5 h-5 text-green-600"}):r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Creating Stripe product"})]}),r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${m.stage==="database"?"bg-blue-100":m.progress>70?"bg-green-100":"bg-gray-100"}`,children:[m.progress>70?r.jsx(Sr,{className:"w-5 h-5 text-green-600"}):r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Saving to database"})]}),r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${m.stage==="verifying"?"bg-blue-100":m.progress>90?"bg-green-100":"bg-gray-100"}`,children:[m.progress>90?r.jsx(Sr,{className:"w-5 h-5 text-green-600"}):r.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 rounded-full"}),r.jsx("span",{className:"text-sm text-gray-900",children:"Verifying creation"})]})]})]})})}):u?r.jsx("div",{className:"h-full flex items-center justify-center bg-white dark:bg-[#161616] p-6",children:r.jsx(he,{className:"max-w-2xl w-full border-green-200 bg-gradient-to-br from-green-50 to-emerald-50",children:r.jsxs(_e,{className:"p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Sr,{className:"w-10 h-10 text-green-600"})}),r.jsx("h2",{className:"text-3xl text-gray-900 mb-3",children:n==="edit"?"Game Updated!":"Game Published!"}),r.jsx("p",{className:"text-lg text-gray-700 mb-8",children:n==="edit"?"Your game has been successfully updated and is now live.":"Your game has been successfully published and is now available for booking!"}),r.jsx("div",{className:"bg-white rounded-lg p-6 mb-8 border border-green-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-6 text-left",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Game Name"}),r.jsx("p",{className:"text-gray-900",children:g.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Price"}),r.jsxs("p",{className:"text-gray-900",children:["$",g.adultPrice," per person"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Duration"}),r.jsxs("p",{className:"text-gray-900",children:[g.duration," minutes"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Widget"}),r.jsx("p",{className:"text-gray-900",children:g.selectedWidget})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-green-700 mb-4",children:[r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{children:"Supabase database updated"}),r.jsx("span",{className:"mx-2",children:""}),r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{children:"Stripe product created"}),r.jsx("span",{className:"mx-2",children:""}),r.jsx(Sr,{className:"w-4 h-4"}),r.jsx("span",{children:"Embed code generated"})]}),r.jsxs(W,{onClick:e,size:"lg",className:"bg-green-600 hover:bg-green-700 text-white",children:[r.jsx(Sr,{className:"w-5 h-5 mr-2"}),"Done"]})]})]})})}):r.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-[#161616]",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-[#2a2a2a]",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-2xl text-gray-900 dark:text-white",children:n==="edit"?"Edit Game":"Add New Game"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-[#a3a3a3] mt-1",children:["Step ",o," of ",nx.length,": ",nx[o-1].name]})]}),r.jsx(vm,{value:w,className:"h-2"})]}),r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-[#2a2a2a] bg-gray-50 dark:bg-[#0a0a0a]",children:r.jsx("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:nx.map((O,$)=>{const T=O.icon,I=o>O.id,L=o===O.id;return r.jsxs(ce.Fragment,{children:[r.jsxs("button",{onClick:()=>l(O.id),className:"flex flex-col items-center group cursor-pointer",title:`Go to ${O.name}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${I?"bg-green-600 dark:bg-emerald-600 text-white group-hover:bg-green-700 dark:group-hover:bg-emerald-700":L?"bg-blue-600 dark:bg-[#4f46e5] text-white":"bg-gray-200 dark:bg-[#2a2a2a] text-gray-500 dark:text-[#737373] group-hover:bg-gray-300 dark:group-hover:bg-[#3a3a3a]"}`,children:I?r.jsx(Sr,{className:"w-5 h-5"}):r.jsx(T,{className:"w-5 h-5"})}),r.jsx("span",{className:`text-xs mt-2 hidden md:block transition-colors ${L?"text-blue-600 dark:text-[#6366f1]":"text-gray-500 dark:text-[#737373] group-hover:text-gray-700 dark:group-hover:text-[#a3a3a3]"}`,children:O.name})]}),$<nx.length-1&&r.jsx("div",{className:`flex-1 h-0.5 mx-2 ${I?"bg-green-600 dark:bg-emerald-600":"bg-gray-200 dark:bg-[#2a2a2a]"}`})]},O.id)})})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:E()})}),r.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-[#2a2a2a] bg-white dark:bg-[#1e1e1e]",children:r.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[r.jsxs(W,{variant:"outline",onClick:S,disabled:o===1,children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Previous"]}),o<nx.length?r.jsxs(W,{onClick:C,className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca]",children:["Next",r.jsx($n,{className:"w-4 h-4 ml-2"})]}):r.jsx(W,{onClick:k,disabled:c||!A().isValid,className:"bg-green-600 dark:bg-emerald-600 hover:bg-green-700 dark:hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Publishing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),n==="edit"?"Update Game":"Publish Game"]})})]})})]})}function PKe({gameData:t,updateGameData:e}){return r.jsx("div",{className:"space-y-6",children:r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Basic Information"}),r.jsx(Ft,{children:"Enter the essential details about your escape room game"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"name",children:["Game Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"name",placeholder:"e.g., Zombie Apocalypse",value:t.name,onChange:s=>e("name",s.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"tagline",children:"Tagline"}),r.jsx(de,{id:"tagline",placeholder:"A short catchy phrase about your game",value:t.tagline,onChange:s=>e("tagline",s.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"category",children:["Category ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs(sr,{value:t.category,onValueChange:s=>e("category",s),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{placeholder:"Select a category"})}),r.jsx(ir,{children:NKe.map(s=>r.jsx(Ae,{value:s,children:s},s))})]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"gameType",children:["Game Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs(sr,{value:t.gameType,onValueChange:s=>e("gameType",s),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{placeholder:"Select game type",children:t.gameType==="physical"?"Physical":t.gameType==="virtual"?"Virtual":t.gameType==="hybrid"?"Hybrid":null})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"physical",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Physical"}),r.jsx("span",{className:"text-xs text-gray-500",children:"On-site, in-person experience"})]})}),r.jsx(Ae,{value:"virtual",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Virtual"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Online or remote experience"})]})}),r.jsx(Ae,{value:"hybrid",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Hybrid"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Mix of in-person and online"})]})})]})]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"eventType",children:["Event Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs(sr,{value:t.eventType,onValueChange:s=>e("eventType",s),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{placeholder:"Select event type",children:t.eventType==="public"?"Public Event":t.eventType==="private"?"Private Event":null})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"public",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Public Event"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Open to individual bookings and walk-ins"})]})}),r.jsx(Ae,{value:"private",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:"Private Event"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Exclusive bookings for groups only"})]})})]})]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"description",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Ps,{id:"description",placeholder:"Describe the storyline, atmosphere, and what makes this game unique...",rows:6,value:t.description,onChange:s=>e("description",s.target.value),className:"mt-1"}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[t.description.length," / 500 characters"]})]})]})]})})}function TKe({gameData:t,updateGameData:e}){const s=()=>{const i={id:`custom-${Date.now()}`,name:"",min:0,max:0,price:0};e("customCapacityFields",[...t.customCapacityFields,i])},n=i=>{e("customCapacityFields",t.customCapacityFields.filter(o=>o.id!==i))},a=(i,o,l)=>{const c=t.customCapacityFields.map(d=>d.id===i?{...d,[o]:l}:d);e("customCapacityFields",c)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-5 h-5"}),"Player Capacity"]}),r.jsx(Ft,{children:"Set the minimum and maximum number of players for this game"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"minAdults",className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Minimum Adults ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"minAdults",type:"number",min:"1",value:t.minAdults,onChange:i=>e("minAdults",parseInt(i.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"maxAdults",children:["Maximum Adults ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"maxAdults",type:"number",min:"1",value:t.maxAdults,onChange:i=>e("maxAdults",parseInt(i.target.value)),className:"mt-1"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"minChildren",className:"flex items-center gap-2",children:[r.jsx(pue,{className:"w-4 h-4"}),"Minimum Children"]}),r.jsx(de,{id:"minChildren",type:"number",min:"0",value:t.minChildren,onChange:i=>e("minChildren",parseInt(i.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"maxChildren",children:"Maximum Children"}),r.jsx(de,{id:"maxChildren",type:"number",min:"0",value:t.maxChildren,onChange:i=>e("maxChildren",parseInt(i.target.value)),className:"mt-1"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-900",children:"Custom Capacity Types"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add custom player categories (e.g., Teens, Seniors, Students)"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:s,className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Add Custom Field"]})]}),(t.customCapacityFields?.length??0)>0&&r.jsx("div",{className:"space-y-3",children:t.customCapacityFields.map(i=>r.jsx("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Field Name"}),r.jsx(de,{placeholder:"e.g., Teens",value:i.name,onChange:o=>a(i.id,"name",o.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Minimum"}),r.jsx(de,{type:"number",min:"0",value:i.min,onChange:o=>a(i.id,"min",parseInt(o.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Maximum"}),r.jsx(de,{type:"number",min:"0",value:i.max,onChange:o=>a(i.id,"max",parseInt(o.target.value)),className:"mt-1"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(X,{className:"text-xs",children:"Price per Person"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"$"}),r.jsx(de,{type:"number",min:"0",step:"0.01",value:i.price,onChange:o=>a(i.id,"price",parseFloat(o.target.value)),className:"pl-7"})]})]}),r.jsx("div",{className:"self-end",children:r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>n(i.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(Is,{className:"w-4 h-4"})})})]})]})},i.id))})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-900",children:[" ",r.jsx("strong",{children:"Capacity Summary:"})," This game can accommodate"," ",t.minAdults,"-",t.maxAdults," adults",t.maxChildren>0&&`, up to ${t.maxChildren} children`,(t.customCapacityFields?.length??0)>0&&r.jsxs(r.Fragment,{children:[", and"," ",t.customCapacityFields.map((i,o)=>r.jsxs("span",{children:[o>0&&", ",i.name||"custom"," (",i.min,"-",i.max,")"]},i.id))]})]})})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(In,{className:"w-5 h-5"}),"Pricing"]}),r.jsx(Ft,{children:"Set ticket prices for adults and children"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"adultPrice",children:["Adult Price (per person) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),r.jsx(de,{id:"adultPrice",type:"number",min:"0",step:"0.01",value:t.adultPrice,onChange:i=>e("adultPrice",parseFloat(i.target.value)),className:"pl-7"})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"childPrice",children:"Child Price (per person)"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),r.jsx(de,{id:"childPrice",type:"number",min:"0",step:"0.01",value:t.childPrice,onChange:i=>e("childPrice",parseFloat(i.target.value)),className:"pl-7"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Enable Group Discounts"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Offer discounts for larger groups"})]}),r.jsx(W,{variant:t.groupDiscount?"default":"outline",size:"sm",onClick:()=>e("groupDiscount",!t.groupDiscount),children:t.groupDiscount?"Enabled":"Disabled"})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-blue-200 bg-blue-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-blue-900",children:"Enable Dynamic Pricing"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Set different prices based on time and demand"})]}),r.jsx(W,{variant:t.dynamicPricing?"default":"outline",size:"sm",className:t.dynamicPricing?"bg-blue-600 hover:bg-blue-700":"",onClick:()=>e("dynamicPricing",!t.dynamicPricing),children:t.dynamicPricing?"Enabled":"Disabled"})]}),t.dynamicPricing&&r.jsx(OKe,{gameData:t,updateGameData:e})]})]})]})}function OKe({gameData:t,updateGameData:e}){const s=()=>{const o={minSize:t.groupTiers.length>0?t.groupTiers[t.groupTiers.length-1].maxSize+1:5,maxSize:t.groupTiers.length>0?t.groupTiers[t.groupTiers.length-1].maxSize+3:8,discountPercent:10};e("groupTiers",[...t.groupTiers,o])},n=o=>{e("groupTiers",t.groupTiers.filter((l,c)=>c!==o))},a=(o,l,c)=>{const d=[...t.groupTiers];d[o]={...d[o],[l]:c},e("groupTiers",d)},i=(o,l)=>{e("peakPricing",{...t.peakPricing,[o]:l})};return r.jsxs("div",{className:"space-y-4 mt-4 p-4 border-2 border-blue-100 rounded-lg bg-blue-50/50",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(_a,{className:"w-5 h-5 text-blue-600"}),r.jsx("h4",{className:"text-blue-900",children:"Dynamic Pricing Settings"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-900",children:"Peak Hour Pricing"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Charge more during high-demand hours"})]}),r.jsx(W,{variant:t.peakPricing?.enabled?"default":"outline",size:"sm",onClick:()=>i("enabled",!t.peakPricing?.enabled),children:t.peakPricing?.enabled?"Enabled":"Disabled"})]}),t.peakPricing?.enabled&&r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"weekdayPeakPrice",className:"text-sm",children:"Weekday Peak Price"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),r.jsx(de,{id:"weekdayPeakPrice",type:"number",min:"0",step:"0.01",value:t.peakPricing?.weekdayPeakPrice??35,onChange:o=>i("weekdayPeakPrice",parseFloat(o.target.value)),className:"pl-7"})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"weekendPeakPrice",className:"text-sm",children:"Weekend Peak Price"}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),r.jsx(de,{id:"weekendPeakPrice",type:"number",min:"0",step:"0.01",value:t.peakPricing.weekendPeakPrice,onChange:o=>i("weekendPeakPrice",parseFloat(o.target.value)),className:"pl-7"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"peakStartTime",className:"text-sm",children:"Peak Start Time"}),r.jsx(de,{id:"peakStartTime",type:"time",value:t.peakPricing.peakStartTime,onChange:o=>i("peakStartTime",o.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"peakEndTime",className:"text-sm",children:"Peak End Time"}),r.jsx(de,{id:"peakEndTime",type:"time",value:t.peakPricing.peakEndTime,onChange:o=>i("peakEndTime",o.target.value),className:"mt-1"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-xs text-blue-900",children:[" Peak pricing applies from ",t.peakPricing.peakStartTime," to ",t.peakPricing.peakEndTime]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-900",children:"Group Size Discounts"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Offer discounts based on group size"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:s,children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Add Tier"]})]}),(t.groupTiers?.length??0)>0&&r.jsx("div",{className:"space-y-3",children:t.groupTiers.map((o,l)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Min Size"}),r.jsx(de,{type:"number",min:"1",value:o.minSize,onChange:c=>a(l,"minSize",parseInt(c.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Max Size"}),r.jsx(de,{type:"number",min:"1",value:o.maxSize,onChange:c=>a(l,"maxSize",parseInt(c.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Discount %"}),r.jsx(de,{type:"number",min:"0",max:"100",value:o.discountPercent,onChange:c=>a(l,"discountPercent",parseInt(c.target.value)),className:"mt-1"})]})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>n(l),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(Is,{className:"w-4 h-4"})})]},l))}),t.groupTiers.length===0&&r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No group tiers configured. Click "Add Tier" to create pricing tiers.'})]})]})}function IKe({gameData:t,updateGameData:e}){const s=n=>{const a=t.language.includes(n)?t.language.filter(i=>i!==n):[...t.language,n];e("language",a)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Game Details"}),r.jsx(Ft,{children:"Configure game duration, difficulty, and requirements"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"duration",className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Duration (minutes) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"duration",type:"number",min:"30",step:"15",value:t.duration,onChange:n=>e("duration",parseInt(n.target.value)),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"minAge",children:["Minimum Age ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"minAge",type:"number",min:"0",value:t.minAge,onChange:n=>e("minAge",parseInt(n.target.value)),className:"mt-1"})]})]}),r.jsxs("div",{children:[r.jsxs(X,{className:"flex items-center gap-2 mb-3",children:[r.jsx(Es,{className:"w-4 h-4"}),"Difficulty Level"]}),r.jsx("div",{className:"flex items-center gap-4",children:[1,2,3,4,5].map(n=>r.jsxs("button",{onClick:()=>e("difficulty",n),className:"flex flex-col items-center gap-1 p-3 border-2 rounded-lg transition-all hover:border-blue-400",style:{borderColor:t.difficulty===n?"#2563eb":"#e5e7eb",backgroundColor:t.difficulty===n?"#eff6ff":"white"},children:[r.jsx("div",{className:"flex gap-0.5",children:Array.from({length:n}).map((a,i)=>r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},i))}),r.jsxs("span",{className:"text-xs text-gray-600",children:[n===1&&"Beginner",n===2&&"Easy",n===3&&"Medium",n===4&&"Hard",n===5&&"Expert"]})]},n))})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{className:"mb-3",children:"Available Languages"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:SKe.map(n=>r.jsxs(De,{variant:t.language.includes(n)?"default":"outline",className:"cursor-pointer px-4 py-2",onClick:()=>s(n),children:[n,t.language.includes(n)&&r.jsx(Sr,{className:"w-3 h-3 ml-1"})]},n))})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"successRate",children:"Success Rate (%)"}),r.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[r.jsx(de,{id:"successRate",type:"range",min:"0",max:"100",value:t.successRate,onChange:n=>e("successRate",parseInt(n.target.value)),className:"flex-1"}),r.jsxs("span",{className:"text-lg text-gray-900 min-w-[60px]",children:[t.successRate,"%"]})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Historical success rate helps set player expectations"})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5"}),"Activity Details"]}),r.jsx(Ft,{children:"Provide detailed information about the activity"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"activityDetails",children:"Activity Details"}),r.jsx(Ps,{id:"activityDetails",placeholder:"Describe what participants will do during this activity...",rows:4,value:t.activityDetails,onChange:n=>e("activityDetails",n.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"additionalInformation",children:"Additional Information"}),r.jsx(Ps,{id:"additionalInformation",placeholder:"Any other important information participants should know...",rows:4,value:t.additionalInformation,onChange:n=>e("additionalInformation",n.target.value),className:"mt-1"})]})]})]}),r.jsx($Ke,{gameData:t,updateGameData:e}),r.jsx(DKe,{gameData:t,updateGameData:e}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(nue,{className:"w-5 h-5"}),"Accessibility"]}),r.jsx(Ft,{children:"Specify accessibility features"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"strollerAccessible",children:"Stroller Accessible"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Is the venue accessible for strollers?"})]}),r.jsx(Rt,{id:"strollerAccessible",checked:t.accessibility?.strollerAccessible??!1,onCheckedChange:n=>e("accessibility",{...t.accessibility,strollerAccessible:n})})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"wheelchairAccessible",children:"Wheelchair Accessible"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Is the venue wheelchair accessible?"})]}),r.jsx(Rt,{id:"wheelchairAccessible",checked:t.accessibility?.wheelchairAccessible??!1,onCheckedChange:n=>e("accessibility",{...t.accessibility,wheelchairAccessible:n})})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(dl,{className:"w-5 h-5"}),"Location"]}),r.jsx(Ft,{children:"Specify where this activity takes place"})]}),r.jsx(_e,{children:r.jsxs("div",{children:[r.jsx(X,{htmlFor:"location",children:"Address"}),r.jsx(de,{id:"location",placeholder:"Enter location address...",value:t.location,onChange:n=>e("location",n.target.value),className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This is pre-filled from your account settings. You can change it if needed."})]})})]}),r.jsx(RKe,{gameData:t,updateGameData:e})]})}function $Ke({gameData:t,updateGameData:e}){const[s,n]=j.useState(!1),[a,i]=j.useState(""),[o,l]=j.useState(""),c=()=>{if(!a.trim()||!o.trim()){re.error("Please fill in both question and answer");return}const h={id:`faq-custom-${Date.now()}`,question:a,answer:o};e("faqs",[...t.faqs,h]),i(""),l(""),n(!1),re.success("FAQ added")},d=h=>{if(t.faqs.find(m=>m.id===h.id)){re.error("This FAQ is already added");return}e("faqs",[...t.faqs,h]),re.success("FAQ added")},u=h=>{e("faqs",t.faqs.filter(m=>m.id!==h)),re.success("FAQ removed")};return r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Pf,{className:"w-5 h-5"}),"Frequently Asked Questions"]}),r.jsx(Ft,{children:"Add FAQs to help customers understand your activity"})]}),r.jsxs(_e,{className:"space-y-4",children:[t.faqs.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{children:["Selected FAQs (",t.faqs.length,")"]}),t.faqs.map(h=>r.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-900",children:h.question}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:h.answer})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>u(h.id),children:r.jsx(Is,{className:"w-4 h-4"})})]})},h.id))]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Add from existing FAQs"}),r.jsx("div",{className:"grid gap-2 mt-2",children:CKe.map(h=>r.jsxs("div",{className:"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>d(h),children:[r.jsx("p",{className:"text-sm text-gray-900",children:h.question}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:h.answer})]},h.id))})]}),r.jsx(Ze,{}),s?r.jsxs("div",{className:"space-y-3 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"newQuestion",children:"Question"}),r.jsx(de,{id:"newQuestion",placeholder:"e.g., What is the minimum age?",value:a,onChange:h=>i(h.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"newAnswer",children:"Answer"}),r.jsx(Ps,{id:"newAnswer",placeholder:"Enter the answer...",rows:3,value:o,onChange:h=>l(h.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{onClick:c,size:"sm",children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Add FAQ"]}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{n(!1),i(""),l("")},children:"Cancel"})]})]}):r.jsxs(W,{variant:"outline",onClick:()=>n(!0),className:"w-full",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create New FAQ"]})]})]})}function DKe({gameData:t,updateGameData:e}){const[s,n]=j.useState(!1),[a,i]=j.useState(""),[o,l]=j.useState(""),c=()=>{if(!a.trim()||!o.trim()){re.error("Please fill in both title and description");return}const h={id:`policy-custom-${Date.now()}`,title:a,description:o};e("cancellationPolicies",[...t.cancellationPolicies,h]),i(""),l(""),n(!1),re.success("Policy added")},d=h=>{if(t.cancellationPolicies.find(m=>m.id===h.id)){re.error("This policy is already added");return}e("cancellationPolicies",[...t.cancellationPolicies,h]),re.success("Policy added")},u=h=>{e("cancellationPolicies",t.cancellationPolicies.filter(m=>m.id!==h)),re.success("Policy removed")};return r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5"}),"Cancellation Policy"]}),r.jsx(Ft,{children:"Define cancellation and refund policies"})]}),r.jsxs(_e,{className:"space-y-4",children:[t.cancellationPolicies.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{children:["Selected Policies (",t.cancellationPolicies.length,")"]}),t.cancellationPolicies.map(h=>r.jsx("div",{className:"p-3 border rounded-lg bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-gray-900",children:h.title}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:h.description})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>u(h.id),children:r.jsx(Is,{className:"w-4 h-4"})})]})},h.id))]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Add from existing policies"}),r.jsx("div",{className:"grid gap-2 mt-2",children:kKe.map(h=>r.jsxs("div",{className:"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>d(h),children:[r.jsx("p",{className:"text-gray-900",children:h.title}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:h.description})]},h.id))})]}),r.jsx(Ze,{}),s?r.jsxs("div",{className:"space-y-3 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"newPolicyTitle",children:"Policy Title"}),r.jsx(de,{id:"newPolicyTitle",placeholder:"e.g., Flexible Cancellation",value:a,onChange:h=>i(h.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"newPolicyDescription",children:"Policy Description"}),r.jsx(Ps,{id:"newPolicyDescription",placeholder:"Describe the cancellation terms...",rows:3,value:o,onChange:h=>l(h.target.value),className:"mt-1"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{onClick:c,size:"sm",children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Add Policy"]}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{n(!1),i(""),l("")},children:"Cancel"})]})]}):r.jsxs(W,{variant:"outline",onClick:()=>n(!0),className:"w-full",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create New Policy"]})]})]})}function RKe({gameData:t,updateGameData:e}){const s=a=>{e("selectedWaiver",a),e("requiresWaiver",!0),re.success(`${a.name} selected`)},n=()=>{e("selectedWaiver",null),e("requiresWaiver",!1),re.success("Waiver removed")};return r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(DS,{className:"w-5 h-5"}),"Waiver Requirement"]}),r.jsx(Ft,{children:"Select a waiver that participants must sign"})]}),r.jsxs(_e,{className:"space-y-4",children:[t.selectedWaiver?r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Selected Waiver"}),r.jsx("div",{className:"p-4 border-2 border-blue-200 rounded-lg bg-blue-50",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(DS,{className:"w-4 h-4 text-blue-600"}),r.jsx("p",{className:"text-gray-900",children:t.selectedWaiver.name})]}),r.jsx("p",{className:"text-sm text-gray-600",children:t.selectedWaiver.description}),r.jsxs(De,{className:"mt-2 bg-green-100 text-green-800 border-green-300",children:[r.jsx(Sr,{className:"w-3 h-3 mr-1"}),"Active"]})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:n,children:r.jsx(Is,{className:"w-4 h-4"})})]})})]}):r.jsxs("div",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 text-center",children:[r.jsx(DS,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"No waiver selected"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a waiver from below"})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Select from existing waivers"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Click on a waiver to assign it to this game"}),r.jsx("div",{className:"grid gap-2",children:_Ke.map(a=>{const i=t.selectedWaiver?.id===a.id;return r.jsx("div",{className:`p-3 border-2 rounded-lg cursor-pointer transition-all ${i?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,onClick:()=>s(a),children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-gray-900",children:a.name}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:a.description})]}),i&&r.jsx(Sr,{className:"w-5 h-5 text-blue-600 flex-shrink-0"})]})},a.id)})})]}),r.jsx("div",{className:"pt-2 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(Ws,{className:"w-3 h-3"}),"Need a different waiver? Create one in the"," ",r.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Waivers"})," section first."]})})]})]})}function MKe({gameData:t,updateGameData:e}){const[s,n]=j.useState("image"),a=j.useRef(null),i=j.useRef(null),o=j.useRef(null),[l,c]=j.useState(""),d=b=>new Promise((w,N)=>{const C=new FileReader;C.onload=()=>w(C.result),C.onerror=S=>N(S),C.readAsDataURL(b)}),u=async(b,w=1280,N=.85)=>new Promise((C,S)=>{const A=new Image;A.onload=()=>{const k=Math.min(1,w/A.width),E=document.createElement("canvas");E.width=Math.round(A.width*k),E.height=Math.round(A.height*k);const O=E.getContext("2d");if(!O)return S(new Error("Canvas context not available"));O.drawImage(A,0,0,E.width,E.height);const $=E.toDataURL("image/jpeg",N);C($)},A.onerror=k=>S(k),A.src=b}),h=async b=>{const w=b.target.files?.[0];if(w){if(!w.type.startsWith("image/")){re.error("Please select a valid image file");return}try{const N=await d(w),C=await u(N);e("coverImage",C),re.success("Cover image uploaded")}catch(N){console.error(N),re.error("Failed to process image")}finally{a.current&&(a.current.value="")}}},m=async b=>{const w=Array.from(b.target.files||[]);if(w.length)try{const N=[];for(const C of w){if(!C.type.startsWith("image/"))continue;const S=await d(C),A=await u(S);N.push(A)}N.length?(e("galleryImages",[...t.galleryImages,...N]),re.success(`${N.length} image(s) added to gallery`)):re.error("No valid images selected")}catch(N){console.error(N),re.error("Failed to process gallery images")}finally{i.current&&(i.current.value="")}},f=async b=>{const w=b.target.files?.[0];if(!w)return;if(!w.type.startsWith("video/")){re.error("Please select a valid video file");return}const N=8;if(w.size>N*1024*1024){re.error(`Video too large (> ${N}MB). Please use a URL instead.`),o.current&&(o.current.value="");return}try{const C=await d(w);e("videos",[...t.videos,C]),re.success("Video uploaded")}catch(C){console.error(C),re.error("Failed to upload video")}finally{o.current&&(o.current.value="")}},v=()=>{const b=l.trim();if(!b){re.error("Please enter a video URL");return}e("videos",[...t.videos,b]),c(""),re.success("Video URL added")},x=b=>{e("galleryImages",t.galleryImages.filter((w,N)=>N!==b))},g=b=>{e("videos",t.videos.filter((w,N)=>N!==b))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Bc,{className:"w-5 h-5"}),"Cover Image"]}),r.jsxs(Ft,{children:["Upload a high-quality cover image (required) ",r.jsx("span",{className:"text-red-500",children:"*"})]})]}),r.jsx(_e,{children:t.coverImage?r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:t.coverImage,alt:"Cover",className:"w-full h-64 object-cover rounded-lg"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-lg flex items-center justify-center",children:r.jsxs(W,{variant:"destructive",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>e("coverImage",""),children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Remove"]})})]}):r.jsxs("div",{onClick:()=>a.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",children:[r.jsx(ll,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload cover image"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Recommended: 1280px+ width, ~23MB"}),r.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:h,className:"hidden"})]})})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Bc,{className:"w-5 h-5"}),"Gallery Images"]}),r.jsx(Ft,{children:"Add more images showcasing your game (optional)"})]}),r.jsx(_e,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[t.galleryImages.map((b,w)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:b,alt:`Gallery ${w+1}`,className:"w-full h-32 object-cover rounded-lg"}),r.jsx("button",{onClick:()=>x(w),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Is,{className:"w-4 h-4"})})]},w)),r.jsxs("div",{onClick:()=>i.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg h-32 flex items-center justify-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Ts,{className:"w-8 h-8 text-gray-400 mx-auto mb-1"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Add Image"})]}),r.jsx("input",{ref:i,type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden"})]})]})})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(pM,{className:"w-5 h-5"}),"Videos"]}),r.jsx(Ft,{children:"Add promotional or gameplay videos (optional)"})]}),r.jsxs(_e,{children:[t.videos.length>0?r.jsx("div",{className:"space-y-3 mb-4",children:t.videos.map((b,w)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pM,{className:"w-5 h-5 text-blue-600"}),r.jsxs("span",{className:"text-sm text-gray-700 truncate max-w-[220px]",children:["Video ",w+1]})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>g(w),children:r.jsx(Is,{className:"w-4 h-4"})})]},w))}):null,r.jsxs("div",{className:"space-y-3",children:[r.jsxs(W,{variant:"outline",onClick:()=>o.current?.click(),className:"w-full",children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Upload Video (8MB)"]}),r.jsx("input",{ref:o,type:"file",accept:"video/*",onChange:f,className:"hidden"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{value:l,onChange:b=>c(b.target.value),placeholder:"Paste video URL (YouTube, Vimeo, etc.)",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm"}),r.jsx(W,{variant:"secondary",onClick:v,children:"Add URL"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Supports MP4, MOV, AVI uploads (small files). Prefer URLs for large videos."})]})]})]})]})}function LKe({gameData:t,updateGameData:e}){const[s,n]=j.useState(void 0),[a,i]=j.useState({startTime:"10:00",endTime:"22:00"}),[o,l]=j.useState(void 0),[c,d]=j.useState({startTime:"",endTime:"",blockFullDay:!0}),u=b=>{const w=t.operatingDays.includes(b)?t.operatingDays.filter(N=>N!==b):[...t.operatingDays,b];e("operatingDays",w),t.operatingDays.includes(b)?e("customHours",{...t.customHours,[b]:{...t.customHours[b],enabled:!1}}):e("customHours",{...t.customHours,[b]:{...t.customHours[b],enabled:!0}})},h=(b,w,N)=>{e("customHours",{...t.customHours,[b]:{...t.customHours[b],[w]:N}})},m=()=>{if(!s){re.error("Please select a date");return}const b=s.toISOString().split("T")[0];if(t.customDates.some(N=>N.date===b)){re.error("This date is already added");return}const w={id:`custom-${Date.now()}`,date:b,startTime:a.startTime,endTime:a.endTime};e("customDates",[...t.customDates,w]),n(void 0),re.success("Custom date added")},f=b=>{e("customDates",t.customDates.filter(w=>w.id!==b)),re.success("Custom date removed")},v=()=>{if(!o){re.error("Please select a date to block");return}const b=o.toISOString().split("T")[0];if(t.blockedDates.find(C=>typeof C=="string"?C===b:C.date===b&&C.startTime===c.startTime&&C.endTime===c.endTime)){re.error("This date/time is already blocked");return}const N=c.blockFullDay?b:{date:b,startTime:c.startTime,endTime:c.endTime,reason:"Time block"};e("blockedDates",[...t.blockedDates,N]),l(void 0),d({startTime:"",endTime:"",blockFullDay:!0}),re.success(c.blockFullDay?"Date blocked":"Time block added")},x=b=>{e("blockedDates",t.blockedDates.filter((w,N)=>N!==b)),re.success("Block removed")},g=b=>new Date(b+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(qs,{className:"w-5 h-5"}),"Operating Days"]}),r.jsx(Ft,{children:"Select the days when this game is available"})]}),r.jsx(_e,{children:r.jsx("div",{className:"grid grid-cols-7 gap-2",children:bE.map(b=>r.jsx("button",{onClick:()=>u(b),className:`p-3 rounded-lg border-2 transition-all ${t.operatingDays.includes(b)?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300"}`,children:r.jsx("div",{className:"text-xs font-medium",children:b.slice(0,3)})},b))})})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5"}),"Operating Hours"]}),r.jsx(Ft,{children:"Set the start and end times for bookings"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Custom Hours per Day"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Set different hours for each day"})]}),r.jsx(Rt,{checked:t.customHoursEnabled,onCheckedChange:b=>{if(e("customHoursEnabled",b),!b){const w={};bE.forEach(N=>{w[N]={enabled:t.operatingDays.includes(N),startTime:t.startTime,endTime:t.endTime}}),e("customHours",w)}}})]}),!t.customHoursEnabled&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"startTime",children:"Start Time"}),r.jsx(de,{id:"startTime",type:"time",value:t.startTime,onChange:b=>e("startTime",b.target.value),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"endTime",children:"End Time"}),r.jsx(de,{id:"endTime",type:"time",value:t.endTime,onChange:b=>e("endTime",b.target.value),className:"mt-1"})]})]}),t.customHoursEnabled&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{children:"Hours for each day"}),bE.map(b=>{const w=t.operatingDays.includes(b);return r.jsx("div",{className:`p-3 border rounded-lg transition-all ${w?"border-gray-200 bg-white":"border-gray-100 bg-gray-50 opacity-60"}`,children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 text-sm text-gray-700",children:b}),w?r.jsxs(r.Fragment,{children:[r.jsx(de,{type:"time",value:t.customHours[b]?.startTime||"10:00",onChange:N=>h(b,"startTime",N.target.value),className:"flex-1"}),r.jsx("span",{className:"text-gray-400",children:"to"}),r.jsx(de,{type:"time",value:t.customHours[b]?.endTime||"22:00",onChange:N=>h(b,"endTime",N.target.value),className:"flex-1"})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"Not operating"})]})},b)})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"slotInterval",children:"Time Slot Interval (minutes)"}),r.jsxs(sr,{value:t.slotInterval.toString(),onValueChange:b=>e("slotInterval",parseInt(b)),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"15",children:"15 minutes"}),r.jsx(Ae,{value:"30",children:"30 minutes"}),r.jsx(Ae,{value:"60",children:"1 hour"}),r.jsx(Ae,{value:"90",children:"1.5 hours"})]})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"advanceBooking",children:"Advance Booking (days)"}),r.jsx(de,{id:"advanceBooking",type:"number",min:"1",max:"365",value:t.advanceBooking,onChange:b=>e("advanceBooking",parseInt(b.target.value)),className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"How far in advance customers can book"})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Ed,{className:"w-5 h-5"}),"Custom Dates"]}),r.jsx(Ft,{children:"Add specific dates with custom hours (overrides regular schedule)"})]}),r.jsxs(_e,{className:"space-y-4",children:[t.customDates.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Active custom dates"}),t.customDates.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-blue-200 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-900",children:g(b.date)}),r.jsxs("p",{className:"text-xs text-gray-600",children:[b.startTime," - ",b.endTime]})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f(b.id),children:r.jsx(ks,{className:"w-4 h-4 text-red-600"})})]},b.id)),r.jsx(Ze,{})]}),r.jsxs("div",{className:"space-y-3 p-4 border-2 border-dashed border-gray-300 rounded-lg",children:[r.jsx(X,{children:"Add a custom date"}),r.jsxs(D4,{children:[r.jsx(R4,{asChild:!0,children:r.jsxs(W,{variant:"outline",className:"w-full justify-start text-left",children:[r.jsx(Ed,{className:"mr-2 w-4 h-4"}),s?g(s.toISOString().split("T")[0]):"Select a date"]})}),r.jsx(M4,{className:"w-auto p-0",align:"start",children:r.jsx(Ah,{mode:"single",selected:s,onSelect:n,disabled:b=>b<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Start Time"}),r.jsx(de,{type:"time",value:a.startTime,onChange:b=>i({...a,startTime:b.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"End Time"}),r.jsx(de,{type:"time",value:a.endTime,onChange:b=>i({...a,endTime:b.target.value}),className:"mt-1"})]})]}),r.jsxs(W,{onClick:m,className:"w-full",disabled:!s,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Custom Date"]})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-5 h-5"}),"Blocked Dates"]}),r.jsx(Ft,{children:"Mark specific dates as unavailable (holidays, maintenance, etc.)"})]}),r.jsxs(_e,{className:"space-y-4",children:[t.blockedDates.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Blocked dates & times"}),t.blockedDates.map((b,w)=>{const N=typeof b=="string",C=N?b:b.date,S=N?"Full day":`${b.startTime} - ${b.endTime}`;return r.jsxs("div",{className:"flex items-center justify-between p-3 border border-red-200 bg-red-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-red-600"}),r.jsx("p",{className:"text-sm text-gray-900",children:g(C)})]}),r.jsx("p",{className:"text-xs text-gray-600 ml-6",children:S})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>x(w),children:r.jsx(ks,{className:"w-4 h-4 text-red-600"})})]},w)}),r.jsx(Ze,{})]}),r.jsxs("div",{className:"space-y-3 p-4 border-2 border-dashed border-gray-300 rounded-lg",children:[r.jsx(X,{children:"Block a date or time range"}),r.jsxs(D4,{children:[r.jsx(R4,{asChild:!0,children:r.jsxs(W,{variant:"outline",className:"w-full justify-start text-left",children:[r.jsx(Ed,{className:"mr-2 w-4 h-4"}),o?g(o.toISOString().split("T")[0]):"Select a date to block"]})}),r.jsx(M4,{className:"w-auto p-0",align:"start",children:r.jsx(Ah,{mode:"single",selected:o,onSelect:l,disabled:b=>b<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-sm",children:"Block specific time range"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Or block the entire day"})]}),r.jsx(Rt,{checked:!c.blockFullDay,onCheckedChange:b=>{d({...c,blockFullDay:!b,startTime:b?"09:00":"",endTime:b?"17:00":""})}})]}),!c.blockFullDay&&r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"Start Time"}),r.jsx(de,{type:"time",value:c.startTime,onChange:b=>d({...c,startTime:b.target.value}),className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-xs",children:"End Time"}),r.jsx(de,{type:"time",value:c.endTime,onChange:b=>d({...c,endTime:b.target.value}),className:"mt-1"})]})]}),r.jsxs(W,{onClick:v,variant:"outline",className:"w-full",disabled:!o||!c.blockFullDay&&(!c.startTime||!c.endTime),children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),c.blockFullDay?"Block Full Day":"Block Time Range"]})]})]})]})]})}function FKe({gameData:t,updateGameData:e,theme:s,embedContext:n}){const[a,i]=j.useState(!1),[o,l]=j.useState(!1);ce.useEffect(()=>{i(!1),l(!1)},[t.selectedWidget]);const c=(n?.embedKey??"").trim(),d=c.length>0,u=d?c:"demo_preview",f=(n?.baseUrl||(typeof window<"u"?window.location.origin:"https://bookingtms.com")).trim().replace(/\/+$/g,"")||"",v=(n?.primaryColor||"#2563eb").replace("#",""),x=s==="dark"?"dark":"light",g=AKe(t.slug||t.name),[b,w]=j.useState(!d);ce.useEffect(()=>{w(!d)},[d]);const N=s==="calendar"?[{id:"calendar-single-event",name:"Calendar Single Event / Room Booking Page Widget",description:"Full-page calendar view with time slots and booking details. Perfect for single events or room bookings.",icon:Ed,recommended:!0,default:!0}]:[{id:"calendar-single-event",name:"Calendar Single Event / Room Booking Page Widget",description:"Full-page calendar view with time slots and booking details. Perfect for single events or room bookings.",icon:Ed,recommended:!0},{id:"list-widget",name:"List Widget",description:"Simple list view showing available time slots. Clean and straightforward booking experience.",icon:Jn},{id:"multi-step-widget",name:"Multi-Step Widget",description:"Guided step-by-step booking process. Ideal for complex bookings with multiple options.",icon:_a},{id:"quick-book-widget",name:"Quick Book Widget",description:"Fast one-click booking experience. Perfect for simple, time-sensitive bookings.",icon:jr},{id:"calendar-widget",name:"Calendar Widget",description:"Month/week calendar view with availability. Great for recurring events and date selection.",icon:qs},{id:"farebook-widget",name:"FareBook Widget",description:"FareHarbor-inspired design with modern aesthetics. Professional booking experience.",icon:Es}],C=I=>{switch(I){case"calendar-single-event":return"singlegame";case"list-widget":return"bookgo";case"multi-step-widget":return"multistep";case"quick-book-widget":return"quick";case"calendar-widget":return"calendar";case"farebook-widget":return"farebook";default:return"farebook"}},S=()=>{const I=C(t.selectedWidget),L=new URLSearchParams({widget:I,color:v,key:u,theme:x});return I==="singlegame"&&(t.name&&L.set("gameName",t.name),t.description&&L.set("gameDescription",t.description),t.adultPrice&&L.set("gamePrice",String(t.adultPrice)),g&&L.set("gameSlug",g)),f?`${f}/?${L.toString()}`:`/?${L.toString()}`},A=()=>{const I=S(),L=C(t.selectedWidget)==="singlegame"?1200:800;return`<!-- BookingTMS Widget Embed -->
<iframe
  src="${I}"
  width="100%"
  height="${L}"
  frameborder="0"
  allow="payment; camera"
  allowfullscreen
  style="border: none; border-radius: 12px;"
  title="${t.name||"Booking Widget"}"
></iframe>`},k=()=>{const I=S(),L=C(t.selectedWidget)==="singlegame"?1200:800;return`export function BookingWidgetEmbed() {
  return (
    <iframe
      src="${I}"
      width="100%"
      height="${L}"
      style={{ border: 'none', borderRadius: 12 }}
      allow="payment; camera"
      allowFullScreen
      title="${t.name||"Booking Widget"}"
    />
  );
}`},E=()=>S(),O=async I=>{if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(I),!0}catch(L){console.warn("Clipboard API failed, trying fallback:",L)}try{const L=document.createElement("textarea");L.value=I,L.style.position="fixed",L.style.left="-999999px",L.style.top="-999999px",document.body.appendChild(L),L.focus(),L.select();const z=document.execCommand("copy");return document.body.removeChild(L),z}catch(L){return console.error("Fallback copy failed:",L),!1}},$=async()=>{await O(A())?(i(!0),re.success("Embed code copied to clipboard!"),setTimeout(()=>i(!1),2e3)):re.error("Failed to copy. Please copy manually.")},T=async()=>{await O(E())?(l(!0),re.success("Booking link copied to clipboard!"),setTimeout(()=>l(!1),2e3)):re.error("Failed to copy. Please copy manually.")};return r.jsxs("div",{className:"space-y-6",children:[b&&r.jsx(he,{className:"border-amber-200 bg-amber-50 dark:bg-amber-900/20 dark:border-amber-700",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-800 flex items-center justify-center flex-shrink-0",children:r.jsx(Ws,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),r.jsxs("div",{className:"space-y-1 text-amber-800 dark:text-amber-200",children:[r.jsx("p",{className:"text-sm font-semibold",children:"Embed key not configured"}),r.jsxs("p",{className:"text-sm",children:["This venue doesn't have a live embed key yet. The generated links will use a placeholder key",r.jsx("span",{className:"font-mono",children:" demo_preview"})," and won't load real data. Save the venue first to generate a working embed key."]})]})]})})}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Ed,{className:"w-5 h-5"}),"Choose Booking Widget"]}),r.jsx(Ft,{children:"Select the widget that will be used for bookings on your website"})]}),r.jsxs(_e,{className:"space-y-3",children:[N.map(I=>{const L=I.icon,z=t.selectedWidget===I.id;return r.jsx("div",{onClick:()=>e("selectedWidget",I.id),className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${z?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(L,{className:`w-4 h-4 ${z?"text-blue-600":"text-gray-600"}`}),r.jsx("p",{className:`text-sm ${z?"text-gray-900":"text-gray-700"}`,children:I.name}),I.default?r.jsx(De,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:"Default"}):I.recommended?r.jsx(De,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:"Recommended"}):null]}),r.jsx("p",{className:"text-xs text-gray-600",children:I.description})]}),z&&r.jsx(Sr,{className:"w-5 h-5 text-blue-600 flex-shrink-0"})]})},I.id)}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[r.jsx(Ws,{className:"w-3 h-3"}),"You can change the widget later in your game settings"]})})]})]}),r.jsx(he,{className:"bg-blue-50 border-blue-200",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(_a,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm text-blue-900 mb-1",children:"Current Configuration"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-xs text-blue-700",children:[r.jsx("span",{className:"opacity-70",children:"Game:"})," ",r.jsx("span",{className:"font-medium",children:t.name||"Untitled Game"})]}),r.jsxs("p",{className:"text-xs text-blue-700",children:[r.jsx("span",{className:"opacity-70",children:"Widget:"})," ",r.jsx("span",{className:"font-medium",children:N.find(I=>I.id===t.selectedWidget)?.name})]}),r.jsxs("p",{className:"text-xs text-blue-700",children:[r.jsx("span",{className:"opacity-70",children:"URL Slug:"})," ",r.jsx("span",{className:"font-mono",children:t.name.toLowerCase().replace(/\s+/g,"-")})]})]})]}),r.jsxs(De,{className:"bg-green-100 text-green-800 border-green-300 text-xs",children:[r.jsx(Sr,{className:"w-3 h-3 mr-1"}),"Ready"]})]})})}),r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Xe,{className:"text-lg",children:"Direct Booking Link"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Share this link directly with customers"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(De,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:N.find(I=>I.id===t.selectedWidget)?.name||"Selected Widget"}),r.jsx("span",{className:"text-xs text-gray-500",children:" Updates automatically"})]})]}),r.jsx(W,{onClick:T,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Copy Link"]})})]})}),r.jsxs(_e,{className:"space-y-3",children:[r.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg",children:r.jsx("code",{className:"text-sm text-blue-600 break-all",children:E()})}),r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx(Ws,{className:"w-3 h-3"}),r.jsx("span",{children:"This link updates when you change the widget selection above"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>window.open(E(),"_blank"),className:"text-xs",children:[r.jsx(tn,{className:"w-3 h-3 mr-1"}),"Test Link"]})]})]})]}),r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Xe,{className:"text-lg",children:"Embed Code for Your Website"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Copy and paste this code into your website"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Widget:"}),r.jsx(De,{className:"bg-blue-100 text-blue-800 border-blue-300 text-xs",children:t.selectedWidget}),r.jsx("span",{className:"text-xs text-gray-500",children:" Code updates live"})]})]}),r.jsx(W,{onClick:$,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:a?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),"Copy Code"]})})]})}),r.jsx(_e,{children:r.jsxs(wn,{defaultValue:"html",children:[r.jsxs(kn,{className:"w-full grid grid-cols-3 h-10",children:[r.jsx(Tt,{value:"html",children:"HTML"}),r.jsx(Tt,{value:"react",children:"React"}),r.jsx(Tt,{value:"wordpress",children:"WordPress"})]}),r.jsx(Bt,{value:"html",className:"mt-4",children:r.jsx(fa,{className:"h-[300px] w-full rounded-lg bg-gray-900 border border-gray-700 p-4",children:r.jsx("pre",{className:"text-sm text-green-400",children:r.jsx("code",{children:A()})})})}),r.jsx(Bt,{value:"react",className:"mt-4",children:r.jsx(fa,{className:"h-[300px] w-full rounded-lg bg-gray-900 border border-gray-700 p-4",children:r.jsx("pre",{className:"text-sm text-green-400",children:r.jsx("code",{children:k()})})})}),r.jsx(Bt,{value:"wordpress",className:"mt-4",children:r.jsx(fa,{className:"h-[300px] w-full rounded-lg bg-gray-900 border border-gray-700 p-4",children:r.jsx("pre",{className:"text-sm text-green-400",children:r.jsx("code",{children:`1. Login to WordPress Admin Panel
2. Go to Pages or Posts
3. Edit the page where you want the widget
4. Switch to HTML/Code Editor
5. Paste the following code:

${A()}

6. Update/Publish your page
7. Visit the page to see your booking widget

Alternative: Use a shortcode plugin
[bookingtms game="${t.name.toLowerCase().replace(/\s+/g,"-")}" widget="${t.selectedWidget}"]`})})})})]})})]}),r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsx(Xe,{className:"text-lg",children:"Installation Guide"})}),r.jsxs(_e,{children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:r.jsx("span",{className:"text-blue-600",children:"1"})}),r.jsx("h3",{className:"text-sm text-gray-900 mb-2",children:"Choose Widget"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Select the booking widget that best fits your website design and user flow"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:r.jsx("span",{className:"text-blue-600",children:"2"})}),r.jsx("h3",{className:"text-sm text-gray-900 mb-2",children:"Copy Code"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Copy the embed code or booking link depending on your needs"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:r.jsx("span",{className:"text-blue-600",children:"3"})}),r.jsx("h3",{className:"text-sm text-gray-900 mb-2",children:"Paste & Go Live"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Paste the code into your website and start accepting bookings immediately"})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm text-blue-900 mb-2",children:" Pro Tip"}),r.jsx("p",{className:"text-sm text-blue-700",children:"For the best experience, test your widget on a staging environment before going live. Need help? Contact our support team."})]})]})]})]})}function BKe({gameData:t}){const s=(()=>{const n=[],a=[];return(!t.name||t.name.trim()==="")&&n.push("Game name is required"),(!t.description||t.description.trim()==="")&&n.push("Description is required"),(!t.adultPrice||t.adultPrice<=0)&&n.push("Adult price must be greater than 0"),(!t.duration||t.duration<=0)&&n.push("Duration must be greater than 0"),(!t.minAdults||t.minAdults<=0)&&n.push("Minimum adults must be at least 1"),(!t.maxAdults||t.maxAdults<t.minAdults)&&n.push("Maximum adults must be greater than or equal to minimum"),(!t.stripeProductId||!t.stripePriceId)&&a.push("Payment settings not configured - Go to Step 6 to create or link a Stripe product for online payments"),t.coverImage||a.push("No cover image uploaded - using default placeholder"),(!t.minAge||t.minAge===0)&&a.push("Minimum age not set - defaulting to 0 (all ages)"),t.operatingDays.length===0&&n.push("At least one operating day must be selected"),t.selectedWidget||a.push("No widget selected - using default calendar widget"),t.galleryImages.length===0&&a.push("No gallery images - consider adding photos to showcase your game"),{errors:n,warnings:a,isValid:n.length===0}})();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Review Your Game"}),r.jsx(Ft,{children:"Double-check all information before publishing"})]}),r.jsxs(_e,{className:"space-y-6",children:[t.coverImage&&r.jsx("div",{children:r.jsx("img",{src:t.coverImage,alt:t.name,className:"w-full h-48 object-cover rounded-lg mb-4"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:t.name}),t.tagline&&r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.tagline}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(De,{children:t.category}),t.gameType&&r.jsx(De,{variant:"secondary",children:t.gameType})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Capacity"}),r.jsxs("p",{className:"text-gray-900",children:[t.minAdults,"-",t.maxAdults," adults",t.maxChildren>0&&`, up to ${t.maxChildren} children`]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Duration"}),r.jsxs("p",{className:"text-gray-900",children:[t.duration," minutes"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Difficulty"}),r.jsx("div",{className:"flex gap-0.5",children:Array.from({length:t.difficulty}).map((n,a)=>r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},a))})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Pricing"}),r.jsxs("p",{className:"text-gray-900",children:["$",t.adultPrice," (adult), $",t.childPrice," (child)"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Min Age"}),r.jsxs("p",{className:"text-gray-900",children:[t.minAge,"+"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Languages"}),r.jsx("p",{className:"text-gray-900",children:t.language.join(", ")})]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-700",children:t.description})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Operating Days"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.operatingDays.map(n=>r.jsx(De,{variant:"secondary",children:n},n))})]}),t.galleryImages.length>0&&r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Gallery (",t.galleryImages.length," images)"]}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.galleryImages.slice(0,4).map((n,a)=>r.jsx("img",{src:n,alt:`Gallery ${a+1}`,className:"w-full h-20 object-cover rounded"},a))})]}),t.videos.length>0&&r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Videos: ",t.videos.length," uploaded"]})})]})]}),s.errors.length>0?r.jsxs(r.Fragment,{children:[r.jsx(he,{className:"border-red-200 bg-red-50",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:r.jsx(Is,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-red-900 font-semibold mb-2",children:"Cannot publish - please complete the following:"}),r.jsx("ul",{className:"space-y-1",children:s.errors.map((n,a)=>r.jsxs("li",{className:"text-sm text-red-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-red-500 mt-0.5",children:""}),r.jsx("span",{children:n})]},a))})]})]})})}),r.jsx(he,{className:"border-blue-200 bg-blue-50",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:r.jsx(Jn,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-blue-900 font-semibold mb-3",children:"To-Do List:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:`w-4 h-4 mt-0.5 ${t.name?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:`text-sm ${t.name?"text-green-700 line-through":"text-blue-700"}`,children:"Set game name and description"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:`w-4 h-4 mt-0.5 ${t.adultPrice>0?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:`text-sm ${t.adultPrice>0?"text-green-700 line-through":"text-blue-700"}`,children:"Configure pricing in Step 2"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:`w-4 h-4 mt-0.5 ${t.duration>0?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:`text-sm ${t.duration>0?"text-green-700 line-through":"text-blue-700"}`,children:"Set game duration in Step 3"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:`w-4 h-4 mt-0.5 ${t.operatingDays?.length>0?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:`text-sm ${t.operatingDays?.length>0?"text-green-700 line-through":"text-blue-700"}`,children:"Select operating days in Step 5"})]}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:`w-4 h-4 mt-0.5 ${t.stripeProductId?"text-green-500":"text-gray-300"}`}),r.jsx("span",{className:`text-sm ${t.stripeProductId?"text-green-700 line-through":"text-blue-700"}`,children:"Configure payment settings in Step 6 (Recommended for online payments)"})]})]})]})]})})})]}):r.jsxs(r.Fragment,{children:[s.warnings.length>0&&r.jsx(he,{className:"border-amber-200 bg-amber-50",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:r.jsx(Ws,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-amber-900 mb-2",children:"Recommendations:"}),r.jsx("ul",{className:"space-y-1",children:s.warnings.map((n,a)=>r.jsxs("li",{className:"text-sm text-amber-700 flex items-start gap-2",children:[r.jsx("span",{className:"text-amber-500 mt-0.5",children:""}),r.jsx("span",{children:n})]},a))})]})]})})}),r.jsx(he,{className:"border-green-200 bg-green-50",children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0",children:r.jsx(Sr,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-green-900 mb-1",children:"Ready to publish!"}),r.jsx("p",{className:"text-sm text-green-700",children:"Your game will be immediately available for booking once published."})]})]})})})]})]})}function Tx(t){if(!t)return"00:00";const e=t.trim().replace(/\s+/g," ");if(e.match(/^\d{1,2}:\d{2}$/))return e;const s=e.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/i);if(!s)return"00:00";let[,n,a,i]=s,o=parseInt(n,10);return i.toUpperCase()==="PM"&&o!==12?o+=12:i.toUpperCase()==="AM"&&o===12&&(o=0),`${o.toString().padStart(2,"0")}:${a}`}function Aie(t,e){const s=t.toISOString().split("T")[0];return e.some(n=>n.date===s&&n.blockType==="full-day")}function UKe(t,e,s){const n=t.toISOString().split("T")[0],a=Tx(e);return s.some(i=>{if(i.date!==n)return!1;if(i.blockType==="full-day"||!i.startTime&&!i.endTime)return!0;if(i.startTime&&i.endTime){const o=Tx(i.startTime),l=Tx(i.endTime);return a>=o&&a<=l}return!1})}function K8(t,e){if(!e||e.length===0)return null;const s=t.toISOString().split("T")[0];return e.find(a=>a.date===s)||null}function Eie(t,e,s){if(K8(t,s)||!e||e.length===0)return!0;const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()];return e.some(i=>i.toLowerCase()===a.toLowerCase()||i.toLowerCase()===a.substring(0,3).toLowerCase())}function zKe(t,e,s=[],n=[],a=[]){if(Aie(t,s))return[];const i=K8(t,a);if(!Eie(t,e.operatingDays,a))return[];{const N=new Date;N.setHours(0,0,0,0);const C=new Date(N);if(C.setDate(C.getDate()+e.advanceBooking),t>C)return[]}const o=Tx(i?i.startTime:e.startTime||"10:00"),l=Tx(i?i.endTime:e.endTime||"22:00"),c=e.duration||90,d=e.slotInterval,u=Math.max(d,c),[h,m]=o.split(":").map(Number),[f,v]=l.split(":").map(Number),x=[],g=t.toISOString().split("T")[0];let b=h,w=m;for(;b<f||b===f&&w<v;){const N=`${b.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`,C=b===0?12:b>12?b-12:b,S=b>=12?"PM":"AM",A=`${C}:${w.toString().padStart(2,"0")} ${S}`,k=n.some(O=>O.date===g&&O.time===N),E=UKe(t,A,s);x.push({time:A,available:!k&&!E,spots:k||E?0:8,reason:E?"Time slot blocked":k?"Fully booked":void 0}),w+=u,w>=60&&(b+=Math.floor(w/60),w=w%60)}return x}var VKe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],WKe=VKe.reduce((t,e)=>{const s=Wv(`Primitive.${e}`),n=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),qKe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HKe="VisuallyHidden",Pie=j.forwardRef((t,e)=>r.jsx(WKe.span,{...t,ref:e,style:{...qKe,...t.style}}));Pie.displayName=HKe;var GKe=Pie;const lg=j.forwardRef((t,e)=>r.jsx(GKe,{ref:e,...t}));lg.displayName="VisuallyHidden";var b3="Collapsible",[YKe,Tie]=fl(b3),[KKe,X8]=YKe(b3),Oie=j.forwardRef((t,e)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=t,[c,d]=qc({prop:n,defaultProp:a??!1,onChange:o,caller:b3});return r.jsx(KKe,{scope:s,disabled:i,contentId:Uc(),open:c,onOpenToggle:j.useCallback(()=>d(u=>!u),[d]),children:r.jsx(Jr.div,{"data-state":Z8(c),"data-disabled":i?"":void 0,...l,ref:e})})});Oie.displayName=b3;var Iie="CollapsibleTrigger",$ie=j.forwardRef((t,e)=>{const{__scopeCollapsible:s,...n}=t,a=X8(Iie,s);return r.jsx(Jr.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Z8(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:e,onClick:ur(t.onClick,a.onOpenToggle)})});$ie.displayName=Iie;var Q8="CollapsibleContent",Die=j.forwardRef((t,e)=>{const{forceMount:s,...n}=t,a=X8(Q8,t.__scopeCollapsible);return r.jsx(Uo,{present:s||a.open,children:({present:i})=>r.jsx(XKe,{...n,ref:e,present:i})})});Die.displayName=Q8;var XKe=j.forwardRef((t,e)=>{const{__scopeCollapsible:s,present:n,children:a,...i}=t,o=X8(Q8,s),[l,c]=j.useState(n),d=j.useRef(null),u=bs(e,d),h=j.useRef(0),m=h.current,f=j.useRef(0),v=f.current,x=o.open||l,g=j.useRef(x),b=j.useRef(void 0);return j.useEffect(()=>{const w=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(w)},[]),Ai(()=>{const w=d.current;if(w){b.current=b.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const N=w.getBoundingClientRect();h.current=N.height,f.current=N.width,g.current||(w.style.transitionDuration=b.current.transitionDuration,w.style.animationName=b.current.animationName),c(n)}},[o.open,n]),r.jsx(Jr.div,{"data-state":Z8(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:u,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:x&&a})});function Z8(t){return t?"open":"closed"}var QKe=Oie,ZKe=$ie,JKe=Die,Bu="Accordion",eXe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[J8,tXe,rXe]=fw(Bu),[w3]=fl(Bu,[rXe,Tie]),eD=Tie(),Rie=ce.forwardRef((t,e)=>{const{type:s,...n}=t,a=n,i=n;return r.jsx(J8.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?r.jsx(iXe,{...i,ref:e}):r.jsx(aXe,{...a,ref:e})})});Rie.displayName=Bu;var[Mie,sXe]=w3(Bu),[Lie,nXe]=w3(Bu,{collapsible:!1}),aXe=ce.forwardRef((t,e)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=t,[l,c]=qc({prop:s,defaultProp:n??"",onChange:a,caller:Bu});return r.jsx(Mie,{scope:t.__scopeAccordion,value:ce.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:ce.useCallback(()=>i&&c(""),[i,c]),children:r.jsx(Lie,{scope:t.__scopeAccordion,collapsible:i,children:r.jsx(Fie,{...o,ref:e})})})}),iXe=ce.forwardRef((t,e)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...i}=t,[o,l]=qc({prop:s,defaultProp:n??[],onChange:a,caller:Bu}),c=ce.useCallback(u=>l((h=[])=>[...h,u]),[l]),d=ce.useCallback(u=>l((h=[])=>h.filter(m=>m!==u)),[l]);return r.jsx(Mie,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:r.jsx(Lie,{scope:t.__scopeAccordion,collapsible:!0,children:r.jsx(Fie,{...i,ref:e})})})}),[oXe,j3]=w3(Bu),Fie=ce.forwardRef((t,e)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:i="vertical",...o}=t,l=ce.useRef(null),c=bs(l,e),d=tXe(s),h=mg(a)==="ltr",m=ur(t.onKeyDown,f=>{if(!eXe.includes(f.key))return;const v=f.target,x=d().filter(E=>!E.ref.current?.disabled),g=x.findIndex(E=>E.ref.current===v),b=x.length;if(g===-1)return;f.preventDefault();let w=g;const N=0,C=b-1,S=()=>{w=g+1,w>C&&(w=N)},A=()=>{w=g-1,w<N&&(w=C)};switch(f.key){case"Home":w=N;break;case"End":w=C;break;case"ArrowRight":i==="horizontal"&&(h?S():A());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(h?A():S());break;case"ArrowUp":i==="vertical"&&A();break}const k=w%b;x[k].ref.current?.focus()});return r.jsx(oXe,{scope:s,disabled:n,direction:a,orientation:i,children:r.jsx(J8.Slot,{scope:s,children:r.jsx(Jr.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:m})})})}),q4="AccordionItem",[lXe,tD]=w3(q4),Bie=ce.forwardRef((t,e)=>{const{__scopeAccordion:s,value:n,...a}=t,i=j3(q4,s),o=sXe(q4,s),l=eD(s),c=Uc(),d=n&&o.value.includes(n)||!1,u=i.disabled||t.disabled;return r.jsx(lXe,{scope:s,open:d,disabled:u,triggerId:c,children:r.jsx(QKe,{"data-orientation":i.orientation,"data-state":Hie(d),...l,...a,ref:e,disabled:u,open:d,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});Bie.displayName=q4;var Uie="AccordionHeader",zie=ce.forwardRef((t,e)=>{const{__scopeAccordion:s,...n}=t,a=j3(Bu,s),i=tD(Uie,s);return r.jsx(Jr.h3,{"data-orientation":a.orientation,"data-state":Hie(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:e})});zie.displayName=Uie;var PO="AccordionTrigger",Vie=ce.forwardRef((t,e)=>{const{__scopeAccordion:s,...n}=t,a=j3(Bu,s),i=tD(PO,s),o=nXe(PO,s),l=eD(s);return r.jsx(J8.ItemSlot,{scope:s,children:r.jsx(ZKe,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:e})})});Vie.displayName=PO;var Wie="AccordionContent",qie=ce.forwardRef((t,e)=>{const{__scopeAccordion:s,...n}=t,a=j3(Bu,s),i=tD(Wie,s),o=eD(s);return r.jsx(JKe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});qie.displayName=Wie;function Hie(t){return t?"open":"closed"}var cXe=Rie,dXe=Bie,uXe=zie,hXe=Vie,mXe=qie;function Gie({...t}){return r.jsx(cXe,{"data-slot":"accordion",...t})}function I1({className:t,...e}){return r.jsx(dXe,{"data-slot":"accordion-item",className:Ar("border-b last:border-b-0",t),...e})}function $1({className:t,children:e,...s}){return r.jsx(uXe,{className:"flex",children:r.jsxs(hXe,{"data-slot":"accordion-trigger",className:Ar("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...s,children:[e,r.jsx(Mc,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function D1({className:t,children:e,...s}){return r.jsx(mXe,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:r.jsx("div",{className:Ar("pt-0 pb-4",t),children:e})})}const fXe={SAVE10:{discount:10,type:"percentage"},SAVE20:{discount:20,type:"percentage"},FIRST:{discount:5,type:"fixed"},WELCOME:{discount:15,type:"percentage"},VIP:{discount:25,type:"percentage"}};function Ph({onApply:t,onRemove:e,appliedCode:s,appliedDiscount:n,appliedType:a,className:i=""}){const[o,l]=j.useState(""),[c,d]=j.useState(!1),u=()=>{if(!o.trim()){re.error("Please enter a promo code");return}d(!0),setTimeout(()=>{const m=o.toUpperCase(),f=fXe[m];f?(t(m,f.discount,f.type),re.success(`Promo code applied! ${f.discount}${f.type==="percentage"?"%":"$"} discount`),l("")):re.error("Invalid promo code"),d(!1)},500)},h=()=>{e&&(e(),re.info("Promo code removed"))};return s&&n?r.jsxs("div",{className:`flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg ${i}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dN,{className:"w-4 h-4 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-900",children:s}),r.jsx("p",{className:"text-xs text-green-600",children:a==="fixed"?`$${n} discount applied`:`${n}% discount applied`})]})]}),e&&r.jsx(W,{variant:"ghost",size:"sm",onClick:h,className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(Is,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:`space-y-2 ${i}`,children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(dN,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(de,{value:o,onChange:m=>l(m.target.value),onKeyPress:m=>m.key==="Enter"&&u(),placeholder:"Enter promo code",className:"pl-10 h-11",disabled:c})]}),r.jsx(W,{onClick:u,disabled:c||!o.trim(),className:"h-11 px-6",variant:"outline",children:c?"Applying...":"Apply"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Try: SAVE10, SAVE20, WELCOME, VIP, or FIRST"})]})}const pXe={GIFT50:{amount:50,balance:50},GIFT100:{amount:100,balance:100},HOLIDAY25:{amount:25,balance:25},BIRTHDAY75:{amount:75,balance:75},THANKYOU150:{amount:150,balance:150}};function Th({onApply:t,onRemove:e,appliedCode:s,appliedAmount:n,className:a=""}){const[i,o]=j.useState(""),[l,c]=j.useState(!1),d=()=>{if(!i.trim()){re.error("Please enter a gift card code");return}c(!0),setTimeout(()=>{const h=i.toUpperCase(),m=pXe[h];m?(t(h,m.balance),re.success(`Gift card applied! $${m.balance.toFixed(2)} available`),o("")):re.error("Invalid gift card code"),c(!1)},500)},u=()=>{e&&(e(),re.info("Gift card removed"))};return s&&n?r.jsxs("div",{className:`flex items-center justify-between p-3 bg-purple-50 border border-purple-200 rounded-lg ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"w-4 h-4 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-900",children:s}),r.jsxs("p",{className:"text-xs text-purple-600",children:["$",n.toFixed(2)," gift card balance"]})]})]}),e&&r.jsx(W,{variant:"ghost",size:"sm",onClick:u,className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(Is,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:`space-y-2 ${a}`,children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(de,{value:i,onChange:h=>o(h.target.value),onKeyPress:h=>h.key==="Enter"&&d(),placeholder:"Enter gift card code",className:"pl-10 h-11",disabled:l})]}),r.jsx(W,{onClick:d,disabled:l||!i.trim(),className:"h-11 px-6",variant:"outline",children:l?"Applying...":"Apply"})]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Try: GIFT50, GIFT100, HOLIDAY25, BIRTHDAY75, or THANKYOU150"})]})}class xXe{static supabaseUrl=void 0;static supabaseAnonKey=void 0;static async createPaymentIntent(e){try{const s=await fetch(`${this.supabaseUrl}/functions/v1/create-payment-intent`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.supabaseAnonKey}`},body:JSON.stringify({bookingId:e.bookingId,amount:e.amount,currency:e.currency||"usd"})}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to create payment intent");return n}catch(s){throw console.error("Error creating payment intent:",s),s}}static async getPaymentByBooking(e){const{data:s,error:n}=await pt.from("payments").select("*").eq("booking_id",e).order("created_at",{ascending:!1}).limit(1).single();return n?(console.error("Error fetching payment:",n),null):s}static async getCustomerPayments(e){const{data:s,error:n}=await pt.from("payments").select(`
        *,
        booking:bookings(
          *,
          game:games(name, description)
        )
      `).eq("customer_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching customer payments:",n),[]):s}static async getPaymentStatus(e){const{data:s,error:n}=await pt.from("payments").select("status, paid_at").eq("stripe_payment_intent_id",e).single();return n?(console.error("Error fetching payment status:",n),null):s}static async requestRefund(e,s,n){try{const a=await fetch(`${this.supabaseUrl}/functions/v1/create-refund`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.supabaseAnonKey}`},body:JSON.stringify({paymentId:e,amount:s,reason:n||"requested_by_customer"})}),i=await a.json();if(!a.ok)throw new Error(i.error||"Failed to process refund");return i}catch(a){throw console.error("Error requesting refund:",a),a}}static async getPaymentRefunds(e){const{data:s,error:n}=await pt.from("refunds").select("*").eq("payment_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching refunds:",n),[]):s}static formatAmount(e,s="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e)}static getStatusColor(e){return{succeeded:"green",paid:"green",pending:"yellow",processing:"blue",failed:"red",canceled:"gray",refunded:"orange",partially_refunded:"orange"}[e]||"gray"}static getStatusLabel(e){return{succeeded:"Paid",paid:"Paid",pending:"Pending",processing:"Processing",failed:"Failed",canceled:"Canceled",refunded:"Refunded",partially_refunded:"Partially Refunded"}[e]||e}}class gXe{static async createBookingWithPayment(e){try{const s=await this.findOrCreateCustomer(e.customer),n=await this.createBooking({venueId:e.venueId,gameId:e.gameId,customerId:s.id,bookingDate:e.bookingDate,startTime:e.startTime,endTime:e.endTime,partySize:e.partySize,totalPrice:e.totalPrice,status:"pending",paymentStatus:"pending"}),a=await xXe.createPaymentIntent({bookingId:n.id,amount:e.totalPrice,currency:"usd"});return{bookingId:n.id,clientSecret:a.clientSecret,amount:e.totalPrice,currency:"USD"}}catch(s){throw console.error("Error creating booking with payment:",s),s}}static async findOrCreateCustomer(e){const{data:s}=await pt.from("customers").select("*").eq("email",e.email).single();if(s)return s;const{data:n,error:a}=await pt.from("customers").insert({first_name:e.firstName,last_name:e.lastName,email:e.email,phone:e.phone,status:"active"}).select().single();if(a)throw console.error("Error creating customer:",a),a;return n}static async createBooking(e){const{data:s,error:n}=await pt.from("bookings").insert({venue_id:e.venueId,game_id:e.gameId,customer_id:e.customerId,booking_date:e.bookingDate,start_time:e.startTime,end_time:e.endTime,party_size:e.partySize,total_price:e.totalPrice,status:e.status,payment_status:e.paymentStatus,payment_amount:e.totalPrice,payment_currency:"USD"}).select().single();if(n)throw console.error("Error creating booking:",n),n;return s}static async getBooking(e){const{data:s,error:n}=await pt.from("bookings").select(`
        *,
        venue:venues(*),
        game:games(*),
        customer:customers(*),
        payment:payments(*)
      `).eq("id",e).single();if(n)throw console.error("Error fetching booking:",n),n;return s}static async getCustomerBookings(e){const{data:s,error:n}=await pt.from("bookings").select(`
        *,
        venue:venues(name),
        game:games(name, description),
        payment:payments(status, amount)
      `).eq("customer_id",e).order("booking_date",{ascending:!1});return n?(console.error("Error fetching customer bookings:",n),[]):s}static async cancelBooking(e,s){const{data:n,error:a}=await pt.from("bookings").update({status:"canceled",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Error canceling booking:",a),a;return n}static async updateBookingStatus(e,s,n){const a={status:s,updated_at:new Date().toISOString()};n&&(a.payment_status=n);const{data:i,error:o}=await pt.from("bookings").update(a).eq("id",e).select().single();if(o)throw console.error("Error updating booking status:",o),o;return i}}class xG{static async createCheckoutSession(e){try{const{data:s,error:n}=await pt.functions.invoke("create-checkout-session",{body:e});if(n)throw console.error("Error creating checkout session:",n),new Error(n.message||"Failed to create checkout session");if(!s||!s.url)throw new Error("Invalid response from checkout session creation");return s}catch(s){throw console.error("Checkout session creation failed:",s),new Error(s.message||"Failed to create checkout session")}}static async createPaymentLink(e){try{const{data:s,error:n}=await pt.functions.invoke("create-payment-link",{body:e});if(n)throw console.error("Error creating payment link:",n),new Error(n.message||"Failed to create payment link");if(!s||!s.url)throw new Error("Invalid response from payment link creation");return s}catch(s){throw console.error("Payment link creation failed:",s),new Error(s.message||"Failed to create payment link")}}static async createBookingWithCheckout(e){try{const{data:s,error:n}=await pt.from("bookings").insert({venue_id:e.venueId,game_id:e.gameId,booking_date:e.bookingDate,start_time:e.startTime,end_time:e.endTime,party_size:e.partySize,customer_email:e.customer.email,customer_name:`${e.customer.firstName} ${e.customer.lastName}`,customer_phone:e.customer.phone,total_price:e.totalPrice,status:"pending",payment_status:"pending"}).select().single();if(n)throw n;const a=await this.createCheckoutSession({priceId:e.priceId,quantity:e.partySize,customerEmail:e.customer.email,customerName:`${e.customer.firstName} ${e.customer.lastName}`,successUrl:e.successUrl,cancelUrl:e.cancelUrl,metadata:{booking_id:s.id,game_id:e.gameId,venue_id:e.venueId,party_size:e.partySize.toString()}});return await pt.from("bookings").update({stripe_session_id:a.sessionId}).eq("id",s.id),{booking:s,checkoutUrl:a.url,sessionId:a.sessionId}}catch(s){throw console.error("Error creating booking with checkout:",s),new Error(s.message||"Failed to create booking")}}static async createBookingWithPaymentLink(e){try{const{data:s,error:n}=await pt.from("bookings").insert({venue_id:e.venueId,game_id:e.gameId,booking_date:e.bookingDate,start_time:e.startTime,end_time:e.endTime,party_size:e.partySize,customer_email:e.customer.email,customer_name:`${e.customer.firstName} ${e.customer.lastName}`,customer_phone:e.customer.phone,total_price:e.totalPrice,status:"pending",payment_status:"pending"}).select().single();if(n)throw n;const a=await this.createPaymentLink({priceId:e.priceId,quantity:e.partySize,metadata:{booking_id:s.id,game_id:e.gameId,venue_id:e.venueId,party_size:e.partySize.toString()}});return await pt.from("bookings").update({payment_link:a.url}).eq("id",s.id),{booking:s,paymentLink:a.url}}catch(s){throw console.error("Error creating booking with payment link:",s),new Error(s.message||"Failed to create booking")}}}function gG(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function vG(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(s),!0).forEach(function(n){Yie(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gG(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function rN(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rN=function(e){return typeof e}:rN=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rN(t)}function Yie(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function vXe(t,e){if(t==null)return{};var s={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function yXe(t,e){if(t==null)return{};var s=vXe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Kie(t,e){return bXe(t)||wXe(t,e)||jXe(t,e)||NXe()}function bXe(t){if(Array.isArray(t))return t}function wXe(t,e){var s=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(s!=null){var n=[],a=!0,i=!1,o,l;try{for(s=s.call(t);!(a=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&s.return!=null&&s.return()}finally{if(i)throw l}}return n}}function jXe(t,e){if(t){if(typeof t=="string")return yG(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return yG(t,e)}}function yG(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function NXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kl=function(e,s,n){var a=!!n,i=ce.useRef(n);ce.useEffect(function(){i.current=n},[n]),ce.useEffect(function(){if(!a||!e)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return e.on(s,o),function(){e.off(s,o)}},[a,s,e,i])},TO=function(e){var s=ce.useRef(e);return ce.useEffect(function(){s.current=e},[e]),s.current},Bv=function(e){return e!==null&&rN(e)==="object"},SXe=function(e){return Bv(e)&&typeof e.then=="function"},CXe=function(e){return Bv(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},bG="[object Object]",kXe=function t(e,s){if(!Bv(e)||!Bv(s))return e===s;var n=Array.isArray(e),a=Array.isArray(s);if(n!==a)return!1;var i=Object.prototype.toString.call(e)===bG,o=Object.prototype.toString.call(s)===bG;if(i!==o)return!1;if(!i&&!n)return e===s;var l=Object.keys(e),c=Object.keys(s);if(l.length!==c.length)return!1;for(var d={},u=0;u<l.length;u+=1)d[l[u]]=!0;for(var h=0;h<c.length;h+=1)d[c[h]]=!0;var m=Object.keys(d);if(m.length!==l.length)return!1;var f=e,v=s,x=function(b){return t(f[b],v[b])};return m.every(x)},Xie=function(e,s,n){return Bv(e)?Object.keys(e).reduce(function(a,i){var o=!Bv(s)||!kXe(e[i],s[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?vG(vG({},a||{}),{},Yie({},i,e[i])):a},null):null},Qie="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",wG=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qie;if(e===null||CXe(e))return e;throw new Error(s)},_Xe=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qie;if(SXe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return wG(a,s)})};var n=wG(e,s);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},AXe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},N3=ce.createContext(null);N3.displayName="ElementsContext";var Zie=function(e,s){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},Jie=function(e){var s=e.stripe,n=e.options,a=e.children,i=ce.useMemo(function(){return _Xe(s)},[s]),o=ce.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),l=Kie(o,2),c=l[0],d=l[1];ce.useEffect(function(){var m=!0,f=function(x){d(function(g){return g.stripe?g:{stripe:x,elements:x.elements(n)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(v){v&&m&&f(v)}):i.tag==="sync"&&!c.stripe&&f(i.stripe),function(){m=!1}},[i,c,n]);var u=TO(s);ce.useEffect(function(){u!==null&&u!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,s]);var h=TO(n);return ce.useEffect(function(){if(c.elements){var m=Xie(n,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,h,c.elements]),ce.useEffect(function(){AXe(c.stripe)},[c.stripe]),ce.createElement(N3.Provider,{value:c},a)};Jie.propTypes={stripe:ss.any,options:ss.object};var EXe=function(e){var s=ce.useContext(N3);return Zie(s,e)},PXe=function(){var e=EXe("calls useElements()"),s=e.elements;return s};ss.func.isRequired;var eoe=ce.createContext(null);eoe.displayName="CheckoutContext";ss.any,ss.shape({clientSecret:ss.oneOfType([ss.string,ss.instanceOf(Promise)]).isRequired,elementsOptions:ss.object}).isRequired;var OO=function(e){var s=ce.useContext(eoe),n=ce.useContext(N3);if(s){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return s}else return Zie(n,e)},TXe=["mode"],OXe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},hc=function(e,s){var n="".concat(OXe(e),"Element"),a=function(c){var d=c.id,u=c.className,h=c.options,m=h===void 0?{}:h,f=c.onBlur,v=c.onFocus,x=c.onReady,g=c.onChange,b=c.onEscape,w=c.onClick,N=c.onLoadError,C=c.onLoaderStart,S=c.onNetworksChange,A=c.onConfirm,k=c.onCancel,E=c.onShippingAddressChange,O=c.onShippingRateChange,$=c.onSavedPaymentMethodRemove,T=c.onSavedPaymentMethodUpdate,I=OO("mounts <".concat(n,">")),L="elements"in I?I.elements:null,z="checkoutState"in I?I.checkoutState:null,M=z?.type==="success"||z?.type==="loading"?z.sdk:null,V=ce.useState(null),B=Kie(V,2),F=B[0],J=B[1],ee=ce.useRef(null),q=ce.useRef(null);kl(F,"blur",f),kl(F,"focus",v),kl(F,"escape",b),kl(F,"click",w),kl(F,"loaderror",N),kl(F,"loaderstart",C),kl(F,"networkschange",S),kl(F,"confirm",A),kl(F,"cancel",k),kl(F,"shippingaddresschange",E),kl(F,"shippingratechange",O),kl(F,"savedpaymentmethodremove",$),kl(F,"savedpaymentmethodupdate",T),kl(F,"change",g);var U;x&&(e==="expressCheckout"?U=x:U=function(){x(F)}),kl(F,"ready",U),ce.useLayoutEffect(function(){if(ee.current===null&&q.current!==null&&(L||M)){var K=null;if(M)switch(e){case"payment":K=M.createPaymentElement(m);break;case"address":if("mode"in m){var se=m.mode,ne=yXe(m,TXe);if(se==="shipping")K=M.createShippingAddressElement(ne);else if(se==="billing")K=M.createBillingAddressElement(ne);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":K=M.createExpressCheckoutElement(m);break;case"currencySelector":K=M.createCurrencySelectorElement();break;case"taxId":K=M.createTaxIdElement(m);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else L&&(K=L.create(e,m));ee.current=K,J(K),K&&K.mount(q.current)}},[L,M,m]);var Z=TO(m);return ce.useEffect(function(){if(ee.current){var K=Xie(m,Z,["paymentRequest"]);K&&"update"in ee.current&&ee.current.update(K)}},[m,Z]),ce.useLayoutEffect(function(){return function(){if(ee.current&&typeof ee.current.destroy=="function")try{ee.current.destroy(),ee.current=null}catch{}}},[]),ce.createElement("div",{id:d,className:u,ref:q})},i=function(c){OO("mounts <".concat(n,">"));var d=c.id,u=c.className;return ce.createElement("div",{id:d,className:u})},o=s?i:a;return o.propTypes={id:ss.string,className:ss.string,onChange:ss.func,onBlur:ss.func,onFocus:ss.func,onReady:ss.func,onEscape:ss.func,onClick:ss.func,onLoadError:ss.func,onLoaderStart:ss.func,onNetworksChange:ss.func,onConfirm:ss.func,onCancel:ss.func,onShippingAddressChange:ss.func,onShippingRateChange:ss.func,onSavedPaymentMethodRemove:ss.func,onSavedPaymentMethodUpdate:ss.func,options:ss.object},o.displayName=n,o.__elementType=e,o},mc=typeof window>"u",IXe=ce.createContext(null);IXe.displayName="EmbeddedCheckoutProviderContext";var $Xe=function(){var e=OO("calls useStripe()"),s=e.stripe;return s};hc("auBankAccount",mc);hc("card",mc);hc("cardNumber",mc);hc("cardExpiry",mc);hc("cardCvc",mc);hc("iban",mc);var DXe=hc("payment",mc);hc("expressCheckout",mc);hc("paymentRequestButton",mc);hc("linkAuthentication",mc);hc("address",mc);hc("shippingAddress",mc);hc("paymentMethodMessaging",mc);hc("taxId",mc);var toe="clover",RXe=function(e){return e===3?"v3":e},roe="https://js.stripe.com",MXe="".concat(roe,"/").concat(toe,"/stripe.js"),LXe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,FXe=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var BXe=function(e){return LXe.test(e)||FXe.test(e)},UXe=function(){for(var e=document.querySelectorAll('script[src^="'.concat(roe,'"]')),s=0;s<e.length;s++){var n=e[s];if(BXe(n.src))return n}return null},jG=function(e){var s="",n=document.createElement("script");n.src="".concat(MXe).concat(s);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},zXe=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.3.0",startTime:s})},h1=null,Aj=null,Ej=null,VXe=function(e){return function(s){e(new Error("Failed to load Stripe.js",{cause:s}))}},WXe=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},qXe=function(e){return h1!==null?h1:(h1=new Promise(function(s,n){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var a=UXe();if(!(a&&e)){if(!a)a=jG(e);else if(a&&Ej!==null&&Aj!==null){var i;a.removeEventListener("load",Ej),a.removeEventListener("error",Aj),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=jG(e)}}Ej=WXe(s,n),Aj=VXe(n),a.addEventListener("load",Ej),a.addEventListener("error",Aj)}catch(o){n(o);return}}),h1.catch(function(s){return h1=null,Promise.reject(s)}))},HXe=function(e,s,n){if(e===null)return null;var a=s[0],i=a.match(/^pk_test/),o=RXe(e.version),l=toe;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.3.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,s);return zXe(c,n),c},m1,soe=!1,noe=function(){return m1||(m1=qXe(null).catch(function(e){return m1=null,Promise.reject(e)}),m1)};Promise.resolve().then(function(){return noe()}).catch(function(t){soe||console.warn(t)});var GXe=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];soe=!0;var a=Date.now();return noe().then(function(i){return HXe(i,s,a)})};function aoe(t){if(!t||t.trim().length===0)return{isValid:!1,error:"Email is required"};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()))return{isValid:!1,error:"Please enter a valid email address"};const s=t.trim().split("@");if(s.length!==2)return{isValid:!1,error:"Invalid email format"};const[n,a]=s;return n.length===0||n.length>64?{isValid:!1,error:"Email local part must be 1-64 characters"}:a.length===0||a.length>255?{isValid:!1,error:"Email domain must be 1-255 characters"}:{isValid:!0}}function ioe(t,e="Name"){if(!t||t.trim().length===0)return{isValid:!1,error:`${e} is required`};const s=t.trim();if(s.length<2)return{isValid:!1,error:`${e} must be at least 2 characters`};if(!/^[a-zA-Z\s'-]+$/.test(s))return{isValid:!1,error:`${e} can only contain letters, spaces, hyphens, and apostrophes`};const a=s.split(/\s+/).filter(i=>i.length>0);if(a.length<2)return{isValid:!1,error:"Please enter both first and last name"};for(const i of a)if(i.length<2)return{isValid:!1,error:"Each name must be at least 2 characters"};return{isValid:!0}}function ooe(t){if(!t||t.trim().length===0)return{isValid:!1,error:"Phone number is required"};const e=t.replace(/\D/g,"");return e.length<10?{isValid:!1,error:"Phone number must have at least 10 digits"}:e.length>15?{isValid:!1,error:"Phone number is too long"}:{isValid:!0}}function YXe(t,e,s){return!Number.isInteger(t)||t<1?{isValid:!1,error:"Player count must be a positive number"}:t<e?{isValid:!1,error:`Minimum ${e} player${e>1?"s":""} required`}:t>s?{isValid:!1,error:`Maximum ${s} player${s>1?"s":""} allowed`}:{isValid:!0}}function KXe(t,e="+1"){const s=t.replace(/\D/g,"");return s.startsWith("1")&&s.length===11?"+"+s:e+s}function NG(t){return t.trim().split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function XXe(t){return t.trim().toLowerCase()}function QXe(t){const e={};let s=!0;const n=ioe(t.fullName,"Full name");n.isValid||(e.fullName=n.error,s=!1);const a=aoe(t.email);a.isValid||(e.email=a.error,s=!1);const i=ooe(t.phone);if(i.isValid||(e.phone=i.error,s=!1),t.playerCount!==void 0&&t.minPlayers!==void 0&&t.maxPlayers!==void 0){const o=YXe(t.playerCount,t.minPlayers,t.maxPlayers);o.isValid||(e.playerCount=o.error,s=!1)}return{isValid:s,errors:e}}async function ZXe(t,e){try{if(!t||t.trim().length===0)return{isValid:!1,error:"Please enter a promo code"};const s=t.trim().toUpperCase(),{data:n,error:a}=await pt.from("promo_codes").select("*").eq("code",s).eq("is_active",!0).single();return a||!n?{isValid:!1,error:"Invalid promo code"}:n.expires_at&&new Date(n.expires_at)<new Date?{isValid:!1,error:"This promo code has expired"}:n.max_uses&&n.uses_count>=n.max_uses?{isValid:!1,error:"This promo code has reached its usage limit"}:n.min_purchase_amount&&e<n.min_purchase_amount?{isValid:!1,error:`Minimum purchase of $${n.min_purchase_amount} required`}:{isValid:!0,discount:{type:n.discount_type,value:n.discount_value,code:s}}}catch(s){return console.error("Error validating promo code:",s),{isValid:!1,error:"Error validating promo code"}}}async function JXe(t){try{if(!t||t.trim().length===0)return{isValid:!1,error:"Please enter a gift card code",code:t};const e=t.trim().toUpperCase(),{data:s,error:n}=await pt.from("gift_cards").select("*").eq("code",e).eq("status","active").single();return n||!s?{isValid:!1,error:"Invalid gift card code",code:e}:s.expires_at&&new Date(s.expires_at)<new Date?{isValid:!1,error:"This gift card has expired",code:e}:s.balance<=0?{isValid:!1,error:"This gift card has no remaining balance",code:e}:{isValid:!0,balance:s.balance,code:e}}catch(e){return console.error("Error validating gift card:",e),{isValid:!1,error:"Error validating gift card",code:t}}}function eQe(t,e){if(e.type==="percentage"){const s=t*e.value/100;return Math.max(0,t-s)}else return Math.max(0,t-e.value)}function tQe(t,e){return e>=t?{remainingAmount:0,giftCardUsed:t}:{remainingAmount:t-e,giftCardUsed:e}}async function rQe(t,e,s){try{const{data:n}=await pt.from("promo_codes").select("id").eq("code",t).single();if(!n)return;await pt.from("promo_code_usage").insert({promo_code_id:n.id,booking_id:e,user_id:s,used_at:new Date().toISOString()}),await pt.rpc("increment_promo_usage",{code_id:n.id})}catch(n){console.error("Error recording promo code usage:",n)}}async function sQe(t,e,s){try{const{data:n}=await pt.from("gift_cards").select("id, balance").eq("code",t).single();if(!n)return;const a=n.balance-e;await pt.from("gift_cards").update({balance:a,status:a<=0?"used":"active"}).eq("id",n.id),await pt.from("gift_card_usage").insert({gift_card_id:n.id,booking_id:s,amount_used:e,used_at:new Date().toISOString()})}catch(n){console.error("Error recording gift card usage:",n)}}const nQe=GXe("");function Ww({primaryColor:t="#2563eb",config:e}){const[s,n]=j.useState(e?.defaultSelectedDateDay??15),[a,i]=j.useState(null),[o,l]=j.useState(e?.games?.[0]?.id??null),[c,d]=j.useState(4),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState("booking"),[g,b]=j.useState(null),[w,N]=j.useState({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[C,S]=j.useState(0),[A,k]=j.useState(""),[E,O]=j.useState(""),[$,T]=j.useState(""),[I,L]=j.useState("checkout"),[z,M]=j.useState({}),[V,B]=j.useState(!1),[F,J]=j.useState(!1),[ee,q]=j.useState(null),[U,Z]=j.useState(!1),[K,se]=j.useState(null),[ne,ie]=j.useState(!1),[be,ue]=j.useState(!1),oe=String(e?.previewRole||"customer").toLowerCase(),pe=e?.timezoneLabel||"Local Time",ye=(e?.showPromoCodeInput??!0)&&oe!=="staff",$e=e?.showGiftCardInput??!0,Se=e?.customSettings||{},Y=(Array.isArray(e?.games)?e.games:[]).map(le=>{const Ee=typeof le?.difficulty=="number"?le.difficulty<=2?"Easy":le.difficulty===3?"Medium":le.difficulty===4?"Hard":"Extreme":le?.difficultyLabel||le?.difficulty||"Medium",We={Easy:2,Medium:3,Hard:4,Extreme:5};return{id:le?.id,name:le?.name,duration:le?.duration||"60 min",price:typeof le?.price=="number"?le.price:typeof le?.basePrice=="number"?le.basePrice:0,rating:le?.rating??0,reviewCount:le?.reviews??0,difficulty:Ee,difficultyLevel:typeof le?.difficulty=="number"?le.difficulty:We[String(Ee)]??3,players:le?.players||"",minAge:le?.minAge,ageRecommendation:le?.ageRange||"",image:le?.image||le?.imageUrl||le?.coverImage||"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=800&h=500&fit=crop",gallery:le?.galleryImages||le?.gallery||[],description:le?.description||"",longDescription:le?.longDescription||le?.description||"",highlights:le?.highlights||[],story:le?.story||"",whatToExpect:le?.whatToExpect||[],requirements:le?.requirements||[],successTips:le?.successTips||[],faq:le?.faq||le?.faqs||[],reviews:le?.reviewsList||[],gameType:le?.gameType||"physical",language:le?.language||["English"],successRate:le?.successRate||75,activityDetails:le?.activityDetails||"",additionalInformation:le?.additionalInformation||"",cancellationPolicies:le?.cancellationPolicies||[],accessibility:le?.accessibility||{strollerAccessible:!1,wheelchairAccessible:!1},location:le?.location||"",operatingDays:le?.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:le?.startTime||"10:00",endTime:le?.endTime||"22:00",slotInterval:le?.slotInterval||60,advanceBooking:le?.advanceBooking||30,stripe_price_id:le?.stripe_price_id||null,stripe_product_id:le?.stripe_product_id||null,stripe_sync_status:le?.stripe_sync_status||"pending",stripe_checkout_url:le?.stripe_checkout_url||le?.stripeCheckoutUrl||null}}),Le=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xe=o&&Y.find(le=>le.id===o)||Y[0],mt=xe?.duration?typeof xe.duration=="string"?parseInt(xe.duration):xe.duration:typeof e?.slotDurationMinutes=="number"?e.slotDurationMinutes:90,[Ue,xt]=j.useState(new Date().getMonth()),[ut,Ot]=j.useState(new Date().getFullYear()),tt=j.useMemo(()=>{if(!xe)return[];const le=new Date(ut,Ue,s),Ee=xe?.blockedDates||e?.blockedDates||[],We=xe?.customDates||e?.customAvailableDates||[];return zKe(le,{operatingDays:xe.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:xe.startTime||"10:00",endTime:xe.endTime||"22:00",slotInterval:xe.slotInterval||60,duration:typeof xe.duration=="string"?parseInt(xe.duration):xe.duration||90,advanceBooking:xe.advanceBooking||30},Ee,[],We)},[s,Ue,ut,xe,e]),st=e?.streetAddress||e?.address||xe?.location?.address,At=e?.city||xe?.location?.city,Yt=e?.state||xe?.location?.state,yr=e?.zipCode||e?.postalCode||xe?.location?.zip||xe?.location?.postalCode,Zt=e?.country||xe?.location?.country,Vt=[st,At,Yt,yr,Zt].filter(Boolean).join(", "),tr=xe?.image||xe?.coverImage||"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=1200&h=630&fit=crop",$t=e?.phoneNumber||xe?.location?.phone||"",Dr=e?.emailAddress||xe?.contactEmail||"";j.useEffect(()=>{!o&&Y.length>0&&l(Y[0].id)},[e,Y,o]),j.useEffect(()=>{const le=e?.seoTitle||`${e?.businessName||"Booking"} | Calendar`;if(typeof document<"u"){document.title=le;const Ee=(vr,Xt)=>{if(!Xt)return;let Mt=document.querySelector(`meta[name="${vr}"]`);Mt||(Mt=document.createElement("meta"),Mt.setAttribute("name",vr),document.head.appendChild(Mt)),Mt.setAttribute("content",Xt)},We=(vr,Xt)=>{if(!Xt)return;let Mt=document.querySelector(`meta[property="${vr}"]`);Mt||(Mt=document.createElement("meta"),Mt.setAttribute("property",vr),document.head.appendChild(Mt)),Mt.setAttribute("content",Xt)},at=e?.metaDescription||"Browse and book experiences",nt=Array.isArray(e?.seoKeywords)?e.seoKeywords.join(", "):e?.seoKeywords||"";Ee("description",at),Ee("keywords",nt),We("og:title",le),We("og:description",at),We("og:image",tr),We("og:type","website"),Ee("twitter:card","summary_large_image"),Ee("twitter:title",le),Ee("twitter:description",at),Ee("twitter:image",tr);const It=document.getElementById("calendar-widget-jsonld");if(e?.enableLocalBusinessSchema){const vr=Vt?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Vt)}`:void 0,Xt={"@context":"https://schema.org","@type":"LocalBusiness",name:e?.businessName||xe?.name||"Booking",image:tr,description:at,address:st||At||Yt||yr||Zt?{"@type":"PostalAddress",streetAddress:st,addressLocality:At,addressRegion:Yt,postalCode:yr,addressCountry:Zt}:void 0,telephone:e?.phoneNumber,email:e?.emailAddress,hasMap:vr},Mt=It||document.createElement("script");Mt.type="application/ld+json",Mt.id="calendar-widget-jsonld",Mt.textContent=JSON.stringify(Xt,null,2),It||document.head.appendChild(Mt)}else It&&It.remove()}return()=>{const Ee=document.getElementById("calendar-widget-jsonld");Ee&&Ee.remove()}},[e,xe?.name,tr,Vt,st,At,Yt,yr,Zt]),j.useEffect(()=>{try{const le=localStorage.getItem("bookings");if(le){const Ee=JSON.parse(le);S(Array.isArray(Ee)?Ee.length:0)}}catch(le){console.error("Error loading bookings from localStorage:",le)}},[]);const Er=(le,Ee,We)=>{q({code:le,discount:Ee,type:We}),J(!1)},hr=()=>{q(null)},Ct=(le,Ee)=>{se({code:le,amount:Ee}),Z(!1)},is=()=>{se(null)},cr=()=>(xe?.price??0)*c,Pt=()=>ee?ee.type==="fixed"?ee.discount:cr()*ee.discount/100:0,kt=()=>{if(!K)return 0;const le=cr()-Pt();return Math.min(K.amount,le)},zt=cr()-Pt()-kt(),or=`BK-${Math.random().toString(36).substring(2,10).toUpperCase()}`,Re=a!==null;w.name!==""&&w.email!==""&&w.phone;const Je=w.name!==""&&w.email!==""&&w.phone!=="",bt=()=>{x("booking"),n(15),i(null),l(Y[0]?.id??null),d(4),N({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),q(null),se(null),J(!1),Z(!1)},gr=async()=>{if(!V)try{const le=QXe({fullName:w.name,email:w.email,phone:w.phone});if(!le.isValid){M(le.errors),re.error("Please fix the errors in the form");return}if(e?.isTemplate||e?.enablePayment===!1){re.info("This is a template preview. Configure in Venues to enable booking.",{duration:5e3,description:"Booking widgets are templates. Add this to your venue to accept real bookings."});return}if(!e?.venueId){re.error("Venue configuration is missing. This widget must be configured in Venues.",{duration:5e3,description:"Please configure this widget in the Venues section to enable booking."});return}if(!xe?.id){re.error("Please select a game");return}if(!a){re.error("Please select a time");return}B(!0),re.loading("Processing your booking...",{id:"booking-process"});let Ee=zt;if(ee){const Pr=await ZXe(ee.code,Ee);if(!Pr.isValid){re.error(Pr.error||"Invalid promo code",{id:"booking-process"}),q(null),B(!1);return}Pr.discount&&(Ee=eQe(Ee,Pr.discount))}if(K){const Pr=await JXe(K.code);if(!Pr.isValid){re.error(Pr.error||"Invalid gift card",{id:"booking-process"}),se(null),B(!1);return}Pr.balance&&(Ee=tQe(Ee,Pr.balance).remainingAmount)}const We=w.name.trim().split(/\s+/),at=NG(We[0]||""),nt=NG(We.slice(1).join(" ")||"Customer"),It={email:XXe(w.email),firstName:at,lastName:nt,phone:KXe(w.phone)},Xt=new Date(ut,Ue,s).toISOString().split("T")[0];let Mt=a,Gt="";const xr=a.trim().replace(/\s+/g," ").match(/^(\d{1,2}):(\d{2})\s*(AM|PM)?$/i);if(xr){let Pr=parseInt(xr[1]);const Gr=parseInt(xr[2]),os=xr[3];os&&(os.toUpperCase()==="PM"&&Pr!==12?Pr+=12:os.toUpperCase()==="AM"&&Pr===12&&(Pr=0)),Mt=`${String(Pr).padStart(2,"0")}:${String(Gr).padStart(2,"0")}`;const ws=new Date;ws.setHours(Pr,Gr,0,0);const Wa=typeof xe?.duration=="string"?parseInt(xe.duration):xe?.duration||60,xi=new Date(ws.getTime()+Wa*6e4);Gt=`${String(xi.getHours()).padStart(2,"0")}:${String(xi.getMinutes()).padStart(2,"0")}`}else{re.error("Invalid time format",{id:"booking-process"}),B(!1);return}if(!xe.stripe_price_id){re.error("Game pricing not configured. Please contact support.",{id:"booking-process"}),B(!1);return}const Cr={venueId:e.venueId,gameId:xe.id,bookingDate:Xt,startTime:Mt,endTime:Gt,partySize:c,customer:It,totalPrice:parseFloat(Ee.toFixed(2)),priceId:xe.stripe_price_id};if(I==="checkout"){const Pr=xe.stripeCheckoutUrl||xe.stripe_checkout_url;if(Pr){re.success("Redirecting to checkout...",{id:"booking-process"}),console.log("Using custom checkout URL:",Pr),setTimeout(()=>{window.location.href=Pr},500);return}try{re.loading("Creating secure checkout...",{id:"booking-process"}),console.log("Creating checkout with params:",{...Cr,priceId:Cr.priceId});const Gr=await xG.createBookingWithCheckout({...Cr,successUrl:`${window.location.origin}/booking-success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${window.location.origin}/booking-cancelled`});T(Gr.booking.id),re.success("Redirecting to secure checkout...",{id:"booking-process"}),setTimeout(()=>{window.location.href=Gr.checkoutUrl},500)}catch(Gr){console.error("Checkout error:",Gr),re.error(`Checkout failed: ${Gr.message}`,{id:"booking-process"}),B(!1);return}}else if(I==="payment-link")try{re.loading("Creating payment link...",{id:"booking-process"});const Pr=await xG.createBookingWithPaymentLink(Cr);T(Pr.booking.id),k(`BK-${Pr.booking.id.substring(0,8).toUpperCase()}`),re.success("Booking created! Payment link sent to your email.",{id:"booking-process"}),x("success"),B(!1),console.log("Payment Link:",Pr.paymentLink)}catch(Pr){console.error("Payment link error:",Pr),re.error(`Payment link failed: ${Pr.message}`,{id:"booking-process"}),B(!1);return}else try{re.loading("Creating payment intent...",{id:"booking-process"});const Pr=await gXe.createBookingWithPayment(Cr);T(Pr.bookingId),O(Pr.clientSecret),re.success("Proceeding to payment...",{id:"booking-process"}),x("payment"),B(!1)}catch(Pr){console.error("Payment intent error:",Pr),re.error(`Payment setup failed: ${Pr.message}`,{id:"booking-process"}),B(!1);return}}catch(le){console.error(" Error creating booking:",le),re.error(le.message||"Failed to create booking",{id:"booking-process"}),B(!1)}},je=async le=>{try{console.log("Payment successful:",le),ee&&$&&await rQe(ee.code,$),K&&$&&await sQe(K.code,K.amount,$),k($),x("success"),re.success("Payment successful! Booking confirmed.")}catch(Ee){console.error("Post-payment error:",Ee),k($),x("success")}},Ce=le=>{console.error("Payment error:",le),re.error("Payment failed. Please try again."),B(!1),x("checkout")},Qe=()=>{const le=$Xe(),Ee=PXe(),[We,at]=j.useState(!1),[nt,It]=j.useState(""),vr=async Mt=>{if(Mt.preventDefault(),!le||!Ee){re.error("Stripe is not loaded. Please refresh the page.");return}at(!0),It("");try{const{error:Gt}=await Ee.submit();if(Gt){It(Xt(Gt)),re.error(Xt(Gt)),at(!1);return}const{error:Wt,paymentIntent:xr}=await le.confirmPayment({elements:Ee,redirect:"if_required"});if(Wt){const Cr=Xt(Wt);It(Cr),re.error(Cr),Ce(Wt)}else xr&&xr.status==="succeeded"&&await je(xr)}catch(Gt){console.error("Payment error:",Gt);const Wt=Gt.message||"Payment failed. Please try again.";It(Wt),re.error(Wt),Ce(Gt)}finally{at(!1)}},Xt=Mt=>{const Gt=Mt.code,Wt=Mt.message;return{incomplete_number:" Card number is incomplete. Please enter all 16 digits.",invalid_number:" Invalid card number. Please check and try again.",incomplete_expiry:" Expiry date is incomplete. Use MM/YY format (e.g., 12/25)",invalid_expiry_month:" Invalid month. Enter 01-12.",invalid_expiry_year_past:" Card has expired. Please use a valid card.",incomplete_cvc:" CVC is incomplete. Enter 3 digits from back of card.",invalid_cvc:" Invalid CVC. Enter the 3-digit code on back of card.",incomplete_zip:" ZIP code is required. Please enter your billing ZIP.",card_declined:" Card declined. Please try a different card.",insufficient_funds:" Insufficient funds. Please use a different card.",expired_card:" Card has expired. Please use a valid card.",incorrect_cvc:" Incorrect CVC. Check the 3 digits on back of card.",processing_error:" Processing error. Please try again.",rate_limit:" Too many attempts. Please wait a moment and try again."}[Gt]||` ${Wt}`};return r.jsxs("form",{onSubmit:vr,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(DXe,{options:{layout:"tabs",fields:{billingDetails:{address:{postalCode:"auto"}}}},onChange:Mt=>{Mt.complete&&It("")}}),nt&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-red-800 flex items-center gap-2",children:[r.jsx(hs,{className:"w-4 h-4 flex-shrink-0"}),nt]})})]}),r.jsx(W,{type:"submit",disabled:!le||We,className:"w-full text-white h-12 text-base",style:{backgroundColor:t},children:We?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing Payment..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Pay $",zt]})})]})},He=le=>r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(Ee=>r.jsx(Es,{className:`w-3 h-3 transition-all ${Ee<=le?"fill-orange-400 text-orange-400 scale-100":"fill-gray-200 text-gray-200 scale-90"}`},Ee))}),vt=le=>{switch(le.toLowerCase()){case"easy":return"bg-green-100 text-green-700 border-green-300";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"hard":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}};return Y.length===0?r.jsx("div",{className:"w-full min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-3xl mx-auto p-6",children:r.jsxs(he,{className:"p-6",children:[r.jsx("h2",{className:"text-xl text-gray-900 mb-2",children:"No experiences configured"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Add games in the settings to display the calendar booking widget."}),r.jsx("div",{className:"text-sm text-gray-700",children:"Open Settings  Games and create your first experience."})]})})}):r.jsxs("div",{className:"w-full min-h-[600px] bg-gray-50 max-w-full overflow-x-hidden",style:{fontFamily:e?.fontFamily||void 0},children:[r.jsx(mr,{open:be,onOpenChange:ue,children:r.jsxs(fr,{className:"sm:max-w-[425px]",children:[r.jsx(br,{children:r.jsx(pr,{children:"Health & Safety"})}),r.jsx("div",{className:"p-4",children:r.jsxs("ul",{className:"space-y-4",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx(Tf,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Enhanced Cleaning"}),r.jsx("p",{className:"text-sm text-gray-500",children:"We've increased the frequency of cleaning and disinfecting our facilities, especially high-touch surfaces."})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(Xr,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Private Experiences"}),r.jsx("p",{className:"text-sm text-gray-500",children:"All our escape room games are private, meaning you'll only be playing with the people you came with."})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(wu,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Well-being"}),r.jsx("p",{className:"text-sm text-gray-500",children:"If you're feeling unwell, please stay home. We're happy to reschedule your booking for a future date."})]})]})]})})]})}),r.jsx(mr,{open:ne,onOpenChange:ie,children:r.jsxs(fr,{className:"sm:max-w-[425px]",children:[r.jsx(br,{children:r.jsx(pr,{children:"Secure Booking"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Your security and privacy are our top priorities. We use industry-leading technology to protect your information."}),r.jsxs("ul",{className:"space-y-4",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx(Tf,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"SSL Encryption"}),r.jsx("p",{className:"text-sm text-gray-500",children:"All data transmitted between your browser and our servers is encrypted using 256-bit SSL technology, the same security used by major banks."})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(Tf,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"PCI DSS Compliant"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Our payment processing is fully compliant with Payment Card Industry Data Security Standards, ensuring your card information is handled with the highest security."})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(Tf,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Data Protection"}),r.jsx("p",{className:"text-sm text-gray-500",children:"We never store your complete credit card information on our servers. All payment data is tokenized and processed through secure, certified payment gateways."})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(Tf,{className:"w-6 h-6 text-green-500 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Privacy Guaranteed"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Your personal information is kept confidential and will never be shared with third parties without your explicit consent."})]})]})]}),r.jsx("div",{className:"mt-6 bg-green-50 p-4 rounded-lg",children:r.jsxs("p",{className:"text-sm text-green-700",children:[r.jsx("strong",{children:"Your trust matters:"})," We're committed to maintaining the highest standards of security and transparency in all our transactions."]})})]})]})}),r.jsxs("div",{className:"flex justify-end items-center gap-4 p-4",children:[r.jsxs(De,{variant:"secondary",className:"bg-gray-100 text-gray-700 border",children:["TZ: ",pe]}),r.jsxs(De,{variant:"secondary",className:"bg-gray-100 text-gray-700 border",children:["Role: ",oe]}),e.showSecuredBadge&&r.jsxs(W,{variant:"outline",onClick:()=>ie(!0),children:[r.jsx(Tf,{className:"w-4 h-4 mr-2"}),"Secured"]}),e.showHealthSafety&&r.jsxs(W,{variant:"outline",onClick:()=>ue(!0),children:[r.jsx(wu,{className:"w-4 h-4 mr-2"}),"Health & Safety"]})]}),r.jsxs("div",{className:"mb-6",children:[Se.logoUrl&&Se.logoPosition==="top"&&r.jsx("img",{src:Se.logoUrl,alt:"logo",style:{width:Se.logoSize,height:Se.logoSize},className:"mx-auto mb-2"}),r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Se.logoUrl&&Se.logoPosition==="left"&&r.jsx("img",{src:Se.logoUrl,alt:"logo",style:{width:Se.logoSize,height:Se.logoSize}}),r.jsx("h1",{className:"font-bold mb-2",style:{fontFamily:Se.headlineFont||void 0,fontSize:typeof Se.headlineSize=="number"?Se.headlineSize:28,color:Se.headlineColor||void 0,textAlign:Se.headlineAlign||"center"},children:Se.headlineText||e.widgetTitle}),Se.logoUrl&&Se.logoPosition==="right"&&r.jsx("img",{src:Se.logoUrl,alt:"logo",style:{width:Se.logoSize,height:Se.logoSize}})]}),Se.logoUrl&&Se.logoPosition==="bottom"&&r.jsx("img",{src:Se.logoUrl,alt:"logo",style:{width:Se.logoSize,height:Se.logoSize},className:"mx-auto mt-2"}),Se.descriptionHtml?r.jsx("div",{className:"mt-1 text-gray-700",style:{textAlign:Se.headlineAlign||"center"},dangerouslySetInnerHTML:{__html:Se.descriptionHtml}}):r.jsx("p",{className:"text-center mb-2",children:e.widgetDescription})]}),r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[95vw] sm:!h-[95vh] sm:!max-w-[1200px] sm:!max-h-[95vh] !rounded-none sm:!rounded-xl overflow-hidden p-0 bg-gradient-to-b from-white to-gray-50 flex flex-col",children:[r.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 z-50 w-10 h-10 rounded-full bg-white shadow-lg hover:shadow-xl flex items-center justify-center transition-all hover:scale-110 border border-gray-200","aria-label":"Close dialog",children:r.jsx(Is,{className:"w-5 h-5 text-gray-600"})}),r.jsx(lg,{children:r.jsxs(br,{children:[r.jsx(pr,{children:xe.name}),r.jsxs(wr,{children:["Complete guide to ",xe.name," escape room - ",xe.difficulty," difficulty, ",xe.duration," duration, suitable for ages ",xe.ageRecommendation,". Book your adventure now!"]})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsxs(fa,{className:"h-full w-full",children:[r.jsxs("div",{className:"relative w-full h-[400px] sm:h-[500px] overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx(fn,{src:xe.image,alt:xe.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/80"})]}),r.jsxs("div",{className:"relative h-full flex flex-col justify-end p-6 sm:p-10 lg:p-12",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[xe.featured&&r.jsx(De,{className:"bg-amber-500 hover:bg-amber-600 text-white border-0 px-3 py-1 text-sm",children:" Featured"}),r.jsxs(De,{className:"bg-white/20 hover:bg-white/30 text-white border border-white/30 backdrop-blur-sm px-3 py-1 text-sm",children:[r.jsx(Es,{className:"w-3 h-3 fill-white mr-1"}),xe.rating," (",xe.reviewCount," reviews)"]})]}),r.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl text-white mb-3 sm:mb-4",children:xe.name}),r.jsx("p",{className:"text-base sm:text-lg text-gray-200 mb-6 sm:mb-8 max-w-3xl",children:xe.description}),r.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2.5 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5 text-white"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-300",children:"Duration"}),r.jsx("div",{className:"text-sm text-white",children:xe.duration})]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2.5 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-5 h-5 text-white"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-300",children:"Players"}),r.jsx("div",{className:"text-sm text-white",children:xe.players})]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2.5 flex items-center gap-2",children:[r.jsx($f,{className:"w-5 h-5 text-white"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-300",children:"Difficulty"}),r.jsx("div",{className:"text-sm text-white",children:xe.difficulty})]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2.5 flex items-center gap-2",children:[r.jsx(ym,{className:"w-5 h-5 text-white"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-300",children:"Type"}),r.jsx("div",{className:"text-sm text-white",children:xe.gameType})]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl px-4 py-2.5 flex items-center gap-2",children:[r.jsx(dl,{className:"w-5 h-5 text-white"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-300",children:"Location"}),r.jsx("div",{className:"text-sm text-white",children:"Downtown"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(W,{className:"bg-white/10 hover:bg-white/20 text-white border border-white/30 backdrop-blur-md transition-all",variant:"outline",children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),"View Gallery"]}),r.jsxs(W,{className:"bg-white/10 hover:bg-white/20 text-white border border-white/30 backdrop-blur-md transition-all",variant:"outline",children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),"Watch Video"]})]})]})]}),r.jsxs("div",{className:"space-y-8 sm:space-y-10 p-4 sm:p-6 lg:p-8 pb-20",children:[r.jsx("section",{"aria-label":"Photo gallery",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:xe.gallery.map((le,Ee)=>r.jsxs("div",{className:"group aspect-video rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 relative",children:[r.jsx(fn,{src:le,alt:`${xe.name} escape room - View ${Ee+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},Ee))})}),r.jsxs("section",{"aria-labelledby":"overview-heading",className:"scroll-mt-20",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(_a,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"overview-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Overview"})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-6 sm:p-8 shadow-sm border border-gray-100",children:[r.jsx("p",{className:"text-base sm:text-lg text-gray-700 leading-relaxed mb-6",children:xe.longDescription}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 sm:p-5 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ws,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("p",{className:"text-sm sm:text-base text-gray-700",children:[r.jsx("strong",{className:"text-blue-900",children:"At a Glance:"})," ",xe.description]})]})})]})]}),r.jsxs("section",{"aria-labelledby":"detailed-info-heading",className:"scroll-mt-20",children:[r.jsx(lg,{children:r.jsx("h2",{id:"detailed-info-heading",children:"Detailed Activity Information"})}),r.jsxs(Gie,{type:"single",collapsible:!0,defaultValue:"activity-details",className:"space-y-4",children:[r.jsxs(I1,{value:"activity-details",className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden","data-seo-section":"activity-details",children:[r.jsx($1,{className:"px-6 py-4 hover:bg-gray-50 transition-colors [&[data-state=open]]:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-100",children:r.jsx(OY,{className:"w-5 h-5 text-blue-600"})}),r.jsx("span",{className:"text-lg text-gray-900",children:"Activity Details"})]})}),r.jsx(D1,{className:"px-6 pb-6",children:r.jsxs("div",{className:"space-y-6 pt-2",children:[r.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[r.jsxs("div",{itemScope:!0,itemType:"https://schema.org/Duration",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5",style:{color:t}}),"Duration"]}),r.jsx("p",{className:"text-gray-700",itemProp:"duration",children:r.jsx("strong",{className:"text-xl",style:{color:t},children:xe.duration})}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total experience time including briefing and debriefing"})]}),r.jsxs("div",{itemScope:!0,itemType:"https://schema.org/QuantitativeValue",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-5 h-5",style:{color:t}}),"Group Size"]}),r.jsx("p",{className:"text-gray-700",itemProp:"value",children:r.jsx("strong",{className:"text-xl",style:{color:t},children:xe.players})}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Private experience - your group only"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx($f,{className:"w-5 h-5",style:{color:t}}),"Difficulty Level"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(le=>r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${le<=xe.difficulty?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-md":"bg-gray-200 text-gray-400"}`,children:r.jsx("span",{className:"text-xs",children:le})},le))}),r.jsxs("span",{className:"text-gray-700",children:[r.jsxs("strong",{style:{color:t},children:[xe.difficulty,"/5"]})," - ",xe.difficulty<=2?"Beginner Friendly":xe.difficulty<=3?"Moderate Challenge":"Advanced Puzzlers"]})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:xe.difficulty<=2?"Perfect for first-time escape room enthusiasts and families":xe.difficulty<=3?"Suitable for those with some escape room experience":"Recommended for experienced escape room teams"})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Lt,{className:"w-5 h-5 text-green-600"}),"What's Included"]}),r.jsx("ul",{className:"space-y-3",children:xe.whatToExpect.map((le,Ee)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx(Lt,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-green-600"}),r.jsx("span",{className:"text-gray-700",children:le})]},Ee))})]}),r.jsx(Ze,{}),r.jsxs("div",{itemScope:!0,itemType:"https://schema.org/Place",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(dl,{className:"w-5 h-5",style:{color:t}}),"Meeting Point"]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[r.jsxs("p",{className:"text-gray-700",itemProp:"address",children:[r.jsx("strong",{children:"123 Adventure Street, Downtown District"}),r.jsx("br",{}),"New York, NY 10001"]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Please arrive ",r.jsx("strong",{className:"text-blue-900",children:"15 minutes before"})," your scheduled time for check-in and game briefing"]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Vhe,{className:"w-5 h-5",style:{color:t}}),"Available Languages"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["English","Spanish","French","German"].map(le=>r.jsx(De,{variant:"secondary",className:"text-sm px-3 py-1",children:le},le))}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Game master can provide hints and instructions in multiple languages"})]}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/20 border-l-4 border-amber-500 dark:border-amber-600 p-3 sm:p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[r.jsx(hs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 dark:text-amber-500 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 break-words",children:[r.jsx("strong",{className:"text-amber-900 dark:text-amber-200",children:"Age Requirement:"})," Recommended for ages ",xe.ageRecommendation,". Children under 16 must be accompanied by an adult."]})})]})})]})})]}),r.jsxs(I1,{value:"additional-info",className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden","data-seo-section":"additional-information",children:[r.jsx($1,{className:"px-6 py-4 hover:bg-gray-50 transition-colors [&[data-state=open]]:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-purple-100",children:r.jsx(Ws,{className:"w-5 h-5 text-purple-600"})}),r.jsx("span",{className:"text-lg text-gray-900",children:"Additional Information"})]})}),r.jsx(D1,{className:"px-6 pb-6",children:r.jsxs("div",{className:"space-y-6 pt-2",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(zs,{className:"w-5 h-5 text-blue-600"}),"Accessibility & Accommodations"]}),r.jsxs("ul",{className:"space-y-2 text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Wheelchair accessible facility with elevator access"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Accessible restroom facilities available"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Service animals are welcome"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Special accommodations available - contact us in advance"})]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(wu,{className:"w-5 h-5 text-red-500"}),"Health & Safety Protocols"]}),r.jsxs("ul",{className:"space-y-2 text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Rooms sanitized and disinfected between each group"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Emergency exits clearly marked and accessible at all times"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Game master monitoring via live camera feed"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"First aid certified staff on-site during all operating hours"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Climate-controlled environment for your comfort"})]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(ma,{className:"w-5 h-5",style:{color:t}}),"What to Bring & Wear"]}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"text-sm text-green-900 mb-2 flex items-center gap-2",children:[r.jsx(Lt,{className:"w-4 h-4"}),"Recommended"]}),r.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[r.jsx("li",{children:" Comfortable casual clothing"}),r.jsx("li",{children:" Closed-toe shoes (required)"}),r.jsx("li",{children:" Enthusiasm and team spirit!"}),r.jsx("li",{children:" Your confirmation email/QR code"})]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"text-sm text-red-900 mb-2 flex items-center gap-2",children:[r.jsx(ln,{className:"w-4 h-4"}),"Not Recommended"]}),r.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[r.jsx("li",{children:" Loose jewelry or accessories"}),r.jsx("li",{children:" High heels or open-toed shoes"}),r.jsx("li",{children:" Large bags (lockers provided)"}),r.jsx("li",{children:" Outside food or beverages"})]})]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-3 bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-lg",children:[r.jsx("strong",{className:"text-blue-900",children:"Note:"})," You may need to kneel, reach, crawl, or perform light physical activity. All puzzles can be solved through teamwork and creativity."]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(hs,{className:"w-5 h-5 text-amber-600"}),"Important Restrictions"]}),r.jsxs("ul",{className:"space-y-2 text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ln,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-red-500"}),r.jsx("span",{children:"Not suitable for individuals with severe claustrophobia"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ln,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-red-500"}),r.jsx("span",{children:"No outside food, drinks, or smoking permitted in game rooms"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ln,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-red-500"}),r.jsx("span",{children:"Photography/video recording not allowed inside game room (lobby photos OK)"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ln,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-red-500"}),r.jsx("span",{children:"All participants must sign waiver (minors need parent/guardian signature)"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(ln,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-red-500"}),r.jsx("span",{children:"Pregnant individuals should consult with staff before participating"})]})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-500 p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Gx,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm text-purple-900 mb-1",children:"Photography Policy"}),r.jsx("p",{className:"text-sm text-gray-700",children:"Photos and videos welcome in our lobby! Inside the game room, photography is not permitted to preserve the mystery for future players. We'll take a professional victory photo for successful teams!"})]})]})})]})})]}),r.jsxs(I1,{value:"faqs",className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden","data-seo-section":"frequently-asked-questions",itemScope:!0,itemType:"https://schema.org/FAQPage",children:[r.jsx($1,{className:"px-6 py-4 hover:bg-gray-50 transition-colors [&[data-state=open]]:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-100",children:r.jsx(Pf,{className:"w-5 h-5 text-green-600"})}),r.jsx("span",{className:"text-lg text-gray-900",children:"Frequently Asked Questions"})]})}),r.jsx(D1,{className:"px-6 pb-6",children:r.jsxs("div",{className:"space-y-5 pt-2",children:[xe.faq.map((le,Ee)=>r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg p-5 border border-gray-200",itemScope:!0,itemProp:"mainEntity",itemType:"https://schema.org/Question",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-2 flex items-start gap-2",itemProp:"name",children:[r.jsx(Pf,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:t}}),r.jsx("span",{children:le.question})]}),r.jsx("div",{itemScope:!0,itemProp:"acceptedAnswer",itemType:"https://schema.org/Answer",children:r.jsx("p",{className:"text-gray-700 ml-7",itemProp:"text",children:le.answer})})]},Ee)),r.jsx(Ze,{className:"my-4"}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg p-5 border border-gray-200",itemScope:!0,itemProp:"mainEntity",itemType:"https://schema.org/Question",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-2 flex items-start gap-2",itemProp:"name",children:[r.jsx(Pf,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:t}}),r.jsx("span",{children:"Do I need to book in advance?"})]}),r.jsx("div",{itemScope:!0,itemProp:"acceptedAnswer",itemType:"https://schema.org/Answer",children:r.jsx("p",{className:"text-gray-700 ml-7",itemProp:"text",children:"Yes, advance booking is required. We recommend booking at least 2-3 days in advance, especially for weekends and evenings. Walk-ins are accepted only if we have availability."})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg p-5 border border-gray-200",itemScope:!0,itemProp:"mainEntity",itemType:"https://schema.org/Question",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-2 flex items-start gap-2",itemProp:"name",children:[r.jsx(Pf,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:t}}),r.jsx("span",{children:"Can I change my booking date/time?"})]}),r.jsx("div",{itemScope:!0,itemProp:"acceptedAnswer",itemType:"https://schema.org/Answer",children:r.jsx("p",{className:"text-gray-700 ml-7",itemProp:"text",children:"Yes! You can reschedule your booking free of charge up to 48 hours before your scheduled time. Contact us via phone or email with your booking reference."})})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg p-5 border border-gray-200",itemScope:!0,itemProp:"mainEntity",itemType:"https://schema.org/Question",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-2 flex items-start gap-2",itemProp:"name",children:[r.jsx(Pf,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:t}}),r.jsx("span",{children:"Is this escape room scary or horror-themed?"})]}),r.jsx("div",{itemScope:!0,itemProp:"acceptedAnswer",itemType:"https://schema.org/Answer",children:r.jsx("p",{className:"text-gray-700 ml-7",itemProp:"text",children:xe.difficulty<=2?"This room has a mysterious atmosphere but is designed to be family-friendly without jump scares or intense horror elements.":"While this room has some atmospheric elements, it focuses on puzzles and mystery rather than horror. There are no actors or jump scares."})})]})]})})]}),r.jsxs(I1,{value:"cancellation",className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden","data-seo-section":"cancellation-refund-policy",children:[r.jsx($1,{className:"px-6 py-4 hover:bg-gray-50 transition-colors [&[data-state=open]]:bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-orange-100",children:r.jsx(Ln,{className:"w-5 h-5 text-orange-600"})}),r.jsx("span",{className:"text-lg text-gray-900",children:"Cancellation & Refund Policy"})]})}),r.jsx(D1,{className:"px-6 pb-6",children:r.jsxs("div",{className:"space-y-6 pt-2",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5",style:{color:t}}),"Cancellation Timeline & Refunds"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Lt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm text-green-900 mb-1",children:"48+ Hours Before"}),r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Free cancellation"})," - Full 100% refund to original payment method or free rescheduling to any available time slot"]})]})]})}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/20 border-l-4 border-amber-500 dark:border-amber-600 p-3 sm:p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[r.jsx(hs,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 dark:text-amber-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h4",{className:"text-xs sm:text-sm text-amber-900 dark:text-amber-200 mb-1 font-semibold",children:"24-48 Hours Before"}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 break-words",children:[r.jsx("strong",{children:"50% refund"})," or ",r.jsx("strong",{children:"free rescheduling"})," - Your choice of partial refund or move to another available date/time"]})]})]})}),r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ln,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm text-red-900 mb-1",children:"Less than 24 Hours"}),r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"No refund"})," - However, you may reschedule ",r.jsx("strong",{children:"one time"})," for a $25 rescheduling fee (subject to availability)"]})]})]})}),r.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ws,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm text-blue-900 mb-1",children:"No-Show Policy"}),r.jsxs("p",{className:"text-sm text-gray-700",children:["If you don't arrive for your scheduled booking and haven't contacted us, ",r.jsx("strong",{children:"no refund or rescheduling"})," will be offered. Full booking fee is forfeited."]})]})]})})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(la,{className:"w-5 h-5",style:{color:t}}),"How to Cancel or Reschedule"]}),r.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg p-5 border border-gray-200",children:r.jsxs("ol",{className:"space-y-3",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"1"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Contact Us"}),r.jsx("p",{className:"text-sm text-gray-700 mt-1",children:$t||Dr?r.jsxs(r.Fragment,{children:[$t&&r.jsxs(r.Fragment,{children:["Call us at ",r.jsx("strong",{className:"text-blue-600",children:$t})]}),$t&&Dr&&r.jsx(r.Fragment,{children:" or "}),Dr&&r.jsxs(r.Fragment,{children:["email ",r.jsx("strong",{className:"text-blue-600",children:Dr})]})]}):r.jsx(r.Fragment,{children:"Contact us to cancel or reschedule  details are in your confirmation email."})})]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"2"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Provide Booking Details"}),r.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Have your booking reference number, name, and scheduled date/time ready"})]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"3"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Choose Option"}),r.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Select to either cancel for a refund (if eligible) or reschedule to a new date/time"})]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"4"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Receive Confirmation"}),r.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"You'll receive email confirmation of your cancellation/refund or new booking details"})]})]})]})})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-base text-gray-900 mb-4",children:"Important Notes"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),r.jsx("span",{children:"Refunds are processed to the original payment method within 5-7 business days"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),r.jsx("span",{children:"Gift card purchases and promotional bookings may have different cancellation terms"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),r.jsx("span",{children:"Group bookings (10+ people) may have special cancellation policies - contact us for details"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),r.jsx("span",{children:"We reserve the right to cancel bookings due to unforeseen circumstances and will offer full refund or alternative dates"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-blue-600"}),r.jsx("span",{children:"Weather-related closures: Full refund or free rescheduling if we must close due to severe weather"})]})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(la,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm text-red-900 mb-1",children:"Running Late or Emergency?"}),r.jsx("p",{className:"text-sm text-gray-700",children:$t?r.jsxs(r.Fragment,{children:["If you're running late or have an emergency, please call us immediately at ",r.jsx("strong",{className:"text-red-900",children:$t}),". We'll do our best to accommodate you, though we cannot guarantee your full playing time if you arrive late."]}):r.jsx(r.Fragment,{children:"If you're running late or have an emergency, please reach out to us. We'll do our best to accommodate you, though we cannot guarantee your full playing time if you arrive late."})})]})]})}),e?.cancellationPolicy&&r.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-5 border border-gray-200",children:[r.jsx("h3",{className:"text-base text-gray-900 mb-2",children:"Business Cancellation Policy"}),r.jsx("p",{className:"text-sm text-gray-700",children:e.cancellationPolicy})]})]})})]})]})]}),e?.showLocationBlock!==!1&&(Vt||e?.phoneNumber||e?.emailAddress||e?.parkingInfo)&&r.jsxs("section",{"aria-labelledby":"location-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(dl,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"location-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Location & Directions"})]}),r.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-6 sm:p-8 shadow-sm border border-gray-100 space-y-4",children:r.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(dl,{className:"w-5 h-5",style:{color:t}}),"Address"]}),st&&r.jsx("p",{className:"text-gray-700 mb-2",children:st}),(At||Yt||yr)&&r.jsx("p",{className:"text-gray-700 mb-2",children:[At,Yt,yr].filter(Boolean).join(", ")}),Zt&&r.jsx("p",{className:"text-gray-700 mb-4",children:Zt}),(e?.nearbyLandmarks||e?.landmarkInfo)&&r.jsx("p",{className:"text-sm text-gray-600",children:e.nearbyLandmarks||e.landmarkInfo}),Vt&&r.jsx("p",{className:"pt-2",children:r.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(Vt)}`,target:"_blank",rel:"noreferrer",className:"text-sm font-medium hover:underline",style:{color:t},children:"Get directions"})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Parking & Transportation"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e?.parkingInfo&&r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsx("span",{children:e.parkingInfo})]}),e?.phoneNumber&&r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsxs("span",{children:["Questions? Call us at ",e.phoneNumber]})]}),e?.emailAddress&&r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsxs("span",{children:["Email: ",e.emailAddress]})]}),!(e?.parkingInfo||e?.phoneNumber||e?.emailAddress)&&r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-gray-500"}),r.jsx("span",{children:"Parking and transport details will be shared upon booking."})]})]})]})]})})]}),r.jsxs("section",{"aria-labelledby":"included-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-100",children:r.jsx(Lt,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{id:"included-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"What's Included"})]}),r.jsx("div",{className:"grid sm:grid-cols-2 gap-4",children:["Professional game master guidance throughout","Private escape room for your group only","All puzzles, clues, and props included","Pre-game briefing and safety orientation","Victory photo opportunity after escape","Complimentary water and refreshments","Climate-controlled comfortable environment","Free Wi-Fi in lobby and waiting area"].map((le,Ee)=>r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white rounded-lg border border-gray-200",children:[r.jsx(Lt,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-green-600"}),r.jsx("span",{className:"text-gray-700",children:le})]},Ee))})]}),r.jsxs("section",{"aria-labelledby":"policy-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-orange-100",children:r.jsx(Jn,{className:"w-5 h-5 text-orange-600"})}),r.jsx("h2",{id:"policy-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Booking & Cancellation Policy"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-6 sm:p-8 shadow-sm border border-gray-100 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5",style:{color:t}}),"Cancellation & Rescheduling"]}),r.jsxs("ul",{className:"space-y-3 text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"1"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Free cancellation:"})," Cancel or reschedule up to 48 hours before your booking for a full refund"]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"2"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"24-48 hours notice:"})," 50% refund or free rescheduling to another available time"]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",style:{backgroundColor:`${t}15`},children:r.jsx("span",{className:"text-sm",style:{color:t},children:"3"})}),r.jsxs("div",{children:[r.jsx("strong",{className:"text-gray-900",children:"Less than 24 hours:"})," No refund, but you can reschedule once for a $25 fee"]})]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Late Arrival Policy"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Please arrive 15 minutes before your scheduled time for check-in and briefing."}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 ml-5 list-disc",children:[r.jsx("li",{children:"Arriving late may reduce your playing time (game still ends at scheduled time)"}),r.jsx("li",{children:"If you're more than 15 minutes late, we may need to reschedule your booking"}),r.jsx("li",{children:"No refunds for time lost due to late arrival"}),r.jsx("li",{children:$t?r.jsxs(r.Fragment,{children:["Please call us if you're running late: ",$t]}):r.jsx(r.Fragment,{children:"Please contact us if you're running late."})})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Group Booking Policy"}),r.jsxs("ul",{className:"space-y-2 text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsxs("span",{children:["Minimum of ",xe.players.split("-")[0]," players required"]})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsx("span",{children:"You can add or remove players up to 24 hours before your booking"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsx("span",{children:"Private room guaranteed - you won't be grouped with strangers"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:t}}),r.jsx("span",{children:"Corporate and team building discounts available for groups of 10+"})]})]})]}),e?.cancellationPolicy&&r.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm text-gray-900 mb-1",children:"Business Cancellation Policy"}),r.jsx("p",{className:"text-sm text-gray-700",children:e.cancellationPolicy})]})]})]}),r.jsxs("section",{"aria-labelledby":"safety-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-blue-100",children:r.jsx(zs,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h2",{id:"safety-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Safety & Accessibility"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl p-6 sm:p-8 shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"grid sm:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Health & Safety"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Regular sanitization between games"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Emergency exit available at all times"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Game master monitoring via camera"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"First aid trained staff on-site"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-3",children:"Accessibility"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Wheelchair accessible facility"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Elevator access to all floors"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Accessible restrooms available"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 mt-0.5 flex-shrink-0 text-green-600"}),r.jsx("span",{children:"Service animals welcome"})]})]})]})]}),r.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{className:"text-blue-900",children:"Note:"})," If you have specific accessibility needs or health concerns, please contact us before booking at (555) 123-4567 so we can ensure the best experience for your group."]})})]})]}),r.jsxs("section",{"aria-labelledby":"additional-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(Ws,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"additional-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Good to Know"})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Gx,{className:"w-5 h-5",style:{color:t}}),"Photography Policy"]}),r.jsx("p",{className:"text-sm text-gray-700",children:"Photos and videos are allowed in the lobby area. Inside the game room, photography is not permitted to preserve the experience for future players. We'll take a victory photo for you after completion!"})]}),r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(ma,{className:"w-5 h-5",style:{color:t}}),"What to Wear"]}),r.jsx("p",{className:"text-sm text-gray-700",children:"Comfortable casual clothing recommended. Closed-toe shoes required. You may need to kneel, reach, or crawl. Avoid loose jewelry that could get caught. Temperature controlled environment."})]}),r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(ri,{className:"w-5 h-5",style:{color:t}}),"What to Bring"]}),r.jsx("p",{className:"text-sm text-gray-700",children:"Just bring yourself and your team! All puzzles and clues are provided. Lockers available for personal belongings. We recommend leaving valuables at home or in your vehicle."})]}),r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200",children:[r.jsxs("h3",{className:"text-base text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-5 h-5",style:{color:t}}),"Age Restrictions"]}),r.jsxs("p",{className:"text-sm text-gray-700",children:["Recommended for ages ",xe.ageRecommendation,". Children under 16 must be accompanied by an adult. All participants must sign a waiver (parents/guardians sign for minors)."]})]})]})]}),r.jsxs("section",{"aria-labelledby":"details-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(ym,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"details-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Key Details"})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"group text-center p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-blue-200",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-3 rounded-full bg-white flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(jr,{className:"w-6 h-6 sm:w-7 sm:h-7 text-blue-600"})}),r.jsx("div",{className:"text-xs sm:text-sm text-blue-700 mb-1",children:"Duration"}),r.jsx("div",{className:"text-base sm:text-lg text-blue-900",children:xe.duration})]}),r.jsxs("div",{className:"group text-center p-4 sm:p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-purple-200",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-3 rounded-full bg-white flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(Xr,{className:"w-6 h-6 sm:w-7 sm:h-7 text-purple-600"})}),r.jsx("div",{className:"text-xs sm:text-sm text-purple-700 mb-1",children:"Group Size"}),r.jsx("div",{className:"text-base sm:text-lg text-purple-900",children:xe.players})]}),r.jsxs("div",{className:"group text-center p-4 sm:p-6 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-orange-200",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-3 rounded-full bg-white flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx($f,{className:"w-6 h-6 sm:w-7 sm:h-7 text-orange-600"})}),r.jsx("div",{className:"text-xs sm:text-sm text-orange-700 mb-1",children:"Difficulty"}),r.jsx("div",{className:"text-base sm:text-lg text-orange-900 mb-2",children:xe.difficulty}),r.jsx("div",{className:"flex justify-center",children:He(xe.difficultyLevel)})]}),r.jsxs("div",{className:"group text-center p-4 sm:p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 border border-green-200",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-3 rounded-full bg-white flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform",children:r.jsx(zs,{className:"w-6 h-6 sm:w-7 sm:h-7 text-green-600"})}),r.jsx("div",{className:"text-xs sm:text-sm text-green-700 mb-1",children:"Min Age"}),r.jsx("div",{className:"text-base sm:text-lg text-green-900",children:xe.ageRecommendation})]})]})]}),r.jsx("section",{"aria-labelledby":"story-heading",className:"scroll-mt-20",children:r.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white p-6 sm:p-8 lg:p-10 rounded-2xl shadow-2xl",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center",children:r.jsx(vh,{className:"w-5 h-5 text-white"})}),r.jsx("h2",{id:"story-heading",className:"text-2xl sm:text-3xl",children:"The Story"})]}),r.jsx("p",{className:"text-base sm:text-lg leading-relaxed text-gray-200",children:xe.story})]})]})}),r.jsxs("section",{"aria-labelledby":"expect-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(Du,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"expect-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"What to Expect"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:xe.whatToExpect.map((le,Ee)=>r.jsxs("div",{className:"group flex items-start gap-3 p-4 sm:p-5 bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 hover:border-green-300 hover:shadow-lg transition-all duration-300",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:r.jsx(Lt,{className:"w-4 h-4 text-green-600"})}),r.jsx("span",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",children:le})]},Ee))})]}),r.jsxs("section",{"aria-labelledby":"highlights-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(wu,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"highlights-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Experience Highlights"})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:xe.highlights.map((le,Ee)=>r.jsxs("div",{className:"group relative overflow-hidden text-center p-4 sm:p-5 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 rounded-xl border border-blue-200 hover:border-purple-300 hover:shadow-lg transition-all duration-300",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/0 to-purple-400/0 group-hover:from-blue-400/5 group-hover:to-purple-400/5 transition-all duration-300"}),r.jsx(_a,{className:"w-5 h-5 mx-auto mb-2 text-purple-500 opacity-50 group-hover:opacity-100 transition-opacity"}),r.jsx("div",{className:"relative text-sm sm:text-base text-gray-900",children:le})]},Ee))})]}),r.jsxs("section",{"aria-labelledby":"requirements-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-amber-100",children:r.jsx(zs,{className:"w-5 h-5 text-amber-600"})}),r.jsx("h2",{id:"requirements-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Requirements & Guidelines"})]}),r.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-5 sm:p-7 shadow-sm",children:r.jsx("ul",{className:"space-y-3",children:xe.requirements.map((le,Ee)=>r.jsxs("li",{className:"flex items-start gap-3 text-sm sm:text-base text-gray-700",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx(Ws,{className:"w-4 h-4 text-amber-600"})}),r.jsx("span",{className:"leading-relaxed",children:le})]},Ee))})})]}),r.jsxs("section",{"aria-labelledby":"tips-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-100",children:r.jsx(Wn,{className:"w-5 h-5 text-green-600"})}),r.jsx("h2",{id:"tips-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Tips for Success"})]}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-5 sm:p-7 shadow-sm",children:r.jsx("ul",{className:"space-y-4",children:xe.successTips.map((le,Ee)=>r.jsxs("li",{className:"flex items-start gap-4 text-sm sm:text-base text-gray-700",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 text-white flex items-center justify-center shadow-md",children:Ee+1}),r.jsx("span",{className:"leading-relaxed pt-1",children:le})]},Ee))})})]}),r.jsxs("section",{"aria-labelledby":"reviews-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-yellow-100",children:r.jsx(Es,{className:"w-5 h-5 fill-yellow-500 text-yellow-500"})}),r.jsx("h2",{id:"reviews-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Customer Reviews"})]}),r.jsx("div",{className:"space-y-4 sm:space-y-5",children:xe.reviews.map((le,Ee)=>r.jsxs("div",{className:"group bg-white p-5 sm:p-7 rounded-xl border border-gray-200 shadow-sm hover:shadow-xl transition-all duration-300 hover:border-gray-300",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white shadow-md",children:r.jsx("span",{className:"text-lg",children:le.name.charAt(0)})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-base sm:text-lg text-gray-900",children:le.name}),r.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:le.date})]})]}),r.jsx("div",{className:"flex items-center gap-1 bg-yellow-50 px-3 py-1.5 rounded-full border border-yellow-200",children:Array.from({length:le.rating}).map((We,at)=>r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},at))})]}),r.jsxs("p",{className:"text-sm sm:text-base text-gray-700 leading-relaxed italic",children:['"',le.comment,'"']})]},Ee))})]}),r.jsxs("section",{"aria-labelledby":"faq-heading",className:"scroll-mt-20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(Pf,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{id:"faq-heading",className:"text-2xl sm:text-3xl text-gray-900",children:"Frequently Asked Questions"})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:xe.faq.map((le,Ee)=>r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-all duration-300",children:[r.jsxs("button",{onClick:()=>b(g===Ee?null:Ee),className:"w-full p-4 sm:p-5 flex items-center justify-between text-left hover:bg-gray-50 transition-colors group",children:[r.jsx("span",{className:"text-sm sm:text-base text-gray-900 pr-4 group-hover:text-blue-600 transition-colors",children:le.question}),r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300",style:{backgroundColor:g===Ee?`${t}15`:"transparent"},children:g===Ee?r.jsx($Y,{className:"w-5 h-5 transition-transform duration-300",style:{color:t}}):r.jsx(Mc,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 transition-colors"})})]}),g===Ee&&r.jsx("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 text-sm sm:text-base text-gray-600 leading-relaxed animate-in slide-in-from-top-2 duration-200",children:r.jsx("div",{className:"pt-3 border-t border-gray-100",children:le.answer})})]},Ee))})]}),r.jsx("section",{"aria-labelledby":"pricing-heading",className:"scroll-mt-20",children:r.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 text-white p-8 sm:p-12 rounded-2xl shadow-2xl text-center",children:[r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx(_a,{className:"w-12 h-12 mx-auto mb-4 text-yellow-300"}),r.jsx("h2",{id:"pricing-heading",className:"text-2xl sm:text-3xl lg:text-4xl mb-3",children:"Ready for the Adventure?"}),r.jsx("p",{className:"text-base sm:text-lg text-blue-100 mb-6",children:"Book your escape room experience today"}),r.jsxs("div",{className:"inline-block bg-white/20 backdrop-blur-sm rounded-2xl px-8 py-4 mb-8",children:[r.jsx("div",{className:"text-sm text-blue-100 mb-1",children:"Starting from"}),r.jsxs("div",{className:"text-5xl sm:text-6xl lg:text-7xl mb-1",children:["$",xe.price]}),r.jsx("div",{className:"text-lg sm:text-xl text-blue-100",children:"per person"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(W,{onClick:()=>h(!1),size:"lg",className:"bg-white text-blue-600 hover:bg-gray-100 px-8 py-6 text-lg shadow-xl hover:shadow-2xl hover:scale-105 transition-all",children:[r.jsx(ri,{className:"w-5 h-5 mr-2"}),"Book Now"]}),r.jsxs(W,{onClick:()=>h(!1),size:"lg",variant:"outline",className:"bg-white/10 backdrop-blur-sm text-white border-white/30 hover:bg-white/20 px-8 py-6 text-lg",children:[r.jsx(Ws,{className:"w-5 h-5 mr-2"}),"View Calendar"]})]})]})]})})]})]})})]})}),v==="booking"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative h-[250px] sm:h-[350px] lg:h-[450px] bg-gray-900 overflow-hidden",children:[r.jsx(fn,{src:xe.image,alt:`${xe.name} escape room experience`,className:"w-full h-full object-cover opacity-70"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 sm:p-8 lg:p-12 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl mb-3 sm:mb-4",children:xe.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 lg:gap-6 text-sm sm:text-base lg:text-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[r.jsx(jr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{children:xe.duration})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[r.jsx(Xr,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{children:xe.players})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[r.jsx($f,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsxs("span",{children:["Age ",xe.ageRecommendation]})]}),r.jsx(De,{className:`${vt(xe.difficulty)} border-0 text-sm sm:text-base px-3 py-1.5`,children:xe.difficulty})]})]})})]}),r.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("h2",{className:"text-xl sm:text-2xl text-gray-900 mb-4 sm:mb-6",children:"Choose Your Adventure"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Y.map(le=>r.jsxs("div",{onClick:()=>l(le.id),className:`group rounded-2xl border-2 overflow-hidden transition-all duration-300 hover:shadow-xl cursor-pointer bg-white ${o===le.id?"shadow-xl border-blue-600":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[r.jsx(De,{className:`absolute top-3 left-3 ${vt(le.difficulty)} border-0 shadow-md z-10`,children:le.difficulty}),r.jsx(fn,{src:le.image,alt:`${le.name} escape room`,className:"w-full h-full object-cover"})]}),r.jsxs("div",{className:"p-5",children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:le.name}),r.jsxs("div",{className:"flex items-center gap-1 mb-4 text-sm",children:[r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-gray-900",children:le.rating}),r.jsxs("span",{className:"text-gray-500",children:["(",le.reviewCount,")"]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),r.jsx("span",{children:le.duration})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),r.jsx("span",{children:le.players})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx($f,{className:"w-4 h-4"}),r.jsxs("span",{children:["Age ",le.ageRecommendation]})]}),r.jsx("div",{className:"flex items-center gap-1",children:He(le.difficultyLevel)})]})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"text-xl text-blue-600",children:["$",le.price,r.jsx("span",{className:"text-sm text-gray-500",children:"/person"})]}),r.jsxs(W,{onClick:Ee=>{Ee.stopPropagation(),l(le.id),h(!0)},variant:"outline",size:"sm",className:"text-sm whitespace-nowrap border-blue-600 text-blue-600 hover:bg-blue-50",children:[r.jsx(Ws,{className:"w-4 h-4 mr-1"}),"See Details"]})]})]})]},le.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[r.jsxs(he,{className:"p-6 sm:p-8 bg-white shadow-sm border border-gray-200 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 gap-2",children:[r.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Select Date"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(W,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-lg border-gray-300 hover:bg-gray-50",onClick:()=>{Ue===0?(xt(11),Ot(ut-1)):xt(Ue-1)},children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx("span",{className:"text-sm sm:text-base text-gray-900 px-2 whitespace-nowrap min-w-[140px] text-center",children:new Date(ut,Ue).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),r.jsx(W,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-lg border-gray-300 hover:bg-gray-50",onClick:()=>{Ue===11?(xt(0),Ot(ut+1)):xt(Ue+1)},children:r.jsx($n,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 sm:gap-3",children:[Le.map(le=>r.jsx("div",{className:"text-center text-sm text-gray-600 py-2",children:le},le)),Array.from({length:new Date(ut,Ue+1,0).getDate()}).map((le,Ee)=>{const We=Ee+1,at=new Date(ut,Ue,We),nt=s===We,It=new Date,vr=at.toDateString()===It.toDateString(),Xt=at<new Date(It.getFullYear(),It.getMonth(),It.getDate()),Mt=xe?.blockedDates||e?.blockedDates||[],Gt=xe?.customDates||e?.customAvailableDates||[],Wt=xe?.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],xr=xe?.advanceBooking||30,Cr=new Date(It);Cr.setDate(Cr.getDate()+xr);const Pr=at>Cr,Gr=Aie(at,Mt),os=Eie(at,Wt,Gt);K8(at,Gt);const ws=!Xt&&!Gr&&os&&!Pr;return r.jsxs("button",{onClick:()=>ws&&n(We),disabled:!ws,className:`
                            aspect-square rounded-xl text-base transition-all flex items-center justify-center relative
                            ${vr&&!nt?"text-white shadow-md":nt?"text-gray-900 border-2 shadow-sm bg-white hover:bg-gray-50":ws?"text-gray-700 hover:bg-gray-50 border border-green-300 bg-green-50":"text-gray-400 cursor-not-allowed border border-red-200 bg-red-50 opacity-60"}
                          `,style:{backgroundColor:vr&&!nt?t:nt?void 0:ws?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderColor:nt?t:ws?"rgba(34, 197, 94, 0.3)":"rgba(239, 68, 68, 0.3)"},title:ws?"Available":Gr?"Date blocked by admin":os?Pr?`Cannot book more than ${xr} days in advance`:"Past date":"Not operating on this day",children:[We,ws&&!nt&&!vr&&r.jsx("span",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-green-500"}),!ws&&!Xt&&r.jsx("span",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-red-500"})]},Ee)})]}),r.jsxs("div",{className:"mt-4 flex items-center justify-center gap-4 text-xs text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("span",{children:"Available"})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("span",{children:"Blocked/Unavailable"})]})]})]}),s&&r.jsxs(he,{className:"p-6 sm:p-8 bg-white shadow-sm border border-gray-200 rounded-2xl",children:[r.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-1 sm:mb-2",children:["Available Times - ",new Date(ut,Ue,s).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),r.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Timezone: ",pe]}),tt.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:r.jsx(Is,{className:"w-8 h-8 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Available Times"}),r.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"This date is not available for booking. It may be blocked by the admin or outside operating hours. Please select another date."})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:tt.map(le=>r.jsxs("button",{onClick:()=>le.available&&i(le.time),disabled:!le.available,className:`
                            p-4 sm:p-5 rounded-xl border-2 text-center transition-all
                            ${a===le.time?"shadow-lg transform scale-105":le.available?"border-gray-200 hover:border-gray-300 hover:shadow-md hover:scale-102":"border-gray-100 cursor-not-allowed opacity-50"}
                          `,style:{backgroundColor:a===le.time?t:void 0,borderColor:a===le.time?t:void 0},children:[r.jsx("div",{className:`text-sm sm:text-base mb-2 ${a===le.time?"text-white":le.available?"text-gray-900":"text-gray-400"}`,children:le.time}),r.jsx("div",{className:`text-xs flex items-center justify-center gap-1 ${a===le.time?"text-white/90":le.available?"text-green-600":"text-red-500"}`,children:le.available?r.jsxs(r.Fragment,{children:[r.jsx(Xr,{className:"w-3 h-3"}),r.jsxs("span",{children:[le.spots," spots"]})]}):r.jsx("span",{children:"Sold out"})}),r.jsxs("div",{className:`mt-2 text-[11px] ${a===le.time?"text-white/80":"text-gray-500"}`,children:["Duration: ",mt," min"]})]},le.time))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"lg:sticky lg:top-4",children:r.jsx(he,{className:"p-6 sm:p-8 bg-gradient-to-br from-white to-gray-50 shadow-2xl border-2 rounded-2xl max-h-[calc(100vh-2rem)] overflow-y-auto",style:{borderColor:`${t}20`},children:r.jsxs("div",{className:"space-y-6 pb-20 sm:pb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b-2",style:{borderColor:`${t}20`},children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}15`},children:r.jsx(ri,{className:"w-5 h-5",style:{color:t}})}),r.jsx("h2",{className:"text-xl text-gray-900",children:"Your Booking"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[r.jsxs("label",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4",style:{color:t}}),r.jsx("span",{className:"",children:"Number of Players"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4 mt-3",children:[r.jsx(W,{variant:"outline",size:"icon",onClick:()=>d(Math.max(2,c-1)),className:"h-12 w-12 rounded-full hover:scale-110 transition-transform",style:{borderColor:t,color:t},children:"-"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl text-gray-900",style:{color:t},children:c}),r.jsx("div",{className:"text-xs text-gray-500",children:"players"})]}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>d(Math.min(10,c+1)),className:"h-12 w-12 rounded-full hover:scale-110 transition-transform",style:{borderColor:t,color:t},children:"+"})]})]}),r.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(ym,{className:"w-4 h-4",style:{color:t}}),"Game"]}),r.jsx("span",{className:"text-gray-900 text-right truncate max-w-[55%]",children:xe.name})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(qs,{className:"w-4 h-4",style:{color:t}}),"Date"]}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",s,", 2025"]})]}),a&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4",style:{color:t}}),"Time"]}),r.jsx("span",{className:"text-gray-900",children:a})]})]})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-5 border-2",style:{borderColor:`${t}30`},children:[r.jsxs("div",{className:"flex justify-between mb-3 text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:"text-gray-900",children:["$",xe.price,"  ",c]})]}),r.jsx(Ze,{className:"my-3"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-base text-gray-900",children:"Total"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-3xl",style:{color:t},children:["$",zt]}),r.jsx("div",{className:"text-xs text-gray-500",children:"USD"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(W,{onClick:()=>h(!0),variant:"outline",className:"w-full h-12 text-base border-2 hover:bg-gray-50",style:{borderColor:`${t}30`,color:t},children:[r.jsx(Ws,{className:"w-4 h-4 mr-2"}),"See Full Details"]}),r.jsxs(W,{onClick:()=>x("cart"),disabled:!Re,className:"w-full text-white h-14 text-lg shadow-xl hover:shadow-2xl transform hover:scale-[1.02] transition-all relative overflow-hidden group",style:{backgroundColor:Re?t:void 0,opacity:Re?1:.5},children:[r.jsx("div",{className:"absolute inset-0 bg-white/20 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),r.jsx(ri,{className:"w-5 h-5 mr-2 relative z-10"}),r.jsx("span",{className:"relative z-10",children:a?"Continue to Cart":"Select Time to Continue"})]}),!a&&r.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Please select a time slot to continue"})]})]})})})})]})]})]}),v==="cart"&&r.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>x("booking"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Booking"]}),r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(ri,{className:"w-6 h-6",style:{color:t}}),r.jsx("h2",{className:"text-gray-900",children:"Your Cart"})]}),r.jsx("div",{className:"space-y-4 mb-6",children:r.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden",children:r.jsx(fn,{src:xe.image,alt:xe.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-gray-900 mb-2",children:xe.name}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("div",{children:["Date: Nov ",s,", 2025 at ",a]}),r.jsxs("div",{children:["Players: ",c,"  $",xe.price]})]})]}),r.jsxs("div",{className:"text-gray-900",style:{color:t},children:["$",zt]})]})}),r.jsx(Ze,{className:"my-6"}),(ye||$e)&&r.jsxs("div",{className:"mb-6 space-y-4",children:[ye&&r.jsxs("div",{children:[!ee&&!F&&r.jsx("button",{onClick:()=>J(!0),className:"text-sm md:text-base hover:underline",style:{color:t},children:"Add promo code"}),F&&!ee&&r.jsx(Ph,{onApply:Er,className:"mb-4"}),ee&&r.jsx(Ph,{onApply:Er,onRemove:hr,appliedCode:ee.code,appliedDiscount:ee.discount,appliedType:ee.type,className:"mb-4"})]}),$e&&r.jsxs("div",{children:[!K&&!U&&r.jsx("button",{onClick:()=>Z(!0),className:"text-sm md:text-base hover:underline",style:{color:t},children:"Apply gift card"}),U&&!K&&r.jsx(Th,{onApply:Ct,className:"mb-4"}),K&&r.jsx(Th,{onApply:Ct,onRemove:is,appliedCode:K.code,appliedAmount:K.amount,className:"mb-4"})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:"text-gray-900",children:["$",cr()]})]}),ee&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-green-600",children:["Promo Code (",ee.code,")"]}),r.jsxs("span",{className:"text-green-600",children:["-$",Pt().toFixed(2)]})]}),K&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-green-600",children:["Gift Card (",K.code,")"]}),r.jsxs("span",{className:"text-green-600",children:["-$",kt().toFixed(2)]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",zt.toFixed(2)]})]})]}),r.jsx(W,{onClick:()=>{const le=xe?.stripeCheckoutUrl||xe?.stripe_checkout_url||xe?.stripe_checkout_url;console.log(" Proceed to Checkout clicked"),console.log("Selected Game Data:",xe),console.log("Checkout URL found:",le),le?(console.log(" Redirecting to Stripe URL:",le),re.success("Redirecting to checkout...",{duration:1e3}),setTimeout(()=>{window.location.href=le},500)):(console.log(" No checkout URL found, showing checkout form"),x("checkout"))},className:"w-full text-white h-12",style:{backgroundColor:t},children:"Proceed to Checkout"})]})]}),v==="checkout"&&r.jsxs("div",{className:"max-w-6xl mx-auto p-3 sm:p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>x("cart"),variant:"outline",className:"mb-4 sm:mb-6 min-h-[44px] px-4",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:r.jsxs(he,{className:"p-3 sm:p-4 md:p-6 bg-white border border-gray-200 shadow-sm",children:[r.jsx("h2",{className:"text-gray-900 mb-4 sm:mb-6 text-lg sm:text-xl",children:"Contact Information"}),r.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-xs text-green-900 font-medium mb-1",children:" Required Format:"}),r.jsxs("ul",{className:"text-xs text-green-800 space-y-0.5",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Name:"})," First and Last name (e.g., John Doe)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Email:"})," Valid email address (e.g., john@example.com)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Phone:"})," 10+ digits, any format (e.g., 555-123-4567)"]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"name",className:"text-gray-700",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(de,{id:"name",type:"text",placeholder:"John Doe",value:w.name,onChange:le=>{N({...w,name:le.target.value}),z.name&&M({...z,name:void 0})},onBlur:()=>{const le=ioe(w.name);le.isValid||M({...z,name:le.error})},className:`pl-10 h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500 ${z.name?"border-red-500 bg-red-50":""}`})]}),z.name&&r.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[r.jsx(hs,{className:"w-3 h-3"}),z.name]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"email",className:"text-gray-700",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(Ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(de,{id:"email",type:"email",placeholder:"john@example.com",value:w.email,onChange:le=>{N({...w,email:le.target.value}),z.email&&M({...z,email:void 0})},onBlur:()=>{const le=aoe(w.email);le.isValid||M({...z,email:le.error})},className:`pl-10 h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500 ${z.email?"border-red-500 bg-red-50":""}`})]}),z.email&&r.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[r.jsx(hs,{className:"w-3 h-3"}),z.email]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"phone",className:"text-gray-700",children:["Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsx(la,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx(de,{id:"phone",type:"tel",placeholder:"(555) 123-4567",value:w.phone,onChange:le=>{N({...w,phone:le.target.value}),z.phone&&M({...z,phone:void 0})},onBlur:()=>{const le=ooe(w.phone);le.isValid||M({...z,phone:le.error})},className:`pl-10 h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500 ${z.phone?"border-red-500 bg-red-50":""}`})]}),z.phone&&r.jsxs("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[r.jsx(hs,{className:"w-3 h-3"}),z.phone]})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(he,{className:"p-3 sm:p-4 md:p-6 bg-white border border-gray-200 shadow-sm",children:[r.jsx("h3",{className:"text-gray-900 mb-4 text-lg sm:text-xl",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:xe.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",s,", 2025"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:a})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:c})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",zt]})]})]}),r.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(zs,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Secure Payment via Stripe"}),r.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"You'll be redirected to Stripe's secure checkout page to complete your payment."}),r.jsxs("ul",{className:"text-xs text-blue-600 space-y-1",children:[r.jsx("li",{children:" Apple Pay, Google Pay, and all major cards"}),r.jsx("li",{children:" Bank-level encryption and security"}),r.jsx("li",{children:" Instant booking confirmation"})]})]})]})}),r.jsx(W,{onClick:gr,disabled:!Je||V,className:"w-full text-white min-h-[44px] h-12 sm:h-14 text-sm sm:text-base",style:{backgroundColor:Je?t:void 0},children:V?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(rn,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Go to Secure Checkout $",zt]})})]})})]})]}),v==="payment"&&E&&r.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>x("checkout"),variant:"ghost",className:"mb-6 text-gray-600 hover:text-gray-900",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Checkout"]}),r.jsxs(he,{className:"p-6 md:p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Complete Payment"}),r.jsx("p",{className:"text-gray-600",children:"Enter your card details to confirm your booking"})]}),r.jsx("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-[#1e1e1e] rounded-lg border border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900 font-medium",children:xe?.name})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900 font-medium",children:[new Date(ut,Ue,s).toLocaleDateString()," at ",a]})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Party Size"}),r.jsxs("span",{className:"text-gray-900 font-medium",children:[c," players"]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900 font-semibold text-lg",children:"Total Amount"}),r.jsxs("span",{className:"text-2xl font-bold",style:{color:t},children:["$",zt]})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-blue-900 font-medium mb-2",children:" Payment Information Required:"}),r.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Card Number:"})," 16 digits (e.g., 4242 4242 4242 4242)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Expiry Date:"})," MM/YY format (e.g., 12/25)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"CVC:"})," 3 digits on back of card (e.g., 123)"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"ZIP Code:"})," Your billing postal code"]})]}),r.jsx("p",{className:"text-xs text-blue-700 mt-2 italic",children:" Test Mode: Use card 4242 4242 4242 4242 with any future expiry and CVC 123"})]}),r.jsx(Jie,{stripe:nQe,options:{clientSecret:E},children:r.jsx(Qe,{})})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx(Mn,{className:"w-4 h-4"}),r.jsx("span",{children:"Your payment information is secure and encrypted by Stripe"})]})]})]}),v==="success"&&r.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-6",style:{backgroundColor:`${t}15`},children:r.jsx(Lt,{className:"w-12 h-12",style:{color:t}})}),r.jsx("h2",{className:"text-3xl text-gray-900 mb-2 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full p-4 md:p-6 mb-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-gray-900",children:A||or})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900",children:xe.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",s,", 2025 at ",a]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[c," people"]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",zt]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full",children:r.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:w.email})]})}),r.jsx(W,{onClick:bt,className:"text-white px-8",style:{backgroundColor:t},children:"Book Another Experience"})]})})]})}function aQe({config:t,onConfigChange:e}){const s={logoUrl:"",logoSize:64,logoPosition:"top",headlineText:t?.widgetTitle||"",headlineFont:t?.fontFamily||"",headlineSize:28,headlineColor:"#111827",headlineAlign:"center",descriptionHtml:t?.widgetDescription||"",descriptionCharLimit:280,widgetWidth:1024,widgetHeight:768,responsiveScale:1,minWidth:320,maxWidth:1600,previewDevice:"desktop",themeVariant:"light",themeColor:"#2563eb"},n=j.useMemo(()=>({...s,...t?.customSettings||{}}),[t]),a=!!t?.proLockedCustomSettings,i=(u,h)=>{const m={...t,customSettings:{...n,[u]:h}};e(m)},o=u=>{if(!u)return;if(!u.type.startsWith("image/")){re.error("Please upload a valid image file");return}const h=new FileReader;h.onload=()=>i("logoUrl",String(h.result)),h.readAsDataURL(u)},l=u=>{u==="mobile"?(i("previewDevice","mobile"),i("widgetWidth",375)):u==="tablet"?(i("previewDevice","tablet"),i("widgetWidth",768)):(i("previewDevice","desktop"),i("widgetWidth",1024))},c=(u,h,m,f)=>Number.isNaN(u)||u<h||u>m?(re.error(`${f} must be between ${h} and ${m}`),!1):!0,d=()=>String(n.descriptionHtml||"").slice(0,n.descriptionCharLimit);return r.jsxs("div",{className:"space-y-6 relative",children:[a&&r.jsx("div",{className:"absolute inset-0 z-10 bg-white/70 backdrop-blur-sm border rounded-xl flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("div",{className:"text-lg font-semibold",children:"Pro Features"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Upgrade to unlock Custom Settings"}),r.jsx(W,{disabled:!0,variant:"default",children:"Upgrade"})]})}),r.jsxs(wn,{defaultValue:"visual",children:[r.jsxs(kn,{className:"grid w-full grid-cols-4",children:[r.jsx(Tt,{value:"visual",children:"Visual"}),r.jsx(Tt,{value:"content",children:"Content"}),r.jsx(Tt,{value:"display",children:"Display"}),r.jsx(Tt,{value:"preview",children:"Preview"})]}),r.jsxs(Bt,{value:"visual",className:"space-y-6",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Logo Settings"}),r.jsx(Ft,{children:"Configure logo image, size, and position"})]}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Upload Logo"}),r.jsx(de,{type:"file",accept:"image/*",disabled:a,onChange:u=>o(u.target.files?.[0])})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Size"}),r.jsx(de,{type:"range",min:24,max:200,value:n.logoSize,disabled:a,onChange:u=>i("logoSize",parseInt(u.target.value,10))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Position"}),r.jsxs(sr,{value:n.logoPosition,onValueChange:u=>i("logoPosition",u),children:[r.jsx(ar,{disabled:a,children:r.jsx(nr,{placeholder:"Select position"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"top",children:"Top"}),r.jsx(Ae,{value:"bottom",children:"Bottom"}),r.jsx(Ae,{value:"left",children:"Left"}),r.jsx(Ae,{value:"right",children:"Right"})]})]})]})]})})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Headline"}),r.jsx(Ft,{children:"Control font, size, color, and alignment"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Text"}),r.jsx(de,{value:n.headlineText,disabled:a,onChange:u=>i("headlineText",u.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Font Family"}),r.jsx(de,{value:n.headlineFont,disabled:a,onChange:u=>i("headlineFont",u.target.value),placeholder:"e.g., Inter, Arial"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Size"}),r.jsx(de,{type:"range",min:12,max:48,value:n.headlineSize,disabled:a,onChange:u=>i("headlineSize",parseInt(u.target.value,10))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Color"}),r.jsx(de,{type:"color",value:n.headlineColor,disabled:a,onChange:u=>i("headlineColor",u.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Alignment"}),r.jsxs(sr,{value:n.headlineAlign,onValueChange:u=>i("headlineAlign",u),children:[r.jsx(ar,{disabled:a,children:r.jsx(nr,{placeholder:"Select alignment"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"left",children:"Left"}),r.jsx(Ae,{value:"center",children:"Center"}),r.jsx(Ae,{value:"right",children:"Right"})]})]})]})]})]})]})]}),r.jsx(Bt,{value:"content",className:"space-y-6",children:r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Description"}),r.jsx(Ft,{children:"Rich text content with character limit and formatting"})]}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[r.jsx(X,{children:"Rich Text"}),r.jsx("div",{contentEditable:!a,className:"min-h-[120px] p-3 border rounded-md focus:outline-none",onInput:u=>i("descriptionHtml",u.target.innerHTML),dangerouslySetInnerHTML:{__html:d()}})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Character Limit"}),r.jsx(de,{type:"number",min:50,max:2e3,value:n.descriptionCharLimit,disabled:a,onChange:u=>{const h=parseInt(u.target.value,10);c(h,50,2e3,"Character limit")&&i("descriptionCharLimit",h)}})]})]})})]})}),r.jsx(Bt,{value:"display",className:"space-y-6",children:r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Widget Display"}),r.jsx(Ft,{children:"Configure size and responsive behavior"})]}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Width"}),r.jsx(de,{type:"range",min:n.minWidth,max:n.maxWidth,value:n.widgetWidth,disabled:a,onChange:u=>i("widgetWidth",parseInt(u.target.value,10))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Responsive Scale"}),r.jsx(de,{type:"range",min:.5,max:2,step:.05,value:n.responsiveScale,disabled:a,onChange:u=>i("responsiveScale",parseFloat(u.target.value))})]})]})})]})}),r.jsx(Bt,{value:"preview",className:"space-y-6",children:r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Preview Options"}),r.jsx(Ft,{children:"Device emulation and theme selectors"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Device"}),r.jsxs(sr,{value:n.previewDevice,onValueChange:l,children:[r.jsx(ar,{disabled:a,children:r.jsx(nr,{placeholder:"Select device"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"mobile",children:"Mobile"}),r.jsx(Ae,{value:"tablet",children:"Tablet"}),r.jsx(Ae,{value:"desktop",children:"Desktop"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Theme Variant"}),r.jsxs(sr,{value:n.themeVariant,onValueChange:u=>i("themeVariant",u),children:[r.jsx(ar,{disabled:a,children:r.jsx(nr,{placeholder:"Select theme"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"light",children:"Light"}),r.jsx(Ae,{value:"dark",children:"Dark"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Primary Color"}),r.jsx(de,{type:"color",value:n.themeColor,disabled:a,onChange:u=>i("themeColor",u.target.value)})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"rounded-xl border bg-white p-4",children:[r.jsx("div",{className:"mb-3 text-sm text-gray-600",children:"Real-time Preview"}),r.jsx("div",{className:"mx-auto border rounded-xl overflow-hidden",style:{width:n.widgetWidth,transform:`scale(${n.responsiveScale})`,transformOrigin:"top center"},children:r.jsx(Ww,{primaryColor:n.themeColor,config:{...t,customSettings:n}})})]})]})]})})]})]})}function iQe({isOpen:t,onClose:e,games:s,venueId:n,onUpdate:a}){const[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(!1),[h,m]=j.useState("overview"),[f,v]=j.useState(""),[x,g]=j.useState(""),[b,w]=j.useState(""),[N,C]=j.useState([]);j.useEffect(()=>{i&&(v(i.stripe_product_id||""),g(i.stripe_price_id||""),w(i.stripe_checkout_url||""),C(i.stripe_prices||[]))},[i]);const S=async()=>{if(!i)return;const E=f.trim(),O=x.trim(),$=b.trim();if(!E&&!$){re.error("Please enter at least a Product ID or Checkout URL");return}u(!0);try{console.log(" Saving payment configuration:",{gameId:i.id,productId:E,priceId:O,checkoutUrl:$});const{error:T}=await Wr.from("games").update({stripe_product_id:E||null,stripe_price_id:O||null,stripe_checkout_url:$||null,stripe_sync_status:"synced",stripe_last_sync:new Date().toISOString()}).eq("id",i.id);if(T){console.error("Database update error:",T),re.error("Failed to save configuration");return}const I={...i,stripe_product_id:E||void 0,stripe_price_id:O||void 0,stripe_checkout_url:$||void 0,stripe_sync_status:"synced"};o(I);const L=s.map(z=>z.id===i.id?I:z);a(L),re.success(" Configuration saved successfully",{description:"Payment settings updated in database"}),m("overview")}catch(T){console.error("Error saving configuration:",T),re.error("Failed to save configuration")}finally{u(!1)}},A=async()=>{u(!0);try{console.log(" Syncing all games from database...");const E=s.map(T=>T.id),{data:O,error:$}=await Wr.from("games").select("*").in("id",E);if($){console.error("Sync error:",$),re.error("Failed to sync games");return}if(O){const T=O.map(I=>({id:I.id,name:I.name,price:I.price,stripe_product_id:I.stripe_product_id,stripe_price_id:I.stripe_price_id,stripe_checkout_url:I.stripe_checkout_url,stripe_prices:I.stripe_prices,stripe_sync_status:I.stripe_sync_status}));a(T),re.success(" All games synced",{description:`Updated ${T.length} game(s)`})}}catch(E){console.error("Error syncing games:",E),re.error("Failed to sync games")}finally{u(!1)}},k=s.filter(E=>E.stripe_product_id||E.stripe_checkout_url).length;return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:"!w-[95vw] !max-w-[500px] !h-[95vh] !max-h-[95vh] sm:!w-[92vw] sm:!max-w-[800px] sm:!h-[92vh] md:!w-[90vw] md:!max-w-[1200px] md:!h-[90vh] lg:!w-[85vw] lg:!max-w-[2000px] lg:!h-[88vh] xl:!w-[80vw] xl:!max-w-[2000px] xl:!h-[85vh] p-0 overflow-hidden flex flex-col !rounded-lg",children:[r.jsx(br,{className:"px-4 py-4 sm:px-6 sm:py-5 border-b border-gray-200 dark:border-[#2a2a2a] flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(rn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx(pr,{className:"text-lg sm:text-xl lg:text-2xl font-semibold",children:"Stripe Payment Settings"}),r.jsx(wr,{className:"text-sm sm:text-base",children:"Manage Stripe payment configurations for all games in this widget"})]})]})})}),r.jsx("div",{className:"px-4 py-3 sm:px-6 sm:py-4 border-b border-gray-200 dark:border-[#2a2a2a] flex-shrink-0",children:r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 mr-2",children:"Provider:"}),r.jsxs(W,{variant:"default",size:"sm",className:"gap-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700",children:[r.jsx("span",{children:"Stripe"}),r.jsx(De,{variant:"secondary",className:"bg-green-600 text-white text-xs",children:"Active"})]}),r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",disabled:!0,children:[r.jsx("span",{children:"PayPal"}),r.jsx(De,{variant:"outline",className:"text-xs",children:"Coming Soon"})]}),r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",disabled:!0,children:[r.jsx("span",{children:"2Checkout"}),r.jsx(De,{variant:"outline",className:"text-xs",children:"Coming Soon"})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 sm:px-6 sm:py-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6",children:[r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(rn,{className:"w-6 h-6 sm:w-7 sm:h-7 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:s.length}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Games"})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(Lt,{className:"w-6 h-6 sm:w-7 sm:h-7 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:k}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configured"})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(hs,{className:"w-6 h-6 sm:w-7 sm:h-7 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:s.length-k}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]})]})})})]}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Games"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(De,{variant:"outline",className:"text-xs",children:[k," of ",s.length," configured"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:A,disabled:d,className:"gap-2",children:[d?r.jsx(ia,{className:"w-4 h-4 animate-spin"}):r.jsx(Ln,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Sync All"})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-5 pb-6",children:s.map(E=>{const O=!!(E.stripe_product_id||E.stripe_checkout_url);return r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] hover:border-blue-300 dark:hover:border-blue-700 transition-colors cursor-pointer",onClick:()=>{o(E),m("overview")},children:r.jsxs(_e,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-base text-gray-900 dark:text-white",children:E.name}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",E.price.toFixed(2)]})]}),O?r.jsx(Lt,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0"}):r.jsx(hs,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0"})]}),O?r.jsx(De,{className:"bg-green-600 text-white mb-3",children:"Configured"}):r.jsx(De,{variant:"outline",className:"border-orange-600 text-orange-600 mb-3",children:"Pending"}),E.stripe_product_id&&r.jsxs("div",{className:"space-y-1.5 mb-2",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Product ID"}),r.jsx("p",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded truncate text-gray-900 dark:text-gray-100",children:E.stripe_product_id})]}),E.stripe_price_id&&r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Price ID"}),r.jsx("p",{className:"text-xs font-mono bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded truncate text-gray-900 dark:text-gray-100",children:E.stripe_price_id})]}),!O&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic mt-2",children:"Click to configure payment"})]})},E.id)})}),i&&r.jsx(mr,{open:!!i,onOpenChange:()=>o(null),children:r.jsxs(fr,{className:"!w-[95vw] !max-w-[500px] sm:!max-w-[600px] md:!max-w-[700px]",children:[r.jsxs(br,{children:[r.jsxs(pr,{children:[i.name," - Payment Configuration"]}),r.jsx(wr,{children:"Configure Stripe payment settings for this game"})]}),r.jsxs(wn,{value:h,onValueChange:m,children:[r.jsxs(kn,{className:"grid w-full grid-cols-2",children:[r.jsx(Tt,{value:"overview",children:"Overview"}),r.jsx(Tt,{value:"edit",children:"Edit"})]}),r.jsx(Bt,{value:"overview",className:"space-y-4",children:r.jsx("div",{className:"space-y-3",children:i.stripe_product_id?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm",children:"Product ID"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{value:i.stripe_product_id,readOnly:!0,className:"font-mono text-sm"}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>{navigator.clipboard.writeText(i.stripe_product_id),re.success("Copied!")},children:r.jsx(on,{className:"w-4 h-4"})})]})]}),i.stripe_price_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm",children:"Price ID"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{value:i.stripe_price_id,readOnly:!0,className:"font-mono text-sm"}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>{navigator.clipboard.writeText(i.stripe_price_id),re.success("Copied!")},children:r.jsx(on,{className:"w-4 h-4"})})]})]})]}):r.jsxs(jo,{children:[r.jsx(Ws,{className:"h-4 w-4"}),r.jsx(No,{children:"No configuration found. Use Edit tab to add settings."})]})})}),r.jsx(Bt,{value:"edit",className:"space-y-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-product-id",children:"Stripe Product ID"}),r.jsx(de,{id:"edit-product-id",placeholder:"prod_xxxxxxxxxxxxx",value:f,onChange:E=>v(E.target.value),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-price-id",children:"Stripe Price ID"}),r.jsx(de,{id:"edit-price-id",placeholder:"price_xxxxxxxxxxxxx",value:x,onChange:E=>g(E.target.value),className:"font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"edit-checkout-url",children:"Checkout URL (Optional)"}),r.jsx(de,{id:"edit-checkout-url",placeholder:"https://buy.stripe.com/...",value:b,onChange:E=>w(E.target.value),className:"font-mono"})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(W,{onClick:S,disabled:d,className:"flex-1",children:[d?r.jsx(ia,{className:"w-4 h-4 animate-spin mr-2"}):r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save"]}),r.jsx(W,{variant:"outline",onClick:()=>o(null),children:"Cancel"})]})]})})]})]})})]})]})})}const SG=t=>t&&t.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")||"game";function loe({config:t,onConfigChange:e,onPreview:s,embedContext:n}){const[a,i]=j.useState("general"),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState(null),[m,f]=j.useState(!1),{games:v,createGame:x,updateGame:g,deleteGame:b,loading:w}=s3(n?.venueId),N=M=>{const V=M.settings||{};return{id:M.id,name:M.name,description:M.description,tagline:M.tagline,difficulty:M.difficulty,duration:M.duration,minPlayers:M.min_players,maxPlayers:M.max_players,min_players:M.min_players,max_players:M.max_players,price:M.price,childPrice:M.child_price,child_price:M.child_price,status:M.status,image:M.image_url,imageUrl:M.image_url,coverImage:M.image_url,settings:V,operatingDays:V.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:V.startTime||"10:00",endTime:V.endTime||"22:00",slotInterval:V.slotInterval||60,advanceBooking:V.advanceBooking||30,requiresWaiver:V.requiresWaiver||!1,selectedWaiver:V.selectedWaiver||null,cancellationWindow:V.cancellationWindow||24,specialInstructions:V.specialInstructions||"",galleryImages:V.galleryImages||[],videos:V.videos||[],language:V.language||["English"],minChildren:V.minChildren||0,maxChildren:V.maxChildren||0,location:V.location||"",faqs:V.faqs||[],cancellationPolicies:V.cancellationPolicies||[],stripe_price_id:M.stripe_price_id||null,stripe_product_id:M.stripe_product_id||null,stripe_sync_status:M.stripe_sync_status||"pending"}},C=j.useMemo(()=>v.map(N),[v]);j.useEffect(()=>{const M=Array.isArray(t?.games)?t.games:[];(M.length!==C.length||M.some((B,F)=>{const J=C[F];return J?JSON.stringify(B)!==JSON.stringify(J):!0}))&&e({...t,games:C})},[C,t,e]);const S=(M,V)=>{e({...t,[M]:V})},A=()=>{d(null),l(!0)},k=async M=>{if(!n?.venueId){re.error("Venue ID is required to create games"),console.error("Missing venueId in embedContext:",n);return}try{const V=SG(M.slug||M.name);console.log("Creating game with data:",{venueId:n.venueId,name:M.name,difficulty:M.difficulty});const B={venue_id:n.venueId,name:M.name,slug:V,description:M.description||"",tagline:M.tagline||"",difficulty:E(M.difficulty),duration:M.duration||60,min_players:M.minAdults||2,max_players:M.maxAdults||8,price:M.adultPrice||0,child_price:M.childPrice||M.adultPrice||0,min_age:M.minAge||0,success_rate:M.successRate||75,image_url:M.coverImage||"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",status:"active",stripe_product_id:M.stripeProductId||null,stripe_price_id:M.stripePriceId||null,stripe_sync_status:M.stripeSyncStatus||null,stripe_last_sync:M.stripeLastSync||null,settings:{category:M.category,eventType:M.eventType,gameType:M.gameType||"physical",minChildren:M.minChildren,maxChildren:M.maxChildren,language:M.language,activityDetails:M.activityDetails,additionalInformation:M.additionalInformation,faqs:M.faqs,cancellationPolicies:M.cancellationPolicies,accessibility:M.accessibility,location:M.location,galleryImages:M.galleryImages,videos:M.videos,operatingDays:M.operatingDays,startTime:M.startTime,endTime:M.endTime,slotInterval:M.slotInterval,advanceBooking:M.advanceBooking,customDates:M.customDates||[],blockedDates:M.blockedDates||[],customHours:M.customHours||{},customHoursEnabled:M.customHoursEnabled||!1,selectedWidget:M.selectedWidget||"calendar-single-event",requiresWaiver:M.requiresWaiver,selectedWaiver:M.selectedWaiver,cancellationWindow:M.cancellationWindow,specialInstructions:M.specialInstructions,availability:{}}};if(console.log("Mapped Supabase game data:",B),c?.id&&!c.id.startsWith("game-"))console.log("Updating game:",c.id),await g(c.id,B),re.success("Experience updated successfully!");else{console.log("Creating new game in Supabase");const F=await x(B);console.log("Game created successfully:",F),re.success("Experience created successfully!")}l(!1),d(null)}catch(V){console.error("Error saving game:",{message:V?.message,code:V?.code,details:V?.details,hint:V?.hint,error:V});const B=V?.message||V?.details||V?.hint||"Failed to save experience";re.error(B)}},E=M=>{if(typeof M=="string"){const V=M.toLowerCase();return V.includes("easy")?"Easy":V.includes("hard")||V.includes("expert")||V.includes("extreme")?"Hard":"Medium"}return typeof M=="number"?M<=2?"Easy":M>=4?"Hard":"Medium":"Medium"},O=()=>{l(!1),d(null)},$=M=>{d(M),l(!0)},T=M=>{const V=M.settings||{};return{name:M.name,description:M.description,category:V.category||"Adventure",tagline:M.tagline||"",eventType:V.eventType||"public",gameType:V.gameType||"physical",minAdults:M.min_players||2,maxAdults:M.max_players||8,minChildren:V.minChildren||0,maxChildren:V.maxChildren||4,adultPrice:M.price||30,childPrice:M.child_price||M.price||25,duration:M.duration||60,difficulty:M.difficulty||"Medium",minAge:M.min_age||12,language:V.language||["English"],successRate:M.success_rate||75,activityDetails:V.activityDetails||"",additionalInformation:V.additionalInformation||"",faqs:V.faqs||[],cancellationPolicies:V.cancellationPolicies||[],accessibility:V.accessibility||{strollerAccessible:!0,wheelchairAccessible:!1},location:V.location||"",coverImage:M.image_url||"",galleryImages:V.galleryImages||[],videos:V.videos||[],operatingDays:V.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:V.startTime||"09:00",endTime:V.endTime||"21:00",slotInterval:V.slotInterval||60,advanceBooking:V.advanceBooking||30,requiresWaiver:V.requiresWaiver||!1,selectedWaiver:V.selectedWaiver||null,cancellationWindow:V.cancellationWindow||24,specialInstructions:V.specialInstructions||"",customCapacityFields:V.customCapacityFields||[],groupDiscount:V.groupDiscount||!1,dynamicPricing:V.dynamicPricing||!1,peakPricing:V.peakPricing||{enabled:!1,weekdayPeakPrice:0,weekendPeakPrice:0,peakStartTime:"",peakEndTime:""},groupTiers:V.groupTiers||[],customDates:V.customDates||[],blockedDates:V.blockedDates||[],customHours:V.customHours||{},customHoursEnabled:V.customHoursEnabled||!1,selectedWidget:V.selectedWidget||"calendar-single-event",slug:M.slug||SG(M.name)}},I=()=>{const M={id:`q-${Date.now()}`,question:"New Question",type:"select",options:["Option 1","Option 2"],required:!1};e({...t,additionalQuestions:[...t.additionalQuestions||[],M]})},L=(M,V)=>{e({...t,additionalQuestions:t.additionalQuestions.map(B=>B.id===M?{...B,...V}:B)})},z=M=>{e({...t,additionalQuestions:t.additionalQuestions.filter(V=>V.id!==M)})};return r.jsxs("div",{className:"space-y-6 pb-24 sm:pb-28",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl text-gray-900",children:"Calendar Widget Settings"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your booking widget appearance and options"})]}),r.jsxs(W,{onClick:s,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(ys,{className:"w-4 h-4"}),"Preview Widget"]})]}),r.jsxs(wn,{value:a,onValueChange:i,children:[r.jsxs(kn,{className:"grid w-full grid-cols-3 sm:grid-cols-6 gap-1",children:[r.jsx(Tt,{value:"general",className:"text-xs sm:text-sm",children:"General"}),r.jsx(Tt,{value:"games",className:"text-xs sm:text-sm",children:"Games"}),r.jsx(Tt,{value:"availability",className:"text-xs sm:text-sm",children:"Availability"}),r.jsx(Tt,{value:"custom",className:"text-xs sm:text-sm",children:"Custom"}),r.jsx(Tt,{value:"seo",className:"text-xs sm:text-sm",children:"SEO"}),r.jsx(Tt,{value:"advanced",className:"text-xs sm:text-sm",children:"Advanced"})]}),r.jsxs(Bt,{value:"general",className:"space-y-6 pb-24",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Display Options"}),r.jsx(Ft,{children:"Control what elements appear in your widget"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Secured Badge"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display security badge in header"})]}),r.jsx(Rt,{checked:t.showSecuredBadge,onCheckedChange:M=>S("showSecuredBadge",M)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Health & Safety"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display health and safety badge"})]}),r.jsx(Rt,{checked:t.showHealthSafety,onCheckedChange:M=>S("showHealthSafety",M)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Enable Veteran Discount"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Show veteran ticket pricing option"})]}),r.jsx(Rt,{checked:t.enableVeteranDiscount,onCheckedChange:M=>S("enableVeteranDiscount",M)})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Widget Header"}),r.jsx(Ft,{children:"Customize the title and description of your widget"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"widget-title",children:"Widget Title"}),r.jsx(de,{id:"widget-title",value:t.widgetTitle,onChange:M=>S("widgetTitle",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"widget-description",children:"Widget Description"}),r.jsx(Ps,{id:"widget-description",value:t.widgetDescription,onChange:M=>S("widgetDescription",M.target.value)})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Theme & Preview"}),r.jsx(Ft,{children:"Control font, timezone label, and preview behavior"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"font-family",children:"Font Family"}),r.jsx(de,{id:"font-family",placeholder:"e.g., Inter, Arial, 'Playfair Display'",value:t.fontFamily||"",onChange:M=>S("fontFamily",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"timezone-label",children:"Timezone Label"}),r.jsx(de,{id:"timezone-label",placeholder:"e.g., PST, Local Time",value:t.timezoneLabel||"",onChange:M=>S("timezoneLabel",M.target.value)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"slot-duration",children:"Slot Duration (minutes)"}),r.jsx(de,{id:"slot-duration",type:"number",min:15,step:15,value:Number(t.slotDurationMinutes??90),onChange:M=>S("slotDurationMinutes",parseInt(M.target.value||"90",10))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Preview Role"}),r.jsxs(sr,{value:t.previewRole||"customer",onValueChange:M=>S("previewRole",M),children:[r.jsx(ar,{children:r.jsx(nr,{placeholder:"Select a role"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"customer",children:"Customer"}),r.jsx(Ae,{value:"staff",children:"Staff"}),r.jsx(Ae,{value:"admin",children:"Admin"})]})]})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Promo Code"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enable promo code entry in cart"})]}),r.jsx(Rt,{checked:!!t.showPromoCodeInput,onCheckedChange:M=>S("showPromoCodeInput",M)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Gift Card"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Enable gift card application in cart"})]}),r.jsx(Rt,{checked:!!t.showGiftCardInput,onCheckedChange:M=>S("showGiftCardInput",M)})]})]})]})]})]}),r.jsx(Bt,{value:"games",children:r.jsxs(he,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Experiences / Games"}),r.jsx(Ft,{children:"Configure your escape room experiences - stored in database"})]}),r.jsxs(W,{onClick:A,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Experience"]})]}),r.jsx(_e,{className:"space-y-4",children:w?r.jsx("p",{className:"text-sm text-gray-500",children:"Loading games..."}):v.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:'No games configured yet. Click "Add Experience" to create your first game.'}):v.map(M=>r.jsx("div",{className:"p-4 border rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:M.name}),r.jsx("p",{className:"text-sm text-gray-600",children:M.description}),r.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-500",children:[r.jsxs("span",{children:[" ",M.duration," min"]}),r.jsxs("span",{children:[" ",M.min_players,"-",M.max_players," players"]}),r.jsxs("span",{children:[" $",M.price]}),r.jsxs("span",{children:[" ",M.difficulty]}),r.jsx("span",{className:`px-2 py-0.5 rounded ${M.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:M.status})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>$(M),className:"h-8",children:[r.jsx(ul,{className:"w-4 h-4 mr-1"}),"Settings"]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",disabled:u===M.id,children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",className:"w-48",children:[r.jsxs(Dt,{onClick:()=>$(M),className:"cursor-pointer",children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{onClick:async()=>{h(M.id);try{const V=`${M.name} (Copy)`,B=V.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),F={...M,id:void 0,name:V,slug:B,stripe_product_id:void 0,stripe_price_id:void 0,stripe_sync_status:"not_synced",created_at:void 0,updated_at:void 0};await x(F),re.success(`Game duplicated as "${V}"`)}catch(V){console.error("Error duplicating game:",V),re.error("Failed to duplicate game")}finally{h(null)}},disabled:u===M.id,className:"cursor-pointer",children:[r.jsx(on,{className:"w-4 h-4 mr-2"}),u===M.id?"Duplicating...":"Duplicate"]}),r.jsxs(Dt,{onClick:async()=>{confirm(`Delete "${M.name}"?`)&&await b(M.id)},className:"cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]})},M.id))})]})}),r.jsxs(Bt,{value:"availability",className:"space-y-6 pb-24",children:[r.jsx(he,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20 dark:border-blue-900",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Ws,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Widget-Level Availability Settings"}),r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["These settings apply to the entire booking widget. For game-specific schedules (operating days, hours, advance booking), edit each game individually in the ",r.jsx("strong",{children:"Games tab"}),"."]})]})]})})}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Add a custom date"}),r.jsx(Ft,{children:"Add special available dates outside regular schedule (e.g., special events)"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-green-50 dark:bg-green-900/20",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"custom-available-date",className:"text-sm",children:"Select a date"}),r.jsx(de,{id:"custom-available-date",type:"date",className:"w-full"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"custom-start-time",className:"text-sm",children:"Start Time"}),r.jsx(de,{id:"custom-start-time",type:"time",defaultValue:"10:00"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"custom-end-time",className:"text-sm",children:"End Time"}),r.jsx(de,{id:"custom-end-time",type:"time",defaultValue:"22:00"})]})]}),r.jsxs(W,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>{const M=document.getElementById("custom-available-date"),V=document.getElementById("custom-start-time"),B=document.getElementById("custom-end-time"),F=M?.value,J=V?.value,ee=B?.value;if(F&&J&&ee){const q=t.customAvailableDates||[];e({...t,customAvailableDates:[...q,{date:F,startTime:J,endTime:ee,reason:`Custom availability ${J} - ${ee}`}]}),re.success(`Custom date added: ${F} from ${J} to ${ee}`),M.value="",V.value="10:00",B.value="22:00"}else re.error("Please select a date and times")},children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Custom Date"]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add dates that are normally closed but should be available for booking"})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Custom Available Dates"}),!t.customAvailableDates||t.customAvailableDates.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"No custom dates added"}):r.jsx("div",{className:"space-y-2",children:t.customAvailableDates.map((M,V)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-green-200 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium",children:new Date(M.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsx(De,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:"Custom"})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",M.startTime," - ",M.endTime]})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{e({...t,customAvailableDates:t.customAvailableDates.filter((B,F)=>F!==V)}),re.success("Custom date removed")},children:r.jsx(ks,{className:"w-4 h-4"})})]},V))})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Blocked Dates"}),r.jsx(Ft,{children:"Mark specific dates as unavailable (holidays, maintenance, etc.)"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"blocked-date",children:"Block a date"}),r.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-gray-50 dark:bg-gray-900",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"blocked-date",className:"text-sm",children:"Select a date"}),r.jsx(de,{id:"blocked-date",type:"date",className:"w-full"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"blocked-start-time",className:"text-sm",children:"Start Time (Optional)"}),r.jsx(de,{id:"blocked-start-time",type:"time",placeholder:"10:00 AM"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty to block entire day"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"blocked-end-time",className:"text-sm",children:"End Time (Optional)"}),r.jsx(de,{id:"blocked-end-time",type:"time",placeholder:"10:00 PM"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty to block entire day"})]})]}),r.jsxs(W,{className:"w-full bg-red-600 hover:bg-red-700",onClick:()=>{const M=document.getElementById("blocked-date"),V=document.getElementById("blocked-start-time"),B=document.getElementById("blocked-end-time"),F=M?.value,J=V?.value,ee=B?.value;if(F){const q=t.blockedDates||[],U=J&&ee?"time-slot":"full-day",Z=J&&ee?`Blocked ${J} - ${ee}`:"Blocked by admin";e({...t,blockedDates:[...q,{date:F,startTime:J||null,endTime:ee||null,blockType:U,reason:Z}]}),re.success(U==="time-slot"?`Time slot ${J} - ${ee} blocked on ${F}`:`Date ${F} blocked`),M.value="",V.value="",B.value=""}else re.error("Please select a date")},children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Block This Date"]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Block entire days or specific time slots when bookings should not be allowed"})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Currently Blocked Dates"}),!t.blockedDates||t.blockedDates.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"No dates blocked"}):r.jsx("div",{className:"space-y-2",children:t.blockedDates.map((M,V)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-medium",children:new Date(M.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),M.blockType==="time-slot"&&r.jsx(De,{variant:"secondary",className:"text-xs",children:"Time Slot"})]}),M.startTime&&M.endTime?r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",M.startTime," - ",M.endTime]}):r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Full day blocked"})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{e({...t,blockedDates:t.blockedDates.filter((B,F)=>F!==V)}),re.success(M.blockType==="time-slot"?"Time slot unblocked":"Date unblocked")},children:r.jsx(ks,{className:"w-4 h-4"})})]},V))})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Game Schedules"}),r.jsx(Ft,{children:"Each game's operating schedule is configured in the game settings"})]}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-4",children:t.games&&t.games.length>0?t.games.map(M=>r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx("h4",{className:"font-semibold mb-2",children:M.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Operating Days:"}),r.jsx("p",{className:"font-medium",children:M.operatingDays&&M.operatingDays.length>0?M.operatingDays.join(", "):"All days"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Hours:"}),r.jsxs("p",{className:"font-medium",children:[M.startTime||"9:00 AM"," - ",M.endTime||"9:00 PM"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Slot Interval:"}),r.jsxs("p",{className:"font-medium",children:[M.slotInterval||60," minutes"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Advance Booking:"}),r.jsxs("p",{className:"font-medium",children:[M.advanceBooking||30," days"]})]})]}),r.jsx(W,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>{$(M),i("games")},children:"Edit Schedule"})]},M.id)):r.jsx("p",{className:"text-sm text-gray-500",children:"No games configured yet. Add games in the Games tab."})})})]})]}),r.jsx(Bt,{value:"custom",children:r.jsx(aQe,{config:t,onConfigChange:e})}),r.jsxs(Bt,{value:"seo",className:"space-y-6 pb-24",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"SEO Optimization"}),r.jsx(Ft,{children:"Set page metadata to improve search visibility"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"seo-title",children:"SEO Title"}),r.jsx(de,{id:"seo-title",placeholder:"e.g., Mystery Manor | Your Business Name",value:t.seoTitle||"",onChange:M=>S("seoTitle",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"business-name",children:"Business Name"}),r.jsx(de,{id:"business-name",placeholder:"Your Business Name",value:t.businessName||"",onChange:M=>S("businessName",M.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"meta-description",children:"Meta Description"}),r.jsx(Ps,{id:"meta-description",placeholder:"Short description used in search results and social cards",rows:4,value:t.metaDescription||"",onChange:M=>S("metaDescription",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"seo-keywords",children:"SEO Keywords"}),r.jsx(de,{id:"seo-keywords",placeholder:"escape room, booking, team building, family fun",value:t.seoKeywords||"",onChange:M=>S("seoKeywords",M.target.value)})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Location & GEO Settings"}),r.jsx(Ft,{children:"Configure geographic information for local SEO"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Enable LocalBusiness schema"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Adds JSON-LD structured data for better local SEO"})]}),r.jsx(Rt,{checked:!!t.enableLocalBusinessSchema,onCheckedChange:M=>S("enableLocalBusinessSchema",M)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"street-address",children:"Street Address"}),r.jsx(de,{id:"street-address",value:t.streetAddress||"",onChange:M=>S("streetAddress",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"city",children:"City"}),r.jsx(de,{id:"city",value:t.city||"",onChange:M=>S("city",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"state",children:"State / Province"}),r.jsx(de,{id:"state",value:t.state||"",onChange:M=>S("state",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"zip",children:"ZIP / Postal Code"}),r.jsx(de,{id:"zip",value:t.zipCode||"",onChange:M=>S("zipCode",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"country",children:"Country"}),r.jsx(de,{id:"country",value:t.country||"",onChange:M=>S("country",M.target.value)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",children:"Phone Number"}),r.jsx(de,{id:"phone",placeholder:"+1 (555) 123-4567",value:t.phoneNumber||"",onChange:M=>S("phoneNumber",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",children:"Email Address"}),r.jsx(de,{id:"email",placeholder:"info@example.com",value:t.emailAddress||"",onChange:M=>S("emailAddress",M.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"landmarks",children:"Nearby Landmarks"}),r.jsx(Ps,{id:"landmarks",placeholder:"e.g., Downtown Plaza, City Museum",rows:3,value:t.nearbyLandmarks||"",onChange:M=>S("nearbyLandmarks",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"parking",children:"Parking & Transportation"}),r.jsx(Ps,{id:"parking",placeholder:"e.g., Free parking in rear lot; street parking available",rows:3,value:t.parkingInfo||"",onChange:M=>S("parkingInfo",M.target.value)})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[r.jsx(Rt,{id:"show-location",checked:t.showLocationBlock!==!1,onCheckedChange:M=>S("showLocationBlock",M)}),r.jsx(X,{htmlFor:"show-location",children:"Show Location & Info block on booking page"})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Social Profiles"}),r.jsx(Ft,{children:"Optional links for richer social cards"})]}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"facebook",children:"Facebook URL"}),r.jsx(de,{id:"facebook",value:t.facebookUrl||"",onChange:M=>S("facebookUrl",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"instagram",children:"Instagram URL"}),r.jsx(de,{id:"instagram",value:t.instagramUrl||"",onChange:M=>S("instagramUrl",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"twitter",children:"X / Twitter URL"}),r.jsx(de,{id:"twitter",value:t.twitterUrl||"",onChange:M=>S("twitterUrl",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"tripadvisor",children:"Tripadvisor URL"}),r.jsx(de,{id:"tripadvisor",value:t.tripadvisorUrl||"",onChange:M=>S("tripadvisorUrl",M.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"google-biz",children:"Google Business ID"}),r.jsx(de,{id:"google-biz",placeholder:"optional",value:t.googleBusinessId||"",onChange:M=>S("googleBusinessId",M.target.value)})]})]})})]})]}),r.jsxs(Bt,{value:"advanced",className:"space-y-6 pb-24",children:[r.jsxs(he,{className:"border-blue-200 dark:border-blue-800 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30",children:[r.jsx(Ke,{className:"px-4 py-3 sm:px-6 sm:py-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs(Xe,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[r.jsx(ul,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 dark:text-blue-400"}),"Payment Configuration Manager"]}),r.jsx(Ft,{className:"mt-1 text-sm sm:text-base",children:"Manage Stripe payment settings for all games in this widget"})]}),r.jsxs(W,{onClick:()=>f(!0),className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 dark:bg-[#4f46e5] dark:hover:bg-[#4338ca] gap-2",children:[r.jsx(ul,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Payment Settings"})]})]})}),r.jsx(_e,{className:"px-4 py-4 sm:px-6",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 sm:p-4 bg-white dark:bg-[#1e1e1e] rounded-lg border border-gray-200 dark:border-[#2a2a2a] transition-colors hover:border-blue-300 dark:hover:border-blue-700",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-lg sm:text-xl font-bold text-blue-600 dark:text-blue-400",children:t.games?.length||0})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white",children:"Total Games"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-[#737373]",children:"In this widget"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 sm:p-4 bg-white dark:bg-[#1e1e1e] rounded-lg border border-gray-200 dark:border-[#2a2a2a] transition-colors hover:border-green-300 dark:hover:border-green-700",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-lg sm:text-xl font-bold text-green-600 dark:text-green-400",children:t.games?.filter(M=>M.stripe_product_id||M.stripeProductId).length||0})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white",children:"Configured"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-[#737373]",children:"With Stripe"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 sm:p-4 bg-white dark:bg-[#1e1e1e] rounded-lg border border-gray-200 dark:border-[#2a2a2a] transition-colors hover:border-amber-300 dark:hover:border-amber-700",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-600 dark:text-amber-400",children:(t.games?.length||0)-(t.games?.filter(M=>M.stripe_product_id||M.stripeProductId).length||0)})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-white",children:"Pending"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-[#737373]",children:"Need setup"})]})]})]})})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsxs(Ke,{className:"px-4 py-3 sm:px-6 sm:py-4",children:[r.jsx(Xe,{className:"text-lg sm:text-xl text-gray-900 dark:text-white",children:"Payment Settings for Widget"}),r.jsx(Ft,{className:"text-sm sm:text-base",children:"Games with Stripe checkout configured for this widget"})]}),r.jsx(_e,{className:"px-4 py-4 sm:px-6",children:t.games&&t.games.length>0?r.jsxs("div",{className:"space-y-4",children:[t.games.filter(M=>M.stripe_product_id||M.stripeProductId).map(M=>{const V=M.stripe_product_id||M.stripeProductId,B=M.stripe_price_id||M.stripePriceId,F=M.stripePrices||[],J=M.stripe_sync_status||M.stripeSyncStatus||"not_synced";return r.jsx("div",{className:"p-4 border rounded-lg bg-gradient-to-r from-green-50 to-blue-50",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h4",{className:"font-semibold text-lg",children:M.name}),J==="synced"&&r.jsx(De,{className:"bg-green-600",children:" Checkout Enabled"})]}),V&&r.jsxs("div",{className:"space-y-2 mt-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stripe Product:"}),r.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded border",children:V})]}),F&&F.length>0?r.jsxs("div",{className:"mt-3",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700 block mb-2",children:["Available Prices (",F.length,"):"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:F.map((ee,q)=>r.jsxs("div",{className:"bg-white p-3 rounded border",children:[r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:["$",((ee.unitAmount||0)/100).toFixed(2)," ",ee.currency?.toUpperCase()||"USD"]}),ee.lookupKey&&r.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[" ",ee.lookupKey]}),ee.metadata?.pricing_type&&r.jsx(De,{variant:"outline",className:"text-xs mt-1",children:ee.metadata.pricing_type})]})}),r.jsx("code",{className:"text-xs text-gray-500 block mt-2 truncate",children:ee.priceId})]},ee.priceId||q))})]}):B?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stripe Price:"}),r.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded border",children:B})]}):null]}),(M.stripeCheckoutUrl||M.stripe_checkout_url)&&r.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded border border-purple-200",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx("span",{className:"text-sm font-medium text-purple-900",children:" Checkout URL:"})}),r.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded border block truncate",children:M.stripeCheckoutUrl||M.stripe_checkout_url}),r.jsx("p",{className:"text-xs text-purple-700 mt-2",children:'Users will be redirected to this URL when clicking "Proceed to Checkout"'})]})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{$(M),i("games")},children:[r.jsx(ul,{className:"w-4 h-4 mr-1"}),"Configure"]})]})},M.id)}),t.games.filter(M=>M.stripe_product_id||M.stripeProductId).length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No games have Stripe checkout configured yet."}),r.jsx(W,{variant:"outline",onClick:()=>i("games"),children:"Configure Payment Settings for Games"})]})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No games added yet."}),r.jsx(W,{variant:"outline",onClick:()=>i("games"),children:"Add Games First"})]})})]}),r.jsxs(he,{children:[r.jsxs(Ke,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Checkout URL Configuration"}),r.jsx(Ft,{children:"Set custom Stripe checkout URLs for each game"})]}),r.jsx(W,{onClick:async()=>{try{re.loading("Saving checkout URLs...",{id:"save-urls"});for(const M of t.games)M.stripeCheckoutUrl!==void 0&&await g(M.id,{stripe_checkout_url:M.stripeCheckoutUrl||null});re.success("Checkout URLs saved successfully!",{id:"save-urls"})}catch(M){console.error("Error saving checkout URLs:",M),re.error("Failed to save checkout URLs",{id:"save-urls"})}},className:"bg-blue-600 hover:bg-blue-700",children:"Save Checkout URLs"})]}),r.jsx(_e,{children:t.games&&t.games.length>0?r.jsx("div",{className:"space-y-4",children:t.games.map(M=>r.jsx("div",{className:"p-4 border rounded-lg bg-gray-50",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:M.name}),M.stripeCheckoutUrl&&r.jsx(De,{className:"bg-green-600",children:" URL Configured"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:`checkout-url-${M.id}`,children:"Stripe Checkout URL"}),r.jsx(de,{id:`checkout-url-${M.id}`,placeholder:"https://buy.stripe.com/...",value:M.stripeCheckoutUrl||"",onChange:V=>{const B=t.games.map(F=>F.id===M.id?{...F,stripeCheckoutUrl:V.target.value}:F);e({...t,games:B})}}),r.jsx("p",{className:"text-xs text-gray-500",children:'Users will be redirected to this URL when clicking "Proceed to Checkout"'})]}),M.stripeCheckoutUrl&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(M.stripeCheckoutUrl),re.success("Checkout URL copied!")},children:[r.jsx(on,{className:"w-4 h-4 mr-1"}),"Copy URL"]}),r.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>window.open(M.stripeCheckoutUrl,"_blank"),children:[r.jsx(tn,{className:"w-4 h-4 mr-1"}),"Test URL"]}),r.jsxs(W,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>{const V=t.games.map(B=>B.id===M.id?{...B,stripeCheckoutUrl:""}:B);e({...t,games:V}),re.success("Checkout URL removed")},children:[r.jsx(Is,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]})},M.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No games added yet."}),r.jsx(W,{variant:"outline",onClick:()=>i("games"),children:"Add Games First"})]})})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsxs(Ke,{className:"px-4 py-3 sm:px-6 sm:py-4",children:[r.jsx(Xe,{className:"text-lg sm:text-xl text-gray-900 dark:text-white",children:"Advanced Settings"}),r.jsx(Ft,{className:"text-sm sm:text-base",children:"Configure cancellation policies and other advanced options"})]}),r.jsx(_e,{className:"px-4 py-4 sm:px-6 space-y-4 sm:space-y-6",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"cancellation-policy",className:"text-sm font-medium text-gray-900 dark:text-white",children:"Cancellation Policy"}),r.jsx(Ps,{id:"cancellation-policy",value:t.cancellationPolicy,onChange:M=>S("cancellationPolicy",M.target.value),rows:6,className:"resize-none bg-white dark:bg-[#1e1e1e] border-gray-200 dark:border-[#2a2a2a] text-gray-900 dark:text-white"})]})})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx(Ke,{className:"px-4 py-3 sm:px-6 sm:py-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Xe,{className:"text-lg sm:text-xl text-gray-900 dark:text-white",children:"Additional Questions"}),r.jsx(Ft,{className:"text-sm sm:text-base",children:"Add custom questions to your booking form"})]}),r.jsxs(W,{onClick:I,size:"sm",className:"w-full sm:w-auto flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 dark:bg-[#4f46e5] dark:hover:bg-[#4338ca]",children:[r.jsx(Ts,{className:"w-4 h-4"}),r.jsx("span",{children:"Add Question"})]})]})}),r.jsx(_e,{className:"px-4 py-4 sm:px-6 space-y-6",children:(t.additionalQuestions||[]).map((M,V)=>r.jsxs("div",{className:"space-y-4 border-b pb-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"text-lg font-semibold",children:["Question ",V+1]}),r.jsx(W,{onClick:()=>z(M.id),variant:"destructive",size:"sm",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Question"}),r.jsx(de,{value:M.question,onChange:B=>L(M.id,{question:B.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Type"}),r.jsxs(sr,{value:M.type,onValueChange:B=>L(M.id,{type:B}),children:[r.jsx(ar,{children:r.jsx(nr,{placeholder:"Select a question type"})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"text",children:"Text"}),r.jsx(Ae,{value:"select",children:"Select"})]})]})]}),M.type==="select"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Options (comma-separated)"}),r.jsx(de,{value:M.options.join(","),onChange:B=>L(M.id,{options:B.target.value.split(",")})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Rt,{id:`required-${M.id}`,checked:M.required,onCheckedChange:B=>L(M.id,{required:B})}),r.jsx(X,{htmlFor:`required-${M.id}`,children:"Required"})]})]},M.id))})]})]})]}),r.jsx(mr,{open:o,onOpenChange:M=>!M&&O(),children:r.jsxs(fr,{className:"!w-[90vw] !max-w-[1000px] h-[90vh] !max-h-[90vh] overflow-hidden p-0 flex flex-col",children:[r.jsxs("div",{className:"sr-only",children:[r.jsx(pr,{children:c?"Edit Experience":"Add New Experience"}),r.jsx(wr,{children:"Complete the multi-step wizard to add a new escape room experience to your calendar widget"})]}),r.jsx(EKe,{onComplete:k,onCancel:O,initialData:c?T(c):void 0,mode:c?"edit":"create",theme:"calendar",embedContext:n})]})}),r.jsx(iQe,{isOpen:m,onClose:()=>f(!1),games:t.games||[],venueId:n?.venueId||"",onUpdate:M=>{e({...t,games:M})}})]})}function oQe({widgetType:t,config:e,onConfigChange:s,onPreview:n}){const[a,i]=j.useState("general"),o=(b,w)=>{s({...e,[b]:w})},l=()=>{const b={id:`game-${Date.now()}`,name:"New Experience",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:3,description:"A thrilling escape room experience",price:30,tagline:"An exciting adventure awaits",rating:4.5,reviews:100,players:"2-8 players",featured:!1};s({...e,games:[...e.games||[],b]})},c=(b,w)=>{s({...e,games:e.games.map(N=>N.id===b?{...N,...w}:N)})},d=b=>{s({...e,games:e.games.filter(w=>w.id!==b)})},u=()=>{const b={id:`ticket-${Date.now()}`,name:"New Ticket Type",description:"Description",price:30};s({...e,ticketTypes:[...e.ticketTypes||[],b]})},h=(b,w)=>{s({...e,ticketTypes:e.ticketTypes.map(N=>N.id===b?{...N,...w}:N)})},m=b=>{s({...e,ticketTypes:e.ticketTypes.filter(w=>w.id!==b)})},f=()=>{const b={id:`q-${Date.now()}`,question:"New Question",type:"select",options:["Option 1","Option 2"],required:!1};s({...e,additionalQuestions:[...e.additionalQuestions||[],b]})},v=(b,w)=>{s({...e,additionalQuestions:e.additionalQuestions.map(N=>N.id===b?{...N,...w}:N)})},x=b=>{s({...e,additionalQuestions:e.additionalQuestions.filter(w=>w.id!==b)})},g=()=>({bookgo:"BookGo Widget",calendar:"Calendar Widget",singlegame:"Single Game Widget",resolvex:"Resolvex Grid Widget",quick:"Quick Booking Widget",multistep:"Multi-Step Widget"})[t]||"Widget";return r.jsxs("div",{className:"space-y-6 pb-24 sm:pb-28",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl text-gray-900",children:[g()," Settings"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your booking widget appearance and options"})]}),r.jsxs(W,{onClick:n,variant:"outline",className:"flex items-center gap-2",children:[r.jsx(ys,{className:"w-4 h-4"}),"Preview Widget"]})]}),r.jsxs(wn,{value:a,onValueChange:i,children:[r.jsxs(kn,{className:"grid w-full grid-cols-5",children:[r.jsx(Tt,{value:"general",children:"General"}),r.jsx(Tt,{value:"games",children:"Games"}),r.jsx(Tt,{value:"tickets",children:"Ticket Types"}),r.jsx(Tt,{value:"seo",children:"SEO & GEO"}),r.jsx(Tt,{value:"advanced",children:"Advanced"})]}),r.jsxs(Bt,{value:"general",className:"space-y-6 pb-24",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Display Options"}),r.jsx(Ft,{children:"Control what elements appear in your widget"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Secured Badge"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display security badge in header"})]}),r.jsx(Rt,{checked:e.showSecuredBadge,onCheckedChange:b=>o("showSecuredBadge",b)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Show Health & Safety"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display health and safety badge"})]}),r.jsx(Rt,{checked:e.showHealthSafety,onCheckedChange:b=>o("showHealthSafety",b)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{children:"Enable Veteran Discount"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Show veteran ticket pricing option"})]}),r.jsx(Rt,{checked:e.enableVeteranDiscount,onCheckedChange:b=>o("enableVeteranDiscount",b)})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Widget Information"}),r.jsx(Ft,{children:"Basic widget settings and text"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Widget Title"}),r.jsx(de,{value:e.widgetTitle||"",onChange:b=>o("widgetTitle",b.target.value),placeholder:"e.g., Book Your Adventure"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Widget Description"}),r.jsx(Ps,{value:e.widgetDescription||"",onChange:b=>o("widgetDescription",b.target.value),placeholder:"Enter a description for your widget...",rows:3})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Cancellation Policy"}),r.jsx(Ft,{children:"Set your cancellation and refund policy"})]}),r.jsx(_e,{children:r.jsx(Ps,{value:e.cancellationPolicy||"",onChange:b=>o("cancellationPolicy",b.target.value),placeholder:"Enter your cancellation policy...",rows:4})})]})]}),r.jsx(Bt,{value:"games",className:"space-y-6 pb-24",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Experiences / Games"}),r.jsx(Ft,{children:"Configure your escape room experiences"})]}),r.jsxs(W,{onClick:l,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Experience"]})]})}),r.jsx(_e,{children:r.jsx(fa,{className:"h-[500px] pr-4 pb-16 sm:pb-20",children:r.jsx("div",{className:"space-y-4",children:e.games?.map((b,w)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Experience ",w+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>d(b.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Experience Name"}),r.jsx(de,{value:b.name,onChange:N=>c(b.id,{name:N.target.value}),placeholder:"e.g., Zombie Apocalypse",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Tagline"}),r.jsx(de,{value:b.tagline||"",onChange:N=>c(b.id,{tagline:N.target.value}),placeholder:"e.g., A thrilling adventure awaits",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Price ($)"}),r.jsx(de,{type:"number",value:b.price||30,onChange:N=>c(b.id,{price:parseFloat(N.target.value)}),placeholder:"30",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Duration"}),r.jsx(de,{value:b.duration||"1 Hour",onChange:N=>c(b.id,{duration:N.target.value}),placeholder:"1 Hour",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Age Range"}),r.jsx(de,{value:b.ageRange||"All ages",onChange:N=>c(b.id,{ageRange:N.target.value}),placeholder:"All ages",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Players"}),r.jsx(de,{value:b.players||"2-8 players",onChange:N=>c(b.id,{players:N.target.value}),placeholder:"2-8 players",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Difficulty Level (1-5)"}),r.jsx(de,{type:"number",min:"1",max:"5",value:b.difficulty||3,onChange:N=>c(b.id,{difficulty:parseInt(N.target.value)}),className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Description"}),r.jsx(Ps,{value:b.description||"",onChange:N=>c(b.id,{description:N.target.value}),placeholder:"Brief description of the experience...",className:"mt-1",rows:2})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Image URL"}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsx(de,{value:b.image,onChange:N=>c(b.id,{image:N.target.value}),placeholder:"https://..."}),r.jsx(W,{variant:"outline",size:"icon",children:r.jsx(ll,{className:"w-4 h-4"})})]}),b.image&&r.jsx("div",{className:"mt-2 w-full h-32 rounded overflow-hidden",children:r.jsx("img",{src:b.image,alt:b.name,className:"w-full h-full object-cover"})})]}),r.jsx("div",{className:"col-span-2",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Rt,{checked:b.featured||!1,onCheckedChange:N=>c(b.id,{featured:N})}),r.jsx(X,{children:"Featured Experience"})]})})]})]})})},b.id))})})})]})}),r.jsx(Bt,{value:"tickets",className:"space-y-6 pb-24",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Ticket Types"}),r.jsx(Ft,{children:"Configure pricing and ticket options"})]}),r.jsxs(W,{onClick:u,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Ticket Type"]})]})}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-4",children:e.ticketTypes?.map((b,w)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Ticket Type ",w+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>m(b.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Type Name"}),r.jsx(de,{value:b.name,onChange:N=>h(b.id,{name:N.target.value}),placeholder:"e.g., Players",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Price ($)"}),r.jsx(de,{type:"number",value:b.price,onChange:N=>h(b.id,{price:parseFloat(N.target.value)}),placeholder:"30",className:"mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Description"}),r.jsx(de,{value:b.description,onChange:N=>h(b.id,{description:N.target.value}),placeholder:"e.g., Ages 6 & Up",className:"mt-1"})]})]})]})})},b.id))})})]})}),r.jsxs(Bt,{value:"seo",className:"space-y-6 pb-24",children:[r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"SEO Optimization"}),r.jsx(Ft,{children:"Configure search engine optimization settings for better visibility"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Business Name"}),r.jsx(de,{value:e.businessName||"",onChange:b=>o("businessName",b.target.value),placeholder:"Your Escape Room Business Name",className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will appear in page titles and meta tags"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Meta Description"}),r.jsx(Ps,{value:e.metaDescription||"",onChange:b=>o("metaDescription",b.target.value),placeholder:"Describe your escape room business in 150-160 characters...",className:"mt-1 min-h-[80px]",maxLength:160}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(e.metaDescription||"").length,"/160 characters - This appears in search results"]})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Keywords"}),r.jsx(de,{value:e.seoKeywords||"",onChange:b=>o("seoKeywords",b.target.value),placeholder:"escape room, puzzle adventure, team building, entertainment",className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated keywords relevant to your business"})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Structured Data (Schema.org)"}),r.jsxs("div",{className:"flex items-center justify-between mt-2",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Enable LocalBusiness Schema"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Helps search engines understand your business location and details"})]}),r.jsx(Rt,{checked:e.enableLocalBusinessSchema??!0,onCheckedChange:b=>o("enableLocalBusinessSchema",b)})]})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Location & GEO Settings"}),r.jsx(Ft,{children:"Configure geographic information for local SEO"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx(X,{children:"Street Address"}),r.jsx(de,{value:e.streetAddress||"",onChange:b=>o("streetAddress",b.target.value),placeholder:"123 Main Street",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"City"}),r.jsx(de,{value:e.city||"",onChange:b=>o("city",b.target.value),placeholder:"New York",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"State/Province"}),r.jsx(de,{value:e.state||"",onChange:b=>o("state",b.target.value),placeholder:"NY",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"ZIP/Postal Code"}),r.jsx(de,{value:e.zipCode||"",onChange:b=>o("zipCode",b.target.value),placeholder:"10001",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Country"}),r.jsx(de,{value:e.country||"",onChange:b=>o("country",b.target.value),placeholder:"United States",className:"mt-1"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Phone Number"}),r.jsx(de,{value:e.phoneNumber||"",onChange:b=>o("phoneNumber",b.target.value),placeholder:"(555) 123-4567",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Email"}),r.jsx(de,{type:"email",value:e.emailAddress||"",onChange:b=>o("emailAddress",b.target.value),placeholder:"info@yourbusiness.com",className:"mt-1"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Nearby Landmarks"}),r.jsx(Ps,{value:e.nearbyLandmarks||"",onChange:b=>o("nearbyLandmarks",b.target.value),placeholder:"Near Times Square, 2 blocks from Central Station, across from City Hall...",className:"mt-1 min-h-[60px]"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Helps customers find you and improves local search rankings"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Parking & Transportation"}),r.jsx(Ps,{value:e.parkingInfo||"",onChange:b=>o("parkingInfo",b.target.value),placeholder:"Free parking available, accessible via Metro Blue Line, street parking with meters...",className:"mt-1 min-h-[60px]"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accessibility information for customers"})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Policies & Information"}),r.jsx(Ft,{children:"Important business policies displayed on game detail pages"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Cancellation Policy"}),r.jsx(Ps,{value:e.cancellationPolicy||"",onChange:b=>o("cancellationPolicy",b.target.value),placeholder:"Free cancellation up to 48 hours before booking. 24-48 hours: 50% refund...",className:"mt-1 min-h-[100px]"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Late Arrival Policy"}),r.jsx(Ps,{value:e.lateArrivalPolicy||"",onChange:b=>o("lateArrivalPolicy",b.target.value),placeholder:"Please arrive 15 minutes early. Late arrivals may result in reduced playing time...",className:"mt-1 min-h-[80px]"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Health & Safety Information"}),r.jsx(Ps,{value:e.healthSafetyInfo||"",onChange:b=>o("healthSafetyInfo",b.target.value),placeholder:"Regular sanitization, emergency exits available, first aid trained staff...",className:"mt-1 min-h-[80px]"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Accessibility Information"}),r.jsx(Ps,{value:e.accessibilityInfo||"",onChange:b=>o("accessibilityInfo",b.target.value),placeholder:"Wheelchair accessible, elevator access, accessible restrooms, service animals welcome...",className:"mt-1 min-h-[80px]"})]})]})]}),r.jsxs(he,{children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Social Media & Reviews"}),r.jsx(Ft,{children:"Connect your social profiles for better SEO"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Facebook URL"}),r.jsx(de,{value:e.facebookUrl||"",onChange:b=>o("facebookUrl",b.target.value),placeholder:"https://facebook.com/yourbusiness",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Instagram URL"}),r.jsx(de,{value:e.instagramUrl||"",onChange:b=>o("instagramUrl",b.target.value),placeholder:"https://instagram.com/yourbusiness",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Twitter URL"}),r.jsx(de,{value:e.twitterUrl||"",onChange:b=>o("twitterUrl",b.target.value),placeholder:"https://twitter.com/yourbusiness",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx(X,{children:"TripAdvisor URL"}),r.jsx(de,{value:e.tripadvisorUrl||"",onChange:b=>o("tripadvisorUrl",b.target.value),placeholder:"https://tripadvisor.com/...",className:"mt-1"})]})]}),r.jsx(Ze,{}),r.jsxs("div",{children:[r.jsx(X,{children:"Google My Business ID"}),r.jsx(de,{value:e.googleBusinessId||"",onChange:b=>o("googleBusinessId",b.target.value),placeholder:"Your Google Business Profile ID",className:"mt-1"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Improves local search rankings and map visibility"})]})]})]})]}),r.jsx(Bt,{value:"advanced",className:"space-y-6 pb-24",children:r.jsxs(he,{children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{children:"Additional Questions"}),r.jsx(Ft,{children:"Custom questions to ask during booking"})]}),r.jsxs(W,{onClick:f,size:"sm",className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add Question"]})]})}),r.jsx(_e,{children:r.jsx("div",{className:"space-y-4",children:e.additionalQuestions?.map((b,w)=>r.jsx(he,{className:"border-2",children:r.jsx(_e,{className:"pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs(X,{children:["Question ",w+1]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>x(b.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(ks,{className:"w-4 h-4"})})]}),r.jsxs("div",{children:[r.jsx(X,{children:"Question Text"}),r.jsx(de,{value:b.question,onChange:N=>v(b.id,{question:N.target.value}),placeholder:"e.g., How did you hear about us?",className:"mt-1"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{children:"Question Type"}),r.jsxs(sr,{value:b.type,onValueChange:N=>v(b.id,{type:N}),children:[r.jsx(ar,{className:"mt-1",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"select",children:"Dropdown"}),r.jsx(Ae,{value:"text",children:"Text Input"}),r.jsx(Ae,{value:"checkbox",children:"Checkbox"})]})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Rt,{checked:b.required,onCheckedChange:N=>v(b.id,{required:N})}),r.jsx(X,{children:"Required"})]})})]}),b.type==="select"&&r.jsxs("div",{children:[r.jsx(X,{children:"Options (comma-separated)"}),r.jsx(de,{value:b.options?.join(", ")||"",onChange:N=>v(b.id,{options:N.target.value.split(",").map(C=>C.trim())}),placeholder:"Option 1, Option 2, Option 3",className:"mt-1"})]})]})})},b.id))})})]})})]}),r.jsx("div",{className:"h-12 sm:h-20","aria-hidden":"true"})]})}function lQe({widgetId:t,widgetName:e,embedUrl:s}){return r.jsxs("div",{className:"space-y-6 pb-20",children:[r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Quick Start Guide"})}),r.jsx(_e,{className:"p-4 pt-0 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 text-sm",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Copy Code"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Choose iframe or script embed code from above"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 text-sm",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Paste HTML"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Add the code to your website HTML"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-blue-600 text-sm",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Go Live"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Test and publish your changes"})]})]})]})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Supported Platforms"})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{name:"WordPress",supported:!0},{name:"Wix",supported:!0},{name:"Squarespace",supported:!0},{name:"Shopify",supported:!0},{name:"Webflow",supported:!0},{name:"HTML/CSS",supported:!0},{name:"React",supported:!0},{name:"Vue.js",supported:!0}].map(n=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-gray-700",children:n.name})]},n.name))})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Platform-Specific Instructions"})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsxs(wn,{defaultValue:"wordpress",className:"w-full",children:[r.jsxs(kn,{className:"w-full grid grid-cols-4 h-9",children:[r.jsx(Tt,{value:"wordpress",className:"text-xs",children:"WordPress"}),r.jsx(Tt,{value:"wix",className:"text-xs",children:"Wix"}),r.jsx(Tt,{value:"squarespace",className:"text-xs",children:"Squarespace"}),r.jsx(Tt,{value:"shopify",className:"text-xs",children:"Shopify"})]}),r.jsxs(Bt,{value:"wordpress",className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Method 1: Using the Block Editor"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs text-gray-600 ml-2",children:[r.jsx("li",{children:"Edit your page/post in WordPress"}),r.jsx("li",{children:'Click the "+" button to add a new block'}),r.jsx("li",{children:'Search for "Custom HTML" block and add it'}),r.jsx("li",{children:"Paste the embed code into the HTML block"}),r.jsx("li",{children:"Update/Publish your page"})]})]}),r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Method 2: Using Shortcode (Advanced)"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs text-gray-600 ml-2",children:[r.jsx("li",{children:"Add the shortcode function to your theme's functions.php"}),r.jsx("li",{children:"Use [bookingtms] shortcode in your content"}),r.jsxs("li",{children:['Customize with parameters: [bookingtms widget="',t,'"]']})]})]})]}),r.jsx(Bt,{value:"wix",className:"mt-4 space-y-3",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs text-gray-600",children:[r.jsx("li",{children:"Open your Wix site editor"}),r.jsx("li",{children:'Click the "+" button on the left sidebar'}),r.jsx("li",{children:'Select "Embed"  "Embed a Widget"'}),r.jsx("li",{children:'Choose "Custom Code" or "HTML iframe"'}),r.jsx("li",{children:"Paste the embed code"}),r.jsx("li",{children:"Adjust the size and position"}),r.jsx("li",{children:"Publish your site"})]})}),r.jsx(Bt,{value:"squarespace",className:"mt-4 space-y-3",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs text-gray-600",children:[r.jsx("li",{children:"Edit the page where you want to add the widget"}),r.jsx("li",{children:'Click an insert point and select "Code"'}),r.jsx("li",{children:"Paste the embed code into the code block"}),r.jsx("li",{children:'Choose "HTML" as the code type'}),r.jsx("li",{children:'Click "Apply"'}),r.jsx("li",{children:"Save and publish your changes"})]})}),r.jsx(Bt,{value:"shopify",className:"mt-4 space-y-3",children:r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs text-gray-600",children:[r.jsx("li",{children:"Go to Online Store  Themes in Shopify admin"}),r.jsx("li",{children:'Click "Customize" on your active theme'}),r.jsx("li",{children:"Navigate to the page where you want the widget"}),r.jsx("li",{children:'Add a "Custom HTML" or "Custom Liquid" section'}),r.jsx("li",{children:"Paste the embed code"}),r.jsx("li",{children:"Save and publish"})]})})]})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Widget Features"})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(ml,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Fully Responsive"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Works perfectly on all screen sizes"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Xf,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Mobile Optimized"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Touch-friendly interface for mobile users"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(Yx,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Customizable"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Match your brand colors and style"})]})]})]})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Troubleshooting"})}),r.jsxs(_e,{className:"p-4 pt-0 space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Widget not displaying?"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600 ml-2",children:[r.jsx("li",{children:"Ensure the embed code is correctly pasted in your HTML"}),r.jsx("li",{children:"Check that your widget key is valid"}),r.jsx("li",{children:"Clear your browser cache and refresh the page"}),r.jsx("li",{children:"Make sure your website allows iframe embedding"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Widget appears too small?"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-gray-600 ml-2",children:[r.jsx("li",{children:"Adjust the height attribute in the iframe code (recommended: 800px)"}),r.jsx("li",{children:"Ensure the container div has sufficient width"}),r.jsx("li",{children:"The widget will auto-adjust to container width"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Need more help?"}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Contact our support team at"," ",r.jsx("a",{href:"mailto:support@bookingtms.com",className:"text-blue-600 hover:underline",children:"support@bookingtms.com"})," ","or check our"," ",r.jsx("a",{href:"/docs",className:"text-blue-600 hover:underline",children:"detailed documentation"})]})]})]})]}),r.jsx("div",{className:"border border-amber-200 bg-amber-50 dark:bg-amber-950/20 dark:border-amber-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"text-amber-600 dark:text-amber-500 flex-shrink-0 text-lg",children:""}),r.jsxs("div",{className:"space-y-1 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-200",children:"Security Notice"}),r.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 leading-relaxed",children:"Keep your widget key confidential. Do not share it publicly or commit it to public repositories. If you believe your key has been compromised, regenerate it immediately in your account settings."})]})]})})]})}function cQe({embedUrl:t,widgetName:e,widgetConfig:s}){const[n,a]=j.useState("desktop"),[i,o]=j.useState(0),l={desktop:{maxWidth:"1200px",height:"min(75vh, 820px)",label:"Full width responsive view"},tablet:{maxWidth:"820px",height:"min(75vh, 900px)",label:"iPad view (7681024)"},mobile:{maxWidth:"420px",height:"min(80vh, 720px)",label:"Phone view (375667)"}},c=()=>{o(d=>d+1)};return j.useEffect(()=>{typeof window<"u"&&window.innerWidth<640&&a("mobile")},[]),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:[r.jsx(Ke,{className:"p-2 sm:p-3 md:p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsx(Xe,{className:"text-sm sm:text-base",children:"Test Your Widget"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(W,{variant:"outline",size:"sm",onClick:c,className:"h-8 sm:h-9 text-xs sm:text-sm",children:[r.jsx(Ln,{className:"w-3 h-3 mr-1"}),"Refresh"]})})]})}),r.jsxs(_e,{className:"p-2 sm:p-3 md:p-4 pt-0 space-y-3 sm:space-y-4",children:[r.jsxs(wn,{value:n,onValueChange:d=>a(d),className:"w-full",children:[r.jsxs(kn,{className:"w-full grid grid-cols-3 h-9 sm:h-10",children:[r.jsxs(Tt,{value:"desktop",className:"text-xs sm:text-sm",children:[r.jsx(Yx,{className:"w-4 h-4 mr-1"}),"Desktop"]}),r.jsxs(Tt,{value:"tablet",className:"text-xs sm:text-sm",children:[r.jsx(sI,{className:"w-4 h-4 mr-1"}),"Tablet"]}),r.jsxs(Tt,{value:"mobile",className:"text-xs sm:text-sm",children:[r.jsx(Xf,{className:"w-4 h-4 mr-1"}),"Mobile"]})]}),["desktop","tablet","mobile"].map(d=>{const u=l[d];return r.jsxs(Bt,{value:d,className:"mt-4",children:[r.jsx("div",{className:"bg-gray-100 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4 flex items-center justify-center min-h-[320px]",children:r.jsx("div",{style:{width:"100%",maxWidth:u.maxWidth,height:u.height},className:"bg-white dark:bg-[#0a0a0a] rounded-lg shadow-2xl border border-gray-200 dark:border-[#2a2a2a] overflow-hidden",children:s&&s.games&&s.games.length>0?r.jsx("div",{className:"w-full h-full overflow-auto",children:r.jsx(Ww,{config:s,primaryColor:s.primaryColor||"#2563eb"})},`${d}-${i}`):r.jsx("iframe",{src:t,width:"100%",height:"100%",frameBorder:"0",allow:"payment; camera",allowFullScreen:!0,style:{border:"none"},title:`${e} - ${d}`},`${d}-${i}`)})}),r.jsx("div",{className:"mt-3 text-center",children:r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.label})})]},d)})]}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4",children:[r.jsx("p",{className:"text-xs sm:text-sm text-blue-900 dark:text-blue-200 font-medium mb-1",children:"Testing Tips:"}),r.jsxs("ul",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[r.jsx("li",{children:"Test all device sizes before deploying"}),r.jsx("li",{children:"Verify that buttons and interactions work correctly"}),r.jsx("li",{children:"Check that the widget loads quickly on all devices"}),r.jsx("li",{children:"Ensure colors match your brand"})]})]})]})]})}function dQe({embedUrl:t,widgetName:e,widgetId:s,iframeCode:n,scriptCode:a}){const i=l=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e} - Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f3f4f6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 24px;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #6b7280;
            font-size: 14px;
        }
        
        .widget-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .footer {
            margin-top: 20px;
            text-align: center;
            color: #6b7280;
            font-size: 14px;
        }
        
        .footer a {
            color: #2563eb;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header, .widget-container {
                padding: 15px;
            }
            
            h1 {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>${e} Test Page</h1>
            <p class="subtitle">
                This is a test page for the BookingTMS ${e}. 
                Open this file in any web browser to test the widget locally.
            </p>
        </div>
        
        <div class="widget-container">
            ${l==="iframe"?n:a}
        </div>
        
        <div class="footer">
            <p>
                Powered by <a href="https://bookingtms.com" target="_blank">BookingTMS</a> | 
                <a href="${t}" target="_blank">View Widget URL</a>
            </p>
        </div>
    </div>
</body>
</html>`,o=l=>{const c=i(l),d=new Blob([c],{type:"text/html"}),u=URL.createObjectURL(d),h=document.createElement("a");h.href=u,h.download=`${s}-test-${l}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u),re.success("Test page downloaded! Open the HTML file in your browser.")};return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] w-full",children:[r.jsx(Ke,{className:"p-2 sm:p-3 md:p-4",children:r.jsx(Xe,{className:"text-sm sm:text-base",children:"Download Test Page"})}),r.jsxs(_e,{className:"p-2 sm:p-3 md:p-4 pt-0 space-y-3 sm:space-y-4",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Download a ready-to-use HTML test page to verify the widget locally on different devices before deploying it to your website."}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[r.jsxs(W,{variant:"outline",onClick:()=>o("iframe"),className:"w-full h-10 sm:h-11 text-xs sm:text-sm",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download iFrame Test"]}),r.jsxs(W,{variant:"outline",onClick:()=>o("script"),className:"w-full h-10 sm:h-11 text-xs sm:text-sm",children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Download Script Test"]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4 text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"How to use:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 sm:space-y-1.5 ml-3",children:[r.jsx("li",{children:"Download the test HTML file"}),r.jsx("li",{children:"Open the file in your preferred browser"}),r.jsx("li",{children:"Test all widget interactions before deployment"}),r.jsx("li",{children:"Confirm everything works as expected"})]})]})]})]})}function uQe(){const t=[{name:"widget",type:"string",required:!0,default:"farebook",description:"The widget type identifier",example:"farebook, calendar, bookgo, resolvex"},{name:"color",type:"hex",required:!1,default:"2563eb",description:"Primary brand color (without # symbol)",example:"2563eb, ff0000, 00ff00"},{name:"key",type:"string",required:!0,default:"",description:"Your unique widget authentication key",example:"wdgt_abc123xyz"}],e=[{widget:"FareBook Widget",minHeight:"800px",recommended:"800px"},{widget:"Calendar Widget",minHeight:"700px",recommended:"750px"},{widget:"BookGo Widget",minHeight:"600px",recommended:"700px"},{widget:"Resolvex Widget",minHeight:"650px",recommended:"750px"},{widget:"Quick Booking",minHeight:"500px",recommended:"550px"},{widget:"Multi-Step",minHeight:"700px",recommended:"800px"},{widget:"Single Game",minHeight:"600px",recommended:"700px"}];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ws,{className:"w-4 h-4 text-blue-600"}),r.jsx(Xe,{className:"text-base",children:"URL Parameters Reference"})]})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Parameter"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Type"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Required"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Default"}),r.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Description"})]})}),r.jsx("tbody",{children:t.map((s,n)=>r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-3 px-3",children:r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-blue-600",children:s.name})}),r.jsx("td",{className:"py-3 px-3 text-gray-600",children:s.type}),r.jsx("td",{className:"py-3 px-3",children:s.required?r.jsx(De,{variant:"secondary",className:"bg-red-100 text-red-700 text-xs",children:"Required"}):r.jsx(De,{variant:"secondary",className:"bg-gray-100 text-gray-600 text-xs",children:"Optional"})}),r.jsx("td",{className:"py-3 px-3",children:r.jsx("code",{className:"text-gray-600",children:s.default||"-"})}),r.jsxs("td",{className:"py-3 px-3 text-gray-600",children:[r.jsx("div",{children:s.description}),r.jsxs("div",{className:"text-gray-500 mt-1",children:["Examples: ",r.jsx("code",{className:"text-xs",children:s.example})]})]})]},n))})]})})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Recommended Heights by Widget"})}),r.jsx(_e,{className:"p-4 pt-0",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map((s,n)=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.widget}),r.jsx(De,{variant:"secondary",className:"text-xs",children:s.recommended})]}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Min: ",r.jsx("code",{className:"bg-white px-1 rounded",children:s.minHeight})," | Best: ",r.jsx("code",{className:"bg-white px-1 rounded",children:s.recommended})]})]},n))})})]}),r.jsxs(he,{className:"border-gray-200",children:[r.jsx(Ke,{className:"p-4",children:r.jsx(Xe,{className:"text-base",children:"Example URLs"})}),r.jsxs(_e,{className:"p-4 pt-0 space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Basic Embed"}),r.jsx("code",{className:"block bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:"https://your-site.com/embed?widget=farebook&key=wdgt_abc123"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"With Custom Color"}),r.jsx("code",{className:"block bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:"https://your-site.com/embed?widget=farebook&color=ff6b6b&key=wdgt_abc123"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Different Widget Type"}),r.jsx("code",{className:"block bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:"https://your-site.com/embed?widget=calendar&color=2563eb&key=wdgt_abc123"})]})]})]})]})}function coe({widgetId:t,widgetName:e,primaryColor:s,embedKey:n,widgetConfig:a}){const[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState("iframe"),[h,m]=j.useState(n||"YOUR_WIDGET_KEY_HERE"),[f,v]=j.useState(()=>typeof window<"u"?window.location.origin:""),{theme:x}=Nr();j.useEffect(()=>{n&&m(n)},[n]);const g=()=>{const C=new URLSearchParams({widget:t,color:s.replace("#",""),key:h,theme:x}),S=(f||"").trim().replace(/\/+$/,"");return S?`${S}/?${C.toString()}`:`/?${C.toString()}`},b=()=>`<!-- Responsive Embed Wrapper -->
<div style="position: relative; width: 100%; padding-top: 135%; overflow: hidden; border-radius: 8px;">
  <iframe
    src="${g()}"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
    frameborder="0"
    allow="payment; camera"
    allowfullscreen
    title="${e}"
  ></iframe>
</div>`,w=()=>`<!-- BookingTMS ${e} - Auto-Resize Embed -->
<div id="bookingtms-widget-${t}" style="width: 100%; max-width: 100%; overflow: hidden;"></div>
<script>
  (function() {
    var iframe = document.createElement('iframe');
    iframe.src = '${g()}';
    iframe.width = '100%';
    iframe.frameBorder = '0';
    iframe.allow = 'payment; camera';
    iframe.allowFullscreen = true;
    iframe.style.border = 'none';
    iframe.style.borderRadius = '8px';
    iframe.style.minHeight = '600px';
    iframe.style.width = '100%';
    iframe.style.maxWidth = '100%';
    iframe.title = '${e}';
    
    // Auto-resize height based on content
    window.addEventListener('message', function(event) {
      if (event.data && event.data.type === 'BOOKINGTMS_RESIZE') {
        iframe.style.height = event.data.height + 'px';
      }
    });
    
    var container = document.getElementById('bookingtms-widget-${t}');
    if (container) {
      container.appendChild(iframe);
    }
  })();
<\/script>`,N=()=>{navigator.clipboard.writeText(g()),c(!0),re.success("URL copied to clipboard!"),setTimeout(()=>c(!1),2e3)};return r.jsxs("div",{className:"space-y-2.5 sm:space-y-4 md:space-y-6 pb-6 sm:pb-10 w-full max-w-full bg-gradient-to-b from-white via-slate-50/70 to-white dark:from-[#050505] dark:via-[#080808] dark:to-[#050505] rounded-3xl",children:[r.jsxs(he,{className:"w-full rounded-2xl border border-slate-200/70 dark:border-slate-800/70 bg-white/85 dark:bg-[#0b0b0b]/85 backdrop-blur-sm shadow-lg shadow-slate-900/5",children:[r.jsx(Ke,{className:"p-1 sm:p-3 md:p-4",children:r.jsx(Xe,{className:"text-[11px] sm:text-base",children:"Widget Configuration"})}),r.jsx(_e,{className:"p-1 sm:p-3 md:p-4 pt-0 overflow-x-auto",children:r.jsxs("div",{className:"min-w-[420px] sm:min-w-0 space-y-2 sm:space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(X,{htmlFor:"widget-key",className:"text-[11px] sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Widget Key"}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-1 sm:gap-1.5",children:[r.jsx(de,{id:"widget-key",value:h,onChange:C=>m(C.target.value),placeholder:"Enter your widget key",readOnly:!0,className:"h-7 sm:h-9 text-[11px] sm:text-sm font-mono bg-white dark:bg-[#0a0a0a] border border-gray-300 dark:border-[#3a3a3a] text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 w-full focus:border-blue-500 dark:focus:border-blue-400"}),r.jsx(W,{variant:"outline",size:"sm",disabled:!0,className:"h-7 sm:h-9 px-2 text-[10px] sm:text-xs w-auto md:w-[88px] cursor-not-allowed opacity-60 whitespace-nowrap rounded-full",title:"Key generation temporarily disabled. Use the venue's assigned key.",children:"Generate"})]}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:"Use the widget key provided on the venue record. Generation controls are disabled for now."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(X,{className:"text-[11px] sm:text-sm text-gray-700 dark:text-gray-300",children:"Base URL"}),r.jsx(de,{value:f,onChange:C=>v(C.target.value),placeholder:"http://localhost:3002",className:"h-7 sm:h-9 text-[10px] sm:text-sm bg-gray-50 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#2a2a2a] text-gray-900 dark:text-gray-300 w-full"}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:"Use your site origin for testing (e.g., http://localhost:3002)."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(X,{className:"text-[11px] sm:text-sm text-gray-700 dark:text-gray-300",children:"Embed URL"}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-1 sm:gap-1.5",children:[r.jsx(de,{value:g(),readOnly:!0,className:"h-7 sm:h-9 text-[10px] sm:text-sm bg-gray-50 dark:bg-[#0a0a0a] font-mono border-gray-300 dark:border-[#2a2a2a] text-gray-900 dark:text-gray-300 w-full"}),r.jsxs("div",{className:"flex gap-1 sm:gap-1.5 w-full md:w-auto",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:N,className:"h-7 sm:h-9 text-[10px] sm:text-sm flex-1 md:flex-initial flex-shrink-0 rounded-full",children:l?r.jsx(Sr,{className:"w-3 h-3 sm:w-4 sm:h-4"}):r.jsx(on,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>window.open(g(),"_blank"),className:"h-7 sm:h-9 text-[10px] sm:text-sm flex-1 md:flex-initial flex-shrink-0 rounded-full",title:"Open in new tab",children:r.jsx(tn,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),r.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:"Generates an absolute URL when Base URL is set; otherwise relative."})]}),r.jsxs("div",{className:"rounded-xl border border-indigo-200/70 dark:border-indigo-900/60 bg-gradient-to-r from-indigo-50/90 via-slate-50/90 to-white/90 dark:from-indigo-950/30 dark:via-indigo-900/20 dark:to-slate-900/30 p-2.5 sm:p-3",children:[r.jsxs("p",{className:"text-xs font-semibold text-indigo-900 dark:text-indigo-200 mb-1 flex items-center gap-1.5",children:[r.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-indigo-500/10 text-indigo-600 dark:text-indigo-300",children:""}),"Auto Theme Sync"]}),r.jsxs("p",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:["Widget preview automatically matches your admin theme. Currently showing: ",r.jsx("strong",{children:x==="dark"?"Dark Mode":"Light Mode"})]})]})]})})]}),r.jsx(cQe,{embedUrl:g(),widgetName:e,widgetConfig:a}),r.jsx(dQe,{embedUrl:g(),widgetName:e,widgetId:t,iframeCode:b(),scriptCode:w()}),r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4 w-full",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-medium text-blue-900 dark:text-blue-200 mb-2",children:" Integration Tips"}),r.jsxs("ul",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300 space-y-1 sm:space-y-1.5",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Responsive Design:"})," The embed code uses a responsive wrapper that automatically adapts to mobile screens"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Aspect Ratio:"})," The default padding-top is 135% - adjust between 125%-140% if needed for your content"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Script Method (Recommended):"})," Use the Script embed for auto-resizing height based on content"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Mobile Testing:"})," Always test on real mobile devices before going live"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Security:"})," Keep your widget key secure and never expose it in public repositories"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Auto-Resize:"})," The widget sends height updates via postMessage for dynamic sizing"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Support:"})," Contact support if you need help with custom integrations"]})]})]}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] w-full",children:[r.jsx(Ke,{className:"p-2 sm:p-3 md:p-4",children:r.jsx(Xe,{className:"text-sm sm:text-base",children:"Technical Details"})}),r.jsx(_e,{className:"p-2 sm:p-3 md:p-4 pt-0 space-y-2 sm:space-y-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3 text-xs sm:text-sm",children:[r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1 text-xs sm:text-sm",children:"Widget Type"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:t})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1 text-xs sm:text-sm",children:"Primary Color"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:s})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1 text-xs sm:text-sm",children:"Responsive"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:" Yes"})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-[#1e1e1e] rounded-lg p-3 sm:p-4",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-1 text-xs sm:text-sm",children:"Mobile Support"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:" Full Support"})]})]})})]}),r.jsx("div",{className:"w-full",children:r.jsx(uQe,{})}),r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] w-full",children:[r.jsx(Ke,{className:"p-2 sm:p-3 md:p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(LE,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),r.jsx(Xe,{className:"text-sm sm:text-base",children:"Installation & Documentation"})]})}),r.jsx(_e,{className:"p-2 sm:p-3 md:p-4 pt-0",children:r.jsx(lQe,{widgetId:t,widgetName:e,embedUrl:g()})})]})]})}const doe=j.createContext(void 0);function sN({children:t,initialTheme:e="light"}){const[s,n]=j.useState(e),[a,i]=j.useState({light:"#2563eb",dark:"#2563eb"}),o=()=>s==="light"?a.light:a.dark;return r.jsx(doe.Provider,{value:{widgetTheme:s,setWidgetTheme:n,primaryColor:a,setPrimaryColor:i,getCurrentPrimaryColor:o},children:t})}function uoe(){const t=j.useContext(doe);if(t===void 0)throw new Error("useWidgetTheme must be used within a WidgetThemeProvider");return t}function hQe(){const{widgetTheme:t,setWidgetTheme:e,primaryColor:s,setPrimaryColor:n,getCurrentPrimaryColor:a}=uoe(),i={light:[{name:"Blue",value:"#2563eb"},{name:"Purple",value:"#9333ea"},{name:"Green",value:"#059669"},{name:"Red",value:"#dc2626"},{name:"Orange",value:"#ea580c"},{name:"Pink",value:"#db2777"}],dark:[{name:"Blue (Primary)",value:"#2563eb"},{name:"Purple Blue (Secondary)",value:"#5B5FFF"},{name:"Cyan",value:"#06b6d4"},{name:"Emerald",value:"#10b981"},{name:"Rose",value:"#f43f5e"},{name:"Amber",value:"#f59e0b"}]};return r.jsx(he,{className:"p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Vf,{className:"w-5 h-5 text-primary"}),r.jsx("h3",{className:"text-lg text-foreground",children:"Widget Theme & Colors"})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Customize the appearance of your booking widgets for both light and dark modes."})]}),r.jsxs("div",{children:[r.jsx(X,{className:"mb-3 block",children:"Widget Theme Mode"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(W,{variant:t==="light"?"default":"outline",className:"flex-1",onClick:()=>e("light"),children:[r.jsx(mw,{className:"w-4 h-4 mr-2"}),"Light Mode"]}),r.jsxs(W,{variant:t==="dark"?"default":"outline",className:"flex-1",onClick:()=>e("dark"),children:[r.jsx(Vv,{className:"w-4 h-4 mr-2"}),"Dark Mode"]})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:"mb-3 block",children:"Light Mode Primary Color"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:i.light.map(o=>r.jsx("button",{onClick:()=>n({...s,light:o.value}),className:`
                  relative aspect-square rounded-lg border-2 transition-all hover:scale-105
                  ${s.light===o.value?"border-foreground shadow-lg":"border-border"}
                `,style:{backgroundColor:o.value},title:o.name,children:s.light===o.value&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-4 h-4 rounded-full bg-white shadow-md"})})},o.value))}),r.jsxs("div",{className:"mt-3",children:[r.jsx(X,{className:"text-xs text-muted-foreground mb-2 block",children:"Custom Color (Hex)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:s.light,onChange:o=>n({...s,light:o.target.value}),className:"w-16 h-10 rounded border border-border cursor-pointer"}),r.jsx("input",{type:"text",value:s.light,onChange:o=>n({...s,light:o.target.value}),className:"flex-1 h-10 px-3 rounded border border-border bg-background text-foreground",placeholder:"#2563eb"})]})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:"mb-3 block",children:"Dark Mode Primary Color"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:i.dark.map(o=>r.jsx("button",{onClick:()=>n({...s,dark:o.value}),className:`
                  relative aspect-square rounded-lg border-2 transition-all hover:scale-105
                  ${s.dark===o.value?"border-foreground shadow-lg":"border-border"}
                `,style:{backgroundColor:o.value},title:o.name,children:s.dark===o.value&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-4 h-4 rounded-full bg-white shadow-md"})})},o.value))}),r.jsxs("div",{className:"mt-3",children:[r.jsx(X,{className:"text-xs text-muted-foreground mb-2 block",children:"Custom Color (Hex)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"color",value:s.dark,onChange:o=>n({...s,dark:o.target.value}),className:"w-16 h-10 rounded border border-border cursor-pointer"}),r.jsx("input",{type:"text",value:s.dark,onChange:o=>n({...s,dark:o.target.value}),className:"flex-1 h-10 px-3 rounded border border-border bg-background text-foreground",placeholder:"#2563eb"})]})]})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsx(X,{className:"mb-2 block text-sm",children:"Current Active Color"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-border shadow-md",style:{backgroundColor:a()}}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-foreground",children:t==="light"?"Light Mode":"Dark Mode"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:a()})]})]})]})]})})}const H4={BOOKINGS:"bookings",GAMES:"bookingtms::games",GIFT_VOUCHERS:"giftVouchers"},S3="00000000-0000-0000-0000-000000000001",hoe="https://images.unsplash.com/photo-1576086213369-97a306d36557?w=800&h=600&fit=crop",wE={visibility:"public",publishingTargets:{widgets:!0,embed:!0,calendars:!0,previews:!0},bookingLeadTime:0,cancellationWindow:24},mQe=["admin_games","bookingtms_games"],fQe="bookingtms_games_",CG={1:"Easy",2:"Easy",3:"Medium",4:"Hard",5:"Extreme"},pQe={Easy:2,Medium:3,Hard:4,Extreme:5};function ih(){return typeof window<"u"&&typeof window.localStorage<"u"}function rD(t){if(typeof t=="string"){const e=t.trim().toLowerCase();if(e==="easy")return"Easy";if(e==="medium")return"Medium";if(e==="hard")return"Hard";if(e==="extreme")return"Extreme"}return typeof t=="number"&&CG[t]?CG[t]:"Medium"}function sD(t){return t?pQe[t]??3:3}function Wx(t,e){if(typeof t=="number"&&!Number.isNaN(t))return t;if(typeof t=="string"){const s=parseFloat(t);return Number.isFinite(s)?s:e}return e}function qx(t){return Array.isArray(t)?t.filter(e=>typeof e=="string"):[]}function nD(t,e){const s=t??wE;return e?{visibility:e.visibility??s.visibility??"public",bookingLeadTime:e.bookingLeadTime??s.bookingLeadTime,cancellationWindow:e.cancellationWindow??s.cancellationWindow,specialInstructions:e.specialInstructions??s.specialInstructions,publishingTargets:{...wE.publishingTargets,...s.publishingTargets??{},...e.publishingTargets??{}}}:{...s,publishingTargets:{...wE.publishingTargets,...s.publishingTargets??{}}}}function f1(t){if(!t||typeof t!="object")return null;const e=rD(t.difficulty??t.difficultyLabel),s=typeof t.duration=="number"||typeof t.duration=="string"?t.duration:`${Wx(t.durationMinutes??60,60)} min`,n=Wx(t.basePrice??t.price,0),a=Wx(t.capacity??t.maxPlayers,8),i=t.coverImage||t.imageUrl||t.image||hoe,o=t.gameType==="virtual"||t.gameType==="hybrid"?t.gameType:"physical",l=typeof t.createdAt=="string"?t.createdAt:new Date().toISOString(),c=typeof t.updatedAt=="string"?t.updatedAt:t.lastUpdated??l;return{id:String(t.id??`game_${Date.now()}`),name:String(t.name??"Untitled Event"),description:t.description??"",image:i,imageUrl:t.imageUrl??i,coverImage:t.coverImage??i,duration:s,capacity:a,basePrice:n,priceRange:t.priceRange??`$${n}`,ageRange:t.ageRange??"All ages",difficulty:typeof t.difficulty=="number"?t.difficulty:sD(e),difficultyLabel:t.difficultyLabel??e,gameType:o,status:t.status==="inactive"?"inactive":"active",blockedDates:Array.isArray(t.blockedDates)?t.blockedDates:[],availability:t.availability&&typeof t.availability=="object"?t.availability:{},galleryImages:qx(t.galleryImages),videos:qx(t.videos),categoryId:t.categoryId??"default",organizationId:t.organizationId??S3,createdAt:l,updatedAt:c,createdBy:t.createdBy,updatedBy:t.updatedBy,settings:nD(t.settings,t.settings)}}function xQe(t,e){const s=new Date().toISOString(),n=rD(t.difficulty??t.difficultyLabel),a=typeof t.duration=="number"||typeof t.duration=="string"?t.duration:60,i=t.coverImage||t.imageUrl||t.image||hoe,o=Wx(t.basePrice,0),l=Wx(t.capacity,8),c=t.gameType==="virtual"||t.gameType==="hybrid"?t.gameType:"physical";return{id:`game_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,name:t.name?.trim()||"Untitled Event",description:t.description??"",image:i,imageUrl:t.imageUrl??i,coverImage:t.coverImage??i,duration:a,capacity:l,basePrice:o,priceRange:t.priceRange??`$${o}`,ageRange:t.ageRange??"All ages",difficulty:typeof t.difficulty=="number"?t.difficulty:sD(n),difficultyLabel:t.difficultyLabel??n,gameType:c,status:t.status==="inactive"?"inactive":"active",blockedDates:Array.isArray(t.blockedDates)?t.blockedDates:[],availability:t.availability&&typeof t.availability=="object"?t.availability:{},galleryImages:qx(t.galleryImages),videos:qx(t.videos),categoryId:t.categoryId??"default",organizationId:e?.organizationId??S3,createdAt:s,updatedAt:s,createdBy:e?.userId,updatedBy:e?.userId,settings:nD(void 0,t.settings)}}function gQe(t,e,s){const n=e.difficultyLabel??rD(e.difficulty??t.difficulty),a=e.coverImage||e.imageUrl||e.image,i=e.basePrice!==void 0?Wx(e.basePrice,t.basePrice):t.basePrice,o=e.capacity!==void 0?Wx(e.capacity,t.capacity):t.capacity,l=e.duration!==void 0?e.duration:t.duration,c=e.gameType==="virtual"||e.gameType==="hybrid"?e.gameType:t.gameType??"physical";return{...t,name:e.name?.trim()||t.name,description:e.description??t.description,duration:l,capacity:o,basePrice:i,priceRange:e.priceRange??t.priceRange??`$${i}`,ageRange:e.ageRange??t.ageRange,difficulty:e.difficulty!==void 0?typeof e.difficulty=="number"?e.difficulty:sD(n):t.difficulty,difficultyLabel:n||t.difficultyLabel,gameType:c,status:e.status==="inactive"?"inactive":e.status==="active"?"active":t.status,image:a??t.image,imageUrl:e.imageUrl??a??t.imageUrl,coverImage:e.coverImage??t.coverImage??a,galleryImages:e.galleryImages!==void 0?qx(e.galleryImages):t.galleryImages,videos:e.videos!==void 0?qx(e.videos):t.videos,blockedDates:e.blockedDates!==void 0?qx(e.blockedDates):t.blockedDates,availability:e.availability!==void 0?e.availability:t.availability,categoryId:e.categoryId??t.categoryId,settings:nD(t.settings,e.settings??t.settings),organizationId:s?.organizationId??t.organizationId??S3,updatedAt:new Date().toISOString(),updatedBy:s?.userId??t.updatedBy}}class cw{static STORAGE_KEYS=H4;static SHARED_GAMES_KEY=H4.GAMES;static ENVELOPE_VERSION=1;static getAllBookings(){if(!ih())return[];try{const e=localStorage.getItem(this.STORAGE_KEYS.BOOKINGS);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading bookings:",e),[]}}static saveBooking(e){const s=new Date().toISOString(),n={id:`booking_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,timestamp:s,status:"confirmed",source:"widget",...e},a=this.getAllBookings();return a.push(n),ih()&&localStorage.setItem(this.STORAGE_KEYS.BOOKINGS,JSON.stringify(a)),console.log(" Booking saved to localStorage (legacy):",n.id),console.warn(" This booking is only stored locally. Use SupabaseBookingService for real persistence."),n}static updateBookingStatus(e,s){const n=this.getAllBookings(),a=n.findIndex(i=>i.id===e);a!==-1&&(n[a].status=s,ih()&&localStorage.setItem(this.STORAGE_KEYS.BOOKINGS,JSON.stringify(n)),console.log(" Booking status updated:",e,s))}static getAllGames(){if(!ih())return[];try{const e=localStorage.getItem(this.SHARED_GAMES_KEY);if(e){const s=JSON.parse(e);if(Array.isArray(s))return s.map(f1).filter(n=>!!n);if(s&&Array.isArray(s.games))return s.games.map(f1).filter(n=>!!n)}}catch(e){console.warn(" Failed to parse shared games payload, falling back to legacy keys.",e)}for(const e of mQe){const s=localStorage.getItem(e);if(s)try{const n=JSON.parse(s);if(Array.isArray(n)){const a=n.map(f1).filter(i=>!!i);if(a.length)return this.persistGames(a),a}}catch(n){console.warn(` Failed to parse legacy games key "${e}".`,n)}}for(let e=0;e<localStorage.length;e++){const s=localStorage.key(e)??"";if(s.startsWith(fQe)){const n=localStorage.getItem(s);if(!n)continue;try{const a=JSON.parse(n);if(Array.isArray(a)){const i=a.map(f1).filter(o=>!!o);if(i.length)return this.persistGames(i),i}}catch(a){console.warn(` Failed to parse scoped legacy games key "${s}".`,a)}}}return[]}static getGameById(e){return this.getAllGames().find(n=>n.id===e)??null}static persistGames(e,s){if(!ih())return;const n={version:this.ENVELOPE_VERSION,updatedAt:new Date().toISOString(),updatedBy:s?.updatedBy,organizationId:s?.organizationId??e[0]?.organizationId??S3,games:e};try{localStorage.setItem(this.SHARED_GAMES_KEY,JSON.stringify(n)),localStorage.setItem(this.STORAGE_KEYS.GAMES,JSON.stringify(e)),localStorage.setItem("bookingtms_games",JSON.stringify(e))}catch(a){console.error(" Failed to persist games data:",a)}}static saveGame(e,s){const n=this.getAllGames(),a=xQe(e,s);return n.push(a),this.persistGames(n,{updatedBy:s?.userId,organizationId:s?.organizationId}),console.log(" Game saved and sync event triggered:",a.id),a}static updateGame(e,s,n){const a=this.getAllGames(),i=a.findIndex(l=>l.id===e);if(i===-1)return console.warn(` Attempted to update missing game "${e}".`),null;const o=gQe(a[i],s,n);return a[i]=o,this.persistGames(a,{updatedBy:n?.userId,organizationId:n?.organizationId??o.organizationId}),console.log(" Game updated and sync event triggered:",e),o}static deleteGame(e,s){const a=this.getAllGames().filter(i=>i.id!==e);this.persistGames(a,{updatedBy:s?.userId,organizationId:s?.organizationId}),console.log(" Game deleted and sync event triggered:",e)}static replaceAllGames(e,s){if(!Array.isArray(e))return[];const n=e.map(f1).filter(a=>!!a);return this.persistGames(n,{updatedBy:s?.userId,organizationId:s?.organizationId}),console.log(" Game catalog replaced. Total games:",n.length),n}static getAvailableTimeSlots(e,s){const n=this.getGameById(e);if(!n)return[];const i=this.getAllBookings().filter(l=>l.gameId===e&&l.date===s&&l.status!=="cancelled");return[{time:"10:00 AM",available:!0,spots:8},{time:"11:30 AM",available:!0,spots:8},{time:"1:00 PM",available:!0,spots:8},{time:"2:30 PM",available:!0,spots:8},{time:"4:00 PM",available:!0,spots:8},{time:"5:30 PM",available:!0,spots:8},{time:"7:00 PM",available:!0,spots:8},{time:"8:30 PM",available:!0,spots:8}].map(l=>{const c=i.filter(h=>h.time===l.time).reduce((h,m)=>h+m.participants,0),d=c<(n.capacity||8),u=Math.max(0,(n.capacity||8)-c);return{time:l.time,available:d,spots:u}})}static isDateBlocked(e,s){const n=this.getGameById(e);return n?Array.isArray(n.blockedDates)&&n.blockedDates.includes(s):!1}static getAllGiftVouchers(){if(!ih())return[];try{const e=localStorage.getItem(this.STORAGE_KEYS.GIFT_VOUCHERS);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading gift vouchers:",e),[]}}static saveGiftVoucher(e){const s={id:`voucher_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,purchaseDate:new Date().toISOString(),status:"active",...e},n=this.getAllGiftVouchers();return n.push(s),ih()&&localStorage.setItem(this.STORAGE_KEYS.GIFT_VOUCHERS,JSON.stringify(n)),console.log(" Gift voucher saved:",s.id),s}static getBookingStats(){const e=this.getAllBookings(),s=e.reduce((a,i)=>a+i.totalPrice,0),n=e.filter(a=>a.status==="confirmed").length;return{totalBookings:e.length,confirmedBookings:n,totalRevenue:s,averageOrderValue:e.length>0?s/e.length:0}}static exportAllData(){return{bookings:this.getAllBookings(),games:this.getAllGames(),giftVouchers:this.getAllGiftVouchers(),stats:this.getBookingStats()}}static clearAllData(){ih()&&(localStorage.removeItem(this.STORAGE_KEYS.BOOKINGS),localStorage.removeItem(this.STORAGE_KEYS.GIFT_VOUCHERS),localStorage.removeItem(this.SHARED_GAMES_KEY),console.log(" All data cleared"))}}class vQe{listeners={};subscribe(e,s){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(s),console.log(` Subscribed to event: ${e}. Total listeners: ${this.listeners[e].length}`)}unsubscribe(e,s){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(n=>n!==s))}emit(e){if(!this.listeners[e]){console.log(` No listeners for event: ${e}`);return}console.log(` Emitting data sync event: ${e} to ${this.listeners[e].length} listeners`),this.listeners[e].forEach((s,n)=>{try{s(),console.log(` Event ${e} listener ${n} executed successfully`)}catch(a){console.error(` Error in event ${e} listener ${n}:`,a)}})}}const rc=new vQe;class Fc extends cw{static saveGame(e,s){const n=super.saveGame(e,s);return rc.emit("games-updated"),n}static updateGame(e,s,n){const a=super.updateGame(e,s,n);return a&&rc.emit("games-updated"),a}static deleteGame(e,s){super.deleteGame(e,s),rc.emit("games-updated")}static replaceAllGames(e,s){const n=super.replaceAllGames(e,s);return rc.emit("games-updated"),n}static saveBooking(e){const s=super.saveBooking(e);return rc.emit("bookings-updated"),s}static updateBooking(e,s){const n=this.getAllBookings(),a=n.findIndex(i=>i.id===e);a!==-1&&(n[a]={...n[a],...s},ih()&&localStorage.setItem(this.STORAGE_KEYS.BOOKINGS,JSON.stringify(n)),rc.emit("bookings-updated"),console.log(" Booking updated and sync event triggered:",e))}}ih()&&window.addEventListener("storage",t=>{t.key&&((t.key===H4.GAMES||t.key==="admin_games"||t.key==="bookingtms_games")&&rc.emit("games-updated"),(t.key===H4.BOOKINGS||t.key==="bookings")&&rc.emit("bookings-updated"))});class C3{static normalizeGameForWidget(e){const s=e.settings||{};return{id:e.id,name:e.name,slug:e.slug,description:e.description||"An exciting experience awaits!",tagline:e.tagline||"",difficulty:e.difficulty||"Medium",duration:e.duration||60,minPlayers:e.min_players||2,maxPlayers:e.max_players||8,min_players:e.min_players||2,max_players:e.max_players||8,price:e.price||0,childPrice:e.child_price,child_price:e.child_price,minAge:e.min_age,successRate:e.success_rate||50,image:e.image_url,imageUrl:e.image_url,coverImage:e.image_url,status:"active",settings:s,blockedDates:s.blockedDates||[],availability:s.availability||{},operatingDays:s.operatingDays||["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],startTime:s.startTime||"09:00",endTime:s.endTime||"21:00",slotInterval:s.slotInterval||60,advanceBooking:s.advanceBooking||30,requiresWaiver:s.requiresWaiver||!1,selectedWaiver:s.selectedWaiver||null,cancellationWindow:s.cancellationWindow||24,specialInstructions:s.specialInstructions||"",galleryImages:s.galleryImages||[],videos:s.videos||[],language:s.language||["English"],minChildren:s.minChildren||0,maxChildren:s.maxChildren||0,location:s.location||"",faqs:s.faqs||[],cancellationPolicies:s.cancellationPolicies||[]}}static mergeWidgetConfig(e,s){const n=e.settings?.widgetConfig||{},a=Array.isArray(n.games)?n.games:[],i=s.map(c=>this.normalizeGameForWidget(c)),o=i.map(c=>{const d=a.find(u=>u.id===c.id);return d?{...c,...d,id:c.id}:c});return{config:{venueId:e.id,venueName:e.name,primaryColor:e.primary_color,baseUrl:e.base_url,...n,games:o},games:i}}static async getVenueByEmbedKey(e){try{const{data:s,error:n}=await pt.rpc("get_venue_by_embed_key",{p_embed_key:e});return n?(console.error("Error fetching venue by embed key:",n),null):!s||s.length===0?(console.warn(`No venue found for embed key: ${e}`),null):s[0]}catch(s){return console.error("Exception fetching venue:",s),null}}static async getVenueGames(e){try{const{data:s,error:n}=await pt.rpc("get_venue_games",{p_venue_id:e});return n?(console.error("Error fetching venue games:",n),[]):s||[]}catch(s){return console.error("Exception fetching venue games:",s),[]}}static async getVenueWidgetConfig(e){const s=await this.getVenueByEmbedKey(e);if(!s)return null;const n=await this.getVenueGames(s.id),{config:a,games:i}=this.mergeWidgetConfig(s,n);return{venue:s,games:i,widgetConfig:a}}static async createWidgetBooking(e){try{const{data:s,error:n}=await pt.rpc("create_widget_booking",{p_venue_id:e.venue_id,p_game_id:e.game_id,p_customer_name:e.customer_name,p_customer_email:e.customer_email,p_customer_phone:e.customer_phone,p_booking_date:e.booking_date,p_start_time:e.start_time,p_end_time:e.end_time,p_party_size:e.party_size,p_ticket_types:e.ticket_types,p_total_amount:e.total_amount,p_final_amount:e.final_amount,p_promo_code:e.promo_code||null,p_notes:e.notes||null});if(n)throw console.error("Error creating widget booking:",n),new Error(n.message||"Failed to create booking");if(!s||s.length===0)throw new Error("No booking data returned");return s[0]}catch(s){throw console.error("Exception creating widget booking:",s),s}}static async getVenueBookings(e){try{const{data:s,error:n}=await pt.from("bookings").select(`
          *,
          customer:customers(*),
          game:games(*),
          venue:venues(*)
        `).eq("venue_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching venue bookings:",n),[]):s||[]}catch(s){return console.error("Exception fetching venue bookings:",s),[]}}static async getBookingByConfirmationCode(e){try{const{data:s,error:n}=await pt.from("bookings").select(`
          *,
          customer:customers(*),
          game:games(*),
          venue:venues(*)
        `).eq("confirmation_code",e).single();return n?(console.error("Error fetching booking by confirmation code:",n),null):s}catch(s){return console.error("Exception fetching booking:",s),null}}static async updateBookingStatus(e,s){try{const{data:n,error:a}=await pt.from("bookings").update({status:s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Error updating booking status:",a),new Error(a.message);return n}catch(n){throw console.error("Exception updating booking status:",n),n}}static async getBookedSlots(e,s){try{const{data:n,error:a}=await pt.from("bookings").select("booking_time, end_time, players").eq("game_id",e).eq("booking_date",s).in("status",["pending","confirmed","checked_in"]);return a?(console.error("Error fetching booked slots:",a),[]):n||[]}catch(n){return console.error("Exception fetching booked slots:",n),[]}}}function moe({primaryColor:t="#2563eb",config:e}){const[s,n]=j.useState(null),[a,i]=j.useState(void 0),[o,l]=j.useState(null),[c,d]=j.useState(4),[u,h]=j.useState(!1),[m,f]=j.useState([]),[v,x]=j.useState("browse"),[g,b]=j.useState({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[w,N]=j.useState(!1),[C,S]=j.useState(null),[A,k]=j.useState(!1),[E,O]=j.useState(null),[$,T]=j.useState([]);j.useEffect(()=>(()=>{const ie=cw.getAllGames();console.log(" ListWidget loaded",ie.length,"games from admin"),T(ie);const be=()=>{const ue=cw.getAllGames();console.log(" ListWidget games updated in real-time!",ue.length),T(ue)};return DataSyncEvents.subscribe("games-updated",be),()=>{DataSyncEvents.unsubscribe("games-updated",be)}})(),[]);const I=$.length>0?$.map(ne=>({id:ne.id.toString(),name:ne.name,description:ne.description||"Amazing escape room experience",duration:ne.duration,difficulty:ne.difficulty||"Medium",minAge:10,maxPlayers:ne.capacity,price:ne.basePrice,rating:4.8,reviews:156,image:ne.imageUrl,tags:["Family Friendly","Adventure","Puzzle"]})):[{id:"1",name:"Mystery Manor",tagline:"Uncover the secrets of an abandoned Victorian mansion",duration:60,difficulty:"Medium",rating:4.9,reviews:234,price:30,featured:!0,image:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1576086213369-97a306d36557?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?w=800&h=600&fit=crop"],videoThumb:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=600&h=400&fit=crop",availability:["10:00 AM","1:00 PM","4:00 PM","7:00 PM"],features:["Beginner Friendly","Atmospheric","Award Winning"],players:"2-8 players"},{id:"2",name:"Space Odyssey",tagline:"Race against time to save your crew in deep space",duration:75,difficulty:"Hard",rating:4.8,reviews:189,price:35,featured:!1,image:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800&h=600&fit=crop"],videoThumb:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=600&h=400&fit=crop",availability:["11:00 AM","2:00 PM","5:00 PM","8:00 PM"],features:["Advanced","Team Building","High Tech"],players:"4-10 players"},{id:"3",name:"Zombie Outbreak",tagline:"Find the cure before the apocalypse spreads worldwide",duration:60,difficulty:"Medium",rating:4.7,reviews:312,price:30,featured:!0,image:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1509281373149-e957c6296406?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1518709414768-a88981a4515d?w=800&h=600&fit=crop"],videoThumb:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=600&h=400&fit=crop",availability:["10:00 AM","12:00 PM","3:00 PM","6:00 PM","9:00 PM"],features:["Action Packed","Horror Elements","Popular"],players:"3-8 players"}],L=I.find(ne=>ne.id===s),z=(ne,ie,be)=>{S({code:ne,discount:ie,type:be}),N(!1)},M=()=>{S(null)},V=(ne,ie)=>{O({code:ne,amount:ie}),k(!1)},B=()=>{O(null)},F=()=>L?L.price*c:0,J=()=>C?C.type==="fixed"?C.discount:F()*C.discount/100:0,ee=()=>{if(!E)return 0;const ne=F()-J();return Math.min(E.amount,ne)},q=F()-J()-ee(),U=`BK-${Math.random().toString(36).substring(2,10).toUpperCase()}`,Z=()=>v==="booking"?a&&o:v==="cart"?g.name&&g.email&&g.phone:v==="checkout"?g.cardNumber&&g.cardExpiry&&g.cardCVV&&g.cardName:!0,K=()=>{x("browse"),n(null),i(void 0),l(null),d(4),b({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),S(null),O(null),N(!1),k(!1)},se=async()=>{try{if(!customerInfo.name||!customerInfo.email||!customerInfo.phone){alert("Please fill in all customer details");return}if(!s||!a||!o){alert("Please complete booking details");return}const ne=I.find(Le=>Le.id===s),ie={gameName:ne?.name||"",gameId:s||"",date:a?a.toISOString().split("T")[0]:"",time:o||"",customerName:customerInfo.name,customerEmail:customerInfo.email,customerPhone:customerInfo.phone,participants:c,ticketTypes:[{id:"standard",name:"Standard Ticket",price:ne?.price||0,quantity:c,subtotal:(ne?.price||0)*c}],totalPrice:q,promoCode:C?.code,giftCardCredit:E?.amount},be=e?.venueId||e?.venue?.id,ue=ne?.id;if(!be||!ue){re.error("Missing venue or game information");return}const oe=o+":00",[pe,ye]=o.split(":"),Se=`${String((parseInt(pe)+1)%24).padStart(2,"0")}:${ye}:00`,Y=await C3.createWidgetBooking({venue_id:be,game_id:ue,customer_name:customerInfo.name,customer_email:customerInfo.email,customer_phone:customerInfo.phone,booking_date:a.toISOString().split("T")[0],start_time:oe,end_time:Se,party_size:c,ticket_types:ie.ticketTypes,total_amount:q,final_amount:q,promo_code:C?.code});Y&&(console.log(" Booking created:",Y),re.success("Booking confirmed!"),x("success"))}catch(ne){console.error(" Error saving booking:",ne),alert("Error saving booking. Please try again.")}};return r.jsxs("div",{className:"w-full min-h-screen bg-gray-50",children:[r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[900px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-y-auto p-4 sm:p-6",children:[r.jsxs(lg,{children:[r.jsx(pr,{children:"Image Gallery"}),r.jsx(wr,{children:"View photos of escape room experiences"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:m.map((ne,ie)=>r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:r.jsx(fn,{src:ne,alt:`Gallery image ${ie+1}`,className:"w-full h-full object-cover"})},ie))})]})}),v==="browse"&&r.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl text-gray-900 mb-2",children:"Escape Room Experiences"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Choose your adventure and book instantly"})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6",children:I.map(ne=>r.jsx(he,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-0 lg:gap-6",children:[r.jsxs("div",{className:"lg:col-span-4 relative group h-48 sm:h-56 lg:h-auto",children:[r.jsx(fn,{src:ne.image,alt:ne.name,className:"w-full h-full object-cover"}),ne.featured&&r.jsxs(De,{className:"absolute top-2 left-2 sm:top-3 sm:left-3 text-xs",style:{backgroundColor:t,color:"white"},children:[r.jsx(Es,{className:"w-3 h-3 mr-1 fill-white"}),"Featured"]}),r.jsx("button",{onClick:()=>{f(ne.gallery),h(!0)},className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-colors",children:r.jsx(Bc,{className:"w-4 h-4 text-gray-700"})}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:r.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3 sm:p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(vh,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-900"})})})]}),r.jsx("div",{className:"lg:col-span-8 p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"mb-3 sm:mb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[r.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl text-gray-900",children:ne.name}),r.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.jsx(Es,{className:"w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm sm:text-base text-gray-900",children:ne.rating}),r.jsxs("span",{className:"text-gray-500 text-xs sm:text-sm hidden sm:inline",children:["(",ne.reviews,")"]})]})]}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:ne.tagline})]}),r.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-3 sm:mb-4",children:ne.features.map((ie,be)=>{const ue=[ym,Du,wu],oe=ue[be%ue.length];return r.jsxs(De,{variant:"secondary",className:"bg-gray-100 text-xs",children:[r.jsx(oe,{className:"w-3 h-3 mr-1"}),ie]},ie)})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Duration"}),r.jsxs("div",{className:"flex items-center gap-1 text-sm sm:text-base text-gray-900",children:[r.jsx(jr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsxs("span",{children:[ne.duration," min"]})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Difficulty"}),r.jsx("div",{className:"text-sm sm:text-base text-gray-900",children:ne.difficulty})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Players"}),r.jsxs("div",{className:"flex items-center gap-1 text-sm sm:text-base text-gray-900",children:[r.jsx(Xr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{children:ne.players})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Price"}),r.jsxs("div",{className:"text-lg sm:text-xl text-gray-900",style:{color:t},children:["$",ne.price]})]})]}),r.jsxs("div",{className:"mt-auto flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-3",children:[r.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:[ne.availability.length," time slots available"]}),r.jsxs(W,{onClick:()=>{n(ne.id),x("booking")},className:"text-white h-10 sm:h-12 px-6 sm:px-8 text-sm sm:text-base shadow-lg hover:shadow-xl transform hover:scale-105 transition-all whitespace-nowrap",style:{backgroundColor:t},children:["Book Now",r.jsx($n,{className:"w-4 h-4 sm:w-5 sm:h-5 ml-2"})]})]})]})})]})},ne.id))})]}),v==="booking"&&L&&r.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:[r.jsxs(W,{onClick:()=>x("browse"),variant:"outline",className:"mb-4 sm:mb-6 h-9 sm:h-10 text-sm",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Experiences"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"mb-4 sm:mb-6",children:[r.jsx("h2",{className:"text-xl sm:text-2xl text-gray-900 mb-2",children:L.name}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:L.tagline})]}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm sm:text-base",children:"Select Date"}),r.jsx("div",{className:"border rounded-lg p-2 sm:p-3 inline-block w-full sm:w-auto",children:r.jsx(Ah,{mode:"single",selected:a,onSelect:i,disabled:ne=>ne<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-sm sm:text-base",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Number of Players"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(W,{variant:"outline",onClick:()=>d(Math.max(2,c-1)),className:"h-10 w-10 sm:h-12 sm:w-12 text-center",children:"-"}),r.jsx("span",{className:"text-xl sm:text-2xl text-gray-900 min-w-[50px] sm:min-w-[60px] text-center",children:c}),r.jsx(W,{variant:"outline",onClick:()=>d(Math.min(10,c+1)),className:"h-10 w-10 sm:h-12 sm:w-12 text-center",children:"+"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm sm:text-base",children:"Select Time"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3",children:L.availability.map(ne=>r.jsx("button",{onClick:()=>l(ne),className:`p-2.5 sm:p-3 rounded-lg border-2 transition-all text-center ${o===ne?"shadow-md":"border-gray-200 hover:border-gray-300"}`,style:{borderColor:o===ne?t:void 0,backgroundColor:o===ne?`${t}10`:void 0},children:r.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:ne})},ne))})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(he,{className:"p-4 sm:p-6 lg:sticky lg:top-4 max-h-[calc(100vh-2rem)] overflow-y-auto",children:r.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:[r.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Booking Summary"}),r.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Experience:"}),r.jsx("span",{className:"text-gray-900 text-right truncate max-w-[60%]",children:L.name})]}),a&&r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:Rn(a,"dd/MM/yyyy")})]}),o&&r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:o})]}),r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:c})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-sm sm:text-base text-gray-900",children:"Total:"}),r.jsxs("span",{className:"text-xl sm:text-2xl text-gray-900",style:{color:t},children:["$",q]})]})]}),r.jsxs(W,{onClick:()=>x("cart"),disabled:!Z(),className:"w-full text-white h-11 sm:h-12 text-sm sm:text-base",style:{backgroundColor:Z()?t:void 0},children:[r.jsx(ri,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]})})})]})]}),v==="cart"&&L&&r.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:[r.jsxs(W,{onClick:()=>x("booking"),variant:"outline",className:"mb-4 sm:mb-6 h-9 sm:h-10 text-sm",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(he,{className:"p-4 sm:p-6",children:[r.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6 flex items-center gap-2",children:[r.jsx(ri,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Your Cart"]}),r.jsx("div",{className:"p-3 sm:p-4 bg-white border border-gray-200 rounded-lg mb-4 sm:mb-6",children:r.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:L.image,alt:L.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm sm:text-base text-gray-900 mb-1 truncate",children:L.name}),r.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 space-y-0.5 sm:space-y-1",children:[r.jsxs("div",{children:["Date: ",a&&Rn(a,"dd/MM/yyyy")," at ",o]}),r.jsxs("div",{children:["Players: ",c,"  $",L.price]})]})]}),r.jsxs("div",{className:"text-sm sm:text-base text-gray-900 flex-shrink-0",style:{color:t},children:["$",q]})]})}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsx("h3",{className:"text-base sm:text-lg text-gray-900 mb-3 sm:mb-4",children:"Your Information"}),r.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx(ma,{className:"w-4 h-4"}),"Full Name"]}),r.jsx(de,{value:g.name,onChange:ne=>b({...g,name:ne.target.value}),placeholder:"John Doe",className:"h-10 sm:h-12 text-sm sm:text-base bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address"]}),r.jsx(de,{type:"email",value:g.email,onChange:ne=>b({...g,email:ne.target.value}),placeholder:"john@example.com",className:"h-10 sm:h-12 text-sm sm:text-base bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]}),r.jsx(de,{type:"tel",value:g.phone,onChange:ne=>b({...g,phone:ne.target.value}),placeholder:"+1 (555) 123-4567",className:"h-10 sm:h-12 text-sm sm:text-base bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-4 sm:mb-6",children:[r.jsxs("div",{children:[!C&&!w&&r.jsx("button",{onClick:()=>N(!0),className:"text-sm text-blue-600 hover:underline",children:"Add promo code"}),w&&!C&&r.jsx(Ph,{onApply:z,className:"mb-4"}),C&&r.jsx(Ph,{onApply:z,onRemove:M,appliedCode:C.code,appliedDiscount:C.discount,appliedType:C.type,className:"mb-4"})]}),r.jsxs("div",{children:[!E&&!A&&r.jsx("button",{onClick:()=>k(!0),className:"text-sm text-blue-600 hover:underline",children:"Apply gift card"}),A&&!E&&r.jsx(Th,{onApply:V,className:"mb-4"}),E&&r.jsx(Th,{onApply:V,onRemove:B,appliedCode:E.code,appliedAmount:E.amount,className:"mb-4"})]})]}),r.jsxs("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsxs("span",{className:"text-gray-900",children:["$",F()]})]}),J()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-green-600",children:"Promo Code Discount:"}),r.jsxs("span",{className:"text-green-600",children:["-$",J().toFixed(2)]})]}),ee()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-purple-600",children:"Gift Card:"}),r.jsxs("span",{className:"text-purple-600",children:["-$",ee().toFixed(2)]})]})]}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6 p-3 sm:p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[r.jsx("span",{className:"text-sm sm:text-base text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"text-2xl sm:text-3xl text-gray-900",style:{color:t},children:["$",q.toFixed(2)]})]}),r.jsx(W,{onClick:()=>x("checkout"),disabled:!Z(),className:"w-full text-white h-11 sm:h-12 text-sm sm:text-base",style:{backgroundColor:Z()?t:void 0},children:"Proceed to Checkout"})]})]}),v==="checkout"&&L&&r.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:[r.jsxs(W,{onClick:()=>x("cart"),variant:"outline",className:"mb-4 sm:mb-6 h-9 sm:h-10 text-sm",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 sm:p-6",children:[r.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Secure Payment"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Cardholder Name"}),r.jsx(de,{value:g.cardName,onChange:ne=>b({...g,cardName:ne.target.value}),placeholder:"John Doe",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Card Number"}),r.jsx(de,{value:g.cardNumber,onChange:ne=>b({...g,cardNumber:ne.target.value}),placeholder:"1234 5678 9012 3456",maxLength:19,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Expiry Date"}),r.jsx(de,{value:g.cardExpiry,onChange:ne=>b({...g,cardExpiry:ne.target.value}),placeholder:"MM/YY",maxLength:5,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"CVV"}),r.jsx(de,{value:g.cardCVV,onChange:ne=>b({...g,cardCVV:ne.target.value}),placeholder:"123",maxLength:4,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-gray-700 flex items-start gap-2 mt-6",children:[r.jsx(Mn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(he,{className:"p-4 md:p-6 sticky top-4",children:[r.jsx("h3",{className:"text-gray-900 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Experience:"}),r.jsx("span",{className:"text-gray-900",children:L.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:a&&Rn(a,"dd/MM/yyyy")})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:o})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:c})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",q]})]})]}),r.jsxs(W,{onClick:se,disabled:!Z(),className:"w-full text-white h-12",style:{backgroundColor:Z()?t:void 0},children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"Complete Payment $",q]})]})})]})]}),v==="success"&&L&&r.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-6",style:{backgroundColor:`${t}15`},children:r.jsx(Lt,{className:"w-12 h-12",style:{color:t}})}),r.jsx("h2",{className:"text-3xl text-gray-900 mb-2 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full p-4 md:p-6 mb-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-gray-900",children:U})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Experience"}),r.jsx("span",{className:"text-gray-900",children:L.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:[a&&Rn(a,"dd/MM/yyyy")," at ",o]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[c," people"]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",q]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full",children:r.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:g.email})]})}),r.jsx(W,{onClick:K,className:"text-white px-8",style:{backgroundColor:t},children:"Book Another Experience"})]})})]})}function foe({primaryColor:t="#2563eb",config:e}){const[s,n]=j.useState(void 0),[a,i]=j.useState("booking"),[o,l]=j.useState({game:"",date:"",time:"",players:4,name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[c,d]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState([]);j.useEffect(()=>(()=>{const se=Fc.getAllGames();console.log(" QuickBookWidget loaded",se.length,"games from admin"),f(se);const ne=()=>{const ie=Fc.getAllGames();console.log(" QuickBookWidget games updated in real-time!",ie.length),f(ie)};return rc.subscribe("games-updated",ne),()=>{rc.unsubscribe("games-updated",ne)}})(),[]);const[v,x]=j.useState(!1),[g,b]=j.useState(null),[w,N]=j.useState(!1),[C,S]=j.useState(null),A=m.length>0?m.map(K=>({id:K.id.toString(),name:K.name,price:K.basePrice,duration:`${K.duration} min`,rating:4.8,reviews:156,image:K.imageUrl,description:K.description||"Amazing escape room experience"})):[{id:"1",name:"Mystery Manor",price:30,duration:"60 min",rating:4.9,reviews:234,image:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=400&h=300&fit=crop",description:"Uncover the dark secrets hidden in this Victorian mansion",video:!0},{id:"2",name:"Space Odyssey",price:35,duration:"75 min",rating:4.8,reviews:189,image:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=400&h=300&fit=crop",description:"Save your crew from a malfunctioning spaceship",video:!0},{id:"3",name:"Zombie Outbreak",price:30,duration:"60 min",rating:4.7,reviews:312,image:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=400&h=300&fit=crop",description:"Find the cure before the apocalypse spreads",video:!1}],k=["10:00 AM","12:00 PM","2:00 PM","4:00 PM","6:00 PM","8:00 PM"],E=A.find(K=>K.id===o.game),O=(K,se,ne)=>{b({code:K,discount:se,type:ne}),x(!1)},$=()=>{b(null)},T=(K,se)=>{S({code:K,amount:se}),N(!1)},I=()=>{S(null)},L=()=>E?E.price*o.players:0,z=()=>g?g.type==="fixed"?g.discount:L()*g.discount/100:0,M=()=>{if(!C)return 0;const K=L()-z();return Math.min(C.amount,K)},V=L()-z()-M(),B=`BK-${Math.random().toString(36).substring(2,10).toUpperCase()}`,F=o.game&&o.date&&o.time,J=o.name&&o.email&&o.phone,ee=o.cardNumber&&o.cardExpiry&&o.cardCVV&&o.cardName,q=()=>{i("booking"),n(void 0),l({game:"",date:"",time:"",players:4,name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),b(null),S(null),x(!1),N(!1)},U=A.find(K=>K.id===u),Z=()=>{try{if(!o.name||!o.email||!o.phone){alert("Please fill in all customer details");return}if(!u||!o.date||!o.time){alert("Please complete booking details");return}const K={gameName:U?.name||"",gameId:u,date:o.date,time:o.time,customerName:o.name,customerEmail:o.email,customerPhone:o.phone,participants:o.players,ticketTypes:[{id:"standard",name:"Standard Ticket",price:U?.price||0,quantity:o.players,subtotal:(U?.price||0)*o.players}],totalPrice:V,promoCode:g?.code,giftCardCredit:C?.amount},se=Fc.saveBooking(K);console.log(" QuickBookWidget booking saved:",se.id),console.log(" Total bookings:",Fc.getAllBookings().length),i("success")}catch(K){console.error(" Error saving booking:",K),alert("Error saving booking. Please try again.")}};return r.jsxs("div",{className:"w-full min-h-screen bg-gray-50",children:[r.jsx(mr,{open:c,onOpenChange:d,children:r.jsx(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-auto sm:!max-w-[700px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-y-auto p-4 sm:p-6",children:U&&r.jsxs(r.Fragment,{children:[r.jsxs(br,{children:[r.jsx(pr,{className:"text-lg sm:text-xl lg:text-2xl",children:U.name}),r.jsxs(wr,{className:"sr-only",children:["View details about ",U.name," escape room"]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2 text-xs sm:text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Es,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:U.rating}),r.jsxs("span",{className:"text-gray-500 hidden sm:inline",children:["(",U.reviews," reviews)"]})]}),r.jsx("span",{children:""}),r.jsx("span",{children:U.duration}),r.jsx("span",{children:""}),r.jsxs("span",{style:{color:t},children:["$",U.price,"/person"]})]})]}),r.jsxs("div",{className:"mt-3 sm:mt-4",children:[r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden mb-3 sm:mb-4",children:r.jsx(fn,{src:U.image,alt:U.name,className:"w-full h-full object-cover"})}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:U.description})]})]})})}),a==="booking"&&r.jsx("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:r.jsxs(he,{className:"p-4 sm:p-6 overflow-y-auto",children:[r.jsx("h2",{className:"text-base sm:text-lg lg:text-xl text-gray-900 mb-4 sm:mb-6",children:"Quick Book Your Experience"}),r.jsxs("div",{className:"mb-6",children:[r.jsx(X,{className:"mb-3 block",children:"Select Game"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map(K=>r.jsxs("div",{onClick:()=>l({...o,game:K.id}),className:`relative cursor-pointer rounded-lg border-2 overflow-hidden transition-all hover:shadow-lg ${o.game===K.id?"shadow-lg":"border-gray-200"}`,style:{borderColor:o.game===K.id?t:void 0},children:[r.jsxs("div",{className:"aspect-video relative group",children:[r.jsx(fn,{src:K.image,alt:K.name,className:"w-full h-full object-cover"}),r.jsx("button",{onClick:se=>{se.stopPropagation(),h(K.id),d(!0)},className:"absolute top-2 right-2 bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-colors",children:r.jsx(Bc,{className:"w-4 h-4 text-gray-700"})}),K.video&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-3",children:r.jsx(vh,{className:"w-6 h-6 text-gray-900"})})})]}),r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h3",{className:"text-sm text-gray-900",children:K.name}),o.game===K.id&&r.jsx(Lt,{className:"w-5 h-5",style:{color:t}})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:K.rating})]}),r.jsxs("span",{children:["$",K.price]})]})]})]},K.id))})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"space-y-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(qs,{className:"w-4 h-4"}),"Date"]}),r.jsx("div",{className:"border rounded-lg p-3 inline-block",children:r.jsx(Ah,{mode:"single",selected:s,onSelect:K=>{n(K),K&&l({...o,date:Rn(K,"yyyy-MM-dd")})},disabled:K=>K<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Players"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>l({...o,players:Math.max(2,o.players-1)}),className:"h-12 w-12 text-center",children:"-"}),r.jsx("span",{className:"text-2xl text-gray-900 min-w-[60px] text-center",children:o.players}),r.jsx(W,{variant:"outline",onClick:()=>l({...o,players:Math.min(10,o.players+1)}),className:"h-12 w-12 text-center",children:"+"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Time"]}),r.jsxs("select",{value:o.time,onChange:K=>l({...o,time:K.target.value}),className:"w-full h-12 rounded-lg border-2 border-gray-200 px-3 text-gray-900",children:[r.jsx("option",{value:"",children:"Select time"}),k.map(K=>r.jsx("option",{value:K,children:K},K))]})]})]}),E&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"flex justify-between items-center mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Total"}),r.jsx("div",{className:"text-gray-900",children:E.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[o.players,"  $",E.price]}),r.jsxs("div",{className:"text-2xl text-gray-900",style:{color:t},children:["$",V]})]})]})]}),r.jsxs(W,{onClick:()=>i("cart"),disabled:!F,className:"w-full text-white h-12",style:{backgroundColor:F?t:void 0},children:[r.jsx(ri,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]})}),a==="cart"&&r.jsxs("div",{className:"max-w-4xl mx-auto p-3 sm:p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>i("booking"),variant:"outline",className:"mb-4 sm:mb-6 min-h-[44px]",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Booking"]}),r.jsxs(he,{className:"p-3 sm:p-4 md:p-6 bg-white border border-gray-200 shadow-sm",children:[r.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(ri,{className:"w-6 h-6"}),"Your Cart"]}),E&&r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-6",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:E.image,alt:E.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-gray-900 mb-1",children:E.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{children:["Date: ",s&&Rn(s,"dd/MM/yyyy")," at ",o.time]}),r.jsxs("div",{children:["Players: ",o.players,"  $",E.price]})]})]}),r.jsxs("div",{className:"text-gray-900",style:{color:t},children:["$",V]})]})}),r.jsx(Ze,{className:"my-6"}),r.jsx("h3",{className:"text-gray-900 mb-4",children:"Your Information"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(ma,{className:"w-4 h-4"}),"Full Name"]}),r.jsx(de,{value:o.name,onChange:K=>l({...o,name:K.target.value}),placeholder:"John Doe",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address"]}),r.jsx(de,{type:"email",value:o.email,onChange:K=>l({...o,email:K.target.value}),placeholder:"john@example.com",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]}),r.jsx(de,{type:"tel",value:o.phone,onChange:K=>l({...o,phone:K.target.value}),placeholder:"+1 (555) 123-4567",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[!g&&!v&&r.jsx("button",{onClick:()=>x(!0),className:"text-sm text-blue-600 hover:underline",children:"Add promo code"}),v&&!g&&r.jsx(Ph,{onApply:O}),g&&r.jsx(Ph,{onApply:O,onRemove:$,appliedCode:g.code,appliedDiscount:g.discount,appliedType:g.type})]}),r.jsxs("div",{children:[!C&&!w&&r.jsx("button",{onClick:()=>N(!0),className:"text-sm text-blue-600 hover:underline",children:"Apply gift card"}),w&&!C&&r.jsx(Th,{onApply:T}),C&&r.jsx(Th,{onApply:T,onRemove:I,appliedCode:C.code,appliedAmount:C.amount})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsxs("span",{className:"text-gray-900",children:["$",L()]})]}),z()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-green-600",children:"Promo Code Discount:"}),r.jsxs("span",{className:"text-green-600",children:["-$",z().toFixed(2)]})]}),M()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-purple-600",children:"Gift Card:"}),r.jsxs("span",{className:"text-purple-600",children:["-$",M().toFixed(2)]})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"flex justify-between items-center mb-6 p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[r.jsx("span",{className:"text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"text-3xl text-gray-900",style:{color:t},children:["$",V.toFixed(2)]})]}),r.jsx(W,{onClick:()=>i("checkout"),disabled:!J,className:"w-full text-white h-12",style:{backgroundColor:J?t:void 0},children:"Proceed to Checkout"})]})]}),a==="checkout"&&E&&r.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>i("cart"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-6 h-6"}),"Secure Payment"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Cardholder Name"}),r.jsx(de,{value:o.cardName,onChange:K=>l({...o,cardName:K.target.value}),placeholder:"John Doe",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Card Number"}),r.jsx(de,{value:o.cardNumber,onChange:K=>l({...o,cardNumber:K.target.value}),placeholder:"1234 5678 9012 3456",maxLength:19,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"Expiry Date"}),r.jsx(de,{value:o.cardExpiry,onChange:K=>l({...o,cardExpiry:K.target.value}),placeholder:"MM/YY",maxLength:5,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700",children:"CVV"}),r.jsx(de,{value:o.cardCVV,onChange:K=>l({...o,cardCVV:K.target.value}),placeholder:"123",maxLength:4,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-gray-700 flex items-start gap-2 mt-6",children:[r.jsx(Mn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(he,{className:"p-4 md:p-6 sticky top-4",children:[r.jsx("h3",{className:"text-gray-900 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:E.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:s&&Rn(s,"dd/MM/yyyy")})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:o.time})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:o.players})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",V]})]})]}),r.jsxs(W,{onClick:Z,disabled:!ee,className:"w-full text-white h-12",style:{backgroundColor:ee?t:void 0},children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"Complete Payment $",V]})]})})]})]}),a==="success"&&E&&r.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-6",style:{backgroundColor:`${t}15`},children:r.jsx(Lt,{className:"w-12 h-12",style:{color:t}})}),r.jsx("h2",{className:"text-3xl text-gray-900 mb-2 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full p-4 md:p-6 mb-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-gray-900",children:B})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900",children:E.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:[s&&Rn(s,"dd/MM/yyyy")," at ",o.time]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[o.players," people"]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",V]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full",children:r.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:o.email})]})}),r.jsx(W,{onClick:q,className:"text-white px-8",style:{backgroundColor:t},children:"Book Another Experience"})]})})]})}function poe({primaryColor:t="#2563eb",config:e}){const[s,n]=j.useState(1),[a,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(void 0),[u,h]=j.useState(!1),[m,f]=j.useState({game:"",date:"",time:"",players:4,name:"",email:"",phone:"",addOns:[],cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[v,x]=j.useState([]);j.useEffect(()=>(()=>{const F=cw.getAllGames();console.log(" MultiStepWidget loaded",F.length,"games from admin"),x(F);const J=()=>{const ee=cw.getAllGames();console.log(" MultiStepWidget games updated in real-time!",ee.length),x(ee)};return DataSyncEvents.subscribe("games-updated",J),()=>{DataSyncEvents.unsubscribe("games-updated",J)}})(),[]);const g=v.length>0?v.map(B=>({id:B.id.toString(),name:B.name,duration:B.duration,price:B.basePrice,rating:4.8,reviews:156,image:B.imageUrl,gallery:[B.imageUrl],description:B.description||"Amazing escape room experience",maxPlayers:B.capacity,minPlayers:2})):[{id:"1",name:"Mystery Manor",duration:60,price:30,rating:4.9,reviews:234,image:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1576086213369-97a306d36557?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?w=800&h=600&fit=crop"],tagline:"Uncover the secrets of an abandoned Victorian mansion"},{id:"2",name:"Space Odyssey",duration:75,price:35,rating:4.8,reviews:189,image:"https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=800&h=600&fit=crop"],tagline:"Save your crew from catastrophic ship malfunction"},{id:"3",name:"Zombie Outbreak",duration:60,price:30,rating:4.7,reviews:312,image:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=600&h=400&fit=crop",gallery:["https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1509281373149-e957c6296406?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1518709414768-a88981a4515d?w=800&h=600&fit=crop"],tagline:"Survive the apocalypse and find the cure"}],b=[{time:"10:00 AM",available:!0},{time:"12:00 PM",available:!0},{time:"2:00 PM",available:!1},{time:"4:00 PM",available:!0},{time:"6:00 PM",available:!0},{time:"8:00 PM",available:!0}],w=[{id:"photo",name:"Professional Photo Package",price:15,description:"High-quality photos of your experience"},{id:"video",name:"Video Recording",price:25,description:"Full video recording of your game"},{id:"hints",name:"Extra Hint Pack",price:5,description:"Get 3 additional hints during gameplay"}],N=[{number:1,name:"Select Game",icon:qs},{number:2,name:"Date & Time",icon:jr},{number:3,name:"Add-ons & Cart",icon:ri},{number:4,name:"Your Details",icon:ma},{number:5,name:"Payment",icon:rn}],C=5,S=s/C*100,A=g.find(B=>B.id===m.game),k=A?A.price*m.players:0,E=m.addOns.reduce((B,F)=>{const J=w.find(ee=>ee.id===F);return B+(J?.price||0)},0),O=k+E,$=B=>{l(B),i(!0)},T=g.find(B=>B.id===o),I=()=>{switch(s){case 1:return m.game!=="";case 2:return m.date!==""&&m.time!=="";case 3:return!0;case 4:return m.name!==""&&m.email!==""&&m.phone!=="";case 5:return m.cardNumber!==""&&m.cardExpiry!==""&&m.cardCVV!==""&&m.cardName!=="";default:return!1}},L=()=>{s<C&&I()&&n(s+1)},z=()=>{s>1&&n(s-1)},M=async()=>{if(I())try{const B=g.find(be=>be.id===m.game),F=e?.venueId||e?.venue?.id,J=m.game;if(!F||!J){re.error("Missing venue or game information"),console.error("Missing IDs:",{venueId:F,gameId:J,config:e});return}const ee=m.date instanceof Date?m.date.toISOString().split("T")[0]:m.date,q=m.time+":00",[U,Z]=m.time.split(":"),se=`${String((parseInt(U)+1)%24).padStart(2,"0")}:${Z}:00`,ne=[{id:"standard",name:"Standard Ticket",price:B?.price||0,quantity:m.players,subtotal:(B?.price||0)*m.players}],ie=await C3.createWidgetBooking({venue_id:F,game_id:J,customer_name:m.name,customer_email:m.email,customer_phone:m.phone,booking_date:ee,start_time:q,end_time:se,party_size:m.players,ticket_types:ne,total_amount:O,final_amount:O,notes:`Add-ons: ${m.addOns.join(", ")}`});ie&&(console.log(" Booking created:",ie),re.success("Booking confirmed!"),h(!0))}catch(B){console.error(" Error creating booking:",B),re.error(B.message||"Failed to create booking. Please try again.")}},V=`BK-${Math.random().toString(36).substring(2,10).toUpperCase()}`;return r.jsxs("div",{className:"w-full min-h-screen bg-gray-50",children:[r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-auto sm:!max-w-[800px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-y-auto p-4 sm:p-6",children:[r.jsxs(lg,{children:[r.jsx(pr,{children:"Booking Confirmation"}),r.jsx(wr,{children:"Your escape room booking has been confirmed successfully"})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center py-6 sm:py-8 px-2 sm:px-4",children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center mb-4 sm:mb-6",style:{backgroundColor:`${t}15`},children:r.jsx(Lt,{className:"w-10 h-10 sm:w-12 sm:h-12",style:{color:t}})}),r.jsx("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-2 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full max-w-2xl p-4 sm:p-6 mb-4 sm:mb-6",children:r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-3 sm:pb-4 border-b text-sm sm:text-base",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-gray-900 text-xs sm:text-base",children:V})]}),r.jsxs("div",{className:"flex justify-between items-center pb-3 sm:pb-4 border-b text-sm sm:text-base",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900 text-right truncate max-w-[60%]",children:A?.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-3 sm:pb-4 border-b text-sm sm:text-base",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900 text-xs sm:text-base text-right",children:["Nov ",c,", 2025 at ",m.time]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-3 sm:pb-4 border-b text-sm sm:text-base",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[m.players," people"]})]}),m.addOns.length>0&&r.jsxs("div",{className:"pb-3 sm:pb-4 border-b",children:[r.jsx("div",{className:"text-sm sm:text-base text-gray-600 mb-2",children:"Add-ons"}),r.jsx("div",{className:"space-y-1",children:m.addOns.map(B=>{const F=w.find(J=>J.id===B);return r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{className:"text-gray-700 truncate max-w-[70%]",children:F?.name}),r.jsxs("span",{className:"text-gray-900",children:["$",F?.price]})]},B)})})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-sm sm:text-base text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-xl sm:text-2xl text-gray-900",style:{color:t},children:["$",O]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6 max-w-2xl w-full",children:r.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:m.email})]})}),r.jsx(W,{onClick:()=>{h(!1),n(1),f({game:"",date:"",time:"",players:4,name:"",email:"",phone:"",addOns:[],cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),d(void 0)},className:"text-white px-6 sm:px-8 h-10 sm:h-12 text-sm sm:text-base",style:{backgroundColor:t},children:"Book Another Experience"})]})]})}),r.jsx(mr,{open:a,onOpenChange:i,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[900px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-y-auto p-4 sm:p-6",children:[r.jsxs(br,{children:[r.jsx(pr,{className:"text-lg sm:text-xl",children:T?.name}),r.jsx(wr,{className:"text-sm sm:text-base",children:T?.tagline})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-3 sm:mt-4",children:T?.gallery.map((B,F)=>r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:r.jsx(fn,{src:B,alt:`${T.name} - Image ${F+1}`,className:"w-full h-full object-cover"})},F))})]})}),r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-3 sm:py-4 lg:py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[r.jsx("h2",{className:"text-base sm:text-lg lg:text-xl text-gray-900",children:"Complete Your Booking"}),r.jsxs(De,{variant:"secondary",className:"text-blue-700 text-xs sm:text-sm",style:{backgroundColor:`${t}15`,color:t},children:["Step ",s," of ",C]})]}),r.jsx(vm,{value:S,className:"h-1.5 sm:h-2 mb-3 sm:mb-4 lg:mb-6",style:{"--progress-background":t}}),r.jsx("div",{className:"hidden lg:grid lg:grid-cols-5 gap-4",children:N.map(B=>{const F=B.icon,J=s>B.number,ee=s===B.number;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all flex-shrink-0 ${J?"text-white":ee?"border-2":"bg-gray-100 text-gray-400"}`,style:{backgroundColor:J?t:ee?"white":void 0,borderColor:ee?t:void 0,color:ee?t:void 0},children:J?r.jsx(Sr,{className:"w-5 h-5"}):r.jsx(F,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:`text-sm truncate ${ee||J?"text-gray-900":"text-gray-500"}`,children:B.name})})]},B.number)})})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-4 sm:py-6 lg:py-8 pb-24 sm:pb-8",children:[r.jsxs("div",{className:"min-h-[60vh] sm:min-h-0",children:[s===1&&r.jsxs(he,{className:"p-4 sm:p-6 bg-white shadow-sm border-gray-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 sm:mb-6",children:[r.jsx("h3",{className:"text-base sm:text-lg text-gray-900",children:"Choose Your Adventure"}),r.jsx(De,{variant:"secondary",className:"bg-red-50 text-red-700 border-red-200 text-xs",children:"Required"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:g.map(B=>r.jsxs("div",{onClick:()=>f({...m,game:B.id}),className:`cursor-pointer rounded-lg border-2 transition-all hover:shadow-lg ${m.game===B.id?"shadow-lg":"border-gray-200"}`,style:{borderColor:m.game===B.id?t:void 0},children:[r.jsxs("div",{className:"relative h-40 sm:h-48 lg:h-56 rounded-t-lg overflow-hidden group",children:[r.jsx(fn,{src:B.image,alt:B.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}),r.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 flex gap-2",children:r.jsx("button",{onClick:F=>{F.stopPropagation(),$(B.id)},className:"bg-white/90 backdrop-blur-sm p-1.5 sm:p-2 rounded-full hover:bg-white transition-colors",children:r.jsx(Bc,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-700"})})})]}),r.jsxs("div",{className:"p-3 sm:p-4",children:[r.jsxs("div",{className:"mb-2 sm:mb-3",children:[r.jsx("h4",{className:"text-sm sm:text-base text-gray-900 mb-1",children:B.name}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2",children:B.tagline})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Es,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{children:B.rating}),r.jsxs("span",{className:"text-gray-400 hidden sm:inline",children:["(",B.reviews,")"]})]}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsxs("span",{children:[B.duration," min"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-lg sm:text-xl lg:text-2xl text-gray-900",style:{color:t},children:["$",B.price,r.jsx("span",{className:"text-xs sm:text-sm text-gray-500",children:" /person"})]}),m.game===B.id&&r.jsx(Sr,{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:t}})]})]})]},B.id))})]}),s===2&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-sm border-gray-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"text-gray-900",children:"Select Date"}),r.jsx(De,{variant:"secondary",className:"bg-red-50 text-red-700 border-red-200",children:"Required"})]})}),r.jsx(Ah,{mode:"single",selected:c,onSelect:B=>{d(B),f({...m,date:B?Rn(B,"yyyy-MM-dd"):""})}})]}),r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-sm border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsxs("h3",{className:"text-gray-900",children:["Available Times",c?` - ${Rn(c,"MMM d, yyyy")}`:""]}),r.jsx(De,{variant:"secondary",className:"bg-red-50 text-red-700 border-red-200",children:"Required"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:b.map(B=>r.jsxs("button",{onClick:()=>B.available&&f({...m,time:B.time}),disabled:!B.available,className:`p-3 md:p-4 rounded-lg border-2 text-sm transition-all relative ${m.time===B.time?"border-blue-600 shadow-md":B.available?"border-gray-200 hover:border-gray-300 hover:shadow-sm":"border-gray-100 bg-gray-50 cursor-not-allowed"}`,style:{borderColor:m.time===B.time?t:void 0,backgroundColor:m.time===B.time?`${t}10`:void 0},children:[r.jsx("div",{className:"text-gray-900 text-center",children:B.time}),B.available?r.jsx("div",{className:"text-xs text-green-600 mt-1 text-center",children:"Available"}):r.jsx("div",{className:"text-xs text-red-600 mt-1 text-center",children:"Sold out"})]},B.time))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"sticky top-4",children:r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-lg border-gray-200",children:[r.jsx("h3",{className:"text-gray-900 mb-4",children:"Booking Summary"}),r.jsxs("div",{className:"mb-6",children:[r.jsxs(X,{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Number of Players"]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsx(W,{variant:"outline",size:"icon",onClick:()=>f({...m,players:Math.max(2,m.players-1)}),children:"-"}),r.jsx("span",{className:"text-2xl text-gray-900 min-w-[40px] text-center",children:m.players}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>f({...m,players:Math.min(10,m.players+1)}),children:"+"})]})]}),r.jsxs("div",{className:"space-y-3 mb-6 pb-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:A?.name||"Not selected"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:c?Rn(c,"MMM d, yyyy"):"Not selected"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:m.time||"Not selected"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:m.players})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Price per person:"}),r.jsxs("span",{className:"text-gray-900",children:["$",A?.price||0]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsxs("span",{className:"text-gray-900",children:["$",k]})]})]}),r.jsx(Ze,{className:"my-4"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-900",children:"Total:"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",k]})]})]})})})]}),s===3&&r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-sm border-gray-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 md:mb-6",children:[r.jsx("h3",{className:"text-gray-900",children:"Enhance Your Experience"}),r.jsx(De,{variant:"secondary",className:"text-gray-600",children:"Optional"})]}),r.jsx("div",{className:"space-y-4 mb-8",children:w.map(B=>{const F=m.addOns.includes(B.id);return r.jsx("div",{onClick:()=>{f(F?{...m,addOns:m.addOns.filter(J=>J!==B.id)}:{...m,addOns:[...m.addOns,B.id]})},className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${F?"shadow-md":"border-gray-200 hover:border-gray-300"}`,style:{borderColor:F?t:void 0,backgroundColor:F?`${t}05`:void 0},children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"text-gray-900",children:B.name}),F&&r.jsx(Sr,{className:"w-5 h-5",style:{color:t}})]}),r.jsx("p",{className:"text-sm text-gray-600",children:B.description})]}),r.jsxs("p",{className:"text-xl text-gray-900 ml-4",style:{color:t},children:["+$",B.price]})]})},B.id)})}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(ri,{className:"w-5 h-5"}),"Cart Summary"]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:A?.name}),r.jsxs("span",{className:"text-gray-900",children:["$",A?.price,"  ",m.players]})]}),m.addOns.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{}),m.addOns.map(B=>{const F=w.find(J=>J.id===B);return r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:F?.name}),r.jsxs("span",{className:"text-gray-900",children:["$",F?.price]})]},B)})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",O]})]})]})]})]}),s===4&&r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-sm border-gray-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 md:mb-6",children:[r.jsx("h3",{className:"text-gray-900",children:"Your Information"}),r.jsx(De,{variant:"secondary",className:"bg-red-50 text-red-700 border-red-200",children:"Required"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(ma,{className:"w-4 h-4"}),"Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"text",placeholder:"John Doe",value:m.name,onChange:B=>f({...m,name:B.target.value}),className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"email",placeholder:"john@example.com",value:m.email,onChange:B=>f({...m,email:B.target.value}),className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"tel",placeholder:"+1 (555) 123-4567",value:m.phone,onChange:B=>f({...m,phone:B.target.value}),className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]})]}),s===5&&r.jsxs(he,{className:"p-4 md:p-6 bg-white shadow-sm border-gray-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4 md:mb-6",children:[r.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5"}),"Secure Payment"]}),r.jsx(De,{variant:"secondary",className:"bg-red-50 text-red-700 border-red-200",children:"Required"})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700",children:["Cardholder Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"text",placeholder:"John Doe",value:m.cardName,onChange:B=>f({...m,cardName:B.target.value}),className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700",children:["Card Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"text",placeholder:"1234 5678 9012 3456",value:m.cardNumber,onChange:B=>f({...m,cardNumber:B.target.value}),maxLength:19,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700",children:["Expiry Date ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"text",placeholder:"MM/YY",value:m.cardExpiry,onChange:B=>f({...m,cardExpiry:B.target.value}),maxLength:5,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700",children:["CVV ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{type:"text",placeholder:"123",value:m.cardCVV,onChange:B=>f({...m,cardCVV:B.target.value}),maxLength:4,className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]})]}),r.jsx(Ze,{className:"my-6 bg-gray-200"}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-2 mb-6 shadow-sm",children:[r.jsx("h4",{className:"text-gray-900 mb-3",children:"Order Summary"}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900",children:A?.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",c,", 2025 at ",m.time]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[m.players,"  $",A?.price]})]}),m.addOns.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:"my-2"}),m.addOns.map(B=>{const F=w.find(J=>J.id===B);return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:F?.name}),r.jsxs("span",{className:"text-gray-900",children:["$",F?.price]})]},B)})]}),r.jsx(Ze,{className:"my-2"}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",O]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-gray-700 flex items-start gap-2",children:[r.jsx(Mn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg mt-8 -mx-4 md:-mx-6 px-4 md:px-6 py-4 z-10",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center",children:[s>1&&r.jsxs(W,{onClick:z,variant:"outline",className:"w-full sm:w-auto h-12 border-2 hover:bg-gray-50 order-2 sm:order-1",children:[r.jsx(an,{className:"w-5 h-5 mr-2"}),"Back"]}),r.jsx("div",{className:"flex-1 order-1 sm:order-2 w-full",children:s<C?r.jsxs(W,{onClick:L,disabled:!I(),className:"w-full h-14 text-white text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:I()?t:"#9ca3af",opacity:I()?1:.6},children:[!I()&&s===1&&"Select a game to continue",!I()&&s===2&&"Select date and time to continue",!I()&&s===4&&"Fill in all required fields",!I()&&s===5&&"Enter payment details",I()&&"Continue to Next Step",r.jsx($n,{className:"w-5 h-5 ml-2"})]}):r.jsxs(W,{onClick:M,disabled:!I(),className:"w-full h-14 text-white text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:I()?t:"#9ca3af",opacity:I()?1:.6},children:[r.jsx(Mn,{className:"w-5 h-5 mr-2"}),I()?`Complete Payment - $${O}`:"Enter payment details to complete"]})})]}),!I()&&r.jsxs("div",{className:"text-center mt-3 text-sm text-gray-500",children:[s===1&&"Please select an escape room game to continue",s===2&&"Please select both date and time slot to proceed",s===3&&"Optional: Add enhancements or continue to the next step",s===4&&"Please fill in your name, email, and phone number",s===5&&"Please enter your complete payment information"]})]})]})]})}function xoe({primaryColor:t="#2563eb",config:e}){const[s,n]=j.useState(null),[a,i]=j.useState(void 0),[o,l]=j.useState(""),[c,d]=j.useState(4),[u,h]=j.useState("browse"),[m,f]=j.useState({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[v,x]=j.useState([]);j.useEffect(()=>{const k=Fc.getAllGames();x(k),console.log(" ResolvexWidget: Admin games loaded:",k.length);const E=()=>{const O=Fc.getAllGames();x(O),console.log(" ResolvexWidget: Admin games updated:",O.length)};return rc.subscribe("games-updated",E),()=>{rc.unsubscribe("games-updated",E)}},[]);const g=v.length>0?v.map(k=>({id:k.id,name:k.name,description:k.description||"Exciting escape room adventure",image:k.imageUrl||"https://images.unsplash.com/photo-1571386630530-12fa47ebed6f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",rating:k.difficulty||4,category:"Adventure",players:`2-${k.capacity}`,duration:k.duration,price:k.basePrice,location:"Main Location"})):[{id:"1",name:"Mystery Manor",description:"Uncover hidden truths in this Victorian mystery.",image:"https://images.unsplash.com/photo-1571386630530-12fa47ebed6f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",rating:5,category:"Mystery",players:"2-8",duration:"60 min",price:30,location:"Main Street Location"},{id:"2",name:"Space Odyssey",description:"Race against time in deep space.",image:"https://images.unsplash.com/photo-1640525381904-4d92e378fbb9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",rating:4,category:"Sci-Fi",players:"4-10",duration:"75 min",price:35,location:"Downtown Location"},{id:"3",name:"Pirate's Treasure",description:"Ahoy! Adventure awaits on the high seas.",image:"https://images.unsplash.com/photo-1633465091434-117f2bcffd9d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",rating:4,category:"Adventure",players:"3-8",duration:"90 min",price:32,location:"Harbor District"},{id:"4",name:"Zombie Apocalypse",description:"Survive the undead outbreak and find the cure.",image:"https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=1080",rating:5,category:"Horror",players:"3-8",duration:"60 min",price:30,location:"Warehouse District"},{id:"5",name:"Ancient Temple",description:"Discover ancient secrets and escape the curse.",image:"https://images.unsplash.com/photo-1518709414768-a88981a4515d?w=1080",rating:4,category:"Adventure",players:"2-6",duration:"60 min",price:28,location:"City Center"},{id:"6",name:"Cyber Heist",description:"Hack the system and escape with the data.",image:"https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=1080",rating:5,category:"Thriller",players:"4-8",duration:"75 min",price:35,location:"Tech District"}],b=["10:00 AM","12:00 PM","2:00 PM","4:00 PM","6:00 PM","8:00 PM"],w=k=>Array.from({length:5},(E,O)=>r.jsx(Es,{className:`w-3 h-3 ${O<k?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},O)),N=s?s.price*c:0,C=`BK-${Math.random().toString(36).substring(2,10).toUpperCase()}`,S=()=>u==="booking"?a&&o:u==="cart"?m.name&&m.email&&m.phone:u==="checkout"?m.cardNumber&&m.cardExpiry&&m.cardCVV&&m.cardName:!0,A=()=>{h("browse"),n(null),i(void 0),l(""),d(4),f({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""})};return r.jsxs("div",{className:"w-full min-h-screen bg-gray-900",children:[u==="browse"&&r.jsx("div",{className:"p-4 sm:p-6 lg:p-8 pb-24 sm:pb-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl text-white mb-2",children:"Choose Your Adventure"}),r.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:"Select an escape room experience"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:g.map(k=>r.jsxs("div",{onClick:()=>{n(k),h("booking")},className:"group relative rounded-xl overflow-hidden cursor-pointer h-[350px] sm:h-[400px] lg:h-[450px] transform transition-all duration-300 hover:scale-105 hover:shadow-2xl",children:[r.jsx(fn,{src:k.image,alt:k.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/20"}),r.jsx("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3 bg-black/60 backdrop-blur-sm rounded-full px-2 sm:px-3 py-1 sm:py-1.5 flex items-center gap-0.5 sm:gap-1",children:w(k.rating)}),r.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-white/95 backdrop-blur-sm rounded-full px-2 sm:px-3 py-1",children:r.jsx("span",{className:"text-xs text-gray-900",children:k.category})}),r.jsxs("div",{className:"absolute bottom-2 left-2 right-2 sm:bottom-3 sm:left-3 sm:right-3",children:[r.jsx("h3",{className:"text-base sm:text-lg text-white mb-1",children:k.name}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-300 mb-2 sm:mb-3 line-clamp-2",children:k.description}),r.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 text-xs text-gray-300 mb-2 sm:mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3"}),r.jsx("span",{children:k.players})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3"}),r.jsx("span",{children:k.duration})]}),r.jsxs("div",{className:"flex items-center gap-1 hidden sm:flex",children:[r.jsx(dl,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate max-w-[120px]",children:k.location})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:"text-green-400 text-xl sm:text-2xl",children:["$",k.price]}),r.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"/person"})]}),r.jsx("button",{className:"bg-white text-gray-900 px-4 py-2 sm:px-6 sm:py-3 rounded-lg text-sm sm:text-base shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all whitespace-nowrap",children:"Book Now"})]})]})]},k.id))})]})}),u==="booking"&&s&&r.jsx("div",{className:"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-screen pb-24 sm:pb-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs(W,{onClick:()=>h("browse"),variant:"outline",className:"mb-4 sm:mb-6 h-9 sm:h-10 text-sm",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Games"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 sm:p-6 mb-4 sm:mb-6",children:[r.jsxs("div",{className:"flex gap-3 sm:gap-4 mb-4 sm:mb-6",children:[r.jsx("div",{className:"w-20 h-20 sm:w-32 sm:h-32 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h2",{className:"text-base sm:text-lg lg:text-xl text-gray-900 mb-1 sm:mb-2 truncate",children:s.name}),r.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:s.description}),r.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 text-xs sm:text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.players]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),s.duration]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(dl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"truncate max-w-[120px]",children:s.location})]})]})]})]}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-sm sm:text-base",children:"Select Date"}),r.jsx("div",{className:"border rounded-lg p-2 sm:p-3 inline-block w-full sm:w-auto",children:r.jsx(Ah,{mode:"single",selected:a,onSelect:i,disabled:k=>k<new Date(new Date().setHours(0,0,0,0)),className:"rounded-md"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Number of Players"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(W,{variant:"outline",onClick:()=>d(Math.max(2,c-1)),className:"h-12 w-12 text-center",children:"-"}),r.jsx("span",{className:"text-2xl text-gray-900 min-w-[60px] text-center",children:c}),r.jsx(W,{variant:"outline",onClick:()=>d(Math.min(10,c+1)),className:"h-12 w-12 text-center",children:"+"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Select Time"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:b.map(k=>r.jsx("button",{onClick:()=>l(k),className:`p-3 rounded-lg border-2 transition-all text-center ${o===k?"shadow-md":"border-gray-200 hover:border-gray-300"}`,style:{borderColor:o===k?t:void 0,backgroundColor:o===k?`${t}10`:void 0},children:r.jsx("div",{className:"text-sm text-gray-900",children:k})},k))})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"lg:sticky lg:top-4 max-h-[calc(100vh-2rem)] overflow-y-auto",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsx("h3",{className:"text-gray-900 mb-4",children:"Booking Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:s.name})]}),a&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:Rn(a,"dd/MM/yyyy")})]}),o&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:o})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:c})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total:"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",N]})]})]}),r.jsxs(W,{onClick:()=>h("cart"),disabled:!S(),className:"w-full text-white",style:{backgroundColor:S()?t:void 0},children:[r.jsx(ri,{className:"w-4 h-4 mr-2"}),"Add to Cart"]})]})})})]})]})}),u==="cart"&&s&&r.jsx("div",{className:"p-4 md:p-8 bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs(W,{onClick:()=>h("booking"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(ri,{className:"w-6 h-6"}),"Your Cart"]}),r.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded-lg mb-6",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-gray-900 mb-1",children:s.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{children:["Date: ",a&&Rn(a,"dd/MM/yyyy")," at ",o]}),r.jsxs("div",{children:["Players: ",c,"  $",s.price]})]})]}),r.jsxs("div",{className:"text-gray-900",style:{color:t},children:["$",N]})]})}),r.jsx(Ze,{className:"my-6"}),r.jsx("h3",{className:"text-gray-900 mb-4",children:"Your Information"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(ma,{className:"w-4 h-4"}),"Full Name"]}),r.jsx(de,{value:m.name,onChange:k=>f({...m,name:k.target.value}),placeholder:"John Doe",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address"]}),r.jsx(de,{type:"email",value:m.email,onChange:k=>f({...m,email:k.target.value}),placeholder:"john@example.com",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2 text-gray-700",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]}),r.jsx(de,{type:"tel",value:m.phone,onChange:k=>f({...m,phone:k.target.value}),placeholder:"+1 (555) 123-4567",className:"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"flex justify-between items-center mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"text-3xl text-gray-900",style:{color:t},children:["$",N]})]}),r.jsx(W,{onClick:()=>h("checkout"),disabled:!S(),className:"w-full text-white h-12",style:{backgroundColor:S()?t:void 0},children:"Proceed to Checkout"})]})]})}),u==="checkout"&&s&&r.jsx("div",{className:"p-4 md:p-8 bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs(W,{onClick:()=>h("cart"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("h2",{className:"text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-6 h-6"}),"Secure Payment"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Cardholder Name"}),r.jsx(de,{value:m.cardName,onChange:k=>f({...m,cardName:k.target.value}),placeholder:"John Doe",className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Card Number"}),r.jsx(de,{value:m.cardNumber,onChange:k=>f({...m,cardNumber:k.target.value}),placeholder:"1234 5678 9012 3456",maxLength:19,className:"h-12"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Expiry Date"}),r.jsx(de,{value:m.cardExpiry,onChange:k=>f({...m,cardExpiry:k.target.value}),placeholder:"MM/YY",maxLength:5,className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"CVV"}),r.jsx(de,{value:m.cardCVV,onChange:k=>f({...m,cardCVV:k.target.value}),placeholder:"123",maxLength:4,className:"h-12"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-gray-700 flex items-start gap-2 mt-6",children:[r.jsx(Mn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"lg:sticky lg:top-4 max-h-[calc(100vh-2rem)] overflow-y-auto",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsx("h3",{className:"text-gray-900 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Game:"}),r.jsx("span",{className:"text-gray-900",children:s.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsx("span",{className:"text-gray-900",children:a&&Rn(a,"dd/MM/yyyy")})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:o})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:c})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",N]})]})]}),r.jsxs(W,{onClick:()=>{try{const k={gameName:s?.name||"",gameId:s?.id||"",date:a?Rn(a,"yyyy-MM-dd"):"",time:o,customerName:m.name,customerEmail:m.email,customerPhone:m.phone,participants:c,ticketTypes:[{id:"standard",name:"Standard Ticket",price:s?.price||0,quantity:c,subtotal:(s?.price||0)*c}],totalPrice:N},E=Fc.saveBooking(k);console.log(" Resolvex booking saved:",E.id),h("success")}catch(k){console.error(" Error saving Resolvex booking:",k),alert("Error saving booking. Please try again.")}},disabled:!S(),className:"w-full text-white h-12",style:{backgroundColor:S()?t:void 0},children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"Complete Payment $",N]})]})})})]})]})}),u==="success"&&s&&r.jsx("div",{className:"p-4 md:p-8 bg-gray-50 min-h-screen",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[r.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-6",style:{backgroundColor:`${t}15`},children:r.jsx(Lt,{className:"w-12 h-12",style:{color:t}})}),r.jsx("h2",{className:"text-3xl text-gray-900 mb-2 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-gray-600 mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full p-4 md:p-6 mb-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-gray-900",children:C})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Game"}),r.jsx("span",{className:"text-gray-900",children:s.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:[a&&Rn(a,"dd/MM/yyyy")," at ",o]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[c," people"]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:t},children:["$",N]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full",children:r.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:m.email})]})}),r.jsx(W,{onClick:A,className:"text-white px-8",style:{backgroundColor:t},children:"Book Another Experience"})]})})})]})}function goe({primaryColor:t,gameName:e="Mystery Manor",gameDescription:s="Uncover the dark secrets hidden in an abandoned Victorian mansion",config:n,gamePrice:a=30}){const{widgetTheme:i,getCurrentPrimaryColor:o}=uoe(),l=t||o()||"#2563eb",c=i==="dark",[d,u]=j.useState(15),[h,m]=j.useState(null),[f,v]=j.useState(4),[x,g]=j.useState("booking"),[b,w]=j.useState(!1),[N,C]=j.useState(!1),[S,A]=j.useState(null),[k,E]=j.useState({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""}),[O,$]=j.useState(!1),[T,I]=j.useState(null),[L,z]=j.useState(!1),[M,V]=j.useState(null),[B,F]=j.useState(!1),[J,ee]=j.useState(""),q={name:e,description:s,price:a,duration:"60 min",difficulty:"Medium",difficultyLevel:3,players:"2-8 players",gameType:"physical",minAge:10,ageRecommendation:"10+",rating:4.9,reviewCount:234,location:"Downtown Location",image:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=1200&h=800&fit=crop",gallery:["https://images.unsplash.com/photo-1576086213369-97a306d36557?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?w=800&h=600&fit=crop"],highlights:["Perfect for beginners","Family friendly","Award-winning design","Immersive storyline"],longDescription:"Step into the eerie halls of Mystery Manor, a Victorian mansion shrouded in darkness and secrets. As amateur detectives, your team has been hired to investigate the mysterious disappearance of the manor's last owner. Legend has it that the mansion is cursed, and those who enter never leave. You have 60 minutes to unravel the mystery, find the hidden clues, and escape before you become part of the manor's dark history.",story:"In 1897, the wealthy Blackwood family mysteriously vanished from their grand Victorian estate. The mansion has been abandoned ever since, with locals reporting strange noises and eerie lights in the windows.",whatToExpect:["Atmospheric Victorian-era setting with authentic period details","Mind-bending puzzles that require teamwork and communication","Hidden compartments and secret passages to discover","An engaging storyline that unfolds as you progress","Professional game master guidance throughout your adventure"],requirements:["Minimum age: 10 years old (children under 16 must be accompanied by an adult)","Recommended group size: 4-6 players for optimal experience","No prior escape room experience necessary","Comfortable clothing and closed-toe shoes recommended","Please arrive 15 minutes before your scheduled time"],faq:[{question:"Is this escape room scary?",answer:"Mystery Manor has a spooky atmosphere but is not designed to be frightening. It's more mysterious and intriguing than scary, making it perfect for families and first-timers."},{question:"What if we get stuck?",answer:"Your game master monitors your progress and can provide hints via a screen in the room. You can request hints at any time - there's no penalty for asking for help!"},{question:"Can we bring our own food or drinks?",answer:"We have a waiting lounge where you can enjoy food and drinks before or after your game. However, food and drinks are not allowed inside the escape room itself."}],reviews:[{name:"Sarah M.",rating:5,date:"November 2025",comment:"Amazing experience! Perfect for our family outing. The puzzles were challenging but doable with teamwork."},{name:"Mike T.",rating:5,date:"October 2025",comment:"Best escape room we've ever done! The atmosphere was incredible and the story kept us engaged throughout."}]},U=Array.isArray(n?.games)&&n.games.length>0?n.games[0]:null,Z=U?.coverImage||U?.imageUrl||U?.image||q.image,K=Array.isArray(U?.galleryImages)&&U.galleryImages.length>0?U.galleryImages:q.gallery,se=[{time:"10:00 AM",available:!0,spots:6},{time:"11:30 AM",available:!0,spots:3},{time:"1:00 PM",available:!1,spots:0},{time:"2:30 PM",available:!0,spots:8},{time:"4:00 PM",available:!0,spots:5},{time:"5:30 PM",available:!0,spots:2},{time:"7:00 PM",available:!1,spots:0},{time:"8:30 PM",available:!0,spots:4}],ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ie=q.price*f,be=T?T.type==="fixed"?T.discount:ie*T.discount/100:0,ue=M?M.amount:0,oe=Math.max(0,ie-be-ue),pe=h!==null,ye=k.name&&k.email&&k.phone,$e=k.cardNumber&&k.cardExpiry&&k.cardCVV&&k.cardName,Se=async()=>{if(!(!$e||B))try{F(!0);const tt=n?.venueId||n?.venue?.id,st=U?.id||n?.gameId;if(!tt||!st){re.error("Missing venue or game information"),console.error("Missing IDs:",{venueId:tt,gameId:st,config:n});return}const At=`2025-11-${String(d).padStart(2,"0")}`,[Yt,yr]=h.split(":"),Zt=`${Yt.padStart(2,"0")}:${yr.padStart(2,"0")}:00`,tr=`${String((parseInt(Yt)+1)%24).padStart(2,"0")}:${yr.padStart(2,"0")}:00`,$t=[{id:"standard",name:"Standard Ticket",price:q.price,quantity:f,subtotal:ie}],Dr=await C3.createWidgetBooking({venue_id:tt,game_id:st,customer_name:k.name,customer_email:k.email,customer_phone:k.phone,booking_date:At,start_time:Zt,end_time:tr,party_size:f,ticket_types:$t,total_amount:ie,final_amount:oe,promo_code:T?.code,notes:`Payment: ${k.cardNumber.slice(-4)}`});Dr&&(ee(Dr.confirmation_code),g("success"),re.success("Booking confirmed!"),console.log(" Booking created:",Dr))}catch(tt){console.error(" Error creating booking:",tt),re.error(tt.message||"Failed to create booking. Please try again.")}finally{F(!1)}},Y=()=>{g("booking"),u(15),m(null),v(4),ee(""),I(null),V(null),E({name:"",email:"",phone:"",cardNumber:"",cardExpiry:"",cardCVV:"",cardName:""})},Le=n?.streetAddress||n?.address||q?.location?.address,xe=n?.city||q?.location?.city,mt=n?.state||q?.location?.state,Ue=n?.zipCode||n?.postalCode||q?.location?.zip||q?.location?.postalCode,xt=n?.country||q?.location?.country,ut=[Le,xe,mt,Ue,xt].filter(Boolean).join(", ");j.useEffect(()=>{const tt=n?.seoTitle||`${q.name} | ${n?.businessName||"Booking"}`;if(typeof document<"u"){document.title=tt;const st=(Vt,tr)=>{if(!tr)return;let $t=document.querySelector(`meta[name="${Vt}"]`);$t||($t=document.createElement("meta"),$t.setAttribute("name",Vt),document.head.appendChild($t)),$t.setAttribute("content",tr)},At=(Vt,tr)=>{if(!tr)return;let $t=document.querySelector(`meta[property="${Vt}"]`);$t||($t=document.createElement("meta"),$t.setAttribute("property",Vt),document.head.appendChild($t)),$t.setAttribute("content",tr)},Yt=n?.metaDescription||q.description,yr=Array.isArray(n?.seoKeywords)?n.seoKeywords.join(", "):n?.seoKeywords||"";st("description",Yt),st("keywords",yr),At("og:title",tt),At("og:description",Yt),At("og:image",Z),At("og:type","website"),st("twitter:card","summary_large_image"),st("twitter:title",tt),st("twitter:description",Yt),st("twitter:image",Z);const Zt=document.getElementById("calendar-singlegame-jsonld");if(n?.enableLocalBusinessSchema){const Vt=ut?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ut)}`:void 0,tr={"@context":"https://schema.org","@type":"LocalBusiness",name:n?.businessName||q.name,image:Z,description:Yt,address:Le||xe||mt||Ue||xt?{"@type":"PostalAddress",streetAddress:Le,addressLocality:xe,addressRegion:mt,postalCode:Ue,addressCountry:xt}:void 0,telephone:n?.phoneNumber,email:n?.emailAddress,hasMap:Vt},$t=Zt||document.createElement("script");$t.type="application/ld+json",$t.id="calendar-singlegame-jsonld",$t.textContent=JSON.stringify(tr,null,2),Zt||document.head.appendChild($t)}else Zt&&Zt.remove()}return()=>{const st=document.getElementById("calendar-singlegame-jsonld");st&&st.remove()}},[n,Z,q.description,q.name,ut,Le,xe,mt,Ue,xt]);const Ot=tt=>{switch(tt){case"Easy":return"bg-green-500 text-white";case"Medium":return"bg-yellow-500 text-white";case"Hard":return"bg-red-500 text-white";default:return"bg-gray-500 text-white"}};return r.jsxs("div",{className:`w-full min-h-screen ${c?"bg-[#161616]":"bg-gray-50"} transition-colors`,children:[r.jsx(mr,{open:b,onOpenChange:w,children:r.jsxs(fr,{className:`!w-screen !h-screen !max-w-none !max-h-none sm:!w-[95vw] sm:!h-[95vh] sm:!max-w-[1200px] sm:!max-h-[95vh] !rounded-none sm:!rounded-xl overflow-hidden p-0 ${c?"bg-gradient-to-b from-[#161616] to-[#0a0a0a]":"bg-gradient-to-b from-white to-gray-50"} flex flex-col`,children:[r.jsx("button",{onClick:()=>w(!1),className:`absolute top-4 right-4 z-50 w-10 h-10 rounded-full ${c?"bg-[#1a1a1a] border-[#2a2a2a]":"bg-white border-gray-200"} shadow-lg hover:shadow-xl flex items-center justify-center transition-all hover:scale-110 border`,"aria-label":"Close dialog",children:r.jsx(Is,{className:`w-5 h-5 ${c?"text-gray-300":"text-gray-600"}`})}),r.jsx(lg,{children:r.jsxs(br,{children:[r.jsx(pr,{children:q.name}),r.jsxs(wr,{children:["Complete guide to ",q.name," escape room - ",q.difficulty," difficulty, ",q.duration," duration, suitable for ages ",q.ageRecommendation,"."]})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsxs(fa,{className:"h-full w-full",children:[r.jsxs("div",{className:"relative w-full h-[400px] sm:h-[500px] overflow-hidden",children:[r.jsx(fn,{src:Z,alt:q.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 sm:p-8 lg:p-12 text-white",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[r.jsx(De,{className:`${Ot(q.difficulty)} border-0 shadow-lg px-3 py-1.5`,children:q.difficulty}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/20",children:[r.jsx(Es,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-sm",children:q.rating}),r.jsxs("span",{className:"text-xs text-gray-200",children:["(",q.reviewCount,")"]})]})]}),r.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl mb-4",children:q.name}),r.jsx("p",{className:"text-lg sm:text-xl text-gray-100 mb-6 max-w-3xl",children:q.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full",children:[r.jsx(jr,{className:"w-5 h-5"}),r.jsx("span",{children:q.duration})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full",children:[r.jsx(Xr,{className:"w-5 h-5"}),r.jsxs("span",{children:[q.players," players"]})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full",children:[r.jsx($f,{className:"w-5 h-5"}),r.jsxs("span",{children:["Age ",q.ageRecommendation]})]})]})]})})]}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 space-y-8 sm:space-y-12",children:[r.jsxs("section",{children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(Gx,{className:"w-7 h-7",style:{color:l}}),"Photo Gallery"]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:K.map((tt,st)=>r.jsx("div",{className:"aspect-video rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105",children:r.jsx(fn,{src:tt,alt:`${q.name} - Image ${st+1}`,className:"w-full h-full object-cover"})},st))})]}),r.jsxs("section",{className:`${c?"bg-[#1a1a1a] border-[#2a2a2a]":"bg-white border-gray-200"} rounded-2xl p-6 sm:p-8 shadow-lg border`,children:[r.jsxs("h2",{className:`text-2xl sm:text-3xl ${c?"text-gray-100":"text-gray-900"} mb-4 flex items-center gap-3`,children:[r.jsx(wu,{className:"w-7 h-7",style:{color:l}}),"The Story"]}),r.jsx("p",{className:`text-base sm:text-lg ${c?"text-gray-300":"text-gray-700"} leading-relaxed mb-6`,children:q.longDescription}),r.jsx("p",{className:`text-base ${c?"text-gray-400":"text-gray-600"} leading-relaxed`,children:q.story})]}),r.jsxs("section",{children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(_a,{className:"w-7 h-7",style:{color:l}}),"Key Highlights"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:q.highlights.map((tt,st)=>r.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-xl p-4 shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${l}15`},children:r.jsx(Du,{className:"w-5 h-5",style:{color:l}})}),r.jsx("span",{className:"text-gray-800",children:tt})]},st))})]}),r.jsxs("section",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6 sm:p-8 border-2",style:{borderColor:`${l}20`},children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(Ws,{className:"w-7 h-7",style:{color:l}}),"What to Expect"]}),r.jsx("ul",{className:"space-y-4",children:q.whatToExpect.map((tt,st)=>r.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[r.jsx(Lt,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:l}}),r.jsx("span",{className:"text-base",children:tt})]},st))})]}),r.jsxs("section",{className:"bg-white rounded-2xl p-6 sm:p-8 shadow-lg border border-gray-200",children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(zs,{className:"w-7 h-7",style:{color:l}}),"Requirements & Guidelines"]}),r.jsx("ul",{className:"space-y-4",children:q.requirements.map((tt,st)=>r.jsxs("li",{className:"flex items-start gap-3 text-gray-700",children:[r.jsx(ym,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:l}}),r.jsx("span",{className:"text-base",children:tt})]},st))})]}),r.jsxs("section",{children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(Pf,{className:"w-7 h-7",style:{color:l}}),"Frequently Asked Questions"]}),r.jsx(Gie,{type:"single",collapsible:!0,className:"space-y-3",children:q.faq.map((tt,st)=>r.jsxs(I1,{value:`faq-${st}`,className:"bg-white rounded-xl border border-gray-200 px-6 shadow-sm hover:shadow-md transition-shadow",children:[r.jsx($1,{className:"text-left text-base sm:text-lg text-gray-900 hover:no-underline py-4",children:tt.question}),r.jsx(D1,{className:"text-gray-600 pb-4 text-base leading-relaxed",children:tt.answer})]},st))})]}),r.jsxs("section",{children:[r.jsxs("h2",{className:"text-2xl sm:text-3xl text-gray-900 mb-6 flex items-center gap-3",children:[r.jsx(Es,{className:"w-7 h-7 fill-yellow-400 text-yellow-400"}),"Customer Reviews"]}),r.jsx("div",{className:"space-y-4",children:q.reviews.map((tt,st)=>r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-900",children:tt.name}),r.jsx("p",{className:"text-sm text-gray-500",children:tt.date})]}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((At,Yt)=>r.jsx(Es,{className:`w-4 h-4 ${Yt<tt.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},Yt))})]}),r.jsx("p",{className:"text-gray-700",children:tt.comment})]},st))})]})]})]})})]})}),r.jsx(mr,{open:N,onOpenChange:C,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-auto sm:!max-w-[1200px] !rounded-none sm:!rounded-lg p-0 overflow-hidden bg-black",children:[r.jsxs(lg,{children:[r.jsxs(pr,{children:[q.name," Video"]}),r.jsxs(wr,{children:["Watch the video trailer for ",q.name," escape room experience"]})]}),r.jsx("div",{className:"relative aspect-video w-full bg-black",children:r.jsx("video",{className:"w-full h-full",controls:!0,autoPlay:!0,src:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",children:"Your browser does not support the video tag."})})]})}),x==="booking"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative h-[280px] sm:h-[320px] bg-black overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0",children:r.jsx(fn,{src:Z,alt:`${q.name} escape room experience`,className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/30"}),r.jsxs("div",{className:"relative h-full flex flex-col justify-between",children:[r.jsxs("div",{className:"flex items-start justify-between p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(De,{className:"bg-yellow-500 text-black border-0 px-2.5 py-1 text-xs",children:[r.jsx(_a,{className:"w-3 h-3 mr-1"}),"Featured"]}),r.jsxs("div",{className:"flex items-center gap-1 bg-white/20 backdrop-blur-md px-2.5 py-1 rounded-md",children:[r.jsx(Es,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),r.jsx("span",{className:"text-white text-xs",children:q.rating}),r.jsxs("span",{className:"text-gray-200 text-xs",children:["(",q.reviewCount,")"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>w(!0),className:"bg-white/20 backdrop-blur-md text-white px-3 py-1.5 rounded-lg border border-white/30 hover:bg-white/30 transition-all flex items-center gap-1.5 text-xs",title:"View Gallery",children:[r.jsx(Bc,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"hidden sm:inline",children:"Gallery"})]}),r.jsxs("button",{onClick:()=>C(!0),className:"bg-white/20 backdrop-blur-md text-white px-3 py-1.5 rounded-lg border border-white/30 hover:bg-white/30 transition-all flex items-center gap-1.5 text-xs",title:"Watch Video",children:[r.jsx(vh,{className:"w-3.5 h-3.5 fill-white"}),r.jsx("span",{className:"hidden sm:inline",children:"Video"})]})]})]}),r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl text-white mb-2 drop-shadow-lg tracking-tight",children:q.name}),r.jsx("p",{className:"text-sm sm:text-base text-gray-200 mb-4 max-w-2xl line-clamp-2",children:q.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-lg border border-white/20",children:[r.jsx(jr,{className:"w-3.5 h-3.5 text-white"}),r.jsx("span",{className:"text-xs text-white",children:q.duration})]}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-lg border border-white/20",children:[r.jsx(Xr,{className:"w-3.5 h-3.5 text-white"}),r.jsx("span",{className:"text-xs text-white",children:q.players})]}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-lg border border-white/20",children:[r.jsx(ym,{className:"w-3.5 h-3.5 text-white"}),r.jsx("span",{className:"text-xs text-white",children:q.difficulty})]}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-lg border border-white/20",children:[r.jsx(ym,{className:"w-3.5 h-3.5 text-white"}),r.jsx("span",{className:"text-xs text-white",children:q.gameType})]}),r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/10 backdrop-blur-md px-3 py-1.5 rounded-lg border border-white/20",children:[r.jsx(dl,{className:"w-3.5 h-3.5 text-white"}),r.jsx("span",{className:"text-xs text-white",children:q.location})]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[r.jsxs("button",{onClick:()=>w(!0),className:"bg-white/10 backdrop-blur-md text-white px-3 py-1.5 rounded-lg border border-white/30 hover:bg-white/20 transition-all flex items-center gap-1.5 text-xs",title:"View Gallery",children:[r.jsx(Bc,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"View Gallery"})]}),r.jsxs("button",{onClick:()=>C(!0),className:"bg-white/10 backdrop-blur-md text-white px-3 py-1.5 rounded-lg border border-white/30 hover:bg-white/20 transition-all flex items-center gap-1.5 text-xs",title:"Watch Video",children:[r.jsx(vh,{className:"w-3.5 h-3.5 fill-white"}),r.jsx("span",{children:"Watch Video"})]})]})]})]})]}),r.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[r.jsxs(he,{className:"p-6 sm:p-8 bg-white shadow-sm border border-gray-200 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 gap-2",children:[r.jsx("h2",{className:"text-lg sm:text-xl text-gray-900",children:"Select Date"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(W,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-lg border-gray-300 hover:bg-gray-50",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx("span",{className:"text-sm sm:text-base text-gray-900 px-2 whitespace-nowrap min-w-[140px] text-center",children:"November 2025"}),r.jsx(W,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-lg border-gray-300 hover:bg-gray-50",children:r.jsx($n,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-2 sm:gap-3",children:[ne.map(tt=>r.jsx("div",{className:"text-center text-sm text-gray-600 py-2",children:tt},tt)),Array.from({length:30}).map((tt,st)=>{const At=st+1,Yt=d===At,yr=At>0,Zt=At===12;return r.jsx("button",{onClick:()=>yr&&u(At),disabled:!yr,className:`
                            aspect-square rounded-xl text-base transition-all flex items-center justify-center
                            ${Zt&&!Yt?"text-white shadow-md":Yt?"text-gray-900 border-2 shadow-sm bg-white hover:bg-gray-50":yr?"text-gray-700 hover:bg-gray-50 border border-gray-200":"text-gray-300 cursor-not-allowed border border-gray-100"}
                          `,style:{backgroundColor:Zt&&!Yt?l:void 0,borderColor:Yt?l:void 0},children:At},st)})]})]}),d&&r.jsxs(he,{className:"p-6 sm:p-8 bg-white shadow-sm border border-gray-200 rounded-2xl",children:[r.jsxs("h2",{className:"text-lg sm:text-xl text-gray-900 mb-4 sm:mb-6",children:["Available Times - Nov ",d]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4",children:se.map(tt=>r.jsxs("button",{onClick:()=>tt.available&&m(tt.time),disabled:!tt.available,className:`
                            p-4 sm:p-5 rounded-xl border-2 text-center transition-all
                            ${h===tt.time?"shadow-lg transform scale-105":tt.available?"border-gray-200 hover:border-gray-300 hover:shadow-md hover:scale-102":"border-gray-100 cursor-not-allowed opacity-50"}
                          `,style:{backgroundColor:h===tt.time?l:void 0,borderColor:h===tt.time?l:void 0},children:[r.jsx("div",{className:`text-sm sm:text-base mb-2 ${h===tt.time?"text-white":tt.available?"text-gray-900":"text-gray-400"}`,children:tt.time}),tt.available?r.jsxs("div",{className:`text-xs ${h===tt.time?"text-white/90":"text-green-600"}`,children:[tt.spots," spots left"]}):r.jsx("div",{className:"text-xs text-red-500",children:"Sold Out"})]},tt.time))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"lg:sticky lg:top-4",children:r.jsx(he,{className:"p-6 sm:p-8 bg-gradient-to-br from-white to-gray-50 shadow-2xl border-2 rounded-2xl max-h-[calc(100vh-2rem)] overflow-y-auto",style:{borderColor:`${l}20`},children:r.jsxs("div",{className:"space-y-6 pb-20 sm:pb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b-2",style:{borderColor:`${l}20`},children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:`${l}15`},children:r.jsx(ri,{className:"w-5 h-5",style:{color:l}})}),r.jsx("h2",{className:"text-xl text-gray-900",children:"Your Booking"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[r.jsxs("label",{className:"text-sm text-gray-700 mb-3 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4",style:{color:l}}),r.jsx("span",{className:"",children:"Number of Players"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-4 mt-3",children:[r.jsx(W,{variant:"outline",size:"icon",onClick:()=>v(Math.max(2,f-1)),className:"h-12 w-12 rounded-full hover:scale-110 transition-transform",style:{borderColor:l,color:l},children:"-"}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl text-gray-900",style:{color:l},children:f}),r.jsx("div",{className:"text-xs text-gray-500",children:"players"})]}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>v(Math.min(10,f+1)),className:"h-12 w-12 rounded-full hover:scale-110 transition-transform",style:{borderColor:l,color:l},children:"+"})]})]}),r.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(ym,{className:"w-4 h-4",style:{color:l}}),"Game"]}),r.jsx("span",{className:"text-gray-900 text-right truncate max-w-[55%]",children:q.name})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(qs,{className:"w-4 h-4",style:{color:l}}),"Date"]}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",d,", 2025"]})]}),h&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4",style:{color:l}}),"Time"]}),r.jsx("span",{className:"text-gray-900",children:h})]})]})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-5 border-2",style:{borderColor:`${l}30`},children:[r.jsxs("div",{className:"flex justify-between mb-3 text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:"text-gray-900",children:["$",q.price,"  ",f]})]}),r.jsx(Ze,{className:"my-3"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-base text-gray-900",children:"Total"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-3xl",style:{color:l},children:["$",oe]}),r.jsx("div",{className:"text-xs text-gray-500",children:"USD"})]})]})]}),n?.showLocationBlock!==!1&&(ut||n?.phoneNumber||n?.emailAddress)&&r.jsxs("div",{className:"rounded-xl p-5 border-2 bg-white",style:{borderColor:`${l}30`},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(dl,{className:"w-4 h-4",style:{color:l}}),r.jsx("span",{className:"text-sm text-gray-900",children:"Location & Info"})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[ut&&r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsx("span",{className:"text-gray-600",children:"Address"}),r.jsx("span",{className:"text-gray-900 text-right",children:ut})]}),n?.phoneNumber&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Phone"}),r.jsx("a",{href:`tel:${n.phoneNumber}`,className:"text-gray-900 hover:underline",children:n.phoneNumber})]}),n?.emailAddress&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Email"}),r.jsx("a",{href:`mailto:${n.emailAddress}`,className:"text-gray-900 hover:underline",children:n.emailAddress})]}),ut&&r.jsx("div",{className:"pt-2",children:r.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ut)}`,target:"_blank",rel:"noreferrer",className:"text-sm font-medium hover:underline",style:{color:l},children:"Get directions"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(W,{onClick:()=>w(!0),variant:"outline",className:"w-full h-12 text-base border-2 hover:bg-gray-50",style:{borderColor:`${l}30`,color:l},children:[r.jsx(Ws,{className:"w-4 h-4 mr-2"}),"See Full Details"]}),r.jsxs(W,{onClick:()=>g("cart"),disabled:!pe,className:"w-full text-white h-14 text-lg shadow-xl hover:shadow-2xl transform hover:scale-[1.02] transition-all relative overflow-hidden group",style:{backgroundColor:pe?l:void 0,opacity:pe?1:.5},children:[r.jsx("div",{className:"absolute inset-0 bg-white/20 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),r.jsx(ri,{className:"w-5 h-5 mr-2 relative z-10"}),r.jsx("span",{className:"relative z-10",children:h?"Continue to Cart":"Select Time to Continue"})]}),!h&&r.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Please select a time slot to continue"})]})]})})})})]})})]}),x==="cart"&&r.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>g("booking"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Booking"]}),r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(ri,{className:"w-6 h-6"}),"Your Cart"]}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-6",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:Z,alt:q.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg text-gray-900 mb-1",children:q.name}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{children:["Date: Nov ",d,", 2025 at ",h]}),r.jsxs("div",{children:["Players: ",f,"  $",q.price]})]})]}),r.jsxs("div",{className:"text-xl text-gray-900",style:{color:l},children:["$",ie]})]})}),r.jsx(Ze,{className:"my-6"}),r.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Your Information"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(ma,{className:"w-4 h-4"}),"Full Name"]}),r.jsx(de,{value:k.name,onChange:tt=>E({...k,name:tt.target.value}),placeholder:"John Doe",className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address"]}),r.jsx(de,{type:"email",value:k.email,onChange:tt=>E({...k,email:tt.target.value}),placeholder:"john@example.com",className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"flex items-center gap-2",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]}),r.jsx(de,{type:"tel",value:k.phone,onChange:tt=>E({...k,phone:tt.target.value}),placeholder:"+1 (555) 123-4567",className:"h-12"})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"space-y-2 mt-4 mb-6",children:[r.jsxs("div",{children:[!T&&!O&&r.jsx("button",{onClick:()=>$(!0),className:`text-sm hover:underline ${c?"text-[#6366f1]":"text-blue-500"}`,children:"Add promo code"}),O&&!T&&r.jsx(Ph,{onApply:(tt,st,At)=>{I({code:tt,discount:st,type:At}),$(!1)},className:"mb-2"}),T&&r.jsx(Ph,{onApply:(tt,st,At)=>{I({code:tt,discount:st,type:At})},onRemove:()=>I(null),appliedCode:T.code,appliedDiscount:T.discount,appliedType:T.type,className:"mb-2"})]}),r.jsxs("div",{children:[!M&&!L&&r.jsx("button",{onClick:()=>z(!0),className:`text-sm hover:underline ${c?"text-[#6366f1]":"text-blue-500"}`,children:"Apply gift card"}),L&&!M&&r.jsx(Th,{onApply:(tt,st)=>{V({code:tt,amount:st}),z(!1)},className:"mb-2"}),M&&r.jsx(Th,{onApply:(tt,st)=>{V({code:tt,amount:st})},onRemove:()=>V(null),appliedCode:M.code,appliedAmount:M.amount,className:"mb-2"})]})]}),r.jsx(Ze,{className:"my-6"}),r.jsxs("div",{className:"space-y-3 mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between text-base",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:"text-gray-900",children:["$",ie]})]}),T&&r.jsxs("div",{className:"flex justify-between text-base",children:[r.jsx("span",{className:"text-green-600",children:"Promo Code Discount"}),r.jsxs("span",{className:"text-green-600",children:["-$",be]})]}),M&&r.jsxs("div",{className:"flex justify-between text-base",children:[r.jsx("span",{className:"text-blue-600",children:"Gift Card Credit"}),r.jsxs("span",{className:"text-blue-600",children:["-$",ue]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-xl text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"text-3xl text-gray-900",style:{color:l},children:["$",oe]})]})]}),r.jsxs(W,{onClick:()=>g("checkout"),disabled:!ye,className:"w-full text-white h-14 text-lg shadow-lg hover:shadow-xl",style:{backgroundColor:ye?l:void 0},children:["Proceed to Checkout",r.jsx(an,{className:"w-5 h-5 ml-2 rotate-180"})]})]})]}),x==="checkout"&&r.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:[r.jsxs(W,{onClick:()=>g("cart"),variant:"outline",className:"mb-6",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsxs("h2",{className:"text-2xl text-gray-900 mb-6 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-6 h-6"}),"Secure Payment"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Cardholder Name"}),r.jsx(de,{value:k.cardName,onChange:tt=>E({...k,cardName:tt.target.value}),placeholder:"John Doe",className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Card Number"}),r.jsx(de,{value:k.cardNumber,onChange:tt=>E({...k,cardNumber:tt.target.value}),placeholder:"1234 5678 9012 3456",maxLength:19,className:"h-12"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Expiry Date"}),r.jsx(de,{value:k.cardExpiry,onChange:tt=>E({...k,cardExpiry:tt.target.value}),placeholder:"MM/YY",maxLength:5,className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"CVV"}),r.jsx(de,{value:k.cardCVV,onChange:tt=>E({...k,cardCVV:tt.target.value}),placeholder:"123",maxLength:4,className:"h-12"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-gray-700 flex items-start gap-2 mt-6",children:[r.jsx(Mn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{children:"Your payment information is encrypted and secure"})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"lg:sticky lg:top-4",children:r.jsxs(he,{className:"p-4 md:p-6",children:[r.jsx("h3",{className:"text-xl text-gray-900 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Experience:"}),r.jsx("span",{className:"text-gray-900",children:q.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Date:"}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",d,", 2025"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Time:"}),r.jsx("span",{className:"text-gray-900",children:h})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players:"}),r.jsx("span",{className:"text-gray-900",children:f})]}),r.jsx(Ze,{}),T&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-green-600",children:"Promo Discount:"}),r.jsxs("span",{className:"text-green-600",children:["-$",be]})]}),M&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-blue-600",children:"Gift Card:"}),r.jsxs("span",{className:"text-blue-600",children:["-$",ue]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-lg text-gray-900",children:"Total"}),r.jsxs("span",{className:"text-2xl text-gray-900",style:{color:l},children:["$",oe]})]})]}),r.jsxs(W,{onClick:Se,disabled:!$e||B,className:"w-full text-white h-14 text-lg shadow-lg hover:shadow-xl",style:{backgroundColor:$e&&!B?l:void 0},children:[r.jsx(rn,{className:"w-5 h-5 mr-2"}),B?"Processing...":`Complete Payment $${oe}`]})]})})})]})]}),x==="success"&&r.jsx("div",{className:"max-w-4xl mx-auto p-4 md:p-8",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[r.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center mb-6 animate-pulse",style:{backgroundColor:`${l}15`},children:r.jsx(Lt,{className:"w-16 h-16",style:{color:l}})}),r.jsx("h2",{className:"text-4xl text-gray-900 mb-3 text-center",children:"Booking Confirmed!"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8 text-center",children:"Your escape room adventure is all set"}),r.jsx(he,{className:"w-full p-6 md:p-8 mb-6 shadow-xl",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Booking Number"}),r.jsx("span",{className:"text-xl text-gray-900",children:J})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Experience"}),r.jsx("span",{className:"text-gray-900",children:q.name})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Date & Time"}),r.jsxs("span",{className:"text-gray-900",children:["Nov ",d,", 2025 at ",h]})]}),r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b",children:[r.jsx("span",{className:"text-gray-600",children:"Players"}),r.jsxs("span",{className:"text-gray-900",children:[f," people"]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx("span",{className:"text-xl text-gray-900",children:"Total Paid"}),r.jsxs("span",{className:"text-3xl text-gray-900",style:{color:l},children:["$",oe]})]})]})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 w-full",children:r.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["A confirmation email has been sent to ",r.jsx("strong",{children:k.email})]})}),r.jsx(W,{onClick:Y,className:"text-white px-8 h-14 text-lg shadow-lg",style:{backgroundColor:l},children:"Book Another Experience"})]})})]})}function aD({children:t,className:e=""}){return r.jsx("div",{className:`w-full h-full overflow-auto overscroll-contain ${e}`,children:r.jsx("div",{className:"min-h-full",children:t})})}function yQe({isOpen:t,onClose:e,primaryColor:s="#4f46e5",theme:n="light"}){const[a,i]=j.useState(n),[o,l]=j.useState("amount"),[c,d]=j.useState(null),[u,h]=j.useState(""),[m,f]=j.useState([{id:"1",name:"",email:""}]),[v,x]=j.useState(""),[g,b]=j.useState(""),[w,N]=j.useState(""),[C,S]=j.useState("general"),[A,k]=j.useState({cardNumber:"",expiryDate:"",cvv:"",billingEmail:""}),E=[50,100,150,200,250,500],O=[{id:"birthday",name:"Birthday",emoji:"",color:"#ec4899"},{id:"holiday",name:"Holiday",emoji:"",color:"#10b981"},{id:"celebration",name:"Celebration",emoji:"",color:"#f59e0b"},{id:"general",name:"General",emoji:"",color:"#6366f1"}],$=()=>{f([...m,{id:Date.now().toString(),name:"",email:""}])},T=K=>{m.length>1&&f(m.filter(se=>se.id!==K))},I=(K,se,ne)=>{f(m.map(ie=>ie.id===K?{...ie,[se]:ne}:ie))},L=()=>(c||parseInt(u)||0)*m.length,z=()=>{if(o==="amount"){if(!c&&!u){alert("Please select or enter an amount");return}l("recipients")}else if(o==="recipients"){if(m.some(se=>!se.name.trim()||!se.email.trim())){alert("Please fill in all recipient details");return}l("customize")}else if(o==="customize"){if(!g.trim()){alert("Please enter your name");return}l("payment")}else if(o==="payment"){if(!A.cardNumber||!A.expiryDate||!A.cvv||!A.billingEmail){alert("Please fill in all payment details");return}try{const K=m.map(ie=>({name:ie.name,email:ie.email,status:"sent"})),se={amount:c||parseInt(u),recipients:K,senderName:g,message:v,theme:C,deliveryDate:w},ne=Fc.saveGiftVoucher(se);console.log(" Gift voucher saved with real-time sync:",ne.id),console.log(" Total vouchers:",Fc.getAllGiftVouchers().length),setTimeout(()=>{l("success")},1500)}catch(K){console.error(" Error saving gift voucher:",K),alert("Error saving gift voucher. Please try again.");return}}},M=()=>{o==="recipients"?l("amount"):o==="customize"?l("recipients"):o==="payment"&&l("customize")},V=()=>{l("amount"),d(null),h(""),f([{id:"1",name:"",email:""}]),x(""),b(""),N(""),S("general"),k({cardNumber:"",expiryDate:"",cvv:"",billingEmail:""})};if(!t)return null;const B=a==="dark",F=B?"bg-[#0a0a0a]":"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",J=B?"bg-[#161616]":"bg-white",ee=B?"border-[#2a2a2a]":"border-gray-200",q=B?"text-white":"text-gray-900",U=B?"text-[#a3a3a3]":"text-gray-600",Z=B?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500";return r.jsx(aD,{children:r.jsx("div",{className:`fixed inset-0 z-50 ${F} overflow-y-auto`,children:r.jsx("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:`${J} border ${ee} rounded-xl shadow-lg p-4 sm:p-6 mb-6 sticky top-0 z-10 backdrop-blur-sm ${B?"bg-[#161616]/95":"bg-white/95"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"w-5 h-5 text-yellow-500 animate-pulse"}),r.jsx(Ni,{className:"w-8 h-8",style:{color:s}}),r.jsx(_a,{className:"w-5 h-5 text-yellow-500 animate-pulse"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:`text-2xl ${q}`,children:"Gift Vouchers"}),r.jsx("p",{className:`text-sm ${U}`,children:"Give unforgettable experiences"})]})]}),r.jsx("button",{onClick:e,className:`p-2 rounded-lg transition-colors ${B?"hover:bg-[#1e1e1e] text-[#737373] hover:text-white":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,children:r.jsx(Is,{className:"w-6 h-6"})})]})}),o!=="success"&&r.jsx("div",{className:`${J} border ${ee} rounded-xl p-6 mb-6 shadow-lg`,children:r.jsx("div",{className:"flex items-center justify-between",children:["amount","recipients","customize","payment"].map((K,se)=>{const ne=o===K,ie=["amount","recipients","customize","payment"].indexOf(o)>se;return r.jsxs(ce.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center flex-1",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${ie?"bg-green-500 border-green-500 text-white":ne?"border-2 text-white":B?"bg-[#1e1e1e] border-[#3a3a3a] text-[#737373]":"bg-gray-100 border-gray-300 text-gray-400"}`,style:ne?{backgroundColor:s,borderColor:s}:void 0,children:ie?r.jsx(Sr,{className:"w-5 h-5"}):se+1}),r.jsx("span",{className:`text-xs mt-2 capitalize ${ne?B?"text-white":"text-gray-900":U}`,children:K==="amount"?"Amount":K==="recipients"?"Recipients":K==="customize"?"Customize":"Payment"})]}),se<3&&r.jsx("div",{className:`h-0.5 flex-1 ${ie?"bg-green-500":B?"bg-[#2a2a2a]":"bg-gray-200"}`})]},K)})})}),o==="amount"&&r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-6 sm:p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${s}20`},children:r.jsx(ri,{className:"w-6 h-6",style:{color:s}})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${q}`,children:"Select Amount"}),r.jsx("p",{className:U,children:"Choose a voucher value"})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:E.map(K=>r.jsxs("button",{onClick:()=>{d(K),h("")},className:`p-6 rounded-xl border-2 transition-all hover:scale-105 ${c===K?"border-2":B?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,style:c===K?{borderColor:s,backgroundColor:B?`${s}20`:`${s}10`}:void 0,children:[r.jsxs("div",{className:`text-3xl mb-1 ${q}`,children:["$",K]}),r.jsx("div",{className:`text-sm ${U}`,children:"Per voucher"})]},K))}),r.jsx(Ze,{className:`my-6 ${B?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Or enter custom amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 text-xl ${U}`,children:"$"}),r.jsx(de,{type:"number",placeholder:"0",value:u,onChange:K=>{h(K.target.value),d(null)},className:`pl-8 text-xl h-14 ${Z}`})]}),r.jsx("p",{className:`text-sm ${U}`,children:"Minimum $10, Maximum $1000"})]}),r.jsx("div",{className:"flex justify-end gap-3 mt-8",children:r.jsxs(W,{onClick:z,size:"lg",style:{backgroundColor:s},className:"text-white hover:opacity-90",children:["Continue",r.jsx($n,{className:"w-4 h-4 ml-2"})]})})]}),o==="recipients"&&r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-6 sm:p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:r.jsx(Ds,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${q}`,children:"Add Recipients"}),r.jsx("p",{className:U,children:"Who should receive the vouchers?"})]})]}),r.jsx("div",{className:"space-y-4 mb-6 max-h-[400px] overflow-y-auto pr-2",children:m.map((K,se)=>r.jsxs("div",{className:`p-4 rounded-lg border ${ee} ${B?"bg-[#1e1e1e]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs(De,{variant:"outline",className:"text-xs",children:["Recipient ",se+1]}),m.length>1&&r.jsx("button",{onClick:()=>T(K.id),className:`p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/20 ${U} hover:text-red-600`,children:r.jsx(Is,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Recipient Name"}),r.jsx(de,{placeholder:"John Doe",value:K.name,onChange:ne=>I(K.id,"name",ne.target.value),className:Z})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Email Address"}),r.jsx(de,{type:"email",placeholder:"john@example.com",value:K.email,onChange:ne=>I(K.id,"email",ne.target.value),className:Z})]})]})]},K.id))}),r.jsxs(W,{onClick:$,variant:"outline",className:`w-full mb-6 ${B?"border-[#3a3a3a] hover:bg-[#1e1e1e]":"border-gray-300"}`,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Another Recipient"]}),r.jsx(Ze,{className:`my-6 ${B?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsx("div",{className:`p-4 rounded-lg ${B?"bg-[#4f46e5]/10 border border-[#4f46e5]/30":"bg-indigo-50 border border-indigo-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:U,children:"Total vouchers"}),r.jsxs("p",{className:`text-2xl ${q}`,children:[m.length,"  $",c||u||0]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:U,children:"Total amount"}),r.jsxs("p",{className:"text-3xl",style:{color:s},children:["$",L()]})]})]})}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:M,variant:"outline",size:"lg",className:B?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:z,size:"lg",style:{backgroundColor:s},className:"text-white hover:opacity-90",children:["Continue",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]})]}),o==="customize"&&r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-6 sm:p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center",children:r.jsx(wu,{className:"w-6 h-6 text-pink-600 dark:text-pink-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${q}`,children:"Personalize Your Gift"}),r.jsx("p",{className:U,children:"Add a special touch"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Your Name"}),r.jsx(de,{placeholder:"From: Your Name",value:g,onChange:K=>b(K.target.value),className:Z})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Gift Theme"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:O.map(K=>r.jsxs("button",{onClick:()=>S(K.id),className:`p-4 rounded-lg border-2 transition-all hover:scale-105 ${C===K.id?"border-2":B?"border-[#2a2a2a]":"border-gray-200"}`,style:C===K.id?{borderColor:s,backgroundColor:B?`${s}20`:`${s}10`}:void 0,children:[r.jsx("div",{className:"text-3xl mb-2",children:K.emoji}),r.jsx("div",{className:`text-sm ${q}`,children:K.name})]},K.id))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Personal Message (Optional)"}),r.jsx(Ps,{placeholder:"Add a heartfelt message...",value:v,onChange:K=>x(K.target.value),rows:4,maxLength:250,className:Z}),r.jsxs("p",{className:`text-sm ${U}`,children:[v.length,"/250 characters"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Delivery Date (Optional)"}),r.jsx(de,{type:"date",value:w,onChange:K=>N(K.target.value),className:Z}),r.jsx("p",{className:`text-sm ${U}`,children:"Leave blank to send immediately"})]})]}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:M,variant:"outline",size:"lg",className:B?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:z,size:"lg",style:{backgroundColor:s},className:"text-white hover:opacity-90",children:["Continue to Payment",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]})]}),o==="payment"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-6 sm:p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:r.jsx(rn,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${q}`,children:"Payment Details"}),r.jsx("p",{className:U,children:"Secure checkout"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Card Number"}),r.jsx(de,{placeholder:"1234 5678 9012 3456",value:A.cardNumber,onChange:K=>k({...A,cardNumber:K.target.value}),className:Z})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Expiry Date"}),r.jsx(de,{placeholder:"MM/YY",value:A.expiryDate,onChange:K=>k({...A,expiryDate:K.target.value}),className:Z})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"CVV"}),r.jsx(de,{placeholder:"123",value:A.cvv,onChange:K=>k({...A,cvv:K.target.value}),className:Z})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:B?"text-white":"text-gray-700",children:"Billing Email"}),r.jsx(de,{type:"email",placeholder:"your@email.com",value:A.billingEmail,onChange:K=>k({...A,billingEmail:K.target.value}),className:Z})]})]}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:M,variant:"outline",size:"lg",className:B?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:z,size:"lg",className:"bg-green-600 hover:bg-green-700 text-white",children:["Complete Purchase $",L()]})]})]})}),r.jsx("div",{children:r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-6 shadow-xl sticky top-24`,children:[r.jsx("h3",{className:`text-xl mb-4 ${q}`,children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:U,children:"Voucher Amount"}),r.jsxs("span",{className:q,children:["$",c||u]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:U,children:"Recipients"}),r.jsx("span",{className:q,children:m.length})]}),r.jsx(Ze,{className:B?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:q,children:"Subtotal"}),r.jsxs("span",{className:q,children:["$",L()]})]}),r.jsx(Ze,{className:B?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:`text-lg ${q}`,children:"Total"}),r.jsxs("span",{className:"text-2xl text-green-600 dark:text-green-400",children:["$",L()]})]})]}),r.jsx("div",{className:`p-3 rounded-lg ${B?"bg-green-900/20":"bg-green-50"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:`text-sm ${B?"text-green-400":"text-green-700"}`,children:"All vouchers valid for 12 months"})]})})]})})]}),o==="success"&&r.jsxs("div",{className:`${J} border ${ee} rounded-xl p-12 shadow-xl text-center`,children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:r.jsx(Sr,{className:"w-10 h-10 text-green-600 dark:text-green-400"})})}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(Es,{className:"w-6 h-6 text-yellow-500 animate-pulse"}),r.jsx(Du,{className:"w-6 h-6 text-orange-500 animate-pulse"}),r.jsx(wu,{className:"w-6 h-6 text-pink-500 animate-pulse"})]}),r.jsx("h2",{className:`text-3xl mb-4 ${q}`,children:"Gift Vouchers Sent!"}),r.jsxs("p",{className:`text-lg ${U} mb-8`,children:[m.length," gift ",m.length===1?"voucher has":"vouchers have"," been sent successfully"]}),r.jsx("div",{className:`max-w-md mx-auto p-6 rounded-lg ${B?"bg-[#1e1e1e] border border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} mb-8`,children:r.jsx("div",{className:"space-y-3",children:m.map(K=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(Sr,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),r.jsxs("div",{className:"text-left flex-1",children:[r.jsx("p",{className:`text-sm ${q}`,children:K.name}),r.jsx("p",{className:`text-xs ${U}`,children:K.email})]})]},K.id))})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(W,{onClick:V,size:"lg",style:{backgroundColor:s},className:"text-white hover:opacity-90",children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Send More Vouchers"]}),r.jsx(W,{onClick:e,variant:"outline",size:"lg",className:B?"border-[#3a3a3a]":"",children:"Close"})]})]})]})})})})}function IO({primaryColor:t="#0ea5e9",config:e,theme:s="light"}){const[n,a]=j.useState(s),[i,o]=j.useState("categories"),[l,c]=j.useState(null),[d,u]=j.useState(null),[h,m]=j.useState(null),[f,v]=j.useState(""),x=new Date,[g,b]=j.useState(x.getMonth()),[w,N]=j.useState(x.getFullYear()),[C,S]=j.useState("English (US)"),A=["January","February","March","April","May","June","July","August","September","October","November","December"];Array.from({length:3},(Fe,Kt)=>2025+Kt);const k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],[E,O]=j.useState([]),[$,T]=j.useState({}),[I,L]=j.useState(""),[z,M]=j.useState({}),[V,B]=j.useState({}),[F,J]=j.useState({}),[ee,q]=j.useState({fullName:"",phone:"",email:"",emailUpdates:!1}),[U,Z]=j.useState({cardNumber:"",expiryDate:"",securityCode:"",country:"United States"}),[K,se]=j.useState(!1),[ne,ie]=j.useState(!1),[be,ue]=j.useState(!1),[oe,pe]=j.useState(null),[ye,$e]=j.useState(!1),[Se,Y]=j.useState(null),[Le,xe]=j.useState(""),[mt,Ue]=j.useState(""),[xt,ut]=j.useState(!1),[Ot,tt]=j.useState(!1),[st,At]=j.useState(!1),[Yt,yr]=j.useState(!1),[Zt,Vt]=j.useState([]),[tr,$t]=j.useState(!0),[Dr,Er]=j.useState([]),[hr,Ct]=j.useState(!1),is=Fe=>{if(!d)return[];const Kt=Fe.toISOString().split("T")[0];return Fc.getAvailableTimeSlots(d.id,Kt)};j.useEffect(()=>{(async()=>{try{$t(!0);const Vr=await Fc.getAllGames();Vt(Vr||[])}catch(Vr){console.error("Error loading admin games:",Vr)}finally{$t(!1)}})();const Kt=()=>{const Vr=Fc.getAllGames();Vt(Vr||[])};rc.subscribe("games-updated",Kt);const kr=()=>{rc.unsubscribe("games-updated",Kt)};return()=>{kr()}},[]),j.useEffect(()=>{(async()=>{if(d&&i==="calendar"){Ct(!0);try{const Kt=await Re();Er(Kt)}catch(Kt){console.error("Error loading calendar days:",Kt)}finally{Ct(!1)}}})()},[d,g,w,i]);const Pt={...{showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!0,ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30},{id:"veteran",name:"Veterans",description:"Must show military ID",price:25}],categories:[{id:"1",name:"Traditional Escape Rooms",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxlc2NhcGUlMjByb29tJTIwZGFyayUyMG15c3RlcmlvdXN8ZW58MXx8fHwxNzYxOTM1ODcyfDA&ixlib=rb-4.1.0&q=80&w=1080"},{id:"2",name:"Printable Escape Rooms",image:"https://images.unsplash.com/photo-1632387958032-3b563a92091f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx2aW50YWdlJTIwcGhvdG9ncmFwaHMlMjBwb2xhcm9pZHxlbnwxfHx8fDE3NjE5MzU4NzJ8MA&ixlib=rb-4.1.0&q=80&w=1080"}],games:[{id:"1",name:"Zombie Apocalypse",image:"https://images.unsplash.com/photo-1659059530318-656a112ad2cd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx6b21iaWUlMjBhcG9jYWx5cHNlJTIwaG9ycm9yfGVufDF8fHx8MTc2MTg5OTYzNHww&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1",description:"Can you survive the zombie apocalypse and find the cure?",capacity:10,basePrice:25,availability:{}},{id:"2",name:"Area 51",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxlc2NhcGUlMjByb29tJTIwZGFyayUyMG15c3RlcmlvdXN8ZW58MXx8fHwxNzYxOTM1ODcyfDA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:5,categoryId:"1",capacity:10,basePrice:25,availability:{}},{id:"3",name:"Catacombs",image:"https://images.unsplash.com/photo-1637481687365-9b133c567071?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjYXRhY29tYnMlMjB1bmRlcmdyb3VuZCUyMHR1bm5lbHxlbnwxfHx8fDE3NjE5MzU4NzN8MA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:2,categoryId:"1",capacity:10,basePrice:25,availability:{}},{id:"4",name:"Murder Mystery",image:"https://images.unsplash.com/photo-1636056471685-1cfdfa9d2e4b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtdXJkZXIlMjBteXN0ZXJ5JTIwZGV0ZWN0aXZlfGVufDF8fHx8MTc2MTkzNTg3M3ww&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1",capacity:10,basePrice:25,availability:{}},{id:"5",name:"The Jolly Roger, Curse of the Devil's Shroud",image:"https://images.unsplash.com/photo-1561625116-df74735458a5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwaXJhdGUlMjBzaGlwJTIwd3JlY2t8ZW58MXx8fHwxNzYxOTM1ODc0fDA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:0,categoryId:"1",capacity:10,basePrice:25,availability:{}}],additionalQuestions:[{id:"hear-about",question:"How did you hear about us?",type:"select",options:["Google","Facebook","Friend","Other"],required:!1}],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us. We can rebook you to a different date and/or time or issue a refund in the form of a gift card."},...e},kt=Pt.categories||[],zt=Zt.length>0?Zt:Pt.games||[],or=Pt.ticketTypes||[],Re=async()=>{const Fe=[],Kt=new Date(w,g,1).getDay(),kr=new Date(w,g+1,0).getDate(),Vr=new Date(w,g,0).getDate();for(let Hs=Kt-1;Hs>=0;Hs--){const Po=Vr-Hs,lo=g===0?11:g-1;Fe.push({date:Po,month:lo,year:g===0?w-1:w,isCurrentMonth:!1,slots:[]})}for(let Hs=1;Hs<=kr;Hs++){const Po=[];if(d)try{const lo=`${w}-${String(g+1).padStart(2,"0")}-${String(Hs).padStart(2,"0")}`;(await Fc.getAvailableTimeSlots(d.id,lo)).forEach(Dl=>{Dl.available&&Po.push({time:Dl.time,game:d.name,available:!0})})}catch(lo){console.error(`Error loading availability for ${w}-${String(g+1).padStart(2,"0")}-${String(Hs).padStart(2,"0")}:`,lo)}Fe.push({date:Hs,month:g,year:w,isCurrentMonth:!0,slots:Po})}const gs=42-Fe.length,dn=g===11?0:g+1,oo=g===11?w+1:w;for(let Hs=1;Hs<=gs;Hs++)Fe.push({date:Hs,month:dn,year:oo,isCurrentMonth:!1,slots:[]});return Fe},Je=()=>{g===0?(b(11),N(w-1)):b(g-1)},bt=()=>{g===11?(b(0),N(w+1)):b(g+1)},gr=Fe=>{const Kt=typeof Fe=="string"?parseInt(Fe)||0:Fe;return r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(kr=>r.jsx(Es,{className:`w-3 h-3 ${kr<=Kt?"fill-current text-gray-900":"text-gray-300"}`},kr))})},je=Fe=>{c(Fe),o("games")},Ce=Fe=>{u(Fe),o("calendar")},Qe=Fe=>{const Kt=new Date(Fe.year,Fe.month,Fe.date);m(Kt),o("timeslot")},He=Fe=>{v(Fe),o("plan")},vt=()=>{switch(i){case"games":o("categories"),c(null);break;case"calendar":o("games"),u(null);break;case"timeslot":o("calendar"),m(null);break;case"plan":o("timeslot"),v("");break;case"cart":o("plan");break;case"checkout":o("cart");break}},le=()=>{o("categories"),c(null),u(null),m(null),v("")},Ee=()=>{o("calendar"),m(null),v("")},We=()=>{if(!h||!f)return"Select a date and time";try{const Kt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h.getDay()],kr=A[h.getMonth()],Vr=h.getDate(),gs=h.getFullYear(),[dn,oo]=f.split(" "),[Hs,Po]=dn.split(":").map(Number);let lo=Hs+1,Yc=oo;lo===12?Yc=oo==="AM"?"PM":"AM":lo>12&&(lo=lo-12,Yc="PM");const Dl=Po===0?"00":Po.toString().padStart(2,"0");return`${Kt}, ${kr} ${Vr}, ${gs} at ${f}  ${lo}:${Dl} ${Yc}`}catch{return"Invalid date or time"}},at=(Fe,Kt)=>{T(kr=>({...kr,[Fe]:Math.max(0,(kr[Fe]||0)+Kt)}))},nt=()=>{const Fe=[];Object.entries($).forEach(([Kt,kr])=>{const Vr=or.find(gs=>gs.id===Kt);if(Vr&&kr>0)for(let gs=0;gs<kr;gs++)Fe.push({id:`${Kt}-${Date.now()}-${gs}`,ticketTypeId:Kt,ticketTypeName:Vr.name,price:Vr.price})}),O(Fe),o("cart")},It=Fe=>{O(Kt=>Kt.filter(kr=>kr.id!==Fe))},vr=Fe=>{const Kt=z[Fe]?.toUpperCase()||"",gs=Object.values({veteran:[{code:"VETERAN15",discount:.15,applicableTypes:["veteran"]},{code:"VETERAN25",discount:.25,applicableTypes:["veteran"]},{code:"THANKYOU10",discount:.1,applicableTypes:["veteran"]}],player:[{code:"SAVE10",discount:.1,applicableTypes:["player"]},{code:"WELCOME20",discount:.2,applicableTypes:["player"]}]}).flat().find(dn=>dn.code===Kt&&dn.applicableTypes.includes(Fe));gs?(J(dn=>({...dn,[Fe]:{code:gs.code,discount:gs.discount}})),B(dn=>({...dn,[Fe]:!1}))):alert("Invalid promo code for this ticket type")},Xt=Fe=>{J(Kt=>{const kr={...Kt};return delete kr[Fe],kr}),M(Kt=>{const kr={...Kt};return delete kr[Fe],kr})},Mt=(Fe,Kt)=>{pe({code:Fe,amount:Kt}),ue(!1)},Gt=()=>{pe(null)},Wt=(Fe,Kt,kr)=>{Y({code:Fe,discount:Kt,type:kr}),$e(!1)},xr=()=>{Y(null)},Cr=()=>E.reduce((Fe,Kt)=>Fe+Kt.price,0),Pr=Fe=>{const Kt=F[Fe];return Kt?E.filter(Vr=>Vr.ticketTypeId===Fe).reduce((Vr,gs)=>Vr+gs.price,0)*Kt.discount:0},Gr=()=>{let Fe=0;return Object.keys(F).forEach(Kt=>{Fe+=Pr(Kt)}),Se&&(Fe+=Se.type==="fixed"?Se.discount:Cr()*Se.discount/100),Fe},os=()=>(Cr()-Gr())*.06,ws=()=>{if(!oe)return 0;const Fe=Cr()-Gr()+os();return Math.min(oe.amount,Fe)},Wa=()=>Cr()-Gr()+os()-ws(),xi=()=>{const Fe={};return E.forEach(Kt=>{Fe[Kt.ticketTypeName]=(Fe[Kt.ticketTypeName]||0)+1}),Fe},Ao=()=>{const Fe={};return E.forEach(Kt=>{Fe[Kt.ticketTypeId]||(Fe[Kt.ticketTypeId]={ticketType:Kt.ticketTypeName,items:[],price:Kt.price}),Fe[Kt.ticketTypeId].items.push(Kt)}),Fe},Vs=()=>{o("plan")},Gc=()=>{E.length>0&&o("checkout")},io=()=>ee.fullName.trim()!==""&&ee.phone.trim()!==""&&ee.email.trim()!==""&&ee.email.includes("@")&&U.cardNumber.trim()!==""&&U.cardNumber.replace(/\s/g,"").length>=13&&U.expiryDate.trim()!==""&&U.securityCode.trim()!==""&&U.securityCode.length>=3,da=()=>{o("categories"),c(null),u(null),m(null),v(""),O([]),T({}),M({}),B({}),J({}),ue(!1),pe(null),q({fullName:"",phone:"",email:"",emailUpdates:!1}),Z({cardNumber:"",expiryDate:"",securityCode:"",country:"United States"})},Eo=async()=>{if(!ee.fullName.trim()){alert("Please enter your full name");return}if(!ee.phone.trim()){alert("Please enter your phone number");return}if(!ee.email.trim()||!ee.email.includes("@")){alert("Please enter a valid email address");return}if(!U.cardNumber.trim()||U.cardNumber.replace(/\s/g,"").length<13){alert("Please enter a valid card number");return}if(!U.expiryDate.trim()){alert("Please enter card expiration date");return}if(!U.securityCode.trim()||U.securityCode.length<3){alert("Please enter a valid security code");return}se(!0),await new Promise(Kt=>setTimeout(Kt,1500));const Fe=Math.random()>.15;se(!1),o(Fe?"success":"failed")},qe=n==="dark",Fs=qe?"bg-[#0a0a0a]":"bg-gray-100",Xs=qe?"bg-[#161616]":"bg-white",ta=qe?"border-[#2a2a2a]":"border-gray-200",ts=qe?"text-white":"text-gray-900",es=qe?"text-[#a3a3a3]":"text-gray-600",$l=qe?"hover:bg-[#1e1e1e]":"hover:bg-gray-50";return r.jsxs(aD,{children:[r.jsx("div",{className:`w-full min-h-screen ${Fs} flex items-center justify-center p-0 sm:p-2 lg:p-4`,children:r.jsxs("div",{className:`w-full h-auto max-w-6xl ${Xs} sm:rounded-xl shadow-2xl overflow-hidden flex flex-col min-h-screen sm:min-h-0 sm:my-4`,children:[r.jsx("div",{className:`${Xs} border-b ${ta} px-3 sm:px-6 py-3 sm:py-4 flex-shrink-0 sticky top-0 z-10 shadow-sm backdrop-blur-sm ${qe?"bg-[#161616]/95":"bg-white/95"}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[r.jsxs("button",{onClick:()=>a(Fe=>Fe==="light"?"dark":"light"),className:`flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] justify-center ${qe?"bg-[#2a2a2a] border-[#3a3a3a] text-[#a3a3a3] hover:bg-[#333]":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:[qe?r.jsx(mw,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}):r.jsx(Vv,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium whitespace-nowrap",children:qe?"Light":"Dark"})]}),Pt.showSecuredBadge&&r.jsxs("button",{onClick:()=>ut(!0),className:`flex items-center gap-1 sm:gap-1.5 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] ${qe?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20":"bg-green-50 hover:bg-green-100 active:bg-green-200 text-green-700 border-green-200"}`,children:[r.jsx(Mn,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap hidden xs:inline",children:"Secured"}),r.jsx(Mc,{className:"w-3 h-3 flex-shrink-0 hidden sm:block"})]}),Pt.showHealthSafety&&r.jsxs("button",{onClick:()=>tt(!0),className:`flex items-center gap-1 sm:gap-1.5 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] ${qe?"bg-[#4f46e5]/10 border-[#4f46e5]/30 text-[#6366f1] hover:bg-[#4f46e5]/20":""}`,style:qe?void 0:{backgroundColor:`${t}10`,borderColor:`${t}30`,color:t},children:[r.jsx(_a,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap hidden xs:inline",children:"Safety"}),r.jsx(Mc,{className:"w-3 h-3 flex-shrink-0 hidden sm:block"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>At(!0),className:`flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] ${qe?"bg-[#4f46e5]/10 border-[#4f46e5]/30 text-[#6366f1] hover:bg-[#4f46e5]/20":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[r.jsx(Ni,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0",style:{color:qe?"#6366f1":"#16a34a"}}),r.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap hidden sm:inline",children:"Gift vouchers"})]}),r.jsx("button",{onClick:()=>{E.length>0&&i!=="success"&&i!=="failed"?ie(!0):(o("categories"),c(null),u(null),m(null),v(""),O([]),T({}))},className:`transition-colors p-2.5 active:scale-90 touch-manipulation rounded-lg min-w-[44px] min-h-[44px] flex items-center justify-center ${qe?"text-[#737373] hover:text-[#a3a3a3] hover:bg-[#1e1e1e]":"text-gray-400 hover:text-gray-600 active:text-gray-700 hover:bg-gray-100"}`,children:r.jsx(Is,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})}),i!=="categories"&&i!=="success"&&i!=="failed"&&r.jsxs("div",{className:`${Xs} px-3 sm:px-6 py-3 sm:py-4 border-b ${ta} flex-shrink-0 sticky top-[57px] sm:top-[65px] z-10 shadow-sm backdrop-blur-sm ${qe?"bg-[#161616]/95":"bg-white/95"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("button",{onClick:vt,className:`flex items-center gap-1.5 sm:gap-2 transition-colors active:scale-95 p-2.5 sm:p-2 rounded-lg ${$l} touch-manipulation min-w-[44px] min-h-[44px] ${qe?"text-[#a3a3a3] hover:text-[#6366f1]":"text-gray-700 hover:text-blue-600 active:text-blue-700 active:bg-gray-100"}`,children:[r.jsx(an,{className:"w-5 h-5 flex-shrink-0"}),r.jsxs("span",{className:"text-sm sm:text-base hidden sm:inline",children:[i==="games"&&"Categories",i==="calendar"&&(l?.name||"Games"),i==="timeslot"&&"Different date",i==="plan"&&"Different time",i==="cart"&&"Tickets",i==="checkout"&&"Cart"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:i==="checkout"&&r.jsxs(W,{variant:"outline",size:"sm",onClick:le,className:"flex items-center gap-2 active:scale-95 touch-manipulation",children:[r.jsx(MS,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Keep shopping"})]})})]}),i==="plan"&&r.jsxs("div",{className:`mt-2 text-xs ${qe?"text-[#737373]":"text-gray-500"}`,children:["Fields marked with ",r.jsx("span",{className:qe?"text-red-400":"text-red-500",children:"*"})," are required"]})]}),r.jsxs("div",{className:`${Xs} overflow-y-auto flex-1 overscroll-contain`,children:[i==="categories"&&r.jsxs("div",{className:"p-4 sm:p-6 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-2xl sm:text-3xl md:text-3xl ${ts} mb-2`,children:"Choose Your Adventure"}),r.jsx("p",{className:`text-sm sm:text-base ${es}`,children:"Select a category to explore available experiences"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5 md:gap-6",children:kt.map((Fe,Kt)=>r.jsx("div",{className:"relative rounded-xl sm:rounded-2xl overflow-hidden shadow-lg cursor-pointer transform transition-all active:scale-[0.98] hover:scale-[1.02] hover:shadow-xl group animate-in fade-in slide-in-from-bottom-4 duration-500 touch-manipulation",style:{animationDelay:`${Kt*100}ms`},onClick:()=>je(Fe),children:r.jsxs("div",{className:"aspect-[4/3] relative",children:[r.jsx(fn,{src:Fe.image,alt:Fe.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-out"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent group-hover:from-black/80 transition-all duration-300"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 md:p-6 flex items-end justify-between gap-2 sm:gap-3",children:[r.jsx("h3",{className:"text-white text-base sm:text-lg md:text-2xl flex-1 leading-tight",children:Fe.name}),r.jsx(W,{className:"text-white px-3 sm:px-4 md:px-6 h-10 sm:h-9 md:h-10 text-sm sm:text-base whitespace-nowrap shadow-lg active:scale-95 transition-transform touch-manipulation min-w-[44px]",style:{backgroundColor:t},children:"View"})]})]})},Fe.id))})]}),i==="games"&&l&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl ${ts} mb-1.5 sm:mb-2`,children:l.name}),r.jsx("p",{className:`text-sm sm:text-base ${es}`,children:"Choose your escape room experience"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:zt.filter(Fe=>Fe.categoryId===l.id).map((Fe,Kt)=>r.jsx("div",{className:"relative rounded-xl sm:rounded-2xl overflow-hidden shadow-lg cursor-pointer transform transition-all active:scale-[0.98] hover:scale-[1.02] hover:shadow-xl group animate-in fade-in slide-in-from-bottom-4 duration-500 touch-manipulation",style:{animationDelay:`${Kt*100}ms`},onClick:()=>Ce(Fe),children:r.jsxs("div",{className:"aspect-[4/3] relative",children:[r.jsx(fn,{src:Fe.image,alt:Fe.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-out"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent group-hover:from-black/85 transition-all duration-300"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 md:p-6",children:[r.jsx("h3",{className:"text-white text-sm sm:text-base md:text-xl mb-1.5 sm:mb-2 leading-tight",children:Fe.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-1.5 text-white text-xs mb-2 sm:mb-3",children:[r.jsx("span",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-full px-2 sm:px-2.5 py-0.5",children:Fe.priceRange}),r.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm",children:Fe.ageRange}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{className:"text-xs sm:text-sm",children:Fe.duration}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsxs("span",{className:"hidden md:flex items-center gap-1 text-xs sm:text-sm",children:["Difficulty: ",gr(Fe.difficulty)]})]}),r.jsx(W,{className:"text-white px-3 sm:px-4 md:px-6 h-10 sm:h-9 md:h-10 whitespace-nowrap pointer-events-none shadow-lg text-sm min-w-[44px]",style:{backgroundColor:t},children:"Select date"})]})]})},Fe.id))})]}),i==="calendar"&&d&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsx("div",{className:"relative rounded-lg sm:rounded-xl overflow-hidden mb-4 sm:mb-6 md:mb-8 shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:r.jsxs("div",{className:"aspect-[16/9] sm:aspect-[21/9] relative",children:[r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 md:p-8",children:[r.jsx("h2",{className:"text-white text-lg sm:text-xl md:text-4xl mb-1 sm:mb-2 leading-tight",children:d.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-1.5 md:gap-2 text-white text-xs",children:[r.jsx("span",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-full px-2 sm:px-2.5 py-0.5",children:d.priceRange}),r.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm",children:d.ageRange}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{className:"text-xs sm:text-sm",children:d.duration}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsxs("span",{className:"hidden md:flex items-center gap-1 text-xs sm:text-sm",children:["Difficulty: ",gr(d.difficulty)]})]}),d.description&&r.jsx("p",{className:"text-white/90 mt-1 sm:mt-2 max-w-2xl text-xs sm:text-sm hidden sm:block",children:d.description})]})]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("button",{onClick:Je,className:`p-2.5 sm:p-2 md:p-3 rounded-lg transition-colors active:scale-95 touch-manipulation flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center ${qe?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Previous month",children:r.jsx(an,{className:`w-5 h-5 sm:w-6 sm:h-6 ${qe?"text-[#a3a3a3]":"text-gray-700"}`})}),r.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2 flex-1 px-2",children:[r.jsx("h3",{className:`text-base sm:text-lg md:text-2xl ${ts} font-semibold`,children:A[g]}),r.jsx("span",{className:`text-base sm:text-lg md:text-2xl ${qe?"text-[#737373]":"text-gray-400"}`,children:""}),r.jsx("h3",{className:`text-base sm:text-lg md:text-2xl ${ts} font-semibold`,children:w}),r.jsx("span",{className:`text-base sm:text-lg md:text-2xl ${qe?"text-[#737373]":"text-gray-400"}`,children:""})]}),r.jsx("button",{onClick:bt,className:`p-2.5 sm:p-2 md:p-3 rounded-lg transition-colors active:scale-95 touch-manipulation flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center ${qe?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Next month",children:r.jsx($n,{className:`w-5 h-5 sm:w-6 sm:h-6 ${qe?"text-[#a3a3a3]":"text-gray-700"}`})})]}),r.jsxs("div",{className:"mb-6 sm:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100",children:[r.jsx("div",{className:"grid grid-cols-7 mb-3 sm:mb-4",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map((Fe,Kt)=>r.jsxs("div",{className:`text-center text-xs sm:text-sm py-2 font-semibold uppercase tracking-wide ${es}`,children:[r.jsx("span",{className:"hidden sm:inline",children:k[Kt].slice(0,3)}),r.jsx("span",{className:"sm:hidden",children:Fe})]},Fe))}),hr?r.jsx("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2 md:gap-3",children:Array.from({length:42}).map((Fe,Kt)=>r.jsx("div",{className:`aspect-square rounded-lg sm:rounded-xl ${qe?"bg-[#1e1e1e]":"bg-gray-50"} animate-pulse`},Kt))}):r.jsx("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2 md:gap-3",children:Dr.map((Fe,Kt)=>{const kr=new Date().getDate()===Fe.date&&new Date().getMonth()===Fe.month&&new Date().getFullYear()===Fe.year,Vr=Fe.slots.length>0,gs=Fe.isCurrentMonth;return r.jsxs("button",{onClick:()=>Vr&&gs?Qe(Fe):null,disabled:!Vr||!gs,className:`
                            aspect-square rounded-lg sm:rounded-xl transition-all touch-manipulation calendar-day
                            flex flex-col items-center justify-center relative font-medium
                            ${gs?"":qe?"text-[#525252] cursor-default":"text-gray-300 cursor-default"}
                            ${Vr&&gs?"cursor-pointer active:scale-95 hover:opacity-90":"cursor-not-allowed"}
                            ${Vr&&gs?"text-white shadow-sm hover:shadow-md active:shadow-lg":qe?"bg-[#1e1e1e] text-[#737373] border border-[#2a2a2a]":"bg-gray-50 text-gray-400 border border-gray-200"}
                            ${kr&&Vr?qe?"ring-2 ring-offset-2 ring-offset-[#161616]":"ring-2 ring-offset-2 ring-offset-white":""}
                          `,style:{backgroundColor:Vr&&gs?t:void 0,borderColor:Vr&&gs?t:void 0,"--tw-ring-color":kr?t:void 0},"aria-label":`${A[Fe.month]} ${Fe.date}, ${Vr?`${Fe.slots.length} times available`:"No times available"}`,children:[r.jsx("span",{className:"text-sm sm:text-base md:text-lg relative z-10",children:Fe.date}),Vr&&gs&&r.jsx("span",{className:"absolute bottom-1 sm:bottom-1.5 left-1/2 -translate-x-1/2 w-1 h-1 sm:w-1.5 sm:h-1.5 bg-white rounded-full shadow-sm"})]},Kt)})})]}),r.jsxs("div",{className:"text-center space-y-2 mb-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-200",children:[r.jsx("p",{className:"text-sm sm:text-base font-medium",style:{color:qe?"#6366f1":t},children:"Click a date to browse availability"}),r.jsx("p",{className:`text-xs sm:text-sm ${qe?"text-[#737373]":"text-gray-500"}`,children:"Green dates have available time slots"})]})]}),i==="timeslot"&&d&&h&&r.jsxs("div",{className:"p-4 sm:p-6 md:p-10 pb-20 sm:pb-10",children:[r.jsx("div",{className:"relative rounded-xl sm:rounded-2xl overflow-hidden mb-6 md:mb-8 shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:r.jsxs("div",{className:"aspect-[16/9] sm:aspect-[21/9] relative",children:[r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 sm:p-6 md:p-8",children:[r.jsx("h2",{className:"text-white text-xl sm:text-2xl md:text-4xl mb-1",children:d.name}),r.jsx("p",{className:"text-white/90 text-sm sm:text-base md:text-lg",children:"Choose a start time"})]})]})}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6 lg:hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("button",{onClick:()=>{const Fe=new Date(h);Fe.setDate(Fe.getDate()-1),m(Fe)},className:`p-2 sm:p-3 rounded-lg sm:rounded-xl border transition-colors active:scale-95 touch-manipulation shadow-sm ${qe?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a] border-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200 border-gray-200"}`,"aria-label":"Previous day",children:r.jsx(an,{className:`w-5 h-5 sm:w-6 sm:h-6 ${qe?"text-[#a3a3a3]":"text-gray-700"}`})}),r.jsxs("div",{className:`text-center px-4 py-2 rounded-lg sm:rounded-xl border min-w-[200px] sm:min-w-[240px] ${qe?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:[r.jsx("p",{className:"text-xs sm:text-sm mb-0.5 font-medium",style:{color:qe?"#6366f1":t},children:"Selected Date"}),r.jsxs("h3",{className:`text-sm sm:text-base font-semibold ${ts}`,children:[k[h.getDay()],", ",A[h.getMonth()]," ",h.getDate()]})]}),r.jsx("button",{onClick:()=>{const Fe=new Date(h);Fe.setDate(Fe.getDate()+1),m(Fe)},className:`p-2 sm:p-3 rounded-lg sm:rounded-xl border transition-colors active:scale-95 touch-manipulation shadow-sm ${qe?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a] border-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200 border-gray-200"}`,"aria-label":"Next day",children:r.jsx($n,{className:`w-5 h-5 sm:w-6 sm:h-6 ${qe?"text-[#a3a3a3]":"text-gray-700"}`})})]}),r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6",children:[(()=>{const Fe=new Date(h);Fe.setDate(Fe.getDate()-1);const Kt=k[Fe.getDay()],kr=A[Fe.getMonth()],Vr=Fe.getDate(),gs=is(Fe);return r.jsxs("div",{className:"hidden lg:block animate-in fade-in slide-in-from-left-4 duration-500",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("button",{onClick:()=>{m(Fe)},className:`text-sm transition-colors mb-1 active:scale-95 touch-manipulation ${qe?"text-[#737373] hover:text-[#a3a3a3] active:text-white":"text-gray-500 hover:text-gray-700 active:text-gray-900"}`,children:"Previous day"}),r.jsxs("h3",{className:`text-sm sm:text-base ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:[Kt,", ",kr," ",Vr]})]}),r.jsx("div",{className:"space-y-2",children:gs.length>0?gs.map((dn,oo)=>r.jsxs("button",{onClick:()=>{m(Fe),He(dn.time)},className:`w-full flex items-center justify-between px-3 sm:px-4 py-3 sm:py-3.5 border-2 rounded-lg active:scale-[0.98] transition-all shadow-sm hover:shadow touch-manipulation ${qe?"border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/10 active:bg-[#4f46e5]/20 text-[#a3a3a3] hover:text-[#6366f1]":"border-gray-300 hover:border-blue-500 hover:bg-blue-50 active:bg-blue-100 text-gray-700 hover:text-blue-600"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:dn.time})]}),r.jsx($n,{className:"w-4 h-4 flex-shrink-0"})]},oo)):r.jsx("div",{className:`text-center py-4 text-sm ${qe?"text-[#737373]":"text-gray-500"}`,children:"No available time slots"})})]})})(),(()=>{const Fe=k[h.getDay()],Kt=A[h.getMonth()],kr=h.getDate(),Vr=is(h);return r.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-500 delay-100",children:[r.jsxs("div",{className:"text-center mb-4 hidden lg:block",children:[r.jsx("p",{className:"text-xs sm:text-sm mb-1 font-medium",style:{color:qe?"#6366f1":t},children:"You selected"}),r.jsxs("h3",{className:`text-sm sm:text-base font-medium ${ts}`,children:[Fe,", ",Kt," ",kr]})]}),r.jsx("div",{className:"space-y-2",children:Vr.length>0?Vr.map((gs,dn)=>r.jsxs("button",{onClick:()=>He(gs.time),className:"w-full flex items-center justify-between px-3 sm:px-4 py-3 sm:py-3.5 border-2 rounded-lg transition-all shadow-sm hover:shadow-md active:shadow-lg active:scale-[0.98] touch-manipulation",style:{borderColor:qe?"#4f46e5":t,color:qe?"#6366f1":t,backgroundColor:qe?"#4f46e510":`${t}10`},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"font-medium text-sm sm:text-base",children:gs.time})]}),r.jsx($n,{className:"w-5 h-5 flex-shrink-0"})]},dn)):r.jsx("div",{className:`text-center py-4 text-sm ${qe?"text-[#737373]":"text-gray-500"}`,children:"No available time slots"})})]})})(),(()=>{const Fe=new Date(h);Fe.setDate(Fe.getDate()+1);const Kt=k[Fe.getDay()],kr=A[Fe.getMonth()],Vr=Fe.getDate(),gs=is(Fe);return r.jsxs("div",{className:"hidden lg:block animate-in fade-in slide-in-from-right-4 duration-500 delay-200",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("button",{onClick:()=>{m(Fe)},className:`text-sm transition-colors mb-1 active:scale-95 touch-manipulation ${qe?"text-[#737373] hover:text-[#a3a3a3] active:text-white":"text-gray-500 hover:text-gray-700 active:text-gray-900"}`,children:"Next day"}),r.jsxs("h3",{className:`text-sm sm:text-base ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:[Kt,", ",kr," ",Vr]})]}),r.jsx("div",{className:"space-y-2",children:gs.length>0?gs.map((dn,oo)=>r.jsxs("button",{onClick:()=>{m(Fe),He(dn.time)},className:`w-full flex items-center justify-between px-3 sm:px-4 py-3 sm:py-3.5 border-2 rounded-lg active:scale-[0.98] transition-all shadow-sm hover:shadow touch-manipulation ${qe?"border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#4f46e5]/10 active:bg-[#4f46e5]/20 text-[#a3a3a3] hover:text-[#6366f1]":"border-gray-300 hover:border-blue-500 hover:bg-blue-50 active:bg-blue-100 text-gray-700 hover:text-blue-600"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:dn.time})]}),r.jsx($n,{className:"w-4 h-4 flex-shrink-0"})]},oo)):r.jsx("div",{className:`text-center py-4 text-sm ${qe?"text-[#737373]":"text-gray-500"}`,children:"No available time slots"})})]})})()]})})]}),i==="plan"&&d&&r.jsx("div",{className:"p-4 sm:p-6 md:p-10 pb-20 sm:pb-10",children:r.jsxs("div",{className:"max-w-3xl",children:[r.jsxs("div",{className:`flex gap-3 sm:gap-4 mb-6 md:mb-8 p-3 sm:p-4 rounded-xl border animate-in fade-in slide-in-from-bottom-4 duration-500 ${qe?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-28 md:h-28 rounded-lg overflow-hidden flex-shrink-0 shadow-md",children:r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:`text-base sm:text-xl md:text-2xl mb-1 truncate ${ts}`,children:d.name}),r.jsxs("p",{className:`text-xs sm:text-sm md:text-base flex items-center gap-2 ${es}`,children:[r.jsx(qs,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"line-clamp-2",children:We()})]})]})]}),r.jsx("h3",{className:`text-xl sm:text-2xl md:text-2xl mb-4 md:mb-6 ${ts}`,children:"Plan your experience"}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:or.map((Fe,Kt)=>r.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 md:gap-4 p-3 sm:p-4 md:p-5 border-2 rounded-xl transition-all shadow-sm hover:shadow animate-in fade-in slide-in-from-bottom-4 duration-500 touch-manipulation ${qe?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,style:{animationDelay:`${Kt*100}ms`},children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[r.jsx(W,{size:"sm",variant:"outline",onClick:()=>at(Fe.id,-1),className:"h-9 w-9 sm:h-10 sm:w-10 md:h-12 md:w-12 p-0 shadow-sm hover:shadow active:shadow-lg active:scale-90 transition-all touch-manipulation",style:{backgroundColor:qe?"#4f46e5":t,color:"white",borderColor:qe?"#4f46e5":t},children:r.jsx(BE,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),r.jsx("div",{className:"w-8 sm:w-10 md:w-12 text-center text-lg sm:text-xl md:text-2xl font-semibold",style:{color:qe?"#6366f1":t},children:$[Fe.id]||0}),r.jsx(W,{size:"sm",variant:"outline",onClick:()=>at(Fe.id,1),className:"h-9 w-9 sm:h-10 sm:w-10 md:h-12 md:w-12 p-0 shadow-sm hover:shadow active:shadow-lg active:scale-90 transition-all touch-manipulation",style:{backgroundColor:qe?"#4f46e5":t,color:"white",borderColor:qe?"#4f46e5":t},children:r.jsx(Ts,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`text-sm sm:text-base md:text-lg font-medium ${ts}`,children:Fe.name}),r.jsx("div",{className:`text-xs sm:text-sm ${qe?"text-[#737373]":"text-gray-500"}`,children:Fe.description})]}),r.jsxs("div",{className:`text-lg sm:text-xl md:text-2xl font-semibold flex-shrink-0 ${ts}`,children:["$",Fe.price]})]},Fe.id))}),r.jsxs(W,{onClick:nt,disabled:Object.values($).every(Fe=>Fe===0),className:"w-full mt-6 md:mt-8 h-12 sm:h-13 md:h-14 text-base md:text-lg text-white whitespace-nowrap shadow-lg hover:shadow-xl active:shadow-2xl active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation",style:{backgroundColor:qe?"#4f46e5":t},children:[r.jsx(ri,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Continue to Cart"]})]})}),i==="cart"&&d&&r.jsx("div",{className:"p-4 sm:p-6 md:p-10 pb-20 sm:pb-10",children:r.jsxs("div",{className:"max-w-4xl",children:[r.jsxs("div",{className:"mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-2xl sm:text-3xl md:text-3xl mb-2 ${ts}`,children:"Review Your Booking"}),r.jsx("p",{className:`text-sm sm:text-base ${es}`,children:"Check your selections before proceeding to checkout"})]}),r.jsxs("div",{className:`flex gap-3 sm:gap-4 mb-6 md:mb-8 p-3 sm:p-4 rounded-xl border animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100 ${qe?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-gray-50 border-gray-200"}`,children:[r.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-lg overflow-hidden flex-shrink-0 shadow-md",children:r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`text-base sm:text-lg md:text-xl mb-1 truncate ${ts}`,children:d.name}),r.jsxs("p",{className:`text-xs sm:text-sm flex items-center gap-2 ${es}`,children:[r.jsx(qs,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"line-clamp-2",children:We()})]})]})]}),E.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ri,{className:`w-16 h-16 mx-auto mb-4 ${qe?"text-[#525252]":"text-gray-400"}`}),r.jsx("h3",{className:`text-xl mb-2 ${ts}`,children:"Your cart is empty"}),r.jsx("p",{className:`mb-6 ${es}`,children:"Add tickets to continue with your booking."}),r.jsx(W,{onClick:Ee,variant:"outline",className:"mx-auto",children:"Go Back"})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-xl md:text-2xl text-gray-900 mb-4 md:mb-6",children:"Plan your experience"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4 mb-6 md:mb-8",children:or.map(Fe=>{const Kt=E.filter(kr=>kr.ticketTypeId===Fe.id).length;return r.jsxs("div",{className:"flex items-center gap-3 md:gap-4 p-3 md:p-4 border border-gray-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(W,{size:"sm",variant:"outline",onClick:()=>{const kr=E.find(Vr=>Vr.ticketTypeId===Fe.id);kr&&It(kr.id)},className:"h-10 w-10 md:h-12 md:w-12 p-0",style:{backgroundColor:t,color:"white",borderColor:t},children:r.jsx(BE,{className:"w-4 h-4"})}),r.jsx("div",{className:"w-8 md:w-10 text-center text-lg",style:{color:t},children:Kt}),r.jsx(W,{size:"sm",variant:"outline",onClick:()=>{const kr={id:`${Fe.id}-${Date.now()}`,ticketTypeId:Fe.id,ticketTypeName:Fe.name,price:Fe.price};O([...E,kr])},className:"h-10 w-10 md:h-12 md:w-12 p-0",style:{backgroundColor:t,color:"white",borderColor:t},children:r.jsx(Ts,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm md:text-base text-gray-900",children:Fe.name}),r.jsx("div",{className:"text-xs text-gray-500",children:Fe.description})]}),r.jsxs("div",{className:"text-base md:text-lg text-gray-900",children:["$",Fe.price]})]},Fe.id)})}),r.jsx("div",{className:"space-y-3 mb-6 md:mb-8",children:Object.entries(Ao()).map(([Fe,Kt])=>r.jsxs("div",{className:`border rounded-lg ${qe?"border-[#2a2a2a]":"border-gray-200"}`,children:[Kt.items.map((kr,Vr)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between p-3 md:p-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:`text-sm md:text-base ${ts}`,children:kr.ticketTypeName}),Vr===0&&!F[kr.ticketTypeId]&&!V[kr.ticketTypeId]&&r.jsx("button",{onClick:()=>B(gs=>({...gs,[kr.ticketTypeId]:!0})),className:`text-xs md:text-sm hover:underline mt-1 ${qe?"text-[#6366f1] hover:text-[#818cf8]":"text-blue-600"}`,children:"Add promo or discount code"})]}),r.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[r.jsxs("span",{className:`text-base md:text-lg ${ts}`,children:["$",kr.price]}),r.jsx("button",{onClick:()=>It(kr.id),className:qe?"text-[#737373] hover:text-red-400":"text-gray-400 hover:text-red-500",children:r.jsx(Is,{className:"w-5 h-5"})})]})]}),Vr<Kt.items.length-1&&r.jsx(Ze,{})]},kr.id)),V[Fe]&&!F[Fe]&&r.jsxs("div",{className:`px-3 md:px-4 pb-3 md:pb-4 border-t space-y-2 pt-3 ${ta}`,children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"text",placeholder:"Enter promo code",value:z[Fe]||"",onChange:kr=>M(Vr=>({...Vr,[Fe]:kr.target.value})),className:"flex-1 text-sm"}),r.jsx(W,{onClick:()=>vr(Fe),size:"sm",style:{backgroundColor:qe?"#4f46e5":t},className:"text-white",children:"Apply"}),r.jsx(W,{onClick:()=>B(kr=>({...kr,[Fe]:!1})),variant:"outline",size:"sm",children:"Cancel"})]}),Fe==="veteran"&&r.jsxs("div",{className:`text-xs space-y-1 p-2 rounded border ${qe?"text-[#a3a3a3] bg-[#4f46e5]/10 border-[#4f46e5]/30":"text-gray-500 bg-blue-50 border-blue-100"}`,children:[r.jsx("div",{className:`font-medium mb-1 ${qe?"text-[#6366f1]":"text-blue-700"}`,children:"Available veteran codes:"}),r.jsx("div",{children:" VETERAN15 - 15% off veteran tickets"}),r.jsx("div",{children:" VETERAN25 - 25% off veteran tickets"}),r.jsx("div",{children:" THANKYOU10 - 10% off veteran tickets"})]}),Fe==="player"&&r.jsxs("div",{className:`text-xs space-y-1 p-2 rounded border ${qe?"text-[#a3a3a3] bg-[#4f46e5]/10 border-[#4f46e5]/30":"text-gray-500 bg-blue-50 border-blue-100"}`,children:[r.jsx("div",{className:`font-medium mb-1 ${qe?"text-[#6366f1]":"text-blue-700"}`,children:"Available codes:"}),r.jsx("div",{children:" SAVE10 - 10% off regular tickets"}),r.jsx("div",{children:" WELCOME20 - 20% off regular tickets"})]})]}),F[Fe]&&r.jsx("div",{className:`px-3 md:px-4 pb-3 md:pb-4 border-t pt-3 ${ta}`,children:r.jsxs("div",{className:`flex items-center justify-between p-2 border rounded-lg ${qe?"border-emerald-500/30 bg-emerald-500/10":"border-green-200 bg-green-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:`w-4 h-4 ${qe?"text-emerald-400":"text-green-600"}`}),r.jsxs("span",{className:`text-xs md:text-sm ${ts}`,children:[r.jsx("span",{className:"font-medium",children:F[Fe].code})," applied (",Math.round(F[Fe].discount*100),"% off)"]})]}),r.jsx("button",{onClick:()=>Xt(Fe),className:`text-xs md:text-sm hover:underline ${qe?"text-red-400":"text-red-600"}`,children:"Remove"})]})})]},Fe))}),Pt.additionalQuestions&&Pt.additionalQuestions.length>0&&r.jsxs("div",{className:"mb-6 md:mb-8",children:[r.jsx("h3",{className:`text-base mb-4 ${ts}`,children:"Additional information"}),Pt.additionalQuestions.map(Fe=>r.jsxs("div",{className:"mb-4",children:[r.jsx(X,{className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:Fe.question}),Fe.type==="select"&&r.jsxs(sr,{children:[r.jsx(ar,{className:`w-full h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"Choose an option"})}),r.jsx(ir,{className:qe?"bg-[#161616] border-[#2a2a2a]":"",children:Fe.options?.map(Kt=>r.jsx(Ae,{value:Kt.toLowerCase(),children:Kt},Kt))})]})]},Fe.id)),r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsxs("div",{children:[!Se&&!ye&&r.jsx("button",{onClick:()=>$e(!0),className:`text-sm hover:underline ${qe?"text-[#6366f1]":"text-blue-500"}`,children:"Add promo code"}),ye&&!Se&&r.jsx(Ph,{onApply:Wt,className:"mb-2"}),Se&&r.jsx(Ph,{onApply:Wt,onRemove:xr,appliedCode:Se.code,appliedDiscount:Se.discount,appliedType:Se.type,className:"mb-2"})]}),r.jsxs("div",{children:[!oe&&!be&&r.jsx("button",{onClick:()=>ue(!0),className:`text-sm hover:underline ${qe?"text-[#6366f1]":"text-blue-500"}`,children:"Apply gift card"}),be&&!oe&&r.jsx(Th,{onApply:Mt,className:"mb-2"}),oe&&r.jsx(Th,{onApply:Mt,onRemove:Gt,appliedCode:oe.code,appliedAmount:oe.amount,className:"mb-2"})]})]}),r.jsxs("div",{className:`flex items-center gap-3 mt-4 p-4 border rounded-lg ${qe?"border-[#2a2a2a] bg-[#1e1e1e]":"border-gray-200 bg-white"}`,children:[r.jsx(ku,{id:"printable",className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),r.jsxs("label",{htmlFor:"printable",className:`text-sm flex items-center gap-2 cursor-pointer flex-1 ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:[r.jsx("span",{className:`font-medium ${qe?"text-emerald-400":"text-green-600"}`,children:"$8"}),"Add a printable game"]})]})]}),Pt.cancellationPolicy&&r.jsxs("div",{className:"mb-6 md:mb-8",children:[r.jsx("h3",{className:`text-lg md:text-xl mb-2 ${ts}`,children:"Cancellations"}),r.jsx("p",{className:`text-sm ${es}`,children:Pt.cancellationPolicy})]}),r.jsxs("div",{className:`rounded-lg p-4 md:p-6 mb-6 ${qe?"bg-[#1e1e1e]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-700",children:"Subtotal"}),r.jsxs("span",{className:ts,children:["$",Cr().toFixed(2)]})]}),Gr()>0&&r.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[r.jsx("span",{className:qe?"text-emerald-400":"text-green-600",children:"Discount"}),r.jsxs("span",{className:qe?"text-emerald-400":"text-green-600",children:["-$",Gr().toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm md:text-base",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-700",children:"Fees"}),r.jsx(Ws,{className:`w-4 h-4 ${qe?"text-[#737373]":"text-gray-400"}`})]}),r.jsxs("span",{className:ts,children:["$",os().toFixed(2)]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-between text-lg md:text-xl",children:[r.jsx("span",{className:ts,children:"Total"}),r.jsxs("span",{className:ts,children:["$",Wa().toFixed(2)]})]})]}),r.jsx(W,{onClick:Gc,disabled:E.length===0,className:"w-full h-12 md:h-14 text-base md:text-lg text-white whitespace-nowrap shadow-lg hover:shadow-xl active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation",style:{backgroundColor:qe?"#4f46e5":t},children:"Proceed to Checkout "})]})]})]})}),i==="checkout"&&d&&r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsxs("div",{className:`flex items-center justify-between px-4 md:px-6 py-4 border-b ${qe?"border-[#2a2a2a]":"border-gray-200"}`,children:[r.jsxs("button",{onClick:Vs,className:`flex items-center gap-2 ${qe?"text-[#a3a3a3] hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,children:[r.jsx(U0,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"Cart"})]}),r.jsx("button",{onClick:()=>o("categories"),className:`px-4 py-2 rounded-lg text-sm ${qe?"bg-[#2a2a2a] text-[#a3a3a3] hover:bg-[#3a3a3a]":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-colors`,children:"Keep shopping"})]}),r.jsx("div",{className:"flex-1 p-4 md:p-6 lg:p-10",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:`text-2xl md:text-3xl mb-2 ${ts}`,children:"Checkout"}),r.jsx("p",{className:`text-sm md:text-base ${es}`,children:"You're moments away from completing your booking."})]}),r.jsxs("div",{className:`flex gap-4 p-4 md:p-6 border rounded-xl mb-6 ${qe?"border-[#2a2a2a] bg-[#1e1e1e]":"border-gray-200 bg-white"}`,children:[r.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`text-base md:text-lg mb-1 ${ts}`,children:d.name}),r.jsx("p",{className:`text-sm mb-2 ${es}`,children:We()}),r.jsxs("p",{className:`text-sm ${es}`,children:[Object.entries(xi()).map(([Fe,Kt],kr,Vr)=>r.jsxs("span",{children:[Kt," ",Fe,kr<Vr.length-1?", ":""]},Fe))," ",r.jsx("button",{onClick:Vs,className:`hover:underline ${qe?"text-[#6366f1]":"text-blue-600"}`,children:"(Change)"})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{className:`text-sm hover:underline ${es}`,children:"Remove"}),r.jsx("span",{className:es,children:"|"}),r.jsx("button",{className:`text-sm hover:underline ${es}`,children:"Cancellation policy "})]})]}),r.jsxs("div",{className:`text-lg md:text-xl shrink-0 ${ts}`,children:["$",Cr().toFixed(2)]})]}),r.jsxs("div",{className:"mb-4",children:[Se?r.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg ${qe?"border-emerald-500/30 bg-emerald-500/10":"border-green-200 bg-green-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:`w-5 h-5 ${qe?"text-emerald-400":"text-green-600"}`}),r.jsxs("span",{className:`text-sm ${ts}`,children:[r.jsx("span",{className:"font-medium",children:Se.code})," applied (",Se.discount,"% off)"]})]}),r.jsx("button",{onClick:xr,className:`text-sm hover:underline ${qe?"text-red-400":"text-red-600"}`,children:"Remove"})]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ni,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 ${qe?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Enter promo code",value:Le,onChange:Fe=>xe(Fe.target.value),className:`pl-10 h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`})]}),r.jsx(W,{onClick:()=>{Le&&Wt(Le,Le==="SAVE20"?20:Le==="WELCOME"?15:10,"percentage")},disabled:!Le,variant:"ghost",className:`h-12 px-6 ${qe?"bg-[#2a2a2a] text-[#a3a3a3] hover:bg-[#3a3a3a]":"text-gray-700 hover:text-gray-900 hover:bg-gray-100 disabled:text-gray-400 disabled:hover:bg-transparent"}`,children:"Apply"})]}),r.jsx("p",{className:`text-xs mt-2 ${qe?"text-[#737373]":"text-gray-500"}`,children:"Try: SAVE10, SAVE20, WELCOME, VIP, or FIRST25"})]}),r.jsxs("div",{className:"mb-8",children:[oe?r.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg ${qe?"border-purple-500/30 bg-purple-500/10":"border-purple-200 bg-purple-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:`w-5 h-5 ${qe?"text-purple-400":"text-purple-600"}`}),r.jsxs("span",{className:`text-sm ${ts}`,children:[r.jsx("span",{className:"font-medium",children:oe.code})," applied ($",oe.amount.toFixed(2),")"]})]}),r.jsx("button",{onClick:Gt,className:`text-sm hover:underline ${qe?"text-red-400":"text-red-600"}`,children:"Remove"})]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ni,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 ${qe?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Enter gift card code",value:mt,onChange:Fe=>Ue(Fe.target.value),className:`pl-10 h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 text-gray-900 placeholder:text-gray-500"}`})]}),r.jsx(W,{onClick:()=>{if(mt){const Fe=mt.includes("100")?100:mt.includes("50")?50:25;Mt(mt,Fe)}},disabled:!mt,variant:"ghost",className:`h-12 px-6 ${qe?"bg-[#2a2a2a] text-[#a3a3a3] hover:bg-[#3a3a3a]":"text-gray-700 hover:text-gray-900 hover:bg-gray-100 disabled:text-gray-400 disabled:hover:bg-transparent"}`,children:"Apply"})]}),r.jsx("p",{className:`text-xs mt-2 ${qe?"text-[#737373]":"text-gray-500"}`,children:"Try: GIFT50, GIFT100, HOLIDAY25, BIRTHDAY75"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`text-base mb-4 ${ts}`,children:"Contact details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"fullname",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:["Full name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"fullname",placeholder:"",value:ee.fullName,onChange:Fe=>q({...ee,fullName:Fe.target.value}),className:`h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"phone",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:["Phone number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(sr,{defaultValue:"us",children:[r.jsx(ar,{className:`w-20 h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{children:""})}),r.jsx(ir,{className:qe?"bg-[#161616] border-[#2a2a2a]":"",children:r.jsx(Ae,{value:"us",children:""})})]}),r.jsx(de,{id:"phone",type:"tel",placeholder:"",value:ee.phone,onChange:Fe=>q({...ee,phone:Fe.target.value}),className:`flex-1 h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]})]}),r.jsxs("div",{children:[r.jsxs(X,{htmlFor:"email",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:["Email address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(de,{id:"email",type:"email",placeholder:"",value:ee.email,onChange:Fe=>q({...ee,email:Fe.target.value}),className:`h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"flex items-start gap-2 pt-2",children:[r.jsx(ku,{id:"email-updates",checked:ee.emailUpdates,onCheckedChange:Fe=>q({...ee,emailUpdates:Fe}),className:"mt-0.5"}),r.jsx("label",{htmlFor:"email-updates",className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:"Get future email updates from Optimal Escape"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-base mb-4 ${ts}`,children:"Payment details"}),r.jsxs("div",{className:`mb-4 flex items-center gap-2 text-sm ${qe?"text-emerald-400":"text-green-700"}`,children:[r.jsx(zs,{className:"w-4 h-4"}),r.jsx("span",{children:"Secure, fast checkout with Link"}),r.jsx(Mc,{className:"w-4 h-4"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"cardnumber",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:"Card number"}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"cardnumber",placeholder:"1234 1234 1234 1234",value:U.cardNumber,onChange:Fe=>Z({...U,cardNumber:Fe.target.value}),className:`h-12 pr-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(rn,{className:`w-5 h-5 ${qe?"text-[#737373]":"text-gray-400"}`})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(X,{htmlFor:"expiry",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:"Expiration date"}),r.jsx(de,{id:"expiry",placeholder:"MM / YY",value:U.expiryDate,onChange:Fe=>Z({...U,expiryDate:Fe.target.value}),className:`h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"cvc",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:"Security code"}),r.jsx(de,{id:"cvc",placeholder:"CVC",value:U.securityCode,onChange:Fe=>Z({...U,securityCode:Fe.target.value}),className:`h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]})]}),r.jsxs("div",{children:[r.jsx(X,{htmlFor:"country",className:`text-sm mb-2 block ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:"Country"}),r.jsxs(sr,{value:U.country,onValueChange:Fe=>Z({...U,country:Fe}),children:[r.jsx(ar,{className:`h-12 ${qe?"bg-[#2a2a2a] border-[#2a2a2a]":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:qe?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"United States",children:"United States"}),r.jsx(Ae,{value:"Canada",children:"Canada"}),r.jsx(Ae,{value:"United Kingdom",children:"United Kingdom"})]})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-xs ${qe?"text-emerald-400":"text-green-700"}`,children:[r.jsx(Mn,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Payments are secured and encrypted"})]})]})]})]}),r.jsx("div",{className:"mt-8",children:r.jsxs("div",{className:`rounded-xl p-6 ${qe?"bg-[#1e1e1e] border border-[#2a2a2a]":"bg-white border border-gray-200 shadow-sm"}`,children:[r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:ts,children:["$",Cr().toFixed(2)]})]}),Gr()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:qe?"text-emerald-400":"text-green-600",children:"Discount"}),r.jsxs("span",{className:qe?"text-emerald-400":"text-green-600",children:["-$",Gr().toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Fees"}),r.jsx(Ws,{className:`w-3.5 h-3.5 ${qe?"text-[#737373]":"text-gray-400"}`})]}),r.jsxs("span",{className:ts,children:["$",os().toFixed(2)]})]}),ws()>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:qe?"text-purple-400":"text-purple-600",children:"Gift Card"}),r.jsxs("span",{className:qe?"text-purple-400":"text-purple-600",children:["-$",ws().toFixed(2)]})]}),r.jsx(Ze,{className:qe?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between text-lg",children:[r.jsx("span",{className:ts,children:"Total"}),r.jsxs("span",{className:ts,children:["$",Wa().toFixed(2)]})]})]}),r.jsx(W,{onClick:Eo,disabled:K||!io(),className:"w-full h-12 text-base text-white mb-3",style:{backgroundColor:qe?"#4f46e5":t},children:K?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mn,{className:"w-5 h-5 mr-2"}),"Complete and pay"]})}),!io()&&!K&&r.jsxs("p",{className:`text-xs text-center ${es}`,children:["Please answer all fields marked with ",r.jsx("span",{className:"text-red-500",children:"*"})," to complete your order"]}),io()&&!K&&r.jsxs("p",{className:`text-xs text-center flex items-center justify-center gap-1 ${qe?"text-emerald-400":"text-green-600"}`,children:[r.jsx(Lt,{className:"w-4 h-4"}),"All required fields completed"]}),r.jsx("p",{className:`text-xs text-center mt-2 ${es}`,children:"By completing this transaction, you agree to BookingTMS's Terms of Service for Customers."})]})})]})})]}),i==="success"&&d&&r.jsx("div",{className:"p-4 md:p-10 min-h-[60vh] flex items-center justify-center",children:r.jsxs("div",{className:"max-w-2xl w-full text-center",children:[r.jsx("div",{className:"mb-6 md:mb-8 flex justify-center",children:r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center",style:{backgroundColor:qe?"#4f46e520":`${t}20`},children:r.jsx(Lt,{className:"w-10 h-10 md:w-12 md:h-12",style:{color:qe?"#6366f1":t}})})}),r.jsx("h1",{className:`text-2xl md:text-4xl mb-3 md:mb-4 ${ts}`,children:"Payment Successful!"}),r.jsxs("p",{className:`text-base md:text-lg mb-6 md:mb-8 ${es}`,children:["Your booking has been confirmed. We've sent a confirmation email to ",ee.email]}),r.jsxs("div",{className:`rounded-lg p-4 md:p-6 mb-6 md:mb-8 text-left ${qe?"bg-[#1e1e1e]":"bg-white border border-gray-200"}`,children:[r.jsxs("div",{className:"flex gap-4 mb-4 md:mb-6",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`text-lg md:text-xl mb-1 ${ts}`,children:d.name}),r.jsx("p",{className:`text-sm md:text-base ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:We()})]})]}),r.jsx(Ze,{className:`mb-4 md:mb-6 ${qe?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsxs("div",{className:"space-y-3 text-sm md:text-base",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Booking ID"}),r.jsxs("span",{className:ts,children:["#BK-",Date.now().toString().slice(-6)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Guests"}),r.jsx("span",{className:ts,children:Object.entries(xi()).map(([Fe,Kt],kr,Vr)=>r.jsxs("span",{children:[Kt," ",Fe,kr<Vr.length-1?", ":""]},Fe))})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Total Paid"}),r.jsxs("span",{className:`text-lg ${ts}`,children:["$",Wa().toFixed(2)]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 justify-center",children:[r.jsx(W,{variant:"outline",onClick:()=>window.print(),className:"h-11 md:h-12 px-6 md:px-8",children:"Print Receipt"}),r.jsxs(W,{onClick:da,className:"h-11 md:h-12 px-6 md:px-8 text-white whitespace-nowrap",style:{backgroundColor:qe?"#4f46e5":t},children:[r.jsx(MS,{className:"w-5 h-5 mr-2"}),"Book Another Experience"]})]}),r.jsx("p",{className:`text-xs md:text-sm mt-6 md:mt-8 ${qe?"text-[#737373]":"text-gray-500"}`,children:"Need help? Contact us at support@bookingtms.com"})]})}),i==="failed"&&d&&r.jsx("div",{className:"p-4 md:p-10 min-h-[60vh] flex items-center justify-center",children:r.jsxs("div",{className:"max-w-2xl w-full text-center",children:[r.jsx("div",{className:"mb-6 md:mb-8 flex justify-center",children:r.jsx("div",{className:`w-16 h-16 md:w-20 md:h-20 rounded-full flex items-center justify-center ${qe?"bg-red-500/20":"bg-red-100"}`,children:r.jsx(Is,{className:`w-10 h-10 md:w-12 md:h-12 ${qe?"text-red-400":"text-red-600"}`})})}),r.jsx("h1",{className:`text-2xl md:text-4xl mb-3 md:mb-4 ${ts}`,children:"Payment Failed"}),r.jsx("p",{className:`text-base md:text-lg mb-6 md:mb-8 ${es}`,children:"We couldn't process your payment. Please check your payment details and try again."}),r.jsxs("div",{className:`border rounded-lg p-4 md:p-6 mb-6 md:mb-8 text-left ${qe?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"}`,children:[r.jsx("h3",{className:`text-base md:text-lg mb-3 ${ts}`,children:"Common reasons for payment failure:"}),r.jsxs("ul",{className:`space-y-2 text-sm md:text-base ${qe?"text-[#a3a3a3]":"text-gray-700"}`,children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`mt-1 ${qe?"text-red-400":"text-red-500"}`,children:""}),r.jsx("span",{children:"Insufficient funds in your account"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`mt-1 ${qe?"text-red-400":"text-red-500"}`,children:""}),r.jsx("span",{children:"Incorrect card number or expiration date"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`mt-1 ${qe?"text-red-400":"text-red-500"}`,children:""}),r.jsx("span",{children:"Card security code (CVV) mismatch"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`mt-1 ${qe?"text-red-400":"text-red-500"}`,children:""}),r.jsx("span",{children:"Card issuer declined the transaction"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:`mt-1 ${qe?"text-red-400":"text-red-500"}`,children:""}),r.jsx("span",{children:"Billing address mismatch"})]})]})]}),r.jsxs("div",{className:`rounded-lg p-4 md:p-6 mb-6 md:mb-8 text-left ${qe?"bg-[#1e1e1e]":"bg-white border border-gray-200"}`,children:[r.jsx("h3",{className:`text-base md:text-lg mb-3 ${ts}`,children:"Your booking details:"}),r.jsxs("div",{className:"flex gap-4 mb-4",children:[r.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded overflow-hidden flex-shrink-0",children:r.jsx(fn,{src:d.image,alt:d.name,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`text-base md:text-lg mb-1 ${ts}`,children:d.name}),r.jsx("p",{className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:We()})]})]}),r.jsx(Ze,{className:`mb-4 ${qe?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsxs("div",{className:"space-y-2 text-sm md:text-base",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Guests"}),r.jsx("span",{className:ts,children:Object.entries(xi()).map(([Fe,Kt],kr,Vr)=>r.jsxs("span",{children:[Kt," ",Fe,kr<Vr.length-1?", ":""]},Fe))})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:qe?"text-[#a3a3a3]":"text-gray-600",children:"Total Amount"}),r.jsxs("span",{className:`text-lg ${ts}`,children:["$",Wa().toFixed(2)]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 justify-center",children:[r.jsxs(W,{variant:"outline",onClick:da,className:"h-11 md:h-12 px-6 md:px-8",children:[r.jsx(MS,{className:"w-5 h-5 mr-2"}),"Start Over"]}),r.jsxs(W,{onClick:()=>o("checkout"),className:"h-11 md:h-12 px-6 md:px-8 text-white whitespace-nowrap",style:{backgroundColor:qe?"#4f46e5":t},children:[r.jsx(rn,{className:"w-5 h-5 mr-2"}),"Try Again"]})]}),r.jsx("p",{className:`text-xs md:text-sm mt-6 md:mt-8 ${qe?"text-[#737373]":"text-gray-500"}`,children:"Need help? Contact us at support@bookingtms.com or call (555) 123-4567"})]})})]}),r.jsxs("div",{className:`${Xs} border-t ${ta} px-4 sm:px-6 py-4 flex-shrink-0 safe-area-inset-bottom`,children:[r.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between text-xs sm:text-sm gap-2 sm:gap-3 ${es}`,children:[r.jsxs("button",{className:`flex items-center gap-2 transition-colors active:scale-95 touch-manipulation ${qe?"hover:text-white":"hover:text-gray-900"}`,children:[r.jsx("span",{className:qe?"text-[#737373]":"text-gray-500",children:""}),r.jsx("span",{children:C}),r.jsx(Mc,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:qe?"text-[#737373]":"text-gray-500",children:"Powered by"}),r.jsx("span",{className:`font-medium ${ts}`,children:"BookingTMS"})]})]}),r.jsx("div",{className:`mt-2 text-xs text-center sm:text-left ${qe?"text-[#737373]":"text-gray-500"}`,children:"All prices are in US dollars"}),i==="categories"&&r.jsxs("div",{className:`mt-2 text-xs text-center sm:text-left ${qe?"text-[#737373]":"text-gray-500"}`,children:["See any illegal content?"," ",r.jsx("button",{className:`underline touch-manipulation ${qe?"hover:text-[#a3a3a3] active:text-white":"hover:text-gray-700 active:text-gray-900"}`,children:"Report it using this form"}),"."]})]})]})}),r.jsx(rp,{open:ne,onOpenChange:ie,children:r.jsxs(sp,{className:"bg-white max-w-md",children:[r.jsxs(np,{children:[r.jsx(ip,{className:"text-gray-900",children:"Are you sure you want to close?"}),r.jsx(op,{className:"text-gray-600",children:"Items you've added to your cart will still be here when you come back."})]}),r.jsxs(ap,{className:"gap-2 sm:gap-2",children:[r.jsx(lp,{onClick:()=>ie(!1),className:"bg-blue-600 hover:bg-blue-700 text-white border-0 order-first sm:order-first",children:"Stay"}),r.jsx(Ng,{onClick:()=>{ie(!1),da()},className:"bg-gray-100 hover:bg-gray-200 text-gray-900 border-0",children:"Leave checkout"})]})]})}),r.jsx(mr,{open:xt,onOpenChange:ut,children:r.jsxs(fr,{className:"bg-white max-w-lg",children:[r.jsxs(br,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(zs,{className:"w-6 h-6 text-green-700"})}),r.jsx(pr,{className:"text-2xl text-gray-900",children:"Secure Booking"})]}),r.jsx(wr,{className:"text-base text-gray-600 pt-2",children:"Your security and privacy are our top priorities. We use industry-leading technology to protect your information."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"SSL Encryption"}),r.jsx("p",{className:"text-sm text-gray-600",children:"All data transmitted between your browser and our servers is encrypted using 256-bit SSL technology, the same security used by major banks."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"PCI DSS Compliant"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Our payment processing is fully compliant with Payment Card Industry Data Security Standards, ensuring your card information is handled with the highest security."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Data Protection"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We never store your complete credit card information on our servers. All payment data is tokenized and processed through secure, certified payment gateways."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Privacy Guaranteed"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your personal information is kept confidential and will never be shared with third parties without your explicit consent."})]})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Mn,{className:"w-5 h-5 text-green-700 flex-shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-sm text-green-800",children:[r.jsx("strong",{children:"Your trust matters:"})," We're committed to maintaining the highest standards of security and transparency in all our transactions."]})]})})]})]})}),r.jsx(mr,{open:Ot,onOpenChange:tt,children:r.jsxs(fr,{className:"bg-white max-w-lg",children:[r.jsxs(br,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{backgroundColor:`${t}20`},children:r.jsx(_a,{className:"w-6 h-6",style:{color:t}})}),r.jsx(pr,{className:"text-2xl text-gray-900",children:"Health & Safety"})]}),r.jsx(wr,{className:"text-base text-gray-600 pt-2",children:"Your health and safety are paramount. We've implemented comprehensive measures to ensure a safe and enjoyable experience."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:t}})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Private Bookings"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We have all private bookings. You will never have to worry about playing with strangers, it will always be just your group."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:t}})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Hand Sanitization Required"}),r.jsx("p",{className:"text-sm text-gray-600",children:"All players are required to wash and sanitize hands before entering any of our rooms. Hand sanitizer stations are provided at all entrances."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:t}})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Stringent Cleaning Protocols"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We have very stringent cleaning policies in place. All rooms are thoroughly cleaned and disinfected between every booking using hospital-grade sanitizers."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:t}})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Enhanced Ventilation"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Our facilities feature upgraded HVAC systems with HEPA filtration to ensure optimal air quality and circulation throughout all spaces."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:t}})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-gray-900 mb-1",children:"Staff Training & Wellness"}),r.jsx("p",{className:"text-sm text-gray-600",children:"All team members receive regular health and safety training. Daily health screenings ensure our staff maintains the highest standards of wellness."})]})]}),r.jsx("div",{className:"rounded-lg p-4 mt-4 border",style:{backgroundColor:`${t}10`,borderColor:`${t}30`},children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(wu,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:t}}),r.jsxs("p",{className:"text-sm",style:{color:t},children:[r.jsx("strong",{children:"Your safety is our commitment:"})," These protocols are continuously updated based on CDC guidelines and industry best practices to provide you with the safest experience possible."]})]})})]})]})}),r.jsx(mr,{open:st,onOpenChange:At,children:r.jsxs(fr,{className:`max-w-lg ${qe?"bg-[#161616] border-[#2a2a2a]":"bg-white"}`,children:[r.jsxs(br,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${qe?"bg-[#4f46e5]/20":"bg-green-100"}`,children:r.jsx(Ni,{className:"w-6 h-6",style:{color:qe?"#6366f1":"#16a34a"}})}),r.jsx(pr,{className:qe?"text-white":"text-gray-900",children:"Gift Vouchers"})]}),r.jsx(wr,{className:`text-base pt-2 ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:"Give the gift of unforgettable experiences! Purchase a gift voucher for friends, family, or colleagues."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:qe?"#6366f1":"#16a34a"}})}),r.jsxs("div",{children:[r.jsx("h4",{className:qe?"text-white mb-1":"text-gray-900 mb-1",children:"Flexible Amounts"}),r.jsx("p",{className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:"Choose from preset amounts or select a custom value. Our gift vouchers can be used for any experience or booking."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:qe?"#6366f1":"#16a34a"}})}),r.jsxs("div",{children:[r.jsx("h4",{className:qe?"text-white mb-1":"text-gray-900 mb-1",children:"Instant Delivery"}),r.jsx("p",{className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:"Gift vouchers are delivered instantly via email. Perfect for last-minute gifts or special occasions."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:qe?"#6366f1":"#16a34a"}})}),r.jsxs("div",{children:[r.jsx("h4",{className:qe?"text-white mb-1":"text-gray-900 mb-1",children:"Valid for 12 Months"}),r.jsx("p",{className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:"All gift vouchers are valid for one year from the date of purchase, giving plenty of time to enjoy the experience."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx(en,{className:"w-5 h-5",style:{color:qe?"#6366f1":"#16a34a"}})}),r.jsxs("div",{children:[r.jsx("h4",{className:qe?"text-white mb-1":"text-gray-900 mb-1",children:"Easy to Redeem"}),r.jsx("p",{className:`text-sm ${qe?"text-[#a3a3a3]":"text-gray-600"}`,children:"Simply enter the voucher code at checkout. Multiple vouchers can be combined for a single booking."})]})]}),r.jsx("div",{className:`rounded-lg p-4 mt-4 border ${qe?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-green-50 border-green-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ni,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:qe?"#6366f1":"#16a34a"}}),r.jsxs("p",{className:`text-sm ${qe?"text-[#6366f1]":"text-green-800"}`,children:[r.jsx("strong",{children:"Perfect for any occasion:"})," Birthdays, holidays, corporate events, or just because! Share the joy of adventure with a gift voucher."]})]})}),r.jsx("div",{className:"pt-4",children:r.jsxs(W,{onClick:()=>{At(!1),yr(!0)},className:"w-full",style:{backgroundColor:qe?"#4f46e5":"#16a34a",color:"white"},children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Purchase Gift Voucher"]})})]})]})}),r.jsx(yQe,{isOpen:Yt,onClose:()=>yr(!1),primaryColor:t,theme:n})]})}function bQe({primaryColor:t="#0ea5e9",config:e,theme:s="light",eventData:n}){const[a,i]=j.useState(s),[o,l]=j.useState("calendar"),[c,d]=j.useState(null),[u,h]=j.useState(""),m=new Date,[f,v]=j.useState(m.getMonth()),[x,g]=j.useState(m.getFullYear()),b=["January","February","March","April","May","June","July","August","September","October","November","December"];Array.from({length:3},(je,Ce)=>2025+Ce);const w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],[N,C]=j.useState([]),[S,A]=j.useState({}),[k,E]=j.useState({}),[O,$]=j.useState({}),[T,I]=j.useState({}),[L,z]=j.useState({fullName:"",phone:"",email:"",emailUpdates:!1}),[M,V]=j.useState({cardNumber:"",expiryDate:"",securityCode:"",country:"United States"}),[B,F]=j.useState(!1),[J,ee]=j.useState(!1),[q,U]=j.useState(!1),[Z,K]=j.useState(null),[se,ne]=j.useState(!1),[ie,be]=j.useState(null),[ue,oe]=j.useState(""),[pe,ye]=j.useState(""),[$e,Se]=j.useState(!1),[Y,Le]=j.useState(!1),xe={name:"Zombie Apocalypse",image:"https://images.unsplash.com/photo-1659059530318-656a112ad2cd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx6b21iaWUlMjBhcG9jYWx5cHNlJTIwaG9ycm9yfGVufDF8fHx8MTc2MTg5OTYzNHww&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,description:"Can you survive the zombie apocalypse and find the cure?"},Ue={...{showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!0,ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30},{id:"veteran",name:"Veterans",description:"Must show military ID",price:25}],additionalQuestions:[{id:"hear-about",question:"How did you hear about us?",type:"select",options:["Google","Facebook","Friend","Other"],required:!1}],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us. We can rebook you to a different date and/or time or issue a refund in the form of a gift card."},...e},xt=n||xe,ut=Ue.ticketTypes||[],Ot=()=>{const je=[],Ce=new Date(x,f,1).getDay(),Qe=new Date(x,f+1,0).getDate(),He=new Date(x,f,0).getDate();for(let le=Ce-1;le>=0;le--){const Ee=He-le,We=f===0?11:f-1;je.push({date:Ee,month:We,year:f===0?x-1:x,isCurrentMonth:!1,slots:[]})}for(let le=1;le<=Qe;le++){const Ee=Math.floor(Math.random()*10)+1;je.push({date:le,month:f,year:x,isCurrentMonth:!0,slots:Ee})}const vt=42-je.length;for(let le=1;le<=vt;le++){const Ee=f===11?0:f+1;je.push({date:le,month:Ee,year:f===11?x+1:x,isCurrentMonth:!1,slots:[]})}return je},tt=()=>{f===0?(v(11),g(x-1)):v(f-1)},st=()=>{f===11?(v(0),g(x+1)):v(f+1)},At=je=>{if(je.isCurrentMonth&&je.slots>0){const Ce=new Date(je.year,je.month,je.date);d(Ce),l("timeslot")}},yr=(()=>{const je=[];for(let Ce=10;Ce<=20;Ce++){const Qe=`${Ce>12?Ce-12:Ce}:00 ${Ce>=12?"PM":"AM"}`;je.push({time:Qe,available:Math.random()>.3})}return je})(),Zt=je=>{h(je),l("plan")},Vt=()=>{o==="timeslot"?l("calendar"):o==="plan"?l("timeslot"):o==="cart"?l("plan"):o==="checkout"&&l("cart")},tr=()=>{const je=[];Object.keys(S).forEach(Ce=>{const Qe=S[Ce];if(Qe>0){const He=ut.find(vt=>vt.id===Ce);if(He)for(let vt=0;vt<Qe;vt++)je.push({id:`${Ce}-${Date.now()}-${vt}`,ticketTypeId:He.id,ticketTypeName:He.name,price:He.price,promoCode:T[Ce]?.code})}}),C([...N,...je]),l("cart")},$t=()=>{N.length>0&&l("checkout")},Dr=async()=>{if(!L.fullName.trim()){alert("Please enter your full name");return}if(!L.phone.trim()){alert("Please enter your phone number");return}if(!L.email.trim()||!L.email.includes("@")){alert("Please enter a valid email address");return}if(!M.cardNumber.trim()||M.cardNumber.replace(/\s/g,"").length<13){alert("Please enter a valid card number");return}if(!M.expiryDate.trim()){alert("Please enter card expiration date");return}if(!M.securityCode.trim()||M.securityCode.length<3){alert("Please enter a valid security code");return}F(!0),await new Promise(Ce=>setTimeout(Ce,1500));const je=Math.random()>.15;F(!1),l(je?"success":"failed")},Er=()=>{l("calendar"),d(null),h(""),C([]),A({}),E({}),$({}),I({}),U(!1),K(null),z({fullName:"",phone:"",email:"",emailUpdates:!1}),V({cardNumber:"",expiryDate:"",securityCode:"",country:"United States"})},hr=Ot(),Ct=a==="dark",is=Ct?"bg-[#0a0a0a]":"bg-gray-100",cr=Ct?"bg-[#161616]":"bg-white",Pt=Ct?"border-[#2a2a2a]":"border-gray-200",kt=Ct?"text-white":"text-gray-900",zt=Ct?"text-[#a3a3a3]":"text-gray-600",or=Ct?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",Re=je=>{const Ce=[];for(let Qe=0;Qe<5;Qe++)Ce.push(r.jsx(Es,{className:`w-3 h-3 ${Qe<je?"fill-yellow-400 text-yellow-400":"text-gray-400"}`},Qe));return r.jsx("div",{className:"flex gap-0.5",children:Ce})},Je=()=>N.reduce((je,Ce)=>je+Ce.price,0),bt=()=>{let je=0;return ie&&(je+=ie.discount),je},gr=()=>{const je=Je(),Ce=bt(),Qe=Z?.amount||0;return Math.max(0,je-Ce-Qe)};return r.jsxs(aD,{children:[r.jsx("div",{className:`w-full min-h-screen ${is} flex items-center justify-center p-0 sm:p-2 lg:p-4`,children:r.jsxs("div",{className:`w-full h-auto max-w-6xl ${cr} sm:rounded-xl shadow-2xl overflow-hidden flex flex-col min-h-screen sm:min-h-0 sm:my-4`,children:[r.jsx("div",{className:`${cr} border-b ${Pt} px-3 sm:px-6 py-3 sm:py-4 flex-shrink-0 sticky top-0 z-10 shadow-sm backdrop-blur-sm ${Ct?"bg-[#161616]/95":"bg-white/95"}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-2 w-full",children:[r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[r.jsxs("button",{onClick:()=>i(je=>je==="light"?"dark":"light"),className:`flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] justify-center ${Ct?"bg-[#2a2a2a] border-[#3a3a3a] text-[#a3a3a3] hover:bg-[#333]":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:[Ct?r.jsx(mw,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}):r.jsx(Vv,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium whitespace-nowrap",children:Ct?"Light":"Dark"})]}),Ue.showSecuredBadge&&r.jsxs("button",{onClick:()=>Se(!0),className:`flex items-center gap-1 sm:gap-1.5 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] ${Ct?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400 hover:bg-emerald-500/20":"bg-green-50 hover:bg-green-100 active:bg-green-200 text-green-700 border-green-200"}`,children:[r.jsx(Mn,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap hidden xs:inline",children:"Secured"}),r.jsx(Mc,{className:"w-3 h-3 flex-shrink-0 hidden sm:block"})]}),Ue.showHealthSafety&&r.jsxs("button",{onClick:()=>Le(!0),className:`flex items-center gap-1 sm:gap-1.5 px-2.5 sm:px-3 py-2 sm:py-1.5 rounded-lg sm:rounded-full transition-all hover:shadow-sm active:scale-95 border touch-manipulation min-w-[44px] ${Ct?"bg-[#4f46e5]/10 border-[#4f46e5]/30 text-[#6366f1] hover:bg-[#4f46e5]/20":""}`,style:Ct?void 0:{backgroundColor:`${t}10`,borderColor:`${t}30`,color:t},children:[r.jsx(_a,{className:"w-4 h-4 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap hidden xs:inline",children:"Safety"}),r.jsx(Mc,{className:"w-3 h-3 flex-shrink-0 hidden sm:block"})]})]}),r.jsx("button",{onClick:()=>{N.length>0&&o!=="success"&&o!=="failed"?ee(!0):Er()},className:`transition-colors p-2.5 active:scale-90 touch-manipulation rounded-lg min-w-[44px] min-h-[44px] flex items-center justify-center ${Ct?"text-[#737373] hover:text-[#a3a3a3] hover:bg-[#1e1e1e]":"text-gray-400 hover:text-gray-600 active:text-gray-700 hover:bg-gray-100"}`,children:r.jsx(Is,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})}),o!=="success"&&o!=="failed"&&r.jsx("div",{className:`${cr} px-3 sm:px-6 py-3 sm:py-4 border-b ${Pt} flex-shrink-0 sticky top-[57px] sm:top-[65px] z-10 shadow-sm backdrop-blur-sm ${Ct?"bg-[#161616]/95":"bg-white/95"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[o!=="calendar"&&r.jsxs("button",{onClick:Vt,className:`flex items-center gap-1.5 sm:gap-2 transition-colors active:scale-95 p-2.5 sm:p-2 rounded-lg ${or} touch-manipulation min-w-[44px] min-h-[44px] ${Ct?"text-[#a3a3a3] hover:text-[#6366f1]":"text-gray-700 hover:text-blue-600 active:text-blue-700 active:bg-gray-100"}`,children:[r.jsx(an,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Back"})]}),N.length>0&&o!=="cart"&&o!=="checkout"&&r.jsxs("button",{onClick:()=>l("cart"),className:`ml-auto flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${Ct?"bg-[#4f46e5] hover:bg-[#4338ca] text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[r.jsx(ri,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:N.length})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o==="calendar"&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsx("div",{className:"relative rounded-lg sm:rounded-xl overflow-hidden mb-4 sm:mb-6 md:mb-8 shadow-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:r.jsxs("div",{className:"aspect-[16/9] sm:aspect-[21/9] relative",children:[r.jsx(fn,{src:xt.image,alt:xt.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4 md:p-8",children:[r.jsx("h2",{className:"text-white text-lg sm:text-xl md:text-4xl mb-1 sm:mb-2 leading-tight",children:xt.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-1.5 md:gap-2 text-white text-xs",children:[r.jsx("span",{className:"bg-white/20 backdrop-blur-sm border border-white/30 rounded-full px-2 sm:px-2.5 py-0.5",children:xt.priceRange}),r.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm",children:xt.ageRange}),r.jsx("span",{className:"hidden sm:inline",children:""}),r.jsx("span",{className:"text-xs sm:text-sm",children:xt.duration}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsxs("span",{className:"hidden md:flex items-center gap-1 text-xs sm:text-sm",children:["Difficulty: ",Re(xt.difficulty)]})]}),xt.description&&r.jsx("p",{className:"text-white/90 mt-1 sm:mt-2 max-w-2xl text-xs sm:text-sm hidden sm:block",children:xt.description})]})]})}),r.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("button",{onClick:tt,className:`p-2.5 sm:p-2 md:p-3 rounded-lg transition-colors active:scale-95 touch-manipulation flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center ${Ct?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Previous month",children:r.jsx(an,{className:`w-5 h-5 sm:w-6 sm:h-6 ${Ct?"text-[#a3a3a3]":"text-gray-700"}`})}),r.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2 flex-1 px-2",children:[r.jsx("h3",{className:`text-base sm:text-lg md:text-2xl ${kt} font-semibold`,children:b[f]}),r.jsx("span",{className:`text-base sm:text-lg md:text-2xl ${Ct?"text-[#737373]":"text-gray-400"}`,children:""}),r.jsx("h3",{className:`text-base sm:text-lg md:text-2xl ${kt} font-semibold`,children:x}),r.jsx("span",{className:`text-base sm:text-lg md:text-2xl ${Ct?"text-[#737373]":"text-gray-400"}`,children:""})]}),r.jsx("button",{onClick:st,className:`p-2.5 sm:p-2 md:p-3 rounded-lg transition-colors active:scale-95 touch-manipulation flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center ${Ct?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200"}`,"aria-label":"Next month",children:r.jsx($n,{className:`w-5 h-5 sm:w-6 sm:h-6 ${Ct?"text-[#a3a3a3]":"text-gray-700"}`})})]}),r.jsxs("div",{className:"mb-6 sm:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-100",children:[r.jsx("div",{className:"grid grid-cols-7 mb-3 sm:mb-4",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map((je,Ce)=>r.jsxs("div",{className:`text-center text-xs sm:text-sm py-2 font-semibold uppercase tracking-wide ${zt}`,children:[r.jsx("span",{className:"hidden sm:inline",children:w[Ce].slice(0,3)}),r.jsx("span",{className:"sm:hidden",children:je})]},je))}),r.jsx("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:hr.map((je,Ce)=>{const Qe=je.isCurrentMonth&&je.slots>0,He=c&&je.date===c.getDate()&&je.month===c.getMonth()&&je.year===c.getFullYear();return r.jsxs("button",{onClick:()=>At(je),disabled:!Qe,className:`
                          aspect-square p-1 sm:p-2 rounded-lg sm:rounded-xl transition-all duration-200 flex flex-col items-center justify-center
                          ${je.isCurrentMonth?"":Ct?"text-[#2a2a2a]":"text-gray-300"}
                          ${Qe?`cursor-pointer ${Ct?"hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"hover:bg-gray-100 active:bg-gray-200"}`:"cursor-not-allowed opacity-40"}
                          ${He?Ct?"bg-[#4f46e5] text-white":"bg-blue-600 text-white":Ct?"text-white":"text-gray-900"}
                          touch-manipulation
                        `,children:[r.jsx("span",{className:`text-sm sm:text-base font-medium ${He?"text-white":""}`,children:je.date}),je.isCurrentMonth&&je.slots>0&&r.jsxs("span",{className:`text-[10px] sm:text-xs ${He?"text-white/80":Ct?"text-[#737373]":"text-gray-500"}`,children:[je.slots," slots"]})]},Ce)})})]}),r.jsx("p",{className:`text-center text-xs sm:text-sm ${zt} animate-in fade-in slide-in-from-bottom-4 duration-500 delay-200`,children:"Click a date to browse availability"})]}),o==="timeslot"&&c&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl ${kt} mb-1.5 sm:mb-2`,children:c.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),r.jsx("p",{className:`text-sm sm:text-base ${zt}`,children:"Select your preferred time"})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:yr.map((je,Ce)=>r.jsxs("button",{onClick:()=>je.available&&Zt(je.time),disabled:!je.available,className:`
                      p-3 sm:p-4 rounded-lg sm:rounded-xl transition-all duration-200 border-2
                      ${je.available?Ct?"border-[#2a2a2a] hover:border-[#4f46e5] hover:bg-[#1e1e1e] active:bg-[#2a2a2a]":"border-gray-200 hover:border-blue-600 hover:bg-blue-50 active:bg-blue-100":Ct?"border-[#2a2a2a] opacity-40 cursor-not-allowed":"border-gray-200 opacity-40 cursor-not-allowed"}
                      ${u===je.time?Ct?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":""}
                      animate-in fade-in slide-in-from-bottom-4 duration-500
                      touch-manipulation
                    `,style:{animationDelay:`${Ce*30}ms`},children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(jr,{className:`w-4 h-4 ${je.available?Ct?"text-[#a3a3a3]":"text-gray-600":Ct?"text-[#2a2a2a]":"text-gray-400"}`}),r.jsx("span",{className:`text-sm sm:text-base font-medium ${Ct?"text-white":"text-gray-900"}`,children:je.time})]}),!je.available&&r.jsx("p",{className:`text-xs mt-1 ${Ct?"text-[#737373]":"text-gray-500"}`,children:"Sold out"})]},Ce))})]}),o==="plan"&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl ${kt} mb-1.5 sm:mb-2`,children:"Select Tickets"}),r.jsxs("p",{className:`text-sm sm:text-base ${zt}`,children:[c?.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})," at ",u]})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4 md:space-y-6",children:ut.map((je,Ce)=>{const Qe=S[je.id]||0,He=T[je.id],vt=He?je.price-He.discount:je.price;return r.jsxs("div",{className:`${cr} border ${Pt} rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6 animate-in fade-in slide-in-from-bottom-4 duration-500`,style:{animationDelay:`${Ce*100}ms`},children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 sm:gap-4 mb-3 sm:mb-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:`text-base sm:text-lg ${kt} mb-1`,children:je.name}),r.jsx("p",{className:`text-xs sm:text-sm ${zt}`,children:je.description}),r.jsxs("div",{className:"flex items-baseline gap-2 mt-2",children:[r.jsxs("span",{className:`text-lg sm:text-xl md:text-2xl ${kt} font-semibold`,children:["$",vt.toFixed(2)]}),He&&r.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["$",je.price.toFixed(2)]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[r.jsx("button",{onClick:()=>A(le=>({...le,[je.id]:Math.max(0,(le[je.id]||0)-1)})),disabled:Qe===0,className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center transition-colors touch-manipulation ${Qe===0?Ct?"bg-[#1e1e1e] text-[#2a2a2a] cursor-not-allowed":"bg-gray-100 text-gray-300 cursor-not-allowed":Ct?"bg-[#1e1e1e] text-white hover:bg-[#2a2a2a]":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:r.jsx(BE,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r.jsx("span",{className:`text-lg sm:text-xl font-semibold min-w-[2rem] sm:min-w-[3rem] text-center ${kt}`,children:Qe}),r.jsx("button",{onClick:()=>A(le=>({...le,[je.id]:(le[je.id]||0)+1})),className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center transition-colors touch-manipulation ${Ct?"bg-[#4f46e5] text-white hover:bg-[#4338ca]":"bg-blue-600 text-white hover:bg-blue-700"}`,children:r.jsx(Ts,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),Qe>0&&r.jsxs("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t",style:{borderColor:Ct?"#2a2a2a":"#e5e7eb"},children:[He?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs sm:text-sm text-emerald-600 dark:text-emerald-400",children:['Promo code "',He.code,'" applied (-$',He.discount,")"]}),r.jsx("button",{onClick:()=>{const le={...T};delete le[je.id],I(le)},className:"text-xs sm:text-sm text-red-600 dark:text-red-400 hover:underline",children:"Remove"})]}):r.jsx("button",{onClick:()=>$(le=>({...le,[je.id]:!le[je.id]})),className:`text-xs sm:text-sm ${Ct?"text-[#4f46e5]":"text-blue-600"} hover:underline`,children:"Have a promo code?"}),O[je.id]&&!He&&r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx(de,{placeholder:"Enter code",className:"h-10 sm:h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500",value:k[je.id]||"",onChange:le=>E(Ee=>({...Ee,[je.id]:le.target.value}))}),r.jsx(W,{onClick:()=>{const le=k[je.id];le&&(I(Ee=>({...Ee,[je.id]:{code:le,discount:5}})),$(Ee=>({...Ee,[je.id]:!1})))},className:"h-10 sm:h-12 px-4",style:{backgroundColor:Ct?"#4f46e5":t},children:"Apply"})]})]})]},je.id)})}),r.jsx("div",{className:"mt-6 sm:mt-8",children:r.jsx(W,{onClick:tr,disabled:Object.values(S).reduce((je,Ce)=>je+Ce,0)===0,className:"w-full h-12 sm:h-14 text-base sm:text-lg font-semibold",style:{backgroundColor:Ct?"#4f46e5":t,opacity:Object.values(S).reduce((je,Ce)=>je+Ce,0)===0?.5:1},children:"Continue to Cart"})})]}),o==="cart"&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl ${kt} mb-1.5 sm:mb-2`,children:"Your Cart"}),r.jsx("p",{className:`text-sm sm:text-base ${zt}`,children:"Review your booking details"})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6 sm:mb-8",children:N.map((je,Ce)=>r.jsxs("div",{className:`${cr} border ${Pt} rounded-lg sm:rounded-xl p-3 sm:p-4 flex items-center justify-between animate-in fade-in slide-in-from-bottom-4 duration-500`,style:{animationDelay:`${Ce*50}ms`},children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:`text-sm sm:text-base ${kt} mb-0.5`,children:je.ticketTypeName}),r.jsxs("p",{className:`text-xs sm:text-sm ${zt}`,children:[c?.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",u]})]}),r.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-shrink-0",children:[r.jsxs("span",{className:`text-base sm:text-lg font-semibold ${kt}`,children:["$",je.price.toFixed(2)]}),r.jsx("button",{onClick:()=>C(N.filter(Qe=>Qe.id!==je.id)),className:`p-2 rounded-lg transition-colors touch-manipulation ${Ct?"hover:bg-[#1e1e1e] text-red-400":"hover:bg-gray-100 text-red-600"}`,children:r.jsx(ks,{className:"w-4 h-4"})})]})]},je.id))}),r.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm p-4 sm:p-6 space-y-3 sm:space-y-4 mb-6 sm:mb-8 ${Ct?"bg-[#1e1e1e] border-[#2a2a2a]":""}`,children:[r.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[r.jsx("span",{className:zt,children:"Subtotal"}),r.jsxs("span",{className:kt,children:["$",Je().toFixed(2)]})]}),bt()>0&&r.jsxs("div",{className:"flex justify-between text-sm sm:text-base text-emerald-600 dark:text-emerald-400",children:[r.jsx("span",{children:"Discount"}),r.jsxs("span",{children:["-$",bt().toFixed(2)]})]}),Z&&r.jsxs("div",{className:"flex justify-between text-sm sm:text-base text-emerald-600 dark:text-emerald-400",children:[r.jsx("span",{children:"Gift Card"}),r.jsxs("span",{children:["-$",Z.amount.toFixed(2)]})]}),r.jsx(Ze,{className:Ct?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between text-base sm:text-lg",children:[r.jsx("span",{className:`${kt} font-semibold`,children:"Total"}),r.jsxs("span",{className:`${kt} font-semibold text-lg sm:text-xl`,children:["$",gr().toFixed(2)]})]})]}),r.jsx(W,{onClick:$t,disabled:N.length===0,className:"w-full h-12 sm:h-14 text-base sm:text-lg font-semibold",style:{backgroundColor:Ct?"#4f46e5":t,opacity:N.length===0?.5:1},children:"Proceed to Checkout"})]}),o==="checkout"&&r.jsxs("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10",children:[r.jsxs("div",{className:"mb-4 sm:mb-6 md:mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("h2",{className:`text-xl sm:text-2xl md:text-3xl ${kt} mb-1.5 sm:mb-2`,children:"Complete Booking"}),r.jsx("p",{className:`text-sm sm:text-base ${zt}`,children:"Enter your details to confirm"})]}),r.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[r.jsxs("div",{className:`${cr} border ${Pt} rounded-lg sm:rounded-xl p-4 sm:p-6`,children:[r.jsxs("h3",{className:`text-base sm:text-lg ${kt} mb-4 flex items-center gap-2`,children:[r.jsx(ma,{className:"w-5 h-5"}),"Contact Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"Full Name"}),r.jsx(de,{placeholder:"John Doe",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:L.fullName,onChange:je=>z({...L,fullName:je.target.value})})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"Phone Number"}),r.jsx(de,{placeholder:"(555) 123-4567",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:L.phone,onChange:je=>z({...L,phone:je.target.value})})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"Email"}),r.jsx(de,{type:"email",placeholder:"john@example.com",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:L.email,onChange:je=>z({...L,email:je.target.value})})]})]})]}),r.jsxs("div",{className:`${cr} border ${Pt} rounded-lg sm:rounded-xl p-4 sm:p-6`,children:[r.jsxs("h3",{className:`text-base sm:text-lg ${kt} mb-4 flex items-center gap-2`,children:[r.jsx(rn,{className:"w-5 h-5"}),"Payment Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"Card Number"}),r.jsx(de,{placeholder:"1234 5678 9012 3456",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:M.cardNumber,onChange:je=>V({...M,cardNumber:je.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"Expiry Date"}),r.jsx(de,{placeholder:"MM/YY",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:M.expiryDate,onChange:je=>V({...M,expiryDate:je.target.value})})]}),r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-[#a3a3a3]",children:"CVV"}),r.jsx(de,{placeholder:"123",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#2a2a2a] placeholder:text-gray-500",value:M.securityCode,onChange:je=>V({...M,securityCode:je.target.value})})]})]})]})]}),r.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm p-4 sm:p-6 ${Ct?"bg-[#1e1e1e] border-[#2a2a2a]":""}`,children:[r.jsx("h3",{className:`text-base sm:text-lg ${kt} mb-4`,children:"Order Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[r.jsx("span",{className:zt,children:"Subtotal"}),r.jsxs("span",{className:kt,children:["$",Je().toFixed(2)]})]}),r.jsx(Ze,{className:Ct?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between text-base sm:text-lg",children:[r.jsx("span",{className:`${kt} font-semibold`,children:"Total"}),r.jsxs("span",{className:`${kt} font-semibold text-lg sm:text-xl`,children:["$",gr().toFixed(2)]})]})]})]}),r.jsx(W,{onClick:Dr,disabled:B,className:"w-full h-12 sm:h-14 text-base sm:text-lg font-semibold",style:{backgroundColor:Ct?"#4f46e5":t},children:B?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):"Complete Payment"})]})]}),o==="success"&&r.jsx("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10 flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center max-w-md animate-in fade-in zoom-in duration-500",children:[r.jsx("div",{className:"mb-6 sm:mb-8 flex justify-center",children:r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-emerald-100 dark:bg-emerald-500/20 flex items-center justify-center",children:r.jsx(en,{className:"w-10 h-10 sm:w-12 sm:h-12 text-emerald-600 dark:text-emerald-400"})})}),r.jsx("h2",{className:`text-2xl sm:text-3xl md:text-4xl ${kt} mb-3 sm:mb-4`,children:"Booking Confirmed!"}),r.jsxs("p",{className:`text-sm sm:text-base ${zt} mb-6 sm:mb-8`,children:["Your booking has been successfully confirmed. A confirmation email has been sent to ",L.email]}),r.jsx(W,{onClick:Er,className:"w-full h-12 sm:h-14 text-base sm:text-lg font-semibold",style:{backgroundColor:Ct?"#4f46e5":t},children:"Book Another Experience"})]})}),o==="failed"&&r.jsx("div",{className:"p-3 sm:p-4 md:p-10 pb-20 sm:pb-10 flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center max-w-md animate-in fade-in zoom-in duration-500",children:[r.jsx("div",{className:"mb-6 sm:mb-8 flex justify-center",children:r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-red-100 dark:bg-red-500/20 flex items-center justify-center",children:r.jsx(Is,{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-600 dark:text-red-400"})})}),r.jsx("h2",{className:`text-2xl sm:text-3xl md:text-4xl ${kt} mb-3 sm:mb-4`,children:"Payment Failed"}),r.jsx("p",{className:`text-sm sm:text-base ${zt} mb-6 sm:mb-8`,children:"We couldn't process your payment. Please check your payment details and try again."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(W,{onClick:()=>l("checkout"),className:"w-full h-12 sm:h-14 text-base sm:text-lg font-semibold",style:{backgroundColor:Ct?"#4f46e5":t},children:"Try Again"}),r.jsx(W,{onClick:Er,variant:"outline",className:`w-full h-12 sm:h-14 text-base sm:text-lg ${Ct?"border-[#2a2a2a] text-[#a3a3a3] hover:bg-[#1e1e1e]":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Start Over"})]})]})})]})]})}),r.jsx(rp,{open:J,onOpenChange:ee,children:r.jsxs(sp,{className:Ct?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(np,{children:[r.jsx(ip,{className:kt,children:"Leave booking process?"}),r.jsx(op,{className:zt,children:"You have items in your cart. Are you sure you want to exit? Your progress will be lost."})]}),r.jsxs(ap,{children:[r.jsx(lp,{className:Ct?"bg-[#161616] text-[#a3a3a3] border-[#2a2a2a]":"",children:"Continue Booking"}),r.jsx(Ng,{onClick:()=>{ee(!1),Er()},style:{backgroundColor:Ct?"#4f46e5":t},children:"Exit"})]})]})}),r.jsx(mr,{open:$e,onOpenChange:Se,children:r.jsx(fr,{className:Ct?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:r.jsxs(br,{children:[r.jsxs(pr,{className:`${kt} flex items-center gap-2`,children:[r.jsx(Mn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),"Secured Checkout"]}),r.jsx(wr,{className:zt,children:"Your payment information is protected with industry-standard 256-bit SSL encryption. We never store your full credit card details."})]})})}),r.jsx(mr,{open:Y,onOpenChange:Le,children:r.jsx(fr,{className:Ct?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:r.jsxs(br,{children:[r.jsxs(pr,{className:`${kt} flex items-center gap-2`,children:[r.jsx(_a,{className:"w-5 h-5",style:{color:Ct?"#6366f1":t}}),"Health & Safety"]}),r.jsx(wr,{className:zt,children:"We follow enhanced cleaning protocols and maintain social distancing guidelines. All staff members are fully trained in health and safety procedures."})]})})})]})}const $O=[{id:"farebook",name:"FareBook Widget",description:"Multi-step booking flow with categories, games list, and calendar view",component:IO,recommended:!0,category:"Full Page"},{id:"farebook-single",name:"FareBook Single Event / Room Widget",description:"Streamlined booking widget for a single event or room with calendar, time slots, and checkout",component:bQe,recommended:!0,category:"Full Page"},{id:"singlegame",name:"Calendar Single Event / Room Booking Page",description:"Dedicated landing page for one specific game with hero image and inline booking",component:goe,recommended:!0,category:"Landing Page"},{id:"calendar",name:"Calendar Booking Widget",description:"Interactive calendar with game selection and time slots",component:Ww,recommended:!0,category:"Full Page"},{id:"bookgo",name:"BookGo",description:"Browse games in a list format with instant booking",component:moe,recommended:!0,category:"Full Page"},{id:"resolvex",name:"Resolvex Grid Widget",description:"Beautiful grid layout with large images and instant booking",component:xoe,recommended:!0,category:"Full Page"},{id:"quick",name:"Quick Booking Form",description:"Simple one-page booking form for fast reservations",component:foe,recommended:!1,category:"Compact"},{id:"multistep",name:"OTB Multi Step Checkout",description:"Step-by-step booking flow with progress tracking",component:poe,recommended:!0,category:"Full Page"}],wQe=["calendar","singlegame","multistep"],jQe=t=>$O.find(e=>e.id===t),NQe=(t,e)=>e&&!wQe.includes(t),hx={showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!1,widgetTitle:"",widgetDescription:"",fontFamily:"",fontScale:1,timezoneLabel:"Local Time",previewRole:"customer",slotDurationMinutes:90,showPromoCodeInput:!0,showGiftCardInput:!0,proLockedCustomSettings:!0,customSettings:{logoUrl:"",logoSize:64,logoPosition:"top",headlineText:"",headlineFont:"",headlineSize:28,headlineColor:"#111827",headlineAlign:"center",descriptionHtml:"",descriptionCharLimit:280,widgetWidth:1024,widgetHeight:768,responsiveScale:1,minWidth:320,maxWidth:1600,previewDevice:"desktop",themeVariant:"light",themeColor:"#2563eb"},ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30}],games:[],additionalQuestions:[],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us. We can rebook you to a different date and/or time or issue a refund in the form of a gift card."},SQe={showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!0,ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30},{id:"veteran",name:"Veterans",description:"Must show military ID",price:25}],categories:[{id:"1",name:"Traditional Escape Rooms",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080"},{id:"2",name:"Printable Escape Rooms",image:"https://images.unsplash.com/photo-1632387958032-3b563a92091f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080"}],games:[{id:"1",name:"Zombie Apocalypse",image:"https://images.unsplash.com/photo-1659059530318-656a112ad2cd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1",description:"Can you survive the zombie apocalypse and find the cure?"},{id:"2",name:"Area 51",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:5,categoryId:"1"},{id:"3",name:"Catacombs",image:"https://images.unsplash.com/photo-1637481687365-9b133c567071?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:2,categoryId:"1"},{id:"4",name:"Murder Mystery",image:"https://images.unsplash.com/photo-1636056471685-1cfdfa9d2e4b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1"},{id:"5",name:"The Jolly Roger, Curse of the Devil's Shroud",image:"https://images.unsplash.com/photo-1561625116-df74735458a5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:0,categoryId:"1"}],additionalQuestions:[{id:"hear-about",question:"How did you hear about us?",type:"select",options:["Google","Facebook","Friend","Other"],required:!1}],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us. We can rebook you to a different date and/or time or issue a refund in the form of a gift card."},CQe={...hx,games:[{id:"1",name:"Mystery Manor",tagline:"Uncover the secrets of an abandoned Victorian mansion",duration:"60 min",difficulty:"Medium",rating:4.9,reviews:234,price:30,featured:!0,image:"https://images.unsplash.com/photo-1576086213369-97a306d36557?w=600&h=400&fit=crop",players:"2-8 players",ageRange:"All ages"}]},kG="calendarWidgetConfig",_G="singleGameWidgetConfig",kQe=()=>{const[t,e]=j.useState(SQe),[s,n]=j.useState(CQe),[a,i]=j.useState({...hx,games:[]}),[o,l]=j.useState({...hx,games:[]}),[c,d]=j.useState({...hx,games:[]}),[u,h]=j.useState({...hx,games:[]}),[m,f]=j.useState({...hx,games:[]});return j.useEffect(()=>{try{const g=localStorage.getItem(kG);if(g){const b=JSON.parse(g);b&&typeof b=="object"&&i(b)}}catch{}},[]),j.useEffect(()=>{try{localStorage.setItem(kG,JSON.stringify(a))}catch{}},[a]),j.useEffect(()=>{try{const g=localStorage.getItem(_G);if(g){const b=JSON.parse(g);b&&typeof b=="object"&&l(b)}}catch{}},[]),j.useEffect(()=>{try{localStorage.setItem(_G,JSON.stringify(o))}catch{}},[o]),{fareBookConfig:t,setFareBookConfig:e,bookGoConfig:s,setBookGoConfig:n,calendarConfig:a,setCalendarConfig:i,singleGameConfig:o,setSingleGameConfig:l,resolvexConfig:c,setResolvexConfig:d,quickConfig:u,setQuickConfig:h,multiStepConfig:m,setMultiStepConfig:f,getWidgetConfig:g=>({farebook:t,"farebook-single":t,bookgo:s,calendar:a,singlegame:o,resolvex:c,quick:u,multistep:m})[g]||hx,getWidgetConfigSetter:g=>({farebook:e,"farebook-single":e,bookgo:n,calendar:i,singlegame:l,resolvex:d,quick:h,multistep:f})[g]||e}},iD="https://bookingtms.com",voe=({templateId:t,templateName:e,primaryColor:s,baseUrl:n=iD})=>`<!-- BookingTMS ${e} -->
<div id="bookingtms-widget-${t}"></div>
<script>
  (function() {
    var script = document.createElement('script');
    script.src = '${n}/widgets/${t}.js';
    script.async = true;
    script.setAttribute('data-widget-id', 'YOUR_WIDGET_ID');
    script.setAttribute('data-primary-color', '${s}');
    script.setAttribute('data-template', '${t}');
    document.getElementById('bookingtms-widget-${t}').appendChild(script);
  })();
<\/script>

<!-- Styles (optional) -->
<link rel="stylesheet" href="${n}/widgets/styles.css">`,_Qe=({templateId:t,primaryColor:e,baseUrl:s=iD})=>`import { useEffect } from 'react';

export function BookingWidget() {
  useEffect(() => {
    const script = document.createElement('script');
    script.src = '${s}/widgets/${t}.js';
    script.async = true;
    script.setAttribute('data-widget-id', 'YOUR_WIDGET_ID');
    script.setAttribute('data-primary-color', '${e}');
    script.setAttribute('data-template', '${t}');
    
    const widgetDiv = document.getElementById('bookingtms-widget');
    if (widgetDiv) {
      widgetDiv.appendChild(script);
    }
    
    return () => {
      if (widgetDiv && script.parentNode) {
        script.parentNode.removeChild(script);
      }
    };
  }, []);

  return <div id="bookingtms-widget" />;
}`,AQe=({templateId:t,primaryColor:e,baseUrl:s=iD})=>`1. Login to WordPress Admin Panel
2. Go to Pages or Posts
3. Edit the page where you want the widget
4. Switch to HTML/Code Editor
5. Paste the following code:

${voe({templateId:t,templateName:"",primaryColor:e,baseUrl:s})}

6. Update/Publish your page
7. Visit the page to see your booking widget

Alternative: Use a shortcode plugin
[bookingtms template="${t}" color="${e}"]`,EQe=t=>({html:voe(t),react:_Qe(t),wordpress:AQe(t)});function PQe({selectedTemplateId:t,selectedTemplateName:e,primaryColor:s}){const[n,a]=j.useState(!1),i=EQe({templateId:t,templateName:e,primaryColor:s}),o=l=>{navigator.clipboard.writeText(l),a(!0),re.success("Code copied to clipboard!"),setTimeout(()=>a(!1),2e3)};return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm lg:col-span-2",children:[r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(Xe,{className:"text-base sm:text-lg",children:"Embed Code"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-1",children:"Copy and paste this code into your website"})]}),r.jsx(W,{onClick:()=>o(i.html),className:"flex-shrink-0 h-9 sm:h-10 text-xs sm:text-sm bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca]",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(on,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Copy Code"})]})})]})}),r.jsx(_e,{className:"p-4 sm:p-6 pt-0",children:r.jsxs(wn,{defaultValue:"html",children:[r.jsxs(kn,{className:"w-full grid grid-cols-3 h-9 sm:h-10",children:[r.jsx(Tt,{value:"html",className:"text-xs sm:text-sm",children:"HTML"}),r.jsx(Tt,{value:"react",className:"text-xs sm:text-sm",children:"React"}),r.jsx(Tt,{value:"wordpress",className:"text-xs sm:text-sm",children:"WordPress"})]}),r.jsx(Bt,{value:"html",className:"mt-3 sm:mt-4",children:r.jsx(fa,{className:"h-[250px] sm:h-[300px] w-full rounded-lg bg-gray-900 dark:bg-[#0a0a0a] border border-gray-700 dark:border-[#2a2a2a] p-3 sm:p-4",children:r.jsx("pre",{className:"text-xs sm:text-sm text-green-400 dark:text-emerald-400",children:r.jsx("code",{children:i.html})})})}),r.jsx(Bt,{value:"react",className:"mt-3 sm:mt-4",children:r.jsx(fa,{className:"h-[250px] sm:h-[300px] w-full rounded-lg bg-gray-900 dark:bg-[#0a0a0a] border border-gray-700 dark:border-[#2a2a2a] p-3 sm:p-4",children:r.jsx("pre",{className:"text-xs sm:text-sm text-green-400 dark:text-emerald-400",children:r.jsx("code",{children:i.react})})})}),r.jsx(Bt,{value:"wordpress",className:"mt-3 sm:mt-4",children:r.jsx(fa,{className:"h-[250px] sm:h-[300px] w-full rounded-lg bg-gray-900 dark:bg-[#0a0a0a] border border-gray-700 dark:border-[#2a2a2a] p-3 sm:p-4",children:r.jsx("pre",{className:"text-xs sm:text-sm text-green-400 dark:text-emerald-400",children:r.jsx("code",{children:i.wordpress})})})})]})})]})}function TQe(){return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm",children:[r.jsx(Ke,{className:"p-4 sm:p-6",children:r.jsx(Xe,{className:"text-base sm:text-lg",children:"Installation Guide"})}),r.jsxs(_e,{className:"p-4 sm:p-6 pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 dark:bg-[#4f46e5]/20 rounded-lg flex items-center justify-center mb-3 sm:mb-4",children:r.jsx("span",{className:"text-blue-600 dark:text-[#6366f1] text-sm sm:text-base font-semibold",children:"1"})}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Choose Template"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3]",children:"Select the booking widget template that best fits your website design and user flow"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 dark:bg-[#4f46e5]/20 rounded-lg flex items-center justify-center mb-3 sm:mb-4",children:r.jsx("span",{className:"text-blue-600 dark:text-[#6366f1] text-sm sm:text-base font-semibold",children:"2"})}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Customize Colors"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3]",children:"Adjust the primary color to match your brand. The widget will automatically adapt"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 dark:bg-[#4f46e5]/20 rounded-lg flex items-center justify-center mb-3 sm:mb-4",children:r.jsx("span",{className:"text-blue-600 dark:text-[#6366f1] text-sm sm:text-base font-semibold",children:"3"})}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Copy & Paste Code"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3]",children:"Copy the embed code and paste it into your website. Replace YOUR_WIDGET_ID with your actual ID"})]})]}),r.jsx(Ze,{className:"my-4 sm:my-6"}),r.jsxs("div",{className:"bg-blue-50 dark:bg-[#4f46e5]/10 border border-blue-200 dark:border-[#4f46e5]/30 rounded-lg p-3 sm:p-4",children:[r.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-blue-900 dark:text-[#6366f1] mb-1 sm:mb-2",children:" Pro Tip"}),r.jsx("p",{className:"text-xs sm:text-sm text-blue-700 dark:text-[#818cf8]",children:"Need help with installation? Contact our support team or check out our detailed integration guides in the documentation."})]})]})]})}function OQe(){const{isRole:t}=no(),e=t("beta-owner"),{fareBookConfig:s,setFareBookConfig:n,getWidgetConfig:a,getWidgetConfigSetter:i}=kQe(),[o,l]=j.useState("singlegame"),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState("#2563eb"),g=jQe(o),b=g?.component;return r.jsx(sN,{children:r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsx(Ei,{title:"Booking Widget Templates",description:"Choose a professional booking widget for your website",sticky:!0}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-all",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 dark:bg-[#4f46e5]/20 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(ic,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600 dark:text-[#6366f1]"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Templates Available"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:$O.length})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-all",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 dark:bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(tn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600 dark:text-emerald-400"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Widget Bookings"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:"1,247"})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-all",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 dark:bg-purple-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(ys,{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Conversion Rate"}),r.jsx("p",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:"5.8%"})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm hover:shadow-md dark:hover:shadow-[0_0_15px_rgba(79,70,229,0.1)] transition-all",children:r.jsx(_e,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-orange-100 dark:bg-orange-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(nv,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373]",children:"Active Installs"}),r.jsx("p",{className:"text-gray-900 dark:text-white",children:"12"})]})]})})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-gray-900 dark:text-white mb-3 sm:mb-4",children:"Choose Your Template"}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 lg:gap-6",children:$O.map(w=>{const N=NQe(w.id,e);return r.jsx(he,{className:`border-2 transition-all ${N?"cursor-not-allowed opacity-75":"cursor-pointer"} ${o===w.id?"border-blue-600 dark:border-[#4f46e5] shadow-md dark:shadow-[0_0_20px_rgba(79,70,229,0.2)]":"border-gray-200 dark:border-[#2a2a2a] hover:border-gray-300 dark:hover:border-[#3a3a3a]"}`,style:{borderColor:o===w.id?v:void 0},onClick:()=>!N&&l(w.id),children:r.jsxs(_e,{className:"p-4 sm:p-6 relative",children:[N&&r.jsxs("div",{className:"absolute inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center z-10 p-6",children:[r.jsx(Mn,{className:"w-8 h-8 text-white mb-3"}),r.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Pro Features"}),r.jsx("p",{className:"text-gray-300 text-sm text-center mb-4",children:"Upgrade to unlock Custom Settings"}),r.jsx(W,{className:"bg-[#4f46e5] hover:bg-[#4338ca] text-white",onClick:C=>{C.stopPropagation(),re.info("Contact us to upgrade your plan")},children:"Upgrade"})]}),r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[r.jsx("h3",{className:"text-gray-900 dark:text-white text-sm sm:text-base",children:w.name}),w.recommended&&r.jsx(De,{variant:"secondary",className:"bg-blue-100 dark:bg-[#4f46e5]/20 text-blue-700 dark:text-[#6366f1] border border-blue-200 dark:border-[#4f46e5]/30 text-xs flex-shrink-0",children:"Recommended"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mb-3",children:w.description}),r.jsx(De,{variant:"secondary",className:"text-xs bg-gray-100 dark:bg-[#1e1e1e] text-gray-700 dark:text-[#a3a3a3] border border-gray-200 dark:border-[#2a2a2a]",children:w.category})]})}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:C=>{C.stopPropagation(),N||(l(w.id),d(!0))},disabled:N,className:"flex-1 h-9 text-xs sm:text-sm",children:[r.jsx(ys,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Preview"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:C=>{C.stopPropagation(),N||(l(w.id),h(!0))},disabled:N,className:"flex-1 h-9 text-xs sm:text-sm",children:[r.jsx(nv,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Settings"})]}),r.jsxs(W,{size:"sm",onClick:C=>{C.stopPropagation(),N||(l(w.id),f(!0))},disabled:N,className:"flex-1 h-9 text-xs sm:text-sm bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca]",children:[r.jsx(ic,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Embed"})]})]})]})},w.id)})})]}),r.jsx(hQe,{}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a] shadow-sm",children:r.jsxs(_e,{className:"p-4 sm:p-6",children:[r.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[r.jsx(Yx,{className:"w-4 h-4"}),"Quick Actions"]}),r.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[r.jsxs(W,{variant:"outline",className:"w-full h-10 text-sm",onClick:()=>d(!0),children:[r.jsx(Yx,{className:"w-4 h-4 mr-2"}),"Full Screen Preview"]}),r.jsxs(W,{variant:"outline",className:"w-full h-10 text-sm",onClick:()=>window.open("https://bookingtms.com/demo","_blank"),children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"View Live Demo"]}),r.jsxs(W,{variant:"outline",className:"w-full h-10 text-sm bg-blue-600 dark:bg-[#4f46e5] text-white hover:bg-blue-700 dark:hover:bg-[#4338ca] hover:text-white",onClick:()=>f(!0),children:[r.jsx(ic,{className:"w-4 h-4 mr-2"}),"Get Embed Code"]})]})]})}),r.jsx(PQe,{selectedTemplateId:o,selectedTemplateName:g?.name||"",primaryColor:v})]}),r.jsx(TQe,{}),r.jsx(mr,{open:c,onOpenChange:d,children:r.jsxs(fr,{className:"!w-screen !h-[100dvh] !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1400px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:g?.name}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:"Live Preview - See how this widget will look on your website"})]}),r.jsx(De,{variant:"secondary",className:"bg-gray-100 dark:bg-[#1e1e1e] border border-gray-200 dark:border-[#2a2a2a] text-xs flex-shrink-0 hidden sm:inline-flex",children:"Template Preview"})]})}),r.jsx(fa,{className:"flex-1 h-full",children:r.jsxs("div",{className:"p-4 sm:p-8 pb-24 sm:pb-28 bg-gray-50 dark:bg-[#0a0a0a] min-h-full",children:[b&&r.jsx(b,{primaryColor:v,config:a(o)}),r.jsx("div",{className:"h-12 sm:h-20"})]})})]})}),r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:["Configure ",g?.name]}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:o==="farebook"?"Customize your widget settings, categories, games, and pricing":o==="calendar"?"Customize your widget settings with step-by-step game adding experience":"Customize your widget settings, games, and pricing options"})]}),r.jsxs(W,{onClick:()=>{h(!1),re.success("Settings saved successfully!")},className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] text-xs sm:text-sm h-9 sm:h-10 flex-shrink-0",size:"sm",children:[r.jsx(Dn,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Save Changes"})]})]})}),r.jsx(fa,{className:"flex-1 h-full",children:r.jsx("div",{className:"p-4 sm:p-6 pb-20 sm:pb-24 bg-gray-50 dark:bg-[#0a0a0a]",children:o==="farebook"||o==="farebook-single"?r.jsx(yKe,{config:s,onConfigChange:n,onPreview:()=>{h(!1),d(!0)}}):o==="calendar"?r.jsx(loe,{config:a(o),onConfigChange:i(o),onPreview:()=>{h(!1),d(!0)}}):r.jsx(oQe,{widgetType:o,config:a(o),onConfigChange:i(o),onPreview:()=>{h(!1),d(!0)}})})})]})}),r.jsx(mr,{open:m,onOpenChange:f,children:r.jsxs(fr,{className:"!w-screen !h-[100dvh] !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsx("div",{className:"flex items-center justify-between gap-3",children:r.jsxs("div",{className:"min-w-0",children:[r.jsxs(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:["Embed ",g?.name]}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:"Get the embed code and install the widget on your website"})]})})}),r.jsx(fa,{className:"flex-1 h-full",children:r.jsx("div",{className:"p-4 sm:p-6 pb-20 sm:pb-24 bg-gray-50 dark:bg-[#0a0a0a]",children:r.jsx(coe,{widgetId:o,widgetName:g?.name||"",primaryColor:v})})})]})})]})})}const Pj=[{value:"escape-room",label:"Escape Room",icon:""},{value:"smash-room",label:"Smash Room",icon:""},{value:"axe-throwing",label:"Axe Throwing",icon:""},{value:"laser-tag",label:"Laser Tag",icon:""},{value:"vr-experience",label:"VR Experience",icon:""},{value:"arcade",label:"Arcade",icon:""},{value:"other",label:"Other",icon:""}],oD="#2563eb",AG={name:"",type:"escape-room",description:"",address:"",phone:"",email:"",website:"",primaryColor:oD},yoe=()=>({showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!1,games:[],ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30}],additionalQuestions:[],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us."}),boe=t=>{const e=yoe();return{showSecuredBadge:t?.showSecuredBadge??e.showSecuredBadge,showHealthSafety:t?.showHealthSafety??e.showHealthSafety,enableVeteranDiscount:t?.enableVeteranDiscount??e.enableVeteranDiscount,games:t&&Array.isArray(t.games)?t.games:[],ticketTypes:t&&Array.isArray(t.ticketTypes)?t.ticketTypes.map(s=>({...s})):e.ticketTypes.map(s=>({...s})),additionalQuestions:t&&Array.isArray(t.additionalQuestions)?t.additionalQuestions.map(s=>({...s})):[],cancellationPolicy:t?.cancellationPolicy??e.cancellationPolicy}},IQe=t=>({id:t.id,name:t.name,type:t.settings?.type||"other",description:t.settings?.description||"",address:t.address||"",phone:t.phone||"",email:t.email||"",website:t.settings?.website||"",primaryColor:t.primary_color||t.settings?.primaryColor||oD,widgetConfig:boe(t.settings?.widgetConfig),embedKey:t.embed_key||"",isActive:t.status==="active",createdAt:t.created_at,updatedAt:t.updated_at}),Tj=t=>({name:t.name,address:t.address||"",city:"",state:"",zip:"",country:"United States",phone:t.phone||"",email:t.email||"",capacity:100,timezone:"America/New_York",status:t.isActive?"active":"inactive",primary_color:t.primaryColor||oD,settings:{type:t.type,description:t.description,website:t.website,widgetConfig:boe(t.widgetConfig)}});function $Qe(){const{currentUser:t}=no(),{venues:e,loading:s,createVenue:n,updateVenue:a,deleteVenue:i,refreshVenues:o}=n3(),[l,c]=j.useState(!1),[d,u]=j.useState(""),[h,m]=j.useState(!1),[f,v]=j.useState(!1),[x,g]=j.useState(!1),[b,w]=j.useState(!1),[N,C]=j.useState(!1),[S,A]=j.useState(!1),[k,E]=j.useState(!1),[O,$]=j.useState(null),[T,I]=j.useState(!1),[L,z]=j.useState("idle"),[M,V]=j.useState(AG),B=e.map(IQe),F=s,J=["super-admin","beta-owner","admin","manager"].includes(t?.role||""),ee=["super-admin","beta-owner","admin","manager"].includes(t?.role||""),q=["super-admin","beta-owner","admin"].includes(t?.role||""),U=async()=>{c(!0);try{await o(),re.success("All venue data refreshed successfully")}catch{re.error("Failed to refresh venue data")}finally{c(!1)}},Z=async()=>{if(!J){re.error("You do not have permission to create venues");return}m(!0);try{const oe={...M,widgetConfig:yoe(),isActive:!0};await n(Tj(oe)),v(!1),be(),re.success("Venue created! Embed key generated automatically.")}catch(oe){console.error("Error creating venue:",oe),re.error("Failed to create venue")}finally{m(!1)}},K=async()=>{if(O){if(!ee){re.error("You do not have permission to edit venues");return}m(!0);try{const oe={...O,...M};await a(O.id,Tj(oe)),g(!1),$(null),be()}catch(oe){console.error("Error updating venue:",oe)}finally{m(!1)}}},se=async()=>{if(O){if(!q){re.error("You do not have permission to delete venues");return}m(!0);try{await i(O.id),w(!1),$(null)}catch(oe){console.error("Error deleting venue:",oe)}finally{m(!1)}}},ne=async oe=>{const pe=B.find(ye=>ye.id===oe);if(pe)try{const ye={...pe,isActive:!pe.isActive};await a(oe,Tj(ye))}catch(ye){console.error("Error toggling venue status:",ye)}},ie=async oe=>{if(O){z("saving");try{const pe={...O,widgetConfig:oe};await a(O.id,Tj(pe)),$(pe),z("saved"),setTimeout(()=>z("idle"),2e3),console.log("Widget config updated for venue:",pe.name,"Games:",oe.games?.length||0)}catch(pe){console.error("Error updating widget config:",pe),z("error"),re.error("Failed to save widget settings"),setTimeout(()=>z("idle"),3e3)}}},be=()=>{V(AG)};return{venues:B,loading:F,selectedVenue:O,formData:M,searchTerm:d,isLoading:h,isRefreshing:l,copiedEmbed:T,saveStatus:L,showCreateDialog:f,showEditDialog:x,showDeleteDialog:b,showWidgetSettings:N,showWidgetPreview:S,showEmbedCode:k,canCreateVenue:J,canEditVenue:ee,canDeleteVenue:q,setSelectedVenue:$,setFormData:V,setSearchTerm:u,setShowCreateDialog:v,setShowEditDialog:g,setShowDeleteDialog:w,setShowWidgetSettings:C,setShowWidgetPreview:A,setShowEmbedCode:E,setCopiedEmbed:I,handleRefresh:U,handleCreateVenue:Z,handleUpdateVenue:K,handleDeleteVenue:se,toggleVenueStatus:ne,handleUpdateWidgetConfig:ie,resetForm:be,openEditDialog:oe=>{$(oe),V({name:oe.name,type:oe.type,description:oe.description,address:oe.address,phone:oe.phone,email:oe.email,website:oe.website,primaryColor:oe.primaryColor}),g(!0)}}}function DQe(){const{venues:t,loading:e,selectedVenue:s,formData:n,isLoading:a,isRefreshing:i,showCreateDialog:o,showEditDialog:l,showDeleteDialog:c,showWidgetSettings:d,showWidgetPreview:u,showEmbedCode:h,canCreateVenue:m,setSelectedVenue:f,setFormData:v,setShowCreateDialog:x,setShowEditDialog:g,setShowDeleteDialog:b,setShowWidgetSettings:w,setShowWidgetPreview:N,setShowEmbedCode:C,saveStatus:S,handleRefresh:A,handleCreateVenue:k,handleUpdateVenue:E,handleDeleteVenue:O,toggleVenueStatus:$,handleUpdateWidgetConfig:T,resetForm:I,openEditDialog:L}=$Qe(),z=V=>Pj.find(B=>B.value===V)||Pj[Pj.length-1],M=V=>t.find(B=>B.id===V);return e||a?r.jsx(_ae,{message:"Loading venues..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Venue Management",description:"Create and manage multiple venues with individual booking widgets",sticky:!0,action:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",className:"h-11",onClick:A,disabled:i,children:[r.jsx(ju,{className:`w-4 h-4 sm:mr-2 ${i?"animate-spin":""}`}),r.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),m&&r.jsxs(W,{className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] h-11",onClick:()=>x(!0),children:[r.jsx(Ts,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Add Venue"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-[#4f46e5]/20 rounded-lg flex items-center justify-center",children:r.jsx(Na,{className:"w-6 h-6 text-blue-600 dark:text-[#6366f1]"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373]",children:"Total Venues"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-emerald-500/20 rounded-lg flex items-center justify-center",children:r.jsx(Sr,{className:"w-6 h-6 text-green-600 dark:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373]",children:"Active Venues"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.filter(V=>V.isActive).length})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-500/20 rounded-lg flex items-center justify-center",children:r.jsx(ic,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373]",children:"Widgets Created"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.length})]})]})})}),r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-500/20 rounded-lg flex items-center justify-center",children:r.jsx(nv,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373]",children:"Total Events"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.reduce((V,B)=>V+(B.widgetConfig?.games?.length||0),0)})]})]})})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Your Venues"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mt-1",children:"Manage your venues and their booking widgets"})]}),m&&r.jsxs(W,{onClick:()=>x(!0),className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] w-full sm:w-auto",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Venue"]})]}),t.length===0?r.jsx(he,{className:"border-gray-200 dark:border-[#2a2a2a]",children:r.jsxs(_e,{className:"p-6 sm:p-12 text-center",children:[r.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 dark:bg-[#1e1e1e] rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Na,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 dark:text-[#737373]"})}),r.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No venues yet"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-[#737373] mb-6 max-w-md mx-auto px-4",children:"Create your first venue to start managing booking widgets for different locations like escape rooms, smash rooms, or axe throwing venues."}),m&&r.jsxs(W,{onClick:()=>x(!0),className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] w-full sm:w-auto",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Your First Venue"]})]})}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(V=>{const B=z(V.type);return r.jsxs(he,{className:"border-gray-200 dark:border-[#2a2a2a] hover:shadow-lg transition-shadow",children:[r.jsx(Ke,{className:"pb-3 sm:pb-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center text-xl sm:text-2xl flex-shrink-0",style:{backgroundColor:V.primaryColor+"20"},children:B.icon}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx(Xe,{className:"text-base sm:text-lg truncate",children:V.name}),r.jsx(De,{variant:"secondary",className:"mt-1 text-xs",children:B.label})]})]}),r.jsx(De,{variant:V.isActive?"default":"secondary",className:"text-xs flex-shrink-0",children:V.isActive?"Active":"Inactive"})]})}),r.jsxs(_e,{className:"space-y-4",children:[V.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-[#737373] line-clamp-2",children:V.description}),r.jsxs("div",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[V.address&&r.jsxs("div",{className:"flex items-start gap-2 text-gray-600 dark:text-[#737373]",children:[r.jsx(dl,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"line-clamp-1",children:V.address})]}),V.phone&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-[#737373]",children:[r.jsx(la,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:V.phone})]}),V.email&&r.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-[#737373]",children:[r.jsx(Ds,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:V.email})]})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm mb-3",children:[r.jsx("span",{className:"text-gray-600 dark:text-[#737373]",children:"Events/Rooms:"}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:V.widgetConfig?.games?.length||0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(W,{variant:"outline",onClick:()=>{const F=M(V.id)||V;console.log("Opening widget settings for:",F.name,"Games:",F.widgetConfig?.games?.length||0),f(F),w(!0)},className:"w-full justify-start h-9 text-sm font-normal hover:bg-gray-50 dark:hover:bg-[#1e1e1e]",children:[r.jsx(nv,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-[#737373]"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:"Configure"})]}),r.jsxs(W,{variant:"outline",onClick:()=>{const F=M(V.id)||V;console.log("Opening preview for:",F.name,"Games:",F.widgetConfig?.games?.length||0),f(F),N(!0)},className:"w-full justify-start h-9 text-sm font-normal hover:bg-gray-50 dark:hover:bg-[#1e1e1e]",children:[r.jsx(ys,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-[#737373]"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:"Preview"})]}),r.jsxs(W,{variant:"outline",onClick:()=>{const F=M(V.id)||V;if(!F.embedKey){re.info("Embed key is still being generated. Please refresh and try again.");return}f(F),C(!0)},className:"w-full justify-start h-9 text-sm font-normal hover:bg-gray-50 dark:hover:bg-[#1e1e1e]",children:[r.jsx(ic,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-[#737373]"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:"Embed"})]}),r.jsxs(W,{variant:"outline",onClick:()=>L(V),className:"w-full justify-start h-9 text-sm font-normal hover:bg-gray-50 dark:hover:bg-[#1e1e1e]",children:[r.jsx(oc,{className:"w-4 h-4 mr-2 text-gray-600 dark:text-[#737373]"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:"Edit Venue"})]})]}),r.jsx(Ze,{className:"my-3"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:()=>$(V.id),className:"flex-1 h-9 text-xs",children:V.isActive?"Deactivate":"Activate"}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>{f(V),b(!0)},className:"h-9 px-3 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",children:r.jsx(ks,{className:"w-4 h-4"})})]})]})]},V.id)})}),r.jsx(mr,{open:o||l,onOpenChange:V=>{V||(x(!1),g(!1),I(),f(null))},children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsx("div",{className:"flex items-center justify-between gap-3",children:r.jsxs("div",{className:"min-w-0",children:[r.jsx(pr,{className:"text-base sm:text-lg truncate",children:l?"Edit Venue":"Create New Venue"}),r.jsx(wr,{className:"text-xs sm:text-sm",children:l?"Update venue information and widget settings":"Add a new venue with its own booking widget"})]})})}),r.jsx(fa,{className:"flex-1 overflow-auto",children:r.jsxs("div",{className:"space-y-4 p-4 sm:p-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"name",className:"text-sm",children:"Venue Name *"}),r.jsx(de,{id:"name",value:n.name,onChange:V=>v({...n,name:V.target.value}),placeholder:"e.g., Downtown Escape Room",className:"h-10 text-sm"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"type",className:"text-sm",children:"Venue Type *"}),r.jsxs(sr,{value:n.type,onValueChange:V=>v({...n,type:V}),children:[r.jsx(ar,{children:r.jsx(nr,{})}),r.jsx(ir,{children:Pj.map(V=>r.jsx(Ae,{value:V.value,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{children:V.icon}),r.jsx("span",{children:V.label})]})},V.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"description",className:"text-sm",children:"Description"}),r.jsx(Ps,{id:"description",value:n.description,onChange:V=>v({...n,description:V.target.value}),placeholder:"Brief description of your venue...",rows:3,className:"text-sm"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"address",className:"text-sm",children:"Address"}),r.jsx(de,{id:"address",value:n.address,onChange:V=>v({...n,address:V.target.value}),placeholder:"123 Main St, City, State 12345",className:"h-10 text-sm"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",className:"text-sm",children:"Phone"}),r.jsx(de,{id:"phone",value:n.phone,onChange:V=>v({...n,phone:V.target.value}),placeholder:"(555) 123-4567",className:"h-10 text-sm"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",className:"text-sm",children:"Email"}),r.jsx(de,{id:"email",type:"email",value:n.email,onChange:V=>v({...n,email:V.target.value}),placeholder:"info@venue.com",className:"h-10 text-sm"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"website",className:"text-sm",children:"Website"}),r.jsx(de,{id:"website",value:n.website,onChange:V=>v({...n,website:V.target.value}),placeholder:"https://www.yourvenue.com",className:"h-10 text-sm"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"primaryColor",className:"text-sm",children:"Brand Color"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{id:"primaryColor",type:"color",value:n.primaryColor,onChange:V=>v({...n,primaryColor:V.target.value}),className:"w-16 sm:w-20 h-10 cursor-pointer"}),r.jsx(de,{value:n.primaryColor,onChange:V=>v({...n,primaryColor:V.target.value}),placeholder:"#2563eb",className:"flex-1 h-10 text-sm"})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This color will be used in your booking widget"})]})]})}),r.jsxs(Us,{className:"bg-white dark:bg-[#1e1e1e] border-t border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0 flex-col-reverse sm:flex-row gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>{x(!1),g(!1),I()},className:"w-full sm:w-auto h-10 sm:h-11",children:"Cancel"}),r.jsx(W,{onClick:l?E:k,disabled:!n.name||a,className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] w-full sm:w-auto h-10 sm:h-11",children:a?"Saving...":l?"Update Venue":"Create Venue"})]})]})}),r.jsx(mr,{open:d,onOpenChange:w,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:["Configure Widget for ",s?.name]}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:"Add events/rooms and customize your booking widget settings"})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[S==="saving"&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[r.jsx(ia,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{className:"text-sm hidden sm:inline",children:"Saving..."})]}),S==="saved"&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[r.jsx(Lt,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm hidden sm:inline",children:"Saved "})]}),S==="error"&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[r.jsx(ln,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm hidden sm:inline",children:"Error saving"})]}),r.jsxs(W,{onClick:()=>w(!1),className:"bg-blue-600 dark:bg-[#4f46e5] hover:bg-blue-700 dark:hover:bg-[#4338ca] text-xs sm:text-sm h-9 sm:h-10",size:"sm",children:[r.jsx(Dn,{className:"w-4 h-4 sm:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Save Changes"})]})]})]})}),r.jsx(fa,{className:"flex-1 h-full",children:r.jsx("div",{className:"p-4 sm:p-6 pb-20 sm:pb-24 bg-gray-50 dark:bg-[#0a0a0a]",children:s&&r.jsx(loe,{config:s.widgetConfig,onConfigChange:T,onPreview:()=>{w(!1),N(!0)},embedContext:{embedKey:s.embedKey,primaryColor:s.primaryColor,venueName:s.name,baseUrl:typeof window<"u"?window.location.origin:"",venueId:s.id}},`widget-settings-${s.id}`)})})]})}),r.jsx(mr,{open:u,onOpenChange:N,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1400px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:["Widget Preview - ",s?.name]}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:"Live Preview - See how your booking widget will look to customers"})]}),r.jsx(De,{variant:"secondary",className:"bg-gray-100 dark:bg-[#1e1e1e] border border-gray-200 dark:border-[#2a2a2a] text-xs flex-shrink-0 hidden sm:inline-flex",children:"Widget Preview"})]})}),r.jsx(fa,{className:"flex-1 h-full",children:r.jsxs("div",{className:"p-4 sm:p-8 pb-24 sm:pb-28 bg-gray-50 dark:bg-[#0a0a0a] min-h-full",children:[s&&r.jsx(Ww,{primaryColor:s.primaryColor,config:{...s.widgetConfig,venueId:s.id,venueName:s.name,embedKey:s.embedKey}},`widget-preview-${s.id}`),r.jsx("div",{className:"h-12 sm:h-20"})]})})]})}),r.jsx(mr,{open:h,onOpenChange:C,children:r.jsxs(fr,{className:"!w-screen !h-screen !max-w-none !max-h-none sm:!w-[90vw] sm:!h-[90vh] sm:!max-w-[1200px] sm:!max-h-[90vh] !rounded-none sm:!rounded-lg overflow-hidden p-0 flex flex-col",children:[r.jsx(br,{className:"bg-white dark:bg-[#1e1e1e] border-b border-gray-200 dark:border-[#2a2a2a] p-4 sm:p-6 shrink-0",children:r.jsx("div",{className:"flex items-center justify-between gap-3",children:r.jsxs("div",{className:"min-w-0",children:[r.jsxs(pr,{className:"text-base sm:text-lg text-gray-900 dark:text-white truncate",children:["Embed Widget for ",s?.name]}),r.jsx(wr,{className:"text-xs sm:text-sm text-gray-600 dark:text-[#a3a3a3] mt-0.5 hidden sm:block",children:"Get the embed code and install the widget on your website"})]})})}),r.jsx(fa,{className:"flex-1 h-full overflow-x-hidden",children:r.jsx("div",{className:"p-2 sm:p-4 md:p-6 pb-20 sm:pb-24 bg-gray-50 dark:bg-[#0a0a0a] w-full max-w-full",children:s&&(s.embedKey?r.jsx("div",{className:"w-full max-w-full overflow-x-hidden",children:r.jsx(coe,{widgetId:"calendar",widgetName:s.name,primaryColor:s.primaryColor,embedKey:s.embedKey,widgetConfig:s.widgetConfig})}):r.jsx("div",{className:"p-4 sm:p-6 rounded-xl border border-dashed border-gray-300 dark:border-gray-700 bg-white dark:bg-[#111] text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"The embed key for this venue is still being generated. Please refresh in a few seconds and try again."}))})})]})}),r.jsx(rp,{open:c,onOpenChange:b,children:r.jsxs(sp,{children:[r.jsxs(np,{children:[r.jsx(ip,{children:"Delete Venue"}),r.jsxs(op,{children:['Are you sure you want to delete "',s?.name,'"? This action cannot be undone and will remove all associated widget configurations.']})]}),r.jsxs(ap,{children:[r.jsx(lp,{children:"Cancel"}),r.jsx(Ng,{onClick:O,className:"bg-red-600 hover:bg-red-700",children:"Delete Venue"})]})]})})]})}function RQe(){const{theme:t,setTheme:e}=Nr(),s=t==="dark",n=s?"text-white":"text-gray-900",a=s?"text-[#a3a3a3]":"text-gray-600",i=s?"border-[#2a2a2a]":"border-gray-200",o=s?"bg-[#161616]":"bg-white",l=s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[c,d]=j.useState("business"),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState(!1),[g,b]=j.useState(!1),[w,N]=j.useState({name:"BookingTMS Escape Rooms",email:"contact@bookingtms.com",phone:"+1 (555) 123-4567",timezone:"est",address:"123 Main Street, New York, NY 10001"}),[C,S]=j.useState({emailNewBookings:!0,emailCancellations:!0,emailDailyReports:!1,smsReminders:!0,smsUrgentAlerts:!1}),[A,k]=j.useState({onlinePayments:!0,autoRefunds:!1}),E=()=>{re.success("Business information saved successfully")},O=()=>{re.success("Payment settings saved successfully")},$=()=>{re.success("Notification preferences saved successfully")},T=()=>{re.success("Password updated successfully")},I=()=>{re.success("Appearance settings saved successfully")};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Settings",description:"Manage your account and business preferences",sticky:!0}),r.jsxs(wn,{value:c,onValueChange:d,className:"space-y-6",children:[r.jsxs("div",{className:`grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 ${o} border ${i} rounded-lg p-3 sm:p-4`,children:[r.jsxs("button",{onClick:()=>d("business"),className:`
              flex flex-col items-center justify-center gap-2 p-4 sm:p-6 rounded-lg border-2 transition-all min-h-[100px] sm:min-h-[120px]
              ${c==="business"?s?"bg-[#4f46e5] border-[#4f46e5] text-white shadow-lg":"bg-blue-600 border-blue-600 text-white shadow-lg":s?"bg-[#1e1e1e] border-[#2a2a2a] text-[#a3a3a3] hover:border-[#4f46e5] hover:text-white":"bg-white border-gray-300 text-gray-600 hover:border-blue-600 hover:text-gray-900"}
            `,children:[r.jsx(Na,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-center whitespace-nowrap",children:"Business Info"})]}),r.jsxs("button",{onClick:()=>d("payments"),className:`
              flex flex-col items-center justify-center gap-2 p-4 sm:p-6 rounded-lg border-2 transition-all min-h-[100px] sm:min-h-[120px]
              ${c==="payments"?s?"bg-[#4f46e5] border-[#4f46e5] text-white shadow-lg":"bg-blue-600 border-blue-600 text-white shadow-lg":s?"bg-[#1e1e1e] border-[#2a2a2a] text-[#a3a3a3] hover:border-[#4f46e5] hover:text-white":"bg-white border-gray-300 text-gray-600 hover:border-blue-600 hover:text-gray-900"}
            `,children:[r.jsx(rn,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-center whitespace-nowrap",children:"Payments"})]}),r.jsxs("button",{onClick:()=>d("notifications"),className:`
              flex flex-col items-center justify-center gap-2 p-4 sm:p-6 rounded-lg border-2 transition-all min-h-[100px] sm:min-h-[120px]
              ${c==="notifications"?s?"bg-[#4f46e5] border-[#4f46e5] text-white shadow-lg":"bg-blue-600 border-blue-600 text-white shadow-lg":s?"bg-[#1e1e1e] border-[#2a2a2a] text-[#a3a3a3] hover:border-[#4f46e5] hover:text-white":"bg-white border-gray-300 text-gray-600 hover:border-blue-600 hover:text-gray-900"}
            `,children:[r.jsx(pi,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-center whitespace-nowrap",children:"Notifications"})]}),r.jsxs("button",{onClick:()=>d("security"),className:`
              flex flex-col items-center justify-center gap-2 p-4 sm:p-6 rounded-lg border-2 transition-all min-h-[100px] sm:min-h-[120px]
              ${c==="security"?s?"bg-[#4f46e5] border-[#4f46e5] text-white shadow-lg":"bg-blue-600 border-blue-600 text-white shadow-lg":s?"bg-[#1e1e1e] border-[#2a2a2a] text-[#a3a3a3] hover:border-[#4f46e5] hover:text-white":"bg-white border-gray-300 text-gray-600 hover:border-blue-600 hover:text-gray-900"}
            `,children:[r.jsx(zs,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-center whitespace-nowrap",children:"Security"})]}),r.jsxs("button",{onClick:()=>d("appearance"),className:`
              flex flex-col items-center justify-center gap-2 p-4 sm:p-6 rounded-lg border-2 transition-all min-h-[100px] sm:min-h-[120px]
              ${c==="appearance"?s?"bg-[#4f46e5] border-[#4f46e5] text-white shadow-lg":"bg-blue-600 border-blue-600 text-white shadow-lg":s?"bg-[#1e1e1e] border-[#2a2a2a] text-[#a3a3a3] hover:border-[#4f46e5] hover:text-white":"bg-white border-gray-300 text-gray-600 hover:border-blue-600 hover:text-gray-900"}
            `,children:[r.jsx(Vf,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0"}),r.jsx("span",{className:"text-xs sm:text-sm text-center whitespace-nowrap",children:"Appearance"})]})]}),r.jsx(Bt,{value:"business",className:"space-y-6",children:r.jsxs(he,{className:`${o} border ${i} shadow-sm`,children:[r.jsxs(Ke,{className:"p-3 sm:p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:`${n} text-lg sm:text-xl`,children:"Business Information"})]}),r.jsx(Ft,{className:`${a} text-sm`,children:"Update your business details and contact information"})]}),r.jsxs(_e,{className:"space-y-4 sm:space-y-6 p-3 sm:p-4 md:p-6 pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"businessName",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4"}),"Business Name"]})}),r.jsx(de,{id:"businessName",value:w.name,onChange:L=>N({...w,name:L.target.value}),className:`h-11 sm:h-12 ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Business Email"]})}),r.jsx(de,{id:"email",type:"email",value:w.email,onChange:L=>N({...w,email:L.target.value}),className:`h-11 sm:h-12 ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]})}),r.jsx(de,{id:"phone",value:w.phone,onChange:L=>N({...w,phone:L.target.value}),className:`h-11 sm:h-12 ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"timezone",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Timezone"]})}),r.jsxs(sr,{value:w.timezone,onValueChange:L=>N({...w,timezone:L}),children:[r.jsx(ar,{className:`h-11 sm:h-12 ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"est",children:"Eastern Time (EST)"}),r.jsx(Ae,{value:"cst",children:"Central Time (CST)"}),r.jsx(Ae,{value:"mst",children:"Mountain Time (MST)"}),r.jsx(Ae,{value:"pst",children:"Pacific Time (PST)"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"address",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dl,{className:"w-4 h-4"}),"Business Address"]})}),r.jsx(de,{id:"address",value:w.address,onChange:L=>N({...w,address:L.target.value}),className:`h-11 sm:h-12 ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3",children:[r.jsx(W,{variant:"outline",className:"min-h-[44px] h-11 sm:h-12 w-full sm:w-auto",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:`min-h-[44px] h-11 sm:h-12 w-full sm:w-auto ${s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:E,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"payments",className:"space-y-6",children:r.jsxs(he,{className:`${o} border ${i} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rn,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:n,children:"Payment Gateway"})]}),r.jsx(Ft,{className:a,children:"Configure your payment processing and integrations"})]}),r.jsxs(_e,{className:"space-y-6 p-6 pt-0",children:[r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(rn,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"Stripe Integration"}),r.jsx("p",{className:`text-sm mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:"Connect your Stripe account to accept payments"})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"stripeKey",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($d,{className:"w-4 h-4"}),"Stripe Publishable Key"]})}),r.jsx(de,{id:"stripeKey",placeholder:"pk_live_...",className:`h-11 sm:h-12 font-mono text-sm ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"stripeSecret",className:`${s?"text-white":"text-gray-700"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-4 h-4"}),"Stripe Secret Key"]})}),r.jsx(de,{id:"stripeSecret",type:"password",placeholder:"sk_live_...",className:`h-11 sm:h-12 font-mono text-sm ${s?"bg-[#1e1e1e] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[r.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 rounded-lg border ${i} ${l} transition-colors gap-3`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Du,{className:`w-4 h-4 ${s?"text-emerald-400":"text-green-600"}`}),r.jsx("p",{className:`text-sm sm:text-base ${n}`,children:"Enable Online Payments"})]}),r.jsx("p",{className:`text-xs sm:text-sm ${a}`,children:"Accept credit card payments online"})]}),r.jsx(Rt,{checked:A.onlinePayments,onCheckedChange:L=>k({...A,onlinePayments:L}),className:"flex-shrink-0 self-end sm:self-auto"})]}),r.jsxs("div",{className:`flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 rounded-lg border ${i} ${l} transition-colors gap-3`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Lt,{className:`w-4 h-4 ${a}`}),r.jsx("p",{className:`text-sm sm:text-base ${n}`,children:"Automatic Refunds"})]}),r.jsx("p",{className:`text-xs sm:text-sm ${a}`,children:"Process refunds automatically when bookings are cancelled"})]}),r.jsx(Rt,{checked:A.autoRefunds,onCheckedChange:L=>k({...A,autoRefunds:L}),className:"flex-shrink-0 self-end sm:self-auto"})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:O,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"notifications",className:"space-y-6",children:r.jsxs(he,{className:`${o} border ${i} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pi,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:n,children:"Notification Preferences"})]}),r.jsx(Ft,{className:a,children:"Choose how you want to be notified about important events"})]}),r.jsxs(_e,{className:"space-y-6 p-6 pt-0",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Ds,{className:`w-4 h-4 ${a}`}),r.jsx("h3",{className:`text-sm ${n}`,children:"Email Notifications"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"New Bookings"}),r.jsx("p",{className:`text-sm ${a}`,children:"Get notified when a new booking is made"})]}),r.jsx(Rt,{checked:C.emailNewBookings,onCheckedChange:L=>S({...C,emailNewBookings:L})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Booking Cancellations"}),r.jsx("p",{className:`text-sm ${a}`,children:"Get notified when a booking is cancelled"})]}),r.jsx(Rt,{checked:C.emailCancellations,onCheckedChange:L=>S({...C,emailCancellations:L})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Daily Reports"}),r.jsx("p",{className:`text-sm ${a}`,children:"Receive daily summary reports"})]}),r.jsx(Rt,{checked:C.emailDailyReports,onCheckedChange:L=>S({...C,emailDailyReports:L})})]})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Xf,{className:`w-4 h-4 ${a}`}),r.jsx("h3",{className:`text-sm ${n}`,children:"SMS Notifications"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Booking Reminders"}),r.jsx("p",{className:`text-sm ${a}`,children:"Send SMS reminders to customers"})]}),r.jsx(Rt,{checked:C.smsReminders,onCheckedChange:L=>S({...C,smsReminders:L})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Urgent Alerts"}),r.jsx("p",{className:`text-sm ${a}`,children:"Get SMS for urgent issues"})]}),r.jsx(Rt,{checked:C.smsUrgentAlerts,onCheckedChange:L=>S({...C,smsUrgentAlerts:L})})]})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:$,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"security",className:"space-y-6",children:r.jsxs(he,{className:`${o} border ${i} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zs,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:n,children:"Security Settings"})]}),r.jsx(Ft,{className:a,children:"Manage your account security and password"})]}),r.jsxs(_e,{className:"space-y-6 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"currentPassword",className:n,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-4 h-4"}),"Current Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"currentPassword",type:u?"text":"password",className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>h(!u),children:u?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"newPassword",className:n,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($d,{className:"w-4 h-4"}),"New Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"newPassword",type:m?"text":"password",className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>f(!m),children:m?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"confirmPassword",className:n,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-4 h-4"}),"Confirm New Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"confirmPassword",type:v?"text":"password",className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>x(!v),children:v?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(zs,{className:`w-4 h-4 ${s?"text-emerald-400":"text-green-600"}`}),r.jsx("p",{className:`text-sm ${n}`,children:"Two-Factor Authentication"}),g&&r.jsx(De,{className:s?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:"Enabled"})]}),r.jsx("p",{className:`text-sm ${a}`,children:"Add an extra layer of security to your account"})]}),r.jsx(Rt,{checked:g,onCheckedChange:b})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:T,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Update Password"]})]})]})]})}),r.jsx(Bt,{value:"appearance",className:"space-y-6",children:r.jsxs(he,{className:`${o} border ${i} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vf,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:n,children:"Appearance Settings"})]}),r.jsx(Ft,{className:a,children:"Customize how the dashboard looks and feels"})]}),r.jsxs(_e,{className:"space-y-6 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:n,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vf,{className:"w-4 h-4"}),"Theme Mode"]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>e("light"),className:`p-4 rounded-lg border-2 transition-all ${t==="light"?s?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":s?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(mw,{className:`w-6 h-6 mx-auto mb-2 ${t==="light"?s?"text-[#6366f1]":"text-blue-600":a}`}),r.jsx("p",{className:`text-sm ${n}`,children:"Light"})]}),r.jsxs("button",{onClick:()=>e("dark"),className:`p-4 rounded-lg border-2 transition-all ${t==="dark"?s?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":s?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Vv,{className:`w-6 h-6 mx-auto mb-2 ${t==="dark"?s?"text-[#6366f1]":"text-blue-600":a}`}),r.jsx("p",{className:`text-sm ${n}`,children:"Dark"})]}),r.jsxs("button",{onClick:()=>e("system"),className:`p-4 rounded-lg border-2 transition-all ${t==="system"?s?"border-[#4f46e5] bg-[#4f46e5]/10":"border-blue-600 bg-blue-50":s?`border-[#2a2a2a] ${l}`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Yx,{className:`w-6 h-6 mx-auto mb-2 ${t==="system"?s?"text-[#6366f1]":"text-blue-600":a}`}),r.jsx("p",{className:`text-sm ${n}`,children:"System"})]})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:n,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ul,{className:"w-4 h-4"}),"Sidebar Position"]})}),r.jsxs(sr,{defaultValue:"left",children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"left",children:"Left"}),r.jsx(Ae,{value:"right",children:"Right"})]})]})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${i} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ml,{className:`w-4 h-4 ${a}`}),r.jsx("p",{className:`text-sm ${n}`,children:"Compact Mode"})]}),r.jsx("p",{className:`text-sm ${a}`,children:"Reduce spacing for more content on screen"})]}),r.jsx(Rt,{})]}),r.jsx(Ze,{className:i}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:s?"#4f46e5":void 0},className:s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:I,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]})]})}function MQe({onNavigate:t}={}){const{theme:e}=Nr(),{currentUser:s}=no(),n=e==="dark",[a,i]=j.useState(!0),o=n?"text-white":"text-gray-900",l=n?"text-[#a3a3a3]":"text-gray-600",c=n?"border-[#2a2a2a]":"border-gray-200",d=n?"bg-[#161616]":"bg-white",u=n?"bg-[#1e1e1e]":"bg-gray-50",h=n?"hover:shadow-[0_0_15px_rgba(79,70,229,0.1)]":"hover:shadow-md",[m,f]=j.useState({name:"",email:"",phone:"",role:"",company:"",location:"",joinDate:"",plan:"Professional",status:"Active",avatar:lv}),[v,x]=j.useState({bookings:{current:0,limit:60},games:{current:0,limit:15},staff:{current:0,limit:25},aiConversations:{current:0,limit:60},credits:{current:0,limit:200}});j.useEffect(()=>{g()},[s]);const g=async()=>{if(s)try{i(!0);const{data:S,error:A}=await Wr.from("user_profiles").select("*").eq("id",s.id).single();if(A&&A.code!=="PGRST116")throw A;const{data:{user:k}}=await Wr.auth.getUser();if(S){const E=S.first_name||"",O=S.last_name||"",$=`${E} ${O}`.trim()||"User",T=S.metadata?.city||"",I=S.metadata?.state||"",L=T&&I?`${T}, ${I}`:T||I||"Not set",z=S.created_at?new Date(S.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Recently";f({name:$,email:k?.email||"",phone:S.phone||"Not set",role:b(S.role),company:S.company||"Not set",location:L,joinDate:z,plan:"Professional",status:S.status==="active"?"Active":"Inactive",avatar:S.metadata?.avatar||lv})}await w()}catch(S){console.error("Error loading account data:",S),re.error("Failed to load account data")}finally{i(!1)}},b=S=>({"super-admin":"Super Admin",admin:"Admin","beta-owner":"Beta Owner",manager:"Manager",staff:"Staff"})[S]||S,w=async()=>{try{const S=new Date;S.setDate(1),S.setHours(0,0,0,0);const{count:A}=await Wr.from("bookings").select("*",{count:"exact",head:!0}).gte("created_at",S.toISOString()),{count:k}=await Wr.from("games").select("*",{count:"exact",head:!0}),{count:E}=await Wr.from("user_profiles").select("*",{count:"exact",head:!0}).in("role",["staff","manager","admin"]);x({bookings:{current:A||0,limit:60},games:{current:k||0,limit:15},staff:{current:E||0,limit:25},aiConversations:{current:0,limit:60},credits:{current:0,limit:200}})}catch(S){console.error("Error loading usage stats:",S)}},[N]=j.useState([{action:"Created new game",details:"The Haunted Manor",time:"2 hours ago",icon:cl},{action:"Added staff member",details:"Sarah Johnson - Manager",time:"5 hours ago",icon:Xr},{action:"Updated billing information",details:"Payment method updated",time:"1 day ago",icon:rn},{action:"Generated report",details:"Monthly Revenue Report",time:"2 days ago",icon:Pu},{action:"Modified waiver template",details:"Standard Liability Waiver",time:"3 days ago",icon:zs}]),C=(S,A)=>S/A*100;return a?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"Loading account..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"My Account",description:"Manage your account information and preferences",sticky:!0}),r.jsx(he,{className:`${d} border ${c} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6 w-full",children:[r.jsxs(oh,{className:"w-24 h-24",children:[r.jsx(lh,{src:m.avatar}),r.jsx(ch,{className:`text-2xl ${n?"bg-[#4f46e5] text-white":"bg-blue-600 text-white"}`,children:m.name.split(" ").map(S=>S[0]).join("")})]}),r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[r.jsx("h2",{className:o,children:m.name}),r.jsxs(De,{className:n?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),m.status]})]}),r.jsxs("p",{className:l,children:[m.role,"  ",m.company]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-3",children:[r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(Ds,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:m.email})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(la,{className:"w-4 h-4 flex-shrink-0"}),m.phone]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(Na,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:m.company})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(dl,{className:"w-4 h-4 flex-shrink-0"}),m.location]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(qs,{className:"w-4 h-4 flex-shrink-0"}),"Member since ",m.joinDate]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${l}`,children:[r.jsx(zs,{className:"w-4 h-4 flex-shrink-0"}),m.plan," Plan"]})]})]})]}),r.jsxs(W,{variant:"outline",className:"w-full sm:w-auto h-11",onClick:()=>t?.("profile"),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})})}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${d} border ${c} shadow-sm ${h} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${l}`,children:"Bookings This Month"}),r.jsx("p",{className:`text-2xl mt-2 ${o}`,children:v.bookings.current})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${n?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(qs,{className:`w-6 h-6 ${n?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${d} border ${c} shadow-sm ${h} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${l}`,children:"Active Games"}),r.jsx("p",{className:`text-2xl mt-2 ${o}`,children:"8"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${n?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(cl,{className:`w-6 h-6 ${n?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${d} border ${c} shadow-sm ${h} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${l}`,children:"Team Members"}),r.jsx("p",{className:`text-2xl mt-2 ${o}`,children:"12"})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${n?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(Xr,{className:`w-6 h-6 ${n?"text-purple-400":"text-purple-600"}`})})]})})}),r.jsx(he,{className:`${d} border ${c} shadow-sm ${h} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${l}`,children:"AI Conversations"}),r.jsx("p",{className:`text-2xl mt-2 ${o}`,children:v.aiConversations.current})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${n?"bg-orange-500/20":"bg-orange-100"}`,children:r.jsx(Pu,{className:`w-6 h-6 ${n?"text-orange-400":"text-orange-600"}`})})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${d} border ${c} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:o,children:"Usage & Limits"}),r.jsx(Ft,{className:l,children:"Current usage across your account"})]}),r.jsxs(_e,{className:"space-y-6 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${l}`,children:[r.jsx("span",{children:"Bookings this month"}),r.jsxs("span",{className:o,children:[v.bookings.current.toLocaleString()," / ",v.bookings.limit.toLocaleString()]})]}),r.jsx(vm,{value:C(v.bookings.current,v.bookings.limit),className:"h-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${l}`,children:[r.jsx("span",{children:"Active Games"}),r.jsxs("span",{className:o,children:[v.games.current," / ",v.games.limit]})]}),r.jsx(vm,{value:C(v.games.current,v.games.limit),className:"h-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${l}`,children:[r.jsx("span",{children:"Staff Members"}),r.jsxs("span",{className:o,children:[v.staff.current," / ",v.staff.limit]})]}),r.jsx(vm,{value:C(v.staff.current,v.staff.limit),className:"h-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${l}`,children:[r.jsx("span",{children:"AI Conversations"}),r.jsxs("span",{className:o,children:[v.aiConversations.current.toLocaleString()," / ",v.aiConversations.limit.toLocaleString()]})]}),r.jsx(vm,{value:C(v.aiConversations.current,v.aiConversations.limit),className:"h-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${l}`,children:[r.jsx("span",{children:"Credits Used"}),r.jsxs("span",{className:o,children:[v.credits.current," / ",v.credits.limit]})]}),r.jsx(vm,{value:C(v.credits.current,v.credits.limit),className:"h-2"})]}),r.jsx(Ze,{className:c}),r.jsxs(W,{variant:"outline",className:"w-full h-11",children:[r.jsx(Wn,{className:"w-4 h-4 mr-2"}),"Upgrade Plan"]})]})]}),r.jsxs(he,{className:`${d} border ${c} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:o,children:"Recent Activity"}),r.jsx(Ft,{className:l,children:"Your latest actions and changes"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsx("div",{className:"space-y-4",children:N.map((S,A)=>{const k=S.icon;return r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${u}`,children:r.jsx(k,{className:`w-5 h-5 ${l}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm ${o}`,children:S.action}),r.jsx("p",{className:`text-xs ${l}`,children:S.details}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(jr,{className:`w-3 h-3 ${n?"text-[#737373]":"text-gray-400"}`}),r.jsx("p",{className:`text-xs ${n?"text-[#737373]":"text-gray-500"}`,children:S.time})]})]})]},A)})})})]})]}),r.jsx(he,{className:`border shadow-sm ${n?"border-emerald-500/30 bg-emerald-500/10":"border-green-200 bg-green-50"}`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Lt,{className:`w-6 h-6 mt-0.5 flex-shrink-0 ${n?"text-emerald-400":"text-green-600"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:n?"text-emerald-300":"text-green-900",children:"Account in Good Standing"}),r.jsx("p",{className:`text-sm mt-1 ${n?"text-emerald-400/70":"text-green-700"}`,children:"Your account is active and all services are running smoothly. Next billing date: December 15, 2025"})]})]})})})]})}function LQe(){const{theme:t}=Nr(),{currentUser:e}=no(),s=t==="dark",[n,a]=j.useState(!1),[i,o]=j.useState(!0),l=s?"text-white":"text-gray-900",c=s?"text-[#a3a3a3]":"text-gray-600",d=s?"border-[#2a2a2a]":"border-gray-200",u=s?"bg-[#161616]":"bg-white",h=s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[m,f]=j.useState("personal"),[v,x]=j.useState(!1),[g,b]=j.useState(!1),[w,N]=j.useState(!1),[C,S]=j.useState(!1),[A,k]=j.useState(!1),[E,O]=j.useState(!1),[$,T]=j.useState(!1),[I,L]=j.useState({firstName:"",lastName:"",email:"",phone:"",company:"",address:"",city:"",state:"",zip:"",country:"United States",timezone:"America/Los_Angeles",language:"en",avatar:lv}),[z,M]=j.useState(""),[V,B]=j.useState(""),[F,J]=j.useState(""),[ee,q]=j.useState("mm/dd/yyyy"),[U,Z]=j.useState("12"),[K,se]=j.useState("usd"),[ne,ie]=j.useState({emailBookings:!0,emailReports:!0,emailMarketing:!1,pushBookings:!0,pushStaff:!0,smsBookings:!1,smsReminders:!0}),[be,ue]=j.useState({twoFactorEnabled:!1,sessionTimeout:"30",loginAlerts:!0});j.useEffect(()=>{oe()},[e]);const oe=async()=>{if(e)try{o(!0);const{data:xe,error:mt}=await Wr.from("user_profiles").select("*").eq("id",e.id).single();if(mt&&mt.code!=="PGRST116")throw mt;const{data:{user:Ue}}=await Wr.auth.getUser();xe?(L({firstName:xe.first_name||"",lastName:xe.last_name||"",email:Ue?.email||"",phone:xe.phone||"",company:xe.company||"",address:xe.metadata?.address||"",city:xe.metadata?.city||"",state:xe.metadata?.state||"",zip:xe.metadata?.zip||"",country:xe.metadata?.country||"United States",timezone:xe.metadata?.timezone||"America/Los_Angeles",language:xe.metadata?.language||"en",avatar:xe.metadata?.avatar||lv}),xe.metadata?.notifications&&ie(xe.metadata.notifications),xe.metadata?.security&&ue(xe.metadata.security),xe.metadata?.preferences&&(q(xe.metadata.preferences.dateFormat||"mm/dd/yyyy"),Z(xe.metadata.preferences.timeFormat||"12"),se(xe.metadata.preferences.currency||"usd"))):L(xt=>({...xt,email:Ue?.email||""}))}catch(xe){console.error("Error loading profile:",xe),re.error("Failed to load profile")}finally{o(!1)}},pe=async()=>{if(e)try{a(!0);const xe={address:I.address,city:I.city,state:I.state,zip:I.zip,country:I.country,timezone:I.timezone,language:I.language,avatar:I.avatar,notifications:ne,security:be,preferences:{dateFormat:ee,timeFormat:U,currency:K}},{error:mt}=await Wr.from("user_profiles").upsert({id:e.id,first_name:I.firstName,last_name:I.lastName,phone:I.phone,company:I.company,metadata:xe,updated_at:new Date().toISOString()});if(mt)throw mt;if(I.email!==e.email){const{error:Ue}=await Wr.auth.updateUser({email:I.email});if(Ue)throw Ue;re.info("Verification email sent to new address")}k(!0),re.success("Profile settings saved successfully"),setTimeout(()=>{k(!1)},1500),await oe()}catch(xe){console.error("Error saving profile:",xe),re.error(xe.message||"Failed to save profile")}finally{a(!1)}},ye=async()=>{if(e)try{a(!0);const{data:xe}=await Wr.from("user_profiles").select("metadata").eq("id",e.id).single(),mt={...xe?.metadata||{},notifications:ne},{error:Ue}=await Wr.from("user_profiles").update({metadata:mt,updated_at:new Date().toISOString()}).eq("id",e.id);if(Ue)throw Ue;S(!0),re.success("Notification preferences updated"),setTimeout(()=>{S(!1)},1500)}catch(xe){console.error("Error saving notifications:",xe),re.error(xe.message||"Failed to save notifications")}finally{a(!1)}},$e=async()=>{if(e)try{a(!0);const{data:xe}=await Wr.from("user_profiles").select("metadata").eq("id",e.id).single(),mt={...xe?.metadata||{},security:be},{error:Ue}=await Wr.from("user_profiles").update({metadata:mt,updated_at:new Date().toISOString()}).eq("id",e.id);if(Ue)throw Ue;O(!0),re.success("Security settings updated"),setTimeout(()=>{O(!1)},1500)}catch(xe){console.error("Error saving security:",xe),re.error(xe.message||"Failed to save security settings")}finally{a(!1)}},Se=async()=>{if(e)try{a(!0);const{data:xe}=await Wr.from("user_profiles").select("metadata").eq("id",e.id).single(),mt={...xe?.metadata||{},timezone:I.timezone,language:I.language,preferences:{dateFormat:ee,timeFormat:U,currency:K}},{error:Ue}=await Wr.from("user_profiles").update({metadata:mt,updated_at:new Date().toISOString()}).eq("id",e.id);if(Ue)throw Ue;T(!0),re.success("Preferences saved successfully"),setTimeout(()=>{T(!1)},1500)}catch(xe){console.error("Error saving preferences:",xe),re.error(xe.message||"Failed to save preferences")}finally{a(!1)}},Y=async()=>{if(!V||!F){re.error("Please fill in all password fields");return}if(V!==F){re.error("New passwords do not match");return}if(V.length<6){re.error("Password must be at least 6 characters");return}try{a(!0);const{error:xe}=await Wr.auth.updateUser({password:V});if(xe)throw xe;re.success("Password updated successfully"),M(""),B(""),J("")}catch(xe){console.error("Error updating password:",xe),re.error(xe.message||"Failed to update password")}finally{a(!1)}},Le=async()=>{const xe=document.createElement("input");xe.type="file",xe.accept="image/*",xe.onchange=async mt=>{const Ue=mt.target?.files?.[0];if(Ue){if(Ue.size>2*1024*1024){re.error("File size must be less than 2MB");return}try{a(!0);const xt=Ue.name.split(".").pop(),Ot=`avatars/${`${e?.id}-${Date.now()}.${xt}`}`,{error:tt}=await Wr.storage.from("profile-photos").upload(Ot,Ue,{cacheControl:"3600",upsert:!0});if(tt)throw tt;const{data:{publicUrl:st}}=Wr.storage.from("profile-photos").getPublicUrl(Ot),{data:At}=await Wr.from("user_profiles").select("metadata").eq("id",e?.id).single(),Yt={...At?.metadata||{},avatar:st},{error:yr}=await Wr.from("user_profiles").update({metadata:Yt,updated_at:new Date().toISOString()}).eq("id",e?.id);if(yr)throw yr;L(Zt=>({...Zt,avatar:st})),re.success("Profile photo updated")}catch(xt){console.error("Error uploading photo:",xt),re.error(xt.message||"Failed to upload photo")}finally{a(!1)}}},xe.click()};return i?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:s?"text-gray-400":"text-gray-600",children:"Loading profile..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Profile Settings",description:"Manage your personal information and preferences",sticky:!0}),r.jsxs(wn,{value:m,onValueChange:f,className:"w-full",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(kn,{className:"w-full sm:w-auto",children:[r.jsxs(Tt,{value:"personal",className:"gap-2",children:[r.jsx(ma,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Personal Info"}),r.jsx("span",{className:"sm:hidden",children:"Info"})]}),r.jsxs(Tt,{value:"security",className:"gap-2",children:[r.jsx(zs,{className:"w-4 h-4"}),"Security"]}),r.jsxs(Tt,{value:"notifications",className:"gap-2",children:[r.jsx(pi,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Notifications"}),r.jsx("span",{className:"sm:hidden",children:"Notif"})]}),r.jsxs(Tt,{value:"preferences",className:"gap-2",children:[r.jsx(Vf,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Preferences"}),r.jsx("span",{className:"sm:hidden",children:"Prefs"})]})]})}),r.jsxs(Bt,{value:"personal",className:"space-y-6 mt-6",children:[r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gx,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Profile Photo"})]}),r.jsx(Ft,{className:c,children:"Update your profile picture"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[r.jsxs("div",{className:"relative",children:[r.jsxs(oh,{className:"w-24 h-24",children:[r.jsx(lh,{src:I.avatar}),r.jsxs(ch,{className:`text-2xl ${s?"bg-[#4f46e5] text-white":"bg-blue-600 text-white"}`,children:[I.firstName[0],I.lastName[0]]})]}),r.jsx("button",{onClick:Le,className:`absolute bottom-0 right-0 w-8 h-8 rounded-full flex items-center justify-center border-2 shadow-lg transition-colors ${s?"bg-[#4f46e5] border-[#161616] hover:bg-[#4338ca]":"bg-blue-600 border-white hover:bg-blue-700"}`,children:r.jsx(Gx,{className:"w-4 h-4 text-white"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(W,{variant:"outline",className:"h-11",onClick:Le,children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Upload New Photo"]}),r.jsx("p",{className:`text-xs ${c}`,children:"JPG, PNG or GIF. Max size 2MB."})]})]})})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ma,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Basic Information"})]}),r.jsx(Ft,{className:c,children:"Update your personal details"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"firstName",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ma,{className:"w-4 h-4"}),"First Name"]})}),r.jsx(de,{id:"firstName",value:I.firstName,onChange:xe=>L({...I,firstName:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"lastName",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ma,{className:"w-4 h-4"}),"Last Name"]})}),r.jsx(de,{id:"lastName",value:I.lastName,onChange:xe=>L({...I,lastName:xe.target.value}),className:"h-11"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:"w-4 h-4"}),"Email Address"]})}),r.jsx(de,{id:"email",type:"email",value:I.email,onChange:xe=>L({...I,email:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(la,{className:"w-4 h-4"}),"Phone Number"]})}),r.jsx(de,{id:"phone",type:"tel",value:I.phone,onChange:xe=>L({...I,phone:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"company",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-4 h-4"}),"Company Name"]})}),r.jsx(de,{id:"company",value:I.company,onChange:xe=>L({...I,company:xe.target.value}),className:"h-11"})]})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dl,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Address Information"})]}),r.jsx(Ft,{className:c,children:"Your business location details"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"address",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dl,{className:"w-4 h-4"}),"Street Address"]})}),r.jsx(de,{id:"address",value:I.address,onChange:xe=>L({...I,address:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"city",className:l,children:"City"}),r.jsx(de,{id:"city",value:I.city,onChange:xe=>L({...I,city:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"state",className:l,children:"State"}),r.jsx(de,{id:"state",value:I.state,onChange:xe=>L({...I,state:xe.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"zip",className:l,children:"ZIP Code"}),r.jsx(de,{id:"zip",value:I.zip,onChange:xe=>L({...I,zip:xe.target.value}),className:"h-11"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"country",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ml,{className:"w-4 h-4"}),"Country"]})}),r.jsxs(sr,{value:I.country,onValueChange:xe=>L({...I,country:xe}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"United States",children:"United States"}),r.jsx(Ae,{value:"Canada",children:"Canada"}),r.jsx(Ae,{value:"United Kingdom",children:"United Kingdom"}),r.jsx(Ae,{value:"Australia",children:"Australia"})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",disabled:n||A,children:"Cancel"}),r.jsx(W,{style:{backgroundColor:A?"#10b981":s?"#4f46e5":void 0},className:A?"text-white hover:opacity-90":s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:pe,disabled:n||A,children:A?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}),r.jsxs(Bt,{value:"security",className:"space-y-6 mt-6",children:[r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Change Password"})]}),r.jsx(Ft,{className:c,children:"Update your account password"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"currentPassword",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mn,{className:"w-4 h-4"}),"Current Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"currentPassword",type:v?"text":"password",value:z,onChange:xe=>M(xe.target.value),className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>x(!v),children:v?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"newPassword",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($d,{className:"w-4 h-4"}),"New Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"newPassword",type:g?"text":"password",value:V,onChange:xe=>B(xe.target.value),className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>b(!g),children:g?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"confirmPassword",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-4 h-4"}),"Confirm New Password"]})}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"confirmPassword",type:w?"text":"password",value:F,onChange:xe=>J(xe.target.value),className:"h-11 pr-10"}),r.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-11 w-11",onClick:()=>N(!w),children:w?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsx(Ze,{className:d}),r.jsxs(W,{variant:"outline",onClick:Y,className:"h-11",children:[r.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Change Password"]})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zs,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Two-Factor Authentication"})]}),r.jsx(Ft,{className:c,children:"Add an extra layer of security to your account"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(zs,{className:`w-4 h-4 ${s?"text-emerald-400":"text-green-600"}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Enable Two-Factor Authentication"}),be.twoFactorEnabled&&r.jsx(De,{className:s?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:"Enabled"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Require a verification code in addition to your password"})]}),r.jsx(Rt,{checked:be.twoFactorEnabled,onCheckedChange:xe=>ue({...be,twoFactorEnabled:xe})})]}),be.twoFactorEnabled&&r.jsx("div",{className:`p-4 rounded-lg border ${s?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(zs,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-[#e0e7ff]":"text-blue-900"}`,children:"Two-Factor Authentication Active"}),r.jsx("p",{className:`text-xs mt-1 ${s?"text-[#c7d2fe]":"text-blue-700"}`,children:"Your account is protected with 2FA. You'll need your authentication app to sign in."})]})]})})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Session Settings"})]}),r.jsx(Ft,{className:c,children:"Manage your login sessions and alerts"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"sessionTimeout",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Session Timeout"]})}),r.jsxs(sr,{value:be.sessionTimeout,onValueChange:xe=>ue({...be,sessionTimeout:xe}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"15",children:"15 minutes"}),r.jsx(Ae,{value:"30",children:"30 minutes"}),r.jsx(Ae,{value:"60",children:"1 hour"}),r.jsx(Ae,{value:"120",children:"2 hours"}),r.jsx(Ae,{value:"never",children:"Never"})]})]})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(hs,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Login Alerts"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Get notified of new login attempts from unrecognized devices"})]}),r.jsx(Rt,{checked:be.loginAlerts,onCheckedChange:xe=>ue({...be,loginAlerts:xe})})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",disabled:E,children:"Cancel"}),r.jsx(W,{style:{backgroundColor:E?"#10b981":s?"#4f46e5":void 0},className:E?"text-white hover:opacity-90":s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:$e,disabled:E,children:E?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Security Settings"]})})]})]}),r.jsxs(Bt,{value:"notifications",className:"space-y-6 mt-6",children:[r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ds,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Email Notifications"})]}),r.jsx(Ft,{className:c,children:"Manage your email notification preferences"})]}),r.jsxs(_e,{className:"space-y-3 p-6 pt-0",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(pi,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Booking Notifications"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"New bookings, cancellations, and modifications"})]}),r.jsx(Rt,{checked:ne.emailBookings,onCheckedChange:xe=>ie({...ne,emailBookings:xe})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Pu,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Reports & Analytics"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Daily, weekly, and monthly reports"})]}),r.jsx(Rt,{checked:ne.emailReports,onCheckedChange:xe=>ie({...ne,emailReports:xe})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Ws,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Marketing & Updates"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Product updates, tips, and promotional content"})]}),r.jsx(Rt,{checked:ne.emailMarketing,onCheckedChange:xe=>ie({...ne,emailMarketing:xe})})]})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pi,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Push Notifications"})]}),r.jsx(Ft,{className:c,children:"In-app and browser notifications"})]}),r.jsxs(_e,{className:"space-y-3 p-6 pt-0",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Lt,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"New Bookings"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Instant alerts for new bookings"})]}),r.jsx(Rt,{checked:ne.pushBookings,onCheckedChange:xe=>ie({...ne,pushBookings:xe})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ma,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Staff Updates"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Staff check-ins and schedule changes"})]}),r.jsx(Rt,{checked:ne.pushStaff,onCheckedChange:xe=>ie({...ne,pushStaff:xe})})]})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xf,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"SMS Notifications"})]}),r.jsx(Ft,{className:c,children:"Text message alerts"})]}),r.jsxs(_e,{className:"space-y-3 p-6 pt-0",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(hs,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Booking Alerts"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Critical booking updates via SMS"})]}),r.jsx(Rt,{checked:ne.smsBookings,onCheckedChange:xe=>ie({...ne,smsBookings:xe})})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${d} ${h} transition-colors`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(jr,{className:`w-4 h-4 ${c}`}),r.jsx("p",{className:`text-sm ${l}`,children:"Reminders"})]}),r.jsx("p",{className:`text-xs ${c}`,children:"Upcoming booking reminders"})]}),r.jsx(Rt,{checked:ne.smsReminders,onCheckedChange:xe=>ie({...ne,smsReminders:xe})})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",children:"Cancel"}),r.jsx(W,{style:{backgroundColor:C?"#10b981":s?"#4f46e5":"#2563eb"},className:"text-white hover:opacity-90 transition-all duration-300",onClick:ye,disabled:C,children:C?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Notification Settings"]})})]})]}),r.jsxs(Bt,{value:"preferences",className:"space-y-6 mt-6",children:[r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ml,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Regional Settings"})]}),r.jsx(Ft,{className:c,children:"Set your timezone and language preferences"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"timezone",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Timezone"]})}),r.jsxs(sr,{value:I.timezone,onValueChange:xe=>L({...I,timezone:xe}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),r.jsx(Ae,{value:"America/Denver",children:"Mountain Time (MT)"}),r.jsx(Ae,{value:"America/Chicago",children:"Central Time (CT)"}),r.jsx(Ae,{value:"America/New_York",children:"Eastern Time (ET)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"language",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ml,{className:"w-4 h-4"}),"Language"]})}),r.jsxs(sr,{value:I.language,onValueChange:xe=>L({...I,language:xe}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"en",children:"English"}),r.jsx(Ae,{value:"es",children:"Espaol"}),r.jsx(Ae,{value:"fr",children:"Franais"}),r.jsx(Ae,{value:"de",children:"Deutsch"})]})]})]})]})]}),r.jsxs(he,{className:`${u} border ${d} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vf,{className:`w-5 h-5 ${s?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:l,children:"Display Preferences"})]}),r.jsx(Ft,{className:c,children:"Customize how information is displayed"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"dateFormat",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qs,{className:"w-4 h-4"}),"Date Format"]})}),r.jsxs(sr,{value:ee,onValueChange:q,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"mm/dd/yyyy",children:"MM/DD/YYYY"}),r.jsx(Ae,{value:"dd/mm/yyyy",children:"DD/MM/YYYY"}),r.jsx(Ae,{value:"yyyy-mm-dd",children:"YYYY-MM-DD"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"timeFormat",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4"}),"Time Format"]})}),r.jsxs(sr,{value:U,onValueChange:Z,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"12",children:"12-hour (2:30 PM)"}),r.jsx(Ae,{value:"24",children:"24-hour (14:30)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"currency",className:l,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(In,{className:"w-4 h-4"}),"Currency"]})}),r.jsxs(sr,{value:K,onValueChange:se,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"usd",children:"USD ($)"}),r.jsx(Ae,{value:"eur",children:"EUR ()"}),r.jsx(Ae,{value:"gbp",children:"GBP ()"}),r.jsx(Ae,{value:"cad",children:"CAD ($)"})]})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:"h-11",disabled:$,children:"Cancel"}),r.jsx(W,{style:{backgroundColor:$?"#10b981":s?"#4f46e5":void 0},className:$?"text-white hover:opacity-90":s?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:Se,disabled:$,children:$?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})]})]})]})]})}function FQe(){const{currentUser:t,logout:e}=no(),{theme:s}=Nr(),n=s==="dark",[a,i]=j.useState("profile"),[o,l]=j.useState(!1),[c,d]=j.useState(!0),[u,h]=j.useState(null),[m,f]=j.useState(""),[v,x]=j.useState(""),[g,b]=j.useState(""),[w,N]=j.useState(""),[C,S]=j.useState(""),[A,k]=j.useState(""),[E,O]=j.useState(""),[$,T]=j.useState(""),[I,L]=j.useState(!1),[z,M]=j.useState(!1),[V,B]=j.useState(!1),[F,J]=j.useState(!0),[ee,q]=j.useState(!0),[U,Z]=j.useState(!1);j.useEffect(()=>{K()},[t]);const K=async()=>{if(t)try{d(!0);const{data:pe,error:ye}=await Wr.from("user_profiles").select("*").eq("id",t.id).single();ye?(console.error("Error loading profile:",ye),ye.code==="PGRST116"&&await se()):pe&&(h(pe),f(pe.first_name||""),x(pe.last_name||""),N(pe.phone||""),S(pe.company||""));const{data:{user:$e}}=await Wr.auth.getUser();$e&&b($e.email||""),pe?.metadata&&(J(pe.metadata.emailNotifications??!0),q(pe.metadata.pushNotifications??!0),Z(pe.metadata.smsNotifications??!1))}catch(pe){console.error("Error loading user profile:",pe),re.error("Failed to load profile")}finally{d(!1)}},se=async()=>{if(t)try{const{error:pe}=await Wr.from("user_profiles").insert({id:t.id,role:t.role||"staff",status:"active",metadata:{}});if(pe)throw pe;await K()}catch(pe){console.error("Error creating profile:",pe)}},ne=async()=>{if(t)try{l(!0);const{error:pe}=await Wr.from("user_profiles").update({first_name:m,last_name:v,phone:w,company:C,updated_at:new Date().toISOString()}).eq("id",t.id);if(pe)throw pe;if(g!==t.email){const{error:ye}=await Wr.auth.updateUser({email:g});if(ye)throw ye;re.info("Verification email sent to new address")}re.success("Profile updated successfully"),await K()}catch(pe){console.error("Error updating profile:",pe),re.error(pe.message||"Failed to update profile")}finally{l(!1)}},ie=async()=>{if(!E||!$){re.error("Please fill in all password fields");return}if(E!==$){re.error("New passwords do not match");return}if(E.length<6){re.error("Password must be at least 6 characters");return}try{l(!0);const{error:pe}=await Wr.auth.updateUser({password:E});if(pe)throw pe;re.success("Password updated successfully"),k(""),O(""),T("")}catch(pe){console.error("Error updating password:",pe),re.error(pe.message||"Failed to update password")}finally{l(!1)}},be=async()=>{if(t)try{l(!0);const pe={...u?.metadata||{},emailNotifications:F,pushNotifications:ee,smsNotifications:U},{error:ye}=await Wr.from("user_profiles").update({metadata:pe,updated_at:new Date().toISOString()}).eq("id",t.id);if(ye)throw ye;re.success("Notification preferences updated"),await K()}catch(pe){console.error("Error updating notifications:",pe),re.error(pe.message||"Failed to update preferences")}finally{l(!1)}},ue=pe=>{const ye={"super-admin":{label:"Super Admin",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",icon:lc},admin:{label:"Admin",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:zs},"beta-owner":{label:"Beta Owner",color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",icon:OY},manager:{label:"Manager",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:Xr},staff:{label:"Staff",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",icon:ma}},$e=ye[pe]||ye.staff,Se=$e.icon;return r.jsxs(De,{className:`${$e.color} border-0 gap-1`,children:[r.jsx(Se,{className:"w-3 h-3"}),$e.label]})},oe=(pe,ye)=>`${pe.charAt(0)}${ye.charAt(0)}`.toUpperCase();return c?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"Loading profile..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"My Account",description:"Manage your account settings and preferences"}),r.jsx(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[r.jsxs(oh,{className:"w-20 h-20",children:[r.jsx(lh,{src:t?.avatar}),r.jsx(ch,{className:"bg-blue-600 text-white text-xl",children:m&&v?oe(m,v):t?.name?.charAt(0)||"U"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h2",{className:`text-xl font-semibold ${n?"text-white":"text-gray-900"}`,children:m&&v?`${m} ${v}`:t?.name||"User"}),t?.role&&ue(t.role)]}),r.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:g}),C&&r.jsxs("p",{className:"text-sm mt-1 text-gray-500",children:[r.jsx(Na,{className:"w-3 h-3 inline mr-1"}),C]})]}),r.jsxs(W,{variant:"outline",size:"sm",children:[r.jsx(ll,{className:"w-4 h-4 mr-2"}),"Change Photo"]})]})})}),r.jsxs(wn,{value:a,onValueChange:i,className:"space-y-6",children:[r.jsxs(kn,{className:`grid w-full grid-cols-3 ${n?"bg-[#161616]":"bg-gray-100"}`,children:[r.jsxs(Tt,{value:"profile",children:[r.jsx(ma,{className:"w-4 h-4 mr-2"}),"Profile"]}),r.jsxs(Tt,{value:"security",children:[r.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Security"]}),r.jsxs(Tt,{value:"notifications",children:[r.jsx(pi,{className:"w-4 h-4 mr-2"}),"Notifications"]})]}),r.jsxs(Bt,{value:"profile",className:"space-y-6",children:[r.jsxs(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Personal Information"}),r.jsx(Ft,{children:"Update your personal details and contact information"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"firstName",children:"First Name"}),r.jsx(de,{id:"firstName",value:m,onChange:pe=>f(pe.target.value),placeholder:"John"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"lastName",children:"Last Name"}),r.jsx(de,{id:"lastName",value:v,onChange:pe=>x(pe.target.value),placeholder:"Doe"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",children:"Email Address"}),r.jsx(de,{id:"email",type:"email",value:g,onChange:pe=>b(pe.target.value),placeholder:"john@example.com"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Changing your email will require verification"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"phone",children:"Phone Number"}),r.jsx(de,{id:"phone",type:"tel",value:w,onChange:pe=>N(pe.target.value),placeholder:"+1 (555) 123-4567"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"company",children:"Company / Organization"}),r.jsx(de,{id:"company",value:C,onChange:pe=>S(pe.target.value),placeholder:"Acme Inc."})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(W,{variant:"outline",onClick:K,children:"Cancel"}),r.jsx(W,{onClick:ne,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]}),r.jsxs(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Role & Permissions"}),r.jsx(Ft,{children:"Your account role and access level"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:"Current Role"}),r.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[t?.role==="super-admin"&&"Full system access with all permissions",t?.role==="admin"&&"Administrative access to manage organization",t?.role==="beta-owner"&&"Beta program owner with extended access",t?.role==="manager"&&"Manage bookings, staff, and operations",t?.role==="staff"&&"Standard staff access to daily operations"]})]}),t?.role&&ue(t.role)]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium",children:"Permissions"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[["super-admin","admin","beta-owner"].includes(t?.role||"")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Manage Users"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Manage Venues"})]})]}),["super-admin","admin","beta-owner","manager"].includes(t?.role||"")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Manage Bookings"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"View Reports"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"View Bookings"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Manage Profile"})]})]})]})]})]})]}),r.jsxs(Bt,{value:"security",className:"space-y-6",children:[r.jsxs(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Change Password"}),r.jsx(Ft,{children:"Update your password to keep your account secure"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"currentPassword",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"currentPassword",type:I?"text":"password",value:A,onChange:pe=>k(pe.target.value),placeholder:"Enter current password"}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>L(!I),children:I?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"newPassword",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"newPassword",type:z?"text":"password",value:E,onChange:pe=>O(pe.target.value),placeholder:"Enter new password"}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>M(!z),children:z?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"confirmPassword",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"confirmPassword",type:V?"text":"password",value:$,onChange:pe=>T(pe.target.value),placeholder:"Confirm new password"}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>B(!V),children:V?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:r.jsxs("p",{className:"text-xs text-amber-900 dark:text-amber-200",children:[r.jsx(hs,{className:"w-3 h-3 inline mr-1"}),"Password must be at least 6 characters long"]})}),r.jsx(Ze,{}),r.jsx("div",{className:"flex justify-end",children:r.jsx(W,{onClick:ie,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"w-4 h-4 mr-2"}),"Update Password"]})})})]})]}),r.jsxs(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Account Status"}),r.jsx(Ft,{children:"Your account information and status"})]}),r.jsx(_e,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Account Status"}),r.jsxs(De,{className:"mt-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Active"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Member Since"}),r.jsx("p",{className:"mt-1 font-medium",children:t?.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A"})]})]})})]})]}),r.jsx(Bt,{value:"notifications",className:"space-y-6",children:r.jsxs(he,{className:n?"bg-[#161616] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(Ke,{children:[r.jsx(Xe,{children:"Notification Preferences"}),r.jsx(Ft,{children:"Manage how you receive notifications"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{htmlFor:"email-notifications",children:"Email Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive notifications via email"})]}),r.jsx(Rt,{id:"email-notifications",checked:F,onCheckedChange:J})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{htmlFor:"push-notifications",children:"Push Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive push notifications in your browser"})]}),r.jsx(Rt,{id:"push-notifications",checked:ee,onCheckedChange:q})]}),r.jsx(Ze,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(X,{htmlFor:"sms-notifications",children:"SMS Notifications"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive notifications via text message"})]}),r.jsx(Rt,{id:"sms-notifications",checked:U,onCheckedChange:Z})]}),r.jsx(Ze,{}),r.jsx("div",{className:"flex justify-end",children:r.jsx(W,{onClick:be,disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})})]})]})})]})]})}const Ql=[{id:"free",name:"Free",price:0,description:"Perfect for getting started with booking management",icon:Ni,color:"text-emerald-600",bgColor:"bg-emerald-100",features:["Unlimited bookings management","3.9% transaction fee on customer bookings","3 active games/rooms","3 staff members","Basic booking widget (1 template)","Standard waivers","Email support","Basic reports","Mobile app access","Perfect for solo operators"],limits:{bookings:"Unlimited",games:"3",staff:"3",credits:"Not included",aiConversations:"Not included",widgets:"1 template",apiAccess:"Not included"}},{id:"starter",name:"Starter",price:49,description:"Perfect for small escape room businesses getting started",icon:Du,color:"text-blue-600",bgColor:"bg-blue-100",features:["Up to 30 free bookings/month","Up to 30 free AI conversations/month","100 credits/month included","5 active games/rooms","5 staff members","Basic booking widgets (3 templates)","Standard waivers","2 credits per booking beyond limit","2 credits per waiver","2 credits per AI conversation beyond limit","Email support","Basic reports","Mobile app access"],limits:{bookings:"30/month",games:"5",staff:"5",credits:"100/month",aiConversations:"30/month",widgets:"3 templates",apiAccess:"Not included"}},{id:"professional",name:"Professional",price:99,description:"Advanced features for growing escape room businesses",icon:Es,color:"text-purple-600",bgColor:"bg-purple-100",popular:!0,features:["Up to 60 free bookings/month","Up to 60 free AI conversations/month","200 credits/month included","15 active games/rooms","25 staff members","All booking widgets (8 templates)","Custom waiver templates","Advanced AI agents (Customer Assistant + 2 specialized)","Google Ads & Facebook Ads integration","Advanced analytics & reports","2 credits per booking beyond limit","2 credits per waiver","2 credits per AI conversation beyond limit","Priority email & chat support","Custom branding"],limits:{bookings:"60/month",games:"15",staff:"25",credits:"200/month",aiConversations:"60/month",widgets:"8 templates",apiAccess:"Not included"}},{id:"enterprise",name:"Enterprise",price:"Custom",description:"Complete solution for established escape room chains",icon:lc,color:"text-orange-600",bgColor:"bg-orange-100",features:["Unlimited bookings","Unlimited AI conversations","Custom credit allocation - contact sales","Unlimited games/rooms","Unlimited staff members","All booking widgets with customization","Custom waiver templates + legal review","All AI agents including Calling Agent","Full marketing suite (Google, Facebook, Tag Manager)","Booster AI (coming soon)","Advanced analytics with custom reports","API access included","Dedicated account manager","24/7 phone support","White-label options","Multi-location support","Custom integrations","Training & onboarding"],limits:{bookings:"Unlimited",games:"Unlimited",staff:"Unlimited",credits:"Contact Sales",aiConversations:"Unlimited",widgets:"All + Custom",apiAccess:"Included"}}];function BQe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#1e1e1e]":"bg-gray-50",l=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[c]=j.useState("professional"),[d,u]=j.useState("monthly"),[h,m]=j.useState(!1),[f,v]=j.useState(null),[x,g]=j.useState(!1),[b,w]=j.useState(1),[N,C]=j.useState(null),[S,A]=j.useState(!1),[k,E]=j.useState(!1),[O,$]=j.useState(null),[T,I]=j.useState(""),[L]=j.useState([{id:"INV-2024-11",date:"Nov 1, 2024",amount:99,status:"Paid",plan:"Professional"},{id:"INV-2024-10",date:"Oct 1, 2024",amount:99,status:"Paid",plan:"Professional"},{id:"INV-2024-09",date:"Sep 1, 2024",amount:99,status:"Paid",plan:"Professional"},{id:"INV-2024-08",date:"Aug 1, 2024",amount:99,status:"Paid",plan:"Professional"}]),[z]=j.useState(500),[M]=j.useState({bookings:45,waivers:28,aiConversations:67}),[V,B]=j.useState([{id:"1",type:"card",brand:"Visa",last4:"4242",expiryMonth:"12",expiryYear:"2025",isDefault:!0}]),[F,J]=j.useState({cardNumber:"",expiryDate:"",cvc:"",name:""}),ee=()=>d==="yearly"?.2:0,q=Y=>{if(typeof Y=="string")return Y;if(Y===0)return 0;const Le=Y*12,xe=ee(),mt=Le*(1-xe);return d==="yearly"?mt/12:Y},U=()=>{re.success(`Successfully changed to ${Ql.find(Y=>Y.id===f)?.name} plan`),m(!1)},Z=(Y,Le)=>{C({amount:Y,price:Le}),w(2)},K=()=>new Promise(Y=>{setTimeout(()=>{const Le=Math.random()>.3;Y(Le)},2500)}),se=async()=>{E(!0),$(null);const Y=await K();if(E(!1),Y){const Le={id:String(V.length+1),type:"card",brand:"Visa",last4:F.cardNumber.slice(-4),expiryMonth:F.expiryDate.split("/")[0],expiryYear:"20"+F.expiryDate.split("/")[1],isDefault:V.length===0};B([...V,Le]),J({cardNumber:"",expiryDate:"",cvc:"",name:""}),$("success")}else{const Le=["Unable to verify card details. Please check your information.","Card validation failed. Please try again.","This card cannot be added. Please use a different card.","Payment processor error. Please try again later.","Card verification failed. Please contact your bank."];I(Le[Math.floor(Math.random()*Le.length)]),$("failed")}},ne=()=>{$(null),I(""),E(!1)},ie=()=>{A(!1),ne(),J({cardNumber:"",expiryDate:"",cvc:"",name:""})},be=()=>{g(!1),w(1),C(null),ne()},ue=()=>{ne()},oe=()=>{S?(ie(),re.success("Payment method added successfully")):x&&N&&(re.success(`Successfully purchased ${N.amount} credits for $${N.price}`),be())},pe=Y=>{B(V.map(Le=>({...Le,isDefault:Le.id===Y}))),re.success("Default payment method updated")},ye=Y=>{B(V.filter(Le=>Le.id!==Y)),re.success("Payment method removed")},$e=Y=>{const xe=Y.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),mt=xe&&xe[0]||"",Ue=[];for(let xt=0,ut=mt.length;xt<ut;xt+=4)Ue.push(mt.substring(xt,xt+4));return Ue.length?Ue.join(" "):Y},Se=Y=>{const Le=Y.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return Le.length>=2?Le.slice(0,2)+"/"+Le.slice(2,4):Le};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ei,{title:"Billing & Subscription",description:"Manage your plan, billing, and payment information",sticky:!0}),r.jsx(he,{className:`border shadow-lg ${e?"border-purple-500/30 bg-gradient-to-br from-purple-900/20 to-[#161616]":"border-purple-200 bg-gradient-to-br from-purple-50 to-white"}`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6",children:[r.jsxs("div",{className:"flex items-start gap-4 w-full",children:[r.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0 ${e?"bg-gradient-to-br from-[#4f46e5] to-[#4338ca]":"bg-gradient-to-br from-purple-600 to-purple-700"}`,children:r.jsx(Es,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-2",children:[r.jsx("h2",{className:s,children:"Professional Plan"}),r.jsxs(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Active"]})]}),r.jsx("p",{className:`text-sm ${n} mb-3`,children:"Your current subscription includes all professional features"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(qs,{className:"w-4 h-4"}),"Renews Dec 15, 2025"]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(zs,{className:"w-4 h-4"}),"Custom Pricing"]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(ym,{className:"w-4 h-4"}),"Premium Support"]})]})]})]}),r.jsx(W,{variant:"outline",className:"h-11",children:"Manage Subscription"})]})})}),r.jsxs("div",{className:`flex items-center justify-center gap-4 p-4 rounded-lg border ${a} ${o}`,children:[r.jsx("span",{className:`text-sm ${d==="monthly"?s:n}`,children:"Monthly"}),r.jsx(Rt,{checked:d==="yearly",onCheckedChange:Y=>u(Y?"yearly":"monthly")}),r.jsx("span",{className:`text-sm ${d==="yearly"?s:n}`,children:"Yearly"}),d==="yearly"&&r.jsxs(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(mu,{className:"w-3 h-3 mr-1"}),"Save 20%"]})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:Ql.map(Y=>{const Le=Y.icon,xe=Y.id===c;return q(Y.price),r.jsxs(he,{className:`border-2 shadow-lg transition-all ${Y.popular?e?"border-purple-500/50 bg-gradient-to-br from-purple-900/20 to-[#161616]":"border-purple-300 bg-gradient-to-br from-purple-50 to-white":xe?e?"border-[#4f46e5]/50 bg-gradient-to-br from-[#4f46e5]/10 to-[#161616]":"border-blue-300 bg-gradient-to-br from-blue-50 to-white":e?`border-[#2a2a2a] ${i} hover:border-[#3a3a3a]`:"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs(Ke,{className:"p-6",children:[Y.popular&&r.jsx("div",{className:"absolute top-0 right-6 transform -translate-y-1/2",children:r.jsxs(De,{className:e?"bg-[#4f46e5] text-white border-0 shadow-lg":"bg-purple-600 text-white border-0 shadow-lg",children:[r.jsx(_a,{className:"w-3 h-3 mr-1"}),"Most Popular"]})}),r.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-4 ${e?"bg-[#1e1e1e]":Y.bgColor}`,children:r.jsx(Le,{className:`w-7 h-7 ${e?"text-[#6366f1]":Y.color}`})}),r.jsx(Xe,{className:s,children:Y.name}),r.jsx(Ft,{className:`text-sm min-h-[40px] ${n}`,children:Y.description}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"flex items-baseline gap-2",children:r.jsx("span",{className:`text-lg font-semibold ${s}`,children:"Custom Pricing"})}),r.jsx(De,{className:e?"bg-[#4f46e5]/20 text-[#6366f1] border-0 mt-2":"bg-blue-100 text-blue-700 border-0 mt-2",children:"Contact us for pricing"})]})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsx(Ze,{className:a}),r.jsx("div",{className:"space-y-2",children:Y.features.map((mt,Ue)=>r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Lt,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${e?"text-emerald-400":"text-green-600"}`}),r.jsx("span",{className:`text-sm ${n}`,children:mt})]},Ue))}),r.jsx(Ze,{className:a}),xe?r.jsxs(W,{className:`w-full h-11 ${e?"bg-[#2a2a2a] text-[#737373]":"bg-gray-600"} cursor-default`,disabled:!0,children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Current Plan"]}):r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`w-full h-11 ${Y.popular?e?"text-white hover:bg-[#4338ca]":"bg-purple-600 hover:bg-purple-700":e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:()=>{re.info("Please contact our sales team for pricing and plan details")},children:[r.jsx(ni,{className:"w-4 h-4 mr-2"}),"Contact Sales"]})]})]},Y.id)})}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:s,children:"Feature Comparison"}),r.jsx(Ft,{className:n,children:"Compare limits across all plans"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:`border-b ${a}`,children:[r.jsx("th",{className:`text-left py-3 px-4 text-sm ${s}`,children:"Feature"}),Ql.map(Y=>r.jsx("th",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.name},Y.id))]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Bookings"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.bookings},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Transaction Fee"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.id==="free"?"3.9%":"0%"},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Games/Rooms"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.games},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Staff Members"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.staff},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Monthly Credits"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.credits},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"AI Conversations"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.aiConversations},Y.id))]}),r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a]/50":"border-gray-100"}`,children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"Booking Widgets"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.widgets},Y.id))]}),r.jsxs("tr",{children:[r.jsx("td",{className:`py-3 px-4 text-sm ${n}`,children:"API Access"}),Ql.map(Y=>r.jsx("td",{className:`text-center py-3 px-4 text-sm ${s}`,children:Y.limits.apiAccess},Y.id))]})]})]})})})]}),r.jsxs(he,{className:`border shadow-sm ${e?"border-[#4f46e5]/30 bg-[#4f46e5]/10":"border-blue-200 bg-blue-50"}`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:e?"text-[#e0e7ff]":"text-blue-900",children:"How Credits Work"}),r.jsx(Ft,{className:e?"text-[#c7d2fe]":"text-blue-700",children:"Understanding your credit allocation and usage"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(qs,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Bookings"})]}),r.jsxs("p",{className:`text-xs mb-2 ${n}`,children:["Free: Unlimited (3.9% fee)",r.jsx("br",{}),"Starter: 30 free/month",r.jsx("br",{}),"Professional: 60 free/month",r.jsx("br",{}),"Enterprise: Unlimited"]}),r.jsx(De,{className:e?"bg-[#4f46e5]/20 text-[#6366f1] border-0 text-xs":"bg-blue-100 text-blue-700 border-0 text-xs",children:"2 credits per extra booking"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Jn,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Waivers"})]}),r.jsx("p",{className:`text-xs mb-2 ${n}`,children:"All plans can create and manage unlimited waiver templates"}),r.jsx(De,{className:e?"bg-[#4f46e5]/20 text-[#6366f1] border-0 text-xs":"bg-blue-100 text-blue-700 border-0 text-xs",children:"2 credits per waiver signed"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-[#161616] border-[#2a2a2a]":"bg-white border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ni,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"AI Conversations"})]}),r.jsxs("p",{className:`text-xs mb-2 ${n}`,children:["Free: Not included",r.jsx("br",{}),"Starter: 30 free/month",r.jsx("br",{}),"Professional: 60 free/month",r.jsx("br",{}),"Enterprise: Unlimited"]}),r.jsx(De,{className:e?"bg-[#4f46e5]/20 text-[#6366f1] border-0 text-xs":"bg-blue-100 text-blue-700 border-0 text-xs",children:"2 credits per extra conversation"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:s,children:"Credits Balance"}),r.jsx(Ft,{className:n,children:"Additional usage credits"})]}),r.jsxs(W,{onClick:()=>g(!0),style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Buy Credits"]})]})}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:`p-6 rounded-xl text-white ${e?"bg-gradient-to-br from-[#4f46e5] to-[#4338ca]":"bg-gradient-to-br from-blue-600 to-blue-700"}`,children:[r.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Available Credits"}),r.jsx("p",{className:"text-4xl",children:z}),r.jsx("p",{className:"text-xs opacity-75 mt-2",children:"Credits used for bookings, waivers, and AI conversations beyond your plan limits"})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{children:[r.jsx(X,{className:`text-sm mb-3 block ${s}`,children:"Credit Usage This Month"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Extra Bookings (2 credits each)"})]}),r.jsxs("span",{className:`text-sm ${s}`,children:[M.bookings*2," credits"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(Jn,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Waivers (2 credits each)"})]}),r.jsxs("span",{className:`text-sm ${s}`,children:[M.waivers*2," credits"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(ni,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Extra AI Conversations (2 credits each)"})]}),r.jsxs("span",{className:`text-sm ${s}`,children:[M.aiConversations*2," credits"]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:`text-sm ${s}`,children:"Total Used"}),r.jsxs("span",{className:`text-sm ${s}`,children:[(M.bookings+M.waivers+M.aiConversations)*2," credits"]})]})]})]})]})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:s,children:"Payment Methods"}),r.jsx(Ft,{className:n,children:"Manage your payment information"})]}),r.jsxs(W,{onClick:()=>A(!0),style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Method"]})]})}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[V.map(Y=>r.jsx("div",{className:`p-4 rounded-lg border ${a} ${o}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${e?"bg-gradient-to-br from-[#4f46e5] to-purple-600":"bg-gradient-to-br from-blue-600 to-purple-600"}`,children:r.jsx(rn,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("p",{className:`text-sm ${s}`,children:[Y.brand,"  ",Y.last4]}),Y.isDefault&&r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0 text-xs":"bg-green-100 text-green-700 border-0 text-xs",children:"Default"})]}),r.jsxs("p",{className:`text-xs ${n}`,children:["Expires ",Y.expiryMonth,"/",Y.expiryYear]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[!Y.isDefault&&r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>pe(Y.id),children:"Set Default"}),!Y.isDefault&&r.jsx(W,{variant:"ghost",size:"sm",className:e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700",onClick:()=>ye(Y.id),children:"Remove"})]})]})},Y.id)),r.jsx(Ze,{className:a}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex items-center justify-between text-sm ${n}`,children:[r.jsx("span",{children:"Billing Email"}),r.jsx("span",{className:s,children:"john.doe@bookingtms.com"})]}),r.jsxs("div",{className:`flex items-center justify-between text-sm ${n}`,children:[r.jsx("span",{children:"Next Billing Date"}),r.jsx("span",{className:s,children:"December 15, 2025"})]}),r.jsxs("div",{className:`flex items-center justify-between text-sm ${n}`,children:[r.jsx("span",{children:"Next Charge Amount"}),r.jsx("span",{className:s,children:"$99.00"})]})]})]})]})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:s,children:"Subscription Management"}),r.jsx(Ft,{className:n,children:"Manage your subscription settings and preferences"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${a} ${l} transition-colors`,children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:"Auto-renew Subscription"}),r.jsx("p",{className:`text-xs ${n} mt-1`,children:"Automatically renew your subscription each billing cycle"})]}),r.jsx(Rt,{defaultChecked:!0})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${a} ${l} transition-colors`,children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:"Usage Alerts"}),r.jsx("p",{className:`text-xs ${n} mt-1`,children:"Get notified when you reach 80% of your plan limits"})]}),r.jsx(Rt,{defaultChecked:!0})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${a} ${l} transition-colors`,children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:"Invoice Emails"}),r.jsx("p",{className:`text-xs ${n} mt-1`,children:"Receive invoice notifications via email"})]}),r.jsx(Rt,{defaultChecked:!0})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(W,{variant:"outline",className:`w-full justify-start h-11 ${e?"text-red-400 hover:bg-red-500/10":"text-red-600 hover:text-red-700 hover:bg-red-50"}`,children:[r.jsx(jr,{className:"w-4 h-4 mr-2"}),"Pause Subscription"]}),r.jsxs(W,{variant:"outline",className:`w-full justify-start h-11 ${e?"text-red-400 hover:bg-red-500/10":"text-red-600 hover:text-red-700 hover:bg-red-50"}`,children:[r.jsx($n,{className:"w-4 h-4 mr-2"}),"Cancel Subscription"]})]})]})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:s,children:"Invoice History"}),r.jsx(Ft,{className:n,children:"View and download your past invoices"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsx("div",{className:"space-y-2",children:L.map(Y=>r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${o} ${l} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Cme,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s}`,children:Y.id}),r.jsxs("p",{className:`text-xs ${n}`,children:[Y.date,"  ",Y.plan," Plan"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`text-sm ${s}`,children:["$",Y.amount,".00"]}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0 text-xs":"bg-green-100 text-green-700 border-0 text-xs",children:Y.status})]}),r.jsx(W,{variant:"ghost",size:"sm",children:r.jsx(Sn,{className:"w-4 h-4"})})]})]},Y.id))})})]}),r.jsx(mr,{open:h,onOpenChange:m,children:r.jsxs(fr,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Change Subscription Plan"}),r.jsxs(wr,{className:n,children:["You're about to change your plan to ",Ql.find(Y=>Y.id===f)?.name]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(zs,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Plan Change Details"}),r.jsx("p",{className:`text-xs mt-1 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"Your new plan will be effective immediately. You'll be charged a prorated amount for the remaining billing period."})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:`flex justify-between text-sm ${n}`,children:[r.jsx("span",{children:"New Plan"}),r.jsx("span",{className:s,children:Ql.find(Y=>Y.id===f)?.name})]}),r.jsxs("div",{className:`flex justify-between text-sm ${n}`,children:[r.jsx("span",{children:"Price"}),r.jsxs("span",{className:s,children:["$",Ql.find(Y=>Y.id===f)?.price,"/month"]})]}),r.jsxs("div",{className:`flex justify-between text-sm ${n}`,children:[r.jsx("span",{children:"Billing Cycle"}),r.jsx("span",{className:s,children:d==="yearly"?"Yearly":"Monthly"})]})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:U,children:"Confirm Change"})]})]})}),r.jsx(mr,{open:x,onOpenChange:Y=>{Y||be(),g(Y)},children:r.jsxs(fr,{className:`max-w-2xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Buy Additional Credits"}),r.jsx(wr,{className:n,children:"Purchase credits for usage beyond your plan limits"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>Z(100,10),className:`p-4 border-2 rounded-lg transition-colors text-left ${e?"border-[#2a2a2a] hover:border-[#4f46e5]":"border-gray-200 hover:border-blue-600"}`,children:[r.jsx("p",{className:`text-2xl ${s}`,children:"100"}),r.jsx("p",{className:`text-sm ${n}`,children:"Credits"}),r.jsx("p",{className:`text-lg ${s} mt-2`,children:"$10"}),r.jsx("p",{className:`text-xs ${n}`,children:"$0.10 per credit"})]}),r.jsxs("button",{onClick:()=>Z(500,45),className:`p-4 border-2 rounded-lg transition-colors text-left ${e?"border-[#2a2a2a] hover:border-[#4f46e5]":"border-gray-200 hover:border-blue-600"}`,children:[r.jsx("p",{className:`text-2xl ${s}`,children:"500"}),r.jsx("p",{className:`text-sm ${n}`,children:"Credits"}),r.jsx("p",{className:`text-lg ${s} mt-2`,children:"$45"}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("p",{className:`text-xs ${n}`,children:"$0.09 per credit"}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0 text-xs":"bg-green-100 text-green-700 border-0 text-xs",children:"Save 10%"})]})]}),r.jsxs("button",{onClick:()=>Z(1e3,80),className:`p-4 border-2 rounded-lg transition-colors text-left ${e?"border-[#2a2a2a] hover:border-[#4f46e5]":"border-gray-200 hover:border-blue-600"}`,children:[r.jsx("p",{className:`text-2xl ${s}`,children:"1,000"}),r.jsx("p",{className:`text-sm ${n}`,children:"Credits"}),r.jsx("p",{className:`text-lg ${s} mt-2`,children:"$80"}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("p",{className:`text-xs ${n}`,children:"$0.08 per credit"}),r.jsx(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0 text-xs":"bg-green-100 text-green-700 border-0 text-xs",children:"Save 20%"})]})]}),r.jsxs("button",{onClick:()=>Z(2500,175),className:`p-4 border-2 rounded-lg transition-colors text-left ${e?"border-purple-500/50 bg-purple-500/10 hover:border-purple-500":"border-purple-300 bg-purple-50 hover:border-purple-600"}`,children:[r.jsx("p",{className:`text-2xl ${s}`,children:"2,500"}),r.jsx("p",{className:`text-sm ${n}`,children:"Credits"}),r.jsx("p",{className:`text-lg ${s} mt-2`,children:"$175"}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("p",{className:`text-xs ${n}`,children:"$0.07 per credit"}),r.jsx(De,{className:"bg-purple-600 text-white border-0 text-xs",children:"Save 30%"})]})]})]}),r.jsxs("div",{className:`p-3 rounded-lg text-xs ${e?"bg-[#1e1e1e] text-[#a3a3a3]":"bg-gray-50 text-gray-600"}`,children:[r.jsx("p",{children:" Credits never expire"}),r.jsx("p",{children:" Use for bookings, waivers, and AI conversations beyond your plan limits"}),r.jsx("p",{children:" 2 credits per booking, 2 credits per waiver, 2 credits per AI conversation"})]})]}),r.jsx(Us,{children:r.jsx(W,{variant:"outline",onClick:be,children:"Cancel"})})]})}),r.jsx(mr,{open:S,onOpenChange:Y=>{Y||ie(),A(Y)},children:r.jsxs(fr,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:O?O==="success"?"Card Added Successfully":"Card Verification Failed":"Add Payment Method"}),r.jsx(wr,{className:n,children:O?O==="success"?"Your payment method is ready to use":"Unable to add this payment method":"Add a new credit or debit card to your account"})]}),r.jsxs("div",{className:"space-y-4",children:[!k&&!O&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"cardNumber",className:s,children:"Card Number"}),r.jsx(de,{id:"cardNumber",placeholder:"1234 5678 9012 3456",maxLength:19,value:F.cardNumber,onChange:Y=>J({...F,cardNumber:$e(Y.target.value)}),className:"h-11 font-mono"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"expiryDate",className:s,children:"Expiry Date"}),r.jsx(de,{id:"expiryDate",placeholder:"MM/YY",maxLength:5,value:F.expiryDate,onChange:Y=>J({...F,expiryDate:Se(Y.target.value)}),className:"h-11 font-mono"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"cvc",className:s,children:"CVC"}),r.jsx(de,{id:"cvc",placeholder:"123",maxLength:4,value:F.cvc,onChange:Y=>J({...F,cvc:Y.target.value.replace(/\D/g,"")}),className:"h-11 font-mono"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"cardName",className:s,children:"Cardholder Name"}),r.jsx(de,{id:"cardName",placeholder:"John Doe",value:F.name,onChange:Y=>J({...F,name:Y.target.value}),className:"h-11"})]})]}),k&&r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(ia,{className:`w-8 h-8 animate-spin ${e?"text-[#6366f1]":"text-blue-600"}`})}),r.jsx("p",{className:s,children:"Processing Payment"}),r.jsx("p",{className:`text-sm ${n}`,children:"Please wait..."})]}),O==="success"&&r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Lt,{className:`w-8 h-8 ${e?"text-emerald-400":"text-green-600"}`})}),r.jsx("p",{className:`text-xl ${s} mb-1`,children:"Payment Successful!"}),r.jsx("p",{className:`text-sm ${n} text-center`,children:"Your payment method has been added"})]}),O==="failed"&&r.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${e?"bg-red-500/20":"bg-red-100"}`,children:r.jsx(hs,{className:`w-8 h-8 ${e?"text-red-400":"text-red-600"}`})}),r.jsx("p",{className:`text-xl ${s} mb-1`,children:"Payment Failed"}),r.jsx("p",{className:`text-sm ${n} text-center mb-4`,children:T})]})]}),r.jsxs(Us,{children:[!k&&O===null&&r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outline",onClick:ie,children:"Cancel"}),r.jsx(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:se,children:"Add Card"})]}),O==="success"&&r.jsxs(W,{className:e?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-green-600 hover:bg-green-700",onClick:oe,children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Done"]}),O==="failed"&&r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outline",onClick:ie,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700",onClick:ue,children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})]})})]})}function UQe(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#1e1e1e]":"bg-gray-50",l=e?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",c=e?"hover:shadow-[0_0_15px_rgba(79,70,229,0.1)]":"hover:shadow-md",[d,u]=j.useState(""),[h,m]=j.useState("all"),[f,v]=j.useState(!1),[x,g]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(!1),[S,A]=j.useState({name:"",email:"",phone:"",role:"Staff",sendEmail:!0}),[k,E]=j.useState([{id:"1",name:"John Doe",email:"john.doe@bookingtms.com",phone:"+1 (555) 123-4567",role:"Owner",status:"Active",avatar:lv,joinDate:"Jan 15, 2024",lastActive:"2 minutes ago",permissions:{bookings:!0,games:!0,staff:!0,reports:!0,billing:!0,settings:!0}},{id:"2",name:"Sarah Johnson",email:"sarah.j@bookingtms.com",phone:"+1 (555) 234-5678",role:"Admin",status:"Active",joinDate:"Feb 10, 2024",lastActive:"1 hour ago",permissions:{bookings:!0,games:!0,staff:!0,reports:!0,billing:!1,settings:!0}},{id:"3",name:"Michael Chen",email:"michael.chen@bookingtms.com",phone:"+1 (555) 345-6789",role:"Manager",status:"Active",joinDate:"Mar 5, 2024",lastActive:"3 hours ago",permissions:{bookings:!0,games:!0,staff:!1,reports:!0,billing:!1,settings:!1}},{id:"4",name:"Emily Rodriguez",email:"emily.r@bookingtms.com",phone:"+1 (555) 456-7890",role:"Staff",status:"Active",joinDate:"Apr 20, 2024",lastActive:"5 hours ago",permissions:{bookings:!0,games:!1,staff:!1,reports:!1,billing:!1,settings:!1}},{id:"5",name:"David Park",email:"david.park@bookingtms.com",phone:"+1 (555) 567-8901",role:"Staff",status:"Inactive",joinDate:"May 12, 2024",lastActive:"2 days ago",permissions:{bookings:!0,games:!1,staff:!1,reports:!1,billing:!1,settings:!1}},{id:"6",name:"Jessica Taylor",email:"jessica.t@bookingtms.com",phone:"+1 (555) 678-9012",role:"Manager",status:"Invited",joinDate:"Oct 28, 2024",lastActive:"Never",permissions:{bookings:!0,games:!0,staff:!1,reports:!0,billing:!1,settings:!1}}]),O=ee=>{switch(ee){case"Owner":return r.jsx(lc,{className:"w-4 h-4"});case"Admin":return r.jsx(zs,{className:"w-4 h-4"});case"Manager":return r.jsx(Es,{className:"w-4 h-4"});case"Staff":return r.jsx(Xr,{className:"w-4 h-4"})}},$=ee=>{if(e)switch(ee){case"Owner":return"bg-orange-500/20 text-orange-400 border-0";case"Admin":return"bg-purple-500/20 text-purple-400 border-0";case"Manager":return"bg-[#4f46e5]/20 text-[#6366f1] border-0";case"Staff":return"bg-[#2a2a2a] text-[#a3a3a3] border-0"}else switch(ee){case"Owner":return"bg-orange-100 text-orange-700 border-0";case"Admin":return"bg-purple-100 text-purple-700 border-0";case"Manager":return"bg-blue-100 text-blue-700 border-0";case"Staff":return"bg-gray-100 text-gray-700 border-0"}},T=ee=>{switch(ee){case"Active":return r.jsxs(De,{className:e?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Active"]});case"Inactive":return r.jsxs(De,{className:e?"bg-[#2a2a2a] text-[#737373] border-0":"bg-gray-100 text-gray-700 border-0",children:[r.jsx(ln,{className:"w-3 h-3 mr-1"}),"Inactive"]});case"Invited":return r.jsxs(De,{className:e?"bg-yellow-500/20 text-yellow-400 border-0":"bg-yellow-100 text-yellow-700 border-0",children:[r.jsx(jr,{className:"w-3 h-3 mr-1"}),"Invited"]})}},I=k.filter(ee=>{const q=ee.name.toLowerCase().includes(d.toLowerCase())||ee.email.toLowerCase().includes(d.toLowerCase()),U=h==="all"||ee.role===h;return q&&U}),L={total:k.length,active:k.filter(ee=>ee.status==="Active").length,invited:k.filter(ee=>ee.status==="Invited").length,roles:{owner:k.filter(ee=>ee.role==="Owner").length,admin:k.filter(ee=>ee.role==="Admin").length,manager:k.filter(ee=>ee.role==="Manager").length,staff:k.filter(ee=>ee.role==="Staff").length}},z=()=>{if(!S.name||!S.email){re.error("Please fill in all required fields");return}const ee={id:String(k.length+1),name:S.name,email:S.email,phone:S.phone,role:S.role,status:"Invited",joinDate:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),lastActive:"Never",permissions:{bookings:S.role!=="Staff",games:S.role==="Owner"||S.role==="Admin"||S.role==="Manager",staff:S.role==="Owner"||S.role==="Admin",reports:S.role!=="Staff",billing:S.role==="Owner",settings:S.role==="Owner"||S.role==="Admin"}};E([...k,ee]),re.success(`Invitation sent to ${S.name}`),v(!1),A({name:"",email:"",phone:"",role:"Staff",sendEmail:!0})},M=ee=>{w(ee),g(!0)},V=ee=>{w(ee),C(!0)},B=()=>{b&&(E(k.filter(ee=>ee.id!==b.id)),re.success(`${b.name} has been removed from the team`),C(!1),w(null))},F=ee=>{re.success(`Invitation resent to ${ee.name}`)},J=ee=>{const q=ee.status==="Active"?"Inactive":"Active";E(k.map(U=>U.id===ee.id?{...U,status:q}:U)),re.success(`${ee.name} is now ${q}`)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsx(Ei,{title:"Team Management",description:"Manage your team members, roles, and permissions"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`w-full sm:w-auto h-11 ${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:()=>v(!0),children:[r.jsx(Nd,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Invite Team Member"}),r.jsx("span",{className:"sm:hidden",children:"Invite Member"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Total Members"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:L.total})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-[#4f46e5]/20":"bg-blue-100"}`,children:r.jsx(Xr,{className:`w-6 h-6 ${e?"text-[#6366f1]":"text-blue-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Active"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:L.active})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-emerald-500/20":"bg-green-100"}`,children:r.jsx(Lt,{className:`w-6 h-6 ${e?"text-emerald-400":"text-green-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Pending Invites"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:L.invited})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-yellow-500/20":"bg-yellow-100"}`,children:r.jsx(jr,{className:`w-6 h-6 ${e?"text-yellow-400":"text-yellow-600"}`})})]})})}),r.jsx(he,{className:`${i} border ${a} shadow-sm ${c} transition-all`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${n}`,children:"Managers & Admins"}),r.jsx("p",{className:`text-2xl mt-2 ${s}`,children:L.roles.admin+L.roles.manager})]}),r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 ${e?"bg-purple-500/20":"bg-purple-100"}`,children:r.jsx(zs,{className:`w-6 h-6 ${e?"text-purple-400":"text-purple-600"}`})})]})})})]}),r.jsx(he,{className:`${i} border ${a} shadow-sm`,children:r.jsx(_e,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search by name or email...",className:"pl-10 h-11",value:d,onChange:ee=>u(ee.target.value)})]}),r.jsxs(sr,{value:h,onValueChange:m,children:[r.jsxs(ar,{className:"w-full md:w-[200px] h-11",children:[r.jsx(_u,{className:"w-4 h-4 mr-2"}),r.jsx(nr,{placeholder:"Filter by role"})]}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"all",children:"All Roles"}),r.jsx(Ae,{value:"Owner",children:"Owner"}),r.jsx(Ae,{value:"Admin",children:"Admin"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Staff",children:"Staff"})]})]})]})})}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs(Xe,{className:s,children:["Team Members (",I.length,")"]}),r.jsx(Ft,{className:n,children:"View and manage all team members"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsx("div",{className:"space-y-3",children:I.map((ee,q)=>r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${l} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[r.jsxs(oh,{className:"w-12 h-12 flex-shrink-0",children:[r.jsx(lh,{src:ee.avatar}),r.jsx(ch,{className:e?"bg-[#4f46e5] text-white":"bg-blue-600 text-white",children:ee.name.split(" ").map(U=>U[0]).join("")})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsx("p",{className:`text-sm ${s}`,children:ee.name}),r.jsxs(De,{className:$(ee.role),children:[O(ee.role),r.jsx("span",{className:"ml-1",children:ee.role})]}),T(ee.status)]}),r.jsxs("div",{className:`flex flex-wrap items-center gap-x-4 gap-y-1 text-xs ${n}`,children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ds,{className:"w-3 h-3 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:ee.email})]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(la,{className:"w-3 h-3 flex-shrink-0"}),ee.phone]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(qs,{className:"w-3 h-3 flex-shrink-0"}),"Joined ",ee.joinDate]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3 flex-shrink-0"}),"Last active ",ee.lastActive]})]})]})]}),r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"sm",className:"flex-shrink-0",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(Dt,{onClick:()=>M(ee),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit Member"]}),ee.status==="Invited"&&r.jsxs(Dt,{onClick:()=>F(ee),children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Resend Invite"]}),ee.role!=="Owner"&&r.jsxs(r.Fragment,{children:[r.jsx(Dt,{onClick:()=>J(ee),children:ee.status==="Active"?r.jsxs(r.Fragment,{children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Activate"]})}),r.jsx(Su,{}),r.jsxs(Dt,{onClick:()=>V(ee),className:e?"text-red-400":"text-red-600",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Remove Member"]})]})]})]})]}),q<I.length-1&&r.jsx(Ze,{className:a})]},ee.id))})})]}),r.jsxs(he,{className:`${i} border ${a} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsx(Xe,{className:s,children:"Roles & Permissions"}),r.jsx(Ft,{className:n,children:"Understanding team member roles and their access levels"})]}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-orange-500/10 border-orange-500/30":"bg-orange-50 border-orange-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(lc,{className:`w-5 h-5 ${e?"text-orange-400":"text-orange-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-orange-300":"text-orange-900"}`,children:"Owner"})]}),r.jsx("p",{className:`text-xs ${e?"text-orange-400/70":"text-orange-700"}`,children:"Full access to all features including billing, team management, and critical settings"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-purple-500/10 border-purple-500/30":"bg-purple-50 border-purple-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(zs,{className:`w-5 h-5 ${e?"text-purple-400":"text-purple-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-purple-300":"text-purple-900"}`,children:"Admin"})]}),r.jsx("p",{className:`text-xs ${e?"text-purple-400/70":"text-purple-700"}`,children:"Manage bookings, games, staff, and settings. No billing access"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Es,{className:`w-5 h-5 ${e?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Manager"})]}),r.jsx("p",{className:`text-xs ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"Manage bookings, games, and view reports. Limited settings access"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${a} ${o}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Xr,{className:`w-5 h-5 ${n}`}),r.jsx("p",{className:`text-sm ${s}`,children:"Staff"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"View and manage bookings only. Basic operational access"})]})]})})]}),r.jsx(mr,{open:f,onOpenChange:v,children:r.jsxs(fr,{className:`max-w-md ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Invite Team Member"}),r.jsx(wr,{className:n,children:"Send an invitation to join your team"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"invite-name",className:s,children:"Full Name *"}),r.jsx(de,{id:"invite-name",placeholder:"John Smith",value:S.name,onChange:ee=>A({...S,name:ee.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"invite-email",className:s,children:"Email Address *"}),r.jsx(de,{id:"invite-email",type:"email",placeholder:"john@example.com",value:S.email,onChange:ee=>A({...S,email:ee.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"invite-phone",className:s,children:"Phone Number"}),r.jsx(de,{id:"invite-phone",type:"tel",placeholder:"+1 (555) 123-4567",value:S.phone,onChange:ee=>A({...S,phone:ee.target.value}),className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"invite-role",className:s,children:"Role"}),r.jsxs(sr,{value:S.role,onValueChange:ee=>A({...S,role:ee}),children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"Staff",children:"Staff"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Admin",children:"Admin"})]})]})]}),r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${e?"bg-[#4f46e5]/10 border-[#4f46e5]/30":"bg-blue-50 border-blue-200"}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-[#e0e7ff]":"text-blue-900"}`,children:"Send email invitation"}),r.jsx("p",{className:`text-xs mt-0.5 ${e?"text-[#c7d2fe]":"text-blue-700"}`,children:"User will receive an email to join the team"})]}),r.jsx(Rt,{checked:S.sendEmail,onCheckedChange:ee=>A({...S,sendEmail:ee})})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>v(!1),className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`h-11 ${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:z,children:[r.jsx(wd,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})]})]})}),r.jsx(mr,{open:x,onOpenChange:g,children:r.jsxs(fr,{className:`max-w-2xl ${e?"bg-[#161616] border-[#2a2a2a]":""}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Edit Team Member"}),r.jsx(wr,{className:n,children:"Update member information and permissions"})]}),b&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Full Name"}),r.jsx(de,{defaultValue:b.name,className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Role"}),r.jsxs(sr,{defaultValue:b.role,children:[r.jsx(ar,{className:"h-11",children:r.jsx(nr,{})}),r.jsxs(ir,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsx(Ae,{value:"Staff",children:"Staff"}),r.jsx(Ae,{value:"Manager",children:"Manager"}),r.jsx(Ae,{value:"Admin",children:"Admin"}),r.jsx(Ae,{value:"Owner",disabled:!0,children:"Owner"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Email"}),r.jsx(de,{type:"email",defaultValue:b.email,className:"h-11"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s,children:"Phone"}),r.jsx(de,{type:"tel",defaultValue:b.phone,className:"h-11"})]})]}),r.jsx(Ze,{className:a}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-sm mb-3 ${s}`,children:"Permissions"}),r.jsx("div",{className:"space-y-3",children:Object.entries(b.permissions).map(([ee,q])=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${a} ${o}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s} capitalize`,children:ee}),r.jsxs("p",{className:`text-xs ${n}`,children:[ee==="bookings"&&"View and manage bookings",ee==="games"&&"Create and edit games/rooms",ee==="staff"&&"Manage team members",ee==="reports"&&"Access reports and analytics",ee==="billing"&&"Manage billing and subscriptions",ee==="settings"&&"Modify system settings"]})]}),r.jsx(Rt,{defaultChecked:q})]},ee))})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>g(!1),className:"h-11",children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:e?"#4f46e5":void 0},className:`h-11 ${e?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700"}`,onClick:()=>{re.success("Member updated successfully"),g(!1)},children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),r.jsx(mr,{open:N,onOpenChange:C,children:r.jsxs(fr,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(br,{children:[r.jsx(pr,{className:s,children:"Remove Team Member"}),r.jsxs(wr,{className:n,children:["Are you sure you want to remove ",b?.name," from the team?"]})]}),r.jsx("div",{className:`p-4 rounded-lg border ${e?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${e?"text-red-400":"text-red-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${e?"text-red-300":"text-red-900"}`,children:"This action cannot be undone"}),r.jsx("p",{className:`text-xs mt-1 ${e?"text-red-400/70":"text-red-700"}`,children:"The team member will lose access to all resources immediately."})]})]})}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>C(!1),className:"h-11",children:"Cancel"}),r.jsxs(W,{className:`h-11 ${e?"bg-red-600 hover:bg-red-700 text-white":"bg-red-600 hover:bg-red-700"}`,onClick:B,children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Remove Member"]})]})]})})]})}const jE="#2563eb";function zQe(){const[t,e]=j.useState("farebook"),[s,n]=j.useState(jE),[a,i]=j.useState(""),[o,l]=j.useState("light"),[c,d]=j.useState(void 0),[u,h]=j.useState(!0),[m,f]=j.useState(null),[v,x]=j.useState(void 0),[g,b]=j.useState(void 0),[w,N]=j.useState(void 0);j.useEffect(()=>{const O=document.documentElement,$=document.body,T={width:O.style.width,maxWidth:O.style.maxWidth,overflowX:O.style.overflowX},I={width:$.style.width,maxWidth:$.style.maxWidth,overflowX:$.style.overflowX};return O.style.width="100%",O.style.maxWidth="100%",O.style.overflowX="hidden",$.style.width="100%",$.style.maxWidth="100%",$.style.overflowX="hidden",()=>{O.style.width=T.width,O.style.maxWidth=T.maxWidth,O.style.overflowX=T.overflowX,$.style.width=I.width,$.style.maxWidth=I.maxWidth,$.style.overflowX=I.overflowX}},[]),j.useEffect(()=>{const O=new URLSearchParams(window.location.search),$=O.get("widget")||"farebook",T=O.get("color")||jE.replace("#",""),I=O.get("key")||"",L=O.get("theme")||"light",z=O.get("gameName")||void 0,M=O.get("gameDescription")||void 0,V=O.get("gamePrice"),B=V?parseFloat(V):void 0;console.log(" Embed page loaded with params:",{widget:$,color:T,key:I,theme:L}),console.log(" Full URL:",window.location.href),e($),n(`#${T.replace("#","")}`),i(I),l(L),x(z),b(M),N(B),window.parent!==window&&window.parent.postMessage({type:"BOOKINGTMS_WIDGET_LOADED",widget:$,key:I},"*");const F=()=>{if(window.parent!==window){const ee=document.documentElement.scrollHeight;[{type:"BOOKINGTMS_RESIZE",height:ee},{type:"resize-iframe",height:ee}].forEach(U=>{window.parent.postMessage(U,"*")})}};setTimeout(F,1e3);const J=new ResizeObserver(F);return J.observe(document.body),()=>{J.disconnect()}},[]);const C={showSecuredBadge:!0,showHealthSafety:!0,enableVeteranDiscount:!0,widgetTitle:"",widgetDescription:"",seoTitle:"",businessName:"Your Business Name",metaDescription:"Book your escape room experience. Fun, safe, and memorable events for teams, families, and friends.",seoKeywords:"escape room, booking, team building, family fun, mystery, puzzle game",enableLocalBusinessSchema:!0,streetAddress:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA",phoneNumber:"+1 (555) 123-4567",emailAddress:"info@example.com",nearbyLandmarks:"Downtown Plaza, City Museum",parkingInfo:"Free parking in rear lot; street parking available",showLocationBlock:!0,ticketTypes:[{id:"player",name:"Players",description:"Ages 6 & Up",price:30},{id:"veteran",name:"Veterans",description:"Must show military ID",price:25}],categories:[{id:"1",name:"Traditional Escape Rooms",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxlc2NhcGUlMjByb29tJTIwZGFyayUyMG15c3RlcmlvdXN8ZW58MXx8fHwxNzYxOTM1ODcyfDA&ixlib=rb-4.1.0&q=80&w=1080"},{id:"2",name:"Printable Escape Rooms",image:"https://images.unsplash.com/photo-1632387958032-3b563a92091f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx2aW50YWdlJTIwcGhvdG9ncmFwaHMlMjBwb2xhcm9pZHxlbnwxfHx8fDE3NjE5MzU4NzJ8MA&ixlib=rb-4.1.0&q=80&w=1080"}],games:[{id:"1",name:"Zombie Apocalypse",image:"https://images.unsplash.com/photo-1659059530318-656a112ad2cd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx6b21iaWUlMjBhcG9jYWx5cHNlJTIwaG9ycm9yfGVufDF8fHx8MTc2MTg5OTYzNHww&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1",description:"Can you survive the zombie apocalypse and find the cure?"},{id:"2",name:"Area 51",image:"https://images.unsplash.com/photo-1569002925653-ed18f55d7292?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxlc2NhcGUlMjByb29tJTIwZGFyayUyMG15c3RlcmlvdXN8ZW58MXx8fHwxNzYxOTM1ODcyfDA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:5,categoryId:"1"},{id:"3",name:"Catacombs",image:"https://images.unsplash.com/photo-1637481687365-9b133c567071?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjYXRhY29tYnMlMjB1bmRlcmdyb3VuZCUyMHR1bm5lbHxlbnwxfHx8fDE3NjE5MzU4NzN8MA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"All ages",duration:"1 Hour",difficulty:2,categoryId:"1"},{id:"4",name:"Murder Mystery",image:"https://images.unsplash.com/photo-1636056471685-1cfdfa9d2e4b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtdXJkZXIlMjBteXN0ZXJ5JTIwZGV0ZWN0aXZlfGVufDF8fHx8MTc2MTkzNTg3M3ww&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:5,categoryId:"1"},{id:"5",name:"The Jolly Roger, Curse of the Devil's Shroud",image:"https://images.unsplash.com/photo-1561625116-df74735458a5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwaXJhdGUlMjBzaGlwJTIwd3JlY2t8ZW58MXx8fHwxNzYxOTM1ODc0fDA&ixlib=rb-4.1.0&q=80&w=1080",priceRange:"$25 - $30",ageRange:"Ages 6+",duration:"1 Hour",difficulty:0,categoryId:"1"}],additionalQuestions:[{id:"hear-about",question:"How did you hear about us?",type:"select",options:["Google","Facebook","Friend","Other"],required:!1}],cancellationPolicy:"Cash refunds are not available. If you are unable to keep your scheduled reservation, please contact us. We can rebook you to a different date and/or time or issue a refund in the form of a gift card."},[S,A]=j.useState(null),k=j.useCallback(async({showLoading:O=!0}={})=>{if(!a){console.log(" No embedKey provided, using default config"),d(void 0),f(null),A(null),h(!1);return}try{O&&h(!0),f(null),console.log(" Fetching widget config for embedKey:",a);const $=await C3.getVenueWidgetConfig(a);if(!$){console.error(" No venue found for embedKey:",a),d(void 0),f("Widget not found. Please check your embed code or contact the venue.");return}const{venue:T,widgetConfig:I}=$;console.log(" Venue found:",T.name,"(ID:",T.id,")"),A(T.id);const L={...C,...I,games:Array.isArray(I?.games)&&I.games.length>0?I.games:[]};d(L);const z=I?.primaryColor||T.primary_color||jE;n(z.startsWith("#")?z:`#${z}`),L.games.length||(console.warn(" No active games found for this venue"),f("No experiences available at this time. Please check back later.")),console.log(" Widget config loaded with",L.games.length,"games")}catch($){console.error(" Exception fetching venue data:",$),d(void 0),f($?.message||$?.details||"An error occurred loading the widget. Please try again later.")}finally{h(!1)}},[a]);j.useEffect(()=>{a?k({showLoading:!0}):h(!1)},[a,k]),j.useEffect(()=>{if(!S||!a)return;console.log(" Setting up real-time subscription for venue:",S);const O=pt.channel(`widget-${S}`).on("postgres_changes",{event:"*",schema:"public",table:"games",filter:`venue_id=eq.${S}`},$=>{console.log(" Game update detected:",$.eventType),k({showLoading:!1})}).on("postgres_changes",{event:"*",schema:"public",table:"venues",filter:`id=eq.${S}`},()=>{console.log(" Venue update detected"),k({showLoading:!1})}).subscribe();return()=>{console.log(" Cleaning up real-time subscriptions"),O.unsubscribe()}},[S,a,k]);const E=()=>{const O={primaryColor:s,config:c||C};switch(console.log(" Rendering widget:",t,"with color:",s),t){case"farebook":return r.jsx(IO,{...O});case"calendar":return r.jsx(Ww,{...O});case"bookgo":return r.jsx(moe,{...O});case"quick":return r.jsx(foe,{...O});case"multistep":return r.jsx(poe,{...O});case"resolvex":return r.jsx(xoe,{...O});case"singlegame":return console.log(" Rendering Calendar Single Event widget"),r.jsx(goe,{...O,gameName:v,gameDescription:g,gamePrice:w});default:return console.log(" Widget ID not matched, defaulting to farebook"),r.jsx(IO,{...O})}};return u?r.jsx(sN,{initialTheme:o,children:r.jsx("div",{className:`w-full min-h-screen flex items-center justify-center ${o==="dark"?"dark bg-[#0a0a0a]":"bg-white"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:"Loading widget..."})]})})}):m?r.jsx(sN,{initialTheme:o,children:r.jsx("div",{className:`w-full min-h-screen flex items-center justify-center ${o==="dark"?"dark bg-[#0a0a0a]":"bg-white"}`,children:r.jsxs("div",{className:"text-center max-w-md p-6",children:[r.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),r.jsx("h2",{className:`text-xl font-semibold mb-2 ${o==="dark"?"text-white":"text-gray-900"}`,children:"Widget Error"}),r.jsx("p",{className:`text-sm ${o==="dark"?"text-gray-400":"text-gray-600"}`,children:m}),r.jsx("p",{className:"text-xs mt-4 text-gray-500",children:"Please check your embed code and try again."})]})})}):r.jsx(sN,{initialTheme:o,children:r.jsx("div",{className:`w-full min-h-screen overflow-x-hidden ${o==="dark"?"dark bg-[#0a0a0a]":"bg-white"}`,style:{maxWidth:"100%"},children:E()})})}var woe=["PageUp","PageDown"],joe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Noe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},my="Slider",[DO,VQe,WQe]=fw(my),[Soe]=fl(my,[WQe]),[qQe,k3]=Soe(my),Coe=j.forwardRef((t,e)=>{const{name:s,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:f=!1,form:v,...x}=t,g=j.useRef(new Set),b=j.useRef(0),N=o==="horizontal"?HQe:GQe,[C=[],S]=qc({prop:u,defaultProp:d,onChange:T=>{[...g.current][b.current]?.focus(),h(T)}}),A=j.useRef(C);function k(T){const I=ZQe(C,T);$(T,I)}function E(T){$(T,b.current)}function O(){const T=A.current[b.current];C[b.current]!==T&&m(C)}function $(T,I,{commit:L}={commit:!1}){const z=rZe(i),M=sZe(Math.round((T-n)/i)*i+n,z),V=xb(M,[n,a]);S((B=[])=>{const F=XQe(B,V,I);if(tZe(F,c*i)){b.current=F.indexOf(V);const J=String(F)!==String(B);return J&&L&&m(F),J?F:B}else return B})}return r.jsx(qQe,{scope:t.__scopeSlider,name:s,disabled:l,min:n,max:a,valueIndexToChangeRef:b,thumbs:g.current,values:C,orientation:o,form:v,children:r.jsx(DO.Provider,{scope:t.__scopeSlider,children:r.jsx(DO.Slot,{scope:t.__scopeSlider,children:r.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:e,onPointerDown:ur(x.onPointerDown,()=>{l||(A.current=C)}),min:n,max:a,inverted:f,onSlideStart:l?void 0:k,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:O,onHomeKeyDown:()=>!l&&$(n,0,{commit:!0}),onEndKeyDown:()=>!l&&$(a,C.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:I})=>{if(!l){const M=woe.includes(T.key)||T.shiftKey&&joe.includes(T.key)?10:1,V=b.current,B=C[V],F=i*M*I;$(B+F,V,{commit:!0})}}})})})})});Coe.displayName=my;var[koe,_oe]=Soe(my,{startEdge:"left",endEdge:"right",size:"width",direction:1}),HQe=j.forwardRef((t,e)=>{const{min:s,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=t,[h,m]=j.useState(null),f=bs(e,N=>m(N)),v=j.useRef(void 0),x=mg(a),g=x==="ltr",b=g&&!i||!g&&i;function w(N){const C=v.current||h.getBoundingClientRect(),S=[0,C.width],k=lD(S,b?[s,n]:[n,s]);return v.current=C,k(N-C.left)}return r.jsx(koe,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:r.jsx(Aoe,{dir:x,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const C=w(N.clientX);o?.(C)},onSlideMove:N=>{const C=w(N.clientX);l?.(C)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:N=>{const S=Noe[b?"from-left":"from-right"].includes(N.key);d?.({event:N,direction:S?-1:1})}})})}),GQe=j.forwardRef((t,e)=>{const{min:s,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=t,u=j.useRef(null),h=bs(e,u),m=j.useRef(void 0),f=!a;function v(x){const g=m.current||u.current.getBoundingClientRect(),b=[0,g.height],N=lD(b,f?[n,s]:[s,n]);return m.current=g,N(x-g.top)}return r.jsx(koe,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:r.jsx(Aoe,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const g=v(x.clientY);i?.(g)},onSlideMove:x=>{const g=v(x.clientY);o?.(g)},onSlideEnd:()=>{m.current=void 0,l?.()},onStepKeyDown:x=>{const b=Noe[f?"from-bottom":"from-top"].includes(x.key);c?.({event:x,direction:b?-1:1})}})})}),Aoe=j.forwardRef((t,e)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=t,u=k3(my,s);return r.jsx(Jr.span,{...d,ref:e,onKeyDown:ur(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):woe.concat(joe).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ur(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():n(h)}),onPointerMove:ur(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:ur(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),Eoe="SliderTrack",Poe=j.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,a=k3(Eoe,s);return r.jsx(Jr.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:e})});Poe.displayName=Eoe;var RO="SliderRange",Toe=j.forwardRef((t,e)=>{const{__scopeSlider:s,...n}=t,a=k3(RO,s),i=_oe(RO,s),o=j.useRef(null),l=bs(e,o),c=a.values.length,d=a.values.map(m=>$oe(m,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(Jr.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});Toe.displayName=RO;var MO="SliderThumb",Ooe=j.forwardRef((t,e)=>{const s=VQe(t.__scopeSlider),[n,a]=j.useState(null),i=bs(e,l=>a(l)),o=j.useMemo(()=>n?s().findIndex(l=>l.ref.current===n):-1,[s,n]);return r.jsx(YQe,{...t,ref:i,index:o})}),YQe=j.forwardRef((t,e)=>{const{__scopeSlider:s,index:n,name:a,...i}=t,o=k3(MO,s),l=_oe(MO,s),[c,d]=j.useState(null),u=bs(e,w=>d(w)),h=c?o.form||!!c.closest("form"):!0,m=a5(c),f=o.values[n],v=f===void 0?0:$oe(f,o.min,o.max),x=QQe(n,o.values.length),g=m?.[l.size],b=g?JQe(g,v,l.direction):0;return j.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${b}px)`},children:[r.jsx(DO.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(Jr.span,{role:"slider","aria-label":t["aria-label"]||x,"aria-valuemin":o.min,"aria-valuenow":f,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:f===void 0?{display:"none"}:t.style,onFocus:ur(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&r.jsx(Ioe,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:f},n)]})});Ooe.displayName=MO;var KQe="RadioBubbleInput",Ioe=j.forwardRef(({__scopeSlider:t,value:e,...s},n)=>{const a=j.useRef(null),i=bs(a,n),o=a3(e);return j.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&u){const h=new Event("input",{bubbles:!0});u.call(l,e),l.dispatchEvent(h)}},[o,e]),r.jsx(Jr.input,{style:{display:"none"},...s,ref:i,defaultValue:e})});Ioe.displayName=KQe;function XQe(t=[],e,s){const n=[...t];return n[s]=e,n.sort((a,i)=>a-i)}function $oe(t,e,s){const i=100/(s-e)*(t-e);return xb(i,[0,100])}function QQe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function ZQe(t,e){if(t.length===1)return 0;const s=t.map(a=>Math.abs(a-e)),n=Math.min(...s);return s.indexOf(n)}function JQe(t,e,s){const n=t/2,i=lD([0,50],[0,n]);return(n-i(e)*s)*s}function eZe(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function tZe(t,e){if(e>0){const s=eZe(t);return Math.min(...s)>=e}return!0}function lD(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(s-t[0])}}function rZe(t){return(String(t).split(".")[1]||"").length}function sZe(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var nZe=Coe,aZe=Poe,iZe=Toe,oZe=Ooe;function lZe({className:t,defaultValue:e,value:s,min:n=0,max:a=100,...i}){const o=j.useMemo(()=>Array.isArray(s)?s:Array.isArray(e)?e:[n,a],[s,e,n,a]);return r.jsxs(nZe,{"data-slot":"slider",defaultValue:e,value:s,min:n,max:a,className:Ar("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[r.jsx(aZe,{"data-slot":"slider-track",className:Ar("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:r.jsx(iZe,{"data-slot":"slider-range",className:Ar("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(l,c)=>r.jsx(oZe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},c))]})}function cZe(){const{theme:t}=Nr(),e=t==="dark",{settings:s,updateSettings:n,playNotificationSound:a}=MI(),[i,o]=ce.useState(s),[l,c]=ce.useState(!1),[d,u]=ce.useState(!1);ce.useEffect(()=>{o(s),c(!1),u(!1)},[s]);const h=e?"bg-[#161616]":"bg-white",m=e?"border-[#1e1e1e]":"border-gray-200",f=e?"text-white":"text-gray-900",v=e?"text-[#a3a3a3]":"text-gray-600",x=e?"text-white":"text-gray-700",g=S=>{o(A=>({...A,...S})),c(!0)},b=S=>{g({soundVolume:S[0]})},w=()=>{a()},N=()=>{n(i),c(!1),u(!0),re.success("Your offline changes were synced",{description:"Notification settings saved successfully"}),setTimeout(()=>{u(!1)},3e3)},C=()=>{o(s),c(!1),u(!1),re.info("Changes discarded")};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx(zE,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"Sound Notifications"}),r.jsx("p",{className:`text-sm ${v}`,children:"Play audio alerts for important events"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{htmlFor:"sound-enabled",className:x,children:"Enable sound notifications"}),r.jsx(Rt,{id:"sound-enabled",checked:i.soundEnabled,onCheckedChange:S=>g({soundEnabled:S})})]}),i.soundEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{className:x,children:"Volume"}),r.jsxs("span",{className:`text-sm ${v}`,children:[i.soundVolume,"%"]})]}),r.jsx(lZe,{value:[i.soundVolume],onValueChange:b,max:100,step:5,className:"w-full"}),r.jsxs(W,{variant:"outline",size:"sm",onClick:w,className:`w-full gap-2 ${e?"border-[#1e1e1e] bg-transparent hover:bg-[#0a0a0a]":""}`,children:[r.jsx(zE,{className:"w-4 h-4"}),"Test Sound"]})]}),r.jsx(Ze,{className:e?"bg-[#1e1e1e]":"bg-gray-200"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:x,children:"Play sound for:"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qs,{className:`w-4 h-4 ${v}`}),r.jsx("span",{className:`text-sm ${v}`,children:"New bookings"})]}),r.jsx(Rt,{checked:i.soundForBookings,onCheckedChange:S=>g({soundForBookings:S})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rn,{className:`w-4 h-4 ${v}`}),r.jsx("span",{className:`text-sm ${v}`,children:"Payment received"})]}),r.jsx(Rt,{checked:i.soundForPayments,onCheckedChange:S=>g({soundForPayments:S})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ln,{className:`w-4 h-4 ${v}`}),r.jsx("span",{className:`text-sm ${v}`,children:"Cancellations"})]}),r.jsx(Rt,{checked:i.soundForCancellations,onCheckedChange:S=>g({soundForCancellations:S})})]})]})]})]})]}),r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[r.jsx(pi,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"Push Notifications"}),r.jsx("p",{className:`text-sm ${v}`,children:"In-app and browser notifications"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(qs,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"New Bookings"}),r.jsx("p",{className:`text-sm ${v}`,children:"Instant alerts for new bookings"})]})]}),r.jsx(Rt,{checked:i.desktopForBookings,onCheckedChange:S=>g({desktopForBookings:S})})]})}),r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Xr,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"Staff Updates"}),r.jsx("p",{className:`text-sm ${v}`,children:"Staff check-ins and schedule changes"})]})]}),r.jsx(Rt,{checked:i.desktopForStaffUpdates,onCheckedChange:S=>g({desktopForStaffUpdates:S})})]})})]})]}),r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[r.jsx(Ds,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"Email Notifications"}),r.jsx("p",{className:`text-sm ${v}`,children:"Manage your email notification preferences"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(pi,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"Booking Notifications"}),r.jsx("p",{className:`text-sm ${v}`,children:"New bookings, cancellations, and modifications"})]})]}),r.jsx(Rt,{checked:i.emailForBookings,onCheckedChange:S=>g({emailForBookings:S})})]})}),r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Pu,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"Reports & Analytics"}),r.jsx("p",{className:`text-sm ${v}`,children:"Daily, weekly, and monthly reports"})]})]}),r.jsx(Rt,{checked:i.emailForReports,onCheckedChange:S=>g({emailForReports:S})})]})}),r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ws,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"Marketing & Updates"}),r.jsx("p",{className:`text-sm ${v}`,children:"Product updates, tips, and promotional content"})]})]}),r.jsx(Rt,{checked:i.emailForMarketing,onCheckedChange:S=>g({emailForMarketing:S})})]})})]})]}),r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[r.jsx(ni,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"SMS Notifications"}),r.jsx("p",{className:`text-sm ${v}`,children:"Text message alerts"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${e?"bg-[#0a0a0a]":"bg-gray-50"} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Nu,{className:`w-5 h-5 mt-0.5 ${v}`}),r.jsxs("div",{children:[r.jsx("div",{className:`${f} mb-1`,children:"Critical Alerts"}),r.jsx("p",{className:`text-sm ${v}`,children:"Urgent notifications only (cancellations, system issues)"})]})]}),r.jsx(Rt,{checked:i.smsEnabled,onCheckedChange:S=>g({smsEnabled:S})})]})}),i.smsEnabled&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:e?"bg-[#1e1e1e]":"bg-gray-200"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"sms-phone",className:x,children:"Phone number"}),r.jsx(de,{id:"sms-phone",type:"tel",placeholder:"+1 (555) 123-4567",value:i.smsPhoneNumber,onChange:S=>g({smsPhoneNumber:S.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`}),r.jsx("p",{className:`text-xs ${v}`,children:"We'll send a verification code to this number"})]})]})]})]}),r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx(Vv,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"Quiet Hours"}),r.jsx("p",{className:`text-sm ${v}`,children:"Pause notifications during specific hours (Do Not Disturb)"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{htmlFor:"quiet-hours-enabled",className:x,children:"Enable quiet hours"}),r.jsx(Rt,{id:"quiet-hours-enabled",checked:i.quietHoursEnabled,onCheckedChange:S=>g({quietHoursEnabled:S})})]}),i.quietHoursEnabled&&r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:e?"bg-[#1e1e1e]":"bg-gray-200"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"quiet-start",className:x,children:"Start time"}),r.jsx(de,{id:"quiet-start",type:"time",value:i.quietHoursStart,onChange:S=>g({quietHoursStart:S.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"quiet-end",className:x,children:"End time"}),r.jsx(de,{id:"quiet-end",type:"time",value:i.quietHoursEnd,onChange:S=>g({quietHoursEnd:S.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`})]})]}),r.jsx("p",{className:`text-xs ${v}`,children:"No sound or desktop notifications will be shown during these hours"})]})]})]}),r.jsxs(he,{className:`${h} border ${m} shadow-sm p-6`,children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx(pi,{className:`w-5 h-5 mt-1 ${e?"text-[#4f46e5]":"text-blue-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`mb-1 ${f}`,children:"Additional Preferences"}),r.jsx("p",{className:`text-sm ${v}`,children:"Fine-tune your notification experience"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(X,{htmlFor:"in-app",className:x,children:"Show in-app notifications"}),r.jsx("p",{className:`text-xs ${v} mt-1`,children:"Display toast notifications in the app"})]}),r.jsx(Rt,{id:"in-app",checked:i.showInAppNotifications,onCheckedChange:S=>g({showInAppNotifications:S})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(X,{htmlFor:"group-similar",className:x,children:"Group similar notifications"}),r.jsx("p",{className:`text-xs ${v} mt-1`,children:"Combine multiple similar notifications"})]}),r.jsx(Rt,{id:"group-similar",checked:i.groupSimilarNotifications,onCheckedChange:S=>g({groupSimilarNotifications:S})})]})]})]}),r.jsxs("div",{className:`sticky bottom-0 left-0 right-0 py-4 px-6 -mx-6 flex items-center justify-end gap-3 border-t ${e?"bg-[#0a0a0a] border-[#1e1e1e]":"bg-white border-gray-200"} z-10 shadow-lg`,children:[r.jsx(W,{variant:"outline",onClick:C,disabled:!l||d,className:`h-11 min-w-[120px] ${e?"border-[#1e1e1e] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white disabled:opacity-40 disabled:cursor-not-allowed":"border-gray-300 hover:bg-gray-50 disabled:opacity-40 disabled:cursor-not-allowed"}`,children:"Cancel"}),r.jsx(W,{onClick:N,disabled:!l||d,className:"h-11 min-w-[200px] gap-2 text-white hover:opacity-90 disabled:opacity-100 disabled:cursor-default transition-all duration-300",style:{backgroundColor:d?"#10b981":l?"#4f46e5":"#9ca3af"},children:d?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4"}),"Save Notification Settings"]})})]})]})}function dZe(){const{theme:t}=Nr(),e=t==="dark",{users:s,roles:n,createUser:a,updateUser:i,deleteUser:o,currentUser:l}=no(),[c,d]=j.useState(""),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState(!1),[g,b]=j.useState(null),[w,N]=j.useState(!1),[C,S]=j.useState(!1),[A,k]=j.useState({name:"",email:"",role:"manager"}),E=e?"bg-[#161616]":"bg-white",O=e?"border-[#1e1e1e]":"border-gray-200",$=e?"text-white":"text-gray-900",T=e?"text-[#a3a3a3]":"text-gray-600",I=e?"hover:bg-[#1a1a1a]":"hover:bg-gray-50",L=s.filter(q=>q.name.toLowerCase().includes(c.toLowerCase())||q.email.toLowerCase().includes(c.toLowerCase())),z=q=>n.find(U=>U.id===q),M=q=>{switch(q){case"active":return r.jsxs(De,{className:"bg-green-500/10 text-green-600 border-green-500/20",children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Active"]});case"inactive":return r.jsxs(De,{className:"bg-gray-500/10 text-gray-600 border-gray-500/20",children:[r.jsx(ln,{className:"w-3 h-3 mr-1"}),"Inactive"]});case"suspended":return r.jsxs(De,{className:"bg-red-500/10 text-red-600 border-red-500/20",children:[r.jsx(hs,{className:"w-3 h-3 mr-1"}),"Suspended"]});default:return null}},V=async()=>{try{const q={name:A.name,email:A.email,role:A.role,status:"active"};await a(q),N(!0),re.success("User created successfully"),setTimeout(()=>{h(!1),N(!1),k({name:"",email:"",role:"manager"})},1500)}catch(q){re.error("Failed to create user"),console.error(q)}},B=async()=>{if(g)try{await i(g.id,{name:A.name,role:A.role}),S(!0),re.success("User updated successfully"),setTimeout(()=>{f(!1),S(!1),b(null),k({name:"",email:"",role:"manager"})},1500)}catch(q){re.error("Failed to update user"),console.error(q)}},F=async()=>{if(g)try{await o(g.id),re.success("User deleted successfully"),x(!1),b(null)}catch(q){re.error(q.message||"Failed to delete user"),console.error(q)}},J=q=>{b(q),k({name:q.name,email:q.email,role:q.role}),f(!0)},ee=q=>{b(q),x(!0)};return r.jsxs(r.Fragment,{children:[r.jsx(Ei,{title:"Account Settings",description:"Manage users, roles, and permissions"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(wn,{defaultValue:"users",className:"space-y-6",children:[r.jsxs(kn,{className:e?"bg-[#161616] border border-[#1e1e1e]":"bg-gray-100",children:[r.jsxs(Tt,{value:"users",className:"gap-2",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Users"]}),r.jsxs(Tt,{value:"roles",className:"gap-2",children:[r.jsx(zs,{className:"w-4 h-4"}),"Roles & Permissions"]}),r.jsxs(Tt,{value:"notifications",className:"gap-2",children:[r.jsx(pi,{className:"w-4 h-4"}),"Notifications"]})]}),r.jsxs(Bt,{value:"users",className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search users...",value:c,onChange:q=>d(q.target.value),className:`pl-10 h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs(W,{onClick:()=>h(!0),className:"gap-2",style:{backgroundColor:"#4f46e5"},children:[r.jsx(Ts,{className:"w-4 h-4"}),"Add User"]})]}),r.jsx(he,{className:`${E} border ${O} shadow-sm`,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:`border-b ${O}`,children:r.jsxs("tr",{children:[r.jsx("th",{className:`text-left p-4 ${T}`,children:"User"}),r.jsx("th",{className:`text-left p-4 ${T}`,children:"Role"}),r.jsx("th",{className:`text-left p-4 ${T}`,children:"Status"}),r.jsx("th",{className:`text-left p-4 ${T}`,children:"Last Login"}),r.jsx("th",{className:`text-right p-4 ${T}`,children:"Actions"})]})}),r.jsx("tbody",{children:L.map(q=>{const U=z(q.role);return r.jsxs("tr",{className:`border-b ${O} ${I} transition-colors`,children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${e?"bg-[#1e1e1e]":"bg-gray-100"}`,children:r.jsx("span",{className:$,children:q.name.charAt(0).toUpperCase()})}),r.jsxs("div",{children:[r.jsx("div",{className:$,children:q.name}),r.jsx("div",{className:`text-sm ${T}`,children:q.email})]})]})}),r.jsx("td",{className:"p-4",children:U&&r.jsx(De,{className:`${e?"bg-opacity-20":"bg-opacity-10"} border`,style:{backgroundColor:e?`${U.color}20`:`${U.color}10`,color:U.color,borderColor:e?`${U.color}40`:`${U.color}20`},children:U.name})}),r.jsx("td",{className:"p-4",children:M(q.status)}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:T,children:q.lastLogin?new Date(q.lastLogin).toLocaleDateString():"Never"})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>J(q),disabled:q.id===l?.id,className:e?"hover:bg-[#1a1a1a] text-[#a3a3a3] hover:text-white":"",children:r.jsx(b1,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>ee(q),disabled:q.id===l?.id,className:e?"text-red-400 hover:text-red-300 hover:bg-[#1a1a1a]":"text-red-600 hover:text-red-700",children:r.jsx(ks,{className:"w-4 h-4"})})]})})]},q.id)})})]})})})]}),r.jsx(Bt,{value:"roles",className:"space-y-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(q=>r.jsxs(he,{className:`${E} border ${O} shadow-sm p-6`,children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${q.color}20`},children:r.jsx(zs,{className:"w-6 h-6",style:{color:q.color}})}),r.jsxs("div",{children:[r.jsx("h3",{className:$,children:q.name}),r.jsx("p",{className:`text-sm ${T}`,children:q.description})]})]})}),r.jsxs("div",{className:"space-y-3 mt-6",children:[r.jsxs("h4",{className:`text-sm ${T} mb-2`,children:["Permissions (",q.permissions.length,")"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[q.permissions.slice(0,10).map(U=>r.jsx(De,{variant:"outline",className:`text-xs ${e?"border-[#2a2a2a] text-[#a3a3a3] bg-[#0a0a0a]":"border-gray-300 text-gray-600 bg-white"}`,children:U},U)),q.permissions.length>10&&r.jsxs(De,{variant:"outline",className:`text-xs ${e?"border-[#2a2a2a] text-[#a3a3a3] bg-[#0a0a0a]":"border-gray-300 text-gray-600"}`,children:["+",q.permissions.length-10," more"]})]})]})]},q.id))})}),r.jsx(Bt,{value:"notifications",className:"space-y-6 pb-24",children:r.jsx(cZe,{})})]}),r.jsx(mr,{open:u,onOpenChange:h,children:r.jsxs(fr,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsxs(br,{children:[r.jsx(pr,{className:$,children:"Add New User"}),r.jsx(wr,{className:T,children:"Create a new user account with specific role and permissions"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Name"}),r.jsx(de,{placeholder:"John Doe",value:A.name,onChange:q=>k({...A,name:q.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Email"}),r.jsx(de,{type:"email",placeholder:"john@example.com",value:A.email,onChange:q=>k({...A,email:q.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Role"}),r.jsxs(sr,{value:A.role,onValueChange:q=>k({...A,role:q}),children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsx(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:n.filter(q=>q.id!=="super-admin").map(q=>r.jsx(Ae,{value:q.id,className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:q.name},q.id))})]})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>h(!1),className:e?"border-[#1e1e1e] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",disabled:w,children:"Cancel"}),r.jsx(W,{onClick:V,className:"text-white hover:opacity-90 transition-all duration-300 gap-2",style:{backgroundColor:w?"#10b981":"#4f46e5"},disabled:w,children:w?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ts,{className:"w-4 h-4"}),"Create User"]})})]})]})}),r.jsx(mr,{open:m,onOpenChange:f,children:r.jsxs(fr,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsxs(br,{children:[r.jsx(pr,{className:$,children:"Edit User"}),r.jsx(wr,{className:T,children:"Update user information and role"})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Name"}),r.jsx(de,{placeholder:"John Doe",value:A.name,onChange:q=>k({...A,name:q.target.value}),className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Email"}),r.jsx(de,{type:"email",value:A.email,disabled:!0,className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-[#737373]":"bg-gray-100 border-gray-300"} opacity-50 cursor-not-allowed`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-[#a3a3a3]":"text-gray-700",children:"Role"}),r.jsxs(sr,{value:A.role,onValueChange:q=>k({...A,role:q}),children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsx(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"",children:n.filter(q=>q.id!=="super-admin").map(q=>r.jsx(Ae,{value:q.id,className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:q.name},q.id))})]})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:()=>f(!1),className:e?"border-[#1e1e1e] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",disabled:C,children:"Cancel"}),r.jsx(W,{onClick:B,className:"text-white hover:opacity-90 transition-all duration-300 gap-2",style:{backgroundColor:C?"#10b981":"#4f46e5"},disabled:C,children:C?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4"}),"Success"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4"}),"Save Changes"]})})]})]})}),r.jsx(rp,{open:v,onOpenChange:x,children:r.jsxs(sp,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsxs(np,{children:[r.jsx(ip,{className:$,children:"Delete User"}),r.jsxs(op,{className:T,children:["Are you sure you want to delete ",g?.name,"? This action cannot be undone."]})]}),r.jsxs(ap,{children:[r.jsx(lp,{className:e?"border-[#1e1e1e] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",children:"Cancel"}),r.jsx(Ng,{onClick:F,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})]})}function uZe({transaction:t,isOpen:e,onClose:s,onRefund:n}){const{theme:a}=Nr(),i=a==="dark",[o,l]=j.useState(""),[c,d]=j.useState("customer_request"),[u,h]=j.useState(""),[m,f]=j.useState(!0),[v,x]=j.useState(!1),g=t?t.amount-(t.refundAmount||0):0,b=async()=>{if(!t)return;const N=parseFloat(o);if(isNaN(N)||N<=0){re.error("Please enter a valid refund amount");return}if(N>g){re.error(`Refund amount cannot exceed $${g.toFixed(2)}`);return}x(!0);try{await n(t.id,N,c,u,m),re.success("Refund processed successfully"),w()}catch(C){re.error("Failed to process refund"),console.error(C)}finally{x(!1)}},w=()=>{l(""),d("customer_request"),h(""),f(!0),s()};return t?r.jsx(mr,{open:e,onOpenChange:w,children:r.jsxs(fr,{className:`max-w-md ${i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:i?"text-white":"text-gray-900",children:"Process Refund"}),r.jsxs(wr,{className:i?"text-[#a3a3a3]":"text-gray-600",children:["Refund transaction ",t.transactionRef]})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsx("div",{className:`p-4 rounded-lg ${i?"bg-[#0a0a0a] border border-[#2a2a2a]":"bg-gray-50 border border-gray-200"}`,children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:i?"text-[#a3a3a3]":"text-gray-600",children:"Original Amount:"}),r.jsxs("span",{className:i?"text-white":"text-gray-900",children:["$",t.amount.toFixed(2)]})]}),t.refundAmount&&t.refundAmount>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:i?"text-[#a3a3a3]":"text-gray-600",children:"Already Refunded:"}),r.jsxs("span",{className:i?"text-red-400":"text-red-600",children:["-$",t.refundAmount.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t ${isDark ? 'border-[#2a2a2a]' : 'border-gray-200'}",children:[r.jsx("span",{className:i?"text-white":"text-gray-900",children:"Available to Refund:"}),r.jsxs("span",{className:i?"text-green-400":"text-green-600",children:["$",g.toFixed(2)]})]})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Refund Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx(In,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${i?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{type:"number",step:"0.01",min:"0.01",max:g,placeholder:"0.00",value:o,onChange:N=>l(N.target.value),className:`pl-10 h-12 ${i?"bg-[#0a0a0a] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:()=>l((g/2).toFixed(2)),className:i?"border-[#2a2a2a] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",children:"50%"}),r.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:()=>l(g.toFixed(2)),className:i?"border-[#2a2a2a] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",children:"Full Refund"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Reason"}),r.jsxs(sr,{value:c,onValueChange:N=>d(N),children:[r.jsx(ar,{className:`h-12 ${i?"bg-[#0a0a0a] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:i?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Ae,{value:"customer_request",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Customer Request"}),r.jsx(Ae,{value:"booking_cancelled",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Booking Cancelled"}),r.jsx(Ae,{value:"duplicate_charge",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Duplicate Charge"}),r.jsx(Ae,{value:"service_issue",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Service Issue"}),r.jsx(Ae,{value:"overcharge",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Overcharge"}),r.jsx(Ae,{value:"other",className:i?"text-white focus:bg-[#161616] focus:text-white":"",children:"Other"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:i?"text-[#a3a3a3]":"text-gray-700",children:"Internal Notes (Optional)"}),r.jsx(Ps,{placeholder:"Add any additional notes about this refund...",value:u,onChange:N=>h(N.target.value),rows:3,className:i?"bg-[#0a0a0a] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ku,{id:"notify",checked:m,onCheckedChange:N=>f(N)}),r.jsx(X,{htmlFor:"notify",className:`cursor-pointer ${i?"text-[#a3a3a3]":"text-gray-700"}`,children:"Send refund confirmation email to customer"})]}),r.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg ${i?"bg-amber-500/10 border border-amber-500/20":"bg-amber-50 border border-amber-200"}`,children:[r.jsx(hs,{className:`w-5 h-5 mt-0.5 ${i?"text-amber-400":"text-amber-600"}`}),r.jsx("p",{className:`text-sm ${i?"text-amber-400":"text-amber-800"}`,children:"This action cannot be undone. The refund will be processed immediately."})]})]}),r.jsxs(Us,{children:[r.jsx(W,{variant:"outline",onClick:w,disabled:v,className:i?"border-[#2a2a2a] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":"",children:"Cancel"}),r.jsx(W,{onClick:b,disabled:v||!o,className:"bg-red-600 hover:bg-red-700 text-white",children:v?"Processing...":"Process Refund"})]})]})}):null}const hZe=[{id:"txn_001",bookingId:"BK-2024-001",customerId:"cust_001",customerName:"Sarah Johnson",customerEmail:"sarah.johnson@email.com",type:"booking_payment",amount:150,currency:"USD",status:"completed",paymentMethod:{type:"credit_card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2025,holderName:"Sarah Johnson"},createdAt:"2024-11-03T10:30:00Z",processedAt:"2024-11-03T10:30:05Z",transactionRef:"pi_3QHGwK2eZvKYlo2C0b8h4r5t",invoiceNumber:"INV-2024-001",receiptUrl:"#",description:"Escape Room Booking - The Mystery Chamber (4 players)",reconciled:!0,reconciledAt:"2024-11-03T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.1"},{id:"txn_002",bookingId:"BK-2024-002",customerId:"cust_002",customerName:"Michael Chen",customerEmail:"michael.chen@email.com",type:"booking_payment",amount:200,currency:"USD",status:"completed",paymentMethod:{type:"credit_card",last4:"5555",brand:"Mastercard",expiryMonth:8,expiryYear:2026,holderName:"Michael Chen"},createdAt:"2024-11-03T11:15:00Z",processedAt:"2024-11-03T11:15:03Z",transactionRef:"pi_3QHGwL3fZvKYlo2C1c9i5s6u",invoiceNumber:"INV-2024-002",receiptUrl:"#",description:"Escape Room Booking - Horror Mansion (6 players)",reconciled:!0,reconciledAt:"2024-11-03T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.2"},{id:"txn_003",bookingId:"BK-2024-003",customerId:"cust_003",customerName:"Emily Rodriguez",customerEmail:"emily.rodriguez@email.com",type:"booking_payment",amount:120,currency:"USD",status:"refunded",paymentMethod:{type:"credit_card",last4:"1234",brand:"Visa",expiryMonth:3,expiryYear:2025,holderName:"Emily Rodriguez"},createdAt:"2024-11-02T14:20:00Z",processedAt:"2024-11-02T14:20:04Z",refundedAt:"2024-11-02T16:30:00Z",transactionRef:"pi_3QHGwM4gZvKYlo2C2d0j6t7v",invoiceNumber:"INV-2024-003",receiptUrl:"#",refundAmount:120,refundReason:"booking_cancelled",refundNotes:"Customer had to cancel due to emergency",refundedBy:"admin@bookingtms.com",description:"Escape Room Booking - Pirate Adventure (3 players)",reconciled:!0,reconciledAt:"2024-11-02T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.3"},{id:"txn_004",bookingId:"BK-2024-004",customerId:"cust_004",customerName:"David Thompson",customerEmail:"david.thompson@email.com",type:"booking_payment",amount:180,currency:"USD",status:"pending",paymentMethod:{type:"bank_transfer",holderName:"David Thompson"},createdAt:"2024-11-03T15:45:00Z",transactionRef:"bt_3QHGwN5hZvKYlo2C3e1k7u8w",invoiceNumber:"INV-2024-004",description:"Escape Room Booking - Space Station (5 players)",reconciled:!1,createdBy:"system",ipAddress:"192.168.1.4"},{id:"txn_005",bookingId:"BK-2024-005",customerId:"cust_005",customerName:"Jessica Martinez",customerEmail:"jessica.martinez@email.com",type:"booking_payment",amount:90,currency:"USD",status:"failed",paymentMethod:{type:"credit_card",last4:"9999",brand:"Amex",expiryMonth:6,expiryYear:2024,holderName:"Jessica Martinez"},createdAt:"2024-11-03T16:00:00Z",transactionRef:"pi_3QHGwO6iZvKYlo2C4f2l8v9x",description:"Escape Room Booking - Zombie Outbreak (2 players)",reconciled:!1,createdBy:"system",ipAddress:"192.168.1.5",notes:"Card declined - insufficient funds"},{id:"txn_006",bookingId:"BK-2024-006",customerId:"cust_006",customerName:"Robert Wilson",customerEmail:"robert.wilson@email.com",type:"booking_payment",amount:250,currency:"USD",status:"partially_refunded",paymentMethod:{type:"credit_card",last4:"7777",brand:"Visa",expiryMonth:10,expiryYear:2026,holderName:"Robert Wilson"},createdAt:"2024-11-01T09:00:00Z",processedAt:"2024-11-01T09:00:02Z",refundedAt:"2024-11-01T14:00:00Z",transactionRef:"pi_3QHGwP7jZvKYlo2C5g3m9w0y",invoiceNumber:"INV-2024-006",receiptUrl:"#",refundAmount:50,refundReason:"service_issue",refundNotes:"One player unable to participate, partial refund issued",refundedBy:"admin@bookingtms.com",description:"Escape Room Booking - Corporate Team Building (8 players)",reconciled:!0,reconciledAt:"2024-11-01T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.6"},{id:"txn_007",customerId:"cust_007",customerName:"Amanda Lee",customerEmail:"amanda.lee@email.com",type:"gift_card",amount:100,currency:"USD",status:"completed",paymentMethod:{type:"paypal",holderName:"Amanda Lee"},createdAt:"2024-11-02T12:30:00Z",processedAt:"2024-11-02T12:30:01Z",transactionRef:"pp_3QHGwQ8kZvKYlo2C6h4n0x1z",invoiceNumber:"INV-2024-007",receiptUrl:"#",description:"Gift Card Purchase - $100 value",reconciled:!0,reconciledAt:"2024-11-02T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.7"},{id:"txn_008",bookingId:"BK-2024-007",customerId:"cust_008",customerName:"Christopher Brown",customerEmail:"christopher.brown@email.com",type:"booking_payment",amount:160,currency:"USD",status:"completed",paymentMethod:{type:"cash",holderName:"Christopher Brown"},createdAt:"2024-11-03T13:00:00Z",processedAt:"2024-11-03T13:00:00Z",transactionRef:"cash_001",invoiceNumber:"INV-2024-008",receiptUrl:"#",description:"Escape Room Booking - Medieval Quest (4 players) - Walk-in",reconciled:!1,createdBy:"staff@bookingtms.com",ipAddress:"192.168.1.8",notes:"Cash payment at front desk"},{id:"txn_009",bookingId:"BK-2024-008",customerId:"cust_009",customerName:"Sophia Anderson",customerEmail:"sophia.anderson@email.com",type:"booking_payment",amount:140,currency:"USD",status:"processing",paymentMethod:{type:"stripe",last4:"3333",brand:"Visa",expiryMonth:9,expiryYear:2025,holderName:"Sophia Anderson"},createdAt:"2024-11-03T17:00:00Z",transactionRef:"pi_3QHGwR9lZvKYlo2C7i5o1y2a",invoiceNumber:"INV-2024-009",description:"Escape Room Booking - Detective Mystery (4 players)",reconciled:!1,createdBy:"system",ipAddress:"192.168.1.9"},{id:"txn_010",bookingId:"BK-2024-009",customerId:"cust_010",customerName:"Daniel Garcia",customerEmail:"daniel.garcia@email.com",type:"booking_payment",amount:220,currency:"USD",status:"completed",paymentMethod:{type:"gift_card",holderName:"Daniel Garcia"},createdAt:"2024-11-03T10:00:00Z",processedAt:"2024-11-03T10:00:01Z",transactionRef:"gc_3QHGwS0mZvKYlo2C8j6p2z3b",invoiceNumber:"INV-2024-010",receiptUrl:"#",description:"Escape Room Booking - Cyber Heist (6 players) - Gift Card Redemption",reconciled:!0,reconciledAt:"2024-11-03T23:59:00Z",reconciledBy:"admin@bookingtms.com",createdBy:"system",ipAddress:"192.168.1.10",notes:"Redeemed gift card GC-2024-001"}],p1={totalRevenue:1610,totalRefunds:170,netRevenue:1440,transactionCount:10,successRate:70},x1={reconciledTransactions:6,unreconciledTransactions:4,reconciledAmount:1040,unreconciledAmount:570,lastReconciledDate:"2024-11-03T23:59:00Z"};function mZe(){const{theme:t}=Nr(),e=t==="dark",{hasPermission:s}=no(),[n,a]=j.useState(hZe),[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,u]=j.useState("all"),[h,m]=j.useState("all"),[f,v]=j.useState(null),[x,g]=j.useState(!1),[b,w]=j.useState(!1),[N,C]=j.useState(!1),[S,A]=j.useState("csv"),[k,E]=j.useState(!1),O=e?"text-white":"text-gray-900",$=e?"text-[#a3a3a3]":"text-gray-600",T=j.useMemo(()=>n.filter(B=>{const F=B.customerName.toLowerCase().includes(i.toLowerCase())||B.customerEmail.toLowerCase().includes(i.toLowerCase())||B.transactionRef.toLowerCase().includes(i.toLowerCase())||B.bookingId&&B.bookingId.toLowerCase().includes(i.toLowerCase()),J=l==="all"||B.status===l,ee=d==="all"||B.paymentMethod.type===d;let q=!0;if(h!=="all"){const U=new Date(B.createdAt),Z=new Date;if(h==="today")q=U.toDateString()===Z.toDateString();else if(h==="week"){const K=new Date(Z.getTime()-6048e5);q=U>=K}else if(h==="month"){const K=new Date(Z.getTime()-2592e6);q=U>=K}}return F&&J&&ee&&q}),[n,i,l,d,h]),I=B=>{const J={completed:{icon:Lt,className:e?"bg-green-500/20 text-green-400 border-green-500/30":"bg-green-500/10 text-green-600 border-green-500/20"},pending:{icon:jr,className:e?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-amber-500/10 text-amber-600 border-amber-500/20"},processing:{icon:Ln,className:e?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-blue-500/10 text-blue-600 border-blue-500/20"},failed:{icon:ln,className:e?"bg-red-500/20 text-red-400 border-red-500/30":"bg-red-500/10 text-red-600 border-red-500/20"},refunded:{icon:N0,className:e?"bg-gray-500/20 text-gray-400 border-gray-500/30":"bg-gray-500/10 text-gray-600 border-gray-500/20"},partially_refunded:{icon:N0,className:e?"bg-orange-500/20 text-orange-400 border-orange-500/30":"bg-orange-500/10 text-orange-600 border-orange-500/20"},cancelled:{icon:ln,className:e?"bg-gray-500/20 text-gray-400 border-gray-500/30":"bg-gray-500/10 text-gray-600 border-gray-500/20"}}[B],ee=J.icon,q=B.replace("_"," ").replace(/\b\w/g,U=>U.toUpperCase());return r.jsxs(De,{className:`${J.className} gap-1`,children:[r.jsx(ee,{className:"w-3 h-3"}),q]})},L=(B,F)=>F.last4?`${F.brand}  ${F.last4}`:B.replace("_"," ").replace(/\b\w/g,J=>J.toUpperCase()),z=async(B,F,J,ee,q)=>{if(!n.find(K=>K.id===B))return;await new Promise(K=>setTimeout(K,1e3));const Z=n.map(K=>{if(K.id===B){const se=(K.refundAmount||0)+F;return{...K,status:se>=K.amount?"refunded":"partially_refunded",refundAmount:se,refundReason:J,refundNotes:ee,refundedAt:new Date().toISOString(),refundedBy:"current-user@bookingtms.com"}}return K});a(Z)},M=async()=>{try{E(!0);const B=T;if(!B||B.length===0){re.error("No transactions to export based on current filters.");return}if(S==="csv"){const F=["Transaction Ref","Type","Status","Amount","Currency","Refund Amount","Customer Name","Customer Email","Booking ID","Payment Method","Card Brand","Last4","Created At","Processed At","Refunded At","Invoice Number","Receipt URL","Reconciled","Reconciled At"],J=B.map(K=>[K.transactionRef,K.type,K.status,K.amount.toFixed(2),K.currency,(K.refundAmount??0).toFixed(2),K.customerName,K.customerEmail,K.bookingId??"",K.paymentMethod?.type??"",K.paymentMethod?.brand??"",K.paymentMethod?.last4??"",new Date(K.createdAt).toISOString(),K.processedAt?new Date(K.processedAt).toISOString():"",K.refundedAt?new Date(K.refundedAt).toISOString():"",K.invoiceNumber??"",K.receiptUrl??"",K.reconciled?"Yes":"No",K.reconciledAt?new Date(K.reconciledAt).toISOString():""]),ee=[F.join(","),...J.map(K=>K.map(se=>{const ne=String(se??""),ie=/[",\n]/.test(ne),be=ne.replace(/"/g,'""');return ie?`"${be}"`:be}).join(","))].join(`
`),q=new Blob([ee],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL(q),Z=document.createElement("a");Z.href=U,Z.download=`payment-history-${new Date().toISOString().slice(0,10)}.csv`,Z.click(),URL.revokeObjectURL(U),re.success("CSV export complete")}else if(S==="pdf"){const F=new zr;let J=14;F.setFontSize(16),F.text("Payment History Export",14,J),J+=8,F.setFontSize(10),F.text(`Generated: ${new Date().toLocaleString()}`,14,J),J+=8;const ee=6,q=14,U=F.internal.pageSize.getHeight();B.forEach((Z,K)=>{[`#${K+1}  ${Z.transactionRef}  ${Z.status.toUpperCase()}  ${Z.currency} ${Z.amount.toFixed(2)}`,`Type: ${Z.type}  Method: ${Z.paymentMethod?.brand||""} ${Z.paymentMethod?.last4?" "+Z.paymentMethod.last4:Z.paymentMethod?.type||""}`,`Customer: ${Z.customerName} <${Z.customerEmail}>`,`Booking: ${Z.bookingId||"N/A"}`,`Created: ${new Date(Z.createdAt).toLocaleString()}${Z.processedAt?"  Processed: "+new Date(Z.processedAt).toLocaleString():""}`,`${Z.refundAmount?`Refunded: ${Z.currency} ${(Z.refundAmount||0).toFixed(2)}${Z.refundedAt?"  At: "+new Date(Z.refundedAt).toLocaleString():""}`:""}`,`Reconciled: ${Z.reconciled?"Yes":"No"}${Z.reconciledAt?"  "+new Date(Z.reconciledAt).toLocaleString():""}`].filter(Boolean).forEach(ne=>{J+ee>U-10&&(F.addPage(),J=14),F.text(ne,q,J),J+=ee}),J+ee>U-10&&(F.addPage(),J=14),F.text("".repeat(40),q,J),J+=ee}),F.save(`payment-history-${new Date().toISOString().slice(0,10)}.pdf`),re.success("PDF export complete")}}catch(B){console.error(B),re.error("Failed to export payment history")}finally{E(!1),C(!1)}},V=B=>{const F=n.map(J=>J.id===B?{...J,reconciled:!0,reconciledAt:new Date().toISOString(),reconciledBy:"current-user@bookingtms.com"}:J);a(F),re.success("Transaction marked as reconciled")};return r.jsxs(r.Fragment,{children:[r.jsx(Ei,{title:"Payments & History",description:"Manage payments, refunds, and revenue reconciliation"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:`${e?"bg-[#161616] border border-[#1e1e1e]":"bg-white border border-gray-200"} rounded-lg shadow-sm p-6`,children:[r.jsx("h2",{className:`mb-4 ${O}`,children:"Revenue Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${$}`,children:"Total Revenue"}),r.jsx(In,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})]}),r.jsxs("div",{className:`text-2xl ${O}`,children:["$",p1.totalRevenue.toFixed(2)]}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(Wn,{className:"w-3 h-3 text-green-500"}),r.jsx("span",{className:"text-xs text-green-500",children:"+12.5% from last period"})]})]}),r.jsxs(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${$}`,children:"Total Refunds"}),r.jsx(N0,{className:`w-4 h-4 ${e?"text-red-400":"text-red-600"}`})]}),r.jsxs("div",{className:`text-2xl ${O}`,children:["$",p1.totalRefunds.toFixed(2)]}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(uN,{className:"w-3 h-3 text-red-500"}),r.jsx("span",{className:"text-xs text-red-500",children:"-3.2% from last period"})]})]}),r.jsxs(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${$}`,children:"Net Revenue"}),r.jsx(Wn,{className:`w-4 h-4 ${e?"text-blue-400":"text-blue-600"}`})]}),r.jsxs("div",{className:`text-2xl ${O}`,children:["$",p1.netRevenue.toFixed(2)]}),r.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.jsx("span",{className:`text-xs ${$}`,children:"After refunds"})})]}),r.jsxs(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm ${$}`,children:"Success Rate"}),r.jsx(Lt,{className:`w-4 h-4 ${e?"text-green-400":"text-green-600"}`})]}),r.jsxs("div",{className:`text-2xl ${O}`,children:[p1.successRate,"%"]}),r.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.jsxs("span",{className:`text-xs ${$}`,children:[p1.transactionCount," transactions"]})})]})]})]}),r.jsx("div",{className:`${e?"bg-[#161616] border border-[#1e1e1e]":"bg-white border border-gray-200"} rounded-lg shadow-sm p-6`,children:r.jsxs(wn,{defaultValue:"transactions",className:"space-y-6",children:[r.jsxs(kn,{className:e?"bg-[#0a0a0a] border border-[#2a2a2a]":"bg-gray-100 border border-gray-200",children:[r.jsxs(Tt,{value:"transactions",className:`gap-2 ${e?"data-[state=active]:bg-[#1e1e1e] data-[state=active]:text-white text-[#a3a3a3]":""}`,children:[r.jsx(rn,{className:"w-4 h-4"}),"Transactions"]}),r.jsxs(Tt,{value:"reconciliation",className:`gap-2 ${e?"data-[state=active]:bg-[#1e1e1e] data-[state=active]:text-white text-[#a3a3a3]":""}`,children:[r.jsx(Lt,{className:"w-4 h-4"}),"Reconciliation"]})]}),r.jsxs(Bt,{value:"transactions",className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"lg:col-span-2 relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search by customer, email, transaction ID...",value:i,onChange:B=>o(B.target.value),className:`pl-10 h-12 ${e?"bg-[#0a0a0a] border-[#2a2a2a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs(sr,{value:l,onValueChange:B=>c(B),children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"All Statuses"})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Ae,{value:"all",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"All Statuses"}),r.jsx(Ae,{value:"completed",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Completed"}),r.jsx(Ae,{value:"pending",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Pending"}),r.jsx(Ae,{value:"processing",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Processing"}),r.jsx(Ae,{value:"failed",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Failed"}),r.jsx(Ae,{value:"refunded",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Refunded"}),r.jsx(Ae,{value:"partially_refunded",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Partially Refunded"})]})]}),r.jsxs(sr,{value:h,onValueChange:B=>m(B),children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"All Time"})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Ae,{value:"all",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"All Time"}),r.jsx(Ae,{value:"today",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Today"}),r.jsx(Ae,{value:"week",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Last 7 Days"}),r.jsx(Ae,{value:"month",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Last 30 Days"})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:$,children:["Showing ",T.length," of ",n.length," transactions"]}),r.jsx(Eu,{permissions:["payments.export"],children:r.jsxs(W,{variant:"outline",onClick:()=>C(!0),className:`gap-2 ${e?"border-[#2a2a2a] bg-transparent text-[#a3a3a3] hover:bg-[#161616] hover:text-white":""}`,children:[r.jsx(Sn,{className:"w-4 h-4"}),"Export"]})})]}),r.jsx(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} shadow-sm`,children:r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:`${e?"bg-[#161616] border-b-2 border-[#2a2a2a]":"bg-gray-50 border-b-2 border-gray-200"}`,children:r.jsxs("tr",{children:[r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Transaction"}),r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Customer"}),r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Amount"}),r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Payment Method"}),r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Status"}),r.jsx("th",{className:`text-left p-4 ${$} uppercase tracking-wider text-xs`,children:"Date"}),r.jsx("th",{className:`text-right p-4 ${$} uppercase tracking-wider text-xs`,children:"Actions"})]})}),r.jsx("tbody",{children:T.map(B=>r.jsxs("tr",{className:`border-b ${e?"border-[#2a2a2a] hover:bg-[#161616]":"border-gray-200 hover:bg-gray-50"} transition-colors cursor-pointer`,onClick:()=>{v(B),w(!0)},children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{children:[r.jsx("div",{className:O,children:B.transactionRef}),B.bookingId&&r.jsx("div",{className:`text-sm ${$}`,children:B.bookingId})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{children:[r.jsx("div",{className:O,children:B.customerName}),r.jsx("div",{className:`text-sm ${$}`,children:B.customerEmail})]})}),r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:O,children:["$",B.amount.toFixed(2)]}),B.refundAmount&&B.refundAmount>0&&r.jsxs("div",{className:`text-sm ${e?"text-red-400":"text-red-600"}`,children:["-$",B.refundAmount.toFixed(2)," refunded"]})]}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:O,children:L(B.paymentMethod.type,B.paymentMethod)})}),r.jsx("td",{className:"p-4",children:I(B.status)}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:O,children:new Date(B.createdAt).toLocaleDateString()}),r.jsx("div",{className:`text-sm ${$}`,children:new Date(B.createdAt).toLocaleTimeString()})]}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",onClick:F=>F.stopPropagation(),children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{v(B),w(!0)},className:e?"hover:bg-[#1a1a1a] text-[#a3a3a3] hover:text-white":"",children:r.jsx(ys,{className:"w-4 h-4"})}),r.jsx(Eu,{permissions:["payments.refund"],children:B.status==="completed"||B.status==="partially_refunded"?r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{v(B),g(!0)},className:e?"hover:bg-[#1a1a1a] text-[#a3a3a3] hover:text-white":"",disabled:B.amount===B.refundAmount,children:r.jsx(N0,{className:"w-4 h-4"})}):null})]})})]},B.id))})]}),T.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(rn,{className:`w-12 h-12 mx-auto mb-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx("p",{className:$,children:"No transactions found"})]})]})})]}),r.jsx(Bt,{value:"reconciliation",className:"space-y-6",children:r.jsxs(he,{className:`${e?"bg-[#0a0a0a] border-[#2a2a2a]":"bg-white border-gray-200"} p-6`,children:[r.jsx("h3",{className:`mb-4 ${O}`,children:"Reconciliation Summary"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-[#161616]":"bg-gray-50"}`,children:[r.jsx("div",{className:`text-sm ${$} mb-1`,children:"Reconciled"}),r.jsx("div",{className:`text-2xl ${O}`,children:x1.reconciledTransactions}),r.jsxs("div",{className:`text-sm ${e?"text-green-400":"text-green-600"}`,children:["$",x1.reconciledAmount.toFixed(2)]})]}),r.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-[#161616]":"bg-gray-50"}`,children:[r.jsx("div",{className:`text-sm ${$} mb-1`,children:"Unreconciled"}),r.jsx("div",{className:`text-2xl ${O}`,children:x1.unreconciledTransactions}),r.jsxs("div",{className:`text-sm ${e?"text-amber-400":"text-amber-600"}`,children:["$",x1.unreconciledAmount.toFixed(2)]})]}),r.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-[#161616]":"bg-gray-50"}`,children:[r.jsx("div",{className:`text-sm ${$} mb-1`,children:"Last Reconciled"}),r.jsx("div",{className:`text-sm ${O}`,children:new Date(x1.lastReconciledDate).toLocaleDateString()})]})]}),r.jsx(Eu,{permissions:["payments.reconcile"],children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:O,children:"Unreconciled Transactions"}),n.filter(B=>!B.reconciled&&B.status==="completed").map(B=>r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${e?"bg-[#161616] border border-[#2a2a2a]":"bg-gray-50 border border-gray-200"}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:O,children:B.transactionRef}),r.jsxs("div",{className:`text-sm ${$}`,children:[B.customerName,"  $",B.amount.toFixed(2)]})]}),r.jsxs(W,{size:"sm",onClick:()=>V(B.id),className:"text-white hover:opacity-90",style:{backgroundColor:"#4f46e5"},children:[r.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Mark Reconciled"]})]},B.id))]})})]})})]})}),r.jsx(uZe,{transaction:f,isOpen:x,onClose:()=>{g(!1),v(null)},onRefund:z}),r.jsx(mr,{open:b,onOpenChange:w,children:r.jsx(fr,{className:`max-w-2xl ${e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200"}`,children:f&&r.jsxs(r.Fragment,{children:[r.jsxs(br,{children:[r.jsx(pr,{className:O,children:"Transaction Details"}),r.jsx(wr,{className:$,children:f.transactionRef})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`mb-3 ${O}`,children:"Customer Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Name"}),r.jsx("div",{className:O,children:f.customerName})]}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Email"}),r.jsx("div",{className:O,children:f.customerEmail})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`mb-3 ${O}`,children:"Transaction Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Amount"}),r.jsxs("div",{className:O,children:["$",f.amount.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Status"}),r.jsx("div",{children:I(f.status)})]}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Payment Method"}),r.jsx("div",{className:O,children:L(f.paymentMethod.type,f.paymentMethod)})]}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Date"}),r.jsx("div",{className:O,children:new Date(f.createdAt).toLocaleString()})]}),f.bookingId&&r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Booking ID"}),r.jsx("div",{className:O,children:f.bookingId})]}),f.invoiceNumber&&r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Invoice"}),r.jsx("div",{className:O,children:f.invoiceNumber})]})]})]}),f.refundAmount&&f.refundAmount>0&&r.jsxs("div",{children:[r.jsx("h4",{className:`mb-3 ${O}`,children:"Refund Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Refund Amount"}),r.jsxs("div",{className:e?"text-red-400":"text-red-600",children:["$",f.refundAmount.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$}`,children:"Refund Date"}),r.jsx("div",{className:O,children:f.refundedAt?new Date(f.refundedAt).toLocaleString():"N/A"})]}),f.refundReason&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("div",{className:`text-sm ${$}`,children:"Reason"}),r.jsx("div",{className:O,children:f.refundReason.replace("_"," ").replace(/\b\w/g,B=>B.toUpperCase())})]}),f.refundNotes&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("div",{className:`text-sm ${$}`,children:"Notes"}),r.jsx("div",{className:O,children:f.refundNotes})]})]})]}),f.description&&r.jsxs("div",{children:[r.jsx("div",{className:`text-sm ${$} mb-2`,children:"Description"}),r.jsx("div",{className:O,children:f.description})]})]})]})})}),r.jsx(mr,{open:N,onOpenChange:C,children:r.jsxs(fr,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white border-gray-200",children:[r.jsxs(br,{children:[r.jsx(pr,{className:O,children:"Export Transactions"}),r.jsx(wr,{className:$,children:"Choose a format and export the currently filtered transactions."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(X,{className:$,children:"Format"}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx(W,{variant:S==="csv"?"default":"outline",onClick:()=>A("csv"),className:e?S==="csv"?"":"border-[#2a2a2a] text-[#a3a3a3]":"",children:"CSV"}),r.jsx(W,{variant:S==="pdf"?"default":"outline",onClick:()=>A("pdf"),className:e?S==="pdf"?"":"border-[#2a2a2a] text-[#a3a3a3]":"",children:"PDF"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(W,{variant:"ghost",onClick:()=>C(!1),className:e?"text-[#a3a3a3] hover:text-white hover:bg-[#161616]":"",disabled:k,children:"Cancel"}),r.jsx(W,{onClick:M,disabled:k,children:k?"Exporting":"Export"})]})]})]})})]})]})}function fZe(){const{theme:t}=Nr(),e=t==="dark",{notifications:s,unreadCount:n,markAsRead:a,markAllAsRead:i,deleteNotification:o,clearAll:l,playNotificationSound:c}=MI(),[d,u]=j.useState(""),[h,m]=j.useState("all"),[f,v]=j.useState("all"),[x,g]=j.useState("all"),b=e?"bg-[#161616]":"bg-white",w=e?"border-[#1e1e1e]":"border-gray-200",N=e?"text-white":"text-gray-900",C=e?"text-[#a3a3a3]":"text-gray-600",S=j.useMemo(()=>{let T=s;return x==="unread"&&(T=T.filter(I=>!I.read)),d&&(T=T.filter(I=>I.title.toLowerCase().includes(d.toLowerCase())||I.message.toLowerCase().includes(d.toLowerCase()))),h!=="all"&&(T=T.filter(I=>I.type===h)),f!=="all"&&(T=T.filter(I=>I.priority===f)),T},[s,x,d,h,f]),A=T=>{const I=e?"text-[#a3a3a3]":"text-gray-600";switch(T){case"booking":return r.jsx(qs,{className:`w-5 h-5 ${I}`});case"payment":return r.jsx(rn,{className:`w-5 h-5 ${I}`});case"cancellation":return r.jsx(Is,{className:`w-5 h-5 ${I}`});case"customer":return r.jsx(Nd,{className:`w-5 h-5 ${I}`});case"alert":return r.jsx(Nu,{className:`w-5 h-5 ${I}`});case"message":return r.jsx(ni,{className:`w-5 h-5 ${I}`});case"staff":return r.jsx(zs,{className:`w-5 h-5 ${I}`});case"system":return r.jsx(Ws,{className:`w-5 h-5 ${I}`});default:return r.jsx(pi,{className:`w-5 h-5 ${I}`})}},k=T=>{switch(T){case"urgent":return r.jsx(De,{className:"bg-red-500/20 text-red-600 border-red-500/40 dark:text-red-400",children:"Urgent"});case"high":return r.jsx(De,{className:"bg-orange-500/20 text-orange-600 border-orange-500/40 dark:text-orange-400",children:"High"});case"medium":return r.jsx(De,{className:"bg-blue-500/20 text-blue-600 border-blue-500/40 dark:text-blue-400",children:"Medium"});case"low":return r.jsx(De,{className:"bg-gray-500/20 text-gray-600 border-gray-500/40 dark:text-gray-400",children:"Low"});default:return null}},E=T=>{const I={booking:"Booking",cancellation:"Cancellation",payment:"Payment",refund:"Refund",customer:"Customer",staff:"Staff",system:"System",alert:"Alert",message:"Message"};return r.jsx(De,{variant:"outline",className:`${e?"border-[#2a2a2a] text-[#a3a3a3]":"border-gray-300 text-gray-600"}`,children:I[T]})},O=T=>{const I=new Date(T),z=new Date().getTime()-I.getTime(),M=Math.floor(z/6e4),V=Math.floor(z/36e5),B=Math.floor(z/864e5);let F="";M<1?F="Just now":M<60?F=`${M}m ago`:V<24?F=`${V}h ago`:B<7?F=`${B}d ago`:F=I.toLocaleDateString();const J=I.toLocaleString();return{relative:F,full:J}},$=T=>{a(T.id)};return r.jsxs(r.Fragment,{children:[r.jsx(Ei,{title:"Notifications",description:"Stay updated with all your booking activities",action:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",onClick:()=>c(),className:`gap-2 ${e?"border-[#1e1e1e] bg-transparent hover:bg-[#161616]":""}`,children:[r.jsx(zE,{className:"w-4 h-4"}),"Test Sound"]}),n>0&&r.jsxs(W,{onClick:i,className:"gap-2",style:{backgroundColor:"#4f46e5"},children:[r.jsx(IY,{className:"w-4 h-4"}),"Mark all read"]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${b} border ${w} shadow-sm p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${C}`,children:"Total"}),r.jsx("p",{className:`text-2xl ${N}`,children:s.length})]}),r.jsx(pi,{className:`w-8 h-8 ${e?"text-[#4f46e5]":"text-blue-600"}`})]})}),r.jsx(he,{className:`${b} border ${w} shadow-sm p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${C}`,children:"Unread"}),r.jsx("p",{className:`text-2xl ${N}`,children:n})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-[#4f46e5] flex items-center justify-center",children:r.jsx("span",{className:"text-white",children:n})})]})}),r.jsx(he,{className:`${b} border ${w} shadow-sm p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${C}`,children:"Today"}),r.jsx("p",{className:`text-2xl ${N}`,children:s.filter(T=>{const I=new Date(T.timestamp),L=new Date;return I.toDateString()===L.toDateString()}).length})]}),r.jsx(qs,{className:`w-8 h-8 ${e?"text-green-400":"text-green-600"}`})]})}),r.jsx(he,{className:`${b} border ${w} shadow-sm p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${C}`,children:"Urgent"}),r.jsx("p",{className:`text-2xl ${N}`,children:s.filter(T=>T.priority==="urgent").length})]}),r.jsx(Nu,{className:`w-8 h-8 ${e?"text-red-400":"text-red-600"}`})]})})]}),r.jsx(he,{className:`${b} border ${w} shadow-sm`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"md:col-span-2 relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${e?"text-[#737373]":"text-gray-400"}`}),r.jsx(de,{placeholder:"Search notifications...",value:d,onChange:T=>u(T.target.value),className:`pl-10 h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsxs(sr,{value:h,onValueChange:T=>m(T),children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"All Types"})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Ae,{value:"all",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"All Types"}),r.jsx(Ae,{value:"booking",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Bookings"}),r.jsx(Ae,{value:"payment",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Payments"}),r.jsx(Ae,{value:"cancellation",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Cancellations"}),r.jsx(Ae,{value:"alert",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Alerts"}),r.jsx(Ae,{value:"system",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"System"})]})]}),r.jsxs(sr,{value:f,onValueChange:v,children:[r.jsx(ar,{className:`h-12 ${e?"bg-[#0a0a0a] border-[#1e1e1e] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{placeholder:"All Priorities"})}),r.jsxs(ir,{className:e?"bg-[#1e1e1e] border-[#2a2a2a]":"bg-white",children:[r.jsx(Ae,{value:"all",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"All Priorities"}),r.jsx(Ae,{value:"urgent",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Urgent"}),r.jsx(Ae,{value:"high",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"High"}),r.jsx(Ae,{value:"medium",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Medium"}),r.jsx(Ae,{value:"low",className:e?"text-white focus:bg-[#161616] focus:text-white":"",children:"Low"})]})]})]}),r.jsxs(wn,{value:x,onValueChange:T=>g(T),className:"space-y-6",children:[r.jsxs(kn,{className:e?"bg-[#0a0a0a] border border-[#2a2a2a]":"bg-gray-100",children:[r.jsxs(Tt,{value:"all",className:"gap-2",children:[r.jsx(pi,{className:"w-4 h-4"}),"All (",s.length,")"]}),r.jsxs(Tt,{value:"unread",className:"gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(pi,{className:"w-4 h-4"}),n>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-[#4f46e5] rounded-full"})]}),"Unread (",n,")"]})]}),r.jsx(Bt,{value:x,className:"mt-6",children:S.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx(pi,{className:`w-16 h-16 mb-4 ${e?"text-[#2a2a2a]":"text-gray-300"}`}),r.jsx("p",{className:`text-lg mb-2 ${N}`,children:"No notifications found"}),r.jsx("p",{className:C,children:x==="unread"?"You're all caught up!":"Try adjusting your filters"})]}):r.jsx("div",{className:"space-y-2",children:S.map(T=>{const I=O(T.timestamp);return r.jsx("div",{onClick:()=>$(T),className:`p-4 rounded-lg border cursor-pointer transition-all ${T.read?e?"bg-transparent border-[#1e1e1e] hover:bg-[#0a0a0a]":"bg-transparent border-gray-200 hover:bg-gray-50":e?"bg-[#0a0a0a] border-[#2a2a2a] hover:bg-[#1a1a1a]":"bg-blue-50 border-blue-200 hover:bg-blue-100"}`,children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:A(T.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:`${T.read?C:N}`,children:T.title}),!T.read&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-[#4f46e5]"})]}),r.jsx("p",{className:`text-sm ${C}`,children:T.message})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[k(T.priority),r.jsx(W,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),o(T.id)},className:`h-8 w-8 p-0 ${e?"hover:bg-[#1e1e1e] text-[#737373] hover:text-red-400":"hover:bg-gray-100 text-gray-400 hover:text-red-600"}`,children:r.jsx(ks,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[E(T.type),r.jsx("span",{className:`text-xs ${C}`,title:I.full,children:I.relative})]}),T.actionLabel&&r.jsxs(W,{variant:"ghost",size:"sm",className:`h-8 gap-1 text-xs ${e?"text-[#4f46e5] hover:bg-[#1a1a1a]":"text-blue-600 hover:bg-blue-50"}`,children:[T.actionLabel,r.jsx($n,{className:"w-3 h-3"})]})]})]})]})},T.id)})})})]})]})})]})]})}const pZe=()=>{const{theme:t}=Nr(),{login:e}=no(),s=t==="dark",[n,a]=j.useState(null),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(!1),[h,m]=j.useState({}),f=s?"bg-black/50":"bg-black/30",v=s?"bg-[#1e1e1e]":"bg-white",x=s?"text-white":"text-gray-900",g=s?"text-gray-400":"text-gray-600",b=s?"border-gray-700":"border-gray-200",w=s?"bg-[#161616]":"bg-gray-100",N=s?"border-gray-700":"border-gray-300",C=s?"hover:bg-[#252525]":"hover:bg-gray-50",S=[{id:"system-admin",label:"System Admin Login",description:"Platform owner - manage all owners & venues",icon:lc,color:s?"#ef4444":"#dc2626"},{id:"super-admin",label:"Super Admin Login",description:"Full system access + user management",icon:zs,color:s?"#8b5cf6":"#7c3aed"},{id:"admin",label:"Admin Login",description:"Full operational access",icon:mfe,color:s?"#3b82f6":"#2563eb"},{id:"manager",label:"Manager Login",description:"View and limited edit access",icon:Xr,color:s?"#10b981":"#059669"},{id:"staff",label:"Staff Login",description:"Basic view-only access",icon:ma,color:s?"#6b7280":"#4b5563"},{id:"customer",label:"Customer Login",description:"Access your bookings and profile",icon:ma,color:s?"#ec4899":"#db2777"}],A=()=>{const $={};return i.trim()||($.username="Username is required"),l?l.length<6&&($.password="Password must be at least 6 characters"):$.password="Password is required",m($),Object.keys($).length===0},k=$=>{a($),m({})},E=()=>{a(null),o(""),c(""),m({})},O=async $=>{if($.preventDefault(),!!A()&&n){u(!0);try{await new Promise(T=>setTimeout(T,1500)),await e(i,l,n),re.success(`Successfully logged in as ${S.find(T=>T.id===n)?.label}`)}catch(T){console.error("Login error:",T),re.error("Invalid username or password")}finally{u(!1)}}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:`absolute inset-0 ${f}`}),r.jsxs("div",{className:`relative ${v} rounded-2xl shadow-2xl w-full max-w-md overflow-hidden`,style:{maxHeight:"90vh"},children:[r.jsxs("div",{className:"relative p-6 pb-4",children:[r.jsx("button",{onClick:()=>window.history.back(),className:`absolute top-4 right-4 ${g} ${C} p-2 rounded-lg transition-colors`,"aria-label":"Close",children:r.jsx(Is,{className:"w-5 h-5"})}),r.jsx("h2",{className:`text-2xl ${x} mb-2`,children:n?"Enter your credentials":"Log in to BookingTMS"}),r.jsx("p",{className:`text-sm ${g}`,children:n?`Sign in as ${S.find($=>$.id===n)?.label.replace(" Login","")}`:"Manage your bookings, customers, and business operations from one unified platform."})]}),r.jsx("div",{className:"px-6 pb-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:n?r.jsxs("form",{onSubmit:O,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s?"text-gray-300":"text-gray-700",children:"Username"}),r.jsx(de,{type:"text",value:i,onChange:$=>{o($.target.value),h.username&&m({...h,username:void 0})},placeholder:"Enter your username",className:`h-12 ${w} ${N} ${s?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,disabled:d}),h.username&&r.jsx("p",{className:"text-sm text-red-500",children:h.username})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s?"text-gray-300":"text-gray-700",children:"Password"}),r.jsx(de,{type:"password",value:l,onChange:$=>{c($.target.value),h.password&&m({...h,password:void 0})},placeholder:"Enter your password",className:`h-12 ${w} ${N} ${s?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,disabled:d}),h.password&&r.jsx("p",{className:"text-sm text-red-500",children:h.password})]}),r.jsxs("div",{className:"space-y-3 pt-2",children:[r.jsx(W,{type:"submit",disabled:d,className:"w-full h-12 bg-[#4f46e5] hover:bg-[#4338ca] text-white rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Signing in...":"Sign In"}),r.jsx(W,{type:"button",onClick:E,disabled:d,variant:"outline",className:`w-full h-12 ${b} ${x} ${C} rounded-xl transition-colors`,children:"Back to Role Selection"})]}),r.jsx("div",{className:"text-center pt-2",children:r.jsx("button",{type:"button",className:`text-sm ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} transition-colors`,onClick:()=>re.info("Password reset feature coming soon"),children:"Forgot your password?"})})]}):r.jsx("div",{className:"space-y-3",children:S.map($=>{const T=$.icon;return r.jsxs("button",{onClick:()=>k($.id),className:`w-full flex items-center gap-4 p-4 rounded-xl border ${b} ${C} transition-all group`,children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${$.color}15`},children:r.jsx(T,{className:"w-6 h-6",style:{color:$.color}})}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("div",{className:`font-medium ${x} group-hover:${s?"text-blue-400":"text-blue-600"} transition-colors`,children:$.label}),r.jsx("div",{className:`text-sm ${g}`,children:$.description})]})]},$.id)})})}),r.jsx("div",{className:`px-6 py-4 border-t ${b}`,children:r.jsxs("p",{className:`text-xs ${g} text-center`,children:["By continuing, you agree to our"," ",r.jsx("button",{onClick:()=>re.info("Terms of Service"),className:s?"text-blue-400 hover:underline":"text-blue-600 hover:underline",children:"Terms"})," ","and have read our"," ",r.jsx("button",{onClick:()=>re.info("Privacy Policy"),className:s?"text-blue-400 hover:underline":"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})})]})]})},xZe=()=>{const{theme:t}=Nr(),{login:e}=no(),s=t==="dark",[n,a]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(!1),[d,u]=j.useState({}),h=s?"bg-black/50":"bg-black/30",m=s?"bg-[#1e1e1e]":"bg-white",f=s?"text-white":"text-gray-900",v=s?"text-gray-400":"text-gray-600",x=s?"border-gray-700":"border-gray-200",g=s?"bg-[#161616]":"bg-gray-100",b=s?"border-gray-700":"border-gray-300",w=s?"hover:bg-[#252525]":"hover:bg-gray-50",N="betaadmin",C="123admin",S=()=>{const k={};return n.trim()||(k.username="Username is required"),i||(k.password="Password is required"),u(k),Object.keys(k).length===0},A=async k=>{if(k.preventDefault(),!!S()){c(!0);try{if(n!==N||i!==C){re.error("Invalid username or password"),c(!1);return}await new Promise(E=>setTimeout(E,1e3)),await e(n,i,"beta-owner"),re.success("Welcome to BookingTMS Beta!")}catch(E){console.error("Login error:",E),re.error("Login failed. Please try again.")}finally{c(!1)}}};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:`absolute inset-0 ${h}`}),r.jsxs("div",{className:`relative ${m} rounded-2xl shadow-2xl w-full max-w-md overflow-hidden`,style:{maxHeight:"90vh"},children:[r.jsxs("div",{className:"relative p-6 pb-4",children:[r.jsx("button",{onClick:()=>window.history.back(),className:`absolute top-4 right-4 ${v} ${w} p-2 rounded-lg transition-colors`,"aria-label":"Close",children:r.jsx(Is,{className:"w-5 h-5"})}),r.jsx("h2",{className:`text-2xl font-bold ${f} mb-2`,children:"Welcome to BookingTMS"}),r.jsx("p",{className:`text-sm ${v}`,children:"Sign in to manage your venues, bookings, and business operations"})]}),r.jsx("div",{className:"px-6 pb-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:r.jsxs("form",{onSubmit:A,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s?"text-gray-300":"text-gray-700",children:"Username"}),r.jsx(de,{type:"text",value:n,onChange:k=>{a(k.target.value),d.username&&u({...d,username:void 0})},placeholder:"Enter your username",className:`h-12 ${g} ${b} ${s?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,disabled:l}),d.username&&r.jsx("p",{className:"text-sm text-red-500",children:d.username})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:s?"text-gray-300":"text-gray-700",children:"Password"}),r.jsx(de,{type:"password",value:i,onChange:k=>{o(k.target.value),d.password&&u({...d,password:void 0})},placeholder:"Enter your password",className:`h-12 ${g} ${b} ${s?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,disabled:l}),d.password&&r.jsx("p",{className:"text-sm text-red-500",children:d.password})]}),r.jsx("div",{className:"space-y-3 pt-2",children:r.jsx(W,{type:"submit",disabled:l,className:"w-full h-12 bg-[#4f46e5] hover:bg-[#4338ca] text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In"})}),r.jsx("div",{className:"text-center pt-2",children:r.jsx("button",{type:"button",className:`text-sm ${s?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} transition-colors`,onClick:()=>re.info("Password reset feature coming soon"),children:"Forgot your password?"})})]})}),r.jsx("div",{className:`px-6 py-4 border-t ${x}`,children:r.jsxs("p",{className:`text-xs ${v} text-center`,children:["By continuing, you agree to our"," ",r.jsx("button",{onClick:()=>re.info("Terms of Service"),className:s?"text-blue-400 hover:underline":"text-blue-600 hover:underline",children:"Terms"})," ","and have read our"," ",r.jsx("button",{onClick:()=>re.info("Privacy Policy"),className:s?"text-blue-400 hover:underline":"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})})]})]})},Am=[{id:"openai",name:"OpenAI",envVar:"OPENAI_API_KEY",apiUrl:"https://api.openai.com/v1/chat/completions",testModel:"gpt-3.5-turbo",description:"GPT-4, GPT-3.5, and other OpenAI models",icon:""},{id:"anthropic",name:"Anthropic Claude",envVar:"ANTHROPIC_API_KEY",apiUrl:"https://api.anthropic.com/v1/messages",testModel:"claude-3-haiku-20240307",description:"Claude 3 Opus, Sonnet, and Haiku models",icon:""},{id:"google",name:"Google AI (Gemini)",envVar:"GOOGLE_AI_API_KEY",apiUrl:"https://generativelanguage.googleapis.com/v1/models",testModel:"gemini-pro",description:"Gemini Pro and other Google AI models",icon:""},{id:"cohere",name:"Cohere",envVar:"COHERE_API_KEY",apiUrl:"https://api.cohere.ai/v1/generate",testModel:"command",description:"Command and other Cohere models",icon:""},{id:"huggingface",name:"Hugging Face",envVar:"HUGGINGFACE_API_KEY",apiUrl:"https://api-inference.huggingface.co/models",testModel:"gpt2",description:"Access to Hugging Face model hub",icon:""},{id:"together",name:"Together AI",envVar:"TOGETHER_API_KEY",apiUrl:"https://api.together.xyz/inference",testModel:"togethercomputer/llama-2-7b-chat",description:"Llama 2, Mistral, and other open-source models",icon:""}];async function gZe(t){const e=Date.now(),s=Am.find(n=>n.id==="openai");try{const n=await fetch(s.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:s.testModel,messages:[{role:"user",content:'Hello! This is a connection test. Please respond with "Connection successful".'}],max_tokens:50})}),a=Date.now()-e,i=await n.json();return n.ok?{provider:s.name,success:!0,message:"Successfully connected to OpenAI API",latency:a,details:{model:s.testModel,response:i.choices?.[0]?.message?.content||"OK",usage:i.usage}}:{provider:s.name,success:!1,message:i.error?.message||`HTTP ${n.status}: ${n.statusText}`,latency:a,error:i.error}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to OpenAI API",latency:a,error:n}}}async function vZe(t){const e=Date.now(),s=Am.find(n=>n.id==="anthropic");try{const n=await fetch(s.apiUrl,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:s.testModel,messages:[{role:"user",content:'Hello! This is a connection test. Please respond with "Connection successful".'}],max_tokens:50})}),a=Date.now()-e,i=await n.json();return n.ok?{provider:s.name,success:!0,message:"Successfully connected to Anthropic API",latency:a,details:{model:s.testModel,response:i.content?.[0]?.text||"OK",usage:i.usage}}:{provider:s.name,success:!1,message:i.error?.message||`HTTP ${n.status}: ${n.statusText}`,latency:a,error:i.error}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to Anthropic API",latency:a,error:n}}}async function yZe(t){const e=Date.now(),s=Am.find(n=>n.id==="google");try{const n=`https://generativelanguage.googleapis.com/v1/models/${s.testModel}:generateContent?key=${t}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:'Hello! This is a connection test. Please respond with "Connection successful".'}]}]})}),i=Date.now()-e,o=await a.json();return a.ok?{provider:s.name,success:!0,message:"Successfully connected to Google AI API",latency:i,details:{model:s.testModel,response:o.candidates?.[0]?.content?.parts?.[0]?.text||"OK"}}:{provider:s.name,success:!1,message:o.error?.message||`HTTP ${a.status}: ${a.statusText}`,latency:i,error:o.error}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to Google AI API",latency:a,error:n}}}async function bZe(t){const e=Date.now(),s=Am.find(n=>n.id==="cohere");try{const n=await fetch(s.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:s.testModel,prompt:'Hello! This is a connection test. Please respond with "Connection successful".',max_tokens:50})}),a=Date.now()-e,i=await n.json();return n.ok?{provider:s.name,success:!0,message:"Successfully connected to Cohere API",latency:a,details:{model:s.testModel,response:i.generations?.[0]?.text||"OK"}}:{provider:s.name,success:!1,message:i.message||`HTTP ${n.status}: ${n.statusText}`,latency:a,error:i}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to Cohere API",latency:a,error:n}}}async function wZe(t){const e=Date.now(),s=Am.find(n=>n.id==="huggingface");try{const n=`${s.apiUrl}/${s.testModel}`,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({inputs:"Hello! This is a connection test."})}),i=Date.now()-e,o=await a.json();return a.ok?{provider:s.name,success:!0,message:"Successfully connected to Hugging Face API",latency:i,details:{model:s.testModel,response:Array.isArray(o)?o[0]?.generated_text:"OK"}}:{provider:s.name,success:!1,message:o.error||`HTTP ${a.status}: ${a.statusText}`,latency:i,error:o}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to Hugging Face API",latency:a,error:n}}}async function jZe(t){const e=Date.now(),s=Am.find(n=>n.id==="together");try{const n=await fetch(s.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:s.testModel,prompt:'Hello! This is a connection test. Please respond with "Connection successful".',max_tokens:50})}),a=Date.now()-e,i=await n.json();return n.ok?{provider:s.name,success:!0,message:"Successfully connected to Together AI API",latency:a,details:{model:s.testModel,response:i.output?.choices?.[0]?.text||"OK"}}:{provider:s.name,success:!1,message:i.error?.message||`HTTP ${n.status}: ${n.statusText}`,latency:a,error:i.error}}catch(n){const a=Date.now()-e;return{provider:s.name,success:!1,message:n.message||"Failed to connect to Together AI API",latency:a,error:n}}}async function NZe(t,e){switch(t){case"openai":return gZe(e);case"anthropic":return vZe(e);case"google":return yZe(e);case"cohere":return bZe(e);case"huggingface":return wZe(e);case"together":return jZe(e);default:return{provider:"Unknown",success:!1,message:`Unknown provider: ${t}`}}}function SZe(t,e){if(!e||e.trim().length===0)return{valid:!1,message:"API key is required"};switch(t){case"openai":if(!e.startsWith("sk-"))return{valid:!1,message:'OpenAI API keys should start with "sk-"'};break;case"anthropic":if(!e.startsWith("sk-ant-"))return{valid:!1,message:'Anthropic API keys should start with "sk-ant-"'};break}return e.length<20?{valid:!1,message:"API key seems too short"}:{valid:!0,message:"API key format looks valid"}}function CZe(t){return t<500?{rating:"excellent",label:"Excellent",color:"green"}:t<1500?{rating:"good",label:"Good",color:"blue"}:t<3e3?{rating:"fair",label:"Fair",color:"yellow"}:{rating:"poor",label:"Slow",color:"red"}}function kZe(t){return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const _Ze=({isDark:t})=>{const[e,s]=j.useState(!1),[n,a]=j.useState([]),i=`https://${Lf}.supabase.co`,o=t?"bg-[#161616]":"bg-white",l=t?"border-[#2a2a2a]":"border-gray-200",c=t?"text-white":"text-gray-900",d=t?"text-[#a3a3a3]":"text-gray-600",u=t?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",h=(x,g,b,w)=>{a(N=>N.find(S=>S.name===x)?N.map(S=>S.name===x?{name:x,status:g,message:b,details:w}:S):[...N,{name:x,status:g,message:b,details:w}])},m=async()=>{s(!0),a([]);try{h("Environment","pending","Checking..."),await new Promise(g=>setTimeout(g,500)),!Lf||!wx||h("Environment","success","Configuration found",{projectId:Lf,url:i,keyPreview:wx.substring(0,20)+"..."}),h("Client","pending","Initializing Supabase client..."),await new Promise(g=>setTimeout(g,500));let x;try{x=RI(i,wx),h("Client","success","Client initialized successfully",{url:i,clientCreated:!0})}catch(g){h("Client","error",`Failed to initialize: ${g.message}`),s(!1);return}h("Database","pending","Testing database connection..."),await new Promise(g=>setTimeout(g,500));try{const{error:g}=await x.from("kv_store_84a71643").select("count").limit(1);g?g.code==="PGRST116"||g.message.includes("no rows")?h("Database","success","Connected (table exists, no data or RLS active)",{error:g.message}):h("Database","error",`Connection error: ${g.message}`,g):h("Database","success","Database connected successfully")}catch(g){h("Database","error",`Connection failed: ${g.message}`)}h("Auth","pending","Testing authentication system..."),await new Promise(g=>setTimeout(g,500));try{const{data:{session:g},error:b}=await x.auth.getSession();b?h("Auth","error",`Auth error: ${b.message}`,b):g?h("Auth","success",`Logged in as ${g.user.email}`,{userId:g.user.id,email:g.user.email}):h("Auth","success","Auth system ready (no active session)",{ready:!0})}catch(g){h("Auth","error",`Auth test failed: ${g.message}`)}h("Server","pending","Testing edge functions..."),await new Promise(g=>setTimeout(g,500));try{const g=await fetch(`${i}/functions/v1/make-server-84a71643/health`,{headers:{Authorization:`Bearer ${wx}`}});if(g.ok){const b=await g.json();h("Server","success","Edge function responding",b)}else h("Server","error",`Server returned ${g.status}`,{status:g.status,statusText:g.statusText})}catch(g){h("Server","error",`Cannot reach server: ${g.message}`)}}catch(x){console.error("Test suite error:",x)}finally{s(!1)}},f=x=>{switch(x){case"success":return r.jsx(Lt,{className:"w-5 h-5 text-green-500"});case"error":return r.jsx(ln,{className:"w-5 h-5 text-red-500"});case"pending":return r.jsx(ia,{className:"w-5 h-5 text-blue-500 animate-spin"})}},v=x=>{switch(x){case"success":return t?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0";case"error":return t?"bg-red-500/20 text-red-400 border-0":"bg-red-100 text-red-700 border-0";case"pending":return t?"bg-blue-500/20 text-blue-400 border-0":"bg-blue-100 text-blue-700 border-0"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kf,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"Supabase"})]})}),r.jsxs(_e,{className:"p-6 pt-0",children:[r.jsx("p",{className:`text-2xl mb-1 ${c}`,children:"Connected"}),r.jsx("p",{className:`text-sm ${d}`,children:"PostgreSQL Database"})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(MY,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"KV Store"})]})}),r.jsxs(_e,{className:"p-6 pt-0",children:[r.jsx("p",{className:`text-2xl mb-1 ${c}`,children:"Active"}),r.jsx("p",{className:`text-sm ${d}`,children:"Key-Value Storage"})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Du,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"Edge Functions"})]})}),r.jsxs(_e,{className:"p-6 pt-0",children:[r.jsx("p",{className:`text-2xl mb-1 ${c}`,children:"Ready"}),r.jsx("p",{className:`text-sm ${d}`,children:"Server-side Logic"})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zs,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"Authentication"})]})}),r.jsxs(_e,{className:"p-6 pt-0",children:[r.jsx("p",{className:`text-2xl mb-1 ${c}`,children:"Enabled"}),r.jsx("p",{className:`text-sm ${d}`,children:"Supabase Auth"})]})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsxs(Ke,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cN,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"Project Information"})]}),r.jsx(Ft,{className:d,children:"BookingTMS - Beta V 0.1"})]}),r.jsxs(_e,{className:"space-y-4 p-6 pt-0",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${l} ${u} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(cN,{className:`w-4 h-4 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("span",{className:`text-sm ${d}`,children:"Project ID"})]}),r.jsx("code",{className:`text-sm ${c}`,children:Lf})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${l} ${u} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($d,{className:`w-4 h-4 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx("span",{className:`text-sm ${d}`,children:"Supabase URL"})]}),r.jsx("code",{className:`text-sm ${c} break-all`,children:i})]})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:c,children:"Connection Tests"}),r.jsx(Ft,{className:d,children:"Run comprehensive tests to verify Supabase integration"})]}),r.jsx(W,{onClick:m,disabled:e,style:{backgroundColor:t?"#4f46e5":void 0},className:t?"text-white hover:bg-[#4338ca]":"bg-blue-600 hover:bg-blue-700 text-white border-0",children:e?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Run Tests"]})})]})}),n.length>0&&r.jsxs(_e,{className:"p-6 pt-0",children:[r.jsx("div",{className:"space-y-4",children:n.map((x,g)=>r.jsxs("div",{className:`p-4 rounded-lg border ${x.status==="success"?t?"border-emerald-500/20 bg-emerald-500/5":"border-green-500/20 bg-green-500/5":x.status==="error"?"border-red-500/20 bg-red-500/5":"border-blue-500/20 bg-blue-500/5"}`,children:[r.jsx("div",{className:"flex items-start justify-between mb-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[f(x.status),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:c,children:x.name}),r.jsx(De,{className:v(x.status),children:x.status==="success"?"Success":x.status==="error"?"Error":"Running"})]}),r.jsx("p",{className:`text-sm mt-1 ${d}`,children:x.message})]})]})}),x.details&&r.jsx("div",{className:`mt-3 p-3 rounded ${t?"bg-black/20":"bg-gray-100"}`,children:r.jsx("pre",{className:`text-xs ${d} overflow-x-auto`,children:JSON.stringify(x.details,null,2)})})]},g))}),r.jsx("div",{className:`mt-6 pt-6 border-t ${l}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:d,children:[n.filter(x=>x.status==="success").length," / ",n.length," tests passed"]}),!e&&n.every(x=>x.status==="success")&&r.jsxs(De,{className:t?"bg-emerald-500/20 text-emerald-400 border-0":"bg-green-100 text-green-700 border-0",children:[r.jsx(Lt,{className:"w-4 h-4 mr-1"}),"All Systems Operational"]}),!e&&n.some(x=>x.status==="error")&&r.jsxs(De,{className:t?"bg-red-500/20 text-red-400 border-0":"bg-red-100 text-red-700 border-0",children:[r.jsx(ln,{className:"w-4 h-4 mr-1"}),"Some Tests Failed"]})]})})]})]}),r.jsxs(he,{className:`${o} border ${l} shadow-sm`,children:[r.jsx(Ke,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:`w-5 h-5 ${t?"text-[#6366f1]":"text-blue-600"}`}),r.jsx(Xe,{className:c,children:"Documentation"})]})}),r.jsx(_e,{className:"p-6 pt-0",children:r.jsxs("ul",{className:`space-y-2 text-sm ${d}`,children:[r.jsxs("li",{children:[" ",r.jsx("code",{className:t?"text-[#6366f1]":"text-blue-600",children:"/CONNECT_TO_SUPABASE.md"})," - Connection guide"]}),r.jsxs("li",{children:[" ",r.jsx("code",{className:t?"text-[#6366f1]":"text-blue-600",children:"/DATABASE_CONNECTION_GUIDE.md"})," - Complete database guide"]}),r.jsxs("li",{children:[" ",r.jsx("code",{className:t?"text-[#6366f1]":"text-blue-600",children:"/SUPABASE_SETUP_GUIDE.md"})," - Setup instructions"]}),r.jsxs("li",{children:[" ",r.jsx("code",{className:t?"text-[#6366f1]":"text-blue-600",children:"/supabase/functions/server/kv_store.tsx"})," - KV Store utilities"]})]})})]})]})},AZe=()=>{const{theme:t}=Nr(),e=t==="dark",[s,n]=j.useState(!1),[a,i]=j.useState(!1),[o,l]=j.useState("inactive"),[c,d]=j.useState("inactive"),[u,h]=j.useState({enabled:!0,emailConfirmation:!0,allowSignups:!0,sessionDuration:24}),[m,f]=j.useState({enabled:!1,clientId:"",clientSecret:"",redirectUri:`${window.location.origin}/auth/callback/google`,configured:!1}),[v,x]=j.useState([{id:"google",name:"Google",icon:r.jsx($S,{className:"h-5 w-5"}),enabled:!1,configured:!1,setupUrl:"https://supabase.com/docs/guides/auth/social-login/auth-google"},{id:"facebook",name:"Facebook",icon:r.jsx(ib,{className:"h-5 w-5"}),enabled:!1,configured:!1,setupUrl:"https://supabase.com/docs/guides/auth/social-login/auth-facebook"},{id:"github",name:"GitHub",icon:r.jsx(khe,{className:"h-5 w-5"}),enabled:!1,configured:!1,setupUrl:"https://supabase.com/docs/guides/auth/social-login/auth-github"}]),g=e?"bg-[#161616]":"bg-white",b=e?"text-white":"text-gray-900",w=e?"text-gray-400":"text-gray-600",N=e?"border-gray-800":"border-gray-200";j.useEffect(()=>{const T=localStorage.getItem("supabase_auth_config");T&&h(JSON.parse(T));const I=localStorage.getItem("google_auth_config");if(I){const z=JSON.parse(I);f(z),z.configured&&d("active")}const L=localStorage.getItem("oauth_providers");L&&x(JSON.parse(L)),C()},[]);const C=async()=>{n(!0);try{!!Lf&&!!wx&&(l("active"),re.success("Supabase Auth is configured and ready"))}catch{l("error"),re.error("Failed to connect to Supabase Auth")}finally{n(!1)}},S=async()=>{i(!0);try{if(!m.clientId||!m.clientSecret){re.error("Please configure Google OAuth credentials first"),d("error");return}d("active"),re.success("Google OAuth configuration looks valid")}catch{d("error"),re.error("Failed to verify Google OAuth configuration")}finally{i(!1)}},A=()=>{localStorage.setItem("supabase_auth_config",JSON.stringify(u)),re.success("Supabase Auth configuration saved")},k=()=>{const T={...m,configured:!!(m.clientId&&m.clientSecret)};f(T),localStorage.setItem("google_auth_config",JSON.stringify(T)),T.configured?(d("active"),re.success("Google OAuth configured successfully")):re.success("Google OAuth configuration saved")},E=T=>{const I=v.map(L=>L.id===T?L.configured?{...L,enabled:!L.enabled}:(re.error(`Please configure ${L.name} OAuth first`),L):L);x(I),localStorage.setItem("oauth_providers",JSON.stringify(I))},O=(T,I)=>{navigator.clipboard.writeText(T),re.success(`${I} copied to clipboard`)},$=T=>({active:r.jsxs(De,{className:"bg-emerald-500 hover:bg-emerald-600",children:[r.jsx(Lt,{className:"h-3 w-3 mr-1"}),"Active"]}),inactive:r.jsxs(De,{variant:"secondary",children:[r.jsx(hs,{className:"h-3 w-3 mr-1"}),"Inactive"]}),error:r.jsxs(De,{variant:"destructive",children:[r.jsx(ln,{className:"h-3 w-3 mr-1"}),"Error"]})})[T];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${b} mb-2`,children:"Authentication Services"}),r.jsx("p",{className:w,children:"Manage authentication providers and user verification systems"})]}),r.jsxs(he,{className:`${g} border ${N} p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zs,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("h3",{className:`text-lg ${b}`,children:"Service Status"})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{C(),m.configured&&S()},children:[r.jsx(Ln,{className:"h-4 w-4 mr-2"}),"Refresh All"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${N} rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kf,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("span",{className:b,children:"Supabase Auth"})]}),$(o)]}),r.jsx("p",{className:`text-sm ${w} mb-3`,children:"Email/password authentication and user management"}),r.jsx(W,{variant:"outline",size:"sm",onClick:C,disabled:s,className:"w-full",children:s?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"h-4 w-4 mr-2"}),"Test Connection"]})})]}),r.jsxs("div",{className:`${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${N} rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($S,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("span",{className:b,children:"Google OAuth"})]}),$(c)]}),r.jsx("p",{className:`text-sm ${w} mb-3`,children:"Sign in with Google account integration"}),r.jsx(W,{variant:"outline",size:"sm",onClick:S,disabled:a||!m.configured,className:"w-full",children:a?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"h-4 w-4 mr-2"}),m.configured?"Test Connection":"Not Configured"]})})]})]})]}),r.jsxs(he,{className:`${g} border ${N} p-6`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Kf,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("h3",{className:`text-lg ${b}`,children:"Supabase Authentication"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"} mb-1`,children:"Enable Supabase Auth"}),r.jsx("p",{className:`text-sm ${w}`,children:"Use Supabase for email/password authentication"})]}),r.jsx(Rt,{checked:u.enabled,onCheckedChange:T=>h({...u,enabled:T})})]}),r.jsx(Ze,{className:N}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"} mb-1`,children:"Require Email Confirmation"}),r.jsx("p",{className:`text-sm ${w}`,children:"Users must verify email before accessing the app"})]}),r.jsx(Rt,{checked:u.emailConfirmation,onCheckedChange:T=>h({...u,emailConfirmation:T}),disabled:!u.enabled})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"} mb-1`,children:"Allow Public Signups"}),r.jsx("p",{className:`text-sm ${w}`,children:"Let users create accounts without admin approval"})]}),r.jsx(Rt,{checked:u.allowSignups,onCheckedChange:T=>h({...u,allowSignups:T}),disabled:!u.enabled})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"}`,children:"Session Duration (hours)"}),r.jsx(de,{type:"number",value:u.sessionDuration,onChange:T=>h({...u,sessionDuration:parseInt(T.target.value)}),className:`h-12 ${e?"bg-gray-800 border-gray-700 text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`,min:1,max:168,disabled:!u.enabled}),r.jsx("p",{className:`text-sm ${w}`,children:"How long users stay logged in (1-168 hours)"})]}),r.jsx(W,{onClick:A,className:"w-full",children:"Save Supabase Configuration"})]})]}),r.jsxs(he,{className:`${g} border ${N} p-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($S,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("h3",{className:`text-lg ${b}`,children:"Google OAuth Configuration"})]}),m.configured&&r.jsx(De,{className:"bg-emerald-500",children:"Configured"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`${e?"bg-blue-900/20 border-blue-800":"bg-blue-50 border-blue-200"} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:`h-5 w-5 mt-0.5 ${e?"text-blue-400":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsxs("p",{className:`text-sm ${e?"text-blue-300":"text-blue-900"} mb-2`,children:[r.jsx("strong",{children:"Setup Required:"})," Configure Google OAuth in Supabase Dashboard"]}),r.jsxs("a",{href:"https://supabase.com/docs/guides/auth/social-login/auth-google",target:"_blank",rel:"noopener noreferrer",className:`text-sm ${e?"text-blue-400":"text-blue-600"} hover:underline flex items-center gap-1`,children:["View Setup Guide",r.jsx(tn,{className:"h-3 w-3"})]})]})]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"} mb-1`,children:"Enable Google OAuth"}),r.jsx("p",{className:`text-sm ${w}`,children:"Allow users to sign in with their Google account"})]}),r.jsx(Rt,{checked:m.enabled,onCheckedChange:T=>f({...m,enabled:T})})]}),r.jsx(Ze,{className:N}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"}`,children:"Google Client ID"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"text",value:m.clientId,onChange:T=>f({...m,clientId:T.target.value}),placeholder:"Enter your Google Client ID",className:`h-12 ${e?"bg-gray-800 border-gray-700 text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>O(m.clientId,"Client ID"),disabled:!m.clientId,children:r.jsx(on,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"}`,children:"Google Client Secret"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"password",value:m.clientSecret,onChange:T=>f({...m,clientSecret:T.target.value}),placeholder:"Enter your Google Client Secret",className:`h-12 ${e?"bg-gray-800 border-gray-700 text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>O(m.clientSecret,"Client Secret"),disabled:!m.clientSecret,children:r.jsx(on,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${e?"text-white":"text-gray-700"}`,children:"Redirect URI"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"text",value:m.redirectUri,readOnly:!0,className:`h-12 ${e?"bg-gray-800 border-gray-700 text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>O(m.redirectUri,"Redirect URI"),children:r.jsx(on,{className:"h-4 w-4"})})]}),r.jsx("p",{className:`text-sm ${w}`,children:"Add this URL to your Google Cloud Console OAuth configuration"})]}),r.jsx(W,{onClick:k,className:"w-full",children:"Save Google OAuth Configuration"})]})]}),r.jsxs(he,{className:`${g} border ${N} p-6`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(nv,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("h3",{className:`text-lg ${b}`,children:"Other OAuth Providers"})]}),r.jsx("div",{className:"space-y-3",children:v.map(T=>r.jsx("div",{className:`${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${N} rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`${e?"text-indigo-400":"text-indigo-600"}`,children:T.icon}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:b,children:T.name}),T.configured&&r.jsx(De,{variant:"secondary",className:"text-xs",children:"Configured"})]}),r.jsx("p",{className:`text-sm ${w}`,children:T.configured?"Ready to use":"Configuration required"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[!T.configured&&r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>window.open(T.setupUrl,"_blank"),children:[r.jsx(tn,{className:"h-3 w-3 mr-1"}),"Setup"]}),r.jsx(Rt,{checked:T.enabled,onCheckedChange:()=>E(T.id),disabled:!T.configured})]})]})},T.id))}),r.jsx("div",{className:`mt-4 ${e?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(hs,{className:`h-5 w-5 mt-0.5 ${e?"text-yellow-400":"text-yellow-600"}`}),r.jsx("div",{children:r.jsxs("p",{className:`text-sm ${e?"text-yellow-300":"text-yellow-900"}`,children:[r.jsx("strong",{children:"Note:"})," Each OAuth provider requires configuration in both Supabase Dashboard and the provider's developer console."]})})]})})]}),r.jsxs(he,{className:`${g} border ${N} p-6`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Bhe,{className:`h-5 w-5 ${e?"text-indigo-400":"text-indigo-600"}`}),r.jsx("h3",{className:`text-lg ${b}`,children:"Environment Variables"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${N} rounded-lg p-3`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("code",{className:`text-sm ${e?"text-indigo-400":"text-indigo-600"}`,children:"SUPABASE_PROJECT_ID"}),r.jsx(Lt,{className:"h-4 w-4 text-emerald-500"})]}),r.jsx("p",{className:`text-xs ${w}`,children:Lf})]}),r.jsxs("div",{className:`${e?"bg-[#1e1e1e]":"bg-gray-50"} border ${N} rounded-lg p-3`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("code",{className:`text-sm ${e?"text-indigo-400":"text-indigo-600"}`,children:"SUPABASE_ANON_KEY"}),r.jsx(Lt,{className:"h-4 w-4 text-emerald-500"})]}),r.jsx("p",{className:`text-xs ${w}`,children:""})]})]}),r.jsx("p",{className:`text-sm ${w} mt-4`,children:"These environment variables are automatically loaded from your Supabase project configuration."})]})]})},EZe=[{id:"stripe",name:"Stripe",icon:r.jsx(rn,{className:"w-5 h-5"}),description:"Stripe payment processing API keys",color:"purple",fields:[{key:"STRIPE_SECRET_KEY",label:"Secret Key",placeholder:"sk_test_...",required:!0,description:"Your Stripe secret key for server-side operations"},{key:"STRIPE_PUBLISHABLE_KEY",label:"Publishable Key",placeholder:"pk_test_...",required:!0,description:"Your Stripe publishable key for client-side operations"},{key:"STRIPE_WEBHOOK_SECRET",label:"Webhook Secret",placeholder:"whsec_...",required:!1,description:"Secret for verifying Stripe webhook events"}]},{id:"supabase",name:"Supabase",icon:r.jsx(Kf,{className:"w-5 h-5"}),description:"Supabase database and authentication",color:"green",fields:[{key:"SUPABASE_URL",label:"Project URL",placeholder:"https://xxxxx.supabase.co",required:!0,description:"Your Supabase project URL"},{key:"SUPABASE_ANON_KEY",label:"Anon/Public Key",placeholder:"eyJhbG...",required:!0,description:"Public anon key for client-side operations"},{key:"SUPABASE_SERVICE_ROLE_KEY",label:"Service Role Key",placeholder:"eyJhbG...",required:!1,description:"Service role key for server-side admin operations"}]},{id:"google",name:"Google APIs",icon:r.jsx(ml,{className:"w-5 h-5"}),description:"Google Cloud Platform API credentials",color:"blue",fields:[{key:"GOOGLE_CLIENT_ID",label:"OAuth Client ID",placeholder:"xxxxx.apps.googleusercontent.com",required:!1,description:"Google OAuth 2.0 client ID"},{key:"GOOGLE_CLIENT_SECRET",label:"OAuth Client Secret",placeholder:"GOCSPX-...",required:!1,description:"Google OAuth 2.0 client secret"},{key:"GOOGLE_API_KEY",label:"API Key",placeholder:"AIza...",required:!1,description:"Google API key for services (Maps, etc.)"}]}];function PZe(){const{theme:t}=Nr(),{currentUser:e}=no(),s=t==="dark",[n,a]=j.useState({}),[i,o]=j.useState({}),[l,c]=j.useState({}),[d,u]=j.useState(null),[h,m]=j.useState(null),f=s?"bg-[#161616]":"bg-white",v=s?"bg-[#1e1e1e]":"bg-gray-50",x=s?"text-white":"text-gray-900",g=s?"text-gray-400":"text-gray-600",b=s?"border-gray-800":"border-gray-200",w=e?.role==="super-admin"||e?.role==="beta-owner";j.useEffect(()=>{w&&N()},[w]);const N=async()=>{try{try{const M=await fetch("http://localhost:3001/api/config");if(M.ok){const V=await M.json();V.success&&console.log("Backend configuration status:",V.data)}}catch{console.warn("Backend not available, using localStorage only")}const z=localStorage.getItem("booking-tms-secrets");z&&a(JSON.parse(z))}catch(z){console.error("Error loading secrets:",z),re.error("Failed to load saved secrets")}},C=(z,M,V)=>{a(B=>({...B,[z]:M})),c(B=>({...B,[V]:!0}))},S=z=>{o(M=>({...M,[z]:!M[z]}))},A=(z,M)=>{navigator.clipboard.writeText(z),re.success(`${M} copied to clipboard`)},k=(z,M,V)=>{a(B=>{const F={...B};return delete F[z],F}),c(B=>({...B,[V]:!0})),re.success(`${M} deleted`)},E=async z=>{u(z.id);try{const M={};z.fields.forEach(B=>{n[B.key]&&(M[B.key]=n[B.key])});const V={...n};localStorage.setItem("booking-tms-secrets",JSON.stringify(V));try{const F=await(await fetch("http://localhost:3001/api/config/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:z.id,config:M})})).json();if(F.success)re.success(`${z.name} secrets saved securely! ${F.test?.message||""}`);else throw new Error(F.error||"Backend save failed")}catch(B){console.warn("Backend save failed, using localStorage:",B),re.warning(`${z.name} secrets saved locally (backend unavailable)`)}c(B=>({...B,[z.id]:!1})),await $(z.id,M)}catch(M){console.error(`Error saving ${z.name} secrets:`,M),re.error(`Failed to save ${z.name} secrets`)}finally{u(null)}},O=async z=>{m(z);try{const V=await(await fetch(`http://localhost:3001/api/config/test/${z}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();V.success?re.success(`${z.toUpperCase()} connection successful! ${V.test?.details?.accountId||""}`):re.error(`${z.toUpperCase()} connection failed: ${V.test?.message||"Unknown error"}`)}catch(M){console.error(`Error testing ${z} connection:`,M),re.error(`Failed to test ${z.toUpperCase()} connection`)}finally{m(null)}},$=async(z,M)=>{try{switch(z){case"stripe":M.STRIPE_PUBLISHABLE_KEY&&localStorage.setItem("stripe_publishable_key",M.STRIPE_PUBLISHABLE_KEY);break;case"supabase":M.SUPABASE_URL&&M.SUPABASE_ANON_KEY&&(localStorage.setItem("supabase_url",M.SUPABASE_URL),localStorage.setItem("supabase_anon_key",M.SUPABASE_ANON_KEY));break;case"google":M.GOOGLE_CLIENT_ID&&localStorage.setItem("google_client_id",M.GOOGLE_CLIENT_ID);break}}catch(V){console.error("Error applying secrets:",V)}},T=z=>!!(n[z]&&n[z].trim()!==""),I=z=>{const M=z.fields.filter(F=>T(F.key)).length,V=z.fields.filter(F=>F.required&&T(F.key)).length,B=z.fields.filter(F=>F.required).length;return M===z.fields.length||V===B&&B>0?"complete":M>0?"partial":"none"},L=z=>{const M={purple:{bg:s?"bg-purple-500/10":"bg-purple-50",border:"border-purple-500/20",text:"text-purple-400",badge:"bg-purple-500"},green:{bg:s?"bg-green-500/10":"bg-green-50",border:"border-green-500/20",text:"text-green-400",badge:"bg-green-500"},blue:{bg:s?"bg-blue-500/10":"bg-blue-50",border:"border-blue-500/20",text:"text-blue-400",badge:"bg-blue-500"}};return M[z]||M.blue};return w?r.jsxs("div",{className:"space-y-6",children:[r.jsx(he,{className:`${f} border ${b}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${s?"bg-blue-500/10":"bg-blue-50"}`,children:r.jsx(Mn,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-xl font-semibold ${x}`,children:"API Secrets & Keys"}),r.jsx("p",{className:`text-sm ${g} mt-1`,children:"Securely manage API keys and secrets for third-party integrations"})]})]}),r.jsxs(jo,{className:`${s?"bg-yellow-500/10 border-yellow-500/20":"bg-yellow-50 border-yellow-200"}`,children:[r.jsx(zs,{className:"w-4 h-4 text-yellow-500"}),r.jsxs(No,{className:`${s?"text-yellow-200":"text-yellow-800"}`,children:[r.jsx("strong",{children:"Security Notice:"})," API keys are stored locally in your browser. In production, these should be managed through secure environment variables and never committed to source control."]})]})]})}),EZe.map(z=>{const M=I(z),V=L(z.color);return r.jsxs(he,{className:`${f} border ${b}`,children:[r.jsx(Ke,{className:`border-b ${b}`,children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${V.bg}`,children:z.icon}),r.jsxs("div",{children:[r.jsx(Xe,{className:x,children:z.name}),r.jsx(Ft,{className:g,children:z.description})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(De,{variant:M==="complete"?"default":M==="partial"?"secondary":"outline",className:M==="complete"?"bg-green-500":M==="partial"?"bg-yellow-500":"",children:[M==="complete"&&r.jsx(Lt,{className:"w-3 h-3 mr-1"}),M==="partial"&&r.jsx(hs,{className:"w-3 h-3 mr-1"}),M==="complete"?"Configured":M==="partial"?"Partial":"Not Configured"]}),r.jsxs("div",{className:"flex gap-2",children:[z.id==="stripe"&&r.jsx(W,{onClick:()=>O(z.id),disabled:d===z.id||h===z.id,size:"sm",variant:"outline",className:b,children:h===z.id?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-3 h-3 mr-1 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Test"]})}),r.jsx(W,{onClick:()=>E(z),disabled:d===z.id,size:"sm",className:`${s?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white`,children:d===z.id?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-3 h-3 mr-1 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-3 h-3 mr-1"}),"Save"]})})]})]})]})}),r.jsx(_e,{className:"p-6 space-y-6",children:z.fields.map(B=>{const F=T(B.key),J=i[B.key];return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(X,{htmlFor:B.key,className:x,children:[B.label,B.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),F&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-xs text-green-500",children:"Configured"})]})]}),B.description&&r.jsx("p",{className:`text-xs ${g}`,children:B.description}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(de,{id:B.key,type:J?"text":"password",value:n[B.key]||"",onChange:ee=>C(B.key,ee.target.value,z.id),placeholder:B.placeholder,className:`pr-10 ${v} ${b} ${x}`}),r.jsx("button",{onClick:()=>S(B.key),className:`absolute right-3 top-1/2 -translate-y-1/2 ${g} hover:${x}`,type:"button",children:J?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})})]}),n[B.key]&&r.jsxs(r.Fragment,{children:[r.jsx(W,{variant:"outline",size:"icon",onClick:()=>A(n[B.key],B.label),className:b,children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"icon",onClick:()=>k(B.key,B.label,z.id),className:`${b} text-red-500 hover:text-red-600`,children:r.jsx(ks,{className:"w-4 h-4"})})]})]})]},B.key)})})]},z.id)}),r.jsxs(he,{className:`${f} border ${b}`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:x,children:"Environment Variables"}),r.jsx(Ft,{className:g,children:"How to use these secrets in your application"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${b} ${v}`,children:[r.jsx("h4",{className:`${x} font-medium mb-2`,children:"1. Local Development"}),r.jsxs("p",{className:`text-sm ${g} mb-2`,children:["Create a ",r.jsx("code",{className:"px-1 py-0.5 bg-gray-800 rounded text-xs",children:".env.local"})," file in your project root:"]}),r.jsx("pre",{className:`p-3 rounded text-xs ${s?"bg-black":"bg-gray-900"} text-green-400 overflow-x-auto`,children:`VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
VITE_SUPABASE_URL=https://...supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbG...`})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${b} ${v}`,children:[r.jsx("h4",{className:`${x} font-medium mb-2`,children:"2. Production Deployment"}),r.jsx("p",{className:`text-sm ${g}`,children:"Set environment variables in your hosting platform (Vercel, Netlify, etc.) or use Supabase Edge Functions secrets:"}),r.jsx("pre",{className:`mt-2 p-3 rounded text-xs ${s?"bg-black":"bg-gray-900"} text-green-400`,children:"supabase secrets set STRIPE_SECRET_KEY=sk_live_..."})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${b} ${v}`,children:[r.jsx("h4",{className:`${x} font-medium mb-2`,children:"3. Best Practices"}),r.jsxs("ul",{className:`text-sm ${g} space-y-2 list-disc list-inside`,children:[r.jsx("li",{children:"Never commit secrets to source control"}),r.jsx("li",{children:"Use different keys for development and production"}),r.jsx("li",{children:"Rotate keys regularly"}),r.jsx("li",{children:"Use the principle of least privilege"}),r.jsx("li",{children:"Monitor API usage and set up alerts"})]})]})]})]})]}):r.jsx("div",{className:"space-y-6",children:r.jsx(he,{className:`${f} border ${b}`,children:r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:`p-4 rounded-full ${s?"bg-red-500/10":"bg-red-50"}`,children:r.jsx(Bme,{className:"w-16 h-16 text-red-500"})})}),r.jsx("h3",{className:`text-2xl font-bold ${x} mb-3`,children:"Access Restricted"}),r.jsxs("p",{className:`text-lg ${g} mb-6 max-w-2xl mx-auto`,children:["This page contains sensitive API keys and secrets.",r.jsx("br",{}),"Only ",r.jsx("strong",{className:"text-red-500",children:"Super Administrators"})," can access this section."]}),r.jsxs(jo,{className:`max-w-md mx-auto ${s?"bg-red-500/10 border-red-500/20":"bg-red-50 border-red-200"}`,children:[r.jsx(zs,{className:"w-4 h-4 text-red-500"}),r.jsxs(No,{className:`${s?"text-red-200":"text-red-800"}`,children:[r.jsx("strong",{children:"Current Role:"})," ",e?.role||"Not authenticated",r.jsx("br",{}),r.jsx("strong",{children:"Required Role:"})," super-admin or beta-owner"]})]}),r.jsx("p",{className:`text-sm ${g} mt-8`,children:"If you need access to this page, please contact your system administrator."})]})})})}function TZe(){const{theme:t}=Nr(),e=t==="dark",[s,n]=j.useState([]),[a,i]=j.useState([]),[o,l]=j.useState({}),[c,d]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState([]),[v,x]=j.useState({}),[g,b]=j.useState({}),[w,N]=j.useState({}),[C,S]=j.useState({}),A=e?"bg-[#0a0a0a]":"bg-gray-50",k=e?"bg-[#161616]":"bg-white",E=e?"text-white":"text-gray-900",O=e?"text-gray-400":"text-gray-600",$=e?"border-gray-800":"border-gray-200";j.useEffect(()=>{L(),T()},[]);const T=()=>{try{const se=localStorage.getItem("llm_api_keys");se&&x(JSON.parse(se))}catch(se){console.error("Error loading saved API keys:",se)}},I=se=>{try{localStorage.setItem("llm_api_keys",JSON.stringify(se))}catch(ne){console.error("Error saving API keys:",ne)}},L=async()=>{d(!0);try{await z(),M(),await V(),await B(),h(new Date),re.success("All checks completed")}catch(se){console.error("Error running checks:",se),re.error("Some checks failed")}finally{d(!1)}},z=async()=>{const se=Date.now();try{const{supabase:ne}=await V0(async()=>{const{supabase:oe}=await Promise.resolve().then(()=>CQ);return{supabase:oe}},void 0),{data:ie,error:be}=await ne.from("kv_store_84a71643").select("count",{count:"exact",head:!0}),ue=Date.now()-se;n(be?oe=>[...oe.filter(pe=>pe.name!=="Supabase"),{name:"Supabase",status:"error",message:`Connection error: ${be.message}`,latency:ue}]:oe=>[...oe.filter(pe=>pe.name!=="Supabase"),{name:"Supabase",status:"connected",message:"Connected successfully",latency:ue,details:{table:"kv_store_84a71643",ready:!0}}])}catch(ne){n(ie=>[...ie.filter(be=>be.name!=="Supabase"),{name:"Supabase",status:"disconnected",message:ne.message||"Not configured",latency:Date.now()-se}])}},M=()=>{const se={SUPABASE_URL:!1,SUPABASE_ANON_KEY:!1,SUPABASE_SERVICE_ROLE_KEY:!1};try{se.SUPABASE_URL=!0,se.SUPABASE_ANON_KEY=!0,se.SUPABASE_SERVICE_ROLE_KEY=!0}catch(ne){console.error("Error checking env vars:",ne)}l(se)},V=async()=>{const se=[{name:"Health Check",url:"/api/health",method:"GET"},{name:"Bookings API",url:"/api/bookings",method:"GET"},{name:"Customers API",url:"/api/customers",method:"GET"}],ne=[];for(const ie of se){const be=Date.now();try{await new Promise(oe=>setTimeout(oe,100));const ue=Date.now()-be;ne.push({name:ie.name,url:ie.url,method:ie.method,status:"mock",statusCode:200,latency:ue,message:"Endpoint not implemented (mock response)"})}catch(ue){ne.push({name:ie.name,url:ie.url,method:ie.method,status:"error",statusCode:0,latency:Date.now()-be,message:ue.message||"Connection failed"})}}f(ne)},B=async()=>{const se=[],ne=new Date().toISOString();se.push({service:"Database",status:"healthy",responseTime:45,message:"PostgreSQL connection established",timestamp:ne}),se.push({service:"Authentication",status:"healthy",responseTime:23,message:"Auth service operational",timestamp:ne}),se.push({service:"Storage",status:"healthy",responseTime:67,message:"Storage buckets accessible",timestamp:ne}),se.push({service:"Edge Functions",status:"unknown",responseTime:void 0,message:"Not configured",timestamp:ne}),i(se)},F=se=>{switch(se){case"connected":case"healthy":return r.jsx(Lt,{className:"w-5 h-5 text-green-500"});case"disconnected":case"unhealthy":return r.jsx(ln,{className:"w-5 h-5 text-red-500"});case"checking":case"unknown":return r.jsx(hs,{className:"w-5 h-5 text-yellow-500"});case"degraded":return r.jsx(hs,{className:"w-5 h-5 text-orange-500"});default:return r.jsx(cl,{className:"w-5 h-5 text-gray-500"})}},J=se=>{const ne={connected:"bg-green-500/10 text-green-500 border-green-500/20",healthy:"bg-green-500/10 text-green-500 border-green-500/20",disconnected:"bg-red-500/10 text-red-500 border-red-500/20",unhealthy:"bg-red-500/10 text-red-500 border-red-500/20",checking:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",unknown:"bg-gray-500/10 text-gray-500 border-gray-500/20",degraded:"bg-orange-500/10 text-orange-500 border-orange-500/20",error:"bg-red-500/10 text-red-500 border-red-500/20",mock:"bg-blue-500/10 text-blue-500 border-blue-500/20"};return ne[se]||ne.unknown},ee=(se,ne)=>{const ie={...v,[se]:ne};x(ie),I(ie)},q=se=>{S(ne=>({...ne,[se]:!ne[se]}))},U=se=>{const ne={...v};delete ne[se],x(ne),I(ne);const ie={...g};delete ie[se],b(ie),re.success(`${Am.find(be=>be.id===se)?.name} API key cleared`)},Z=async se=>{const ne=v[se.id];if(!ne){re.error("Please enter an API key first");return}const ie=SZe(se.id,ne);if(!ie.valid){re.error(ie.message);return}N(be=>({...be,[se.id]:!0}));try{const be=await NZe(se.id,ne);b(ue=>({...ue,[se.id]:be})),be.success?re.success(`Successfully connected to ${se.name}`):re.error(`Failed to connect to ${se.name}: ${be.message}`)}catch(be){re.error(`Error testing ${se.name}: ${be.message}`)}finally{N(be=>({...be,[se.id]:!1}))}},K=async()=>{const se=Am.filter(ne=>v[ne.id]);if(se.length===0){re.error("No API keys configured. Please add at least one API key.");return}re.info(`Testing ${se.length} LLM provider(s)...`);for(const ne of se)await Z(ne);re.success("All LLM connection tests completed")};return r.jsxs("div",{className:`min-h-screen ${A} p-6`,children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-3 rounded-lg ${e?"bg-[#161616]":"bg-white"} border ${$}`,children:r.jsx(cN,{className:`w-6 h-6 ${e?"text-blue-400":"text-blue-600"}`})}),r.jsxs("div",{children:[r.jsx("h1",{className:`text-2xl ${E} mb-1`,children:"Backend Dashboard"}),r.jsx("p",{className:`text-sm ${O}`,children:"Monitor and test backend services, connections, and API endpoints"})]})]}),r.jsx(W,{onClick:L,disabled:c,className:"bg-[#4f46e5] hover:bg-[#4338ca] text-white",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 mr-2 animate-spin"}),"Refreshing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Refresh All"]})})]}),u&&r.jsxs("p",{className:`text-xs ${O}`,children:["Last checked: ",u.toLocaleTimeString()]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsx(he,{className:`${k} border ${$} p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${O} mb-1`,children:"Database"}),r.jsx("p",{className:`text-xl ${E}`,children:s.find(se=>se.name==="Supabase")?.status==="connected"?"Connected":"Disconnected"})]}),r.jsx(Kf,{className:`w-8 h-8 ${s.find(se=>se.name==="Supabase")?.status==="connected"?"text-green-500":"text-red-500"}`})]})}),r.jsx(he,{className:`${k} border ${$} p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${O} mb-1`,children:"Health Checks"}),r.jsxs("p",{className:`text-xl ${E}`,children:[a.filter(se=>se.status==="healthy").length,"/",a.length]})]}),r.jsx(cl,{className:`w-8 h-8 ${e?"text-green-400":"text-green-600"}`})]})}),r.jsx(he,{className:`${k} border ${$} p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${O} mb-1`,children:"API Endpoints"}),r.jsx("p",{className:`text-xl ${E}`,children:m.length})]}),r.jsx(ml,{className:`w-8 h-8 ${e?"text-blue-400":"text-blue-600"}`})]})}),r.jsx(he,{className:`${k} border ${$} p-4`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${O} mb-1`,children:"Avg Response"}),r.jsx("p",{className:`text-xl ${E}`,children:s[0]?.latency?`${s[0].latency}ms`:"--"})]}),r.jsx(Du,{className:`w-8 h-8 ${e?"text-yellow-400":"text-yellow-600"}`})]})})]}),r.jsxs(wn,{defaultValue:"connections",className:"space-y-4",children:[r.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:r.jsxs(kn,{className:`${k} border ${$} flex-nowrap md:flex-wrap justify-start min-w-max md:min-w-0 gap-1`,children:[r.jsxs(Tt,{value:"connections",className:"flex-shrink-0",children:[r.jsx(mme,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Connections"}),r.jsx("span",{className:"sm:hidden",children:"Conn"})]}),r.jsxs(Tt,{value:"secrets",className:"flex-shrink-0",children:[r.jsx(Mn,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Secrets"}),r.jsx("span",{className:"sm:hidden",children:"Keys"})]}),r.jsxs(Tt,{value:"auth",className:"flex-shrink-0",children:[r.jsx(zs,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Auth Services"}),r.jsx("span",{className:"sm:hidden",children:"Auth"})]}),r.jsxs(Tt,{value:"database",className:"flex-shrink-0",children:[r.jsx(Kf,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Database"}),r.jsx("span",{className:"sm:hidden",children:"DB"})]}),r.jsxs(Tt,{value:"health",className:"flex-shrink-0",children:[r.jsx(cl,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Health Checks"}),r.jsx("span",{className:"sm:hidden",children:"Health"})]}),r.jsxs(Tt,{value:"api",className:"flex-shrink-0",children:[r.jsx(ic,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"API Tests"}),r.jsx("span",{className:"sm:hidden",children:"API"})]}),r.jsxs(Tt,{value:"env",className:"flex-shrink-0",children:[r.jsx($d,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Environment"}),r.jsx("span",{className:"sm:hidden",children:"Env"})]}),r.jsxs(Tt,{value:"monitoring",className:"flex-shrink-0",children:[r.jsx(rhe,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Monitoring"}),r.jsx("span",{className:"sm:hidden",children:"Mon"})]}),r.jsxs(Tt,{value:"llm",className:"flex-shrink-0",children:[r.jsx(L1,{className:"w-4 h-4 mr-1 md:mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"LLM Connections"}),r.jsx("span",{className:"sm:hidden",children:"LLM"})]})]})}),r.jsx(Bt,{value:"connections",className:"space-y-4",children:r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"Service Connections"}),r.jsx("p",{className:`text-sm ${O}`,children:"Status of all backend service connections"})]}),r.jsx("div",{className:"p-6 space-y-4",children:s.length===0?r.jsxs(jo,{children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsx(No,{children:'No connection data available. Click "Refresh All" to check connections.'})]}):s.map((se,ne)=>r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[F(se.status),r.jsxs("div",{children:[r.jsx("h4",{className:`${E} mb-1`,children:se.name}),r.jsx("p",{className:`text-sm ${O}`,children:se.message})]})]}),r.jsx(De,{className:`${J(se.status)} border`,children:se.status})]}),se.latency&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jr,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:O,children:["Response time: ",se.latency,"ms"]})]}),se.details&&r.jsx("div",{className:`mt-3 p-3 rounded ${e?"bg-[#161616]":"bg-white"} border ${$}`,children:r.jsx("pre",{className:`text-xs ${O} overflow-x-auto`,children:JSON.stringify(se.details,null,2)})})]},ne))})]})}),r.jsx(Bt,{value:"secrets",className:"space-y-4",children:r.jsx(PZe,{})}),r.jsx(Bt,{value:"auth",className:"space-y-4",children:r.jsx(AZe,{})}),r.jsx(Bt,{value:"database",className:"space-y-4",children:r.jsx(_Ze,{isDark:e})}),r.jsx(Bt,{value:"health",className:"space-y-4",children:r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"Service Health"}),r.jsx("p",{className:`text-sm ${O}`,children:"Health status of all backend services"})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:a.map((se,ne)=>r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[F(se.status),r.jsxs("div",{children:[r.jsx("h4",{className:E,children:se.service}),r.jsx("p",{className:`text-sm ${O}`,children:se.message})]})]}),r.jsx(De,{className:`${J(se.status)} border`,children:se.status})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[se.responseTime&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:O,children:[se.responseTime,"ms"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cl,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:O,children:new Date(se.timestamp).toLocaleTimeString()})]})]})]},ne))})})]})}),r.jsx(Bt,{value:"api",className:"space-y-4",children:r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"API Endpoint Tests"}),r.jsx("p",{className:`text-sm ${O}`,children:"Test backend API endpoints and measure response times"})]}),r.jsx("div",{className:"p-6 space-y-4",children:m.length===0?r.jsxs(jo,{children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsx(No,{children:'No API tests run yet. Click "Refresh All" to test endpoints.'})]}):m.map((se,ne)=>r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`${E} mb-1`,children:se.name}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:[se.method," ",se.url]}),r.jsx("p",{className:`text-sm ${O}`,children:se.message})]}),r.jsx(De,{className:`${J(se.status)} border`,children:se.statusCode||se.status})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(jr,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:O,children:[se.latency,"ms"]})]})]},ne))})]})}),r.jsx(Bt,{value:"env",className:"space-y-4",children:r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"Environment Variables"}),r.jsx("p",{className:`text-sm ${O}`,children:"Required environment variables for backend services"})]}),r.jsxs("div",{className:"p-6 space-y-3",children:[Object.entries(o).map(([se,ne])=>r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($d,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{className:E,children:se})]}),ne?r.jsx(Lt,{className:"w-5 h-5 text-green-500"}):r.jsx(ln,{className:"w-5 h-5 text-red-500"})]},se)),r.jsxs(jo,{className:"mt-4",children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsxs(No,{children:[r.jsx("strong",{children:"Note:"})," Environment variables are checked server-side for security. Set these in your .env.local file or hosting platform."]})]})]})]})}),r.jsx(Bt,{value:"monitoring",className:"space-y-4",children:r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"Real-Time Monitoring"}),r.jsx("p",{className:`text-sm ${O}`,children:"Live metrics and performance monitoring (Coming Soon)"})]}),r.jsx("div",{className:"p-6",children:r.jsxs(jo,{children:[r.jsx(ul,{className:"w-4 h-4"}),r.jsxs(No,{children:["Real-time monitoring features will be available once the backend is fully deployed. This will include:",r.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[r.jsx("li",{children:"Live request tracking"}),r.jsx("li",{children:"Performance metrics"}),r.jsx("li",{children:"Error rate monitoring"}),r.jsx("li",{children:"Database query analytics"}),r.jsx("li",{children:"API usage statistics"})]})]})]})})]})}),r.jsxs(Bt,{value:"llm",className:"space-y-4",children:[r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsx("div",{className:`p-6 border-b ${$}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"LLM API Connections"}),r.jsx("p",{className:`text-sm ${O}`,children:"Test connections to Large Language Model providers"})]}),r.jsxs(W,{onClick:K,disabled:Object.keys(v).length===0,className:"bg-[#4f46e5] hover:bg-[#4338ca] text-white",children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),"Test All"]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs(jo,{className:"mb-4",children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsxs(No,{children:[r.jsx("strong",{children:"Security Note:"})," API keys are stored locally in your browser and never sent to our servers. They are used only for direct API calls to the respective LLM providers."]})]}),Am.map(se=>{const ne=g[se.id],ie=w[se.id],be=!!v[se.id],ue=C[se.id];return r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"text-3xl",children:se.icon}),r.jsxs("div",{children:[r.jsx("h4",{className:`${E} mb-1`,children:se.name}),r.jsx("p",{className:`text-sm ${O}`,children:se.description})]})]}),ne&&r.jsx(De,{className:`${J(ne.success?"connected":"error")} border`,children:ne.success?"Connected":"Failed"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs(X,{className:`text-sm ${O} mb-2 block`,children:["API Key (",se.envVar,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(de,{type:ue?"text":"password",value:v[se.id]||"",onChange:oe=>ee(se.id,oe.target.value),placeholder:`Enter your ${se.name} API key`,className:`h-10 pr-20 ${e?"bg-[#161616] border-gray-700":"bg-white border-gray-300"}`}),r.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:be&&r.jsxs(r.Fragment,{children:[r.jsx(W,{type:"button",variant:"ghost",size:"sm",onClick:()=>q(se.id),className:"h-7 w-7 p-0",children:ue?r.jsx(Pd,{className:"w-4 h-4"}):r.jsx(ys,{className:"w-4 h-4"})}),r.jsx(W,{type:"button",variant:"ghost",size:"sm",onClick:()=>U(se.id),className:"h-7 w-7 p-0 text-red-500 hover:text-red-600 hover:bg-red-500/10",children:r.jsx(ks,{className:"w-4 h-4"})})]})})]}),r.jsx(W,{onClick:()=>Z(se),disabled:!be||ie,className:"bg-[#4f46e5] hover:bg-[#4338ca] text-white",children:ie?r.jsxs(r.Fragment,{children:[r.jsx(Ln,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),"Test"]})})]})]}),ne&&r.jsx("div",{className:`p-3 rounded border ${$} ${e?"bg-[#161616]":"bg-white"}`,children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[ne.success?r.jsx(Lt,{className:"w-4 h-4 text-green-500"}):r.jsx(ln,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:`text-sm ${E}`,children:ne.message})]}),ne.latency&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 text-gray-500"}),r.jsx("span",{className:`text-sm ${O}`,children:kZe(ne.latency)}),(()=>{const oe=CZe(ne.latency),pe={green:"text-green-500",blue:"text-blue-500",yellow:"text-yellow-500",red:"text-red-500"};return r.jsx(De,{className:`${pe[oe.color]||"text-gray-500"} border-0 bg-transparent`,children:oe.label})})()]})]}),ne.details&&r.jsxs("div",{className:`mt-2 p-2 rounded text-xs ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:`${O} mb-1`,children:[r.jsx("strong",{children:"Model:"})," ",ne.details.model]}),ne.details.response&&r.jsxs("div",{className:`${O}`,children:[r.jsx("strong",{children:"Response:"})," ",ne.details.response]}),ne.details.usage&&r.jsxs("div",{className:`${O} mt-1`,children:[r.jsx("strong",{children:"Usage:"})," ",JSON.stringify(ne.details.usage)]})]}),ne.error&&r.jsx("div",{className:"mt-2 p-2 rounded text-xs bg-red-500/10 border border-red-500/20",children:r.jsxs("div",{className:"text-red-500",children:[r.jsx("strong",{children:"Error:"})," ",JSON.stringify(ne.error)]})})]})})]})]},se.id)})]})]}),r.jsxs(he,{className:`${k} border ${$}`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"How to Get API Keys"}),r.jsx("p",{className:`text-sm ${O}`,children:"Quick links to obtain API keys from each provider"})]}),r.jsxs("div",{className:"p-6 space-y-3",children:[r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" OpenAI"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Sign up at ",r.jsx("a",{href:"https://platform.openai.com/signup",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"platform.openai.com"})," and generate an API key from your account settings."]})]}),r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" Anthropic Claude"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Visit ",r.jsx("a",{href:"https://console.anthropic.com/",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"console.anthropic.com"})," to create an account and get your API key."]})]}),r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" Google AI (Gemini)"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Get your API key from ",r.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"Google AI Studio"}),"."]})]}),r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" Cohere"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Sign up at ",r.jsx("a",{href:"https://dashboard.cohere.com/",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"dashboard.cohere.com"})," to get your API key."]})]}),r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" Hugging Face"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Create an account at ",r.jsx("a",{href:"https://huggingface.co/",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"huggingface.co"})," and generate a token in your settings."]})]}),r.jsxs("div",{className:`p-3 rounded border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:" Together AI"}),r.jsxs("p",{className:`text-sm ${O} mb-2`,children:["Visit ",r.jsx("a",{href:"https://api.together.xyz/",target:"_blank",rel:"noopener noreferrer",className:"text-[#4f46e5] hover:underline",children:"api.together.xyz"})," to sign up and get your API key."]})]})]})]})]})]}),r.jsxs(he,{className:`${k} border ${$} mt-6`,children:[r.jsxs("div",{className:`p-6 border-b ${$}`,children:[r.jsx("h3",{className:`text-lg ${E} mb-1`,children:"Development Setup Guide"}),r.jsx("p",{className:`text-sm ${O}`,children:"Quick steps to get your backend development-ready"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:"1. Set up Supabase"}),r.jsx("p",{className:`text-sm ${O} mb-2`,children:"Create a Supabase project and add credentials to .env.local:"}),r.jsx("pre",{className:`text-xs ${O} p-3 rounded ${e?"bg-[#161616]":"bg-white"} border ${$} overflow-x-auto`,children:`NEXT_PUBLIC_SUPABASE_URL=your-project-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-key`})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:"2. Run Database Migrations"}),r.jsx("p",{className:`text-sm ${O} mb-2`,children:"Apply the initial schema to your database:"}),r.jsx("pre",{className:`text-xs ${O} p-3 rounded ${e?"bg-[#161616]":"bg-white"} border ${$} overflow-x-auto`,children:"supabase db push"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:"3. Deploy Edge Functions"}),r.jsx("p",{className:`text-sm ${O} mb-2`,children:"Deploy the server edge function:"}),r.jsx("pre",{className:`text-xs ${O} p-3 rounded ${e?"bg-[#161616]":"bg-white"} border ${$} overflow-x-auto`,children:"supabase functions deploy server"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${$} ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("h4",{className:`${E} mb-2`,children:"4. Test Connection"}),r.jsx("p",{className:`text-sm ${O} mb-2`,children:'Click "Refresh All" above to test all connections'})]})]})]})]})}const OZe=()=>{const{theme:t}=Nr(),e=t==="dark",[s,n]=j.useState("amount"),[a,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState([{id:"1",name:"",email:""}]),[u,h]=j.useState(""),[m,f]=j.useState(""),[v,x]=j.useState(""),[g,b]=j.useState("general"),[w,N]=j.useState({cardNumber:"",expiryDate:"",cvv:"",billingEmail:""}),C=[50,100,150,200,250,500],S=[{id:"birthday",name:"Birthday",emoji:"",color:"#ec4899"},{id:"holiday",name:"Holiday",emoji:"",color:"#10b981"},{id:"celebration",name:"Celebration",emoji:"",color:"#f59e0b"},{id:"general",name:"General",emoji:"",color:"#6366f1"}],A=()=>{d([...c,{id:Date.now().toString(),name:"",email:""}])},k=F=>{c.length>1?d(c.filter(J=>J.id!==F)):re.error("At least one recipient is required")},E=(F,J,ee)=>{d(c.map(q=>q.id===F?{...q,[J]:ee}:q))},O=()=>(a||parseInt(o)||0)*c.length,$=()=>{if(s==="amount"){if(!a&&!o){re.error("Please select or enter an amount");return}n("recipients")}else if(s==="recipients"){if(c.some(J=>!J.name.trim()||!J.email.trim())){re.error("Please fill in all recipient details");return}n("customize")}else if(s==="customize"){if(!m.trim()){re.error("Please enter your name");return}n("payment")}else if(s==="payment"){if(!w.cardNumber||!w.expiryDate||!w.cvv||!w.billingEmail){re.error("Please fill in all payment details");return}setTimeout(()=>{n("success"),re.success("Gift vouchers sent successfully!")},1500)}},T=()=>{s==="recipients"?n("amount"):s==="customize"?n("recipients"):s==="payment"&&n("customize")},I=()=>{n("amount"),i(null),l(""),d([{id:"1",name:"",email:""}]),h(""),f(""),x(""),b("general"),N({cardNumber:"",expiryDate:"",cvv:"",billingEmail:""})},L=e?"bg-[#0a0a0a]":"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",z=e?"bg-[#161616]":"bg-white",M=e?"border-[#2a2a2a]":"border-gray-200",V=e?"text-white":"text-gray-900",B=e?"text-[#a3a3a3]":"text-gray-600";return r.jsx(UQ,{children:r.jsx("div",{className:`min-h-screen ${L} py-8 px-4 sm:px-6 lg:px-8`,children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(_a,{className:"w-6 h-6 text-yellow-500 animate-pulse"}),r.jsx(Ni,{className:"w-12 h-12 text-indigo-600 dark:text-indigo-400"}),r.jsx(_a,{className:"w-6 h-6 text-yellow-500 animate-pulse"})]}),r.jsx("h1",{className:`text-4xl mb-2 ${V}`,children:"Gift Vouchers"}),r.jsx("p",{className:B,children:"Give the gift of unforgettable experiences!"})]}),s!=="success"&&r.jsx("div",{className:`${z} border ${M} rounded-xl p-6 mb-6 shadow-lg`,children:r.jsx("div",{className:"flex items-center justify-between",children:["amount","recipients","customize","payment"].map((F,J)=>{const ee=s===F,q=["amount","recipients","customize","payment"].indexOf(s)>J;return r.jsxs(ce.Fragment,{children:[r.jsxs("div",{className:"flex flex-col items-center flex-1",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${q?"bg-green-500 border-green-500 text-white":ee?"bg-indigo-600 border-indigo-600 text-white":e?"bg-[#1e1e1e] border-[#3a3a3a] text-[#737373]":"bg-gray-100 border-gray-300 text-gray-400"}`,children:q?r.jsx(Sr,{className:"w-5 h-5"}):J+1}),r.jsx("span",{className:`text-xs mt-2 capitalize ${ee?"text-indigo-600 dark:text-indigo-400":B}`,children:F==="amount"?"Amount":F==="recipients"?"Recipients":F==="customize"?"Customize":"Payment"})]}),J<3&&r.jsx("div",{className:`h-0.5 flex-1 ${q?"bg-green-500":e?"bg-[#2a2a2a]":"bg-gray-200"}`})]},F)})})}),s==="amount"&&r.jsxs(he,{className:`${z} border ${M} p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:r.jsx(ri,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${V}`,children:"Select Amount"}),r.jsx("p",{className:B,children:"Choose a voucher value"})]})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:C.map(F=>r.jsxs("button",{onClick:()=>{i(F),l("")},className:`p-6 rounded-xl border-2 transition-all hover:scale-105 ${a===F?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20":e?"border-[#2a2a2a] hover:border-[#3a3a3a]":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:`text-3xl mb-1 ${a===F?"text-indigo-600 dark:text-indigo-400":V}`,children:["$",F]}),r.jsx("div",{className:`text-sm ${a===F?"text-indigo-600 dark:text-indigo-400":B}`,children:"Per voucher"})]},F))}),r.jsx(Ze,{className:`my-6 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Or enter custom amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 text-xl ${B}`,children:"$"}),r.jsx(de,{type:"number",placeholder:"0",value:o,onChange:F=>{l(F.target.value),i(null)},className:`pl-8 text-xl h-14 ${e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}`})]}),r.jsx("p",{className:`text-sm ${B}`,children:"Minimum $10, Maximum $1000"})]}),r.jsx("div",{className:"flex justify-end gap-3 mt-8",children:r.jsxs(W,{onClick:$,size:"lg",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:["Continue",r.jsx($n,{className:"w-4 h-4 ml-2"})]})})]}),s==="recipients"&&r.jsxs(he,{className:`${z} border ${M} p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:r.jsx(Ds,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${V}`,children:"Add Recipients"}),r.jsx("p",{className:B,children:"Who should receive the gift vouchers?"})]})]}),r.jsx("div",{className:"space-y-4 mb-6",children:c.map((F,J)=>r.jsxs("div",{className:`p-4 rounded-lg border ${M} ${e?"bg-[#1e1e1e]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs(De,{variant:"outline",className:"text-xs",children:["Recipient ",J+1]}),c.length>1&&r.jsx("button",{onClick:()=>k(F.id),className:`p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/20 ${B} hover:text-red-600`,children:r.jsx(Is,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Recipient Name"}),r.jsx(de,{placeholder:"John Doe",value:F.name,onChange:ee=>E(F.id,"name",ee.target.value),className:e?"bg-[#161616] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Email Address"}),r.jsx(de,{type:"email",placeholder:"john@example.com",value:F.email,onChange:ee=>E(F.id,"email",ee.target.value),className:e?"bg-[#161616] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]})]},F.id))}),r.jsxs(W,{onClick:A,variant:"outline",className:`w-full mb-6 ${e?"border-[#3a3a3a] hover:bg-[#1e1e1e]":"border-gray-300"}`,children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Another Recipient"]}),r.jsx(Ze,{className:`my-6 ${e?"bg-[#2a2a2a]":"bg-gray-200"}`}),r.jsx("div",{className:`p-4 rounded-lg ${e?"bg-indigo-900/20 border border-indigo-500/30":"bg-indigo-50 border border-indigo-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:B,children:"Total vouchers"}),r.jsxs("p",{className:`text-2xl ${V}`,children:[c.length,"  $",a||o||0]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:B,children:"Total amount"}),r.jsxs("p",{className:"text-3xl text-indigo-600 dark:text-indigo-400",children:["$",O()]})]})]})}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:T,variant:"outline",size:"lg",className:e?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:$,size:"lg",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:["Continue",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]})]}),s==="customize"&&r.jsxs(he,{className:`${z} border ${M} p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center",children:r.jsx(wu,{className:"w-6 h-6 text-pink-600 dark:text-pink-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${V}`,children:"Personalize Your Gift"}),r.jsx("p",{className:B,children:"Add a special touch"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Your Name"}),r.jsx(de,{placeholder:"From: Your Name",value:m,onChange:F=>f(F.target.value),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Gift Theme"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:S.map(F=>r.jsxs("button",{onClick:()=>b(F.id),className:`p-4 rounded-lg border-2 transition-all hover:scale-105 ${g===F.id?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20":e?"border-[#2a2a2a]":"border-gray-200"}`,children:[r.jsx("div",{className:"text-3xl mb-2",children:F.emoji}),r.jsx("div",{className:`text-sm ${V}`,children:F.name})]},F.id))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Personal Message (Optional)"}),r.jsx(Ps,{placeholder:"Add a heartfelt message...",value:u,onChange:F=>h(F.target.value),rows:4,className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"bg-gray-100 border-gray-300 placeholder:text-gray-500"}),r.jsxs("p",{className:`text-sm ${B}`,children:[u.length,"/250 characters"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Delivery Date (Optional)"}),r.jsx(de,{type:"date",value:v,onChange:F=>x(F.target.value),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white":"h-12 bg-gray-100 border-gray-300"}),r.jsx("p",{className:`text-sm ${B}`,children:"Leave blank to send immediately"})]})]}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:T,variant:"outline",size:"lg",className:e?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:$,size:"lg",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:["Continue to Payment",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]})]}),s==="payment"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(he,{className:`${z} border ${M} p-8 shadow-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:r.jsx(rn,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${V}`,children:"Payment Details"}),r.jsx("p",{className:B,children:"Secure checkout"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Card Number"}),r.jsx(de,{placeholder:"1234 5678 9012 3456",value:w.cardNumber,onChange:F=>N({...w,cardNumber:F.target.value}),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Expiry Date"}),r.jsx(de,{placeholder:"MM/YY",value:w.expiryDate,onChange:F=>N({...w,expiryDate:F.target.value}),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"CVV"}),r.jsx(de,{placeholder:"123",value:w.cvv,onChange:F=>N({...w,cvv:F.target.value}),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:e?"text-white":"text-gray-700",children:"Billing Email"}),r.jsx(de,{type:"email",placeholder:"your@email.com",value:w.billingEmail,onChange:F=>N({...w,billingEmail:F.target.value}),className:e?"bg-[#1e1e1e] border-[#3a3a3a] text-white placeholder:text-[#737373]":"h-12 bg-gray-100 border-gray-300 placeholder:text-gray-500"})]})]}),r.jsxs("div",{className:"flex justify-between gap-3 mt-8",children:[r.jsxs(W,{onClick:T,variant:"outline",size:"lg",className:e?"border-[#3a3a3a]":"",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs(W,{onClick:$,size:"lg",className:"bg-green-600 hover:bg-green-700 text-white",children:["Complete Purchase $",O()]})]})]})}),r.jsx("div",{children:r.jsxs(he,{className:`${z} border ${M} p-6 shadow-xl sticky top-4`,children:[r.jsx("h3",{className:`text-xl mb-4 ${V}`,children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:B,children:"Voucher Amount"}),r.jsxs("span",{className:V,children:["$",a||o]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:B,children:"Recipients"}),r.jsx("span",{className:V,children:c.length})]}),r.jsx(Ze,{className:e?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:`${V}`,children:"Subtotal"}),r.jsxs("span",{className:V,children:["$",O()]})]}),r.jsx(Ze,{className:e?"bg-[#2a2a2a]":"bg-gray-200"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:`text-lg ${V}`,children:"Total"}),r.jsxs("span",{className:"text-2xl text-green-600 dark:text-green-400",children:["$",O()]})]})]}),r.jsx("div",{className:`p-3 rounded-lg ${e?"bg-green-900/20":"bg-green-50"}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Sr,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:`text-sm ${e?"text-green-400":"text-green-700"}`,children:"All vouchers are valid for 12 months from purchase date"})]})})]})})]}),s==="success"&&r.jsxs(he,{className:`${z} border ${M} p-12 shadow-xl text-center`,children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"w-20 h-20 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:r.jsx(Sr,{className:"w-10 h-10 text-green-600 dark:text-green-400"})})}),r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[r.jsx(Es,{className:"w-6 h-6 text-yellow-500 animate-pulse"}),r.jsx(Du,{className:"w-6 h-6 text-orange-500 animate-pulse"}),r.jsx(wu,{className:"w-6 h-6 text-pink-500 animate-pulse"})]}),r.jsx("h2",{className:`text-3xl mb-4 ${V}`,children:"Gift Vouchers Sent!"}),r.jsxs("p",{className:`text-lg ${B} mb-8`,children:[c.length," gift ",c.length===1?"voucher has":"vouchers have"," been sent successfully"]}),r.jsx("div",{className:`max-w-md mx-auto p-6 rounded-lg ${e?"bg-[#1e1e1e] border border-[#2a2a2a]":"bg-gray-50 border border-gray-200"} mb-8`,children:r.jsx("div",{className:"space-y-3",children:c.map((F,J)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center flex-shrink-0",children:r.jsx(Sr,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),r.jsxs("div",{className:"text-left flex-1",children:[r.jsx("p",{className:`text-sm ${V}`,children:F.name}),r.jsx("p",{className:`text-xs ${B}`,children:F.email})]})]},F.id))})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(W,{onClick:I,size:"lg",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Send More Vouchers"]}),r.jsx(W,{onClick:()=>window.close(),variant:"outline",size:"lg",className:e?"border-[#3a3a3a]":"",children:"Close Window"})]})]})]})})})},IZe=({selectedAccount:t,onAccountSelect:e,accounts:s,recentAccounts:n})=>{const{theme:a}=Nr(),i=a==="dark",[o,l]=j.useState(!1),[c,d]=j.useState(""),u=j.useRef(null),h=i?"bg-[#161616]":"bg-white",m=i?"hover:bg-[#1a1a1a]":"hover:bg-gray-50",f=i?"text-white":"text-gray-900",v=i?"text-gray-400":"text-gray-600",x=i?"border-[#333]":"border-gray-200",g=i?"bg-[#1a1a1a]":"bg-blue-50";j.useEffect(()=>{const N=C=>{u.current&&!u.current.contains(C.target)&&l(!1)};return o&&document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[o]);const b=s.filter(N=>N.name.toLowerCase().includes(c.toLowerCase())||N.company.toLowerCase().includes(c.toLowerCase())||N.phone.includes(c)),w=N=>{e(N),l(!1),d("")};return r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs("button",{onClick:()=>l(!o),className:`
          flex items-center gap-3 px-4 py-2.5 rounded-lg border ${x}
          ${h} ${f} ${m}
          transition-all duration-200
        `,children:[r.jsx(Na,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsx("span",{className:"text-sm font-medium",children:t?t.name:"All Accounts"}),t&&r.jsx("span",{className:`text-xs ${v}`,children:t.phone})]}),r.jsx(Mc,{className:`w-4 h-4 ml-2 transition-transform ${o?"rotate-180":""}`})]}),o&&r.jsxs("div",{className:`
            absolute top-full left-0 mt-2 w-[1280px] max-h-[520px] overflow-hidden
            ${h} border ${x} rounded-2xl shadow-2xl z-50
          `,children:[r.jsx("div",{className:`p-4 border-b ${x}`,children:r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${v}`}),r.jsx(de,{type:"text",placeholder:"Search accounts...",value:c,onChange:N=>d(N.target.value),className:`
                  pl-10 h-10 ${h} border ${x} 
                  ${f} placeholder:${v}
                `})]})}),r.jsxs("div",{className:"max-h-[480px] overflow-y-auto",children:[r.jsx("div",{className:`p-3 border-b ${x}`,children:r.jsxs("button",{onClick:()=>w(null),className:`
                  w-full flex items-center gap-3 p-3 rounded-lg
                  ${t?"":g}
                  ${m} transition-colors
                `,children:[r.jsx(Na,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),r.jsxs("div",{className:"flex-1 flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:`text-base font-semibold ${f}`,children:"All Accounts"}),r.jsx("div",{className:`text-xs ${v}`,children:"View all platform data"})]}),r.jsx("span",{className:`text-xs font-medium ${v}`,children:"PLATFORM"})]})]})}),n.length>0&&!c&&r.jsxs("div",{className:`p-3 border-b ${x}`,children:[r.jsx("div",{className:`text-xs uppercase tracking-wide mb-2 px-3 ${v}`,children:"Recent"}),r.jsx("div",{className:"space-y-1",children:n.map(N=>r.jsxs("button",{onClick:()=>w(N),className:`
                        w-full flex items-center gap-3 p-3 rounded-lg
                        ${t?.id===N.id?g:""}
                        ${m} transition-colors
                      `,children:[r.jsx(Na,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),r.jsx("div",{className:`
                          w-2 h-2 rounded-full
                          ${N.status==="active"?"bg-green-500":"bg-red-500"}
                        `}),r.jsxs("div",{className:"flex-1 flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:`text-sm font-semibold ${f} truncate max-w-[420px]`,children:N.name}),r.jsx("div",{className:`text-xs ${v}`,children:N.ownerName||N.company})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium",children:[r.jsx("span",{className:`${v}`,children:N.identifier||N.phone}),r.jsx(De,{variant:"outline",className:"text-[10px] px-2 py-0.5 uppercase tracking-wide",children:N.status==="active"?"Active":"Inactive"})]})]})]},N.id))})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("div",{className:`text-xs uppercase tracking-wide mb-2 px-3 ${v}`,children:c?"Search Results":"Accounts"}),b.length>0?r.jsx("div",{className:"space-y-1",children:b.map(N=>r.jsxs("button",{onClick:()=>w(N),className:`
                        w-full flex items-center gap-3 p-3 rounded-lg
                        ${t?.id===N.id?g:""}
                        ${m} transition-colors
                      `,children:[r.jsx(Na,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),r.jsx("div",{className:`
                          w-2 h-2 rounded-full
                          ${N.status==="active"?"bg-green-500":"bg-red-500"}
                        `}),r.jsxs("div",{className:"flex-1 flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:`text-sm font-semibold ${f} truncate max-w-[540px]`,children:N.name}),r.jsx("div",{className:`text-xs ${v}`,children:N.ownerName||N.company})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium",children:[r.jsx("span",{className:`${v}`,children:N.identifier||N.phone}),r.jsx(De,{variant:"outline",className:"text-[10px] px-2 py-0.5 uppercase tracking-wide",children:N.status==="active"?"Active":"Inactive"})]})]})]},N.id))}):r.jsxs("div",{className:`text-center py-8 ${v}`,children:[r.jsx(Na,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No accounts found"})]})]})]})]})]})},$Ze=({selectedAccount:t,onAccountSelect:e,accounts:s,recentAccounts:n})=>{const{theme:a}=Nr(),i=a==="dark",o=i?"bg-[#0a0a0a]":"bg-white",l=i?"border-[#1e1e1e]":"border-gray-200";return r.jsx("header",{className:`${o} border ${l} rounded-xl sticky top-0 z-40`,children:r.jsx("div",{className:"flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4",children:r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(IZe,{selectedAccount:t,onAccountSelect:e,accounts:s,recentAccounts:n})})})})},DZe=({ownerName:t,profileSlug:e,organizationName:s,onViewProfile:n,onProfileSettings:a,onProfileEmbed:i})=>{const{theme:o}=Nr(),l=o==="dark",[c,d]=j.useState(!1),u=j.useRef(null),h=l?"bg-[#161616]":"bg-white",m=l?"hover:bg-[#1a1a1a]":"hover:bg-gray-50",f=l?"text-white":"text-gray-900",v=l?"text-gray-400":"text-gray-600",x=l?"border-[#333]":"border-gray-200";j.useEffect(()=>{const N=C=>{u.current&&!u.current.contains(C.target)&&d(!1)};return c&&document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[c]);const g=()=>{d(!1),n()},b=()=>{d(!1),a()},w=()=>{d(!1),i()};return r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>d(!c),className:`flex items-center gap-1 ${f} ${m}`,children:["Profile",r.jsx(Mc,{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`})]}),c&&r.jsxs("div",{className:`
            absolute right-0 top-full mt-1 w-56 
            ${h} border ${x} rounded-lg shadow-lg z-50
            overflow-hidden
          `,children:[r.jsxs("div",{className:`px-4 py-3 border-b ${x}`,children:[r.jsx("p",{className:`text-sm font-medium ${f}`,children:t}),r.jsx("p",{className:`text-xs ${v}`,children:s})]}),r.jsxs("div",{className:"py-1",children:[r.jsxs("button",{onClick:g,className:`
                w-full flex items-center gap-3 px-4 py-2.5
                ${f} ${m} transition-colors
                text-left
              `,children:[r.jsx(tn,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"View Profile"}),r.jsx("p",{className:`text-xs ${v}`,children:"Public landing page"})]})]}),r.jsxs("button",{onClick:b,className:`
                w-full flex items-center gap-3 px-4 py-2.5
                ${f} ${m} transition-colors
                text-left
              `,children:[r.jsx(ul,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Profile Settings"}),r.jsx("p",{className:`text-xs ${v}`,children:"Customize profile"})]})]}),r.jsxs("button",{onClick:w,className:`
                w-full flex items-center gap-3 px-4 py-2.5
                ${f} ${m} transition-colors
                text-left
              `,children:[r.jsx(ic,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Profile Embed"}),r.jsx("p",{className:`text-xs ${v}`,children:"Get embed code"})]})]})]})]})]})},RZe=({owner:t})=>{const{theme:e}=Nr(),s=e==="dark",n=s?"bg-[#161616]":"bg-white",a=s?"bg-[#1e1e1e]":"bg-gray-50",i=s?"text-white":"text-gray-900",o=s?"text-gray-400":"text-gray-600",l=s?"border-[#333]":"border-gray-200",c=s?"bg-[#0a0a0a]":"bg-gray-900",[d,u]=j.useState({allowedDomains:["*"],requireHttps:!0,primaryColor:"#4f46e5",theme:"auto",borderRadius:"12",showHeader:!0,showFooter:!0,enableBooking:!0,enableGallery:!0,enableReviews:!0,enableSocial:!0,responsiveMode:"auto",minHeight:"600",maxWidth:"1200",customCSS:"",analyticsEnabled:!0,locale:"en"}),[h,m]=j.useState(""),[f,v]=j.useState(!1),[x,g]=j.useState("desktop"),b=`${window.location.origin}/v/${t.profileSlug}`,w=()=>{const T=new URLSearchParams({embed:"true",theme:d.theme,color:d.primaryColor.replace("#",""),showHeader:d.showHeader.toString(),showFooter:d.showFooter.toString(),mode:d.responsiveMode});return`${b}?${T.toString()}`},N=()=>`<!-- BookingTMS Embed SDK -->
<div id="bookingtms-profile"></div>
<script src="${window.location.origin}/embed-sdk.js"><\/script>
<script>
  BookingTMS.init({
    containerId: 'bookingtms-profile',
    profileSlug: '${t.profileSlug}',
    config: {
      theme: '${d.theme}',
      primaryColor: '${d.primaryColor}',
      borderRadius: '${d.borderRadius}px',
      showHeader: ${d.showHeader},
      showFooter: ${d.showFooter},
      enableBooking: ${d.enableBooking},
      enableGallery: ${d.enableGallery},
      enableReviews: ${d.enableReviews},
      responsiveMode: '${d.responsiveMode}',
      minHeight: '${d.minHeight}px',
    },
    onLoad: function() {
      console.log('BookingTMS profile loaded');
    },
    onBooking: function(data) {
      console.log('Booking initiated:', data);
    }
  });
<\/script>`,C=()=>`<!-- BookingTMS Profile Embed -->
<iframe 
  src="${w()}"
  width="100%"
  height="${d.minHeight}"
  frameborder="0"
  allow="payment; camera; geolocation"
  allowfullscreen
  style="border: none; border-radius: ${d.borderRadius}px; min-height: ${d.minHeight}px; max-width: ${d.maxWidth}px;"
  title="${t.organizationName} Profile"
  loading="lazy"
></iframe>`,S=()=>`import React, { useEffect, useRef } from 'react';

export function VenueProfile() {
  const containerRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (typeof window !== 'undefined' && window.BookingTMS) {
      window.BookingTMS.init({
        containerId: containerRef.current?.id || 'bookingtms-profile',
        profileSlug: '${t.profileSlug}',
        config: {
          theme: '${d.theme}',
          primaryColor: '${d.primaryColor}',
          showHeader: ${d.showHeader},
          showFooter: ${d.showFooter},
          enableBooking: ${d.enableBooking},
          responsiveMode: '${d.responsiveMode}',
        },
        onLoad: () => console.log('Profile loaded'),
        onBooking: (data) => console.log('Booking:', data),
      });
    }
  }, []);

  return (
    <div>
      <div id="bookingtms-profile" ref={containerRef} />
      <script src="${window.location.origin}/embed-sdk.js" />
    </div>
  );
}`,A=()=>`/**
 * Add to functions.php
 */
function bookingtms_profile_shortcode($atts) {
    $atts = shortcode_atts(array(
        'slug' => '${t.profileSlug}',
        'theme' => '${d.theme}',
        'color' => '${d.primaryColor.replace("#","")}',
        'height' => '${d.minHeight}',
    ), $atts);
    
    $embed_url = add_query_arg(array(
        'embed' => 'true',
        'theme' => $atts['theme'],
        'color' => $atts['color'],
    ), home_url('/v/' . $atts['slug']));
    
    return '<iframe src="' . esc_url($embed_url) . '" 
            width="100%" 
            height="' . esc_attr($atts['height']) . '" 
            frameborder="0" 
            allow="payment; camera; geolocation" 
            allowfullscreen 
            style="border: none; border-radius: 12px;" 
            title="Venue Profile"></iframe>';
}
add_shortcode('bookingtms_profile', 'bookingtms_profile_shortcode');

/**
 * Usage: [bookingtms_profile slug="${t.profileSlug}"]
 */`,k=T=>{navigator.clipboard.writeText(T),v(!0),re.success("Code copied to clipboard!"),setTimeout(()=>v(!1),2e3)},E=()=>{h&&!d.allowedDomains.includes(h)&&(u({...d,allowedDomains:[...d.allowedDomains,h]}),m(""),re.success("Domain added"))},O=T=>{u({...d,allowedDomains:d.allowedDomains.filter(I=>I!==T)}),re.success("Domain removed")},$=()=>{switch(x){case"mobile":return"375px";case"tablet":return"768px";default:return"100%"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl ${i} mb-2`,children:"Profile Embedding"}),r.jsx("p",{className:o,children:"Embed your venue profile on any website with our powerful embedding system"})]}),r.jsxs(wn,{defaultValue:"config",className:"w-full",children:[r.jsxs(kn,{className:"grid grid-cols-4 w-full",children:[r.jsxs(Tt,{value:"config",className:"flex items-center gap-2",children:[r.jsx(nv,{className:"w-4 h-4"}),"Configure"]}),r.jsxs(Tt,{value:"code",className:"flex items-center gap-2",children:[r.jsx(ic,{className:"w-4 h-4"}),"Embed Code"]}),r.jsxs(Tt,{value:"security",className:"flex items-center gap-2",children:[r.jsx(zs,{className:"w-4 h-4"}),"Security"]}),r.jsxs(Tt,{value:"preview",className:"flex items-center gap-2",children:[r.jsx(ys,{className:"w-4 h-4"}),"Preview"]})]}),r.jsxs(Bt,{value:"config",className:"space-y-6 mt-6",children:[r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b",style:{borderColor:s?"#333":"#e5e7eb"},children:[r.jsx(Vf,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:`text-lg ${i}`,children:"Appearance"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Primary Color"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"color",value:d.primaryColor,onChange:T=>u({...d,primaryColor:T.target.value}),className:"w-20 h-12 cursor-pointer"}),r.jsx(de,{type:"text",value:d.primaryColor,onChange:T=>u({...d,primaryColor:T.target.value}),className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333]",placeholder:"#4f46e5"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Theme Mode"}),r.jsxs("select",{value:d.theme,onChange:T=>u({...d,theme:T.target.value}),className:`w-full h-12 px-3 rounded-lg ${s?"bg-[#1e1e1e] border-[#333] text-white":"bg-gray-100 border-gray-300 text-gray-900"} border`,children:[r.jsx("option",{value:"auto",children:"Auto (System Preference)"}),r.jsx("option",{value:"light",children:"Light Mode"}),r.jsx("option",{value:"dark",children:"Dark Mode"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Border Radius (px)"}),r.jsx(de,{type:"number",value:d.borderRadius,onChange:T=>u({...d,borderRadius:T.target.value}),className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333]"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Minimum Height (px)"}),r.jsx(de,{type:"number",value:d.minHeight,onChange:T=>u({...d,minHeight:T.target.value}),className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333]"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",style:{borderColor:s?"#333":"#e5e7eb"},children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Show Header"}),r.jsx(Rt,{checked:d.showHeader,onCheckedChange:T=>u({...d,showHeader:T})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Show Footer"}),r.jsx(Rt,{checked:d.showFooter,onCheckedChange:T=>u({...d,showFooter:T})})]})]})]})}),r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b",style:{borderColor:s?"#333":"#e5e7eb"},children:[r.jsx(ml,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:`text-lg ${i}`,children:"Features"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Enable Booking"}),r.jsx("p",{className:`text-xs ${o} mt-1`,children:"Allow users to book directly"})]}),r.jsx(Rt,{checked:d.enableBooking,onCheckedChange:T=>u({...d,enableBooking:T})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Show Gallery"}),r.jsx("p",{className:`text-xs ${o} mt-1`,children:"Display photo gallery"})]}),r.jsx(Rt,{checked:d.enableGallery,onCheckedChange:T=>u({...d,enableGallery:T})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Show Reviews"}),r.jsx("p",{className:`text-xs ${o} mt-1`,children:"Display customer reviews"})]}),r.jsx(Rt,{checked:d.enableReviews,onCheckedChange:T=>u({...d,enableReviews:T})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Social Media"}),r.jsx("p",{className:`text-xs ${o} mt-1`,children:"Show social links"})]}),r.jsx(Rt,{checked:d.enableSocial,onCheckedChange:T=>u({...d,enableSocial:T})})]})]})]})}),r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b",style:{borderColor:s?"#333":"#e5e7eb"},children:[r.jsx(Xf,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:`text-lg ${i}`,children:"Responsive Settings"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Responsive Mode"}),r.jsxs("select",{value:d.responsiveMode,onChange:T=>u({...d,responsiveMode:T.target.value}),className:`w-full h-12 px-3 rounded-lg ${s?"bg-[#1e1e1e] border-[#333] text-white":"bg-gray-100 border-gray-300 text-gray-900"} border`,children:[r.jsx("option",{value:"auto",children:"Auto (Responsive to container)"}),r.jsx("option",{value:"desktop",children:"Desktop Only"}),r.jsx("option",{value:"mobile",children:"Mobile Only"})]}),r.jsx("p",{className:`text-xs ${o}`,children:"Auto mode automatically adapts to the container width"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Maximum Width (px)"}),r.jsx(de,{type:"number",value:d.maxWidth,onChange:T=>u({...d,maxWidth:T.target.value}),className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333]",placeholder:"1200"})]})]})]})})]}),r.jsxs(Bt,{value:"code",className:"space-y-6 mt-6",children:[r.jsx("div",{className:`${s?"bg-blue-950/30 border-blue-800":"bg-blue-50 border-blue-200"} border rounded-lg p-4`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(hs,{className:`w-5 h-5 ${s?"text-blue-400":"text-blue-600"} flex-shrink-0 mt-0.5`}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${s?"text-blue-300":"text-blue-900"} mb-2`,children:"Choose your integration method below. We recommend the JavaScript SDK for the best experience."}),r.jsxs("ul",{className:`text-xs ${s?"text-blue-300":"text-blue-800"} space-y-1`,children:[r.jsx("li",{children:" SDK: Best performance, automatic updates, event handling"}),r.jsx("li",{children:" iFrame: Simple, works everywhere, no dependencies"}),r.jsx("li",{children:" React: Type-safe, component-based integration"})]})]})]})}),r.jsxs(wn,{defaultValue:"sdk",className:"w-full",children:[r.jsxs(kn,{className:"grid grid-cols-4 w-full",children:[r.jsx(Tt,{value:"sdk",children:"JavaScript SDK"}),r.jsx(Tt,{value:"iframe",children:"iFrame"}),r.jsx(Tt,{value:"react",children:"React"}),r.jsx(Tt,{value:"wordpress",children:"WordPress"})]}),r.jsx(Bt,{value:"sdk",className:"mt-4",children:r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`${i} font-medium`,children:"JavaScript SDK (Recommended)"}),r.jsxs(W,{size:"sm",onClick:()=>k(N()),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[f?r.jsx(Sr,{className:"w-4 h-4 mr-2"}):r.jsx(on,{className:"w-4 h-4 mr-2"}),f?"Copied!":"Copy Code"]})]}),r.jsx("div",{className:`${c} rounded-lg p-4 overflow-x-auto`,children:r.jsx("pre",{className:"text-xs text-green-400",children:r.jsx("code",{children:N()})})})]})})}),r.jsx(Bt,{value:"iframe",className:"mt-4",children:r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`${i} font-medium`,children:"Basic iFrame Embed"}),r.jsxs(W,{size:"sm",onClick:()=>k(C()),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[f?r.jsx(Sr,{className:"w-4 h-4 mr-2"}):r.jsx(on,{className:"w-4 h-4 mr-2"}),f?"Copied!":"Copy Code"]})]}),r.jsx("div",{className:`${c} rounded-lg p-4 overflow-x-auto`,children:r.jsx("pre",{className:"text-xs text-green-400",children:r.jsx("code",{children:C()})})})]})})}),r.jsx(Bt,{value:"react",className:"mt-4",children:r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`${i} font-medium`,children:"React Component"}),r.jsxs(W,{size:"sm",onClick:()=>k(S()),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[f?r.jsx(Sr,{className:"w-4 h-4 mr-2"}):r.jsx(on,{className:"w-4 h-4 mr-2"}),f?"Copied!":"Copy Code"]})]}),r.jsx("div",{className:`${c} rounded-lg p-4 overflow-x-auto`,children:r.jsx("pre",{className:"text-xs text-green-400",children:r.jsx("code",{children:S()})})})]})})}),r.jsx(Bt,{value:"wordpress",className:"mt-4",children:r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`${i} font-medium`,children:"WordPress Shortcode"}),r.jsxs(W,{size:"sm",onClick:()=>k(A()),className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[f?r.jsx(Sr,{className:"w-4 h-4 mr-2"}):r.jsx(on,{className:"w-4 h-4 mr-2"}),f?"Copied!":"Copy Code"]})]}),r.jsx("div",{className:`${c} rounded-lg p-4 overflow-x-auto`,children:r.jsx("pre",{className:"text-xs text-green-400",children:r.jsx("code",{children:A()})})})]})})})]}),r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:`${i} font-medium mb-4`,children:"Direct Embed URL"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{value:w(),readOnly:!0,className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333] font-mono text-xs"}),r.jsx(W,{size:"sm",onClick:()=>{navigator.clipboard.writeText(w()),re.success("URL copied!")},className:"bg-gray-600 hover:bg-gray-700 text-white",children:r.jsx(on,{className:"w-4 h-4"})}),r.jsx(W,{size:"sm",onClick:()=>window.open(w(),"_blank"),className:"bg-gray-600 hover:bg-gray-700 text-white",children:r.jsx(tn,{className:"w-4 h-4"})})]})]})})]}),r.jsx(Bt,{value:"security",className:"space-y-6 mt-6",children:r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-4 border-b",style:{borderColor:s?"#333":"#e5e7eb"},children:[r.jsx(zs,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:`text-lg ${i}`,children:"Domain Whitelist"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:`text-sm ${o}`,children:"Restrict where your profile can be embedded. Use * to allow all domains (not recommended for production)."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{value:h,onChange:T=>m(T.target.value),placeholder:"example.com",className:"h-12 bg-gray-100 dark:bg-[#1e1e1e] border-gray-300 dark:border-[#333]",onKeyPress:T=>T.key==="Enter"&&E()}),r.jsxs(W,{onClick:E,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Domain"]})]}),r.jsx("div",{className:"space-y-2",children:d.allowedDomains.map(T=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${a} border ${l}`,children:[r.jsx("span",{className:`text-sm ${i} font-mono`,children:T}),T!=="*"&&r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>O(T),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/20",children:r.jsx(Is,{className:"w-4 h-4"})})]},T))})]}),r.jsx("div",{className:"pt-4 border-t",style:{borderColor:s?"#333":"#e5e7eb"},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Require HTTPS"}),r.jsx("p",{className:`text-xs ${o} mt-1`,children:"Only allow embedding on secure (HTTPS) websites"})]}),r.jsx(Rt,{checked:d.requireHttps,onCheckedChange:T=>u({...d,requireHttps:T})})]})})]})})}),r.jsxs(Bt,{value:"preview",className:"space-y-6 mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(W,{size:"sm",variant:x==="desktop"?"default":"outline",onClick:()=>g("desktop"),className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-4 h-4"}),"Desktop"]}),r.jsxs(W,{size:"sm",variant:x==="tablet"?"default":"outline",onClick:()=>g("tablet"),className:"flex items-center gap-2",children:[r.jsx(sI,{className:"w-4 h-4"}),"Tablet"]}),r.jsxs(W,{size:"sm",variant:x==="mobile"?"default":"outline",onClick:()=>g("mobile"),className:"flex items-center gap-2",children:[r.jsx(Xf,{className:"w-4 h-4"}),"Mobile"]})]}),r.jsx(he,{className:`${n} border ${l}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`${i} font-medium`,children:"Live Preview"}),r.jsxs("span",{className:`text-xs ${o}`,children:[x==="desktop"&&"Desktop View",x==="tablet"&&"Tablet View (768px)",x==="mobile"&&"Mobile View (375px)"]})]}),r.jsx("div",{className:"flex justify-center bg-gray-100 dark:bg-[#0a0a0a] rounded-lg p-8 min-h-[600px]",children:r.jsx("div",{style:{width:$(),maxWidth:"100%"},children:r.jsx("iframe",{src:w(),className:"w-full rounded-lg border border-gray-300 dark:border-[#333]",style:{height:`${d.minHeight}px`,borderRadius:`${d.borderRadius}px`},title:"Preview"})})})]})})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx(W,{variant:"outline",className:`${s?"border-[#333] hover:bg-[#1e1e1e]":"border-gray-300 hover:bg-gray-50"}`,children:"Reset to Defaults"}),r.jsx(W,{className:"bg-indigo-600 hover:bg-indigo-700 text-white",onClick:()=>{localStorage.setItem(`embed-config-${t.profileSlug}`,JSON.stringify(d)),re.success("Embed settings saved successfully!")},children:"Save Settings"})]})]})},MZe=({formData:t,setFormData:e})=>{const{theme:s}=Nr(),n=s==="dark",[a,i]=j.useState(t.games||[]),o=n?"text-white":"text-gray-900",l=n?"text-gray-400":"text-gray-600",c=n?"text-gray-300":"text-gray-700",d=`h-12 ${n?"bg-[#1a1a1a] border-[#333] text-white":"bg-gray-100 border-gray-300 text-gray-900"} placeholder:text-gray-500`,u=`${n?"bg-[#1a1a1a] border-[#333] text-white":"bg-gray-100 border-gray-300 text-gray-900"} placeholder:text-gray-500`,h=n?"bg-[#1a1a1a]":"bg-gray-50",m=n?"border-[#333]":"border-gray-200",f=()=>{const g={id:Date.now(),name:"New Game",description:"Enter game description here...",coverImage:"https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=800&h=600&fit=crop",difficulty:"Medium",duration:60,minPlayers:2,maxPlayers:8,price:30},b=[...a,g];i(b),e({...t,games:b}),re.success("Game added")},v=g=>{const b=a.filter(w=>w.id!==g);i(b),e({...t,games:b}),re.success("Game removed")},x=(g,b,w)=>{const N=a.map(C=>C.id===g?{...C,[b]:w}:C);i(N),e({...t,games:N})};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`text-lg font-semibold ${o} mb-4`,children:"Basic Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Organization Name *"}),r.jsx(de,{value:t.organizationName,onChange:g=>e({...t,organizationName:g.target.value}),placeholder:"e.g., Riddle Me This Escape Rooms",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Tagline"}),r.jsx(de,{value:t.tagline,onChange:g=>e({...t,tagline:g.target.value}),placeholder:"e.g., Mind-Bending Puzzles & Thrilling Adventures",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Description"}),r.jsx(Ps,{value:t.description,onChange:g=>e({...t,description:g.target.value}),placeholder:"Tell visitors about your escape room venue...",rows:4,className:u})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-lg font-semibold ${o} mb-4 flex items-center gap-2`,children:[r.jsx(Bc,{className:"w-5 h-5"}),"Media"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Cover Image URL"}),r.jsx(de,{value:t.coverImage||"",onChange:g=>e({...t,coverImage:g.target.value}),placeholder:"https://example.com/cover.jpg",className:d}),t.coverImage&&r.jsx("div",{className:"mt-2 rounded-lg overflow-hidden",children:r.jsx("img",{src:t.coverImage,alt:"Cover preview",className:"w-full h-48 object-cover",onError:g=>{g.currentTarget.src="https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=1200&h=600&fit=crop"}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Logo Image URL"}),r.jsx(de,{value:t.logoImage||"",onChange:g=>e({...t,logoImage:g.target.value}),placeholder:"https://example.com/logo.jpg",className:d}),t.logoImage&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:t.logoImage,alt:"Logo preview",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-[#333]",onError:g=>{g.currentTarget.src="https://images.unsplash.com/photo-1472289065668-ce650ac443d2?w=400&h=400&fit=crop"}})})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-lg font-semibold ${o} mb-4 flex items-center gap-2`,children:[r.jsx(la,{className:"w-5 h-5"}),"Contact Information"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Phone"}),r.jsx(de,{type:"tel",value:t.phone,onChange:g=>e({...t,phone:g.target.value}),placeholder:"+1 (555) 123-4567",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Email"}),r.jsx(de,{type:"email",value:t.email,onChange:g=>e({...t,email:g.target.value}),placeholder:"info@example.com",className:d})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Address"}),r.jsx(de,{value:t.address,onChange:g=>e({...t,address:g.target.value}),placeholder:"123 Mystery Lane, New York, NY 10001",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Website"}),r.jsx(de,{type:"url",value:t.website,onChange:g=>e({...t,website:g.target.value}),placeholder:"https://example.com",className:d})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:`text-lg font-semibold ${o} mb-4`,children:"Social Media"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:c,children:[r.jsx(ib,{className:"w-4 h-4 inline mr-2"}),"Facebook"]}),r.jsx(de,{value:t.facebook||"",onChange:g=>e({...t,facebook:g.target.value}),placeholder:"https://facebook.com/yourpage",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:c,children:[r.jsx(ife,{className:"w-4 h-4 inline mr-2"}),"Twitter"]}),r.jsx(de,{value:t.twitter||"",onChange:g=>e({...t,twitter:g.target.value}),placeholder:"https://twitter.com/yourpage",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:c,children:[r.jsx(Lhe,{className:"w-4 h-4 inline mr-2"}),"Instagram"]}),r.jsx(de,{value:t.instagram||"",onChange:g=>e({...t,instagram:g.target.value}),placeholder:"https://instagram.com/yourpage",className:d})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:`text-lg font-semibold ${o} mb-4 flex items-center gap-2`,children:[r.jsx(jr,{className:"w-5 h-5"}),"Opening Hours"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Weekday Hours"}),r.jsx(de,{value:t.weekdayHours||"10:00 AM - 10:00 PM",onChange:g=>e({...t,weekdayHours:g.target.value}),placeholder:"10:00 AM - 10:00 PM",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Weekend Hours"}),r.jsx(de,{value:t.weekendHours||"9:00 AM - 11:00 PM",onChange:g=>e({...t,weekendHours:g.target.value}),placeholder:"9:00 AM - 11:00 PM",className:d})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:`text-lg font-semibold ${o}`,children:"Escape Rooms / Games"}),r.jsxs(W,{onClick:f,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add Game"]})]}),r.jsx("div",{className:"space-y-4",children:a.length===0?r.jsx("div",{className:`p-8 rounded-lg ${h} border ${m} text-center`,children:r.jsx("p",{className:l,children:'No games added yet. Click "Add Game" to create your first escape room.'})}):a.map((g,b)=>r.jsxs("div",{className:`p-6 rounded-lg ${h} border ${m} space-y-4`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:`font-semibold ${o}`,children:["Game ",b+1]}),r.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>v(g.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Game Name *"}),r.jsx(de,{value:g.name,onChange:w=>x(g.id,"name",w.target.value),placeholder:"e.g., The Haunted Mansion",className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Difficulty"}),r.jsxs("select",{value:g.difficulty,onChange:w=>x(g.id,"difficulty",w.target.value),className:`w-full ${d}`,children:[r.jsx("option",{value:"Easy",children:"Easy"}),r.jsx("option",{value:"Medium",children:"Medium"}),r.jsx("option",{value:"Hard",children:"Hard"}),r.jsx("option",{value:"Expert",children:"Expert"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Duration (minutes)"}),r.jsx(de,{type:"number",value:g.duration,onChange:w=>x(g.id,"duration",parseInt(w.target.value)),className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Price ($)"}),r.jsx(de,{type:"number",value:g.price,onChange:w=>x(g.id,"price",parseInt(w.target.value)),className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Min Players"}),r.jsx(de,{type:"number",value:g.minPlayers,onChange:w=>x(g.id,"minPlayers",parseInt(w.target.value)),className:d})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Max Players"}),r.jsx(de,{type:"number",value:g.maxPlayers,onChange:w=>x(g.id,"maxPlayers",parseInt(w.target.value)),className:d})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Description"}),r.jsx(Ps,{value:g.description,onChange:w=>x(g.id,"description",w.target.value),rows:3,placeholder:"Describe the game experience...",className:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:c,children:"Cover Image URL"}),r.jsx(de,{value:g.coverImage,onChange:w=>x(g.id,"coverImage",w.target.value),placeholder:"https://example.com/game-cover.jpg",className:d}),g.coverImage&&r.jsx("div",{className:"mt-2 rounded-lg overflow-hidden",children:r.jsx("img",{src:g.coverImage,alt:g.name,className:"w-full h-40 object-cover",onError:w=>{w.currentTarget.src="https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=800&h=600&fit=crop"}})})]})]},g.id))})]}),r.jsx("div",{className:`p-4 rounded-lg ${n?"bg-[#1a1a1a] border border-[#333]":"bg-blue-50 border border-blue-200"}`,children:r.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-blue-900"}`,children:[" ",r.jsx("strong",{children:"Tip:"})," All changes are saved automatically. Use the Preview tab to see how your landing page looks."]})})]})},LZe=({venueSlug:t,formData:e})=>{const{theme:s}=Nr(),n=s==="dark",a=j.useRef(null),[i,o]=j.useState("desktop"),[l,c]=j.useState(!0),d=`${window.location.origin}/v/${t}`,u=n?"bg-[#1a1a1a]":"bg-gray-100",h=n?"bg-[#161616]":"bg-white",m=n?"text-white":"text-gray-900",f=n?"text-gray-400":"text-gray-600",v=n?"border-[#333]":"border-gray-200",x={desktop:{width:"100%",height:"600px"},tablet:{width:"768px",height:"600px"},mobile:{width:"375px",height:"600px"}},g=()=>{c(!0),a.current&&(a.current.src=a.current.src)},b=()=>{window.open(d,"_blank")},w=()=>{navigator.clipboard.writeText(d),re.success("URL copied to clipboard")};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[r.jsxs("div",{className:`flex items-center gap-2 p-1 rounded-lg ${n?"bg-[#1a1a1a]":"bg-gray-100"}`,children:[r.jsxs("button",{onClick:()=>o("desktop"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${i==="desktop"?"bg-indigo-600 text-white":n?"text-gray-400 hover:bg-[#222]":"text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(Yx,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Desktop"})]}),r.jsxs("button",{onClick:()=>o("tablet"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${i==="tablet"?"bg-indigo-600 text-white":n?"text-gray-400 hover:bg-[#222]":"text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(sI,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Tablet"})]}),r.jsxs("button",{onClick:()=>o("mobile"),className:`flex items-center gap-2 px-3 py-2 rounded transition-colors ${i==="mobile"?"bg-indigo-600 text-white":n?"text-gray-400 hover:bg-[#222]":"text-gray-600 hover:bg-gray-200"}`,children:[r.jsx(Xf,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Mobile"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:g,className:`${n?"border-[#333] text-white hover:bg-[#1a1a1a]":"border-gray-300"}`,children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Refresh"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:b,className:`${n?"border-[#333] text-white hover:bg-[#1a1a1a]":"border-gray-300"}`,children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Open"]})]})]}),r.jsxs("div",{onClick:w,className:`flex items-center gap-3 p-3 rounded-lg ${n?"bg-[#1a1a1a] border border-[#333]":"bg-gray-100 border border-gray-300"} cursor-pointer hover:opacity-80 transition-opacity`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${f}`,children:"Preview URL"}),r.jsx("p",{className:`${m} break-all`,children:d})]}),r.jsx(W,{variant:"ghost",size:"sm",className:`${n?"text-gray-400 hover:bg-[#222]":"text-gray-600 hover:bg-gray-200"}`,children:"Copy"})]}),r.jsx("div",{className:`${u} rounded-lg p-4 border ${v}`,children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsxs("div",{className:"transition-all duration-300 ease-in-out mx-auto",style:{width:x[i].width,maxWidth:"100%"},children:[r.jsxs("div",{className:`${h} rounded-lg border ${v} shadow-lg overflow-hidden relative`,style:{height:x[i].height},children:[l&&r.jsx("div",{className:"absolute inset-0 bg-gray-900/50 flex items-center justify-center z-10",children:r.jsxs("div",{className:"text-white text-center",children:[r.jsx(Ln,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),r.jsx("p",{children:"Loading preview..."})]})}),r.jsx("iframe",{ref:a,src:d,className:"w-full h-full",title:"Landing Page Preview",onLoad:()=>c(!1),style:{border:"none",background:n?"#0a0a0a":"#ffffff"}})]}),r.jsxs("p",{className:`text-center mt-2 text-sm ${f}`,children:[i==="desktop"&&"Desktop View (1920px+)",i==="tablet"&&"Tablet View (768px)",i==="mobile"&&"Mobile View (375px)"]})]})})}),r.jsx("div",{className:`p-4 rounded-lg ${n?"bg-[#1a1a1a] border border-[#333]":"bg-blue-50 border border-blue-200"}`,children:r.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-blue-900"}`,children:[" ",r.jsx("strong",{children:"Preview Mode:"})," This shows your live landing page. Changes made in the editor will be reflected after saving."]})})]})},FZe=({isOpen:t,onClose:e,owner:s})=>{const{theme:n}=Nr(),a=n==="dark",[i,o]=j.useState({organizationName:s.organizationName,tagline:"Mind-Bending Puzzles & Thrilling Adventures",description:"Experience the ultimate escape room challenge with our award-winning games.",website:s.website,phone:"+1 (555) 123-4567",email:s.email,address:"123 Mystery Lane, New York, NY 10001",coverImage:"https://images.unsplash.com/photo-1511988617509-a57c8a288659?w=1200&h=600&fit=crop",logoImage:"https://images.unsplash.com/photo-1472289065668-ce650ac443d2?w=400&h=400&fit=crop",facebook:"",twitter:"",instagram:"",weekdayHours:"10:00 AM - 10:00 PM",weekendHours:"9:00 AM - 11:00 PM",games:[]});j.useEffect(()=>{const m=localStorage.getItem(`landingPage_${s.profileSlug}`);if(m)try{const f=JSON.parse(m);o({...i,...f})}catch(f){console.error("Error loading saved landing page data:",f)}},[s.profileSlug]);const l=a?"bg-[#161616]":"bg-white",c=a?"text-white":"text-gray-900",d=a?"text-gray-400":"text-gray-600",u=a?"border-[#333]":"border-gray-200",h=()=>{localStorage.setItem(`landingPage_${s.profileSlug}`,JSON.stringify(i)),re.success("Profile settings saved successfully"),e()};return t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:`${l} rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[r.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${u}`,children:[r.jsxs("div",{children:[r.jsx("h2",{className:`text-2xl font-bold ${c}`,children:"Profile Settings"}),r.jsxs("p",{className:`text-sm ${d} mt-1`,children:[s.ownerName,"  ",s.organizationId]})]}),r.jsx("button",{onClick:e,className:`p-2 rounded-lg ${a?"hover:bg-[#1a1a1a]":"hover:bg-gray-100"} transition-colors`,children:r.jsx(Is,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6",children:r.jsxs(wn,{defaultValue:"profile",className:"w-full",children:[r.jsxs(kn,{className:"grid grid-cols-4 w-full mb-6",children:[r.jsx(Tt,{value:"profile",children:"Profile"}),r.jsx(Tt,{value:"landing",children:"Landing Page"}),r.jsx(Tt,{value:"preview",children:"Preview"}),r.jsx(Tt,{value:"embed",children:"Embed"})]}),r.jsxs(Bt,{value:"profile",className:"space-y-6 mt-0",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Organization Name *"}),r.jsx(de,{value:i.organizationName,onChange:m=>o({...i,organizationName:m.target.value}),className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Tagline"}),r.jsx(de,{value:i.tagline,onChange:m=>o({...i,tagline:m.target.value}),placeholder:"e.g., Mind-Bending Puzzles & Thrilling Adventures",className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Description"}),r.jsx(Ps,{value:i.description,onChange:m=>o({...i,description:m.target.value}),rows:4,className:`${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Website"}),r.jsx(de,{type:"url",value:i.website,onChange:m=>o({...i,website:m.target.value}),placeholder:"https://example.com",className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Phone"}),r.jsx(de,{type:"tel",value:i.phone,onChange:m=>o({...i,phone:m.target.value}),className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Email"}),r.jsx(de,{type:"email",value:i.email,onChange:m=>o({...i,email:m.target.value}),className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Address"}),r.jsx(de,{value:i.address,onChange:m=>o({...i,address:m.target.value}),className:`h-12 ${a?"bg-[#1a1a1a] border-[#333]":"bg-gray-100 border-gray-300"} ${a?"text-white":"text-gray-900"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:`${a?"text-gray-300":"text-gray-700"}`,children:"Profile URL"}),r.jsx("div",{className:`flex items-center gap-2 p-3 rounded-lg ${a?"bg-[#1a1a1a] border border-[#333]":"bg-gray-100 border border-gray-300"}`,children:r.jsxs("span",{className:d,children:[window.location.origin,"/v/",s.profileSlug]})})]})]}),r.jsx(Bt,{value:"landing",className:"mt-0",children:r.jsx(MZe,{formData:i,setFormData:o})}),r.jsx(Bt,{value:"preview",className:"mt-0",children:r.jsx(LZe,{venueSlug:s.profileSlug,formData:i})}),r.jsx(Bt,{value:"embed",className:"mt-0",children:r.jsx(RZe,{owner:s})})]})}),r.jsxs("div",{className:`flex items-center justify-end gap-3 p-6 border-t ${u}`,children:[r.jsx(W,{variant:"outline",onClick:e,className:`${a?"border-[#333] text-white hover:bg-[#1a1a1a]":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:"Cancel"}),r.jsxs(W,{onClick:h,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}):null},BZe=({isOpen:t,onClose:e,owner:s})=>{const{theme:n}=Nr(),a=n==="dark",[i,o]=j.useState(!1),l=a?"bg-[#161616]":"bg-white",c=a?"text-white":"text-gray-900",d=a?"text-gray-400":"text-gray-600",u=a?"border-[#333]":"border-gray-200",h=a?"bg-[#0a0a0a]":"bg-gray-100",m=`${window.location.origin}/v/${s.profileSlug}`,f=`<!-- BookingTMS Profile Widget -->
<iframe 
  src="${m}"
  width="100%"
  height="800"
  frameborder="0"
  style="border: none; border-radius: 12px;"
  title="${s.organizationName}"
></iframe>`,v=()=>{navigator.clipboard.writeText(f),o(!0),re.success("Embed code copied to clipboard"),setTimeout(()=>o(!1),2e3)};return t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:`${l} rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto`,children:[r.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${u}`,children:[r.jsxs("div",{children:[r.jsxs("h2",{className:`text-2xl font-bold ${c} flex items-center gap-2`,children:[r.jsx(ic,{className:"w-6 h-6"}),"Profile Embed Code"]}),r.jsxs("p",{className:`text-sm ${d} mt-1`,children:[s.ownerName,"  ",s.organizationName]})]}),r.jsx("button",{onClick:e,className:`p-2 rounded-lg ${a?"hover:bg-[#1a1a1a]":"hover:bg-gray-100"} transition-colors`,children:r.jsx(Is,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-indigo-950/50 border border-indigo-900":"bg-indigo-50 border border-indigo-200"}`,children:[r.jsx("h3",{className:`text-sm font-semibold ${a?"text-indigo-300":"text-indigo-900"} mb-2`,children:"How to use this code"}),r.jsxs("ul",{className:`text-sm ${a?"text-indigo-200":"text-indigo-800"} space-y-1`,children:[r.jsx("li",{children:" Copy the embed code below"}),r.jsx("li",{children:" Paste it into your website's HTML"}),r.jsx("li",{children:" The profile will appear as an embedded widget"}),r.jsx("li",{children:" Customize width and height as needed"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:`text-sm font-medium ${c}`,children:"Profile URL"}),r.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${h} border ${u}`,children:[r.jsx("code",{className:`flex-1 text-sm ${d} font-mono`,children:m}),r.jsx(W,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(m),re.success("URL copied to clipboard")},className:`${a?"hover:bg-[#1a1a1a]":"hover:bg-gray-200"}`,children:r.jsx(on,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:`text-sm font-medium ${c}`,children:"Embed Code"}),r.jsxs("div",{className:`relative rounded-lg ${h} border ${u} overflow-hidden`,children:[r.jsx("pre",{className:"p-4 overflow-x-auto",children:r.jsx("code",{className:`text-sm ${d} font-mono`,children:f})}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx(W,{size:"sm",onClick:v,className:`${i?"bg-green-600 hover:bg-green-700":"bg-indigo-600 hover:bg-indigo-700"} text-white`,children:i?r.jsxs(r.Fragment,{children:[r.jsx(Sr,{className:"w-4 h-4 mr-1"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(on,{className:"w-4 h-4 mr-1"}),"Copy Code"]})})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:`text-sm font-medium ${c}`,children:"Preview"}),r.jsx("div",{className:`aspect-video rounded-lg border ${u} overflow-hidden`,children:r.jsx("iframe",{src:m,className:"w-full h-full",title:`${s.organizationName} Preview`})})]}),r.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-[#1a1a1a] border border-[#333]":"bg-gray-50 border border-gray-200"}`,children:[r.jsx("h3",{className:`text-sm font-semibold ${c} mb-3`,children:"Customization Options"}),r.jsx("div",{className:"space-y-2 text-sm",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:`font-mono ${a?"text-indigo-400":"text-indigo-600"}`,children:"width"}),r.jsx("p",{className:d,children:'Set width (e.g., "100%", "800px")'})]}),r.jsxs("div",{children:[r.jsx("span",{className:`font-mono ${a?"text-indigo-400":"text-indigo-600"}`,children:"height"}),r.jsx("p",{className:d,children:'Set height (e.g., "800px", "600px")'})]}),r.jsxs("div",{children:[r.jsx("span",{className:`font-mono ${a?"text-indigo-400":"text-indigo-600"}`,children:"frameborder"}),r.jsx("p",{className:d,children:"Show/hide border (0 or 1)"})]}),r.jsxs("div",{children:[r.jsx("span",{className:`font-mono ${a?"text-indigo-400":"text-indigo-600"}`,children:"style"}),r.jsx("p",{className:d,children:"Add custom CSS styling"})]})]})})]})]}),r.jsx("div",{className:`flex items-center justify-end gap-3 p-6 border-t ${u}`,children:r.jsx(W,{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Done"})})]})}):null},UZe=({isOpen:t,onClose:e,owner:s,onEdit:n,onDelete:a})=>{const{theme:i}=Nr(),o=i==="dark",l=o?"bg-[#161616]":"bg-white",c=o?"text-white":"text-gray-900",d=o?"text-gray-400":"text-gray-600",u=o?"border-[#333]":"border-gray-200",h=o?"bg-[#0a0a0a]":"bg-gray-50";return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${l} ${c} border ${u} max-w-3xl max-h-[90vh] overflow-y-auto`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:c,children:"Owner Details"}),r.jsx(wr,{className:d,children:"View complete owner information and account details"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:`p-6 rounded-xl border ${u} ${h}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`text-xl ${c} mb-1`,children:s.organizationName}),r.jsxs("p",{className:`text-sm ${d}`,children:["Owner: ",s.ownerName]})]}),r.jsxs(De,{variant:s.status==="active"?"default":"secondary",className:"text-sm",children:[s.status==="active"?r.jsx(en,{className:"w-3 h-3 mr-1"}):r.jsx(ln,{className:"w-3 h-3 mr-1"}),s.status]})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${u} bg-indigo-600/5 mb-4`,children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("code",{className:"text-xs bg-indigo-600/10 text-indigo-600 dark:text-indigo-400 px-2 py-1 rounded",children:s.organizationId})}),r.jsx("p",{className:`text-xs ${d}`,children:"Organization ID"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{children:r.jsxs(De,{style:{backgroundColor:s.plan==="Pro"?"#4f46e5":s.plan==="Growth"?"#10b981":"#6b7280"},className:"text-white text-sm",children:[r.jsx(lc,{className:"w-3 h-3 mr-1"}),s.plan," Plan"]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:`w-4 h-4 ${d}`}),r.jsxs("span",{className:c,children:[s.venues," Venues"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${d}`,children:"Contact Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ds,{className:`w-4 h-4 ${d}`}),r.jsx("a",{href:`mailto:${s.email}`,className:"text-indigo-600 dark:text-indigo-400 hover:underline",children:s.email})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ml,{className:`w-4 h-4 ${d}`}),r.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 dark:text-indigo-400 hover:underline flex items-center gap-1",children:[s.website,r.jsx(tn,{className:"w-3 h-3"})]})]})]})]}),r.jsx(Ze,{className:u}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${d}`,children:"Enabled Features"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map((m,f)=>r.jsx("span",{className:"px-3 py-1.5 text-sm bg-indigo-600/10 text-indigo-600 dark:text-indigo-400 border border-indigo-600/20 rounded-lg",children:m},f))})]}),r.jsx(Ze,{className:u}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${d}`,children:"Account Statistics"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${u} ${h}`,children:[r.jsx("div",{className:`text-2xl mb-1 ${c}`,children:s.venues}),r.jsx("div",{className:`text-sm ${d}`,children:"Total Venues"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${u} ${h}`,children:[r.jsx("div",{className:`text-2xl mb-1 ${c}`,children:s.features.length}),r.jsx("div",{className:`text-sm ${d}`,children:"Active Features"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${u} ${h}`,children:[r.jsx("div",{className:`text-2xl mb-1 ${c}`,children:s.status==="active"?"100%":"0%"}),r.jsx("div",{className:`text-sm ${d}`,children:"Uptime"})]})]})]}),r.jsx("div",{className:`p-4 rounded-lg border ${u} bg-blue-600/5`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm mb-1 ${c}`,children:"Public Venue Profile"}),r.jsxs("p",{className:`text-xs ${d}`,children:["/v/",s.profileSlug]})]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:()=>window.open(`/v/${s.profileSlug}`,"_blank"),className:`border ${u}`,children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"View Profile"]})]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-[#333]",children:[r.jsx(W,{variant:"outline",onClick:e,className:`border ${u}`,children:"Close"}),r.jsxs("div",{className:"flex gap-2",children:[n&&r.jsxs(W,{onClick:n,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit Owner"]}),a&&r.jsxs(W,{onClick:a,variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-600/10",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]})}):null},zZe=({isOpen:t,onClose:e,owner:s,onSave:n})=>{const{theme:a}=Nr(),i=a==="dark",o=i?"bg-[#161616]":"bg-white",l=i?"text-white":"text-gray-900",c=i?"text-gray-400":"text-gray-600",d=i?"border-[#333]":"border-gray-200",u=i?"bg-[#0a0a0a]":"bg-gray-50",[h,m]=j.useState({ownerName:s?.ownerName||"",organizationName:s?.organizationName||"",organizationId:s?.organizationId||"",email:s?.email||"",website:s?.website||"",plan:s?.plan||"Basic",venues:s?.venues||1,status:s?.status||"active",features:s?.features||[]}),[f,v]=j.useState({"AI Agents":s?.features?.includes("AI Agents")||!1,Waivers:s?.features?.includes("Waivers")||!1,Analytics:s?.features?.includes("Analytics")||!1,Marketing:s?.features?.includes("Marketing")||!1,"Booking Widgets":s?.features?.includes("Booking Widgets")||!1}),x=(w,N)=>{m(C=>({...C,[w]:N}))},g=w=>{v(N=>({...N,[w]:!N[w]}))},b=()=>{const w=Object.entries(f).filter(([C,S])=>S).map(([C])=>C),N={...s,...h,features:w};n&&n(N),re.success("Owner updated successfully"),e()};return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${o} ${l} border ${d} max-w-3xl max-h-[90vh] overflow-y-auto`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:l,children:"Edit Owner"}),r.jsx(wr,{className:c,children:"Update owner information and settings"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Basic Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Owner Name"}),r.jsx(de,{value:h.ownerName,onChange:w=>x("ownerName",w.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"John Smith"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Organization Name"}),r.jsx(de,{value:h.organizationName,onChange:w=>x("organizationName",w.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"Escape Rooms Inc."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Organization ID"}),r.jsx(de,{value:h.organizationId,onChange:w=>x("organizationId",w.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"ORG-001"})]})]})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Contact Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Email Address"}),r.jsx(de,{type:"email",value:h.email,onChange:w=>x("email",w.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"owner@example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Website"}),r.jsx(de,{type:"url",value:h.website,onChange:w=>x("website",w.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"https://example.com"})]})]})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Plan & Settings"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Plan"}),r.jsxs(sr,{value:h.plan,onValueChange:w=>x("plan",w),children:[r.jsx(ar,{className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333]",children:r.jsx(nr,{})}),r.jsxs(ir,{className:`${o} border ${d}`,children:[r.jsx(Ae,{value:"Basic",className:l,children:"Basic"}),r.jsx(Ae,{value:"Growth",className:l,children:"Growth"}),r.jsx(Ae,{value:"Pro",className:l,children:"Pro"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Number of Venues"}),r.jsx(de,{type:"number",min:"1",value:h.venues,onChange:w=>x("venues",parseInt(w.target.value)),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Status"}),r.jsxs(sr,{value:h.status,onValueChange:w=>x("status",w),children:[r.jsx(ar,{className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333]",children:r.jsx(nr,{})}),r.jsxs(ir,{className:`${o} border ${d}`,children:[r.jsx(Ae,{value:"active",className:l,children:"Active"}),r.jsx(Ae,{value:"inactive",className:l,children:"Inactive"})]})]})]})]})})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Enabled Features"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f).map(([w,N])=>r.jsxs("div",{className:`p-4 rounded-lg border ${d} ${u} flex items-center justify-between`,children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300 cursor-pointer",htmlFor:w,children:w}),r.jsx(Rt,{id:w,checked:N,onCheckedChange:()=>g(w)})]},w))})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-[#333]",children:[r.jsxs(W,{variant:"outline",onClick:e,className:`border ${d}`,children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs(W,{onClick:b,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}):null},VZe=({isOpen:t,onClose:e,owner:s,onConfirmDelete:n})=>{const{theme:a}=Nr(),i=a==="dark",o=i?"bg-[#161616]":"bg-white",l=i?"text-white":"text-gray-900",c=i?"text-gray-400":"text-gray-600",d=i?"border-[#333]":"border-gray-200",[u,h]=j.useState(""),m="DELETE",f=()=>{if(u!==m){re.error("Please type DELETE to confirm");return}n&&n(s.id),re.success(`Owner "${s.organizationName}" has been deleted`),e()},v=u!==m;return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${o} ${l} border ${d} max-w-2xl`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[r.jsx(Nu,{className:"w-5 h-5"}),"Delete Owner"]}),r.jsx(wr,{className:c,children:"This action cannot be undone. Please confirm deletion by typing DELETE."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"p-4 rounded-lg bg-red-600/10 border border-red-600/20",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Nu,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-red-600 dark:text-red-400 mb-2",children:"Warning: This action cannot be undone!"}),r.jsx("p",{className:`text-sm ${c}`,children:"Deleting this owner will permanently remove:"}),r.jsxs("ul",{className:`mt-2 space-y-1 text-sm ${c} list-disc list-inside`,children:[r.jsx("li",{children:"All organization data and settings"}),r.jsxs("li",{children:["All associated venues (",s.venues," venue",s.venues!==1?"s":"",")"]}),r.jsx("li",{children:"All booking history and customer data"}),r.jsx("li",{children:"All payment and subscription information"}),r.jsx("li",{children:"All analytics and reports"})]})]})]})}),r.jsxs("div",{className:`p-4 rounded-lg border ${d} bg-gray-50 dark:bg-[#0a0a0a]`,children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-3 ${c}`,children:"Owner to be deleted"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Organization:"}),r.jsx("span",{className:l,children:s.organizationName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Owner:"}),r.jsx("span",{className:l,children:s.ownerName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Organization ID:"}),r.jsx("code",{className:"text-xs bg-indigo-600/10 text-indigo-600 dark:text-indigo-400 px-2 py-1 rounded",children:s.organizationId})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Email:"}),r.jsx("span",{className:l,children:s.email})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Plan:"}),r.jsx("span",{className:l,children:s.plan})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:c,children:"Venues:"}),r.jsx("span",{className:l,children:s.venues})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700 dark:text-gray-300",children:["Type ",r.jsx("span",{className:"font-mono bg-red-600/10 text-red-600 dark:text-red-400 px-2 py-1 rounded",children:m})," to confirm deletion"]}),r.jsx(de,{value:u,onChange:x=>h(x.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"Type DELETE here",autoComplete:"off"})]}),r.jsx("div",{className:`p-4 rounded-lg border ${d} bg-yellow-600/5`,children:r.jsxs("p",{className:`text-sm ${c}`,children:[r.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-medium",children:"Note:"})," Consider exporting all data before deleting this owner. Once deleted, data recovery is not possible."]})}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-[#333]",children:[r.jsxs(W,{variant:"outline",onClick:e,className:`border ${d}`,children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs(W,{onClick:f,disabled:v,className:"bg-red-600 hover:bg-red-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete Owner Permanently"]})]})]})]})}):null};var fy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},WZe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},qZe=class{#e=WZe;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},Ox=new qZe;function HZe(t){setTimeout(t,0)}var cg=typeof window>"u"||"Deno"in globalThis;function Al(){}function GZe(t,e){return typeof t=="function"?t(e):t}function LO(t){return typeof t=="number"&&t>=0&&t!==1/0}function Doe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Yf(t,e){return typeof t=="function"?t(e):t}function bd(t,e){return typeof t=="function"?t(e):t}function EG(t,e){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==cD(o,e.options))return!1}else if(!dw(e.queryKey,o))return!1}if(s!=="all"){const c=e.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||i&&!i(e))}function PG(t,e){const{exact:s,status:n,predicate:a,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(s){if(dg(e.options.mutationKey)!==dg(i))return!1}else if(!dw(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function cD(t,e){return(e?.queryKeyHashFn||dg)(t)}function dg(t){return JSON.stringify(t,(e,s)=>FO(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function dw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>dw(t[s],e[s])):!1}var YZe=Object.prototype.hasOwnProperty;function Roe(t,e){if(t===e)return t;const s=TG(t)&&TG(e);if(!s&&!(FO(t)&&FO(e)))return e;const a=(s?t:Object.keys(t)).length,i=s?e:Object.keys(e),o=i.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=s?d:i[d],h=t[u],m=e[u];if(h===m){l[u]=h,(s?d<a:YZe.call(t,u))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[u]=m;continue}const f=Roe(h,m);l[u]=f,f===h&&c++}return a===o&&c===a?t:l}function G4(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function TG(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function FO(t){if(!OG(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!OG(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function OG(t){return Object.prototype.toString.call(t)==="[object Object]"}function KZe(t){return new Promise(e=>{Ox.setTimeout(e,t)})}function BO(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?Roe(t,e):e}function XZe(t,e,s=0){const n=[...t,e];return s&&n.length>s?n.slice(1):n}function QZe(t,e,s=0){const n=[e,...t];return s&&n.length>s?n.slice(0,-1):n}var dD=Symbol();function Moe(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===dD?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Loe(t,e){return typeof t=="function"?t(...e):!!t}var ZZe=class extends fy{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!cg&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},uD=new ZZe;function UO(){let t,e;const s=new Promise((a,i)=>{t=a,e=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},s.reject=a=>{n({status:"rejected",reason:a}),e(a)},s}var JZe=HZe;function eJe(){let t=[],e=0,s=l=>{l()},n=l=>{l()},a=JZe;const i=l=>{e?t.push(l):a(()=>{s(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var eo=eJe(),tJe=class extends fy{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!cg&&window.addEventListener){const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},Y4=new tJe;function rJe(t){return Math.min(1e3*2**t,3e4)}function Foe(t){return(t??"online")==="online"?Y4.isOnline():!0}var zO=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Boe(t){let e=!1,s=0,n;const a=UO(),i=()=>a.status!=="pending",o=x=>{if(!i()){const g=new zO(x);m(g),t.onCancel?.(g)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>uD.isFocused()&&(t.networkMode==="always"||Y4.isOnline())&&t.canRun(),u=()=>Foe(t.networkMode)&&t.canRun(),h=x=>{i()||(n?.(),a.resolve(x))},m=x=>{i()||(n?.(),a.reject(x))},f=()=>new Promise(x=>{n=g=>{(i()||d())&&x(g)},t.onPause?.()}).then(()=>{n=void 0,i()||t.onContinue?.()}),v=()=>{if(i())return;let x;const g=s===0?t.initialPromise:void 0;try{x=g??t.fn()}catch(b){x=Promise.reject(b)}Promise.resolve(x).then(h).catch(b=>{if(i())return;const w=t.retry??(cg?0:3),N=t.retryDelay??rJe,C=typeof N=="function"?N(s,b):N,S=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,b);if(e||!S){m(b);return}s++,t.onFail?.(s,b),KZe(C).then(()=>d()?void 0:f()).then(()=>{e?m(b):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n?.(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():f().then(v),a)}}var Uoe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LO(this.gcTime)&&(this.#e=Ox.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cg?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Ox.clearTimeout(this.#e),this.#e=void 0)}},sJe=class extends Uoe{#e;#t;#r;#n;#s;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=$G(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=$G(this.options);e.data!==void 0&&(this.setState(IG(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const s=BO(this.state.data,t,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Al).catch(Al):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>bd(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dD||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Yf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Doe(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const s=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},a=()=>{const l=Moe(this.options,e),d=(()=>{const u={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=Boe({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof zO&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(l,c)=>{this.#a({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#s.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof zO){if(l.silent)return this.#s.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#a({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#a(t){const e=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...zoe(s.data,this.options),fetchMeta:t.meta??null};case"success":const n={...s,...IG(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const a=t.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=e(this.state),eo.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function zoe(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Foe(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function IG(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $G(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var nJe=class extends fy{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=UO(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#n=void 0;#s;#i;#o;#a;#p;#h;#m;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),DG(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return VO(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return VO(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bd(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),e._defaulted&&!G4(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&RG(this.#t,s,this.options,e)&&this.#u(),this.updateResult(),n&&(this.#t!==s||bd(this.options.enabled,this.#t)!==bd(e.enabled,this.#t)||Yf(this.options.staleTime,this.#t)!==Yf(e.staleTime,this.#t))&&this.#x();const a=this.#g();n&&(this.#t!==s||bd(this.options.enabled,this.#t)!==bd(e.enabled,this.#t)||a!==this.#l)&&this.#v(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),s=this.createResult(e,t);return iJe(this,s)&&(this.#n=s,this.#i=this.options,this.#s=this.#t.state),s}getCurrentResult(){return this.#n}trackResult(t,e){return new Proxy(t,{get:(s,n)=>(this.trackProp(n),e?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,n))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),s=this.#e.getQueryCache().build(this.#e,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#j();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Al)),e}#x(){this.#b();const t=Yf(this.options.staleTime,this.#t);if(cg||this.#n.isStale||!LO(t))return;const s=Doe(this.#n.dataUpdatedAt,t)+1;this.#c=Ox.setTimeout(()=>{this.#n.isStale||this.updateResult()},s)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#w(),this.#l=t,!(cg||bd(this.options.enabled,this.#t)===!1||!LO(this.#l)||this.#l===0)&&(this.#d=Ox.setInterval(()=>{(this.options.refetchIntervalInBackground||uD.isFocused())&&this.#u()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&(Ox.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(Ox.clearInterval(this.#d),this.#d=void 0)}createResult(t,e){const s=this.#t,n=this.options,a=this.#n,i=this.#s,o=this.#i,c=t!==s?t.state:this.#r,{state:d}=t;let u={...d},h=!1,m;if(e._optimisticResults){const E=this.hasListeners(),O=!E&&DG(t,e),$=E&&RG(t,s,e,n);(O||$)&&(u={...u,...zoe(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:v,status:x}=u;m=u.data;let g=!1;if(e.placeholderData!==void 0&&m===void 0&&x==="pending"){let E;a?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(E=a.data,g=!0):E=typeof e.placeholderData=="function"?e.placeholderData(this.#m?.state.data,this.#m):e.placeholderData,E!==void 0&&(x="success",m=BO(a?.data,E,e),h=!0)}if(e.select&&m!==void 0&&!g)if(a&&m===i?.data&&e.select===this.#p)m=this.#h;else try{this.#p=e.select,m=e.select(m),m=BO(a?.data,m,e),this.#h=m,this.#a=null}catch(E){this.#a=E}this.#a&&(f=this.#a,m=this.#h,v=Date.now(),x="error");const b=u.fetchStatus==="fetching",w=x==="pending",N=x==="error",C=w&&b,S=m!==void 0,k={status:x,fetchStatus:u.fetchStatus,isPending:w,isSuccess:x==="success",isError:N,isInitialLoading:C,isLoading:C,data:m,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:v,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:N&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&S,isStale:hD(t,e),refetch:this.refetch,promise:this.#o,isEnabled:bd(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=T=>{k.status==="error"?T.reject(k.error):k.data!==void 0&&T.resolve(k.data)},O=()=>{const T=this.#o=k.promise=UO();E(T)},$=this.#o;switch($.status){case"pending":t.queryHash===s.queryHash&&E($);break;case"fulfilled":(k.status==="error"||k.data!==$.value)&&O();break;case"rejected":(k.status!=="error"||k.error!==$.reason)&&O();break}}return k}updateResult(){const t=this.#n,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#m=this.#t),G4(e,t))return;this.#n=e;const s=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#f.size)return!0;const i=new Set(a??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(o=>{const l=o;return this.#n[l]!==t[l]&&i.has(l)})};this.#N({listeners:s()})}#j(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(t){eo.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function aJe(t,e){return bd(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function DG(t,e){return aJe(t,e)||t.state.data!==void 0&&VO(t,e,e.refetchOnMount)}function VO(t,e,s){if(bd(e.enabled,t)!==!1&&Yf(e.staleTime,t)!=="static"){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&hD(t,e)}return!1}function RG(t,e,s,n){return(t!==e||bd(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&hD(t,s)}function hD(t,e){return bd(e.enabled,t)!==!1&&t.isStaleByTime(Yf(e.staleTime,t))}function iJe(t,e){return!G4(t.getCurrentResult(),e)}function MG(t){return{onFetch:(e,s)=>{const n=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const h=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},m=Moe(e.options,e.fetchOptions),f=async(v,x,g)=>{if(u)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const w=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:x,direction:g?"backward":"forward",meta:e.options.meta};return h(A),A})(),N=await m(w),{maxPages:C}=e.options,S=g?QZe:XZe;return{pages:S(v.pages,N,C),pageParams:S(v.pageParams,x,C)}};if(a&&i.length){const v=a==="backward",x=v?oJe:LG,g={pages:i,pageParams:o},b=x(n,g);l=await f(g,b,v)}else{const v=t??i.length;do{const x=c===0?o[0]??n.initialPageParam:LG(n,l);if(c>0&&x==null)break;l=await f(l,x),c++}while(c<v)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=d}}}function LG(t,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,s[n],s):void 0}function oJe(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}var lJe=class extends Uoe{#e;#t;#r;#n;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#r=t.mutationCache,this.#t=[],this.state=t.state||Voe(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=Boe({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#s({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",a=!this.#n.canStart();try{if(n)e();else{this.#s({type:"pending",variables:t,isPaused:a}),await this.#r.config.onMutate?.(t,this,s);const o=await this.options.onMutate?.(t,s);o!==this.state.context&&this.#s({type:"pending",context:o,variables:t,isPaused:a})}const i=await this.#n.start();return await this.#r.config.onSuccess?.(i,t,this.state.context,this,s),await this.options.onSuccess?.(i,t,this.state.context,s),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(i,null,t,this.state.context,s),this.#s({type:"success",data:i}),i}catch(i){try{throw await this.#r.config.onError?.(i,t,this.state.context,this,s),await this.options.onError?.(i,t,this.state.context,s),await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,i,t,this.state.context,s),i}finally{this.#s({type:"error",error:i})}}finally{this.#r.runNext(this)}}#s(t){const e=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),eo.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(t)}),this.#r.notify({mutation:this,type:"updated",action:t})})}};function Voe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cJe=class extends fy{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,s){const n=new lJe({client:t,mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:s});return this.add(n),n}add(t){this.#e.add(t);const e=Oj(t);if(typeof e=="string"){const s=this.#t.get(e);s?s.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Oj(t);if(typeof e=="string"){const s=this.#t.get(e);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Oj(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=Oj(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){eo.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(s=>PG(e,s))}findAll(t={}){return this.getAll().filter(e=>PG(t,e))}notify(t){eo.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return eo.batch(()=>Promise.all(t.map(e=>e.continue().catch(Al))))}};function Oj(t){return t.options.scope?.id}var dJe=class extends fy{#e;#t=void 0;#r;#n;constructor(e,s){super(),this.#e=e,this.setOptions(s),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.#e.defaultMutationOptions(e),G4(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),s?.mutationKey&&this.options.mutationKey&&dg(s.mutationKey)!==dg(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(e,s){return this.#n=s,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#s(){const e=this.#r?.state??Voe();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#i(e){eo.batch(()=>{if(this.#n&&this.hasListeners()){const s=this.#t.variables,n=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#n.onSuccess?.(e.data,s,n,a),this.#n.onSettled?.(e.data,null,s,n,a)):e?.type==="error"&&(this.#n.onError?.(e.error,s,n,a),this.#n.onSettled?.(void 0,e.error,s,n,a))}this.listeners.forEach(s=>{s(this.#t)})})}},uJe=class extends fy{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,s){const n=e.queryKey,a=e.queryHash??cD(n,e);let i=this.get(a);return i||(i=new sJe({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){eo.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(s=>EG(e,s))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(s=>EG(t,s)):e}notify(t){eo.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){eo.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){eo.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},hJe=class{#e;#t;#r;#n;#s;#i;#o;#a;constructor(t={}){this.#e=t.queryCache||new uJe,this.#t=t.mutationCache||new cJe,this.#r=t.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=uD.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Y4.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=this.#e.build(this,e),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Yf(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:s})=>{const n=s.data;return[e,n]})}setQueryData(t,e,s){const n=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(n.queryHash)?.state.data,o=GZe(e,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return eo.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,s)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;eo.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=this.#e;return eo.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},n=eo.batch(()=>this.#e.findAll(t).map(a=>a.cancel(s)));return Promise.all(n).then(Al).catch(Al)}invalidateQueries(t,e={}){return eo.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},n=eo.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Al)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Al)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=this.#e.build(this,e);return s.isStaleByTime(Yf(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Al).catch(Al)}fetchInfiniteQuery(t){return t.behavior=MG(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Al).catch(Al)}ensureInfiniteQueryData(t){return t.behavior=MG(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Y4.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#n.set(dg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#n.values()],s={};return e.forEach(n=>{dw(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,e){this.#s.set(dg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],s={};return e.forEach(n=>{dw(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=cD(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dD&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Woe=j.createContext(void 0),_3=t=>{const e=j.useContext(Woe);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mJe=({client:t,children:e})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),r.jsx(Woe.Provider,{value:t,children:e})),qoe=j.createContext(!1),fJe=()=>j.useContext(qoe);qoe.Provider;function pJe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xJe=j.createContext(pJe()),gJe=()=>j.useContext(xJe),vJe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yJe=t=>{j.useEffect(()=>{t.clearReset()},[t])},bJe=({result:t,errorResetBoundary:e,throwOnError:s,query:n,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||Loe(s,[t.error,n])),wJe=t=>{if(t.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>s(n(...a)):s(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},jJe=(t,e)=>t.isLoading&&t.isFetching&&!e,NJe=(t,e)=>t?.suspense&&e.isPending,FG=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function SJe(t,e,s){const n=fJe(),a=gJe(),i=_3(),o=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",wJe(o),vJe(o,a),yJe(a);const l=!i.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new e(i,o)),d=c.getOptimisticResult(o),u=!n&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(h=>{const m=u?c.subscribe(eo.batchCalls(h)):Al;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o)},[o,c]),NJe(o,d))throw FG(o,c,a);if(bJe({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!cg&&jJe(d,n)&&(l?FG(o,c,a):i.getQueryCache().get(o.queryHash)?.promise)?.catch(Al).finally(()=>{c.updateResult()}),o.notifyOnChangeProps?d:c.trackResult(d)}function A3(t,e){return SJe(t,nJe)}function sv(t,e){const s=_3(),[n]=j.useState(()=>new dJe(s,t));j.useEffect(()=>{n.setOptions(t)},[n,t]);const a=j.useSyncExternalStore(j.useCallback(o=>n.subscribe(eo.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=j.useCallback((o,l)=>{n.mutate(o,l).catch(Al)},[n]);if(a.error&&Loe(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const CJe=new hJe({defaultOptions:{queries:{staleTime:300*1e3,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),kJe=j.createContext(void 0),_Je=({children:t})=>{const[e,s]=j.useState({}),[n,a]=j.useState({field:"created_at",direction:"desc"}),[i,o]=j.useState(1),[l,c]=j.useState(10),[d,u]=j.useState(null),[h,m]=j.useState("table"),f={organizationFilters:e,setOrganizationFilters:s,organizationSort:n,setOrganizationSort:a,currentPage:i,setCurrentPage:o,pageSize:l,setPageSize:c,selectedOrganizationId:d,setSelectedOrganizationId:u,viewMode:h,setViewMode:m};return r.jsx(mJe,{client:CJe,children:r.jsx(kJe.Provider,{value:f,children:t})})};class AJe{static async createCustomer(e){try{const{data:s,error:n}=await pt.functions.invoke("create-stripe-customer",{body:{email:e.email,name:e.name,metadata:e.metadata||{}}});if(n)throw console.error("Stripe customer creation error:",n),new Error(`Failed to create Stripe customer: ${n.message}`);if(!s||!s.customer)throw new Error("No customer data returned from Stripe");return s.customer}catch(s){return console.error("StripeService.createCustomer error:",s),console.warn(" Stripe customer creation failed, continuing with organization creation"),{id:`cus_temp_${Date.now()}`,email:e.email,name:e.name,created:Date.now()/1e3}}}static async createProduct(e){try{const{data:s,error:n}=await pt.functions.invoke("create-stripe-product",{body:e});if(n)throw console.error("Stripe product creation error:",n),new Error(`Failed to create Stripe product: ${n.message}`);return s.product}catch(s){return console.error("StripeService.createProduct error:",s),console.warn(" Stripe product creation failed, continuing with game creation"),{id:`prod_temp_${Date.now()}`,name:e.name}}}static async createPrice(e){try{const{data:s,error:n}=await pt.functions.invoke("create-stripe-price",{body:{...e,currency:e.currency||"usd"}});if(n)throw console.error("Stripe price creation error:",n),new Error(`Failed to create Stripe price: ${n.message}`);return s.price}catch(s){return console.error("StripeService.createPrice error:",s),console.warn(" Stripe price creation failed, continuing with game creation"),{id:`price_temp_${Date.now()}`,unit_amount:e.unit_amount}}}static async createSubscription(e){try{const{data:s,error:n}=await pt.functions.invoke("create-stripe-subscription",{body:e});if(n)throw console.error("Stripe subscription creation error:",n),new Error(`Failed to create Stripe subscription: ${n.message}`);return s.subscription}catch(s){throw console.error("StripeService.createSubscription error:",s),s}}}class R1{static async getAll(e,s=1,n=10){try{let a=pt.from("organizations").select(`
          *,
          plans:plan_id (
            id,
            name,
            slug,
            price_monthly,
            price_yearly,
            features,
            max_venues,
            max_staff,
            max_bookings_per_month,
            max_widgets
          )
        `,{count:"exact"});e?.status&&(a=a.eq("status",e.status)),e?.plan_id&&(a=a.eq("plan_id",e.plan_id)),e?.search&&(a=a.or(`name.ilike.%${e.search}%,owner_name.ilike.%${e.search}%,owner_email.ilike.%${e.search}%`)),e?.has_stripe_account!==void 0&&(e.has_stripe_account?a=a.not("stripe_account_id","is",null):a=a.is("stripe_account_id",null)),e?.stripe_status&&(a=a.eq("stripe_onboarding_status",e.stripe_status));const i=(s-1)*n,o=i+n-1;a=a.range(i,o),a=a.order("created_at",{ascending:!1});const{data:l,error:c,count:d}=await a;if(c)throw new Error(`Failed to fetch organizations: ${c.message}`);return{data:l||[],total:d||0,page:s,per_page:n,total_pages:Math.ceil((d||0)/n)}}catch(a){const i=a?.message||"Database query failed";throw console.warn("[OrganizationService] getAll failed:",i),new Error(i)}}static async getById(e){try{const{data:s,error:n}=await pt.from("organizations").select(`
          *,
          plans:plan_id (*)
        `).eq("id",e).single();if(n)throw new Error(`Failed to fetch organization: ${n.message}`);if(!s)throw new Error("Organization not found");return s}catch(s){throw console.warn("[OrganizationService] getById failed:",s?.message),s}}static async create(e){try{const{data:s,error:n}=await pt.from("organizations").insert([{name:e.name,owner_name:e.owner_name,owner_email:e.owner_email,website:e.website,phone:e.phone,plan_id:e.plan_id,status:e.status||"pending",stripe_charges_enabled:!1,stripe_payouts_enabled:!1,application_fee_percentage:.75}]).select().single();if(n)throw new Error(`Failed to create organization: ${n.message}`);if(!s)throw new Error("Organization created but no data returned");let a=null;try{a=(await AJe.createCustomer({email:e.owner_email,name:e.owner_name||e.name,metadata:{organization_id:s.id,organization_name:e.name}})).id;const{error:o}=await pt.from("organizations").update({stripe_customer_id:a,updated_at:new Date().toISOString()}).eq("id",s.id);o&&console.error("Failed to update org with Stripe ID:",o)}catch(i){console.error("Stripe customer creation failed:",i)}try{const{data:{user:i}}=await pt.auth.getUser();if(i){const{error:o}=await pt.from("organization_members").insert([{organization_id:s.id,user_id:i.id,role:"owner",permissions:{all:!0}}]);o&&console.error("Failed to create organization member:",o)}}catch(i){console.error("Organization member creation failed:",i)}return{...s,stripe_customer_id:a}}catch(s){throw console.warn("[OrganizationService] create failed:",s?.message),s}}static async update(e,s){try{const{data:n,error:a}=await pt.from("organizations").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw new Error(`Failed to update organization: ${a.message}`);return n}catch(n){throw console.warn("[OrganizationService] update failed:",n?.message),n}}static async delete(e){try{const{error:s}=await pt.from("organizations").delete().eq("id",e);if(s)throw new Error(`Failed to delete organization: ${s.message}`)}catch(s){throw console.warn("[OrganizationService] delete failed:",s?.message),s}}static async getMetrics(e){try{const{data:s,error:n}=await pt.rpc("get_organization_metrics",{org_id:e}).single();if(n)throw new Error(`Failed to fetch metrics: ${n.message}`);if(!s)throw new Error("No metrics data returned");return s}catch(s){throw console.warn("[OrganizationService] getMetrics failed:",s?.message),s}}}class Ij{static async getAll(e=!1){try{let s=pt.from("plans").select("*").order("display_order",{ascending:!0});e&&(s=s.eq("is_active",!0));const{data:n,error:a}=await s;if(a)throw new Error(`Failed to fetch plans: ${a.message}`);return await Promise.all((n||[]).map(async o=>{const{count:l}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("plan_id",o.id).eq("status","active");return{...o,subscriber_count:l||0}}))}catch(s){throw console.warn("[PlanService] getAll failed:",s?.message||"Database query failed"),new Error(s?.message||"Failed to fetch plans")}}static async getById(e){try{const{data:s,error:n}=await pt.from("plans").select("*").eq("id",e).single();if(n)throw new Error(`Failed to fetch plan: ${n.message}`);if(!s)throw new Error("Plan not found");const{count:a}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("plan_id",e).eq("status","active");return{...s,subscriber_count:a||0}}catch(s){throw console.warn("[PlanService] getById failed:",s?.message),s}}static async create(e){try{const{data:s,error:n}=await pt.from("plans").insert([{name:e.name,slug:e.slug,description:e.description,price_monthly:e.price_monthly,price_yearly:e.price_yearly,stripe_product_id:e.stripe_product_id,max_venues:e.max_venues,max_staff:e.max_staff,max_bookings_per_month:e.max_bookings_per_month,max_games:e.max_games,features:e.features,is_active:e.is_active??!0,is_visible:e.is_visible??!0,sort_order:e.sort_order??999}]).select().single();if(n)throw new Error(`Failed to create plan: ${n.message}`);return{...s,subscriber_count:0}}catch(s){throw console.warn("[PlanService] create failed:",s?.message),s}}static async update(e,s){try{const{data:n,error:a}=await pt.from("plans").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw new Error(`Failed to update plan: ${a.message}`);return n}catch(n){throw console.warn("[PlanService] update failed:",n?.message),n}}static async delete(e){try{const{count:s}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("plan_id",e).eq("status","active");if(s&&s>0)throw new Error(`Cannot delete plan: ${s} active organizations are using it`);const{error:n}=await pt.from("plans").update({is_active:!1,is_visible:!1,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw new Error(`Failed to delete plan: ${n.message}`)}catch(s){throw console.warn("[PlanService] delete failed:",s?.message),s}}static async getStats(e){try{const{count:s}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("plan_id",e).eq("status","active"),n=await this.getById(e),a=n.price_monthly,i=n.price_yearly,o=a*(s||0),l=i*(s||0);return{subscriber_count:s||0,mrr:o,arr:l,growth_rate:0,churn_rate:0}}catch(s){throw console.warn("[PlanService] getStats failed:",s?.message),s}}}class EJe{static async getPlatformMetrics(e){try{const{data:s,error:n}=await pt.rpc("get_platform_metrics").single();if(n)throw new Error(`Failed to fetch platform metrics: ${n.message}`);if(!s)throw new Error("No platform metrics data returned");return s}catch(s){throw console.error("MetricsService.getPlatformMetrics error:",s),s}}static async getPlatformMetricsManual(e){try{const{data:s}=await pt.from("organizations").select("status"),n=s?.length||0,a=s?.filter(E=>E.status==="active").length||0,i=s?.filter(E=>E.status==="inactive").length||0,o=s?.filter(E=>E.status==="pending").length||0,{data:l}=await pt.from("organizations").select("plan_id, plans(name)").eq("status","active"),c=l?.filter(E=>E.plans?.name?.toLowerCase().includes("basic")).length||0,d=l?.filter(E=>E.plans?.name?.toLowerCase().includes("growth")).length||0,u=l?.filter(E=>E.plans?.name?.toLowerCase().includes("pro")).length||0,{data:h}=await pt.from("platform_revenue").select("amount, fee_collected"),m=h?.reduce((E,O)=>E+O.amount,0)||0,f=h?.reduce((E,O)=>E+O.fee_collected,0)||0,{data:v}=await pt.from("organizations").select("plans(price, billing_period)").eq("status","active"),x=v?.reduce((E,O)=>{const $=O.plans?.price||0,T=O.plans?.billing_period==="annual"?$/12:$;return E+T},0)||0,g=x*12,[{count:b},{count:w},{count:N},{count:C}]=await Promise.all([pt.from("venues").select("*",{count:"exact",head:!0}),pt.from("games").select("*",{count:"exact",head:!0}),pt.from("bookings").select("*",{count:"exact",head:!0}),pt.from("users").select("*",{count:"exact",head:!0})]);return{total_organizations:n,active_organizations:a,inactive_organizations:i,pending_organizations:o,mrr:x,arr:g,total_revenue:m,platform_fee_revenue:f,total_venues:b||0,total_games:w||0,total_bookings:N||0,total_users:C||0,new_organizations_this_month:0,churn_rate:0,growth_rate:0,basic_plan_count:c,growth_plan_count:d,pro_plan_count:u,period_start:e?.time_range?.start_date||new Date().toISOString(),period_end:e?.time_range?.end_date||new Date().toISOString(),updated_at:new Date().toISOString()}}catch(s){throw console.error("MetricsService.getPlatformMetrics error:",s),s}}static async getRevenueMetrics(e){try{const{data:s}=await pt.from("platform_revenue").select("amount, fee_collected, created_at").order("created_at",{ascending:!0}),n=s?.reduce((l,c)=>l+c.amount,0)||0,a=s?.reduce((l,c)=>l+c.fee_collected,0)||0,i=n-a,o=(s||[]).reduce((l,c)=>{const d=new Date(c.created_at).toISOString().split("T")[0],u=l.find(h=>h.date===d);return u?u.value+=c.amount:l.push({date:d,value:c.amount}),l},[]);return{total_revenue:n,platform_fee_revenue:a,net_revenue:i,currency:"USD",trend:o}}catch(s){throw console.error("MetricsService.getRevenueMetrics error:",s),s}}static async getUsageMetrics(e){try{const[{count:s},{count:n},{count:a},{count:i}]=await Promise.all([pt.from("bookings").select("*",{count:"exact",head:!0}),pt.from("venues").select("*",{count:"exact",head:!0}),pt.from("games").select("*",{count:"exact",head:!0}),pt.from("users").select("*",{count:"exact",head:!0})]);return{bookings_count:s||0,venues_count:n||0,games_count:a||0,users_count:i||0,trend:[]}}catch(s){throw console.error("MetricsService.getUsageMetrics error:",s),s}}static async getGrowthMetrics(e){try{const{count:s}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("status","active"),{count:n}=await pt.from("organizations").select("*",{count:"exact",head:!0}).eq("status","inactive"),a=(s||0)-(n||0),i=s?a/s*100:0;return{new_organizations:s||0,churned_organizations:n||0,net_growth:a,growth_rate:i,trend:[]}}catch(s){throw console.error("MetricsService.getGrowthMetrics error:",s),s}}}const mD=(t,e=1,s=10)=>{const n=_3(),{data:a,isLoading:i,error:o,refetch:l,isFetching:c}=A3({queryKey:["organizations",t,e,s],queryFn:async()=>{try{return await R1.getAll(t,e,s)}catch(m){throw console.warn("Organizations query failed:",m?.message||"Database not configured"),m}},staleTime:300*1e3,retry:!1}),d=sv({mutationFn:m=>R1.create(m),onSuccess:()=>{n.invalidateQueries({queryKey:["organizations"]}),n.invalidateQueries({queryKey:["metrics"]}),re.success("Organization created successfully")},onError:m=>{re.error(`Failed to create organization: ${m.message}`)}}),u=sv({mutationFn:({id:m,data:f})=>R1.update(m,f),onSuccess:()=>{n.invalidateQueries({queryKey:["organizations"]}),n.invalidateQueries({queryKey:["metrics"]}),re.success("Organization updated successfully")},onError:m=>{re.error(`Failed to update organization: ${m.message}`)}}),h=sv({mutationFn:m=>R1.delete(m),onSuccess:()=>{n.invalidateQueries({queryKey:["organizations"]}),n.invalidateQueries({queryKey:["metrics"]}),re.success("Organization deleted successfully")},onError:m=>{re.error(`Failed to delete organization: ${m.message}`)}});return{organizations:a?.data||[],total:a?.total||0,page:a?.page||1,perPage:a?.per_page||10,totalPages:a?.total_pages||0,isLoading:i,isFetching:c,error:o,refetch:l,createOrganization:d.mutate,updateOrganization:u.mutate,deleteOrganization:h.mutate,isCreating:d.isPending,isUpdating:u.isPending,isDeleting:h.isPending}},PJe=t=>{const{data:e,isLoading:s,error:n,refetch:a}=A3({queryKey:["organization-metrics",t],queryFn:()=>R1.getMetrics(t),enabled:!!t,staleTime:12e4});return{metrics:e,isLoading:s,error:n,refetch:a}},Hoe=(t=!1)=>{const e=_3(),{data:s,isLoading:n,error:a,refetch:i}=A3({queryKey:["plans",t],queryFn:async()=>{try{return await Ij.getAll(t)}catch(d){throw console.warn("Plans query failed:",d?.message||"Database not configured"),d}},staleTime:600*1e3,retry:!1}),o=sv({mutationFn:d=>Ij.create(d),onSuccess:()=>{e.invalidateQueries({queryKey:["plans"]}),re.success("Plan created successfully")},onError:d=>{re.error(`Failed to create plan: ${d.message}`)}}),l=sv({mutationFn:({id:d,data:u})=>Ij.update(d,u),onSuccess:()=>{e.invalidateQueries({queryKey:["plans"]}),re.success("Plan updated successfully")},onError:d=>{re.error(`Failed to update plan: ${d.message}`)}}),c=sv({mutationFn:d=>Ij.delete(d),onSuccess:()=>{e.invalidateQueries({queryKey:["plans"]}),re.success("Plan deleted successfully")},onError:d=>{re.error(`Failed to delete plan: ${d.message}`)}});return{plans:s||[],isLoading:n,error:a,refetch:i,createPlan:o.mutate,updatePlan:l.mutate,deletePlan:c.mutate,isCreating:o.isPending,isUpdating:l.isPending,isDeleting:c.isPending}},TJe=t=>{const{data:e,isLoading:s,error:n,refetch:a}=A3({queryKey:["platform-metrics",t],queryFn:()=>EJe.getPlatformMetrics(t),staleTime:12e4,refetchInterval:3e5});return{metrics:e,isLoading:s,error:n,refetch:a}},OJe=({isOpen:t,onClose:e,onAdd:s})=>{const{theme:n}=Nr(),a=n==="dark",i=a?"bg-[#161616]":"bg-white",o=a?"text-white":"text-gray-900",l=a?"text-gray-400":"text-gray-600",c=a?"border-[#333]":"border-gray-200",{createOrganization:d,isCreating:u,error:h}=mD({},1,10),{plans:m,error:f}=Hoe(!0),v=h||f,[x,g]=j.useState({name:"",owner_name:"",owner_email:"",website:"",phone:"",plan_id:"",status:"pending"}),b=(C,S)=>{g(A=>({...A,[C]:S}))},w=()=>x.owner_name.trim()?x.name.trim()?x.owner_email.trim()?x.owner_email.includes("@")?x.plan_id?!0:(re.error("Please select a plan"),!1):(re.error("Please enter a valid email address"),!1):(re.error("Email is required"),!1):(re.error("Organization name is required"),!1):(re.error("Owner name is required"),!1),N=async()=>{if(w())try{await d(x),re.success(`Organization "${x.name}" has been created successfully`),s&&s(),g({name:"",owner_name:"",owner_email:"",website:"",phone:"",plan_id:"",status:"pending"}),e()}catch(C){console.error("Failed to create organization:",C),re.error("Failed to create organization. Please try again.")}};return v&&t?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${i} ${o} border ${c} max-w-md`,children:[r.jsx(br,{children:r.jsx(pr,{className:o,children:"Database Not Configured"})}),r.jsxs("div",{className:"py-6 text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500/10 flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("p",{className:l,children:"The database tables don't exist yet. Please run migrations first."}),r.jsx("div",{className:"mt-4",children:r.jsx(W,{onClick:()=>e(),variant:"outline",className:"w-full",children:"Close"})})]})]})}):r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${i} ${o} border ${c} max-w-3xl max-h-[90vh] overflow-y-auto`,children:[r.jsxs(br,{children:[r.jsx(pr,{className:o,children:"Add New Owner"}),r.jsx(wr,{className:l,children:"Create a new owner account and configure settings"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${l}`,children:"Basic Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700 dark:text-gray-300",children:["Owner Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx(de,{value:x.owner_name,onChange:C=>b("owner_name",C.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"John Smith"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700 dark:text-gray-300",children:["Organization Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx(de,{value:x.name,onChange:C=>b("name",C.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"Escape Rooms Inc."})]})]}),r.jsx("div",{className:`p-4 rounded-lg border ${c} bg-blue-600/5`,children:r.jsx("p",{className:`text-xs ${l}`,children:" Organization ID will be automatically generated when you create the organization"})})]})]}),r.jsx(Ze,{className:c}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${l}`,children:"Contact Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700 dark:text-gray-300",children:["Email Address ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx(de,{type:"email",value:x.owner_email,onChange:C=>b("owner_email",C.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"owner@example.com"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Website"}),r.jsx(de,{type:"url",value:x.website||"",onChange:C=>b("website",C.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"https://example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Phone"}),r.jsx(de,{type:"tel",value:x.phone||"",onChange:C=>b("phone",C.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"+1 (555) 123-4567"})]})]})]})]}),r.jsx(Ze,{className:c}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${l}`,children:"Plan & Settings"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(X,{className:"text-gray-700 dark:text-gray-300",children:["Plan ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs(sr,{value:x.plan_id,onValueChange:C=>b("plan_id",C),children:[r.jsx(ar,{className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333]",children:r.jsx(nr,{placeholder:"Select a plan"})}),r.jsx(ir,{className:`${i} border ${c}`,position:"popper",sideOffset:5,children:m?.map(C=>r.jsxs(Ae,{value:C.id,className:o,children:[C.name," - $",C.price_monthly,"/mo"]},C.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Status"}),r.jsxs(sr,{value:x.status,onValueChange:C=>b("status",C),children:[r.jsx(ar,{className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333]",children:r.jsx(nr,{})}),r.jsxs(ir,{className:`${i} border ${c}`,position:"popper",sideOffset:5,children:[r.jsx(Ae,{value:"pending",className:o,children:"Pending"}),r.jsx(Ae,{value:"active",className:o,children:"Active"})]})]})]})]}),x.plan_id&&r.jsx("div",{className:`p-4 rounded-lg border ${c} bg-blue-600/5`,children:r.jsxs("p",{className:`text-sm ${l}`,children:[m?.find(C=>C.id===x.plan_id)?.name," plan features will be available after organization is created."]})})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-[#333]",children:[r.jsxs(W,{variant:"outline",onClick:e,disabled:u,className:`border ${c}`,children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs(W,{onClick:N,disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[u?r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Ts,{className:"w-4 h-4 mr-2"}),u?"Creating...":"Add Owner"]})]})]})]})})},Goe=j.createContext({dragDropManager:void 0});function pd(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var BG=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),UG=function(){return Math.random().toString(36).substring(7).split("").join(".")},zG={INIT:"@@redux/INIT"+UG(),REPLACE:"@@redux/REPLACE"+UG()};function IJe(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Yoe(t,e,s){var n;if(typeof e=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(pd(0));if(typeof e=="function"&&typeof s>"u"&&(s=e,e=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(pd(1));return s(Yoe)(t,e)}if(typeof t!="function")throw new Error(pd(2));var a=t,i=e,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(pd(3));return i}function h(x){if(typeof x!="function")throw new Error(pd(4));if(c)throw new Error(pd(5));var g=!0;return d(),l.push(x),function(){if(g){if(c)throw new Error(pd(6));g=!1,d();var w=l.indexOf(x);l.splice(w,1),o=null}}}function m(x){if(!IJe(x))throw new Error(pd(7));if(typeof x.type>"u")throw new Error(pd(8));if(c)throw new Error(pd(9));try{c=!0,i=a(i,x)}finally{c=!1}for(var g=o=l,b=0;b<g.length;b++){var w=g[b];w()}return x}function f(x){if(typeof x!="function")throw new Error(pd(10));a=x,m({type:zG.REPLACE})}function v(){var x,g=h;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(pd(11));function N(){w.next&&w.next(u())}N();var C=g(N);return{unsubscribe:C}}},x[BG]=function(){return this},x}return m({type:zG.INIT}),n={dispatch:m,subscribe:h,getState:u,replaceReducer:f},n[BG]=v,n}function Bs(t,e,...s){if($Je()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(e.replace(/%s/g,function(){return s[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function $Je(){return typeof process<"u"&&!0}function DJe(t,e,s){return e.split(".").reduce((n,a)=>n&&n[a]?n[a]:s||null,t)}function RJe(t,e){return t.filter(s=>s!==e)}function Koe(t){return typeof t=="object"}function MJe(t,e){const s=new Map,n=i=>{s.set(i,s.has(i)?s.get(i)+1:1)};t.forEach(n),e.forEach(n);const a=[];return s.forEach((i,o)=>{i===1&&a.push(o)}),a}function LJe(t,e){return t.filter(s=>e.indexOf(s)>-1)}const fD="dnd-core/INIT_COORDS",E3="dnd-core/BEGIN_DRAG",pD="dnd-core/PUBLISH_DRAG_SOURCE",P3="dnd-core/HOVER",T3="dnd-core/DROP",O3="dnd-core/END_DRAG";function VG(t,e){return{type:fD,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const FJe={type:fD,payload:{clientOffset:null,sourceClientOffset:null}};function BJe(t){return function(s=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,l=t.getMonitor(),c=t.getRegistry();t.dispatch(VG(i)),UJe(s,l,c);const d=WJe(s,l);if(d==null){t.dispatch(FJe);return}let u=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");zJe(o),u=o(d)}t.dispatch(VG(i,u));const m=c.getSource(d).beginDrag(l,d);if(m==null)return;VJe(m),c.pinSource(d);const f=c.getSourceType(d);return{type:E3,payload:{itemType:f,item:m,sourceId:d,clientOffset:i||null,sourceClientOffset:u||null,isSourcePublic:!!a}}}}function UJe(t,e,s){Bs(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){Bs(s.getSource(n),"Expected sourceIds to be registered.")})}function zJe(t){Bs(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function VJe(t){Bs(Koe(t),"Item must be an object.")}function WJe(t,e){let s=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){s=t[n];break}return s}function qJe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function HJe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable}))),n.forEach(function(a){qJe(t,a,s[a])})}return t}function GJe(t){return function(s={}){const n=t.getMonitor(),a=t.getRegistry();YJe(n),QJe(n).forEach((o,l)=>{const c=KJe(o,l,a,n),d={type:T3,payload:{dropResult:HJe({},s,c)}};t.dispatch(d)})}}function YJe(t){Bs(t.isDragging(),"Cannot call drop while not dragging."),Bs(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function KJe(t,e,s,n){const a=s.getTarget(t);let i=a?a.drop(n,t):void 0;return XJe(i),typeof i>"u"&&(i=e===0?{}:n.getDropResult()),i}function XJe(t){Bs(typeof t>"u"||Koe(t),"Drop result must either be an object or undefined.")}function QJe(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function ZJe(t){return function(){const s=t.getMonitor(),n=t.getRegistry();JJe(s);const a=s.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(s,a),n.unpinSource()),{type:O3}}}function JJe(t){Bs(t.isDragging(),"Cannot call endDrag while not dragging.")}function WO(t,e){return e===null?t===null:Array.isArray(t)?t.some(s=>s===e):t===e}function eet(t){return function(s,{clientOffset:n}={}){tet(s);const a=s.slice(0),i=t.getMonitor(),o=t.getRegistry(),l=i.getItemType();return set(a,o,l),ret(a,i,o),net(a,i,o),{type:P3,payload:{targetIds:a,clientOffset:n||null}}}}function tet(t){Bs(Array.isArray(t),"Expected targetIds to be an array.")}function ret(t,e,s){Bs(e.isDragging(),"Cannot call hover while not dragging."),Bs(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const a=t[n];Bs(t.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=s.getTarget(a);Bs(i,"Expected targetIds to be registered.")}}function set(t,e,s){for(let n=t.length-1;n>=0;n--){const a=t[n],i=e.getTargetType(a);WO(i,s)||t.splice(n,1)}}function net(t,e,s){t.forEach(function(n){s.getTarget(n).hover(e,n)})}function aet(t){return function(){if(t.getMonitor().isDragging())return{type:pD}}}function iet(t){return{beginDrag:BJe(t),publishDragSource:aet(t),hover:eet(t),drop:GJe(t),endDrag:ZJe(t)}}class oet{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:s}=this.store;function n(i){return(...o)=>{const l=i.apply(e,o);typeof l<"u"&&s(l)}}const a=iet(this);return Object.keys(a).reduce((i,o)=>{const l=a[o];return i[o]=n(l),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,s){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=s,e.subscribe(this.handleRefCountChange)}}function cet(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Xoe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function det(t){const{clientOffset:e,initialClientOffset:s,initialSourceClientOffset:n}=t;return!e||!s||!n?null:Xoe(cet(e,n),s)}function uet(t){const{clientOffset:e,initialClientOffset:s}=t;return!e||!s?null:Xoe(e,s)}const sb=[],xD=[];sb.__IS_NONE__=!0;xD.__IS_ALL__=!0;function het(t,e){return t===sb?!1:t===xD||typeof e>"u"?!0:LJe(e,t).length>0}class met{subscribeToStateChange(e,s={}){const{handlerIds:n}=s;Bs(typeof e=="function","listener must be a function."),Bs(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),l=o.stateId;try{l===a||l===a+1&&!het(o.dirtyHandlerIds,n)||e()}finally{a=l}};return this.store.subscribe(i)}subscribeToOffsetChange(e){Bs(typeof e=="function","listener must be a function.");let s=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==s&&(s=a,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const s=this.registry.getSource(e);return Bs(s,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:s.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const s=this.registry.getTarget(e);if(Bs(s,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),a=this.getItemType();return WO(n,a)&&s.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const s=this.registry.getSource(e,!0);if(Bs(s,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),a=this.getItemType();return n!==a?!1:s.isDragging(this,e)}isOverTarget(e,s={shallow:!1}){if(!e)return!1;const{shallow:n}=s;if(!this.isDragging())return!1;const a=this.registry.getTargetType(e),i=this.getItemType();if(i&&!WO(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(e);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return det(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return uet(this.store.getState().dragOffset)}constructor(e,s){this.store=e,this.registry=s}}const WG=typeof global<"u"?global:self,Qoe=WG.MutationObserver||WG.WebKitMutationObserver;function Zoe(t){return function(){const s=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(s),clearInterval(n),t()}}}function fet(t){let e=1;const s=new Qoe(t),n=document.createTextNode("");return s.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const pet=typeof Qoe=="function"?fet:Zoe;class xet{enqueueTask(e){const{queue:s,requestFlush:n}=this;s.length||(n(),this.flushing=!0),s[s.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const s=this.index;if(this.index++,e[s].call(),this.index>this.capacity){for(let n=0,a=e.length-this.index;n<a;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=pet(this.flush),this.requestErrorThrow=Zoe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class get{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,s){this.onError=e,this.release=s,this.task=null}}class vet{create(e){const s=this.freeTasks,n=s.length?s.pop():new get(this.onError,a=>s[s.length]=a);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Joe=new xet,yet=new vet(Joe.registerPendingError);function bet(t){Joe.enqueueTask(yet.create(t))}const gD="dnd-core/ADD_SOURCE",vD="dnd-core/ADD_TARGET",yD="dnd-core/REMOVE_SOURCE",I3="dnd-core/REMOVE_TARGET";function wet(t){return{type:gD,payload:{sourceId:t}}}function jet(t){return{type:vD,payload:{targetId:t}}}function Net(t){return{type:yD,payload:{sourceId:t}}}function Cet(t){return{type:I3,payload:{targetId:t}}}function ket(t){Bs(typeof t.canDrag=="function","Expected canDrag to be a function."),Bs(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Bs(typeof t.endDrag=="function","Expected endDrag to be a function.")}function _et(t){Bs(typeof t.canDrop=="function","Expected canDrop to be a function."),Bs(typeof t.hover=="function","Expected hover to be a function."),Bs(typeof t.drop=="function","Expected beginDrag to be a function.")}function qO(t,e){if(e&&Array.isArray(t)){t.forEach(s=>qO(s,!1));return}Bs(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var jd;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(jd||(jd={}));let Aet=0;function Eet(){return Aet++}function Pet(t){const e=Eet().toString();switch(t){case jd.SOURCE:return`S${e}`;case jd.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function qG(t){switch(t[0]){case"S":return jd.SOURCE;case"T":return jd.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function HG(t,e){const s=t.entries();let n=!1;do{const{done:a,value:[,i]}=s.next();if(i===e)return!0;n=!!a}while(!n);return!1}class Tet{addSource(e,s){qO(e),ket(s);const n=this.addHandler(jd.SOURCE,e,s);return this.store.dispatch(wet(n)),n}addTarget(e,s){qO(e,!0),_et(s);const n=this.addHandler(jd.TARGET,e,s);return this.store.dispatch(jet(n)),n}containsHandler(e){return HG(this.dragSources,e)||HG(this.dropTargets,e)}getSource(e,s=!1){return Bs(this.isSourceId(e),"Expected a valid source ID."),s&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Bs(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Bs(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Bs(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return qG(e)===jd.SOURCE}isTargetId(e){return qG(e)===jd.TARGET}removeSource(e){Bs(this.getSource(e),"Expected an existing source."),this.store.dispatch(Net(e)),bet(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Bs(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Cet(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const s=this.getSource(e);Bs(s,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=s}unpinSource(){Bs(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,s,n){const a=Pet(e);return this.types.set(a,s),e===jd.SOURCE?this.dragSources.set(a,n):e===jd.TARGET&&this.dropTargets.set(a,n),a}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Oet=(t,e)=>t===e;function Iet(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function $et(t,e,s=Oet){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!s(t[n],e[n]))return!1;return!0}function Det(t=sb,e){switch(e.type){case P3:break;case gD:case vD:case I3:case yD:return sb;case E3:case pD:case O3:case T3:default:return xD}const{targetIds:s=[],prevTargetIds:n=[]}=e.payload,a=MJe(s,n);if(!(a.length>0||!$et(s,n)))return sb;const o=n[n.length-1],l=s[s.length-1];return o!==l&&(o&&a.push(o),l&&a.push(l)),a}function Ret(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Met(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable}))),n.forEach(function(a){Ret(t,a,s[a])})}return t}const GG={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Let(t=GG,e){const{payload:s}=e;switch(e.type){case fD:case E3:return{initialSourceClientOffset:s.sourceClientOffset,initialClientOffset:s.clientOffset,clientOffset:s.clientOffset};case P3:return Iet(t.clientOffset,s.clientOffset)?t:Met({},t,{clientOffset:s.clientOffset});case O3:case T3:return GG;default:return t}}function Fet(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function v0(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable}))),n.forEach(function(a){Fet(t,a,s[a])})}return t}const Bet={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Uet(t=Bet,e){const{payload:s}=e;switch(e.type){case E3:return v0({},t,{itemType:s.itemType,item:s.item,sourceId:s.sourceId,isSourcePublic:s.isSourcePublic,dropResult:null,didDrop:!1});case pD:return v0({},t,{isSourcePublic:!0});case P3:return v0({},t,{targetIds:s.targetIds});case I3:return t.targetIds.indexOf(s.targetId)===-1?t:v0({},t,{targetIds:RJe(t.targetIds,s.targetId)});case T3:return v0({},t,{dropResult:s.dropResult,didDrop:!0,targetIds:[]});case O3:return v0({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function zet(t=0,e){switch(e.type){case gD:case vD:return t+1;case yD:case I3:return t-1;default:return t}}function Vet(t=0){return t+1}function Wet(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function qet(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable}))),n.forEach(function(a){Wet(t,a,s[a])})}return t}function Het(t={},e){return{dirtyHandlerIds:Det(t.dirtyHandlerIds,{type:e.type,payload:qet({},e.payload,{prevTargetIds:DJe(t,"dragOperation.targetIds",[])})}),dragOffset:Let(t.dragOffset,e),refCount:zet(t.refCount,e),dragOperation:Uet(t.dragOperation,e),stateId:Vet(t.stateId)}}function Get(t,e=void 0,s={},n=!1){const a=Yet(n),i=new met(a,new Tet(a)),o=new oet(a,i),l=t(o,e,s);return o.receiveBackend(l),o}function Yet(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Yoe(Het,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Ket(t,e){if(t==null)return{};var s=Xet(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Xet(t,e){if(t==null)return{};var s={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}let YG=0;const nN=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Qet=j.memo(function(e){var{children:s}=e,n=Ket(e,["children"]);const[a,i]=Zet(n);return j.useEffect(()=>{if(i){const o=ele();return++YG,()=>{--YG===0&&(o[nN]=null)}}},[]),r.jsx(Goe.Provider,{value:a,children:s})});function Zet(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Jet(t.backend,t.context,t.options,t.debugMode),s=!t.context;return[e,s]}function Jet(t,e=ele(),s,n){const a=e;return a[nN]||(a[nN]={dragDropManager:Get(t,e,s,n)}),a[nN]}function ele(){return typeof global<"u"?global:window}var NE,KG;function ett(){return KG||(KG=1,NE=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,a,i;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(a=n;a--!==0;)if(!t(e[a],s[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(s).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(s,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),NE}var ttt=ett();const rtt=cn(ttt),ug=typeof window<"u"?j.useLayoutEffect:j.useEffect;function stt(t,e,s){const[n,a]=j.useState(()=>e(t)),i=j.useCallback(()=>{const o=e(t);rtt(n,o)||(a(o),s&&s())},[n,t,s]);return ug(i),[n,i]}function ntt(t,e,s){const[n,a]=stt(t,e,s);return ug(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(a,{handlerIds:[o]})},[t,a]),n}function tle(t,e,s){return ntt(e,t||(()=>({})),()=>s.reconnect())}function rle(t,e){const s=[];return typeof t!="function"&&s.push(t),j.useMemo(()=>typeof t=="function"?t():t,s)}function att(t){return j.useMemo(()=>t.hooks.dragSource(),[t])}function itt(t){return j.useMemo(()=>t.hooks.dragPreview(),[t])}let SE=!1,CE=!1;class ott{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Bs(!SE,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return SE=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{SE=!1}}isDragging(){if(!this.sourceId)return!1;Bs(!CE,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return CE=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{CE=!1}}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,s){return this.internalMonitor.isOverTarget(e,s)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let kE=!1;class ltt{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,s){return this.internalMonitor.subscribeToStateChange(e,s)}canDrop(){if(!this.targetId)return!1;Bs(!kE,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kE=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kE=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ctt(t,e,s){const n=s.getRegistry(),a=n.addTarget(t,e);return[a,()=>n.removeTarget(a)]}function dtt(t,e,s){const n=s.getRegistry(),a=n.addSource(t,e);return[a,()=>n.removeSource(a)]}function HO(t,e,s,n){let a;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<i.length;c++){const d=i[c];if(!l(d))return!1;const u=t[d],h=e[d];if(a=void 0,a===!1||a===void 0&&u!==h)return!1}return!0}function GO(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function utt(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function htt(t){return(e=null,s=null)=>{if(!j.isValidElement(e)){const i=e;return t(i,s),i}const n=e;return utt(n),mtt(n,s?i=>t(i,s):t)}}function sle(t){const e={};return Object.keys(t).forEach(s=>{const n=t[s];if(s.endsWith("Ref"))e[s]=t[s];else{const a=htt(n);e[s]=()=>a}}),e}function XG(t,e){typeof t=="function"?t(e):t.current=e}function mtt(t,e){const s=t.ref;return Bs(typeof s!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),s?j.cloneElement(t,{ref:n=>{XG(s,n),XG(e,n)}}):j.cloneElement(t,{ref:e})}class ftt{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,s=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return s&&this.disconnectDragSource(),this.handlerId?e?(s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),s):(this.lastConnectedDragSource=e,s):s}reconnectDragPreview(e=!1){const s=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!s){this.lastConnectedDragPreview=s;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=s,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,s,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!HO(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!HO(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=sle({dragSource:(s,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,GO(s)?this.dragSourceRef=s:this.dragSourceNode=s,this.reconnectDragSource()},dragPreview:(s,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,GO(s)?this.dragPreviewRef=s:this.dragPreviewNode=s,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ptt{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const s=this.dropTarget;if(this.handlerId){if(!s){this.lastConnectedDropTarget=s;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=s,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,s,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!HO(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=sle({dropTarget:(s,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,GO(s)?this.dropTargetRef=s:this.dropTargetNode=s,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function py(){const{dragDropManager:t}=j.useContext(Goe);return Bs(t!=null,"Expected drag drop context"),t}function xtt(t,e){const s=py(),n=j.useMemo(()=>new ftt(s.getBackend()),[s]);return ug(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),ug(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function gtt(){const t=py();return j.useMemo(()=>new ott(t),[t])}class vtt{beginDrag(){const e=this.spec,s=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(s):n={},n??null}canDrag(){const e=this.spec,s=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(s):!0}isDragging(e,s){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):s===e.getSourceId()}endDrag(){const e=this.spec,s=this.monitor,n=this.connector,{end:a}=e;a&&a(s.getItem(),s),n.reconnect()}constructor(e,s,n){this.spec=e,this.monitor=s,this.connector=n}}function ytt(t,e,s){const n=j.useMemo(()=>new vtt(t,e,s),[e,s]);return j.useEffect(()=>{n.spec=t},[t]),n}function btt(t){return j.useMemo(()=>{const e=t.type;return Bs(e!=null,"spec.type must be defined"),e},[t])}function wtt(t,e,s){const n=py(),a=ytt(t,e,s),i=btt(t);ug(function(){if(i!=null){const[l,c]=dtt(i,a,n);return e.receiveHandlerId(l),s.receiveHandlerId(l),c}},[n,e,s,a,i])}function jtt(t,e){const s=rle(t);Bs(!s.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=gtt(),a=xtt(s.options,s.previewOptions);return wtt(s,n,a),[tle(s.collect,n,a),att(a),itt(a)]}function Ntt(t){return j.useMemo(()=>t.hooks.dropTarget(),[t])}function Stt(t){const e=py(),s=j.useMemo(()=>new ptt(e.getBackend()),[e]);return ug(()=>(s.dropTargetOptions=t||null,s.reconnect(),()=>s.disconnectDropTarget()),[t]),s}function Ctt(){const t=py();return j.useMemo(()=>new ltt(t),[t])}function ktt(t){const{accept:e}=t;return j.useMemo(()=>(Bs(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class _tt{canDrop(){const e=this.spec,s=this.monitor;return e.canDrop?e.canDrop(s.getItem(),s):!0}hover(){const e=this.spec,s=this.monitor;e.hover&&e.hover(s.getItem(),s)}drop(){const e=this.spec,s=this.monitor;if(e.drop)return e.drop(s.getItem(),s)}constructor(e,s){this.spec=e,this.monitor=s}}function Att(t,e){const s=j.useMemo(()=>new _tt(t,e),[e]);return j.useEffect(()=>{s.spec=t},[t]),s}function Ett(t,e,s){const n=py(),a=Att(t,e),i=ktt(t);ug(function(){const[l,c]=ctt(i,a,n);return e.receiveHandlerId(l),s.receiveHandlerId(l),c},[n,e,a,s,i.map(o=>o.toString()).join("|")])}function Ptt(t,e){const s=rle(t),n=Ctt(),a=Stt(s.options);return Ett(s,n,a),[tle(s.collect,n,a),Ntt(a)]}function nle(t){let e=null;return()=>(e==null&&(e=t()),e)}function Ttt(t,e){return t.filter(s=>s!==e)}function Ott(t,e){const s=new Set,n=i=>s.add(i);t.forEach(n),e.forEach(n);const a=[];return s.forEach(i=>a.push(i)),a}class Itt{enter(e){const s=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(e));return this.entered=Ott(this.entered.filter(n),[e]),s===0&&this.entered.length>0}leave(e){const s=this.entered.length;return this.entered=Ttt(this.entered.filter(this.isNodeInDocument),e),s>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class $tt{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const s={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(s[n]={value:a(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,s)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,s){return s===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ale="__NATIVE_FILE__",ile="__NATIVE_URL__",ole="__NATIVE_TEXT__",lle="__NATIVE_HTML__",QG=Object.freeze(Object.defineProperty({__proto__:null,FILE:ale,HTML:lle,TEXT:ole,URL:ile},Symbol.toStringTag,{value:"Module"}));function _E(t,e,s){const n=e.reduce((a,i)=>a||t.getData(i),"");return n??s}const YO={[ale]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[lle]:{exposeProperties:{html:(t,e)=>_E(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[ile]:{exposeProperties:{urls:(t,e)=>_E(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[ole]:{exposeProperties:{text:(t,e)=>_E(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Dtt(t,e){const s=YO[t];if(!s)throw new Error(`native type ${t} has no configuration`);const n=new $tt(s);return n.loadDataTransfer(e),n}function AE(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(YO).filter(s=>{const n=YO[s];return n?.matchesTypes?n.matchesTypes.some(a=>e.indexOf(a)>-1):!1})[0]||null}const Rtt=nle(()=>/firefox/i.test(navigator.userAgent)),cle=nle(()=>!!window.safari);class ZG{interpolate(e){const{xs:s,ys:n,c1s:a,c2s:i,c3s:o}=this;let l=s.length-1;if(e===s[l])return n[l];let c=0,d=o.length-1,u;for(;c<=d;){u=Math.floor(.5*(c+d));const f=s[u];if(f<e)c=u+1;else if(f>e)d=u-1;else return n[u]}l=Math.max(0,d);const h=e-s[l],m=h*h;return n[l]+a[l]*h+i[l]*m+o[l]*h*m}constructor(e,s){const{length:n}=e,a=[];for(let f=0;f<n;f++)a.push(f);a.sort((f,v)=>e[f]<e[v]?-1:1);const i=[],o=[];let l,c;for(let f=0;f<n-1;f++)l=e[f+1]-e[f],c=s[f+1]-s[f],i.push(l),o.push(c/l);const d=[o[0]];for(let f=0;f<i.length-1;f++){const v=o[f],x=o[f+1];if(v*x<=0)d.push(0);else{l=i[f];const g=i[f+1],b=l+g;d.push(3*b/((b+g)/v+(b+l)/x))}}d.push(o[o.length-1]);const u=[],h=[];let m;for(let f=0;f<d.length-1;f++){m=o[f];const v=d[f],x=1/i[f],g=v+d[f+1]-m-m;u.push((m-v-g)*x),h.push(g*x*x)}this.xs=e,this.ys=s,this.c1s=d,this.c2s=u,this.c3s=h}}const Mtt=1;function dle(t){const e=t.nodeType===Mtt?t:t.parentElement;if(!e)return null;const{top:s,left:n}=e.getBoundingClientRect();return{x:n,y:s}}function $j(t){return{x:t.clientX,y:t.clientY}}function Ltt(t){var e;return t.nodeName==="IMG"&&(Rtt()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Ftt(t,e,s,n){let a=t?e.width:s,i=t?e.height:n;return cle()&&t&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Btt(t,e,s,n,a){const i=Ltt(e),l=dle(i?t:e),c={x:s.x-l.x,y:s.y-l.y},{offsetWidth:d,offsetHeight:u}=t,{anchorX:h,anchorY:m}=n,{dragPreviewWidth:f,dragPreviewHeight:v}=Ftt(i,e,d,u),x=()=>{let A=new ZG([0,.5,1],[c.y,c.y/u*v,c.y+v-u]).interpolate(m);return cle()&&i&&(A+=(window.devicePixelRatio-1)*v),A},g=()=>new ZG([0,.5,1],[c.x,c.x/d*f,c.x+f-d]).interpolate(h),{offsetX:b,offsetY:w}=a,N=b===0||b,C=w===0||w;return{x:N?b:g(),y:C?w:x()}}class Utt{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,s){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=s}}function ztt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function JG(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable}))),n.forEach(function(a){ztt(t,a,s[a])})}return t}class Vtt{profile(){var e,s;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((s=this.dragOverTargetIds)===null||s===void 0?void 0:s.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var s;(s=this.window)===null||s===void 0||s.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,s,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,s),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,s,n){this.sourceNodes.set(e,s),this.sourceNodeOptions.set(e,n);const a=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return s.setAttribute("draggable","true"),s.addEventListener("dragstart",a),s.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),s.removeEventListener("dragstart",a),s.removeEventListener("selectstart",i),s.setAttribute("draggable","false")}}connectDropTarget(e,s){const n=o=>this.handleDragEnter(o,e),a=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return s.addEventListener("dragenter",n),s.addEventListener("dragover",a),s.addEventListener("drop",i),()=>{s.removeEventListener("dragenter",n),s.removeEventListener("dragover",a),s.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),s=this.sourceNodeOptions.get(e);return JG({dropEffect:this.altKeyPressed?"copy":"move"},s||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),s=this.sourcePreviewNodeOptions.get(e);return JG({anchorX:.5,anchorY:.5,captureDraggingState:!1},s||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(QG).some(s=>QG[s]===e)}beginDragNativeItem(e,s){this.clearCurrentDragSourceNode(),this.currentNativeSource=Dtt(e,s),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const s=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},s)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,s){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(s))}handleDragEnter(e,s){this.dragEnterTargetIds.unshift(s)}handleDragOver(e,s){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(s)}handleDrop(e,s){this.dropTargetIds.unshift(s)}constructor(e,s,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&dle(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=$j(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=a,c=AE(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const u=this.monitor.getSourceId(),h=this.sourceNodes.get(u),m=this.sourcePreviewNodes.get(u)||h;if(m){const{anchorX:f,anchorY:v,offsetX:x,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),N=Btt(h,m,o,{anchorX:f,anchorY:v},{offsetX:x,offsetY:g});l.setDragImage(m,N.x,N.y)}}try{l?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=AE(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:$j(a)}),i.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=$j(a),this.scheduleHover(i),(i||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else AE(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:$j(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Utt(s,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Itt(this.isNodeInDocument)}}const Wtt=function(e,s,n){return new Vtt(e,s,n)},qtt=({feature:t,index:e,moveFeature:s,onRemove:n,isDark:a,textClass:i,borderColor:o,secondaryBgClass:l})=>{const[{isDragging:c},d]=jtt({type:"FEATURE",item:{index:e},collect:v=>({isDragging:v.isDragging()})}),[{isOver:u},h]=Ptt({accept:"FEATURE",hover:v=>{v.index!==e&&(s(v.index,e),v.index=e)},collect:v=>({isOver:v.isOver()})}),m=c?.5:1,f=u?1.02:1;return r.jsxs("div",{ref:v=>d(h(v)),style:{opacity:m,transform:`scale(${f})`,transition:"transform 0.2s"},className:`p-3 rounded-lg border ${o} ${l} flex items-center justify-between cursor-move hover:${a?"bg-[#1a1a1a]":"bg-gray-100"} transition-colors`,children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[r.jsx(RY,{className:`w-4 h-4 ${a?"text-gray-500":"text-gray-400"}`}),r.jsx(en,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:i,children:t})]}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>n(e),className:"text-red-600 hover:bg-red-600/10",children:r.jsx(ks,{className:"w-4 h-4"})})]})},Htt=({isOpen:t,onClose:e,plan:s,onSave:n})=>{const{theme:a}=Nr(),i=a==="dark",o=i?"bg-[#161616]":"bg-white",l=i?"text-white":"text-gray-900",c=i?"text-gray-400":"text-gray-600",d=i?"border-[#333]":"border-gray-200",u=i?"bg-[#0a0a0a]":"bg-gray-50",[h,m]=j.useState({name:s?.name||"",price:s?.price||0,subscribers:s?.subscribers||0,color:s?.color||"#4f46e5",isFeatured:s?.isFeatured||!1,discountType:s?.discount?.type||"none",discountValue:s?.discount?.value||0}),[f,v]=j.useState(s?.features||[]),[x,g]=j.useState(""),b=(A,k)=>{m(E=>({...E,[A]:k}))},w=()=>{x.trim()&&(v(A=>[...A,x.trim()]),g(""))},N=A=>{v(k=>k.filter((E,O)=>O!==A))},C=j.useCallback((A,k)=>{v(E=>{const O=[...E],$=O[A];return O.splice(A,1),O.splice(k,0,$),O})},[]),S=()=>{if(!h.name.trim()){re.error("Plan name is required");return}if(h.price<=0){re.error("Price must be greater than 0");return}if(f.length===0){re.error("At least one feature is required");return}if(h.discountType!=="none"&&h.discountValue<=0){re.error("Discount value must be greater than 0");return}if(h.discountType==="percentage"&&h.discountValue>100){re.error("Percentage discount cannot exceed 100%");return}const A={...s,name:h.name,price:h.price,subscribers:h.subscribers,color:h.color,isFeatured:h.isFeatured,discount:h.discountType!=="none"?{type:h.discountType,value:h.discountValue}:null,features:f};n&&n(A),re.success(`Plan "${h.name}" has been updated`),e()};return s?r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`${o} ${l} border ${d} max-w-2xl max-h-[90vh] overflow-y-auto`,children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(lc,{className:"w-5 h-5",style:{color:h.color}}),r.jsxs("span",{className:l,children:["Manage ",s.name," Plan"]})]}),r.jsx(wr,{className:c,children:"Update plan details, pricing, and features"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${d} ${u}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Xr,{className:`w-4 h-4 ${c}`}),r.jsx("span",{className:`text-sm ${c}`,children:"Active Subscribers"})]}),r.jsx("div",{className:`text-2xl ${l}`,children:h.subscribers})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${d} ${u}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(In,{className:`w-4 h-4 ${c}`}),r.jsx("span",{className:`text-sm ${c}`,children:"Monthly Revenue"})]}),r.jsxs("div",{className:`text-2xl ${l}`,children:["$",(h.price*h.subscribers).toLocaleString()]})]})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Plan Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Plan Name"}),r.jsx(de,{value:h.name,onChange:A=>b("name",A.target.value),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"Basic"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Monthly Price ($)"}),r.jsx(de,{type:"number",min:"0",value:h.price,onChange:A=>b("price",parseFloat(A.target.value)),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"99"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Brand Color"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{type:"color",value:h.color,onChange:A=>b("color",A.target.value),className:"h-12 w-20"}),r.jsx(de,{type:"text",value:h.color,onChange:A=>b("color",A.target.value),className:"h-12 flex-1 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:"#4f46e5"})]})]})]})]})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Plan Options"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${d} ${u}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${i?"bg-[#1a1a1a]":"bg-white"}`,children:r.jsx(Es,{className:`w-5 h-5 ${h.isFeatured?"text-yellow-500 fill-yellow-500":c}`})}),r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Featured / Most Popular"}),r.jsx("p",{className:`text-sm mt-0.5 ${c}`,children:"Display a featured badge to highlight this plan"})]})]}),r.jsx(Rt,{checked:h.isFeatured,onCheckedChange:A=>b("isFeatured",A)})]})}),r.jsxs("div",{className:`p-4 rounded-lg border ${d} ${u} space-y-4`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${i?"bg-[#1a1a1a]":"bg-white"}`,children:r.jsx(dN,{className:`w-5 h-5 ${h.discountType!=="none"?"text-green-500":c}`})}),r.jsxs("div",{children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Discount Options"}),r.jsx("p",{className:`text-sm mt-0.5 ${c}`,children:"Apply a discount to this plan"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:"Discount Type"}),r.jsxs(sr,{value:h.discountType,onValueChange:A=>b("discountType",A),children:[r.jsx(ar,{className:`h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] ${l}`,children:r.jsx(nr,{placeholder:"Select discount type"})}),r.jsxs(ir,{className:`${i?"bg-[#161616] border-[#333]":"bg-white border-gray-200"}`,children:[r.jsx(Ae,{value:"none",className:i?"text-white hover:bg-[#1a1a1a]":"",children:"No Discount"}),r.jsx(Ae,{value:"percentage",className:i?"text-white hover:bg-[#1a1a1a]":"",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mu,{className:"w-4 h-4"}),"Percentage Off"]})}),r.jsx(Ae,{value:"fixed",className:i?"text-white hover:bg-[#1a1a1a]":"",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(In,{className:"w-4 h-4"}),"Fixed Amount Off"]})})]})]})]}),h.discountType!=="none"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{className:"text-gray-700 dark:text-gray-300",children:h.discountType==="percentage"?"Discount Percentage":"Discount Amount ($)"}),r.jsx(de,{type:"number",min:"0",max:h.discountType==="percentage"?"100":void 0,value:h.discountValue,onChange:A=>b("discountValue",parseFloat(A.target.value)||0),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500",placeholder:h.discountType==="percentage"?"20":"50"})]})]}),h.discountType!=="none"&&h.discountValue>0&&r.jsx("div",{className:`p-3 rounded-lg ${i?"bg-green-950/20 border border-green-800":"bg-green-50 border border-green-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx("span",{className:`text-sm ${i?"text-green-400":"text-green-700"}`,children:"Discounted Price:"})}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-sm line-through ${c}`,children:["$",h.price,"/month"]}),r.jsxs("div",{className:`text-lg font-semibold ${i?"text-green-400":"text-green-700"}`,children:["$",h.discountType==="percentage"?(h.price*(1-h.discountValue/100)).toFixed(2):(h.price-h.discountValue).toFixed(2),"/month"]}),r.jsxs("div",{className:`text-xs ${i?"text-green-500":"text-green-600"}`,children:["Save $",h.discountType==="percentage"?(h.price*h.discountValue/100).toFixed(2):h.discountValue.toFixed(2),"/month"]})]})]})})]})]})]}),r.jsx(Ze,{className:d}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-4 ${c}`,children:"Plan Features"}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx(de,{value:x,onChange:A=>g(A.target.value),onKeyPress:A=>A.key==="Enter"&&w(),className:"h-12 bg-gray-100 dark:bg-[#0a0a0a] border-gray-300 dark:border-[#333] placeholder:text-gray-500 flex-1",placeholder:"Add a new feature..."}),r.jsxs(W,{onClick:w,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Add"]})]}),r.jsx("div",{className:"space-y-2",children:f.length===0?r.jsxs("div",{className:`p-8 rounded-lg border ${d} ${u} text-center`,children:[r.jsx("p",{className:c,children:"No features added yet"}),r.jsx("p",{className:`text-sm mt-2 ${c}`,children:"Add features above to get started"})]}):r.jsx(Qet,{backend:Wtt,children:r.jsx("div",{className:"space-y-2",children:f.map((A,k)=>r.jsx(qtt,{feature:A,index:k,moveFeature:C,onRemove:N,isDark:i,textClass:l,borderColor:d,secondaryBgClass:u},`${A}-${k}`))})})})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${d} ${u}`,children:[r.jsx("h4",{className:`text-sm uppercase tracking-wider mb-3 ${c}`,children:"Preview"}),r.jsxs("div",{className:`p-6 rounded-lg border ${d} bg-white dark:bg-[#161616] relative`,children:[h.isFeatured&&r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:r.jsxs(De,{className:"bg-gradient-to-r from-yellow-500 to-amber-500 text-white border-0 px-3 py-1 shadow-lg",children:[r.jsx(Es,{className:"w-3 h-3 mr-1 fill-white"}),"Most Popular"]})}),r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:`${l} flex items-center gap-2`,children:h.name||"Plan Name"}),r.jsx("div",{className:"mt-2",children:h.discountType!=="none"&&h.discountValue>0?r.jsxs("div",{children:[r.jsxs("div",{className:`text-sm line-through ${c}`,children:["$",h.price,"/month"]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("span",{className:`text-3xl ${l}`,children:["$",h.discountType==="percentage"?(h.price*(1-h.discountValue/100)).toFixed(2):(h.price-h.discountValue).toFixed(2)]}),r.jsx("span",{className:c,children:"/month"})]}),r.jsxs("div",{className:`text-xs mt-1 ${i?"text-green-400":"text-green-600"}`,children:["Save ",h.discountType==="percentage"?`${h.discountValue}%`:`$${h.discountValue}`]})]}):r.jsxs("div",{children:[r.jsxs("span",{className:`text-3xl ${l}`,children:["$",h.price]}),r.jsx("span",{className:c,children:"/month"})]})})]}),r.jsx(lc,{className:"w-6 h-6",style:{color:h.color}})]}),r.jsxs("div",{className:"space-y-2",children:[f.slice(0,3).map((A,k)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:`text-sm ${c}`,children:A})]},k)),f.length>3&&r.jsxs("p",{className:`text-sm ${c} pl-6`,children:["+ ",f.length-3," more features"]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-[#333]",children:[r.jsxs(W,{variant:"outline",onClick:e,className:`border ${d}`,children:[r.jsx(Is,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs(W,{onClick:S,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}):null};function Gtt({isOpen:t,onClose:e}){const{theme:s}=Nr(),n=s==="dark",a=n?"bg-[#161616]":"bg-white",i=n?"text-white":"text-gray-900",o=n?"text-[#a3a3a3]":"text-gray-600",l=n?"border-[#2a2a2a]":"border-gray-200",c=n?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[d,u]=j.useState("platform"),[h,m]=j.useState({systemName:"BookingTMS Admin Portal",systemEmail:"admin@bookingtms.com",supportEmail:"support@bookingtms.com",timezone:"America/New_York",language:"en",dateFormat:"MM/DD/YYYY"}),[f,v]=j.useState({emailAlerts:!0,smsAlerts:!1,systemUpdates:!0,securityAlerts:!0,newOrganizations:!0,planChanges:!0,paymentAlerts:!0}),[x,g]=j.useState({requireTwoFactor:!1,enforceStrongPasswords:!0,sessionTimeout:"30",maxLoginAttempts:"5",autoLockoutDuration:"15"}),[b,w]=j.useState({apiEnabled:!0,webhooksEnabled:!0,rateLimitPerHour:"1000",allowCors:!0}),N=()=>{localStorage.setItem("systemAdminPlatformSettings",JSON.stringify(h)),re.success("Platform settings saved successfully")},C=()=>{localStorage.setItem("systemAdminNotificationSettings",JSON.stringify(f)),re.success("Notification settings saved successfully")},S=()=>{localStorage.setItem("systemAdminSecuritySettings",JSON.stringify(x)),re.success("Security settings saved successfully")},A=()=>{localStorage.setItem("systemAdminApiSettings",JSON.stringify(b)),re.success("API settings saved successfully")};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`max-w-4xl max-h-[90vh] overflow-y-auto ${a} ${l}`,children:[r.jsx(br,{className:"pb-4",children:r.jsxs(pr,{className:`flex items-center gap-3 text-xl ${i}`,children:[r.jsx(ul,{className:"w-6 h-6"}),"System Admin Settings"]})}),r.jsxs(wn,{value:d,onValueChange:u,className:"w-full",children:[r.jsxs(kn,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-2 h-auto p-1.5 mb-6",children:[r.jsxs(Tt,{value:"platform",className:"flex items-center justify-center gap-2 h-12 px-4 text-sm data-[state=active]:bg-[#4f46e5] data-[state=active]:text-white",children:[r.jsx(ml,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Platform"})]}),r.jsxs(Tt,{value:"notifications",className:"flex items-center justify-center gap-2 h-12 px-4 text-sm data-[state=active]:bg-[#4f46e5] data-[state=active]:text-white",children:[r.jsx(pi,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),r.jsxs(Tt,{value:"security",className:"flex items-center justify-center gap-2 h-12 px-4 text-sm data-[state=active]:bg-[#4f46e5] data-[state=active]:text-white",children:[r.jsx(zs,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Security"})]}),r.jsxs(Tt,{value:"api",className:"flex items-center justify-center gap-2 h-12 px-4 text-sm data-[state=active]:bg-[#4f46e5] data-[state=active]:text-white",children:[r.jsx(ic,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"API"})]})]}),r.jsx(Bt,{value:"platform",className:"space-y-6 mt-0",children:r.jsxs(he,{className:`${a} border ${l} shadow-sm`,children:[r.jsxs(Ke,{className:"pb-6",children:[r.jsx(Xe,{className:`${i} text-lg`,children:"Platform Configuration"}),r.jsx(Ft,{className:`${o} text-sm mt-2`,children:"Configure global platform settings"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"System Name"}),r.jsx(de,{value:h.systemName,onChange:k=>m({...h,systemName:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"System Email"}),r.jsx(de,{type:"email",value:h.systemEmail,onChange:k=>m({...h,systemEmail:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"Support Email"}),r.jsx(de,{type:"email",value:h.supportEmail,onChange:k=>m({...h,supportEmail:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"Timezone"}),r.jsxs(sr,{value:h.timezone,onValueChange:k=>m({...h,timezone:k}),children:[r.jsx(ar,{className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"America/New_York",children:"Eastern Time (ET)"}),r.jsx(Ae,{value:"America/Chicago",children:"Central Time (CT)"}),r.jsx(Ae,{value:"America/Denver",children:"Mountain Time (MT)"}),r.jsx(Ae,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),r.jsx(Ae,{value:"UTC",children:"UTC"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"Language"}),r.jsxs(sr,{value:h.language,onValueChange:k=>m({...h,language:k}),children:[r.jsx(ar,{className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"en",children:"English"}),r.jsx(Ae,{value:"es",children:"Spanish"}),r.jsx(Ae,{value:"fr",children:"French"}),r.jsx(Ae,{value:"de",children:"German"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:"Date Format"}),r.jsxs(sr,{value:h.dateFormat,onValueChange:k=>m({...h,dateFormat:k}),children:[r.jsx(ar,{className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"}`,children:r.jsx(nr,{})}),r.jsxs(ir,{children:[r.jsx(Ae,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx(Ae,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx(Ae,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[r.jsx(W,{variant:"outline",onClick:e,className:`h-11 px-6 ${n?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":""}`,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:"#4f46e5"},className:"h-11 px-6 text-white hover:bg-[#4338ca]",onClick:N,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"notifications",className:"space-y-6 mt-0",children:r.jsxs(he,{className:`${a} border ${l} shadow-sm`,children:[r.jsxs(Ke,{className:"pb-6",children:[r.jsx(Xe,{className:`${i} text-lg`,children:"Notification Preferences"}),r.jsx(Ft,{className:`${o} text-sm mt-2`,children:"Configure system-wide notification settings"})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx(Ds,{className:`w-4 h-4 flex-shrink-0 ${o}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"Email Alerts"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Receive email notifications for system events"})]}),r.jsx(Rt,{checked:f.emailAlerts,onCheckedChange:k=>v({...f,emailAlerts:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx(Xf,{className:`w-4 h-4 flex-shrink-0 ${o}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"SMS Alerts"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Receive SMS notifications for critical events"})]}),r.jsx(Rt,{checked:f.smsAlerts,onCheckedChange:k=>v({...f,smsAlerts:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"System Updates"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Get notified about platform updates"})]}),r.jsx(Rt,{checked:f.systemUpdates,onCheckedChange:k=>v({...f,systemUpdates:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"Security Alerts"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Critical security notifications"})]}),r.jsx(Rt,{checked:f.securityAlerts,onCheckedChange:k=>v({...f,securityAlerts:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"New Organizations"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Alert when new organizations sign up"})]}),r.jsx(Rt,{checked:f.newOrganizations,onCheckedChange:k=>v({...f,newOrganizations:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"Plan Changes"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Notify on subscription plan changes"})]}),r.jsx(Rt,{checked:f.planChanges,onCheckedChange:k=>v({...f,planChanges:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"Payment Alerts"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Alert for payment issues or successes"})]}),r.jsx(Rt,{checked:f.paymentAlerts,onCheckedChange:k=>v({...f,paymentAlerts:k}),className:"flex-shrink-0"})]})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[r.jsx(W,{variant:"outline",onClick:e,className:`h-11 px-6 ${n?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":""}`,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:"#4f46e5"},className:"h-11 px-6 text-white hover:bg-[#4338ca]",onClick:C,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"security",className:"space-y-6 mt-0",children:r.jsxs(he,{className:`${a} border ${l} shadow-sm`,children:[r.jsxs(Ke,{className:"pb-6",children:[r.jsx(Xe,{className:`${i} text-lg`,children:"Security Configuration"}),r.jsx(Ft,{className:`${o} text-sm mt-2`,children:"Configure platform security settings"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx(zs,{className:`w-4 h-4 flex-shrink-0 ${n?"text-emerald-400":"text-green-600"}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"Require Two-Factor Authentication"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Enforce 2FA for all system administrators"})]}),r.jsx(Rt,{checked:x.requireTwoFactor,onCheckedChange:k=>g({...x,requireTwoFactor:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx($d,{className:`w-4 h-4 flex-shrink-0 ${o}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"Enforce Strong Passwords"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Require complex passwords for all users"})]}),r.jsx(Rt,{checked:x.enforceStrongPasswords,onCheckedChange:k=>g({...x,enforceStrongPasswords:k}),className:"flex-shrink-0"})]})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:["Session Timeout",r.jsx("span",{className:`${o} ml-1 font-normal`,children:"(minutes)"})]}),r.jsx(de,{type:"number",value:x.sessionTimeout,onChange:k=>g({...x,sessionTimeout:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:["Max Login",r.jsx("span",{className:`${o} ml-1 font-normal`,children:"Attempts"})]}),r.jsx(de,{type:"number",value:x.maxLoginAttempts,onChange:k=>g({...x,maxLoginAttempts:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:["Auto-Lockout",r.jsx("span",{className:`${o} ml-1 font-normal`,children:"(minutes)"})]}),r.jsx(de,{type:"number",value:x.autoLockoutDuration,onChange:k=>g({...x,autoLockoutDuration:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500`})]})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[r.jsx(W,{variant:"outline",onClick:e,className:`h-11 px-6 ${n?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":""}`,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:"#4f46e5"},className:"h-11 px-6 text-white hover:bg-[#4338ca]",onClick:S,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})}),r.jsx(Bt,{value:"api",className:"space-y-6 mt-0",children:r.jsxs(he,{className:`${a} border ${l} shadow-sm`,children:[r.jsxs(Ke,{className:"pb-6",children:[r.jsx(Xe,{className:`${i} text-lg`,children:"API Configuration"}),r.jsx(Ft,{className:`${o} text-sm mt-2`,children:"Configure API and integration settings"})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx(ic,{className:`w-4 h-4 flex-shrink-0 ${o}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"API Enabled"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Enable API access for integrations"})]}),r.jsx(Rt,{checked:b.apiEnabled,onCheckedChange:k=>w({...b,apiEnabled:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[r.jsx(Kf,{className:`w-4 h-4 flex-shrink-0 ${o}`}),r.jsx("p",{className:`text-sm font-medium ${i}`,children:"Webhooks Enabled"})]}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Allow webhook notifications"})]}),r.jsx(Rt,{checked:b.webhooksEnabled,onCheckedChange:k=>w({...b,webhooksEnabled:k}),className:"flex-shrink-0"})]}),r.jsxs("div",{className:`flex items-start sm:items-center justify-between p-5 rounded-lg border ${l} ${c} transition-colors gap-4`,children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${i} mb-1.5`,children:"Allow CORS"}),r.jsx("p",{className:`text-sm ${o} leading-relaxed`,children:"Enable Cross-Origin Resource Sharing"})]}),r.jsx(Rt,{checked:b.allowCors,onCheckedChange:k=>w({...b,allowCors:k}),className:"flex-shrink-0"})]})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(X,{className:`${n?"text-white":"text-gray-700"} text-sm font-medium`,children:["Rate Limit",r.jsx("span",{className:`${o} ml-1 font-normal`,children:"(requests per hour)"})]}),r.jsx(de,{type:"number",value:b.rateLimitPerHour,onChange:k=>w({...b,rateLimitPerHour:k.target.value}),className:`h-11 ${n?"bg-[#1e1e1e] border-[#2a2a2a] text-white":"bg-gray-100 border-gray-300"} placeholder:text-gray-500 max-w-xs`})]}),r.jsx(Ze,{className:`my-6 ${l}`}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[r.jsx(W,{variant:"outline",onClick:e,className:`h-11 px-6 ${n?"border-[#2a2a2a] text-white hover:bg-[#1e1e1e]":""}`,children:"Cancel"}),r.jsxs(W,{style:{backgroundColor:"#4f46e5"},className:"h-11 px-6 text-white hover:bg-[#4338ca]",onClick:A,children:[r.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]})]})})}const Ytt=[{id:1,title:"New Organization Signup",message:"Cipher City Games has joined the platform",type:"organization",priority:"high",read:!1,timestamp:new Date(Date.now()-1e3*60*15)},{id:2,title:"Plan Upgrade",message:"Riddle Me This upgraded to Pro plan",type:"billing",priority:"medium",read:!1,timestamp:new Date(Date.now()-1e3*60*60)},{id:3,title:"Security Alert",message:"Failed login attempt detected for admin@bookingtms.com",type:"security",priority:"high",read:!1,timestamp:new Date(Date.now()-1e3*60*120)},{id:4,title:"Payment Received",message:"Monthly payment received from Mystery Manor Games",type:"billing",priority:"low",read:!0,timestamp:new Date(Date.now()-1e3*60*60*5)},{id:5,title:"New Feature Request",message:"Organization requested custom branding feature",type:"system",priority:"medium",read:!0,timestamp:new Date(Date.now()-1e3*60*60*24)}];function Ktt({isOpen:t,onClose:e}){const{theme:s}=Nr(),n=s==="dark",a=n?"bg-[#161616]":"bg-white",i=n?"text-white":"text-gray-900",o=n?"text-[#a3a3a3]":"text-gray-600",l=n?"border-[#2a2a2a]":"border-gray-200",c=n?"hover:bg-[#1e1e1e]":"hover:bg-gray-50",[d,u]=j.useState("all"),[h,m]=j.useState(""),[f,v]=j.useState(Ytt),x=E=>{switch(E){case"organization":return r.jsx(Na,{className:"w-5 h-5"});case"billing":return r.jsx(In,{className:"w-5 h-5"});case"security":return r.jsx(zs,{className:"w-5 h-5"});case"system":return r.jsx(Ws,{className:"w-5 h-5"});default:return r.jsx(pi,{className:"w-5 h-5"})}},g=(E,O)=>{if(O==="high")return n?"text-red-400":"text-red-600";switch(E){case"organization":return n?"text-blue-400":"text-blue-600";case"billing":return n?"text-green-400":"text-green-600";case"security":return n?"text-orange-400":"text-orange-600";case"system":return n?"text-purple-400":"text-purple-600";default:return n?"text-gray-400":"text-gray-600"}},b=E=>{const O={high:n?"bg-red-500/20 text-red-400 border-red-500/30":"bg-red-100 text-red-700 border-red-200",medium:n?"bg-orange-500/20 text-orange-400 border-orange-500/30":"bg-orange-100 text-orange-700 border-orange-200",low:n?"bg-gray-500/20 text-gray-400 border-gray-500/30":"bg-gray-100 text-gray-700 border-gray-200"};return O[E]||O.low},w=E=>{const $=new Date().getTime()-E.getTime(),T=Math.floor($/6e4),I=Math.floor(T/60),L=Math.floor(I/24);return T<60?`${T}m ago`:I<24?`${I}h ago`:L<7?`${L}d ago`:E.toLocaleDateString()},N=f.filter(E=>{const O=E.title.toLowerCase().includes(h.toLowerCase())||E.message.toLowerCase().includes(h.toLowerCase()),$=d==="all"||d==="unread"&&!E.read||d==="important"&&E.priority==="high";return O&&$}),C=f.filter(E=>!E.read).length,S=E=>{v(f.map(O=>O.id===E?{...O,read:!0}:O))},A=E=>{v(f.filter(O=>O.id!==E))},k=()=>{v(f.map(E=>({...E,read:!0})))};return r.jsx(mr,{open:t,onOpenChange:e,children:r.jsxs(fr,{className:`max-w-3xl max-h-[90vh] overflow-hidden flex flex-col ${a} ${l}`,children:[r.jsx(br,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(pr,{className:`flex items-center gap-2 ${i}`,children:[r.jsx(pi,{className:"w-5 h-5"}),"Notifications",C>0&&r.jsx(De,{className:"bg-red-500 text-white border-0",children:C})]}),r.jsxs(W,{variant:"ghost",size:"sm",onClick:k,disabled:C===0,children:[r.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Mark all as read"]})]})}),r.jsx("div",{className:"px-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${o}`}),r.jsx(de,{type:"text",placeholder:"Search notifications...",value:h,onChange:E=>m(E.target.value),className:`pl-10 h-10 ${n?"bg-[#161616] border-[#333]":"bg-gray-100 border-gray-300"}`})]})}),r.jsx(wn,{value:d,onValueChange:u,className:"px-6",children:r.jsxs(kn,{className:"grid w-full grid-cols-3",children:[r.jsxs(Tt,{value:"all",children:["All (",f.length,")"]}),r.jsxs(Tt,{value:"unread",children:["Unread (",C,")"]}),r.jsxs(Tt,{value:"important",children:["Important (",f.filter(E=>E.priority==="high").length,")"]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 space-y-2",children:N.length===0?r.jsxs("div",{className:`text-center py-12 ${o}`,children:[r.jsx(pi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No notifications found"})]}):N.map(E=>r.jsx(he,{className:`${a} border ${l} ${E.read?"":n?"bg-[#1a1a1a]":"bg-blue-50/50"} ${c} transition-colors cursor-pointer`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`flex-shrink-0 ${g(E.type,E.priority)}`,children:x(E.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h4",{className:`${i} ${E.read?"":"font-semibold"}`,children:E.title}),r.jsx(De,{className:`${b(E.priority)} text-xs`,children:E.priority})]}),r.jsx("p",{className:`text-sm ${o} mb-2`,children:E.message}),r.jsx("p",{className:`text-xs ${o}`,children:w(E.timestamp)})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[!E.read&&r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:O=>{O.stopPropagation(),S(E.id)},title:"Mark as read",children:r.jsx(Sr,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600",onClick:O=>{O.stopPropagation(),A(E.id)},title:"Delete",children:r.jsx(ks,{className:"w-4 h-4"})})]})]})})},E.id))}),r.jsx("div",{className:`px-6 py-4 border-t ${l} flex justify-end`,children:r.jsx(W,{variant:"outline",onClick:e,children:"Close"})})]})})}const Xtt=[{id:"multi-tenant",name:"Multi-Tenant",description:"Enable multi-tenant organization support",enabled:!0,category:"Platform"},{id:"advanced-analytics",name:"Advanced Analytics",description:"Enable advanced analytics and reporting",enabled:!0,category:"Analytics"},{id:"ai-agents",name:"AI Agents",description:"Enable AI-powered booking assistants",enabled:!0,category:"AI"},{id:"custom-branding",name:"Custom Branding",description:"Allow organizations to customize branding",enabled:!1,category:"Customization"},{id:"white-label",name:"White Label",description:"Full white-label solution",enabled:!1,category:"Enterprise"},{id:"api-access",name:"API Access",description:"Enable REST API for integrations",enabled:!0,category:"Integration"},{id:"sso",name:"Single Sign-On",description:"SAML/OAuth SSO support",enabled:!1,category:"Security"},{id:"email",name:"Email",description:"Core email messaging features",enabled:!0,category:"Communication"},{id:"marketing",name:"Marketing",description:"Enable marketing tools and automations",enabled:!0,category:"Marketing"},{id:"campaigns",name:"Campaigns",description:"Run marketing and engagement campaigns",enabled:!0,category:"Marketing"},{id:"phone-call-agent",name:"Phone Call Agent",description:"Enable phone-based agent assistance",enabled:!0,category:"Agents"},{id:"booking-agent",name:"Booking Agent",description:"Enable agent-assisted booking flows",enabled:!0,category:"Agents"},{id:"booking-widgets",name:"Booking Widgets",description:"Embed booking widgets across channels",enabled:!0,category:"Core"},{id:"inbox",name:"Inbox",description:"Unified customer communication inbox",enabled:!0,category:"Communication"},{id:"staffs",name:"Staffs",description:"Manage staff accounts and permissions",enabled:!0,category:"Operations"},{id:"reports",name:"Reports",description:"Access reporting and insights",enabled:!0,category:"Analytics"},{id:"media",name:"Media",description:"Manage media assets and galleries",enabled:!0,category:"Content"},{id:"waivers",name:"Waivers",description:"Enable digital waiver collection",enabled:!0,category:"Operations"},{id:"payments-history",name:"Payments & History",description:"View and manage payments and history",enabled:!0,category:"Billing"},{id:"promotions",name:"Promotions",description:"Create and manage promotions and offers",enabled:!0,category:"Marketing"},{id:"gift-cards",name:"Gift Cards",description:"Sell and manage gift cards",enabled:!0,category:"Billing"},{id:"venues",name:"Venues",description:"Manage venues and locations",enabled:!0,category:"Core"},{id:"events",name:"Events",description:"Manage events and experiences",enabled:!0,category:"Core"}],ule=j.createContext(void 0),Qtt=({children:t})=>{const[e,s]=j.useState(Xtt),n=i=>{s(o=>o.map(l=>l.id===i?{...l,enabled:!l.enabled}:l))},a=i=>e.find(l=>l.id===i)?.enabled??!1;return r.jsx(ule.Provider,{value:{featureFlags:e,toggleFeature:n,isFeatureEnabled:a},children:t})},Ztt=()=>{const t=j.useContext(ule);if(!t)throw new Error("useFeatureFlags must be used within a FeatureFlagProvider");return t},Jtt="http://localhost:3001";class ert{baseUrl;constructor(){this.baseUrl=`${Jtt}/api/stripe-connect`}async request(e,s){try{const n=await fetch(`${this.baseUrl}${e}`,{...s,headers:{"Content-Type":"application/json",...s?.headers}}),a=await n.json();if(!n.ok)throw new Error(a.error||`HTTP ${n.status}: Request failed`);return a}catch(n){const a=n?.message||"Request failed";throw console.warn(`[StripeConnect] ${e} failed:`,a),new Error(a)}}async createAccount(e){return this.request("/accounts",{method:"POST",body:JSON.stringify(e)})}async listAccounts(e){const s=e?.limit?`?limit=${e.limit}`:"";return this.request(`/accounts${s}`)}async getAccount(e){return this.request(`/accounts/${e}`)}async updateAccount(e,s){return this.request(`/accounts/${e}`,{method:"PUT",body:JSON.stringify(s)})}async deleteAccount(e){return this.request(`/accounts/${e}`,{method:"DELETE"})}async createAccountLink(e){return this.request("/account-links",{method:"POST",body:JSON.stringify(e)})}async createAccountSession(e){return this.request("/account-sessions",{method:"POST",body:JSON.stringify({accountId:e})})}async getBalance(e){return this.request(`/accounts/${e}/balance`)}async createPayout(e){const{accountId:s,...n}=e;return this.request(`/accounts/${s}/payouts`,{method:"POST",body:JSON.stringify(n)})}async listPayouts(e){const{accountId:s,...n}=e,a=new URLSearchParams(n).toString();return this.request(`/accounts/${s}/payouts${a?`?${a}`:""}`)}async updatePayoutSchedule(e){const{accountId:s,...n}=e;return this.request(`/accounts/${s}/payout-schedule`,{method:"PUT",body:JSON.stringify(n)})}async listCharges(e){const{accountId:s,...n}=e,a=new URLSearchParams(n).toString();return this.request(`/accounts/${s}/charges${a?`?${a}`:""}`)}async listBalanceTransactions(e){const{accountId:s,...n}=e,a=new URLSearchParams(n).toString();return this.request(`/accounts/${s}/balance-transactions${a?`?${a}`:""}`)}async listDisputes(e){const{accountId:s,...n}=e,a=new URLSearchParams(n).toString();return this.request(`/accounts/${s}/disputes${a?`?${a}`:""}`)}async getDispute(e){return this.request(`/accounts/${e.accountId}/disputes/${e.disputeId}`)}async updateDispute(e){const{accountId:s,disputeId:n,...a}=e;return this.request(`/accounts/${s}/disputes/${n}`,{method:"PUT",body:JSON.stringify(a)})}async listSubscriptions(e){const{accountId:s,...n}=e,a=new URLSearchParams(n).toString();return this.request(`/accounts/${s}/subscriptions${a?`?${a}`:""}`)}async createSubscription(e){const{accountId:s,...n}=e;return this.request(`/accounts/${s}/subscriptions`,{method:"POST",body:JSON.stringify(n)})}async createTransfer(e){return this.request("/transfers",{method:"POST",body:JSON.stringify(e)})}async listApplicationFees(e){const s=e?`?${new URLSearchParams(e).toString()}`:"";return this.request(`/application-fees${s}`)}async getAccountLoginLink(e){return this.request(`/accounts/${e}/login-link`,{method:"POST"})}}const gh=new ert,trt=()=>{const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-gray-400":"text-gray-600",a=e?"border-[#333]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#0a0a0a]":"bg-gray-50",[l,c]=j.useState(""),[d,u]=j.useState("all"),[h,m]=j.useState(!0),[f,v]=j.useState(null),[x,g]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(null),[S,A]=j.useState([]),[k,E]=j.useState({}),[O,$]=j.useState([]),[T,I]=j.useState([]),L=j.useMemo(()=>{const q=Date.now(),U=[{id:"acct_demo001",type:"express",email:"demo@escapehq.com",country:"US",charges_enabled:!0,payouts_enabled:!0,details_submitted:!0,created:Math.floor(q/1e3)-86400,business_profile:{name:"Escape HQ Demo",url:"https://demo.escapehq.com"},requirements:{currently_due:[]},metadata:{business_name:"Escape HQ Demo"},default_currency:"usd"},{id:"acct_demo002",type:"express",email:"events@mazeescape.io",country:"US",charges_enabled:!1,payouts_enabled:!1,details_submitted:!1,created:Math.floor(q/1e3)-172800,business_profile:{name:"Maze Escape Labs",url:"https://mazeescape.io"},requirements:{currently_due:["business_profile.support_address"]},metadata:{business_name:"Maze Escape Labs"},default_currency:"usd"}],Z={acct_demo001:{available:[{amount:452500,currency:"usd"}],pending:[{amount:128e3,currency:"usd"}]},acct_demo002:{available:[{amount:0,currency:"usd"}],pending:[{amount:32500,currency:"usd"}]}},K=[{id:"po_demo001",amount:325e3,arrival_date:Math.floor(q/1e3)-72e3,created:Math.floor(q/1e3)-75e3,currency:"usd",description:"Weekly payout",status:"paid",type:"bank_account"}],se=[{id:"dp_demo001",amount:12500,currency:"usd",created:Math.floor(q/1e3)-48e3,reason:"product_not_received",status:"needs_response",charge:"ch_demo001"}];return{demoAccounts:U,demoBalances:Z,demoPayouts:K,demoDisputes:se}},[]),z=q=>{const U=q??"Backend API is not reachable. Showing sample data.";g(!0),C(U),v(null),A(L.demoAccounts),E(L.demoBalances),$(L.demoPayouts),I(L.demoDisputes);const Z=new Date().toLocaleString();w(Z),m(!1),x||re.info("Stripe Connect demo mode enabled",{description:U})};j.useEffect(()=>{(async()=>{try{const U=await fetch("http://localhost:3001/health",{method:"GET",signal:AbortSignal.timeout(2e3)});U.ok?M():(console.warn("Backend health check failed"),z(`Backend responded with HTTP ${U.status}`))}catch{console.warn("Backend not available, falling back to demo data"),z("Backend server is not available. Please start the backend server to manage Stripe Connect accounts.")}})()},[]);const M=async()=>{try{m(!0),v(null),g(!1);const q=new AbortController,U=setTimeout(()=>q.abort(),5e3),Z=await gh.listAccounts({limit:100});clearTimeout(U);const K=Z.accounts,se={},ne=[],ie=[];await Promise.all(K.map(async be=>{try{const ue=await gh.getBalance(be.id);se[be.id]=ue.balance;const oe=await gh.listPayouts({accountId:be.id,limit:5});ne.push(...oe.payouts);const pe=await gh.listDisputes({accountId:be.id,limit:10});ie.push(...pe.disputes)}catch{console.warn(`Could not fetch data for account ${be.id}`)}})),A(K),E(se),$(ne.slice(0,10)),I(ie.slice(0,10))}catch(q){const U=q?.name==="AbortError"?"Request timeout - backend server may not be running":q?.message||"Failed to connect to backend server";console.warn("[StripeConnectAdminPanel] Falling back to demo data:",U),z(U)}finally{m(!1)}},V=q=>{const U=k[q];return!U||!U.available||U.available.length===0?0:U.available[0].amount/100},B=q=>q.charges_enabled&&q.payouts_enabled?"active":q.details_submitted?"pending":"restricted",F=[{id:"we_1234",url:window.location.origin+"/api/webhooks/stripe",status:"enabled",events:["payment_intent.succeeded","payout.paid","account.updated","charge.dispute.created"],lastEvent:new Date().toISOString()}],J=[...O.slice(0,3).map(q=>({id:q.id,account:S.find(U=>U.id===q.id)?.email||"Unknown",type:"payout",amount:q.amount/100,status:q.status,date:new Date(q.created*1e3).toISOString().split("T")[0]})),...T.slice(0,2).map(q=>({id:q.id,account:"Account",type:"dispute",amount:q.amount/100,status:q.status,date:new Date(q.created*1e3).toISOString().split("T")[0]}))].slice(0,5),ee=S.filter(q=>{const U=B(q);return((q.email||"").toLowerCase().includes(l.toLowerCase())||q.id.toLowerCase().includes(l.toLowerCase()))&&(d==="all"||U===d)});return h?r.jsx(he,{className:`${i} border ${a}`,children:r.jsxs(_e,{className:"p-8 text-center",children:[r.jsx(Ln,{className:`w-8 h-8 ${n} animate-spin mx-auto mb-4`}),r.jsx("p",{className:s,children:"Loading Stripe Connect accounts..."})]})}):f?r.jsx(he,{className:`${i} border ${a}`,children:r.jsxs(_e,{className:"p-8",children:[r.jsx(Nu,{className:"w-8 h-8 text-amber-500 mx-auto mb-4"}),r.jsx("p",{className:`${s} text-center mb-4 font-semibold`,children:"Backend Server Required"}),r.jsx("p",{className:`text-sm ${n} text-center mb-4 max-w-2xl mx-auto`,children:f}),r.jsxs("div",{className:`p-4 rounded-lg ${o} text-left max-w-2xl mx-auto mb-4`,children:[r.jsx("p",{className:`text-sm font-semibold ${s} mb-2`,children:"To use Stripe Connect features:"}),r.jsxs("ol",{className:`text-xs ${n} space-y-1 list-decimal list-inside`,children:[r.jsxs("li",{children:["Install backend dependencies: ",r.jsx("code",{className:"bg-black/20 px-1 rounded",children:"./install-stripe-connect.sh"})]}),r.jsxs("li",{children:["Configure environment variables in ",r.jsx("code",{className:"bg-black/20 px-1 rounded",children:".env.backend"})]}),r.jsxs("li",{children:["Start backend server: ",r.jsx("code",{className:"bg-black/20 px-1 rounded",children:"cd src/backend && npm run dev"})]}),r.jsx("li",{children:"Refresh this page"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsxs(W,{onClick:M,className:"flex gap-2",variant:"outline",children:[r.jsx(Ln,{className:"w-4 h-4"}),"Retry Connection"]}),r.jsx(W,{asChild:!0,variant:"default",children:r.jsxs("a",{href:"/STRIPE_CONNECT_SETUP_GUIDE.md",target:"_blank",className:"flex gap-2",children:[r.jsx(tn,{className:"w-4 h-4"}),"Setup Guide"]})})]})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(he,{className:`${i} border ${a}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n} mb-1`,children:"Connected Accounts"}),r.jsx("p",{className:`text-2xl font-bold ${s}`,children:S.length})]}),r.jsx(Xr,{className:"w-8 h-8 text-indigo-500"})]})})}),r.jsx(he,{className:`${i} border ${a}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n} mb-1`,children:"Total Balance"}),r.jsxs("p",{className:`text-2xl font-bold ${s}`,children:["$",S.reduce((q,U)=>q+V(U.id),0).toLocaleString()]})]}),r.jsx(In,{className:"w-8 h-8 text-emerald-500"})]})})}),r.jsx(he,{className:`${i} border ${a}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n} mb-1`,children:"Active Disputes"}),r.jsx("p",{className:`text-2xl font-bold ${s}`,children:S.reduce((q,U)=>q+U.disputes,0)})]}),r.jsx(Nu,{className:"w-8 h-8 text-amber-500"})]})})}),r.jsx(he,{className:`${i} border ${a}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n} mb-1`,children:"Pending Payouts"}),r.jsx("p",{className:`text-2xl font-bold ${s}`,children:S.reduce((q,U)=>q+U.pendingPayouts,0)})]}),r.jsx(jr,{className:"w-8 h-8 text-blue-500"})]})})})]}),r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-lg ${s}`,children:"Connected Account Onboarding"}),r.jsx("p",{className:`text-sm mt-1 ${n}`,children:"OAuth flows, account links, and verification management"})]}),r.jsxs(W,{size:"sm",className:"gap-2",children:[r.jsx(FE,{className:"w-4 h-4"}),"Start Onboarding"]})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Tf,{className:"w-4 h-4 text-emerald-500"}),r.jsx("span",{className:`text-sm font-medium ${s}`,children:"Express Accounts"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"Stripe-hosted onboarding with reduced compliance burden. Best for quick setup."}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full mt-3",children:"Create Express Account"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($d,{className:"w-4 h-4 text-blue-500"}),r.jsx("span",{className:`text-sm font-medium ${s}`,children:"Custom Accounts"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"Full control over onboarding UI. You handle compliance and verification."}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full mt-3",children:"Create Custom Account"})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ob,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{className:`text-sm font-medium ${s}`,children:"OAuth Flow"})]}),r.jsx("p",{className:`text-xs ${n}`,children:"Let existing Stripe accounts connect via OAuth. Fastest for verified accounts."}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full mt-3",children:"Generate OAuth Link"})]})]}),r.jsxs("div",{className:`p-3 rounded-lg ${o} text-xs ${n}`,children:[r.jsx("strong",{children:"Best Practice:"})," Store account IDs securely in your database, never expose secret keys client-side, and use account sessions for embedded components. Verify accounts meet requirements before enabling payouts."]})]})]}),r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-lg ${s}`,children:"Connected Accounts Management"}),r.jsx("p",{className:`text-sm mt-1 ${n}`,children:"View balances, trigger payouts, manage disputes, and monitor account status"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(Ln,{className:"w-4 h-4"}),"Sync All"]}),r.jsx(W,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:r.jsxs("a",{href:"https://dashboard.stripe.com/connect/accounts/overview",target:"_blank",rel:"noreferrer",children:[r.jsx(tn,{className:"w-4 h-4"}),"Stripe Dashboard"]})})]})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 ${n}`}),r.jsx(de,{placeholder:"Search by name or account ID...",value:l,onChange:q=>c(q.target.value),className:"pl-10"})]}),r.jsx("div",{className:"flex gap-2",children:["all","active","pending","restricted"].map(q=>r.jsx(W,{variant:d===q?"default":"outline",size:"sm",onClick:()=>u(q),className:"capitalize",children:q},q))})]}),r.jsx("div",{className:"space-y-3",children:ee.map(q=>r.jsx("div",{className:`p-4 rounded-lg border ${a} ${e?"hover:bg-[#1a1a1a]":"hover:bg-gray-50"} transition-colors`,children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h4",{className:`font-semibold ${s}`,children:q.name}),r.jsx(De,{variant:"outline",className:q.status==="active"?"border-emerald-500 text-emerald-500":q.status==="pending"?"border-amber-500 text-amber-500":"border-red-500 text-red-500",children:q.status}),q.verification==="verified"&&r.jsx(De,{variant:"outline",className:"border-blue-500 text-blue-500",children:"Verified"})]}),r.jsx("p",{className:`text-xs ${n} mb-3`,children:q.id}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:`text-xs ${n}`,children:"Balance"}),r.jsxs("p",{className:`font-semibold ${s}`,children:["$",V(q.id).toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("span",{className:`text-xs ${n}`,children:"Pending Payouts"}),r.jsx("p",{className:`font-semibold ${s}`,children:k[q.id]?.pending?.[0]?.amount?`$${(k[q.id].pending[0].amount/100).toLocaleString()}`:"$0"})]}),r.jsxs("div",{children:[r.jsx("span",{className:`text-xs ${n}`,children:"Disputes"}),r.jsx("p",{className:`font-semibold ${s}`,children:T.filter(U=>U.charge?.startsWith(q.id)).length||0})]}),r.jsxs("div",{children:[r.jsx("span",{className:`text-xs ${n}`,children:"Last Payout"}),r.jsx("p",{className:`font-semibold ${s}`,children:O.find(U=>U.id.includes(q.id))?new Date(O.find(U=>U.id.includes(q.id)).created*1e3).toLocaleDateString():"Never"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(ys,{className:"w-4 h-4"}),"View Details"]}),r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(In,{className:"w-4 h-4"}),"Trigger Payout"]}),q.disputes>0&&r.jsxs(W,{variant:"outline",size:"sm",className:"gap-2 text-amber-500 border-amber-500",children:[r.jsx(Nu,{className:"w-4 h-4"}),"View Disputes"]})]})]})},q.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-lg ${s}`,children:"Webhook Configuration"}),r.jsx("p",{className:`text-sm mt-1 ${n}`,children:"Real-time event updates for payments, payouts, disputes"})]}),r.jsx(wfe,{className:`w-5 h-5 ${n}`})]})}),r.jsxs(_e,{className:"space-y-4",children:[F.map(q=>r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("code",{className:`text-xs ${s} font-mono`,children:q.url}),r.jsx(De,{variant:"outline",className:"border-emerald-500 text-emerald-500",children:q.status})]}),r.jsxs("p",{className:`text-xs ${n}`,children:["Last event: ",q.lastEvent]})]})}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[q.events.slice(0,3).map(U=>r.jsx(De,{variant:"secondary",className:"text-[10px]",children:U},U)),q.events.length>3&&r.jsxs(De,{variant:"secondary",className:"text-[10px]",children:["+",q.events.length-3," more"]})]})]},q.id)),r.jsx(W,{variant:"outline",size:"sm",className:"w-full",children:"Configure Webhooks"}),r.jsxs("div",{className:`p-3 rounded-lg ${o} text-xs ${n}`,children:[r.jsx("strong",{children:"Events to monitor:"})," payment_intent.succeeded, payout.paid, charge.dispute.created, account.updated, capability.updated"]})]})]}),r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-lg ${s}`,children:"Security & Permissions"}),r.jsx("p",{className:`text-sm mt-1 ${n}`,children:"Role-based access, API key management, audit logs"})]}),r.jsx(Mn,{className:`w-5 h-5 ${n}`})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(en,{className:"w-4 h-4 text-emerald-500"}),r.jsx("span",{className:`text-sm font-medium ${s}`,children:"Security Status"})]}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-3 h-3 text-emerald-500"}),r.jsx("span",{className:s,children:"API keys stored server-side only"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-3 h-3 text-emerald-500"}),r.jsx("span",{className:s,children:"Webhook signatures verified"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-3 h-3 text-emerald-500"}),r.jsx("span",{className:s,children:"Account IDs encrypted at rest"})]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-3 h-3 text-emerald-500"}),r.jsx("span",{className:s,children:"Role-based access control active"})]})]})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Kf,{className:"w-4 h-4 text-blue-500"}),r.jsx("span",{className:`text-sm font-medium ${s}`,children:"Data Management"})]}),r.jsxs("div",{className:"space-y-2 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:n,children:"Stored Account IDs"}),r.jsxs("span",{className:s,children:[S.length," accounts"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:n,children:"API Calls (24h)"}),r.jsx("span",{className:s,children:"1,247 requests"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:n,children:"Webhook Events (24h)"}),r.jsx("span",{className:s,children:"342 events"})]})]})]}),r.jsxs(W,{variant:"outline",size:"sm",className:"w-full gap-2",children:[r.jsx(cl,{className:"w-4 h-4"}),"View Audit Logs"]})]})]})]}),r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:`text-lg ${s}`,children:"Recent Transaction Activity"}),r.jsx("p",{className:`text-sm mt-1 ${n}`,children:"Latest payments, payouts, and disputes across all connected accounts"})]}),r.jsxs(_e,{children:[r.jsx("div",{className:"space-y-2",children:J.map(q=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${o}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${q.type==="payout"?"bg-emerald-500/10":"bg-amber-500/10"}`,children:q.type==="payout"?r.jsx(In,{className:"w-5 h-5 text-emerald-500"}):r.jsx(Nu,{className:"w-5 h-5 text-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${s}`,children:q.account}),r.jsxs("p",{className:`text-xs ${n}`,children:[q.type,"  ",q.id,"  ",q.date]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`text-sm font-semibold ${s}`,children:["$",q.amount.toLocaleString()]}),r.jsx(De,{variant:"outline",className:`text-[10px] ${q.status==="paid"||q.status==="won"?"border-emerald-500 text-emerald-500":"border-amber-500 text-amber-500"}`,children:q.status})]})]},q.id))}),r.jsx(W,{variant:"outline",size:"sm",className:"w-full mt-4",children:"View All Transactions"})]})]}),r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:`text-lg ${s}`,children:"Stripe Connect Resources"})}),r.jsx(_e,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(W,{variant:"outline",size:"sm",className:"justify-start gap-2",asChild:!0,children:r.jsxs("a",{href:"https://docs.stripe.com/connect",target:"_blank",rel:"noreferrer",children:[r.jsx(tn,{className:"w-4 h-4"}),"Connect Overview"]})}),r.jsx(W,{variant:"outline",size:"sm",className:"justify-start gap-2",asChild:!0,children:r.jsxs("a",{href:"https://docs.stripe.com/connect/saas/tasks/app-fees",target:"_blank",rel:"noreferrer",children:[r.jsx(tn,{className:"w-4 h-4"}),"Application Fees Guide"]})}),r.jsx(W,{variant:"outline",size:"sm",className:"justify-start gap-2",asChild:!0,children:r.jsxs("a",{href:"https://docs.stripe.com/connect/webhooks",target:"_blank",rel:"noreferrer",children:[r.jsx(tn,{className:"w-4 h-4"}),"Connect Webhooks"]})}),r.jsx(W,{variant:"outline",size:"sm",className:"justify-start gap-2",asChild:!0,children:r.jsxs("a",{href:"https://docs.stripe.com/api",target:"_blank",rel:"noreferrer",children:[r.jsx(tn,{className:"w-4 h-4"}),"API Reference"]})})]})})]})]})},rrt=({selectedAccount:t,platformMetrics:e,accountMetrics:s})=>{const{theme:n}=Nr(),a=n==="dark",i=a?"text-white":"text-gray-900",o=a?"text-gray-400":"text-gray-600",l=a?"border-[#333]":"border-gray-200",c=a?"bg-[#161616]":"bg-white",d=a?"bg-[#0a0a0a]":"bg-gray-50",u=t?s:e,h={totalRevenue:u?.totalRevenue||0,mrr:u?.mrr||0,activeSubscriptions:u?.activeSubscriptions||u?.active_organizations||0,churnRate:u?.churnRate||2.5,lifetimeValue:u?.lifetimeValue||2400,nextBillingDate:t?"Dec 15, 2024":"N/A"},[m,f]=j.useState({platformMarkupPercent:1.5,flatMarkup:.5,payoutBufferDays:2,autoCapture:!0}),[v,x]=j.useState({}),[g,b]=j.useState(!1),w=j.useMemo(()=>({useGlobal:!0,...m}),[m]),N=t?v[t.id]??w:null,C=(I,L)=>{f(z=>({...z,[I]:L}))},S=I=>{t&&x(L=>({...L,[t.id]:{...L[t.id]??w,...I}}))},A=async()=>{b(!0);try{const I={globalFeeConfig:m,accountFeeOverrides:v,savedAt:new Date().toISOString()};localStorage.setItem("stripeFeesConfig",JSON.stringify(I)),await new Promise(L=>setTimeout(L,500)),re.success("Settings saved successfully",{description:t?`Stripe fee settings updated for ${t.name}`:"Global Stripe fee settings updated",duration:3e3}),console.log("Saved Stripe settings:",I)}catch(I){console.error("Failed to save settings:",I),re.error("Failed to save settings",{description:"Please try again or contact support",duration:3e3})}finally{b(!1)}},k=!!t,E=k?!!t.stripeAccountId:!0,O=k?t.stripeAccountId||"Not connected":"Not configured",$=k?t.stripeAccountId?t.name:"No account linked":"Platform account not configured",T=["Payments","Refund management","Dispute workflows","Capture controls"];return r.jsxs("div",{className:`border-b-2 ${l} pb-6 mb-6`,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h2",{className:`text-lg font-medium ${i}`,children:t?`Payments & Subscriptions - ${t.name}`:"Payments & Subscriptions"}),r.jsx("p",{className:`text-sm mt-1 ${o}`,children:t?"View payment history and subscription details for this account":"Platform-wide payment and subscription overview"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:`text-lg ${i}`,children:"Revenue Overview"}),r.jsx(In,{className:`w-5 h-5 ${o}`})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-sm ${o} mb-1`,children:"Total Revenue"}),r.jsxs("div",{className:`text-2xl font-bold ${i}`,children:["$",h.totalRevenue.toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(Wn,{className:"w-3 h-3 text-green-500"}),r.jsx("span",{className:"text-xs text-green-500",children:"+12.5% vs last month"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-3 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-xs ${o} mb-1`,children:"MRR"}),r.jsxs("div",{className:`text-lg font-semibold ${i}`,children:["$",h.mrr.toLocaleString()]})]}),r.jsxs("div",{className:`p-3 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-xs ${o} mb-1`,children:"LTV"}),r.jsxs("div",{className:`text-lg font-semibold ${i}`,children:["$",h.lifetimeValue.toLocaleString()]})]})]})]})]}),r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:`text-lg ${i}`,children:"Subscription Status"}),r.jsx(rn,{className:`w-5 h-5 ${o}`})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`p-4 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-sm ${o} mb-1`,children:"Active Subscriptions"}),r.jsx("div",{className:`text-2xl font-bold ${i}`,children:h.activeSubscriptions}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:E?r.jsxs(r.Fragment,{children:[r.jsx(en,{className:"w-3 h-3 text-green-500"}),r.jsx("span",{className:"text-xs text-green-500",children:"All payments up to date"})]}):r.jsxs(r.Fragment,{children:[r.jsx(hs,{className:"w-3 h-3 text-orange-500"}),r.jsx("span",{className:"text-xs text-orange-500",children:"No Stripe account connected"})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-3 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-xs ${o} mb-1`,children:"Churn Rate"}),r.jsxs("div",{className:`text-lg font-semibold ${i}`,children:[h.churnRate,"%"]})]}),t&&r.jsxs("div",{className:`p-3 rounded-lg ${d}`,children:[r.jsx("div",{className:`text-xs ${o} mb-1`,children:"Next Billing"}),r.jsx("div",{className:`text-xs font-semibold ${i}`,children:h.nextBillingDate})]})]})]})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 xl:grid-cols-3 gap-6",children:[r.jsxs(he,{className:`${c} border ${l} xl:col-span-2`,children:[r.jsxs(Ke,{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-lg ${i}`,children:"Stripe Connect Setup"}),r.jsxs("p",{className:`text-sm mt-1 ${o}`,children:["Manage embedded components, onboarding, and delegated access for ",t?t.name:"all accounts","."]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(W,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:r.jsxs("a",{href:"https://docs.stripe.com/connect/connect-embedded-components/quickstart",target:"_blank",rel:"noreferrer",children:[r.jsx(ob,{className:"w-4 h-4"})," Quickstart"]})}),r.jsx(W,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:r.jsxs("a",{href:"https://dashboard.stripe.com/settings/connect",target:"_blank",rel:"noreferrer",children:[r.jsx(ul,{className:"w-4 h-4"})," Stripe Dashboard"]})})]})]}),r.jsxs(_e,{className:"space-y-6",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${l} ${d}`,children:[r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[E?r.jsx(Tf,{className:"w-4 h-4 text-emerald-500"}):r.jsx(hs,{className:"w-4 h-4 text-orange-500"}),r.jsx("span",{className:`text-sm font-medium ${i}`,children:t?"Connected account status":"Platform connection status"})]}),r.jsx("p",{className:`text-xs mt-1 ${o}`,children:E?t?"Syncing payouts, refunds, and disputes for this account.":"Controls defaults for every connected organization.":"No Stripe account connected. Connect an account to enable payments."})]}),r.jsx(De,{variant:"outline",className:E?"px-3 py-1 border-emerald-500 text-emerald-500 bg-emerald-50 dark:bg-emerald-950":"px-3 py-1 border-orange-500 text-orange-600 bg-orange-50 dark:bg-orange-950",children:E?t?"Connected":"Live":"Not Connected"})]}),r.jsxs("dl",{className:`mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm ${i}`,children:[r.jsxs("div",{children:[r.jsx("dt",{className:`text-xs uppercase ${o}`,children:"Account ID"}),r.jsx("dd",{className:"font-semibold","data-component-name":"PaymentsSubscriptionsSection",children:O})]}),r.jsxs("div",{children:[r.jsx("dt",{className:`text-xs uppercase ${o}`,children:"Account name"}),r.jsx("dd",{className:"font-semibold",children:$})]}),r.jsxs("div",{children:[r.jsx("dt",{className:`text-xs uppercase ${o}`,children:"Environment"}),r.jsxs("dd",{className:"font-semibold flex items-center gap-2",children:[r.jsx(ml,{className:"w-4 h-4"})," Test & Live"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`p-4 rounded-lg border ${l}`,children:[r.jsx("p",{className:`text-xs uppercase tracking-wide ${o} mb-2`,children:"Account session"}),r.jsxs("p",{className:`text-sm ${i}`,children:["Use ",r.jsx("code",{className:"px-1 py-0.5 rounded bg-black/10 dark:bg-white/10 text-xs",children:"stripe.accountSessions.create"})," per login to delegate dashboard access."]}),r.jsx("ul",{className:"mt-3 space-y-2 text-xs text-[#a0aec0] dark:text-gray-400",children:T.map(I=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-3 h-3 text-indigo-500"})," ",I]},I))})]}),r.jsxs("div",{className:`p-4 rounded-lg border ${l}`,children:[r.jsx("p",{className:`text-xs uppercase tracking-wide ${o} mb-2`,children:"Client integration"}),r.jsxs("p",{className:`text-sm ${i}`,children:["Initialize ",r.jsx("strong",{children:"loadConnectAndInitialize"})," with our publishable key, pass `fetchClientSecret`, and mount ",r.jsx("em",{children:"ConnectPayments"})," or other components."]}),r.jsxs("div",{className:"mt-3 flex gap-3 text-xs",children:[r.jsx(De,{variant:"secondary",className:"gap-1",children:"npm install @stripe/connect-js"}),r.jsx(De,{variant:"secondary",className:"gap-1",children:"Supports React & Web"})]})]})]})]})]}),r.jsxs(he,{className:`${c} border ${l}`,children:[r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:`text-lg ${i}`,children:"Stripe Fees & Markups"}),r.jsx(mu,{className:`w-5 h-5 ${o}`})]}),r.jsxs("p",{className:`text-sm mt-2 ${o}`,children:["Configure how much we charge on top of Stripe processing fees",t?" for this account":" globally","."]})]}),r.jsxs(_e,{className:"space-y-4",children:[t&&N&&r.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2 text-sm",style:{borderColor:l},children:[r.jsx("span",{className:i,children:"Use global defaults"}),r.jsx(Rt,{checked:N.useGlobal,onCheckedChange:I=>S(I?{useGlobal:!0}:{useGlobal:!1,...m})})]}),(!t||N&&!N.useGlobal)&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-xs uppercase tracking-wide flex items-center justify-between",children:[r.jsx("span",{className:o,children:"Platform markup (%)"}),r.jsxs("span",{className:i,children:[t?N?.platformMarkupPercent:m.platformMarkupPercent,"%"]})]}),r.jsx(de,{type:"number",min:"0",step:"0.1",value:t?N?.platformMarkupPercent:m.platformMarkupPercent,onChange:I=>t?S({platformMarkupPercent:Number(I.target.value)}):C("platformMarkupPercent",Number(I.target.value))}),r.jsxs("label",{className:"text-xs uppercase tracking-wide flex items-center justify-between",children:[r.jsx("span",{className:o,children:"Flat markup (USD)"}),r.jsxs("span",{className:i,children:["$",t?N?.flatMarkup:m.flatMarkup]})]}),r.jsx(de,{type:"number",min:"0",step:"0.05",value:t?N?.flatMarkup:m.flatMarkup,onChange:I=>t?S({flatMarkup:Number(I.target.value)}):C("flatMarkup",Number(I.target.value))}),r.jsxs("label",{className:"text-xs uppercase tracking-wide flex items-center justify-between",children:[r.jsx("span",{className:o,children:"Payout buffer (days)"}),r.jsxs("span",{className:i,children:[t?N?.payoutBufferDays:m.payoutBufferDays," days"]})]}),r.jsx(de,{type:"number",min:"0",step:"1",value:t?N?.payoutBufferDays:m.payoutBufferDays,onChange:I=>t?S({payoutBufferDays:Number(I.target.value)}):C("payoutBufferDays",Number(I.target.value))}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2 text-sm",style:{borderColor:l},children:[r.jsx("span",{className:i,children:"Auto-capture payments"}),r.jsx(Rt,{checked:t?N?.autoCapture??!0:m.autoCapture,onCheckedChange:I=>t?S({autoCapture:I}):C("autoCapture",I)})]})]}),t&&N?.useGlobal&&r.jsxs("p",{className:`text-xs ${o}`,children:["This account inherits ",r.jsxs("strong",{children:[m.platformMarkupPercent,"% + $",m.flatMarkup.toFixed(2)]})," markup and ",m.payoutBufferDays,"-day payout buffer from the platform defaults."]}),r.jsx(W,{className:"w-full",variant:"default",onClick:A,disabled:g,children:g?"Saving...":"Save Stripe settings"})]})]})]}),!t&&r.jsx("div",{className:"mt-6",children:r.jsx(trt,{})})]})},srt=({account:t,metrics:e})=>{const{theme:s}=Nr(),n=s==="dark",a=n?"text-white":"text-gray-900",i=n?"text-gray-400":"text-gray-600",o=n?"border-[#333]":"border-gray-200",l={totalBookings:e?.total_bookings||245,totalSales:e?.totalRevenue||18750,totalClicks:e?.totalClicks||3240,addToCart:e?.addToCart||892,checkoutConversions:e?.checkoutConversions||215,conversionRate:(215/892*100).toFixed(1)};return r.jsxs("div",{className:`border-b-2 ${o} pb-6 mb-6`,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h2",{className:`text-lg font-medium ${a}`,children:"Account Performance Metrics"}),r.jsxs("p",{className:`text-sm mt-1 ${i}`,children:["Performance analytics for ",t.name]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[r.jsx(tc,{title:"Total Bookings",value:l.totalBookings,icon:qY,trend:{value:18,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Total Sales",value:`$${l.totalSales.toLocaleString()}`,icon:In,trend:{value:22,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Clicks",value:l.totalClicks.toLocaleString(),icon:ume,trend:{value:15,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Add to Cart",value:l.addToCart,icon:ri,trend:{value:12,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Checkouts",value:l.checkoutConversions,icon:rn,trend:{value:8,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Conversion Rate",value:`${l.conversionRate}%`,icon:Wn,trend:{value:5,isPositive:!0},period:"this month"})]})]})},nrt=({userId:t,userEmail:e,organizationId:s,onAccountCreated:n,onClose:a})=>{const{theme:i}=Nr(),[o,l]=j.useState(null),[c,d]=j.useState({}),u=i==="dark",h=u?"bg-gray-800":"bg-white",m=u?"text-gray-100":"text-gray-900",f=u?"text-gray-400":"text-gray-600",v=u?"border-gray-700":"border-gray-200",x=async()=>{if(!e){re.error("User email is required");return}l("express");try{const N=await gh.createAccount({type:"express",email:e,country:"US",businessType:"individual",metadata:{user_id:t||"",organization_id:s||"",created_via:"admin_panel"}});re.success("Express account created!",{description:`Account ID: ${N.accountId}`});const C=await gh.createAccountLink({accountId:N.accountId,refreshUrl:window.location.href,returnUrl:window.location.href,type:"account_onboarding"});d(S=>({...S,express:C.url})),n&&n(N.accountId,"express"),re.success("Onboarding link generated!",{description:'Click "Open Onboarding Link" to complete setup',duration:5e3})}catch(N){console.error("Failed to create Express account:",N),re.error("Failed to create Express account",{description:N?.message||"Unknown error occurred"})}finally{l(null)}},g=async()=>{if(!e){re.error("User email is required");return}l("custom");try{const N=await gh.createAccount({type:"custom",email:e,country:"US",businessType:"company",metadata:{user_id:t||"",organization_id:s||"",created_via:"admin_panel"}});re.success("Custom account created!",{description:`Account ID: ${N.accountId}`});const C=await gh.createAccountSession(N.accountId);d(S=>({...S,custom:C.clientSecret})),n&&n(N.accountId,"custom"),re.success("Account session created!",{description:"Use the client secret to embed onboarding UI",duration:5e3})}catch(N){console.error("Failed to create Custom account:",N),re.error("Failed to create Custom account",{description:N?.message||"Unknown error occurred"})}finally{l(null)}},b=async()=>{l("oauth");try{const N="ca_YOUR_CLIENT_ID",C=`${window.location.origin}/stripe/oauth/callback`,S=btoa(JSON.stringify({user_id:t||"",organization_id:s||"",email:e||""})),A=`https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${N}&scope=read_write&redirect_uri=${encodeURIComponent(C)}&state=${S}`;d(k=>({...k,oauth:A})),re.success("OAuth link generated!",{description:'Click "Open OAuth Link" to connect existing account',duration:5e3})}catch(N){console.error("Failed to generate OAuth link:",N),re.error("Failed to generate OAuth link",{description:N?.message||"Unknown error occurred"})}finally{l(null)}},w=N=>{window.open(N,"_blank","width=800,height=800")};return r.jsxs(he,{className:`${h} border ${v}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:m,children:"Connected Account Onboarding"}),r.jsx(Ft,{className:f,children:"OAuth flows, account links, and verification management"})]}),r.jsx(W,{onClick:a,variant:"ghost",size:"icon",className:"h-8 w-8",children:""})]})}),r.jsxs(_e,{className:"space-y-4",children:[e&&r.jsxs("div",{className:`p-3 rounded-lg ${u?"bg-gray-700":"bg-gray-50"}`,children:[r.jsx("p",{className:`text-sm ${f}`,children:"Creating account for:"}),r.jsx("p",{className:`font-medium ${m}`,children:e}),t&&r.jsxs("p",{className:`text-xs ${f} mt-1`,children:["User ID: ",t]})]}),r.jsx(he,{className:`${u?"bg-gray-700":"bg-gray-50"} border ${v}`,children:r.jsxs(_e,{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(zs,{className:"w-5 h-5 text-emerald-500 mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-semibold ${m} mb-1`,children:"Express Accounts"}),r.jsx("p",{className:`text-sm ${f}`,children:"Stripe-hosted onboarding with reduced compliance burden. Best for quick setup."})]})]}),r.jsx(W,{onClick:x,disabled:o!==null,className:"w-full",variant:"outline",children:o==="express"?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(FE,{className:"w-4 h-4 mr-2"}),"Create Express Account"]})}),c.express&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-4 h-4 text-emerald-500"}),r.jsx("span",{className:`text-sm ${m}`,children:"Onboarding link ready!"})]}),r.jsxs(W,{onClick:()=>w(c.express),className:"w-full",size:"sm",children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Open Onboarding Link"]})]})]})}),r.jsx(he,{className:`${u?"bg-gray-700":"bg-gray-50"} border ${v}`,children:r.jsxs(_e,{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx($d,{className:"w-5 h-5 text-blue-500 mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-semibold ${m} mb-1`,children:"Custom Accounts"}),r.jsx("p",{className:`text-sm ${f}`,children:"Full control over onboarding UI. You handle compliance and verification."})]})]}),r.jsx(W,{onClick:g,disabled:o!==null,className:"w-full",variant:"outline",children:o==="custom"?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(FE,{className:"w-4 h-4 mr-2"}),"Create Custom Account"]})}),c.custom&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-4 h-4 text-emerald-500"}),r.jsx("span",{className:`text-sm ${m}`,children:"Account session created!"})]}),r.jsxs("div",{className:`p-2 rounded ${u?"bg-gray-800":"bg-white"} border ${v}`,children:[r.jsx("p",{className:`text-xs ${f} mb-1`,children:"Client Secret:"}),r.jsx("code",{className:`text-xs ${m} break-all`,children:c.custom})]})]})]})}),r.jsx(he,{className:`${u?"bg-gray-700":"bg-gray-50"} border ${v}`,children:r.jsxs(_e,{className:"p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ob,{className:"w-5 h-5 text-purple-500 mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`font-semibold ${m} mb-1`,children:"OAuth Flow"}),r.jsx("p",{className:`text-sm ${f}`,children:"Let existing Stripe accounts connect via OAuth. Fastest for verified accounts."})]})]}),r.jsx(W,{onClick:b,disabled:o!==null,className:"w-full",variant:"outline",children:o==="oauth"?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ob,{className:"w-4 h-4 mr-2"}),"Generate OAuth Link"]})}),c.oauth&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-4 h-4 text-emerald-500"}),r.jsx("span",{className:`text-sm ${m}`,children:"OAuth link ready!"})]}),r.jsxs(W,{onClick:()=>w(c.oauth),className:"w-full",size:"sm",children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Open OAuth Link"]})]})]})}),r.jsx("div",{className:`p-4 rounded-lg ${u?"bg-blue-900/20":"bg-blue-50"} border ${u?"border-blue-800":"border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(hs,{className:"w-5 h-5 text-blue-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${m} mb-1`,children:"Best Practice:"}),r.jsx("p",{className:`text-sm ${f}`,children:"Store account IDs securely in your database, never expose secret keys client-side, and use account sessions for embedded components. Verify accounts meet requirements before enabling payouts."})]})]})})]})]})},hle=({userId:t,userEmail:e,userName:s,organizationId:n,existingAccountId:a,onAccountLinked:i})=>{const{theme:o}=Nr(),[l,c]=j.useState(!1),[d,u]=j.useState(null),[h,m]=j.useState(!1),[f,v]=j.useState(!1),x=o==="dark",g=x?"bg-gray-800":"bg-white",b=x?"text-gray-100":"text-gray-900",w=x?"text-gray-400":"text-gray-600",N=x?"border-gray-700":"border-gray-200",C=async()=>{if(a){m(!0);try{const E=await gh.getAccount(a);u(E)}catch(E){console.error("Failed to fetch account details:",E),re.error("Failed to fetch account details",{description:E?.message||"Unknown error"})}finally{m(!1)}}},S=(E,O)=>{re.success("Account created successfully!",{description:`${O} account linked to ${s}`}),i&&i(E),u({id:E,type:O}),c(!1)},A=async()=>{if(a){m(!0);try{const E=await gh.getAccountLoginLink(a);window.open(E.url,"_blank")}catch(E){console.error("Failed to get login link:",E),re.error("Failed to open Stripe dashboard",{description:E?.message||"Unknown error"})}finally{m(!1)}}},k=()=>{v(!0);try{const E="ca_YOUR_CLIENT_ID",O=`${window.location.origin}/stripe/oauth/callback`,$=btoa(JSON.stringify({user_id:t,organization_id:n||"",email:e,name:s,return_url:window.location.href})),T=`https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${E}&scope=read_write&redirect_uri=${encodeURIComponent(O)}&state=${$}&stripe_user[email]=${encodeURIComponent(e)}&stripe_user[business_name]=${encodeURIComponent(s)}`;re.success("Opening Stripe OAuth...",{description:"Connect your existing Stripe account"}),window.open(T,"_blank","width=800,height=800")}catch(E){console.error("Failed to generate OAuth link:",E),re.error("Failed to link existing account",{description:E?.message||"Unknown error"})}finally{v(!1)}};return ce.useEffect(()=>{a&&!d&&C()},[a]),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(he,{className:`${g} border ${N}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:b,children:"Stripe Connect Account"}),r.jsxs(Ft,{className:w,children:["Payment account for ",s]})]}),r.jsx(rn,{className:`w-6 h-6 ${w}`})]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsx("div",{className:`p-3 rounded-lg ${x?"bg-gray-700":"bg-gray-50"}`,children:r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:w,children:"Name"}),r.jsx("p",{className:`font-medium ${b}`,children:s})]}),r.jsxs("div",{children:[r.jsx("p",{className:w,children:"Email"}),r.jsx("p",{className:`font-medium ${b}`,children:e})]}),r.jsxs("div",{children:[r.jsx("p",{className:w,children:"User ID"}),r.jsx("p",{className:`text-xs ${w} font-mono`,children:t})]}),n&&r.jsxs("div",{children:[r.jsx("p",{className:w,children:"Organization"}),r.jsx("p",{className:`text-xs ${w} font-mono`,children:n})]})]})}),a?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(en,{className:"w-5 h-5 text-emerald-500"}),r.jsx("span",{className:`font-medium ${b}`,children:"Connected Account Active"})]}),d&&r.jsxs("div",{className:`p-3 rounded-lg ${x?"bg-gray-700":"bg-gray-50"} space-y-2`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:w,children:"Account ID"}),r.jsx("code",{className:`text-xs ${b}`,children:d.id})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:w,children:"Type"}),r.jsx(De,{variant:"outline",children:d.type||"Unknown"})]}),d.charges_enabled!==void 0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:w,children:"Charges"}),d.charges_enabled?r.jsx(De,{variant:"outline",className:"border-emerald-500 text-emerald-500",children:"Enabled"}):r.jsx(De,{variant:"outline",className:"border-red-500 text-red-500",children:"Disabled"})]}),d.payouts_enabled!==void 0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:w,children:"Payouts"}),d.payouts_enabled?r.jsx(De,{variant:"outline",className:"border-emerald-500 text-emerald-500",children:"Enabled"}):r.jsx(De,{variant:"outline",className:"border-red-500 text-red-500",children:"Disabled"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{onClick:A,disabled:h,variant:"outline",className:"flex-1",children:h?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Open Stripe Dashboard"]})}),r.jsx(W,{onClick:C,disabled:h,variant:"outline",children:"Refresh"})]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hs,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:`font-medium ${b}`,children:"No Connected Account"})]}),r.jsx("p",{className:`text-sm ${w}`,children:"This user doesn't have a Stripe Connect account yet. Create one to enable payments and payouts."}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsx(W,{onClick:()=>c(!0),className:"w-full",disabled:h||f,children:h?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Create Stripe Connect Account"]})}),r.jsx(W,{onClick:k,variant:"outline",className:"w-full",disabled:h||f,children:f?r.jsxs(r.Fragment,{children:[r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}),"Opening OAuth..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ob,{className:"w-4 h-4 mr-2"}),"Link Existing Stripe Account"]})})]}),r.jsx("div",{className:`p-3 rounded-lg ${x?"bg-blue-900/20":"bg-blue-50"} border ${x?"border-blue-800":"border-blue-200"}`,children:r.jsxs("p",{className:`text-xs ${w}`,children:[r.jsx("strong",{children:"Create:"})," Set up a new Stripe account with guided onboarding."," ",r.jsx("strong",{children:"Link:"})," Connect an existing Stripe account via OAuth."]})})]})]})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:r.jsx(nrt,{userId:t,userEmail:e,organizationId:n,onAccountCreated:S,onClose:()=>c(!1)})})})]})},art=({apiBaseUrl:t="http://localhost:3001"})=>{const{theme:e}=Nr(),[s,n]=j.useState([]),[a,i]=j.useState([]),[o,l]=j.useState(!0),[c,d]=j.useState(!1),[u,h]=j.useState(""),[m,f]=j.useState("all"),[v,x]=j.useState(null),g=e==="dark",b=g?"bg-gray-800":"bg-white",w=g?"text-gray-100":"text-gray-900",N=g?"text-gray-400":"text-gray-600",C=g?"border-gray-700":"border-gray-200",S=g?"hover:bg-gray-700":"hover:bg-gray-50",A=async()=>{try{l(!0),x(null);const I=await fetch(`${t}/api/stripe-connect-accounts/list`);if(!I.ok)throw new Error("Failed to fetch connected accounts");const L=await I.json();if(L.success)n(L.accounts),i(L.accounts);else throw new Error(L.error||"Failed to fetch accounts")}catch(I){console.error("Error fetching accounts:",I),x(I.message)}finally{l(!1)}},k=async()=>{d(!0),await A(),d(!1)};j.useEffect(()=>{A()},[]),j.useEffect(()=>{let I=s;u&&(I=I.filter(L=>L.id.toLowerCase().includes(u.toLowerCase())||L.email?.toLowerCase().includes(u.toLowerCase())||L.business_profile?.name?.toLowerCase().includes(u.toLowerCase()))),m!=="all"&&(I=I.filter(L=>m==="active"?L.charges_enabled&&L.payouts_enabled:m==="pending"?!L.charges_enabled||!L.payouts_enabled:m==="restricted"?!L.charges_enabled&&!L.payouts_enabled:!0)),i(I)},[u,m,s]);const E=(I,L)=>new Intl.NumberFormat("en-US",{style:"currency",currency:L.toUpperCase()}).format(I/100),O=I=>new Date(I*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),$=I=>I.charges_enabled&&I.payouts_enabled?r.jsx(De,{className:"bg-green-500 text-white",children:"Active"}):!I.charges_enabled&&!I.payouts_enabled?r.jsx(De,{className:"bg-red-500 text-white",children:"Restricted"}):r.jsx(De,{className:"bg-yellow-500 text-white",children:"Pending"}),T=I=>{window.open(`https://dashboard.stripe.com/connect/accounts/${I}`,"_blank")};return o?r.jsxs(he,{className:`${b} border ${C}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:w,children:"Connected Accounts Management"})}),r.jsx(_e,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ia,{className:"w-8 h-8 animate-spin text-blue-500"})})})]}):v?r.jsxs(he,{className:`${b} border ${C}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:w,children:"Connected Accounts Management"})}),r.jsx(_e,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-red-500 mb-4",children:v}),r.jsxs(W,{onClick:A,variant:"outline",children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Retry"]})]})})]}):r.jsxs(he,{className:`${b} border ${C}`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:w,children:"Connected Accounts Management"}),r.jsx("p",{className:`text-sm mt-1 ${N}`,children:"View balances, trigger payouts, manage disputes, and monitor account status"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{onClick:k,disabled:c,variant:"outline",size:"sm",children:[c?r.jsx(ia,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Sync All"]}),r.jsxs(W,{onClick:()=>window.open("https://dashboard.stripe.com/connect/accounts","_blank"),variant:"outline",size:"sm",children:[r.jsx(tn,{className:"w-4 h-4 mr-2"}),"Stripe Dashboard"]})]})]})}),r.jsxs(_e,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${N}`}),r.jsx(de,{type:"text",placeholder:"Search by name or account ID...",value:u,onChange:I=>h(I.target.value),className:"pl-10"})]}),r.jsx("div",{className:"flex gap-2",children:["all","active","pending","restricted"].map(I=>r.jsx(W,{onClick:()=>f(I),variant:m===I?"default":"outline",size:"sm",className:"capitalize",children:I},I))})]}),a.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:N,children:s.length===0?"No connected accounts found. Create your first connected account to get started.":"No accounts match your search criteria."})}):r.jsx("div",{className:"space-y-4",children:a.map(I=>r.jsxs("div",{className:`border ${C} rounded-lg p-4 ${S} transition-colors`,children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:`font-medium ${w}`,children:I.business_profile?.name||I.email||I.id}),$(I)]}),r.jsx("p",{className:`text-sm ${N}`,children:I.id})]})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-xs uppercase ${N} mb-1`,children:"Balance"}),r.jsx("p",{className:`font-semibold ${w}`,children:E(I.balance.available,I.balance.currency)})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs uppercase ${N} mb-1`,children:"Pending Payouts"}),r.jsx("p",{className:`font-semibold ${w}`,children:E(I.pending_payouts.amount,I.balance.currency)})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs uppercase ${N} mb-1`,children:"Disputes"}),r.jsx("p",{className:`font-semibold ${w}`,children:I.disputes.count})]}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs uppercase ${N} mb-1`,children:"Last Payout"}),r.jsx("p",{className:`font-semibold ${w}`,children:I.last_payout?O(I.last_payout.arrival_date):"Never"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{onClick:()=>T(I.id),variant:"outline",size:"sm",children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(W,{disabled:I.balance.available<=0,variant:"outline",size:"sm",children:[r.jsx(In,{className:"w-4 h-4 mr-2"}),"Trigger Payout"]})]})]},I.id))})]})]})},irt=({apiBaseUrl:t="http://localhost:3001",limit:e=10})=>{const{theme:s}=Nr(),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(null),d=s==="dark",u=d?"bg-gray-800":"bg-white",h=d?"text-gray-100":"text-gray-900",m=d?"text-gray-400":"text-gray-600",f=d?"border-gray-700":"border-gray-200",v=d?"hover:bg-gray-700":"hover:bg-gray-50",x=async()=>{try{o(!0),c(null);const S=await fetch(`${t}/api/stripe-connect-accounts/transactions?limit=${e}`);if(!S.ok)throw new Error("Failed to fetch transactions");const A=await S.json();if(A.success)a(A.transactions);else throw new Error(A.error||"Failed to fetch transactions")}catch(S){console.error("Error fetching transactions:",S),c(S.message)}finally{o(!1)}};j.useEffect(()=>{x()},[e]);const g=(S,A)=>new Intl.NumberFormat("en-US",{style:"currency",currency:A.toUpperCase()}).format(S/100),b=S=>new Date(S*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=S=>{if(S.type==="payout")switch(S.status){case"paid":return r.jsx(De,{className:"bg-green-500 text-white text-xs",children:"paid"});case"pending":return r.jsx(De,{className:"bg-yellow-500 text-white text-xs",children:"pending"});case"in_transit":return r.jsx(De,{className:"bg-blue-500 text-white text-xs",children:"in transit"});case"failed":return r.jsx(De,{className:"bg-red-500 text-white text-xs",children:"failed"});default:return r.jsx(De,{className:"bg-gray-500 text-white text-xs",children:S.status})}else switch(S.status){case"needs_response":return r.jsx(De,{className:"bg-orange-500 text-white text-xs",children:"needs_response"});case"under_review":return r.jsx(De,{className:"bg-yellow-500 text-white text-xs",children:"under review"});case"won":return r.jsx(De,{className:"bg-green-500 text-white text-xs",children:"won"});case"lost":return r.jsx(De,{className:"bg-red-500 text-white text-xs",children:"lost"});default:return r.jsx(De,{className:"bg-gray-500 text-white text-xs",children:S.status})}},N=S=>S.type==="payout"?r.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:r.jsx(In,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900 flex items-center justify-center",children:r.jsx(Nu,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),C=S=>{const A="https://dashboard.stripe.com";S.type==="payout"?window.open(`${A}/connect/accounts/${S.account_id}/payouts/${S.id}`,"_blank"):window.open(`${A}/connect/accounts/${S.account_id}/disputes/${S.id}`,"_blank")};return i?r.jsxs(he,{className:`${u} border ${f}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:h,children:"Recent Transaction Activity"})}),r.jsx(_e,{children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ia,{className:"w-8 h-8 animate-spin text-blue-500"})})})]}):l?r.jsxs(he,{className:`${u} border ${f}`,children:[r.jsx(Ke,{children:r.jsx(Xe,{className:h,children:"Recent Transaction Activity"})}),r.jsx(_e,{children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-red-500 mb-4",children:l}),r.jsx(W,{onClick:x,variant:"outline",children:"Retry"})]})})]}):r.jsxs(he,{className:`${u} border ${f}`,children:[r.jsx(Ke,{children:r.jsxs("div",{children:[r.jsx(Xe,{className:h,children:"Recent Transaction Activity"}),r.jsx("p",{className:`text-sm mt-1 ${m}`,children:"Latest payments, payouts, and disputes across all connected accounts"})]})}),r.jsxs(_e,{children:[n.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:m,children:"No recent transactions found."})}):r.jsx("div",{className:"space-y-3",children:n.map(S=>r.jsxs("div",{className:`flex items-center gap-4 p-3 border ${f} rounded-lg ${v} transition-colors cursor-pointer`,onClick:()=>C(S),children:[N(S),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:`font-medium ${h} truncate`,children:S.account_name}),w(S)]}),r.jsxs("p",{className:`text-sm ${m}`,children:[S.type,"  ",S.account_id,"  ",b(S.created)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`font-semibold ${h}`,children:g(S.amount,S.currency)}),r.jsx(tn,{className:`w-4 h-4 ${m} ml-auto mt-1`})]})]},S.id))}),n.length>0&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx(W,{onClick:()=>window.open("https://dashboard.stripe.com/connect/activity","_blank"),variant:"outline",className:"w-full",children:"View All Transactions"})})]})]})},ort=[{id:1,accountId:1,ownerName:"John Smith",organizationName:"Riddle Me This Escape Rooms",organizationId:"ORG-001",website:"https://riddlemethis.com",email:"john@escaperooms.com",plan:"Pro",venues:5,status:"active",features:["AI Agents","Waivers","Analytics"],profileSlug:"riddle-me-this",locations:2},{id:2,accountId:2,ownerName:"Sarah Johnson",organizationName:"Xperience Games - Calgary",organizationId:"ORG-002",website:"https://xperiencegames.ca",email:"sarah@mysterygames.com",plan:"Growth",venues:3,status:"active",features:["Waivers","Booking Widgets"],profileSlug:"xperience-games-calgary",locations:1},{id:3,accountId:3,ownerName:"Michael Chen",organizationName:"Adventure Zone Escape Rooms",organizationId:"ORG-003",website:"https://adventurezone.com",email:"michael@adventurezone.com",plan:"Basic",venues:1,status:"active",features:["Booking Widgets"],profileSlug:"adventure-zone",locations:1},{id:4,accountId:4,ownerName:"Emily Davis",organizationName:"Puzzle Palace Adventures",organizationId:"ORG-004",website:"https://puzzlepalace.com",email:"emily@puzzlepalace.com",plan:"Pro",venues:4,status:"inactive",features:["AI Agents","Waivers","Analytics"],profileSlug:"puzzle-palace",locations:2},{id:5,accountId:5,ownerName:"David Wilson",organizationName:"Quest Rooms Experience",organizationId:"ORG-005",website:"https://questrooms.com",email:"david@questrooms.com",plan:"Growth",venues:2,status:"active",features:["Waivers","Marketing"],profileSlug:"quest-rooms",locations:1},{id:6,accountId:6,ownerName:"Lisa Anderson",organizationName:"Mystery Manor Games",organizationId:"ORG-006",website:"https://mysterymanor.com",email:"lisa@mysterymanor.com",plan:"Pro",venues:6,status:"active",features:["AI Agents","Waivers","Analytics"],profileSlug:"mystery-manor",locations:2},{id:7,accountId:7,ownerName:"James Martinez",organizationName:"Escape Lab Toronto",organizationId:"ORG-007",website:"https://escapelab.ca",email:"james@escapelab.ca",plan:"Basic",venues:2,status:"active",features:["Booking Widgets"],profileSlug:"escape-lab",locations:1},{id:8,accountId:8,ownerName:"Rachel Green",organizationName:"Brain Teaser Rooms",organizationId:"ORG-008",website:"https://brainteaser.com",email:"rachel@brainteaser.com",plan:"Growth",venues:3,status:"active",features:["Waivers","Marketing"],profileSlug:"brain-teaser",locations:1},{id:9,accountId:9,ownerName:"Tom Rodriguez",organizationName:"The Escape Company",organizationId:"ORG-009",website:"https://escapecompany.com",email:"tom@escapecompany.com",plan:"Pro",venues:8,status:"active",features:["AI Agents","Waivers","Analytics","Marketing"],profileSlug:"escape-company",locations:3},{id:10,accountId:10,ownerName:"Nina Patel",organizationName:"Lock & Key Adventures",organizationId:"ORG-010",website:"https://lockandkey.com",email:"nina@lockandkey.com",plan:"Basic",venues:1,status:"active",features:["Booking Widgets"],profileSlug:"lock-and-key",locations:1},{id:11,accountId:11,ownerName:"Chris Brown",organizationName:"Enigma Escape Rooms",organizationId:"ORG-011",website:"https://enigmaescape.com",email:"chris@enigmaescape.com",plan:"Growth",venues:4,status:"active",features:["Waivers","Marketing"],profileSlug:"enigma-escape",locations:2},{id:12,accountId:12,ownerName:"Amanda Lee",organizationName:"Cipher City Games",organizationId:"ORG-012",website:"https://ciphercity.com",email:"amanda@ciphercity.com",plan:"Pro",venues:5,status:"active",features:["AI Agents","Waivers","Analytics"],profileSlug:"cipher-city",locations:2},{id:13,accountId:1,ownerName:"Kevin White",organizationName:"Breakout Room Adventures",organizationId:"ORG-013",website:"https://breakoutrooms.com",email:"kevin@breakoutrooms.com",plan:"Basic",venues:2,status:"active",features:["Booking Widgets"],profileSlug:"breakout-rooms",locations:1},{id:14,accountId:2,ownerName:"Sandra Kim",organizationName:"The Puzzle Box",organizationId:"ORG-014",website:"https://puzzlebox.com",email:"sandra@puzzlebox.com",plan:"Growth",venues:3,status:"active",features:["Waivers","Marketing"],profileSlug:"puzzle-box",locations:1},{id:15,accountId:3,ownerName:"Mark Thompson",organizationName:"Exit Strategy Games",organizationId:"ORG-015",website:"https://exitstrategy.com",email:"mark@exitstrategy.com",plan:"Pro",venues:7,status:"active",features:["AI Agents","Waivers","Analytics","Marketing"],profileSlug:"exit-strategy",locations:3},{id:16,accountId:4,ownerName:"Jennifer Harris",organizationName:"Code Red Escape Rooms",organizationId:"ORG-016",website:"https://coderedescape.com",email:"jen@coderedescape.com",plan:"Basic",venues:1,status:"inactive",features:["Booking Widgets"],profileSlug:"code-red",locations:1},{id:17,accountId:5,ownerName:"Daniel Park",organizationName:"Mind Games Interactive",organizationId:"ORG-017",website:"https://mindgamesint.com",email:"daniel@mindgamesint.com",plan:"Growth",venues:4,status:"active",features:["Waivers","Marketing"],profileSlug:"mind-games",locations:2},{id:18,accountId:6,ownerName:"Michelle Wong",organizationName:"The Great Escape Vancouver",organizationId:"ORG-018",website:"https://greatescape.ca",email:"michelle@greatescape.ca",plan:"Pro",venues:6,status:"active",features:["AI Agents","Waivers","Analytics"],profileSlug:"great-escape",locations:2},{id:19,accountId:7,ownerName:"Robert Taylor",organizationName:"Locked In Entertainment",organizationId:"ORG-019",website:"https://lockedin.com",email:"robert@lockedin.com",plan:"Basic",venues:2,status:"active",features:["Booking Widgets"],profileSlug:"locked-in",locations:1},{id:20,accountId:8,ownerName:"Laura Garcia",organizationName:"Secret Chamber Games",organizationId:"ORG-020",website:"https://secretchamber.com",email:"laura@secretchamber.com",plan:"Growth",venues:3,status:"active",features:["Waivers","Marketing"],profileSlug:"secret-chamber",locations:1},{id:21,accountId:9,ownerName:"Steven Miller",organizationName:"Vault Escape Experience",organizationId:"ORG-021",website:"https://vaultescape.com",email:"steven@vaultescape.com",plan:"Pro",venues:5,status:"active",features:["AI Agents","Waivers","Analytics"],profileSlug:"vault-escape",locations:2},{id:22,accountId:10,ownerName:"Jessica Adams",organizationName:"Challenge Accepted Games",organizationId:"ORG-022",website:"https://challengeaccepted.com",email:"jessica@challengeaccepted.com",plan:"Basic",venues:1,status:"active",features:["Booking Widgets"],profileSlug:"challenge-accepted",locations:1}],xd=[{id:"VEN-001",name:"Downtown Location",organizationId:"ORG-001",games:12},{id:"VEN-002",name:"Westside Branch",organizationId:"ORG-001",games:10},{id:"VEN-003",name:"East End",organizationId:"ORG-001",games:8},{id:"VEN-004",name:"Southside",organizationId:"ORG-001",games:9},{id:"VEN-005",name:"North Quarter",organizationId:"ORG-001",games:11},{id:"VEN-006",name:"Main Street",organizationId:"ORG-002",games:7},{id:"VEN-007",name:"Market District",organizationId:"ORG-002",games:6},{id:"VEN-008",name:"Central Plaza",organizationId:"ORG-002",games:8},{id:"VEN-009",name:"Adventure Hub",organizationId:"ORG-003",games:5},{id:"VEN-010",name:"Puzzle Palace",organizationId:"ORG-004",games:9},{id:"VEN-011",name:"Mystery Manor",organizationId:"ORG-004",games:10},{id:"VEN-012",name:"Enigma Center",organizationId:"ORG-005",games:6},{id:"VEN-013",name:"Riddle Room",organizationId:"ORG-005",games:7},{id:"VEN-014",name:"Secret Chamber",organizationId:"ORG-006",games:8},{id:"VEN-015",name:"Hidden Door",organizationId:"ORG-007",games:11},{id:"VEN-016",name:"Quest Station",organizationId:"ORG-008",games:5},{id:"VEN-017",name:"Escape Haven",organizationId:"ORG-009",games:9},{id:"VEN-018",name:"Breakout Zone",organizationId:"ORG-009",games:8},{id:"VEN-019",name:"Liberty Square",organizationId:"ORG-010",games:7},{id:"VEN-020",name:"Freedom Plaza",organizationId:"ORG-011",games:10},{id:"VEN-021",name:"Victory Lane",organizationId:"ORG-011",games:9},{id:"VEN-022",name:"Championship Court",organizationId:"ORG-011",games:8},{id:"VEN-023",name:"Wisdom Way",organizationId:"ORG-012",games:6},{id:"VEN-024",name:"Innovation Hub",organizationId:"ORG-013",games:11},{id:"VEN-025",name:"Discovery District",organizationId:"ORG-013",games:10},{id:"VEN-026",name:"Revelation Room",organizationId:"ORG-014",games:7},{id:"VEN-027",name:"Cipher Suite",organizationId:"ORG-015",games:9},{id:"VEN-028",name:"Code Center",organizationId:"ORG-015",games:8},{id:"VEN-029",name:"Logic Lab",organizationId:"ORG-016",games:5},{id:"VEN-030",name:"Brain Box",organizationId:"ORG-016",games:6},{id:"VEN-031",name:"Mind Maze",organizationId:"ORG-017",games:12},{id:"VEN-032",name:"Thought Theatre",organizationId:"ORG-017",games:11},{id:"VEN-033",name:"Intellect Inn",organizationId:"ORG-017",games:10},{id:"VEN-034",name:"Genius Gallery",organizationId:"ORG-017",games:9},{id:"VEN-035",name:"Wonder Workshop",organizationId:"ORG-018",games:8},{id:"VEN-036",name:"Marvel Mansion",organizationId:"ORG-018",games:9},{id:"VEN-037",name:"Spectacular Space",organizationId:"ORG-018",games:10},{id:"VEN-038",name:"Amazing Arena",organizationId:"ORG-018",games:11},{id:"VEN-039",name:"Fantastic Fort",organizationId:"ORG-018",games:7},{id:"VEN-040",name:"Incredible Isle",organizationId:"ORG-018",games:8},{id:"VEN-041",name:"Security Station",organizationId:"ORG-019",games:6},{id:"VEN-042",name:"Guard Gate",organizationId:"ORG-019",games:7},{id:"VEN-043",name:"Mystery Museum",organizationId:"ORG-020",games:9},{id:"VEN-044",name:"Secret Studio",organizationId:"ORG-020",games:8},{id:"VEN-045",name:"Hidden Hideout",organizationId:"ORG-020",games:10},{id:"VEN-046",name:"Treasure Tower",organizationId:"ORG-021",games:11},{id:"VEN-047",name:"Gold Gallery",organizationId:"ORG-021",games:9},{id:"VEN-048",name:"Jewel Junction",organizationId:"ORG-021",games:10},{id:"VEN-049",name:"Diamond Den",organizationId:"ORG-021",games:8},{id:"VEN-050",name:"Ruby Room",organizationId:"ORG-021",games:12},{id:"VEN-051",name:"Victory Vault",organizationId:"ORG-022",games:7}],eY=[{id:"GAME-001",name:"The Bank Heist",venueId:"VEN-001",difficulty:"Hard"},{id:"GAME-002",name:"Prison Break",venueId:"VEN-001",difficulty:"Medium"},{id:"GAME-003",name:"Haunted Manor",venueId:"VEN-001",difficulty:"Easy"},{id:"GAME-004",name:"Zombie Apocalypse",venueId:"VEN-001",difficulty:"Hard"},{id:"GAME-005",name:"Lost Temple",venueId:"VEN-001",difficulty:"Medium"},{id:"GAME-006",name:"Space Station",venueId:"VEN-001",difficulty:"Hard"},{id:"GAME-007",name:"Murder Mystery",venueId:"VEN-001",difficulty:"Medium"},{id:"GAME-008",name:"Pirate Ship",venueId:"VEN-001",difficulty:"Easy"},{id:"GAME-009",name:"Mad Scientist Lab",venueId:"VEN-001",difficulty:"Hard"},{id:"GAME-010",name:"Casino Royale",venueId:"VEN-001",difficulty:"Medium"},{id:"GAME-011",name:"Jungle Adventure",venueId:"VEN-001",difficulty:"Medium"},{id:"GAME-012",name:"Time Traveler",venueId:"VEN-001",difficulty:"Hard"},{id:"GAME-013",name:"Spy Mission",venueId:"VEN-002",difficulty:"Hard"},{id:"GAME-014",name:"Egyptian Tomb",venueId:"VEN-002",difficulty:"Medium"},{id:"GAME-015",name:"Wild West Saloon",venueId:"VEN-002",difficulty:"Easy"},{id:"GAME-016",name:"Submarine Escape",venueId:"VEN-002",difficulty:"Hard"},{id:"GAME-017",name:"Sherlock Holmes",venueId:"VEN-002",difficulty:"Medium"},{id:"GAME-018",name:"Asylum",venueId:"VEN-002",difficulty:"Hard"},{id:"GAME-019",name:"Wizard Tower",venueId:"VEN-002",difficulty:"Medium"},{id:"GAME-020",name:"Dragon Lair",venueId:"VEN-002",difficulty:"Hard"},{id:"GAME-021",name:"Vampire Castle",venueId:"VEN-002",difficulty:"Medium"},{id:"GAME-022",name:"Alien Invasion",venueId:"VEN-002",difficulty:"Hard"}],g1=[{name:"Basic",price:99,features:["Up to 2 venues","Booking Widgets","Basic Analytics","Email Support"],subscribers:12,color:"#6b7280",isFeatured:!1,discount:null},{name:"Growth",price:299,features:["Up to 5 venues","All Basic features","Waivers","Marketing Tools","Priority Support"],subscribers:18,color:"#10b981",isFeatured:!0,discount:null},{name:"Pro",price:599,features:["Unlimited venues","All Growth features","AI Agents","Advanced Analytics","Custom Branding","Dedicated Support"],subscribers:12,color:"#4f46e5",isFeatured:!1,discount:null}],lrt=({onNavigate:t})=>{const{theme:e}=Nr(),s=e==="dark",{featureFlags:n,toggleFeature:a}=Ztt();n3(),s3(),pse();const{metrics:i}=TJe(),[o,l]=j.useState(null),{metrics:c}=PJe(o||void 0),[d,u]=j.useState(()=>{if(typeof window<"u"){const je=localStorage.getItem("systemAdminPlans");if(je)try{return JSON.parse(je)}catch(Ce){return console.error("Error parsing saved plans:",Ce),g1}}return g1}),[h,m]=j.useState(null),[f,v]=j.useState(null),[x,g]=j.useState(null),[b,w]=j.useState(null),[N,C]=j.useState(null),[S,A]=j.useState(null),[k,E]=j.useState(!1),[O,$]=j.useState(null),{organizations:T,refetch:I}=mD({},1,100),L=j.useMemo(()=>!T||T.length===0?ort:T.map(je=>({id:je.id,accountId:1,ownerName:je.owner_name||"Admin",organizationName:je.name,organizationId:je.id,website:je.website||"",email:je.owner_email||"admin@organization.com",plan:je.plan?.name||"Basic",status:je.status,features:[],profileSlug:je.name.toLowerCase().replace(/[^a-z0-9]+/g,"-"),venues:0,locations:0,venueIds:[],gameIds:[]})),[T]),[z,M]=j.useState(L);j.useEffect(()=>{M(L)},[L]);const[V,B]=j.useState(null),[F,J]=j.useState(0),[ee,q]=j.useState(!1),[U,Z]=j.useState(!1),[K,se]=j.useState(1),ne=5,[ie,be]=j.useState(()=>{if(typeof window<"u"){const je=localStorage.getItem("systemAdminTableColumns");if(je)try{return JSON.parse(je)}catch(Ce){console.error("Error parsing saved columns:",Ce)}}return{organizationId:!0,organizationName:!0,ownerName:!0,website:!0,email:!0,plan:!0,venues:!0,venueIds:!0,venueNames:!0,games:!0,gameIds:!0,gameNames:!0,locations:!0,staffAccounts:!0}}),ue=[{id:"organizationId",label:"Organization ID"},{id:"organizationName",label:"Organization Name"},{id:"ownerName",label:"Owner Name"},{id:"website",label:"Website"},{id:"email",label:"Email"},{id:"plan",label:"Plan"},{id:"venues",label:"Venues"},{id:"venueIds",label:"Venue IDs"},{id:"venueNames",label:"Venue Names"},{id:"games",label:"Games"},{id:"gameIds",label:"Game IDs"},{id:"gameNames",label:"Game Names"},{id:"locations",label:"Locations"},{id:"staffAccounts",label:"Staff Accounts"}],oe=j.useMemo(()=>T&&T.length>0?T.map(je=>({id:je.id,name:je.name,company:je.owner_name||je.plan?.name||"N/A",phone:je.phone||je.id,status:je.status==="active"?"active":"inactive",stripeAccountId:je.stripe_account_id||void 0,isRecent:!1})):z.map(je=>({id:je.organizationId?.toString()||je.id?.toString()||"",name:je.organizationName,company:je.ownerName,phone:je.phone||je.organizationId,status:je.status==="active"?"active":"inactive",isRecent:!1})),[T,z]),pe=j.useMemo(()=>oe.slice(0,3),[oe]);j.useEffect(()=>{typeof window<"u"&&localStorage.setItem("systemAdminPlans",JSON.stringify(d))},[d]),j.useEffect(()=>{typeof window<"u"&&localStorage.setItem("systemAdminTableColumns",JSON.stringify(ie))},[ie]);const ye=s?"bg-[#0a0a0a]":"bg-gray-50",$e=s?"bg-[#161616]":"bg-white",Se=s?"text-white":"text-gray-900",Y=s?"text-gray-400":"text-gray-600",Le=s?"border-[#333]":"border-gray-200",xe=j.useMemo(()=>h?z.filter(je=>je.organizationId===h.id):z,[h,z]),mt=Math.ceil(xe.length/ne),Ue=(K-1)*ne,xt=Ue+ne,ut=xe.slice(Ue,xt);j.useEffect(()=>{se(1)},[h]);const Ot=j.useMemo(()=>{if(!h){if(i)return{totalOwners:i.total_organizations||0,activeSubscriptions:i.active_organizations||0,activeVenues:i.total_venues||0,totalLocations:i.total_venues||0,totalGames:i.total_games||0,totalBookings:i.total_bookings||0,mrr:i.mrr||0};const nt=z.reduce((Wt,xr)=>Wt+(xr.venues||0),0),It=z.reduce((Wt,xr)=>Wt+(xr.locations||0),0),vr=z.filter(Wt=>Wt.status==="active").length,Xt=xd.reduce((Wt,xr)=>Wt+(xr.games||0),0),Mt=nt*50,Gt=z.reduce((Wt,xr)=>{const Cr=g1.find(Pr=>Pr.name===xr.plan);return Wt+(Cr?.price||0)},0);return{totalOwners:z.length,activeSubscriptions:vr,activeVenues:nt,totalLocations:It,totalGames:Xt,totalBookings:Mt,mrr:Gt}}if(c)return{totalOwners:1,activeSubscriptions:1,activeVenues:c.total_venues||0,totalLocations:c.active_venues||0,totalGames:c.total_games||0,totalBookings:c.total_bookings||0,mrr:c.mrr||0};const je=xe,Ce=je.reduce((nt,It)=>nt+(It.venues||0),0),Qe=je.reduce((nt,It)=>nt+(It.locations||0),0),He=je.filter(nt=>nt.status==="active").length,vt=je.map(nt=>nt.organizationId),Ee=xd.filter(nt=>vt.includes(nt.organizationId)).reduce((nt,It)=>nt+(It.games||0),0),We=Ce*50,at=je.reduce((nt,It)=>{const vr=g1.find(Xt=>Xt.name===It.plan);return nt+(vr?.price||0)},0);return{totalOwners:je.length,activeSubscriptions:He,activeVenues:Ce,totalLocations:Qe,totalGames:Ee,totalBookings:We,mrr:at}},[h,xe,i,c,z,xd,g1]),tt=je=>{const Ce=n.find(He=>He.id===je),Qe=Ce?.enabled;a(je),re.success(`Feature ${Ce?.name} ${Qe?"disabled":"enabled"}`)},st=je=>{const Ce=z.find(Qe=>Qe.id===je);Ce&&w(Ce)},At=je=>{const Ce=z.find(Qe=>Qe.id===je);Ce&&C(Ce)},Yt=je=>{const Ce=z.find(Qe=>Qe.id===je);Ce&&A(Ce)},yr=je=>{M(Ce=>Ce.filter(Qe=>Qe.id!==je)),A(null)},Zt=je=>{M(Ce=>Ce.map(Qe=>Qe.id===je.id?je:Qe)),C(null)},Vt=()=>{I(),E(!1)},tr=je=>{u(Ce=>Ce.map(Qe=>Qe.name===je.name?je:Qe)),$(null)},$t=je=>{m(je),l(je?.id||null),je?re.info(`Viewing data for: ${je.name}`):re.info("Viewing all platform data")},Dr=je=>{try{return new URL(je).hostname.replace("www.","")}catch{return je}},Er=(je,Ce)=>{B(je),J(Ce)},hr=je=>{M(Ce=>Ce.map(Qe=>Qe.id===je?{...Qe,locations:F}:Qe)),B(null),re.success("Location count updated")},Ct=()=>{se(je=>Math.max(1,je-1))},is=()=>{se(je=>Math.min(mt,je+1))},cr=()=>{t&&t("view-all-organizations")},Pt=()=>{t&&t("user-stripe-accounts")},kt=()=>{B(null),J(0)},zt=je=>{window.open(`/v/${je.profileSlug}`,"_blank"),re.info(`Opening profile for ${je.organizationName}`)},or=je=>{v(je)},Re=je=>{g(je)},Je=je=>{be(Ce=>({...Ce,[je]:!Ce[je]}))},bt=()=>{const je=ue.reduce((Ce,Qe)=>({...Ce,[Qe.id]:!0}),{});be(je),re.success("All columns shown")},gr=()=>{const je=ue.reduce((Ce,Qe)=>({...Ce,[Qe.id]:!1}),{});be(je),re.info("All columns hidden")};return r.jsxs("div",{className:`min-h-screen ${ye} flex flex-col`,children:[r.jsx($Ze,{selectedAccount:h,onAccountSelect:$t,accounts:oe,recentAccounts:pe,onNotificationsClick:()=>Z(!0),onSettingsClick:()=>q(!0),notificationCount:3}),h&&r.jsx("div",{className:`px-6 pt-4 pb-2 border-b ${Le}`,children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:Y,children:"System Admin"}),r.jsx("span",{className:Y,children:""}),r.jsx("span",{className:Se,children:h.name})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:`text-lg font-medium ${Se}`,children:"Overview Metrics"})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[r.jsx(tc,{title:"Total Owners",value:Ot?.totalOwners??0,icon:Xr,trend:{value:12,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Active Subscriptions",value:Ot?.activeSubscriptions??0,icon:en,trend:{value:8,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"Active Venues",value:Ot?.activeVenues??0,icon:Na,trend:{value:15,isPositive:!0},period:"this month"}),r.jsx(tc,{title:"MRR",value:`$${Number(Ot?.mrr??0).toLocaleString()}`,icon:In,trend:{value:18,isPositive:!0},period:"this month"})]})]}),h&&(()=>{const je=z.find(Ce=>Ce.organizationId===h.id);return je?r.jsx("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:r.jsx(hle,{userId:je.organizationId,userEmail:je.email,userName:je.organizationName,organizationId:je.organizationId,existingAccountId:je.stripeAccountId,onAccountLinked:Ce=>{re.success("Stripe account linked!",{description:`Account ${Ce} linked to ${je.organizationName}`})}})}):null})(),r.jsx(rrt,{selectedAccount:h,platformMetrics:i,accountMetrics:c}),!h&&r.jsx("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:r.jsx(art,{})}),!h&&r.jsx("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:r.jsx(irt,{limit:10})}),!h&&r.jsxs("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:`text-lg font-medium ${Se}`,children:"Organizations Management"})}),r.jsxs(he,{className:`${$e} border ${Le} shadow-sm`,children:[r.jsx(Ke,{className:"space-y-4 pb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Xe,{className:`text-2xl ${Se}`,children:"Owners & Venues"}),r.jsxs("p",{className:`text-sm ${Y}`,children:["Showing ",r.jsxs("span",{className:"font-medium",children:[Ue+1,"-",Math.min(xt,xe.length)]})," of ",r.jsx("span",{className:"font-medium",children:xe.length})," organizations"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs(D4,{children:[r.jsx(R4,{asChild:!0,children:r.jsxs(W,{variant:"outline",className:`h-11 px-6 ${Le} ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50"}`,children:[r.jsx(Jue,{className:"w-4 h-4 mr-2"}),"Columns"]})}),r.jsx(M4,{className:`w-64 p-4 ${s?"bg-[#161616] border-[#333]":"bg-white border-gray-200"}`,align:"end",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h4",{className:`font-medium ${Se}`,children:"Modify columns"})}),r.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:ue.map(je=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ku,{id:je.id,checked:ie[je.id],onCheckedChange:()=>Je(je.id),className:s?"border-[#333]":"border-gray-300"}),r.jsx("label",{htmlFor:je.id,className:`text-sm cursor-pointer ${Se}`,children:je.label})]},je.id))}),r.jsxs("div",{className:`pt-3 border-t ${s?"border-[#333]":"border-gray-200"} flex gap-2`,children:[r.jsx(W,{variant:"ghost",size:"sm",onClick:bt,className:`flex-1 text-xs ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-100"}`,children:"Show All"}),r.jsx(W,{variant:"ghost",size:"sm",onClick:gr,className:`flex-1 text-xs ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-100"}`,children:"Hide All"})]})]})})]}),r.jsxs(W,{onClick:cr,variant:"outline",className:`h-11 px-6 ${Le} ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50"}`,children:[r.jsx(J4,{className:"w-4 h-4 mr-2"}),"View All"]}),r.jsxs(W,{onClick:Pt,variant:"outline",className:`h-11 px-6 ${Le} ${s?"hover:bg-[#1e1e1e]":"hover:bg-gray-50"}`,children:[r.jsx(rn,{className:"w-4 h-4 mr-2"}),"User Accounts"]}),r.jsxs(W,{onClick:()=>E(!0),style:{backgroundColor:"#4f46e5"},className:"h-11 px-6 text-white hover:bg-[#4338ca]",children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Add Owner"]})]})]})}),r.jsxs(_e,{className:"px-0",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:`border-y ${Le} ${s?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[ie.organizationId&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Organization ID"}),ie.organizationName&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Organization Name"}),ie.ownerName&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Owner Name"}),ie.website&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Website"}),ie.email&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Email"}),ie.plan&&r.jsx("th",{className:`text-left py-4 px-6 text-sm font-medium ${Y}`,children:"Plan"}),ie.venues&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Venues"}),ie.venueIds&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Venue IDs"}),ie.venueNames&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Venue Names"}),ie.games&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Games"}),ie.gameIds&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Game IDs"}),ie.gameNames&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Game Names"}),ie.locations&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Locations"}),ie.staffAccounts&&r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Staff Accounts"}),r.jsx("th",{className:`text-center py-4 px-6 text-sm font-medium ${Y}`,children:"Actions"})]})}),r.jsx("tbody",{children:ut.map((je,Ce)=>r.jsxs("tr",{className:`border-b ${Le} ${s?"hover:bg-[#1a1a1a]":"hover:bg-gray-50"} transition-colors group`,children:[ie.organizationId&&r.jsx("td",{className:"py-5 px-6",children:r.jsxs("code",{className:`inline-flex items-center gap-2 text-xs font-mono px-3 py-1.5 rounded-md ${s?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"bg-indigo-50 text-indigo-700 border border-indigo-200"}`,children:[r.jsx(Na,{className:"w-3 h-3"}),je.organizationId]})}),ie.organizationName&&r.jsx("td",{className:`py-5 px-6 font-medium ${Se}`,children:je.organizationName}),ie.ownerName&&r.jsx("td",{className:`py-5 px-6 ${Se}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${s?"bg-[#2a2a2a] text-gray-300":"bg-gray-200 text-gray-700"}`,children:je.ownerName.split(" ").map(Qe=>Qe[0]).join("")}),r.jsx("span",{children:je.ownerName})]})}),ie.website&&r.jsx("td",{className:"py-5 px-6",children:r.jsxs("a",{href:je.website,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-2 text-sm px-3 py-1.5 rounded-md ${Y} ${s?"hover:bg-[#2a2a2a] hover:text-indigo-400":"hover:bg-gray-100 hover:text-indigo-600"} transition-all group-hover:bg-opacity-100`,children:[r.jsx(tn,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"font-mono text-xs",children:Dr(je.website)})]})}),ie.email&&r.jsx("td",{className:`py-5 px-6 text-sm ${Y}`,children:r.jsx("span",{className:"truncate max-w-[180px] block",children:je.email})}),ie.plan&&r.jsx("td",{className:"py-5 px-6",children:r.jsxs(De,{style:{backgroundColor:je.plan==="Pro"?"#4f46e5":je.plan==="Growth"?"#10b981":"#6b7280"},className:"text-white font-medium px-3 py-1 text-xs",children:[je.plan==="Pro"&&r.jsx(lc,{className:"w-3 h-3 mr-1 inline"}),je.plan]})}),ie.venues&&r.jsx("td",{className:"py-5 px-6 text-center",children:r.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md ${s?"bg-[#1e1e1e]":"bg-gray-100"}`,children:[r.jsx(Na,{className:`w-3.5 h-3.5 ${Y}`}),r.jsx("span",{className:`font-medium ${Se}`,children:je.venues})]})}),ie.venueIds&&r.jsx("td",{className:"py-5 px-6",children:r.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[xd.filter(Qe=>Qe.organizationId===je.organizationId).slice(0,3).map(Qe=>r.jsx("code",{className:`text-xs font-mono px-2 py-0.5 rounded ${s?"bg-blue-500/10 text-blue-400 border border-blue-500/20":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:Qe.id},Qe.id)),xd.filter(Qe=>Qe.organizationId===je.organizationId).length>3&&r.jsxs("span",{className:`text-xs ${Y}`,children:["+",xd.filter(Qe=>Qe.organizationId===je.organizationId).length-3," more"]})]})}),ie.venueNames&&r.jsx("td",{className:"py-5 px-6",children:r.jsxs("div",{className:"flex flex-wrap gap-1 justify-center",children:[xd.filter(Qe=>Qe.organizationId===je.organizationId).slice(0,2).map(Qe=>r.jsx("span",{className:`text-xs px-2 py-1 rounded ${s?"bg-purple-500/10 text-purple-400 border border-purple-500/20":"bg-purple-50 text-purple-700 border border-purple-200"}`,children:Qe.name},Qe.id)),xd.filter(Qe=>Qe.organizationId===je.organizationId).length>2&&r.jsxs("span",{className:`text-xs ${Y}`,children:["+",xd.filter(Qe=>Qe.organizationId===je.organizationId).length-2," more"]})]})}),ie.games&&r.jsx("td",{className:"py-5 px-6 text-center",children:r.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md ${s?"bg-[#1e1e1e]":"bg-gray-100"}`,children:[r.jsx(bm,{className:`w-3.5 h-3.5 ${Y}`}),r.jsx("span",{className:`font-medium ${Se}`,children:xd.filter(Qe=>Qe.organizationId===je.organizationId).reduce((Qe,He)=>Qe+He.games,0)})]})}),ie.gameIds&&r.jsx("td",{className:"py-5 px-6",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:(()=>{const Qe=xd.filter(vt=>vt.organizationId===je.organizationId),He=eY.filter(vt=>Qe.some(le=>le.id===vt.venueId));return r.jsxs(r.Fragment,{children:[He.slice(0,3).map(vt=>r.jsx("code",{className:`text-xs font-mono px-2 py-0.5 rounded ${s?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-green-50 text-green-700 border border-green-200"}`,children:vt.id},vt.id)),He.length>3&&r.jsxs("span",{className:`text-xs ${Y}`,children:["+",He.length-3," more"]})]})})()})}),ie.gameNames&&r.jsx("td",{className:"py-5 px-6",children:r.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:(()=>{const Qe=xd.filter(vt=>vt.organizationId===je.organizationId),He=eY.filter(vt=>Qe.some(le=>le.id===vt.venueId));return r.jsxs(r.Fragment,{children:[He.slice(0,2).map(vt=>r.jsx("span",{className:`text-xs px-2 py-1 rounded ${s?"bg-amber-500/10 text-amber-400 border border-amber-500/20":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:vt.name},vt.id)),He.length>2&&r.jsxs("span",{className:`text-xs ${Y}`,children:["+",He.length-2," more"]})]})})()})}),ie.locations&&r.jsx("td",{className:"py-5 px-6 text-center",children:V===je.id?r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("input",{type:"number",min:"0",value:F,onChange:Qe=>J(parseInt(Qe.target.value)||0),className:`w-20 h-9 px-3 text-center text-sm border rounded-md ${s?"bg-[#0a0a0a] border-[#2a2a2a] text-white focus:border-indigo-500":"bg-white border-gray-300 text-gray-900 focus:border-indigo-500"} focus:outline-none focus:ring-2 focus:ring-indigo-500/20`,autoFocus:!0}),r.jsx("button",{onClick:()=>hr(je.id),className:`p-2 rounded-md ${s?"hover:bg-green-500/10":"hover:bg-green-50"} text-green-600 dark:text-green-400 transition-colors`,children:r.jsx(en,{className:"w-4 h-4"})}),r.jsx("button",{onClick:kt,className:`p-2 rounded-md ${s?"hover:bg-red-500/10":"hover:bg-red-50"} text-red-600 dark:text-red-400 transition-colors`,children:r.jsx(ln,{className:"w-4 h-4"})})]}):r.jsxs("button",{onClick:()=>Er(je.id,je.locations||0),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md ${s?"hover:bg-indigo-500/10 text-gray-300":"hover:bg-indigo-50 text-gray-700"} transition-all cursor-pointer group/location`,title:"Click to edit locations",children:[r.jsx(dl,{className:"w-3.5 h-3.5 text-indigo-600 dark:text-indigo-400"}),r.jsx("span",{className:`font-medium ${Se}`,children:je.locations||0}),r.jsx(oc,{className:"w-3 h-3 opacity-0 group-hover/location:opacity-100 text-indigo-600 dark:text-indigo-400 transition-opacity"})]})}),ie.staffAccounts&&r.jsx("td",{className:"py-5 px-6 text-center",children:r.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md ${s?"bg-[#1e1e1e]":"bg-gray-100"}`,children:[r.jsx(Xr,{className:`w-3.5 h-3.5 ${Y}`}),r.jsx("span",{className:`font-medium ${Se}`,children:Math.floor(3+je.id*1.7%13)})]})}),r.jsx("td",{className:"py-5 px-6",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx(DZe,{ownerName:je.ownerName,profileSlug:je.profileSlug,organizationName:je.organizationName,onViewProfile:()=>zt(je),onProfileSettings:()=>or(je),onProfileEmbed:()=>Re(je)}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>st(je.id),className:`h-9 w-9 p-0 ${s?"hover:bg-indigo-500/10 hover:text-indigo-400":"hover:bg-indigo-50 hover:text-indigo-600"}`,title:"View details",children:r.jsx(ys,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>At(je.id),className:`h-9 w-9 p-0 ${s?"hover:bg-blue-500/10 hover:text-blue-400":"hover:bg-blue-50 hover:text-blue-600"}`,title:"Edit organization",children:r.jsx(oc,{className:"w-4 h-4"})}),r.jsx(W,{variant:"ghost",size:"sm",onClick:()=>Yt(je.id),className:`h-9 w-9 p-0 ${s?"hover:bg-red-500/10 hover:text-red-400":"hover:bg-red-50 hover:text-red-600"} text-red-600 dark:text-red-400`,title:"Delete organization",children:r.jsx(ks,{className:"w-4 h-4"})})]})})]},je.id))})]})}),mt>1&&r.jsxs("div",{className:`flex items-center justify-between px-6 py-6 mt-6 border-t ${Le} ${s?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:`text-sm ${Y}`,children:[r.jsxs("span",{className:"font-medium",children:["Page ",K]})," of ",r.jsx("span",{className:"font-medium",children:mt})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(W,{variant:"outline",size:"sm",onClick:Ct,disabled:K===1,className:`h-10 px-4 ${Le} ${s?"hover:bg-[#1e1e1e]":"hover:bg-white"}`,children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Previous"]}),r.jsxs(W,{variant:"outline",size:"sm",onClick:is,disabled:K===mt,className:`h-10 px-4 ${Le} ${s?"hover:bg-[#1e1e1e]":"hover:bg-white"}`,children:["Next",r.jsx($n,{className:"w-4 h-4 ml-2"})]})]})]})]})]})]}),h&&r.jsx(srt,{account:h,metrics:c}),r.jsxs("div",{className:`border-b-2 ${Le} pb-6 mb-6`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:`text-lg font-medium ${Se}`,children:"Subscription Plans"}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-md ${s?"bg-[#1e1e1e]":"bg-gray-100"}`,children:[r.jsx(RY,{className:`w-4 h-4 ${Y}`}),r.jsx("span",{className:`text-xs ${Y}`,children:"Drag to resize"})]})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:d.map((je,Ce)=>r.jsxs(he,{className:`${$e} border ${Le} relative ${je.isFeatured?"ring-2 ring-yellow-500":""}`,children:[je.isFeatured&&r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10",children:r.jsxs(De,{className:"bg-gradient-to-r from-yellow-500 to-amber-500 text-white border-0 px-3 py-1 shadow-lg",children:[r.jsx(Es,{className:"w-3 h-3 mr-1 fill-white"}),"Most Popular"]})}),r.jsxs(Ke,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Xe,{className:Se,children:je.name}),r.jsx(lc,{className:"w-6 h-6",style:{color:je.color}})]}),r.jsx("div",{className:"mt-2",children:je.discount&&je.discount.type!=="none"&&je.discount.value>0?r.jsxs("div",{children:[r.jsxs("div",{className:`text-sm line-through ${Y}`,children:["$",je.price,"/month"]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("span",{className:`text-3xl ${Se}`,children:["$",je.discount.type==="percentage"?(je.price*(1-je.discount.value/100)).toFixed(2):(je.price-je.discount.value).toFixed(2)]}),r.jsx("span",{className:Y,children:"/month"})]}),r.jsxs("div",{className:`text-xs mt-1 ${s?"text-green-400":"text-green-600"}`,children:["Save ",je.discount.type==="percentage"?`${je.discount.value}%`:`$${je.discount.value}`]})]}):r.jsxs("div",{children:[r.jsxs("span",{className:`text-3xl ${Se}`,children:["$",je.price]}),r.jsx("span",{className:Y,children:"/month"})]})})]}),r.jsxs(_e,{className:"space-y-4",children:[r.jsxs("div",{className:`p-3 rounded-lg ${s?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsx("div",{className:`text-sm ${Y} mb-1`,children:"Active Subscribers"}),r.jsx("div",{className:`text-2xl ${Se}`,children:je.subscribers})]}),r.jsx("div",{className:"space-y-2",children:je.features.map((Qe,He)=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(en,{className:"w-4 h-4 mt-0.5 text-green-600 dark:text-green-400 flex-shrink-0"}),r.jsx("span",{className:`text-sm ${Y}`,children:Qe})]},He))}),r.jsx(W,{variant:"outline",onClick:()=>$(je),className:`w-full ${Le}`,style:{borderColor:je.color,color:je.color},children:"Manage Plan"})]})]},Ce))})]}),r.jsxs("div",{className:"pb-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:`text-lg font-medium ${Se}`,children:"Feature Flags"})}),r.jsxs(he,{className:`${$e} border ${Le}`,children:[r.jsx(Ke,{className:"space-y-3 pb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Xe,{className:`text-xl ${Se}`,children:h?`Active Features - ${h.name}`:"Platform Features"}),r.jsx("p",{className:`text-sm mt-2 ${Y}`,children:h?`Features enabled for this account (Plan: ${h.company||"N/A"})`:"Enable or disable features across all organizations"})]}),r.jsx(De,{variant:"outline",className:`px-3 py-1 ${s?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-indigo-50 text-indigo-700 border-indigo-200"}`,children:h?`${n.filter(je=>je.enabled).length} Active Features`:`${n.filter(je=>je.enabled).length} / ${n.length} Active`})]})}),r.jsx(_e,{className:"px-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:(h?n.filter(je=>je.enabled):n).map(je=>r.jsxs("div",{className:`p-5 rounded-lg border ${Le} ${s?"bg-[#0a0a0a] hover:bg-[#1a1a1a]":"bg-white hover:bg-gray-50"} transition-all duration-200 shadow-sm`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1 pr-4",children:[r.jsx("h4",{className:`font-medium mb-1 ${Se}`,children:je.name}),je.description&&r.jsx("p",{className:`text-xs leading-relaxed ${Y}`,children:je.description})]}),!h&&r.jsx(Rt,{checked:je.enabled,onCheckedChange:()=>tt(je.id),className:"flex-shrink-0"})]}),r.jsx("div",{className:"flex items-center pt-3 border-t border-opacity-50",style:{borderColor:s?"#333":"#e5e7eb"},children:r.jsx("div",{className:"flex items-center space-x-2",children:je.enabled?r.jsxs(r.Fragment,{children:[r.jsx(en,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:"Active"})]}):r.jsxs(r.Fragment,{children:[r.jsx(ln,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),r.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Inactive"})]})})})]},je.id))})})]})]})]}),f&&r.jsx(FZe,{isOpen:!!f,onClose:()=>v(null),owner:f}),x&&r.jsx(BZe,{isOpen:!!x,onClose:()=>g(null),owner:x}),b&&r.jsx(UZe,{isOpen:!!b,onClose:()=>w(null),owner:b,onEdit:()=>{C(b),w(null)},onDelete:()=>{A(b),w(null)}}),N&&r.jsx(zZe,{isOpen:!!N,onClose:()=>C(null),owner:N,onSave:Zt}),S&&r.jsx(VZe,{isOpen:!!S,onClose:()=>A(null),owner:S,onConfirmDelete:yr}),r.jsx(OJe,{isOpen:k,onClose:()=>E(!1),onAdd:Vt}),O&&r.jsx(Htt,{isOpen:!!O,onClose:()=>$(null),plan:O,onSave:tr}),r.jsx(Gtt,{isOpen:ee,onClose:()=>q(!1)}),r.jsx(Ktt,{isOpen:U,onClose:()=>Z(!1)})]})},crt=({onNavigate:t})=>r.jsx(_Je,{children:r.jsx(lrt,{onNavigate:t})}),drt=({onBack:t})=>{const{theme:e}=Nr(),s=e==="dark",n=s?"bg-[#0a0a0a]":"bg-gray-50",a=s?"bg-[#161616]":"bg-white",i=s?"text-white":"text-gray-900",o=s?"text-gray-400":"text-gray-600",l=s?"border-[#333]":"border-gray-200",[c,d]=j.useState(""),[u,h]=j.useState("all"),[m,f]=j.useState("all"),[v,x]=j.useState(1),g=10,{organizations:b,isLoading:w,error:N,refetch:C}=mD({search:c,status:u!=="all"?u:void 0,plan_id:m!=="all"?m:void 0},v,g),{plans:S,error:A}=Hoe(!0),k=N||A,E=b?.length||0,O=Math.ceil(E/g),$=(v-1)*g+1,T=Math.min(v*g,E),I=F=>{re.info(`Viewing ${F.name}`)},L=F=>{re.info(`Editing ${F.name}`)},z=async F=>{window.confirm(`Are you sure you want to delete ${F.name}?`)&&re.info(`Deleting ${F.name}...`)},M=()=>{re.success("Exporting organizations to CSV...")},V=()=>{C(),re.success("Data refreshed")},B=F=>{const J={active:"bg-green-500/10 text-green-600 dark:text-green-500",pending:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-500",inactive:"bg-gray-500/10 text-gray-600 dark:text-gray-500",suspended:"bg-red-500/10 text-red-600 dark:text-red-500"};return r.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${J[F]||J.inactive}`,children:F.charAt(0).toUpperCase()+F.slice(1)})};return k?r.jsx("div",{className:`min-h-screen ${n} p-6`,children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(W,{variant:"outline",onClick:t,className:"mb-4",children:[r.jsx(U0,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),r.jsx("div",{className:`${a} border ${l} rounded-lg p-12`,children:r.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-500/10 flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:`text-2xl font-bold ${i} mb-3`,children:"Database Tables Not Found"}),r.jsx("p",{className:`${o} mb-6`,children:"The organizations and plans tables don't exist in your database yet."}),r.jsxs("div",{className:"text-left bg-gray-900/50 rounded-lg p-6 mb-6",children:[r.jsx("p",{className:"text-sm font-semibold text-white mb-3",children:"To set up the database:"}),r.jsxs("ol",{className:"text-sm text-gray-300 space-y-2 list-decimal list-inside",children:[r.jsxs("li",{children:["Run the database migrations: ",r.jsx("code",{className:"bg-black/40 px-2 py-1 rounded",children:"supabase db push"})]}),r.jsx("li",{children:"Or manually create the tables in Supabase Dashboard"}),r.jsx("li",{children:"Check that you have the correct Supabase credentials in .env"}),r.jsx("li",{children:"Refresh this page after setup"})]})]}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsxs(W,{onClick:()=>window.location.reload(),variant:"outline",children:[r.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Retry"]}),r.jsxs(W,{onClick:t,children:[r.jsx(U0,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})})]})}):r.jsx("div",{className:`min-h-screen ${n} p-6`,children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[t&&r.jsx(W,{variant:"outline",size:"icon",onClick:t,className:`border ${l}`,children:r.jsx(U0,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:`text-2xl font-bold ${i}`,children:"All Organizations"}),r.jsxs("p",{className:o,children:["Showing ",$,"-",T," of ",E," organizations"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(W,{variant:"outline",onClick:V,disabled:w,className:`border ${l}`,children:[r.jsx(Ln,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]}),r.jsxs(W,{variant:"outline",onClick:M,className:`border ${l}`,children:[r.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),r.jsx("div",{className:`${a} border ${l} rounded-lg p-4`,children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(X,{className:o,children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${o}`}),r.jsx(de,{placeholder:"Search by name, email...",value:c,onChange:F=>d(F.target.value),className:`pl-10 ${s?"bg-[#0a0a0a]":"bg-gray-50"} border ${l}`})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:o,children:"Status"}),r.jsxs(sr,{value:u,onValueChange:h,children:[r.jsx(ar,{className:`${s?"bg-[#0a0a0a]":"bg-gray-50"} border ${l}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:`${a} border ${l} z-[9999]`,position:"popper",children:[r.jsx(Ae,{value:"all",children:"All Status"}),r.jsx(Ae,{value:"active",children:"Active"}),r.jsx(Ae,{value:"pending",children:"Pending"}),r.jsx(Ae,{value:"inactive",children:"Inactive"}),r.jsx(Ae,{value:"suspended",children:"Suspended"})]})]})]}),r.jsxs("div",{children:[r.jsx(X,{className:o,children:"Plan"}),r.jsxs(sr,{value:m,onValueChange:f,children:[r.jsx(ar,{className:`${s?"bg-[#0a0a0a]":"bg-gray-50"} border ${l}`,children:r.jsx(nr,{})}),r.jsxs(ir,{className:`${a} border ${l} z-[9999]`,position:"popper",children:[r.jsx(Ae,{value:"all",children:"All Plans"}),S?.map(F=>r.jsx(Ae,{value:F.id,children:F.name},F.id))]})]})]})]})}),r.jsxs("div",{className:`${a} border ${l} rounded-lg overflow-hidden`,children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:`${s?"bg-[#0a0a0a]":"bg-gray-50"} border-b ${l}`,children:r.jsxs("tr",{children:[r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o} uppercase tracking-wider`,children:"Organization"}),r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o} uppercase tracking-wider`,children:"Owner"}),r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o} uppercase tracking-wider`,children:"Plan"}),r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o} uppercase tracking-wider`,children:"Status"}),r.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o} uppercase tracking-wider`,children:"Created"}),r.jsx("th",{className:`px-6 py-3 text-right text-xs font-medium ${o} uppercase tracking-wider`,children:"Actions"})]})}),r.jsx("tbody",{className:`divide-y ${l}`,children:w?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:`px-6 py-12 text-center ${o}`,children:[r.jsx(Ln,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading organizations..."]})}):b?.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:`px-6 py-12 text-center ${o}`,children:"No organizations found"})}):b?.map(F=>r.jsxs("tr",{className:`hover:${s?"bg-[#0a0a0a]":"bg-gray-50"} transition-colors`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:`font-medium ${i}`,children:F.name}),r.jsx("div",{className:`text-sm ${o}`,children:F.owner_email})]})}),r.jsx("td",{className:`px-6 py-4 whitespace-nowrap ${i}`,children:F.owner_name||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${s?"bg-blue-500/10 text-blue-400":"bg-blue-100 text-blue-700"}`,children:F.plan?.name||"No Plan"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(F.status)}),r.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${o}`,children:new Date(F.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsxs(Pn,{children:[r.jsx(Tn,{asChild:!0,children:r.jsx(W,{variant:"ghost",size:"icon",children:r.jsx(wa,{className:"w-4 h-4"})})}),r.jsxs(On,{align:"end",className:`${a} border ${l}`,children:[r.jsxs(Dt,{onClick:()=>I(F),children:[r.jsx(ys,{className:"w-4 h-4 mr-2"}),"View Details"]}),r.jsxs(Dt,{onClick:()=>L(F),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Edit"]}),r.jsxs(Dt,{onClick:()=>z(F),className:"text-red-600 dark:text-red-500",children:[r.jsx(ks,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},F.id))})]})}),!w&&O>1&&r.jsxs("div",{className:`px-6 py-4 border-t ${l} flex items-center justify-between`,children:[r.jsxs("div",{className:`text-sm ${o}`,children:["Page ",v," of ",O]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.max(1,F-1)),disabled:v===1,className:`border ${l}`,children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx(W,{variant:"outline",size:"sm",onClick:()=>x(F=>Math.min(O,F+1)),disabled:v===O,className:`border ${l}`,children:r.jsx($n,{className:"w-4 h-4"})})]})]})]})]})})},urt=()=>{const{theme:t}=Nr(),[e,s]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(""),[d,u]=j.useState("all"),[h,m]=j.useState(!0),f=t==="dark",v=f?"bg-gray-800":"bg-white",x=f?"text-gray-100":"text-gray-900",g=f?"text-gray-400":"text-gray-600",b=f?"border-gray-700":"border-gray-200",w=async()=>{m(!0);try{const{data:C,error:S}=await pt.from("user_profiles").select("*").order("created_at",{ascending:!1});if(S)throw S;const{data:A}=await pt.auth.admin.listUsers(),k=(C||[]).map(E=>{const O=A?.users?.find($=>$.id===E.id);return{id:E.id,email:O?.email||"No email",first_name:E.first_name,last_name:E.last_name,role:E.role,organization_id:E.organization_id,stripe_account_id:E.metadata?.stripe_account_id,created_at:E.created_at}});s(k),a(k)}catch(C){console.error("Failed to fetch users:",C),re.error("Failed to load users",{description:C?.message||"Unknown error"})}finally{m(!1)}};j.useEffect(()=>{let C=e;l&&(C=C.filter(S=>S.email.toLowerCase().includes(l.toLowerCase())||S.first_name?.toLowerCase().includes(l.toLowerCase())||S.last_name?.toLowerCase().includes(l.toLowerCase()))),d==="connected"?C=C.filter(S=>S.stripe_account_id):d==="not_connected"&&(C=C.filter(S=>!S.stripe_account_id)),a(C)},[l,d,e]);const N=async(C,S)=>{try{const{error:A}=await pt.from("user_profiles").update({metadata:{stripe_account_id:S}}).eq("id",C);if(A)throw A;re.success("Account linked successfully!"),await w()}catch(A){console.error("Failed to update user:",A),re.error("Failed to link account",{description:A?.message||"Unknown error"})}};return j.useEffect(()=>{w()},[]),r.jsx("div",{className:"min-h-screen p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:`text-3xl font-bold ${x}`,children:"User Stripe Accounts"}),r.jsx("p",{className:g,children:"Manage Stripe Connect accounts for users"})]}),r.jsxs(W,{onClick:w,disabled:h,variant:"outline",children:[r.jsx(Ln,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(he,{className:`${v} border ${b}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${g}`,children:"Total Users"}),r.jsx("p",{className:`text-2xl font-bold ${x}`,children:e.length})]}),r.jsx(Xr,{className:`w-8 h-8 ${g}`})]})})}),r.jsx(he,{className:`${v} border ${b}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${g}`,children:"Connected"}),r.jsx("p",{className:`text-2xl font-bold ${x}`,children:e.filter(C=>C.stripe_account_id).length})]}),r.jsx(rn,{className:"w-8 h-8 text-emerald-500"})]})})}),r.jsx(he,{className:`${v} border ${b}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm ${g}`,children:"Not Connected"}),r.jsx("p",{className:`text-2xl font-bold ${x}`,children:e.filter(C=>!C.stripe_account_id).length})]}),r.jsx(rn,{className:"w-8 h-8 text-amber-500"})]})})})]}),r.jsx(he,{className:`${v} border ${b}`,children:r.jsx(_e,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(oa,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${g}`}),r.jsx(de,{placeholder:"Search by name or email...",value:l,onChange:C=>c(C.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{variant:d==="all"?"default":"outline",onClick:()=>u("all"),children:"All"}),r.jsx(W,{variant:d==="connected"?"default":"outline",onClick:()=>u("connected"),children:"Connected"}),r.jsx(W,{variant:d==="not_connected"?"default":"outline",onClick:()=>u("not_connected"),children:"Not Connected"})]})]})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(he,{className:`${v} border ${b}`,children:[r.jsxs(Ke,{children:[r.jsx(Xe,{className:x,children:"Users"}),r.jsxs(Ft,{className:g,children:[n.length," user",n.length!==1?"s":""]})]}),r.jsx(_e,{className:"space-y-2 max-h-[600px] overflow-y-auto",children:h?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ln,{className:`w-8 h-8 ${g} animate-spin mx-auto`}),r.jsx("p",{className:`mt-2 ${g}`,children:"Loading users..."})]}):n.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Xr,{className:`w-12 h-12 ${g} mx-auto mb-2`}),r.jsx("p",{className:g,children:"No users found"})]}):n.map(C=>r.jsx("div",{onClick:()=>o(C),className:`p-3 rounded-lg cursor-pointer transition-colors ${i?.id===C.id?f?"bg-blue-900/30 border-blue-500":"bg-blue-50 border-blue-300":f?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border ${b}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:`font-medium ${x}`,children:C.first_name&&C.last_name?`${C.first_name} ${C.last_name}`:C.email}),C.stripe_account_id&&r.jsx(De,{variant:"outline",className:"border-emerald-500 text-emerald-500 text-xs",children:"Connected"})]}),r.jsx("p",{className:`text-sm ${g}`,children:C.email}),C.role&&r.jsx(De,{variant:"outline",className:"text-xs mt-1",children:C.role})]}),r.jsx($n,{className:`w-5 h-5 ${g}`})]})},C.id))})]}),r.jsx("div",{children:i?r.jsx(hle,{userId:i.id,userEmail:i.email,userName:i.first_name&&i.last_name?`${i.first_name} ${i.last_name}`:i.email,organizationId:i.organization_id,existingAccountId:i.stripe_account_id,onAccountLinked:C=>N(i.id,C)}):r.jsx(he,{className:`${v} border ${b}`,children:r.jsxs(_e,{className:"p-12 text-center",children:[r.jsx(rn,{className:`w-16 h-16 ${g} mx-auto mb-4`}),r.jsx("p",{className:`text-lg font-medium ${x} mb-2`,children:"Select a User"}),r.jsx("p",{className:g,children:"Choose a user from the list to manage their Stripe Connect account"})]})})})]})]})})},hrt=()=>{const{theme:t}=Nr(),[e,s]=j.useState("loading"),[n,a]=j.useState("Processing Stripe connection..."),[i,o]=j.useState(null),[l,c]=j.useState("/"),d=t==="dark",u=d?"bg-gray-800":"bg-white",h=d?"text-gray-100":"text-gray-900",m=d?"text-gray-400":"text-gray-600";j.useEffect(()=>{(async()=>{try{const x=new URLSearchParams(window.location.search),g=x.get("code"),b=x.get("state"),w=x.get("error"),N=x.get("error_description");if(w){s("error"),a(N||"OAuth authorization failed"),re.error("Connection failed",{description:N||w});return}if(!g||!b){s("error"),a("Missing required OAuth parameters"),re.error("Invalid OAuth callback");return}let C;try{C=JSON.parse(atob(b))}catch{s("error"),a("Invalid state parameter"),re.error("Invalid OAuth state");return}C.return_url&&c(C.return_url);const S=await fetch("/api/stripe-connect/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:g,user_id:C.user_id,organization_id:C.organization_id,email:C.email,name:C.name})});if(!S.ok)throw new Error("Failed to exchange OAuth code");const A=await S.json();if(A.success&&A.stripe_user_id)o(A.stripe_user_id),s("success"),a("Successfully connected your Stripe account!"),re.success("Account linked!",{description:`Stripe account ${A.stripe_user_id} connected`}),setTimeout(()=>{window.location.href=C.return_url||"/"},3e3);else throw new Error(A.error||"Failed to link account")}catch(x){console.error("OAuth callback error:",x),s("error"),a(x.message||"Failed to process OAuth callback"),re.error("Connection failed",{description:x.message})}})()},[]);const f=()=>{window.location.href=l};return r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:r.jsxs(he,{className:`${u} max-w-md w-full`,children:[r.jsx(Ke,{children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e==="loading"&&r.jsx(ia,{className:"w-16 h-16 text-blue-500 animate-spin"}),e==="success"&&r.jsx(en,{className:"w-16 h-16 text-emerald-500"}),e==="error"&&r.jsx(ln,{className:"w-16 h-16 text-red-500"}),r.jsxs("div",{className:"text-center",children:[r.jsxs(Xe,{className:h,children:[e==="loading"&&"Connecting...",e==="success"&&"Success!",e==="error"&&"Connection Failed"]}),r.jsx(Ft,{className:m,children:n})]})]})}),r.jsxs(_e,{className:"space-y-4",children:[i&&r.jsxs("div",{className:`p-3 rounded-lg ${d?"bg-gray-700":"bg-gray-50"}`,children:[r.jsx("p",{className:`text-sm ${m} mb-1`,children:"Connected Account ID:"}),r.jsx("code",{className:`text-sm ${h} font-mono`,children:i})]}),e==="success"&&r.jsx("div",{className:`p-3 rounded-lg ${d?"bg-emerald-900/20":"bg-emerald-50"} border ${d?"border-emerald-800":"border-emerald-200"}`,children:r.jsx("p",{className:`text-sm ${h}`,children:"Redirecting you back in 3 seconds..."})}),e==="error"&&r.jsxs(W,{onClick:f,className:"w-full",variant:"outline",children:[r.jsx(U0,{className:"w-4 h-4 mr-2"}),"Return to Dashboard"]}),e==="loading"&&r.jsx("div",{className:`p-3 rounded-lg ${d?"bg-blue-900/20":"bg-blue-50"} border ${d?"border-blue-800":"border-blue-200"}`,children:r.jsx("p",{className:`text-xs ${m}`,children:"Please wait while we securely connect your Stripe account..."})})]})]})})};var mrt=(t,e,s,n,a,i,o,l)=>{let c=document.documentElement,d=["light","dark"];function u(f){(Array.isArray(t)?t:[t]).forEach(v=>{let x=v==="class",g=x&&i?a.map(b=>i[b]||b):a;x?(c.classList.remove(...g),c.classList.add(i&&i[f]?i[f]:f)):c.setAttribute(v,f)}),h(f)}function h(f){l&&d.includes(f)&&(c.style.colorScheme=f)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)u(n);else try{let f=localStorage.getItem(e)||s,v=o&&f==="system"?m():f;u(v)}catch{}},frt=j.createContext(void 0),prt={setTheme:t=>{},themes:[]},xrt=()=>{var t;return(t=j.useContext(frt))!=null?t:prt};j.memo(({forcedTheme:t,storageKey:e,attribute:s,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,themes:l,nonce:c,scriptProps:d})=>{let u=JSON.stringify([s,e,i,t,l,o,n,a]).slice(1,-1);return j.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${mrt.toString()})(${u})`}})});const EE=({...t})=>{const{theme:e="system"}=xrt();return r.jsx(Bye,{theme:e,className:"toaster group",position:"top-right",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function grt(){const[t,e]=j.useState(null),{currentUser:s,isLoading:n,login:a}=no();j.useEffect(()=>{(async()=>{})()},[s,n,a]);const i=t??(s?.role==="system-admin"?"system-admin":"dashboard"),o=()=>{switch(i){case"dashboard":return r.jsx(zW,{onNavigate:e});case"inbox":return r.jsx(ILe,{});case"bookings":return r.jsx(BVe,{});case"games":return r.jsx(eWe,{onNavigate:e});case"customers":return r.jsx(bWe,{});case"payment-history":return r.jsx(mZe,{});case"campaigns":return r.jsx(wWe,{});case"marketing":return r.jsx(EWe,{});case"aiagents":return r.jsx(DWe,{});case"staff":return r.jsx(aqe,{});case"reports":return r.jsx(iqe,{});case"media":return r.jsx(lqe,{});case"waivers":return r.jsx(vKe,{});case"venues":return r.jsx(DQe,{});case"widgets":return r.jsx(OQe,{});case"notifications":return r.jsx(fZe,{});case"settings":return r.jsx(RQe,{});case"myaccount":return r.jsx(MQe,{onNavigate:e});case"account":return r.jsx(FQe,{});case"profile":return r.jsx(LQe,{});case"billing":return r.jsx(BQe,{});case"team":return r.jsx(UQe,{});case"account-settings":return r.jsx(dZe,{});case"backend-dashboard":return r.jsx(TZe,{});case"system-admin":return r.jsx(crt,{onNavigate:e});case"view-all-organizations":return r.jsx(drt,{onBack:()=>e("system-admin")});case"user-stripe-accounts":return r.jsx(urt,{});case"stripe-oauth-callback":return r.jsx(hrt,{});case"gift-vouchers":return r.jsx(OZe,{});default:return r.jsx(zW,{onNavigate:e})}};return n?r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-white dark:bg-[#0a0a0a]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-[#4f46e5] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading BookingTMS..."})]})}):s?r.jsx(iwe,{children:r.jsx(UQ,{currentPage:i,onNavigate:e,children:o()})}):r.jsx(pZe,{})}function Dj(){const[t,e]=j.useState(!1),[s,n]=j.useState(!1),[a,i]=j.useState(!0);return j.useEffect(()=>{const o=new URLSearchParams(window.location.search),l=window.location.pathname;if(o.has("beta")||l==="/beta-login"||l==="/beta-login/"||o.get("login")==="beta"){n(!0),i(!1);return}if(o.has("widget")||o.has("widgetId")||l.startsWith("/embed")){e(!0),i(!1);return}},[]),a&&!t&&!s?r.jsx(d5e,{onLoadingComplete:()=>i(!1)}):s?r.jsx(H0,{children:r.jsxs(CM,{children:[r.jsx(xZe,{}),r.jsx(EE,{})]})}):t?r.jsxs(H0,{children:[r.jsx(zQe,{}),r.jsx(EE,{})]}):r.jsx(H0,{children:r.jsx(CM,{children:r.jsxs(Qtt,{children:[r.jsx(grt,{}),r.jsx(EE,{})]})})})}function vrt(){const{slug:t}=yY(),e=vY(),{theme:s}=Nr(),n=s==="dark",[a,i]=j.useState(null),[o,l]=j.useState(!0),[c,d]=j.useState(!1);j.useEffect(()=>{if(!t){d(!0),l(!1);return}u()},[t]);const u=async()=>{try{const{data:f,error:v}=await pt.from("organizations").select("*").eq("slug",t).single();if(v||!f){d(!0);return}i(f)}catch(f){console.error("Error fetching venue:",f),d(!0)}finally{l(!1)}},h=()=>a?{"@context":"https://schema.org","@type":"LocalBusiness","@id":`https://bookingtms.com/${a.slug}`,name:a.name,description:a.description||a.tagline||`Book your experience at ${a.name}`,image:a.cover_image,logo:a.logo_image,url:`https://bookingtms.com/${a.slug}`,telephone:a.phone,email:a.owner_email,address:{"@type":"PostalAddress",streetAddress:a.address},sameAs:[a.social_facebook,a.social_instagram,a.social_twitter,a.website].filter(Boolean),priceRange:"$$",aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",reviewCount:"127"}}:null;if(o)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading venue..."})]})});if(c||!a)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Venue Not Found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The venue you're looking for doesn't exist."}),r.jsx(W,{onClick:()=>e("/"),children:"Go Home"})]})});const m=h();return r.jsxs(r.Fragment,{children:[r.jsxs(PY,{children:[r.jsxs("title",{children:[a.name," - Book Your Experience | BookingTMS"]}),r.jsx("meta",{name:"description",content:a.description||a.tagline||`Experience ${a.name}. Book your slot today!`}),r.jsx("meta",{name:"keywords",content:`${a.name}, booking, escape room, entertainment, ${a.address}`}),r.jsx("meta",{property:"og:type",content:"business.business"}),r.jsx("meta",{property:"og:url",content:`https://bookingtms.com/${a.slug}`}),r.jsx("meta",{property:"og:title",content:`${a.name} - Book Your Experience`}),r.jsx("meta",{property:"og:description",content:a.description||a.tagline}),r.jsx("meta",{property:"og:image",content:a.cover_image}),r.jsx("meta",{property:"twitter:card",content:"summary_large_image"}),r.jsx("meta",{property:"twitter:url",content:`https://bookingtms.com/${a.slug}`}),r.jsx("meta",{property:"twitter:title",content:`${a.name} - Book Your Experience`}),r.jsx("meta",{property:"twitter:description",content:a.description||a.tagline}),r.jsx("meta",{property:"twitter:image",content:a.cover_image}),r.jsx("link",{rel:"canonical",href:`https://bookingtms.com/${a.slug}`}),m&&r.jsx("script",{type:"application/ld+json",children:JSON.stringify(m)})]}),r.jsxs("div",{className:`min-h-screen ${n?"bg-[#0a0a0a] text-white":"bg-gray-50 text-gray-900"}`,children:[r.jsxs("div",{className:"relative h-[400px] bg-cover bg-center",style:{backgroundImage:a.cover_image?`url(${a.cover_image})`:"linear-gradient(to right, #4f46e5, #7c3aed)"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/50"}),r.jsx("div",{className:"relative container mx-auto px-4 h-full flex items-end pb-12",children:r.jsxs("div",{className:"flex items-end gap-6",children:[a.logo_image&&r.jsx("img",{src:a.logo_image,alt:a.name,className:"w-32 h-32 rounded-2xl border-4 border-white shadow-xl object-cover"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h1",{className:"text-5xl font-bold text-white mb-2",children:a.name}),a.tagline&&r.jsx("p",{className:"text-xl text-gray-200",children:a.tagline}),r.jsx("div",{className:"flex items-center gap-2 mt-3",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Es,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"}),r.jsx("span",{className:"text-white font-semibold",children:"4.8"}),r.jsx("span",{className:"text-gray-300",children:"(127 reviews)"})]})})]})]})})]}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.description&&r.jsxs("section",{className:`p-6 rounded-xl ${n?"bg-[#161616]":"bg-white"} shadow-lg`,children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About Us"}),r.jsx("p",{className:`text-lg leading-relaxed ${n?"text-gray-300":"text-gray-700"}`,children:a.description})]}),r.jsxs("section",{className:`p-8 rounded-xl ${n?"bg-gradient-to-r from-indigo-900 to-purple-900":"bg-gradient-to-r from-indigo-600 to-purple-600"} text-white shadow-lg`,children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Book?"}),r.jsx("p",{className:"text-lg mb-6",children:"Choose your preferred date and time to start your adventure!"}),r.jsxs(W,{size:"lg",className:"bg-white text-indigo-600 hover:bg-gray-100 text-lg px-8 py-6",onClick:()=>{},children:[r.jsx(qs,{className:"w-5 h-5 mr-2"}),"Book Now"]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("section",{className:`p-6 rounded-xl ${n?"bg-[#161616]":"bg-white"} shadow-lg`,children:[r.jsx("h3",{className:"text-xl font-bold mb-4",children:"Contact Information"}),r.jsxs("div",{className:"space-y-4",children:[a.address&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dl,{className:"w-5 h-5 text-indigo-600 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Location"}),r.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:a.address})]})]}),a.phone&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(la,{className:"w-5 h-5 text-indigo-600 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Phone"}),r.jsx("a",{href:`tel:${a.phone}`,className:"text-indigo-600 hover:underline",children:a.phone})]})]}),a.owner_email&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ds,{className:"w-5 h-5 text-indigo-600 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Email"}),r.jsx("a",{href:`mailto:${a.owner_email}`,className:"text-indigo-600 hover:underline",children:a.owner_email})]})]}),a.website&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ml,{className:"w-5 h-5 text-indigo-600 mt-1 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Website"}),r.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline",children:"Visit Website"})]})]})]})]}),r.jsxs("section",{className:`p-6 rounded-xl ${n?"bg-[#161616]":"bg-white"} shadow-lg`,children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5 text-indigo-600"}),"Business Hours"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Monday - Friday"}),r.jsx("span",{className:"font-medium",children:"10:00 AM - 10:00 PM"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Saturday - Sunday"}),r.jsx("span",{className:"font-medium",children:"9:00 AM - 11:00 PM"})]})]})]}),r.jsxs("section",{className:`p-6 rounded-xl ${n?"bg-indigo-950/50 border border-indigo-900":"bg-indigo-50 border border-indigo-200"}`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-indigo-600 dark:text-indigo-400",children:"Are you the owner?"}),r.jsx("p",{className:`text-sm mb-4 ${n?"text-gray-300":"text-gray-700"}`,children:"Manage your venue, bookings, and settings"}),r.jsxs(W,{variant:"outline",className:"w-full border-indigo-600 text-indigo-600 hover:bg-indigo-600 hover:text-white",onClick:()=>e(`/${a.slug}/admin`),children:[r.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Admin Login"]})]})]})]})})]})]})}function yrt(){const{slug:t}=yY(),e=vY(),{theme:s}=Nr(),n=s==="dark",[a,i]=j.useState(""),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(!1),[m,f]=j.useState(!1),[v,x]=j.useState(""),[g,b]=j.useState(!1);j.useEffect(()=>{if(!t){b(!0);return}w()},[t]);const w=async()=>{try{const{data:S,error:A}=await pt.from("organizations").select("name").eq("slug",t).single();if(A||!S){b(!0);return}i(S.name)}catch(S){console.error("Error fetching venue:",S),b(!0)}},N=async S=>{S.preventDefault(),x(""),f(!0);try{const{data:A,error:k}=await pt.auth.signInWithPassword({email:o,password:c});if(k){x("Invalid email or password"),f(!1);return}if(!A.user){x("Login failed. Please try again."),f(!1);return}const{data:E,error:O}=await pt.from("organization_members").select("organization_id, role, organizations!inner(slug)").eq("user_id",A.user.id).eq("organizations.slug",t).single();if(O||!E||E.role!=="owner"){await pt.auth.signOut(),x("You do not have owner access to this venue"),f(!1);return}e(`/${t}/admin/dashboard`)}catch(A){console.error("Login error:",A),x("An error occurred. Please try again."),f(!1)}},C=()=>{e(`/${t}/admin/forgot-password`)};return g?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Venue Not Found"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The venue you're trying to access doesn't exist."}),r.jsx(W,{onClick:()=>e("/"),children:"Go Home"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs(PY,{children:[r.jsxs("title",{children:[a?`${a} - Admin Login`:"Admin Login"," | BookingTMS"]}),r.jsx("meta",{name:"description",content:`Login to manage ${a}`}),r.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),r.jsxs("div",{className:`min-h-screen flex ${n?"bg-[#0a0a0a]":"bg-gray-50"}`,children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-indigo-600 to-purple-700 p-12 flex-col justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"BookingTMS"}),r.jsx("p",{className:"text-xl text-indigo-100",children:"Professional venue management platform"})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/20 flex items-center justify-center flex-shrink-0",children:r.jsx(Mn,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-1",children:"Secure Access"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:"Your data is protected with enterprise-grade security"})]})]})}),r.jsx("div",{className:"text-indigo-100 text-sm",children:" 2024 BookingTMS. All rights reserved."})]}),r.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs(W,{variant:"ghost",className:"mb-6",onClick:()=>e(`/${t}`),children:[r.jsx(U0,{className:"w-4 h-4 mr-2"}),"Back to Venue"]}),r.jsxs("div",{className:`${n?"bg-[#161616] border border-[#333]":"bg-white border border-gray-200"} rounded-2xl shadow-xl p-8`,children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:`text-3xl font-bold ${n?"text-white":"text-gray-900"} mb-2`,children:"Admin Login"}),a&&r.jsx("p",{className:`text-lg ${n?"text-gray-400":"text-gray-600"}`,children:a}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sign in to manage your venue"})]}),v&&r.jsx("div",{className:"mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hs,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:v})]})}),r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"email",className:n?"text-gray-300":"text-gray-700",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(de,{id:"email",type:"email",value:o,onChange:S=>l(S.target.value),placeholder:"owner@example.com",required:!0,className:`pl-11 h-12 ${n?"bg-[#1a1a1a] border-[#333] text-white":"bg-gray-50 border-gray-300"}`,autoComplete:"email"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{htmlFor:"password",className:n?"text-gray-300":"text-gray-700",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx(de,{id:"password",type:u?"text":"password",value:c,onChange:S=>d(S.target.value),placeholder:"",required:!0,className:`pl-11 pr-11 h-12 ${n?"bg-[#1a1a1a] border-[#333] text-white":"bg-gray-50 border-gray-300"}`,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?r.jsx(Pd,{className:"w-5 h-5"}):r.jsx(ys,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsx("button",{type:"button",onClick:C,className:"text-sm text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Forgot password?"})}),r.jsx(W,{type:"submit",disabled:m,className:"w-full h-12 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:m?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign In"})]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-[#333]",children:r.jsxs("p",{className:`text-center text-sm ${n?"text-gray-400":"text-gray-600"}`,children:["Need help? Contact"," ",r.jsx("a",{href:"mailto:support@bookingtms.com",className:"text-indigo-600 hover:underline",children:"support@bookingtms.com"})]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-600",children:"This is a secure admin area. All activity is monitored and logged."})})]})})]})]})}const tY="admin_waivers",brt="admin_waiver_templates";function v1(t){return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function wrt(t){return t.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_")}function jrt(){const{theme:t}=Nr(),e=t==="dark",s=e?"text-white":"text-gray-900",n=e?"text-[#a3a3a3]":"text-gray-600",a=e?"border-[#2a2a2a]":"border-gray-200",i=e?"bg-[#161616]":"bg-white",o=e?"bg-[#1e1e1e]":"bg-gray-50",[l,c]=j.useState(null),[d,u]=j.useState(!1),[h,m]=j.useState({}),[f,v]=j.useState(!1),[x,g]=j.useState(!1),b=j.useMemo(()=>{const O=window.location.pathname.split("/");return O[O.length-1]||""},[]);j.useEffect(()=>{const O=async()=>{try{const{data:T,error:I}=await Wr.from("waiver_templates").select("*").eq("id",b).single();if(I){console.error("Supabase error loading template:",I);const L=localStorage.getItem(brt),M=(L?JSON.parse(L):[]).find(V=>V.id===b);M?(c(M),$(M)):u(!0);return}if(T){const L={id:T.id,name:T.name,description:T.description||"",type:T.type,content:T.content,status:T.status,requiredFields:Array.isArray(T.required_fields)?T.required_fields:[],assignedGames:Array.isArray(T.assigned_games)?T.assigned_games:[],createdDate:T.created_at?v1(new Date(T.created_at)):"",lastModified:T.updated_at?v1(new Date(T.updated_at)):"",usageCount:T.usage_count||0};c(L),$(L)}else u(!0)}catch(T){console.error("Failed to load template for WaiverForm",T),u(!0)}},$=T=>{const I={};T.requiredFields?.forEach(L=>{I[L]=""}),I["Booking ID"]="",I.Game="",m(I)};b&&O()},[b]);const w=j.useMemo(()=>{if(!l||!l.content)return"";const O={};return Object.entries(h).forEach(([$,T])=>{const I=wrt($);O[I]=T||""}),O.DATE=v1(new Date),O.SIGNATURE=h.Signature||h["Full Name"]||h["Parent/Guardian Name"]||"",l.content.replace(/\{([A-Z0-9_]+)\}/g,($,T)=>O[T]??`{${T}}`)},[l,h]),N=(O,$)=>{m(T=>({...T,[O]:$}))},C=O=>{const $=O.toLowerCase();return $.includes("medical")||$.includes("allergies")||$.includes("medications")||$.includes("symptom")},S=O=>{const $=O.toLowerCase();return $.includes("email")?"email":$.includes("phone")?"tel":$.includes("date")?"date":"text"},A=()=>h["Full Name"]||h["Minor Name"]||h["Parent/Guardian Name"]||"Anonymous",k=()=>h.Email||h["Parent Email"]||"-",E=async()=>{if(!l)return;const O=(l.requiredFields||[]).filter(I=>!(h[I]&&h[I].trim().length>0));if(O.length>0){re.error(`Please fill: ${O.join(", ")}`);return}if(!f){re.error("Please accept the terms to proceed");return}const $=new Date,T=`WV-${String($.getTime()).slice(-6)}`;try{const{data:I,error:L}=await Wr.from("waivers").insert({waiver_code:T,template_id:l.id,participant_name:A(),participant_email:k(),participant_phone:h.Phone||h["Parent Phone"]||"",booking_id:h["Booking ID"]||null,game_name:h.Game||l.assignedGames?.[0]||"Unknown",status:"signed",signed_at:$.toISOString(),waiver_content:w,form_data:h,is_minor:!!(h["Minor Name"]||h["Parent/Guardian Name"]),attendee_name:A(),attendee_email:k(),attendee_phone:h.Phone||h["Parent Phone"]||"",check_in_status:"pending"}).select().single();if(L)throw console.error("Supabase waiver error:",L),L;const{error:z}=await Wr.from("waiver_templates").update({usage_count:(l.usageCount||0)+1,updated_at:$.toISOString()}).eq("id",l.id);z&&console.error("Template update error:",z);try{const M={id:T,customer:A(),email:k(),booking:h["Booking ID"]||"-",game:h.Game||l.assignedGames?.[0]||"Unknown",signedDate:v1($),status:"signed",templateName:l.name,content:w},V=localStorage.getItem(tY),B=V?JSON.parse(V):[];B.unshift(M),localStorage.setItem(tY,JSON.stringify(B))}catch(M){console.error("localStorage backup failed:",M)}re.success("Waiver signed and saved to database!"),g(!0)}catch(I){console.error("Failed to save waiver record",I),re.error("Failed to save waiver. Please try again.")}};return d?r.jsx("div",{className:`min-h-screen ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:r.jsx("div",{className:"max-w-3xl mx-auto p-6",children:r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(hs,{className:e?"text-red-400":"text-red-600"}),"Waiver Template Not Found"]})}),r.jsx(_e,{children:r.jsx("p",{className:n,children:"The requested waiver template could not be located. Please check the link or contact the administrator."})})]})})}):l?r.jsx("div",{className:`min-h-screen ${e?"bg-[#0a0a0a]":"bg-gray-50"}`,children:r.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[r.jsxs(he,{className:`${i} border ${a}`,children:[r.jsx(Ke,{children:r.jsxs(Xe,{className:"flex items-center gap-2",children:[r.jsx(Jn,{className:"w-5 h-5"}),l.name]})}),r.jsxs(_e,{className:"space-y-4",children:[r.jsx("div",{className:`p-4 rounded-lg border ${a} ${o}`,children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(ma,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n}`,children:"Type"}),r.jsx("p",{className:s,children:l.type})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n}`,children:"Created"}),r.jsx("p",{className:s,children:l.createdDate})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(Na,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n}`,children:"Assigned Games"}),r.jsx("p",{className:s,children:l.assignedGames?.length?l.assignedGames.join(", "):"None"})]})]}),r.jsxs("div",{className:`flex items-center gap-2 text-sm ${n}`,children:[r.jsx(Lt,{className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-xs ${n}`,children:"Status"}),r.jsx("p",{className:s,children:l.status})]})]})]})}),l.description&&r.jsx("p",{className:n,children:l.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:l.requiredFields?.map(O=>r.jsx(De,{variant:"secondary",className:e?"bg-[#2a2a2a] text-[#a3a3a3] border-0":"",children:O},O))}),r.jsx(Ze,{className:"my-4"}),r.jsxs("div",{className:"space-y-4",children:[l.requiredFields?.map(O=>r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:O}),C(O)?r.jsx(Ps,{value:h[O]||"",onChange:$=>N(O,$.target.value),rows:4}):r.jsx(de,{type:S(O),value:h[O]||"",onChange:$=>N(O,$.target.value)})]},O)),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Booking ID (optional)"}),r.jsx(de,{value:h["Booking ID"]||"",onChange:O=>N("Booking ID",O.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{children:"Game (optional)"}),r.jsx(de,{value:h.Game||"",onChange:O=>N("Game",O.target.value)})]})]}),r.jsx("div",{className:`p-4 rounded-lg border ${a} ${o}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("input",{id:"agree",type:"checkbox",checked:f,onChange:O=>v(O.target.checked),className:"mt-1"}),r.jsx(X,{htmlFor:"agree",className:n,children:"I confirm that the information provided is accurate and I agree to the terms outlined in this waiver."})]})}),r.jsxs("div",{className:`p-4 rounded-lg border ${a} ${o}`,children:[r.jsx("h3",{className:`text-sm mb-2 ${s}`,children:"Waiver Content"}),l.content?r.jsx("pre",{className:`text-xs whitespace-pre-wrap ${n}`,children:w}):r.jsx("p",{className:n,children:"No template content provided."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(W,{onClick:E,className:"h-11",children:"Sign & Submit"}),r.jsx(W,{variant:"outline",className:"h-11",onClick:()=>g(!0),children:"Preview"})]})]})]})]}),x&&r.jsx(mr,{open:x,onOpenChange:g,children:r.jsxs(fr,{className:e?"bg-[#161616] border-[#2a2a2a]":"",children:[r.jsxs(br,{children:[r.jsxs(pr,{className:"flex items-center gap-2",children:[r.jsx(Lt,{className:e?"text-emerald-400":"text-green-600"}),"Waiver Ready"]}),r.jsx(wr,{children:"The waiver information has been prepared. If you clicked Submit, it has been saved to records."})]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(ma,{className:"w-4 h-4"}),r.jsx("span",{children:A()})]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(Ds,{className:"w-4 h-4"}),r.jsx("span",{children:k()})]}),r.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[r.jsx(qs,{className:"w-4 h-4"}),r.jsx("span",{children:v1(new Date)})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(W,{variant:"outline",onClick:()=>window.location.href="/waivers",children:"Go to Admin"}),r.jsx(W,{onClick:()=>g(!1),children:"Close"})]})]})})]})}):null}const Nrt=pde([{path:"/admin/*",element:r.jsx(Dj,{})},{path:"/system-admin/*",element:r.jsx(Dj,{})},{path:"/waiver-form/:id",element:r.jsx(H0,{children:r.jsx(jrt,{})})},{path:"/:slug",element:r.jsx(RE,{children:r.jsx(H0,{children:r.jsx(vrt,{})})})},{path:"/:slug/admin",element:r.jsx(RE,{children:r.jsx(H0,{children:r.jsx(yrt,{})})})},{path:"/:slug/admin/dashboard",element:r.jsx(Dj,{})},{path:"/",element:r.jsx(Dj,{})},{path:"*",element:r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404 - Page Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The page you're looking for doesn't exist."}),r.jsx("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Go Home"})]})})}]);Jle.createRoot(document.getElementById("root")).render(r.jsx(Sde,{router:Nrt}));export{ea as _,C2 as c,cn as g};
